Merge branch 'release/1.5.0'

-import org.apache.geode.distributed.internal.DM;
+import org.apache.geode.distributed.internal.ClusterDistributionManager;
-  private TXStateProxy prepForTransaction(DistributionManager dm) throws InterruptedException {
+  private TXStateProxy prepForTransaction(ClusterDistributionManager dm)
+      throws InterruptedException {
-  protected void process(final DistributionManager dm) {
+  protected void process(final ClusterDistributionManager dm) {
-        thr = new CacheClosedException(LocalizedStrings.PartitionMessage_REMOTE_CACHE_IS_CLOSED_0
-            .toLocalizedString(dm.getId()));
+        InternalCache cache = dm.getCache();
+        if (cache != null) {
+          thr = cache
+              .getCacheClosedException(LocalizedStrings.PartitionMessage_REMOTE_CACHE_IS_CLOSED_0
+                  .toLocalizedString(dm.getId()));
+        } else {
+          thr = new CacheClosedException(LocalizedStrings.PartitionMessage_REMOTE_CACHE_IS_CLOSED_0
+              .toLocalizedString(dm.getId()));
+        }
-  protected boolean operateOnDistributedRegion(final DistributionManager dm, DistributedRegion r)
-      throws ForceReattemptException {
+  protected boolean operateOnDistributedRegion(final ClusterDistributionManager dm,
+      DistributedRegion r) throws ForceReattemptException {
-  private boolean checkCacheClosing(DistributionManager dm) {
+  private boolean checkCacheClosing(ClusterDistributionManager dm) {
-  private boolean checkDSClosing(DistributionManager dm) {
+  private boolean checkDSClosing(ClusterDistributionManager dm) {
-  public synchronized boolean sendReplyForOneResult(DM dm, Object oneResult, boolean lastResult,
-      boolean sendResultsInOrder)
+  public synchronized boolean sendReplyForOneResult(DistributionManager dm, Object oneResult,
+      boolean lastResult, boolean sendResultsInOrder)
-  protected void sendReply(InternalDistributedMember member, int procId, DM dm, ReplyException ex,
-      Object result, int msgNum, boolean lastResult, boolean sendResultsInOrder) {
+  protected void sendReply(InternalDistributedMember member, int procId, DistributionManager dm,
+      ReplyException ex, Object result, int msgNum, boolean lastResult,
+      boolean sendResultsInOrder) {
-    return DistributionManager.REGION_FUNCTION_EXECUTION_EXECUTOR;
+    return ClusterDistributionManager.REGION_FUNCTION_EXECUTION_EXECUTOR;

UPD40 INS44 INS44 MOV44 MOV44 UPD43 UPD43 UPD43 INS43 INS42 INS43 INS42 UPD42 UPD42 UPD42 INS42 INS42 UPD40 INS8 INS60 INS25 INS41 INS43 INS59 INS27 INS8 MOV8 INS42 INS42 INS32 INS42 INS33 INS21 INS42 INS42 INS7 INS42 INS32 INS42 INS42 INS32 INS40 INS42 INS32 INS42 INS42 DEL41 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44