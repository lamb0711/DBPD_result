GEODE-4476: Remove getInstance() calls from org.apache.geode.cache.query (#1427)

  * Also removed test variables from product code
  * Tests will now set a property that allows tests to test query cancellation
-import org.apache.geode.cache.query.internal.index.AbstractIndex.InternalIndexStatistics;
+import org.apache.geode.internal.cache.InternalCache;
-  CompactMapRangeIndex(String indexName, Region region, String fromClause, String indexedExpression,
-      String projectionAttributes, String origFromClause, String origIndxExpr, String[] defintions,
-      boolean isAllKeys, String[] multiIndexingKeysPattern, Object[] mapKeys,
-      IndexStatistics stats) {
-    super(indexName, region, fromClause, indexedExpression, projectionAttributes, origFromClause,
-        origIndxExpr, defintions, isAllKeys, multiIndexingKeysPattern, mapKeys, stats);
+  CompactMapRangeIndex(InternalCache cache, String indexName, Region region, String fromClause,
+      String indexedExpression, String projectionAttributes, String origFromClause,
+      String origIndxExpr, String[] defintions, boolean isAllKeys,
+      String[] multiIndexingKeysPattern, Object[] mapKeys, IndexStatistics stats) {
+    super(cache, indexName, region, fromClause, indexedExpression, projectionAttributes,
+        origFromClause, origIndxExpr, defintions, isAllKeys, multiIndexingKeysPattern, mapKeys,
+        stats);
-      rg = new CompactRangeIndex(indexName + "-" + mapKey, region, fromClause, indexedExpression,
-          projectionAttributes, this.originalFromClause, this.originalIndexedExpression,
-          this.canonicalizedDefinitions, stats);
+      rg = new CompactRangeIndex(cache, indexName + "-" + mapKey, region, fromClause,
+          indexedExpression, projectionAttributes, this.originalFromClause,
+          this.originalIndexedExpression, this.canonicalizedDefinitions, stats);
-      rg = new CompactRangeIndex(indexName + "-" + mapKey, region, fromClause, indexedExpression,
-          projectionAttributes, this.originalFromClause, this.originalIndexedExpression,
-          this.canonicalizedDefinitions, stats);
+      rg = new CompactRangeIndex(cache, indexName + "-" + mapKey, region, fromClause,
+          indexedExpression, projectionAttributes, this.originalFromClause,
+          this.originalIndexedExpression, this.canonicalizedDefinitions, stats);

MOV26 UPD40 INS44 INS43 INS42 INS42 INS42 INS42 INS42