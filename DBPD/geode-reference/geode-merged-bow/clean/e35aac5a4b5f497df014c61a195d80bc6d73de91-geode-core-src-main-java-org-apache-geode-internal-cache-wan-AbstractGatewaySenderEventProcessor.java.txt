Merge branch 'release/1.5.0'

-  public static boolean TEST_HOOK = false;
-
+  /**
+   * Cumulative count of events dispatched by this event processor.
+   */
-            if (TEST_HOOK) {
-              this.numEventsDispatched += conflatedEventsToBeDispatched.size();
-            }
+
+            increaseNumEventsDispatched(conflatedEventsToBeDispatched.size());
-  private List conflate(List<GatewaySenderEventImpl> events) {
+  public List conflate(List<GatewaySenderEventImpl> events) {
-              gsEvent.getKeyToConflate(), gsEvent.getOperation());
+              gsEvent.getKeyToConflate(), gsEvent.getOperation(), gsEvent.getShadowKey());
+
+  public void increaseNumEventsDispatched(long newEventsDispatched) {
+    this.numEventsDispatched += newEventsDispatched;
+  }
+
+    private long shadowKey;
+
+      this(region, key, operation, -1);
+    }
+
+    private ConflationKey(String region, Object key, Operation operation, long shadowKey) {
+      this.shadowKey = shadowKey;
+      result = prime * result + Long.hashCode(this.shadowKey);
+      if (this.shadowKey != that.shadowKey) {
+        return false;
+      }

INS23 INS31 INS29 UPD83 MOV83 INS39 MOV59 UPD83 INS83 INS39 INS42 INS44 MOV8 INS23 INS31 INS65 INS39 INS42 INS83 INS39 INS59 INS83 INS42 INS44 INS44 INS44 INS8 INS44 INS66 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS17 INS39 INS42 INS21 INS21 INS25 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS38 INS7 INS7 INS27 INS8 INS34 INS22 INS42 INS42 INS27 INS22 INS40 INS41 INS52 INS42 INS27 INS32 INS52 INS42 INS9 INS42 INS42 INS42 INS42 INS22 INS52 INS42 INS21 INS32 INS32 INS42 MOV32 INS42 INS42 DEL83 DEL39 DEL42 DEL9 DEL59 DEL23 DEL83 DEL39 DEL23 DEL42 DEL25