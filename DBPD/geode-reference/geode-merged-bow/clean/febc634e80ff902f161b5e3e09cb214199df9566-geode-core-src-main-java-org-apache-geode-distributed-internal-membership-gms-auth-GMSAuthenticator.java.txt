GEODE-1973: having GMSAuthenticator work on a locator with no cache.

+import org.apache.commons.lang.StringUtils;
+
-    if (!securityService.isPeerSecurityRequired()) {
+    // For older systems, locator might be started without cache, so secureService may not be initialized here. We need to check
+    // if the passed in secProps has peer authenticator or not
+    String authMethod = secProps.getProperty(SECURITY_PEER_AUTHENTICATOR);
+    // at this point,
+    if (!securityService.isPeerSecurityRequired() && StringUtils.isBlank(authMethod)) {
-      String authMethod = securityProps.getProperty(SECURITY_PEER_AUTHENTICATOR);
+    String authMethod = securityProps.getProperty(SECURITY_PEER_AUTHENTICATOR);
-      auth = SecurityService.getObjectOfTypeFromFactoryMethod(authMethod, org.apache.geode.security.Authenticator.class);
+      auth = SecurityService.getObjectOfType(authMethod, org.apache.geode.security.Authenticator.class);
-

INS26 INS40 INS60 INS43 INS59 INS27 INS42 INS42 INS32 MOV38 INS32 INS42 INS42 INS42 INS42 INS42 INS42 UPD42