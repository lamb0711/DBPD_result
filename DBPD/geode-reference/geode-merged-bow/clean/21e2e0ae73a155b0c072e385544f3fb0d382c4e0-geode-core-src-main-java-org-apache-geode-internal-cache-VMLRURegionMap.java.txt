GEODE-4364: extract RegionMapDestroy and add RegionMapDestroyTest (#1347)



-class VMLRURegionMap extends AbstractRegionMap {
+// TODO: change back from public to package-private
+public class VMLRURegionMap extends AbstractRegionMap {
-  VMLRURegionMap(EvictableRegion owner, Attributes attr,
+  public VMLRURegionMap(EvictableRegion owner, Attributes attr,
-  /** used by unit tests */
-  VMLRURegionMap(EvictableRegion owner, Attributes attr, InternalRegionArguments internalRegionArgs,
-      EvictionController evictionController) {
+  public VMLRURegionMap(EvictableRegion owner, Attributes attr,
+      InternalRegionArguments internalRegionArgs, EvictionController evictionController) {
-  protected void initialize(EvictableRegion owner, Attributes attr,
+  protected void initialize(EvictableRegion evictableRegion, Attributes attr,
-    super.initialize(owner, attr, internalRegionArgs, true);
+    if (evictableRegion instanceof InternalRegion) {
+      initialize((InternalRegion) evictableRegion, attr, internalRegionArgs, true);
+    } else {
+      initialize((PlaceHolderDiskRegion) evictableRegion, attr, internalRegionArgs, true);
+    }
-  protected void lruEntryDestroy(RegionEntry re) {
-    final EvictableEntry e = (EvictableEntry) re;
+  public void lruEntryDestroy(RegionEntry regionEntry) {
+    final EvictableEntry e = (EvictableEntry) regionEntry;
-          re.getKey(), getTotalEntrySize(), this.getEvictionList().size(), size(), e.getEntrySize(),
-          !e.isEvicted());
+          regionEntry.getKey(), getTotalEntrySize(), this.getEvictionList().size(), size(),
+          e.getEntrySize(), !e.isEvicted());
-    Token vTok = re.getValueAsToken();
+    Token vTok = regionEntry.getValueAsToken();
-  boolean confirmEvictionDestroy(RegionEntry re) {
+  public boolean confirmEvictionDestroy(RegionEntry regionEntry) {
-    EvictableEntry lruRe = (EvictableEntry) re;
+    EvictableEntry lruRe = (EvictableEntry) regionEntry;

INS83 INS83 INS83 INS8 UPD83 INS83 UPD42 INS25 UPD42 UPD42 INS62 INS8 INS8 MOV43 INS42 INS43 MOV21 INS21 INS42 INS32 INS32 UPD42 UPD42 MOV43 UPD42 INS42 INS11 INS42 INS42 INS9 INS42 INS11 INS42 INS42 INS9 INS43 INS42 INS43 INS42 UPD42 INS42 INS42 DEL66 DEL65 DEL29 DEL42 DEL42 DEL42 DEL42 DEL9 DEL48 DEL8