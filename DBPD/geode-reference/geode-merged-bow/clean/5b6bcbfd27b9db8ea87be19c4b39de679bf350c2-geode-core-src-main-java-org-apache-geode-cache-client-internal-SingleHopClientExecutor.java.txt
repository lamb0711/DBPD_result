GEODE-6677: Eliminate Infinite Function Retry (#3690)

* Fix for retry with onRegion
* Fix retry with onRegion singlehop
* Fix for onServer
* DUnitTest for onRegion (singleHop, multihop), onServer
* Unit test for onRegion (singleHop, multihop), onServer

+import org.apache.geode.cache.client.PoolFactory;
-  static boolean submitAllHA(List callableTasks, LocalRegion region, boolean isHA,
-      ResultCollector rc, Set<String> failedNodes) {
+
+  static int submitAllHA(List callableTasks, LocalRegion region, boolean isHA,
+      ResultCollector rc, Set<String> failedNodes,
+      final int retryAttemptsArg,
+      final PoolImpl pool) {
-    boolean reexecute = false;
+    int maxRetryAttempts = 0;
+
+            if (maxRetryAttempts == 0) {
+              maxRetryAttempts = retryAttemptsArg;
+            }
+
+            if (maxRetryAttempts == PoolFactory.DEFAULT_RETRY_ATTEMPTS) {
+              // If the retryAttempt is set to default(-1). Try it on all servers once.
+              // Calculating number of servers when function is re-executed as it involves
+              // messaging locator.
+              maxRetryAttempts = pool.getConnectionSource().getAllServers().size() - 1;
+            }
+
-                return false;
+                return 0;
-              reexecute = true;
+
-              if (isHA) {
+              if (isHA && maxRetryAttempts != 0) {
-                return false;
+                return 0;
-              if (isHA) {
-                reexecute = true;
+              if (isHA && maxRetryAttempts != 0) {
-    return reexecute;
+    return maxRetryAttempts;
-  static Map<ServerLocation, Object> submitBulkOp(List callableTasks, ClientMetadataService cms,
-      LocalRegion region, Map<ServerLocation, RuntimeException> failedServers) {
+  static Map<ServerLocation, Object> submitBulkOp(List callableTasks,
+      ClientMetadataService cms,
+      LocalRegion region,
+      Map<ServerLocation, RuntimeException> failedServers) {
-  static Map<ServerLocation, Object> submitGetAll(Map<ServerLocation, HashSet> serverToFilterMap,
-      List callableTasks, ClientMetadataService cms, LocalRegion region) {
+  static Map<ServerLocation, Object> submitGetAll(
+      Map<ServerLocation, HashSet> serverToFilterMap,
+      List callableTasks, ClientMetadataService cms,
+      LocalRegion region) {

INS26 INS40 UPD39 INS44 INS44 INS83 INS39 INS42 INS83 INS43 INS42 INS42 UPD39 UPD42 UPD42 INS34 INS25 INS25 INS27 INS8 INS27 INS8 INS42 INS34 INS21 INS42 INS40 INS21 INS7 INS7 INS27 INS42 INS42 INS42 INS27 INS42 INS27 INS32 INS34 INS42 INS34 INS32 INS42 INS34 INS27 INS8 INS32 INS42 INS42 INS27 MOV21 INS42 INS42 INS42 INS34 INS34 DEL9 DEL9 DEL42 DEL9 DEL7 DEL21 DEL42 DEL9 DEL42 DEL42 DEL9 DEL7 DEL21 DEL8