GEODE-8112: Add --member option in query command. (#5102)


-          help = CliStrings.QUERY__INTERACTIVE__HELP) final boolean interactive) {
-    DataCommandResult dataResult = select(query);
+          help = CliStrings.QUERY__INTERACTIVE__HELP) final boolean interactive,
+      @CliOption(key = CliStrings.MEMBER,
+          optionContext = ConverterHint.MEMBERIDNAME,
+          help = CliStrings.QUERY__MEMBER__HELP) final String memberNameOrId) {
+
+    DistributedMember targetMember = memberNameOrId == null ? null : getMember(memberNameOrId);
+    DataCommandResult dataResult = select(query, targetMember);
-  private DataCommandResult select(String query) {
+  DataCommandResult select(String query, DistributedMember targetMember) {
-        Set<DistributedMember> members =
-            ManagementUtils
-                .getQueryRegionsAssociatedMembers(regionsInQuery, (InternalCache) cache, false);
+        Set<DistributedMember> members = getMembers(targetMember, (InternalCache) cache,
+            regionsInQuery);
+  Set<DistributedMember> getMembers(DistributedMember targetMember, InternalCache cache,
+      Set<String> regionsInQuery) {
+    return targetMember == null
+        ? getQueryRegionsAssociatedMembers(cache, regionsInQuery)
+        : Collections.singleton(targetMember);
+  }
+
+  Set<DistributedMember> getQueryRegionsAssociatedMembers(InternalCache cache,
+      Set<String> regionsInQuery) {
+    return ManagementUtils
+        .getQueryRegionsAssociatedMembers(regionsInQuery, cache, false);
+  }
+

INS31 INS31 INS44 INS44 INS74 INS42 INS44 INS44 INS44 INS8 INS74 INS42 INS44 INS44 INS8 INS77 INS83 INS43 INS42 INS60 INS43 INS42 INS43 INS43 INS43 INS42 INS43 INS42 INS74 INS42 INS41 INS43 INS43 INS43 INS42 INS74 INS42 INS41 INS42 INS80 INS80 INS80 INS42 INS43 INS59 INS42 INS42 INS42 INS42 INS42 INS43 INS43 INS16 INS42 INS42 INS42 INS43 INS43 INS32 INS42 INS40 INS42 INS40 INS42 INS40 INS42 INS42 INS16 INS42 INS42 INS27 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS9 INS27 INS33 INS32 INS42 INS42 INS33 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS42 MOV42 UPD42 UPD42 DEL83 DEL9