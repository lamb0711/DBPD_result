GEODE-6052: Use constructor DI to avoid PowerMock in JMX tests (#2891)


-
-  private Map<ObjectName, Object> localGemFireMBean;
+  private final Map<ObjectName, Object> localGemFireMBean;
-  private DistributedMember distMember;
+  private final DistributedMember distMember;
-  private Logger logger = LogService.getLogger();
+  private static final Logger logger = LogService.getLogger();
-  public MBeanJMXAdapter() {
+  public MBeanJMXAdapter(DistributedMember distMember) {
-    this.distMember = InternalDistributedSystem.getConnectedInstance().getDistributedMember();
+    this.distMember = distMember;
-      logger.warn("MBean with ObjectName " + objectName + " has already been registered.");
+      logRegistrationWarning(objectName, true);
-      logger.warn("MBean with ObjectName " + objectName + " has already been unregistered.");
+      logRegistrationWarning(objectName, false);
+
+  void logRegistrationWarning(ObjectName objectName, boolean registering) {
+    logger.warn("MBean with ObjectName " + objectName + " has already been "
+        + (registering ? "registered." : "unregistered."));
+  }

INS31 INS83 INS83 INS83 INS83 INS44 INS39 INS42 INS44 INS44 INS8 INS43 INS42 INS43 INS42 INS39 INS42 INS21 INS42 INS42 INS32 INS42 INS42 INS42 INS27 INS45 INS42 INS45 INS36 INS16 UPD42 INS42 INS9 UPD42 INS42 INS9 INS42 INS45 INS45 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL45 DEL42 DEL45 DEL27 DEL42 DEL45 DEL42 DEL45 DEL27