GEODE-857: Fixing synchronization in SystemFailure.stopWatchDog

Don't join the watchDog thread or the proctor thread while holding the
failureSync lock.

Adding a unit test for SystemFailure.stopThreads.

+   * Time to wait during stopWatchdog and stopProctor. Not final
+   * for tests
+   */
+  static int SHUTDOWN_WAIT = 1000;
+  /**
+    Thread watchDogSnapshot = null;
+        watchDogSnapshot = watchDog;
+      }
+    }
+    if(watchDogSnapshot != null) {
+      try {
+        watchDogSnapshot.join(100);
+      } catch (InterruptedException ignore) {
+      }
+      if (watchDogSnapshot.isAlive()) {
+        watchDogSnapshot.interrupt();
-          watchDog.join(100);
+          watchDogSnapshot.join(SHUTDOWN_WAIT);
-        if (watchDog.isAlive()) {
-          watchDog.interrupt();
-          try {
-            watchDog.join(1000);
-          } catch (InterruptedException ignore) {
-          }
-        }
-      watchDog = null;
+    Thread proctorSnapshot = null;
-      if (proctor != null && proctor.isAlive()) {
-        proctor.interrupt();
-        try {
-          proctor.join(1000);
-        } catch (InterruptedException ignore) {
-        }
+      proctorSnapshot = proctor;
+    }
+    if (proctorSnapshot != null && proctorSnapshot.isAlive()) {
+      proctorSnapshot.interrupt();
+      try {
+        proctorSnapshot.join(SHUTDOWN_WAIT);
+      } catch (InterruptedException ignore) {
-      proctor = null;
+  
+  static Thread getWatchDogForTest() {
+    return watchDog;
+  }
+  
+  static Thread getProctorForTest() {
+    return proctor;
+  }

INS23 INS31 INS31 INS29 INS83 INS39 INS59 MOV8 MOV8 INS83 INS43 INS42 INS8 INS83 INS43 INS42 INS8 INS65 INS42 INS34 INS60 INS51 INS60 INS51 INS42 INS41 INS42 INS41 INS66 INS66 INS43 INS59 INS42 INS8 INS27 INS43 INS59 INS42 INS8 INS42 INS42 INS42 INS42 INS33 MOV21 INS25 INS42 INS33 INS25 INS42 INS42 INS33 MOV21 MOV21 MOV27 INS8 INS32 INS8 UPD42 UPD42 MOV21 INS21 INS42 INS42 MOV21 MOV54 INS42 UPD42 INS7 INS42 INS42 UPD42 UPD34 UPD42 UPD42 INS42 UPD42 INS42 DEL42 DEL42 DEL32 DEL34 DEL42 DEL25 DEL42 DEL33 DEL7 DEL21 DEL8 DEL51 DEL8 DEL33 DEL34 DEL42 DEL51 DEL8