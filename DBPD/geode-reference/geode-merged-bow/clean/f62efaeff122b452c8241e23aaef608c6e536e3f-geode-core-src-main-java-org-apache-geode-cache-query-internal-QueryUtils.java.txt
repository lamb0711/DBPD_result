Merge remote-tracking branch 'upstream/develop' into develop

-      } else {
-        key = getCompiledIdFromPath(currentLevel.getCmpIteratorDefn().getCollectionExpr()).getId()
-            + ':' + currentLevel.getDefinition();
-      if (useDerivedResults && derivedResults != null && derivedResults.containsKey(key)) {
-        c = derivedResults.get(key);
+      CompiledValue path = currentLevel.getCmpIteratorDefn().getCollectionExpr();
+      if (useDerivedResults && derivedResults != null && path.hasIdentifierAtLeafNode()) {
+        key = getCompiledIdFromPath(path).getId()
+            + ':' + currentLevel.getDefinition();
+        if (derivedResults.containsKey(key)) {
+          c = derivedResults.get(key);
+        } else {
+          c = currentLevel.evaluateCollection(context);
+        }

INS60 INS25 INS43 INS59 MOV27 INS8 INS8 INS42 INS42 MOV32 INS32 INS21 MOV25 INS21 INS42 INS42 INS7 MOV32 INS7 INS42 INS27 INS42 INS32 INS32 INS13 MOV32 INS42 INS42 INS42 INS32 INS42 INS42 INS42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL13 DEL27 DEL7 DEL21 DEL8