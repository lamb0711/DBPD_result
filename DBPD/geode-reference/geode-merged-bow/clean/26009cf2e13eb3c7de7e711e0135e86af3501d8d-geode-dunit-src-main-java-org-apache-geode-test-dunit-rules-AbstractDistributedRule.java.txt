GEODE-6033: Support dynamic VMs in DistributedRestoreSystemProperties

Make DistributedRestoreSystemProperties support create and bounce VM.

+import java.io.Serializable;
+
-  protected AbstractDistributedRule() {
+  // if you alter vmEventListener at all, make sure VmEventListenerDistributedTest still passes
+  private volatile VMEventListener vmEventListener;
+
+  AbstractDistributedRule() {
-  protected AbstractDistributedRule(final int vmCount) {
+  AbstractDistributedRule(final int vmCount) {
-  protected AbstractDistributedRule(final int vmCount, final RemoteInvoker invoker) {
+  private AbstractDistributedRule(final int vmCount, final RemoteInvoker invoker) {
-  public Statement apply(final Statement statement, final Description description) {
-    return statement(statement, description);
-  }
-
-  private Statement statement(final Statement baseStatement, final Description description) {
+  public Statement apply(final Statement base, final Description description) {
-        VMEventListener vmEventListener = new InternalVMEventListener();
-        VM.addVMEventListener(vmEventListener);
-        before();
-          baseStatement.evaluate();
+          base.evaluate();
-          after();
-          VM.removeVMEventListener(vmEventListener);
-  private void beforeDistributedTest(final Description description) throws Throwable {
+  void beforeDistributedTest(final Description description) throws Throwable {
+
+    vmEventListener = new InternalVMEventListener();
+    VM.addVMEventListener(vmEventListener);
+    before();
-  private void afterDistributedTest(final Description description) throws Throwable {
+  void afterDistributedTest(final Description description) throws Throwable {
+    VM.removeVMEventListener(vmEventListener);
+    after();
+
-  private class InternalVMEventListener implements VMEventListener {
+  private class InternalVMEventListener implements VMEventListener, Serializable {

INS26 INS40 INS23 INS83 INS83 MOV43 INS59 UPD83 MOV78 UPD83 UPD42 MOV44 INS43 INS42 UPD42 INS21 MOV21 MOV21 MOV21 MOV21 INS42 INS7 INS42 MOV14 UPD42 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL83 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL83 DEL42 DEL43 DEL42 DEL44 DEL42 DEL59 DEL60 DEL83 DEL83