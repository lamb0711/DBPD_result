GEODE-6078: Allow client cache to use JSONFormatter in multi-user mode (#2890)

* GEODE-6078: Allow client cache to use JSONFormatter in multi-user mode

* user does not have to provide credentials when creating the client cache in multi-user mode. Credentials are needed only when creating the view.
* CacheProxy should have a reference to the JSONFormatter that is aware of the user attributes
* clean up some tests and add more tests for coverage and usage demo.
-    authenticateIfRequired(op);
+    authenticateIfRequired(null, op);
-    authenticateIfRequired(op);
+    authenticateIfRequired(null, op);
-  private void authenticateIfRequired(Op op) {
-    authenticateIfRequired(null, op);
-  }
-
-   * Assert thread-local var is not null, if it has multiuser-authentication set to true.
+   * This is only for multi-user case
+   *
+   * Assert thread-local var is not null.
-    if (this.multiuserSecureModeEnabled && op instanceof AbstractOp
-        && ((AbstractOp) op).needsUserId()) {
-      UserAttributes userAttributes = UserAttributes.userAttributes.get();
-      if (userAttributes == null) {
-        throw new UnsupportedOperationException(
-            "Use Pool APIs for doing operations when multiuser-secure-mode-enabled is set to true.");
-      }
-      if (serverLocation != null) {
-        if (!userAttributes.getServerToId().containsKey(serverLocation)) {
-          Long userId = (Long) AuthenticateUserOp.executeOn(serverLocation, this,
-              userAttributes.getCredentials());
-          if (userId != null) {
-            userAttributes.setServerToId(serverLocation, userId);
-          }
+    if (!multiuserSecureModeEnabled) {
+      return;
+    }
+
+    if (!(op instanceof AbstractOp) || !((AbstractOp) op).needsUserId()) {
+      return;
+    }
+
+    UserAttributes userAttributes = UserAttributes.userAttributes.get();
+    if (userAttributes == null) {
+      throw new UnsupportedOperationException(
+          "Use Pool APIs for doing operations when multiuser-secure-mode-enabled is set to true.");
+    }
+
+    if (serverLocation != null) {
+      if (!userAttributes.getServerToId().containsKey(serverLocation)) {
+        Long userId = (Long) AuthenticateUserOp.executeOn(serverLocation, this,
+            userAttributes.getCredentials());
+        if (userId != null) {
+          userAttributes.setServerToId(serverLocation, userId);

MOV8 MOV21 INS25 INS25 INS66 UPD66 INS38 INS8 UPD27 MOV27 INS8 INS33 MOV42 INS42 INS41 INS38 INS38 INS41 INS36 MOV32 MOV62 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL8 DEL31 DEL52 DEL42 DEL22 DEL25 DEL8