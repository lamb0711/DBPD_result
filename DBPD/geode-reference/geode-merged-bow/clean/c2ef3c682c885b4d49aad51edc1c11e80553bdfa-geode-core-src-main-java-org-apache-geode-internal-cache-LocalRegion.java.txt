GEODE-7001: Prevent potential NPE in LocalRegion

Prevent potential NPE during LocalRegion construction when stat sampling
is enabled. Specifically, if getLocalSize() is invoked by the callback
sampler before the RegionMap inside LocalRegion is created then it will
throw an NPE.

Co-authored-by: Aaron Lindsey <alindsey@pivotal.io>
Co-authored-by: Kirk Lund <klund@apache.org>

-        new DefaultEntryEventFactory(), poolName -> (PoolImpl) PoolManager.find(poolName));
+        new DefaultEntryEventFactory(), poolName -> (PoolImpl) PoolManager.find(poolName),
+        (LocalRegion region) -> new RegionPerfStats(
+            cache.getInternalDistributedSystem().getStatisticsManager(),
+            "RegionStats-" + regionName, cache.getCachePerfStats(),
+            region, cache.getMeterRegistry()));
-      EntryEventFactory entryEventFactory, PoolFinder poolFinder)
+      EntryEventFactory entryEventFactory, PoolFinder poolFinder,
+      java.util.function.Function<LocalRegion, RegionPerfStats> regionPerfStatsFactory)
+    diskStoreImpl = findDiskStore(attrs, internalRegionArgs);
+    diskRegion = createDiskRegion(internalRegionArgs);
+    entries = createRegionMap(internalRegionArgs);
+    subregions = new ConcurrentHashMap();
+
-        cachePerfStats =
-            new RegionPerfStats(cache.getInternalDistributedSystem().getStatisticsManager(),
-                "RegionStats-" + regionName, cache.getCachePerfStats(),
-                this, cache.getMeterRegistry());
+        cachePerfStats = regionPerfStatsFactory.apply(this);
-    diskStoreImpl = findDiskStore(attrs, internalRegionArgs);
-    diskRegion = createDiskRegion(internalRegionArgs);
-    entries = createRegionMap(internalRegionArgs);
-    subregions = new ConcurrentHashMap();
-

INS44 MOV25 INS74 INS42 INS86 INS43 INS43 INS43 INS44 INS14 INS40 INS42 INS42 INS43 INS42 MOV43 MOV32 MOV27 MOV32 INS42 MOV32 INS42 INS42 INS32 INS42 UPD42 MOV42 INS52 DEL52 DEL14