GEODE-7826: start jmx-manager when the Management Rest Service is (#4820)

* Before the geode management rest service web app is added,
the code now starts the jmx-manager.

* Since the locator currently just logs a message if the management rest
service can not be started, this is now also the behavior if the
jmx-manager can not be started on behalf of the management rest service.
If that happens the management rest service will not be available and
you will get a warning logged describing why the jmx-manager could not
be started.
+import org.apache.geode.management.ManagementService;
+    AgentUtil agentUtil = new AgentUtil(GemFireVersion.getGemFireVersion());
+    startClusterManagementService(internalCache, agentUtil);
+  }
-    InternalCache myCache = this.internalCache;
+  @VisibleForTesting
+  void startClusterManagementService(InternalCache myCache, AgentUtil agentUtil) {
-    // start management rest service
-    AgentUtil agentUtil = new AgentUtil(GemFireVersion.getGemFireVersion());
-
+          ManagementService managementService = ManagementService.getManagementService(myCache);
+          if (!managementService.isManager()) {
+            // The management rest service requires the jmx-manager
+            // since some of the things the rest service does need
+            // the jmx-manager in the same JVM. For example the
+            // rebalance operation needs mxbeans that are hosted
+            // by the jmx-manager.
+            managementService.startManager();
+          }

INS26 INS40 INS31 INS78 INS39 INS42 MOV43 INS8 INS44 INS44 INS42 MOV21 MOV60 INS21 MOV43 INS42 INS43 INS42 INS32 INS42 INS42 INS42 INS42 INS60 INS25 INS43 INS59 INS38 INS8 INS42 INS42 INS32 INS32 INS21 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42 DEL42 DEL52 DEL42 DEL22 DEL59 DEL60