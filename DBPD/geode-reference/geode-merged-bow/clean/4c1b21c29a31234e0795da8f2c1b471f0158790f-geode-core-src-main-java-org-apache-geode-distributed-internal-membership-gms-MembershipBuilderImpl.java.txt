GEODE-7456: Moving GMSMembershipManager into gms package (#4313)

Adding a Distribution class that ClusterDistributionManager and the
rest of geode-core uses, which wraps GMSMembershipManager. Moving
GMSMembershipManager into the gms package and renaming to MembershipImpl.

Distribution now owns the DirectChannel, rather than MembershipImpl.

Removing the MembershipManager interface and replacing uses of it with the
Membership interface.

* Added an ArchUnitTest for geode-core to only use Distribution to access Membership.

-import org.apache.geode.distributed.internal.membership.MembershipManager;
-import org.apache.geode.distributed.internal.membership.adapter.GMSMembershipManager;
+import org.apache.geode.distributed.internal.membership.gms.api.LifecycleListener;
+import org.apache.geode.distributed.internal.membership.gms.api.Membership;
+  private LifecycleListener lifecycleListener;
-  public MembershipManager create() {
-    GMSMembershipManager gmsMembershipManager =
-        new GMSMembershipManager(membershipListener, messageListener, dm);
+  public MembershipBuilder setLifecycleListener(
+      LifecycleListener lifecycleListener) {
+    this.lifecycleListener = lifecycleListener;
+    return this;
+  }
+
+  @Override
+  public Membership create() {
+    GMSMembership gmsMembership =
+        new GMSMembership(membershipListener, messageListener, dm, lifecycleListener);
-        new Services(gmsMembershipManager.getGMSManager(), statistics, authenticator,
+        new Services(gmsMembership.getGMSManager(), statistics, authenticator,
-      services.start();
-    return gmsMembershipManager;
+    return gmsMembership;
-
-

MOV26 MOV26 UPD40 UPD40 INS23 INS31 INS83 INS43 INS59 INS78 INS83 INS43 INS42 INS44 INS8 UPD43 INS42 INS42 INS42 INS42 INS43 INS42 INS21 INS41 UPD42 INS42 INS7 INS52 UPD43 MOV43 UPD42 INS22 INS42 UPD42 UPD42 INS52 INS42 UPD43 INS42 MOV43 UPD42 UPD42 DEL42 DEL42 DEL32 DEL21