GEODE-5971: Have all offline commands extends OfflineGfshCommand instâ€¦ (#2967)

* GEODE-5971: Have all offline commands extends OfflineGfshCommand instead of InternalGfshCommand
* eventually InternalGfshCommand should be deleted and replaced with GfshCommand

Co-authored-by: Peter Tran <ptran@pivotal.io>



+import javax.management.remote.JMXServiceURL;
+
-import org.apache.geode.internal.lang.ObjectUtils;
-import org.apache.geode.management.internal.cli.commands.InternalGfshCommand;
+import org.apache.geode.management.internal.cli.commands.OfflineGfshCommand;
-import org.apache.geode.management.internal.cli.shell.JmxOperationInvoker;
-public class StartJConsoleCommand extends InternalGfshCommand {
+public class StartJConsoleCommand extends OfflineGfshCommand {
-      infoResult.addLine(
+      getGfsh().printAsInfo(
-      message.append(CliStrings.START_JCONSOLE__RUN);
+      getGfsh().printAsInfo(CliStrings.START_JCONSOLE__RUN);
-      String jmxServiceUrl = getJmxServiceUrlAsString();
-
-      if (StringUtils.isNotBlank(jmxServiceUrl)) {
-        commandLine.add(jmxServiceUrl);
+      JMXServiceURL jmxServiceUrl = getJmxServiceUrl();
+      if (isConnectedAndReady() && jmxServiceUrl != null) {
+        commandLine.add(jmxServiceUrl.toString());
-
-  String getJmxServiceUrlAsString() {
-    if (isConnectedAndReady()
-        && (getGfsh().getOperationInvoker() instanceof JmxOperationInvoker)) {
-      JmxOperationInvoker jmxOperationInvoker =
-          (JmxOperationInvoker) getGfsh().getOperationInvoker();
-
-      return ObjectUtils.toString(jmxOperationInvoker.getJmxServiceUrl());
-    }
-    return null;
-  }

MOV26 UPD40 UPD40 UPD43 UPD42 UPD43 INS27 MOV32 UPD42 MOV32 UPD42 UPD42 MOV32 INS27 UPD42 UPD42 MOV42 INS42 INS33 INS32 MOV42 INS42 DEL40 DEL26 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL43 DEL62 DEL36 DEL27 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL41 DEL8 DEL25 DEL33 DEL41 DEL8 DEL31