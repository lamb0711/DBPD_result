GEODE-6724 split brain formed on concurrent locator startup

Ensure that either all locators have been contacted or a decent
number of attempts to join have occurred before allowing a member to
start its own cluster.

If all locators have been contacted we ought to have a sufficient
registration pool to choose a membership coordinator during concurrent
startup.

-      sb.append("SearchState(locatorsContacted=").append(locatorsContacted)
+      sb.append("locatorsContacted=").append(locatorsContacted)
-          .append(responses).append(")");
+          .append(responses);
+      int minimumRetriesBeforeBecomingCoordinator = locators.size() * 2;
+            // if we haven't contacted a member of a cluster maybe this node should
+            // become the coordinator.
-                (tries > 2 || System.currentTimeMillis() < giveupTime)) {
+                (tries >= minimumRetriesBeforeBecomingCoordinator ||
+                    state.locatorsContacted >= locators.size())) {
+            } else {
+              // since we were given a coordinator that couldn't be used we should keep trying
+              tries = 0;
+              giveupTime = System.currentTimeMillis() + timeout;
-            // since we were given a coordinator that couldn't be used we should keep trying
-            tries = 0;
-            giveupTime = System.currentTimeMillis() + timeout;

INS32 INS60 MOV32 MOV42 MOV42 INS39 INS59 INS42 INS27 INS32 INS34 INS42 INS42 INS8 MOV21 MOV21 UPD27 UPD27 INS42 INS40 UPD42 UPD42 UPD45 DEL32 DEL42 DEL45 DEL32 DEL34 DEL42