GEODE-8338: change redis commands not be repeated when a server dies (#5351)

The redis functions are no longer HA.
The product does have some cases when it can safely retry the function
but if a server dies the client will see a redis error containing "memberDeparted".
In that case the client app can check to see if the redis operation should be done
again, or if it already happened even though a server died.

Co-authored-by: Sarah Abbey <sabbey@vmware.com>
Co-authored-by: Darrel Schneider <darrel@vmware.com>
+import org.apache.geode.cache.execute.FunctionInvocationTargetException;
+import org.apache.geode.redis.internal.executor.CommandFunction;
-    if (cause instanceof FunctionException) {
-      Throwable th = cause.getCause();
-      if (th == null) {
-        FunctionException functionException = (FunctionException) cause;
-        if (functionException.getExceptions() != null) {
-          th = functionException.getExceptions().get(0);
-        }
-      }
+    if (cause instanceof FunctionException
+        && !(cause instanceof FunctionInvocationTargetException)) {
+      Throwable th = CommandFunction.getInitialCause((FunctionException) cause);
+    } else if (cause instanceof FunctionInvocationTargetException) {
+      // This indicates a member departed
+      String errorMsg = cause.getMessage();
+      if (!errorMsg.contains("memberDeparted")) {
+        errorMsg = "memberDeparted: " + errorMsg;
+      }
+      response = RedisResponse.error(errorMsg);

INS26 INS26 INS40 INS40 INS27 MOV62 INS38 MOV60 INS36 MOV43 INS62 INS42 INS32 INS42 INS43 INS42 INS42 MOV11 INS42 INS25 INS62 INS8 MOV8 INS42 INS43 INS60 INS25 INS21 INS42 INS43 INS59 INS38 INS8 INS7 INS42 INS42 INS32 INS32 INS21 INS42 INS32 INS42 INS42 INS42 INS42 INS45 INS7 INS42 INS42 INS42 INS42 INS27 INS45 INS42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL33 DEL27 DEL42 DEL42 DEL32 DEL33 DEL27 DEL42 DEL42 DEL42 DEL32 DEL42 DEL34 DEL32 DEL7 DEL21 DEL8 DEL25 DEL8 DEL25