GEODE-7710: Fix race condition in federation of MXBeans (#4807)

JMX Manager may fail to federate one or more MXBeans during startup
because of a race condition involving FederatingManager and
ManagementCacheListener.

Change ManagementCacheListener to be ready upon construction.
+import org.apache.geode.cache.Region;
+import org.apache.geode.distributed.DistributedMember;
- * This listener is attached to the Monitoring Region to receive any addition or deletion of MBEans
- *
- * It updates the last refreshed time of proxy once it gets the update request from the Managed Node
- *
- *
+ * This listener is attached to the Monitoring Region to receive any addition or deletion of MBeans.
+ * It updates the last refreshed time of proxy once it gets the update request from the Managed
+ * Node.
-public class ManagementCacheListener extends CacheListenerAdapter<String, Object> {
-
+class ManagementCacheListener extends CacheListenerAdapter<String, Object> {
-  private MBeanProxyFactory proxyHelper;
+  private final MBeanProxyFactory proxyHelper;
-  private volatile boolean readyForEvents;
-
-  public ManagementCacheListener(MBeanProxyFactory proxyHelper) {
+  ManagementCacheListener(MBeanProxyFactory proxyHelper) {
-    this.readyForEvents = false;
-    if (!readyForEvents) {
-      return;
-    }
-      proxyHelper.createProxy(event.getDistributedMember(), objectName, event.getRegion(),
+      DistributedMember distributedMember = event.getDistributedMember();
+      Region<String, Object> region = event.getRegion();
+      proxyHelper.createProxy(distributedMember, objectName, region,
-
-
-      if (!readyForEvents) {
-        return;
-      }
-
-
-
-  void markReady() {
-    readyForEvents = true;
-  }
-

INS26 INS26 INS40 INS40 INS83 UPD66 UPD66 INS66 INS60 INS60 INS43 INS59 INS74 INS59 INS42 INS42 MOV32 INS43 INS43 INS43 INS42 MOV32 INS42 INS42 INS42 INS42 INS42 DEL83 DEL83 DEL83 DEL39 DEL42 DEL59 DEL23 DEL83 DEL52 DEL42 DEL22 DEL9 DEL7 DEL21 DEL42 DEL38 DEL41 DEL8 DEL25 DEL42 DEL38 DEL41 DEL8 DEL25 DEL39 DEL42 DEL42 DEL9 DEL7 DEL21 DEL8 DEL31