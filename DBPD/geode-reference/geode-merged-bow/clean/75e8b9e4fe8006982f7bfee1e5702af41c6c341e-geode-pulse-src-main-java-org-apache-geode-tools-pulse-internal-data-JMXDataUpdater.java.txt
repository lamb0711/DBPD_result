GEODE-5230: Pulse does not work when SSL is enabled for JMX (#1976)


+import java.util.Properties;
-        if (repository.isUseSSLManager()) {
-          // use ssl to connect
-          env.put("com.sun.jndi.rmi.factory.socket", new SslRMIClientSocketFactory());
+        Properties originalProperties = System.getProperties();
+        try {
+          Properties updatedProperties = new Properties(originalProperties);
+          if (repository.isUseSSLManager()) {
+            for (String sslProperty : repository.getJavaSslProperties().stringPropertyNames()) {
+              updatedProperties.setProperty(sslProperty,
+                  repository.getJavaSslProperties().getProperty(sslProperty));
+            }
+
+            System.setProperties(updatedProperties);
+            env.put("com.sun.jndi.rmi.factory.socket", new SslRMIClientSocketFactory());
+          }
+          logger.info("Connecting to jmxURL : {}", jmxSerURL);
+          this.conn = JMXConnectorFactory.connect(url, env);
+          this.mbs = this.conn.getMBeanServerConnection();
+          cluster.setConnectedFlag(true);
+        } finally {
+          System.setProperties(originalProperties);
-        logger.info("Connecting to jmxURL : {}", jmxSerURL);
-        this.conn = JMXConnectorFactory.connect(url, env);
-        this.mbs = this.conn.getMBeanServerConnection();
-        cluster.setConnectedFlag(true);

INS26 INS40 INS60 INS54 INS43 INS59 INS8 INS8 INS42 INS42 INS32 INS60 MOV25 MOV21 MOV21 MOV21 MOV21 INS21 INS42 INS42 INS43 INS59 INS8 INS32 INS42 INS42 INS14 INS70 INS21 MOV21 INS42 INS42 INS42 INS43 INS42 INS44 INS32 INS8 INS32 INS42 INS43 INS42 INS32 INS42 INS21 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 DEL8