Merge branch 'release/1.5.0'

-   * @throws IOException
-   * @throws ClassNotFoundException
-   * @throws IOException
-   * @throws ClassNotFoundException
-    this.gfshFileLogger = LogWrapper.getInstance();
+    // The cache doesn't exist yet, since we are still setting up parsing.
+    this.gfshFileLogger = LogWrapper.getInstance(null);
-      // redirect Internal Java Loggers Now
-      // When run with shell, this is done on connection. See 'connect' command.
-      redirectInternalJavaLoggers();
-      // AbstractShell.logger - we don't want it to log on screen
-      LogWrapper.getInstance().setParentFor(logger);
+      // Only in headless mode, we do not want Gfsh's logger logs on screen
+      this.gfshFileLogger.setParentFor(logger);
+    // we want to direct internal JDK logging to file in either mode
+    redirectInternalJavaLoggers();
-  public static void redirectInternalJavaLoggers() {
+  /**
+   * This method sets the parent of all loggers whose name starts with "java" or "javax" to
+   * LogWrapper.
+   *
+   * logWrapper disables any parents's log handler, and only logs to the file if specified. This
+   * would prevent JDK's logging show up in the console
+   */
+  public void redirectInternalJavaLoggers() {
-            LogWrapper.getInstance().setParentFor(javaLogger);
+            this.gfshFileLogger.setParentFor(javaLogger);
-      LogWrapper.getInstance().warning(e.getMessage(), e);
+      this.gfshFileLogger.warning(e.getMessage(), e);
-  public GfshParser getGfshParser() {
-    return parser;
+  public LogWrapper getGfshFileLogger() {
+    return gfshFileLogger;
-        gfshFileLogger.fine(logMessage + ArgumentRedactor.redactScriptLine(withPropsExpanded));
+        gfshFileLogger.fine(logMessage + ArgumentRedactor.redact(withPropsExpanded));
-          CliUtil.runLessCommandAsExternalViewer(commandResult, isError);
+          CliUtil.runLessCommandAsExternalViewer(commandResult);

INS29 UPD43 UPD42 MOV21 INS65 UPD42 INS66 INS66 INS66 INS66 UPD42 INS33 INS22 INS52 INS42 INS22 INS52 INS42 UPD42 INS22 INS52 INS42 DEL42 DEL65 DEL42 DEL65 DEL42 DEL65 DEL42 DEL65 DEL42 DEL42 DEL32 DEL83 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42