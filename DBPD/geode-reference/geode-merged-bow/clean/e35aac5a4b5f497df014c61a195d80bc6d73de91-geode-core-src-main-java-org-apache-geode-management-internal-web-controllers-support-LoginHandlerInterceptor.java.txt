Merge branch 'release/1.5.0'

-import static org.apache.geode.internal.security.SecurityServiceFactory.findSecurityService;
-
+import javax.servlet.ServletContext;
+import org.springframework.web.context.ServletContextAware;
+import org.apache.geode.annotations.TestingOnly;
+import org.apache.geode.management.internal.JettyHelper;
-public class LoginHandlerInterceptor extends HandlerInterceptorAdapter {
+public class LoginHandlerInterceptor extends HandlerInterceptorAdapter
+    implements ServletContextAware {
-  private final SecurityService securityService;
+  private SecurityService securityService;
-  public LoginHandlerInterceptor() {
-    this(findSecurityService());
-  }
+  public LoginHandlerInterceptor() {}
+  @TestingOnly
+
+  /**
+   * This is used to pass attributes into the Spring/Jetty environment from the instantiating Geode
+   * environment.
+   *
+   * @param servletContext
+   */
+  @Override
+  public void setServletContext(ServletContext servletContext) {
+    securityService = (SecurityService) servletContext
+        .getAttribute(JettyHelper.SECURITY_SERVICE_SERVLET_CONTEXT_PARAM);
+  }

MOV26 INS26 INS26 INS26 MOV31 INS40 INS40 INS40 UPD40 INS43 INS31 INS42 INS83 INS42 INS8 INS78 INS29 INS78 INS39 INS42 INS44 INS42 INS65 INS65 INS42 INS43 INS42 INS21 INS66 INS66 INS42 INS42 INS7 INS42 INS11 INS43 INS32 INS42 INS42 UPD42 MOV42 INS40 DEL83 DEL42 DEL32 DEL17