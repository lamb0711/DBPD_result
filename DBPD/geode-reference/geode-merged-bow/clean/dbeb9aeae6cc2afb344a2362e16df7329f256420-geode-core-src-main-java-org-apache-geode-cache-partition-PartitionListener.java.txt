Merge branch 'release/1.1.0'

- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
+ * Licensed to the Apache Software Foundation (ASF) under one or more contributor license
+ * agreements. See the NOTICE file distributed with this work for additional information regarding
+ * copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance with the License. You may obtain a
+ * copy of the License at
- *      http://www.apache.org/licenses/LICENSE-2.0
+ * http://www.apache.org/licenses/LICENSE-2.0
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
+ * Unless required by applicable law or agreed to in writing, software distributed under the License
+ * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
+ * or implied. See the License for the specific language governing permissions and limitations under
+ * the License.
- * A callback for partitioned regions, invoked when a partition region is
- * created or any bucket in a partitioned region becomes primary.<br>
+ * A callback for partitioned regions, invoked when a partition region is created or any bucket is
+ * created/deleted or any bucket in a partitioned region becomes primary.<br>
- * A sample implementation of this interface to colocate partition regions using
- * a primary key without having to honor the redundancy contract for every
- * colocate partition regions is as follows : <br>
- * 
+ * It is highly recommended that implementations of this listener should be quick and not try to
+ * manipulate regions and data because the the callbacks are invoked while holding locks that may
+ * block region operations. <br>
+ *
- * public class ColocatingPartitionListener extends PartitionListenerAdapter
- *     implements Declarable {
- *   private Cache cache;
- * 
- *   private List&lt;String&gt; viewRegionNames = new ArrayList&lt;String&gt;();
- * 
- *   public ColocatingPartitionListener() {
- *   }
+ * package com.myCompany.MyPartitionListener;
+ *
+ * public class MyPartitionListener extends PartitionListenerAdapter implements Declarable {
+ *   private String regionName;
+ *
+ *   public MyPartitionListener() {}
- *     for (String viewRegionName : viewRegionNames) {
- *       Region viewRegion = cache.getRegion(viewRegionName);
- *       PartitionManager.createPrimaryBucket(viewRegion, bucketId, true, true);
- *     }
- *   }
- * 
- *   public void init(Properties props) {
- *     String viewRegions = props.getProperty(&quot;viewRegions&quot;);
- *     StringTokenizer tokenizer = new StringTokenizer(viewRegions, &quot;,&quot;);
- *     while (tokenizer.hasMoreTokens()) {
- *       viewRegionNames.add(tokenizer.nextToken());
- *     }
+ *     System.out.println("bucket:" + bucketId + " has become primary on " + this.regionName);
- *     cache = region.getCache();
+ *     this.regionName = region.getName();
- * A sample declaration of the ColocatingPartitionListener in cache.xml as
- * follows :<br>
+ * A sample declaration of the MyPartitionListener in cache.xml as follows :<br>
- *         &lt;class-name&gt;com.myCompany.ColocatingPartitionListener&lt;/class-name&gt;
- *          &lt;parameter name=&quot;viewRegions&quot;&gt;
- *              &lt;string&gt;/customer/ViewA,/customer/ViewB&lt;/string&gt;
- *          &lt;/parameter&gt;             
+ *         &lt;class-name&gt;com.myCompany.MyPartitionListener&lt;/class-name&gt;
- *      Note : Please contact support@gemstone.com before using these APIs
- * 
-   * @param bucketId
-   *          id of the bucket which became primary
+   * @param bucketId id of the bucket which became primary
-   * @param region
-   *          handle of the region which is created
+   * @param region handle of the region which is created
-   * Callback invoked after a bucket has been removed from a member (e.g. during
-   * rebalancing). This API is useful for maintaining external data structures
-   * by bucket id or key.
+   * Callback invoked after a bucket has been removed from a member (e.g. during rebalancing). This
+   * API is useful for maintaining external data structures by bucket id or key.
-   * @param bucketId
-   *          id of the bucket removed
-   * @param keys
-   *          keys in the bucket removed
+   * @param bucketId id of the bucket removed
+   * @param keys keys in the bucket removed
-   * Callback invoked after a bucket has been created in a member (e.g. during
-   * rebalancing). This API is useful for maintaining external data structures
-   * by bucket id or key. Note that this API is invoked after the initial image
-   * has been completed so creates and destroys may occur in the keys. It is
-   * best to use this API during periods of no cache activity.
+   * Callback invoked after a bucket has been created in a member (e.g. during rebalancing). This
+   * API is useful for maintaining external data structures by bucket id or key. Note that this API
+   * is invoked after the initial image has been completed so creates and destroys may occur in the
+   * keys. It is best to use this API during periods of no cache activity.
-   * @param bucketId
-   *          id of the bucket created
-   * @param keys
-   *          keys in the bucket created
+   * @param bucketId id of the bucket created
+   * @param keys keys in the bucket created

MOV44 MOV44 MOV44 MOV44 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 MOV65 MOV65 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66