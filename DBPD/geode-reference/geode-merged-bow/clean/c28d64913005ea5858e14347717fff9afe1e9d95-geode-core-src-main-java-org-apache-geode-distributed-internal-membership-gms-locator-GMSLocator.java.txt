Merge branch 'release/1.4.0'

+import static org.apache.geode.internal.i18n.LocalizedStrings.LOCATOR_UNABLE_TO_RECOVER_VIEW;
+
-import org.apache.geode.InternalGemFireException;
-
-import org.apache.geode.distributed.internal.ClusterConfigurationService;
-import org.apache.geode.distributed.internal.DistributionManager;
+import org.apache.geode.InternalGemFireException;
+import org.apache.geode.distributed.internal.ClusterConfigurationService;
+import org.apache.geode.distributed.internal.DistributionManager;
+import org.apache.geode.distributed.internal.membership.InternalDistributedMember.InternalDistributedMemberWrapper;
-import org.apache.geode.distributed.internal.membership.InternalDistributedMember.InternalDistributedMemberWrapper;
-import static org.apache.geode.internal.i18n.LocalizedStrings.LOCATOR_UNABLE_TO_RECOVER_VIEW;
-
-   * @param stateFile the file to persist state to/recover from
-  public GMSLocator(InetAddress bindAddress, File stateFile, String locatorString,
-      boolean usePreferredCoordinators, boolean networkPartitionDetectionEnabled,
-      LocatorStats stats, String securityUDPDHAlgo) {
+  public GMSLocator(InetAddress bindAddress, String locatorString, boolean usePreferredCoordinators,
+      boolean networkPartitionDetectionEnabled, LocatorStats stats, String securityUDPDHAlgo) {
-    this.viewFile = stateFile;
+  /**
+   * Test hook - set the persistent view file
+   */
+  public void setViewFile(File file) {
+    this.viewFile = file;
+  }
+
+    if (this.viewFile == null) {
+      this.viewFile = new File("locator" + server.getPort() + "view.dat");
+    }

MOV26 MOV26 MOV26 MOV26 MOV26 INS31 INS29 INS83 INS39 INS42 MOV44 INS8 INS65 UPD42 MOV21 INS25 INS66 INS27 INS8 UPD42 INS22 INS33 INS21 INS52 INS42 INS7 INS22 INS14 INS52 INS42 INS43 INS27 INS42 INS45 INS32 INS45 INS42 INS42 DEL42 DEL66 DEL65