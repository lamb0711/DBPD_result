Merge remote-tracking branch 'origin/develop' into feature/GEODE-3239

-import org.apache.geode.internal.offheap.annotations.Released;
+    this(r, r.getMyId(), r.getGemFireCache().getCacheServers().size() > 0);
+  }
+
+  /**
+   * used for instantiation of a profile associated with a region and not describing region filters
+   * in a different process. Do not use this method when instantiating profiles to store in
+   * distribution advisor profiles.
+   */
+  public FilterProfile(LocalRegion r, DistributedMember member, boolean hasCacheServer) {
-    this.memberID = region.getMyId();
+    this.memberID = member;
-    this.localProfile.hasCacheServer = (r.getGemFireCache().getCacheServers().size() > 0);
+    this.localProfile.hasCacheServer = hasCacheServer;
-
-    InternalDataSerializer.invokeToData(((InternalDistributedMember) memberID), out);
+    InternalDataSerializer.invokeToData(memberID, out);
-        CacheDistributionAdvisee r = findRegion();
+        CacheDistributionAdvisee r = findRegion(dm);
-    private CacheDistributionAdvisee findRegion() {
+    private CacheDistributionAdvisee findRegion(DistributionManager dm) {
-      InternalCache cache;
-        cache = GemFireCacheImpl.getInstance();
+        InternalCache cache = dm.getCache();

INS31 INS29 INS83 INS42 INS44 INS8 INS44 INS44 INS65 INS43 INS42 INS17 INS43 INS42 INS39 INS42 INS44 INS66 INS66 INS66 INS42 INS42 INS32 MOV27 INS42 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS60 MOV43 INS59 INS42 INS32 INS42 UPD42 MOV42 UPD42 MOV42 DEL40 DEL26 DEL42 DEL42 DEL32 DEL36 DEL42 DEL43 DEL42 DEL11 DEL36 DEL42 DEL59 DEL60 DEL42 DEL32 DEL7 DEL21