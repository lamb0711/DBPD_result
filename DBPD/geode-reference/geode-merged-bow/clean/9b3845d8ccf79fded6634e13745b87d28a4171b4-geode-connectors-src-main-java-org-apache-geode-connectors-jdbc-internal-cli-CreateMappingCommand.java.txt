GEODE-6273: add group to jdbc-mapping create and describe (#3100)

gfsh create jdbc-mapping and describe jdbc-mapping now have a --group option.

Co-authored-by: Scott Jewell <sjewell@pivotal.io>
Co-authored-by: Jianxia Chen <jchen@pivotal.io>
Co-authored-by: Ben Ross <bross@pivotal.io>

-
-
+import org.apache.geode.management.cli.ConverterHint;
+  private static final String CREATE_MAPPING__GROUPS_NAME = "groups";
+  private static final String CREATE_MAPPING__GROUPS_NAME__HELP =
+      "The names of the server groups on which this mapping should be created.";
-          help = CREATE_MAPPING__SCHEMA_NAME__HELP) String schema) {
+          help = CREATE_MAPPING__SCHEMA_NAME__HELP) String schema,
+      @CliOption(key = {CliStrings.GROUP, CliStrings.GROUPS},
+          optionContext = ConverterHint.MEMBERGROUP,
+          help = CREATE_MAPPING__GROUPS_NAME__HELP) String[] groups) {
-    // input
-    Set<DistributedMember> targetMembers = findMembersForRegion(regionName);
+    Set<DistributedMember> targetMembers = findMembers(groups, null);
-      CacheConfig cacheConfig = configurationPersistenceService.getCacheConfig(null);
-      RegionConfig regionConfig = checkForRegion(regionName, cacheConfig);
-      checkForExistingMapping(regionName, regionConfig);
-      checkForCacheLoader(regionName, regionConfig);
-      checkForCacheWriter(regionName, synchronous, regionConfig);
-      checkForAsyncQueue(regionName, synchronous, cacheConfig);
+      if (groups == null) {
+        groups = new String[] {ConfigurationPersistenceService.CLUSTER_CONFIG};
+      }
+      for (String group : groups) {
+        CacheConfig cacheConfig = configurationPersistenceService.getCacheConfig(group);
+        RegionConfig regionConfig = checkForRegion(regionName, cacheConfig);
+        checkForExistingMapping(regionName, regionConfig);
+        checkForCacheLoader(regionName, regionConfig);
+        checkForCacheWriter(regionName, synchronous, regionConfig);
+        checkForAsyncQueue(regionName, synchronous, cacheConfig);
+      }

INS26 INS40 INS23 INS23 INS83 INS83 INS83 INS43 INS59 INS83 INS83 INS83 INS43 INS59 INS44 INS42 INS42 INS45 INS42 INS42 INS45 INS77 INS5 INS42 INS42 INS80 INS80 INS80 INS43 INS85 INS8 INS42 INS4 INS42 INS40 INS42 INS42 INS42 MOV60 INS25 INS70 INS40 INS40 UPD42 UPD42 INS33 INS27 INS8 INS44 INS42 MOV8 INS42 INS33 INS21 INS43 INS42 INS7 INS42 INS42 INS3 INS5 INS4 INS42 INS43 INS85 INS40 INS42 DEL33