GEODE-2267: enable gfsh to download file from http connection (GEODE-2418)

-import java.util.concurrent.Callable;
-
+import org.apache.geode.management.internal.cli.result.ResultBuilder;
+import org.springframework.core.io.InputStreamResource;
+import org.springframework.http.HttpHeaders;
+import org.springframework.http.HttpStatus;
+import java.io.File;
+import java.io.FileInputStream;
+
-  public Callable<ResponseEntity<String>> exportLogs(
-      @RequestParam(CliStrings.EXPORT_LOGS__DIR) final String directory,
+  public ResponseEntity<InputStreamResource> exportLogs(
+      @RequestParam(value = CliStrings.EXPORT_LOGS__DIR, required = false) final String directory,
-    return getProcessCommandCallable(command.toString());
+    // the result is json string from CommandResult
+    String result = processCommand(command.toString());
+
+    // parse the result to get the file path
+    String filePath = ResultBuilder.fromJson(result).nextLine().trim();
+
+    HttpHeaders respHeaders = new HttpHeaders();
+    try {
+      InputStreamResource isr = new InputStreamResource(new FileInputStream(new File(filePath)));
+      return new ResponseEntity<InputStreamResource>(isr, respHeaders, HttpStatus.OK);
+    } catch (Exception ex) {
+      throw new RuntimeException("IOError writing file to output stream", ex);
+    }

MOV26 INS26 INS26 INS26 INS26 INS26 INS40 INS40 INS40 INS40 UPD40 INS40 UPD74 MOV74 INS43 INS77 INS60 INS60 INS60 INS54 INS42 INS42 INS80 INS80 MOV43 INS59 INS43 INS59 INS43 INS59 INS8 INS12 INS42 INS40 INS42 INS9 INS42 MOV32 INS42 INS42 INS32 INS42 INS42 INS14 INS60 MOV41 INS44 INS8 UPD42 INS32 INS42 INS43 INS43 INS59 INS14 INS43 INS42 INS53 INS32 INS42 INS42 INS42 INS42 INS14 INS74 INS42 INS42 INS40 INS42 INS14 INS42 INS42 INS42 INS43 INS14 INS43 INS43 INS43 INS45 INS42 INS42 INS43 INS14 INS42 INS42 INS42 INS42 INS43 INS42 INS42 DEL42 DEL43 DEL74 DEL42 DEL40 DEL79