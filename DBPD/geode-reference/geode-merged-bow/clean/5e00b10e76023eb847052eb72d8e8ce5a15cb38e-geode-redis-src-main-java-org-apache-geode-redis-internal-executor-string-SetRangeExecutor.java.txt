GEODE-8134: convert String commands to use Function+Delta (#5160)

Co-authored-by: john Hutchison <hutchisonjo@vmware.com>
Co-authored-by: Ray Ingles <ringles@vmware.com>
+import org.apache.geode.redis.internal.RedisData;
-    Region<ByteArrayWrapper, ByteArrayWrapper> r = context.getRegionProvider().getStringsRegion();
+    Region<ByteArrayWrapper, RedisData> region = context.getRegionProvider().getStringsRegion();
-    ByteArrayWrapper wrapper = r.get(key);
+    RedisString redisString = (RedisString) region.get(key);
-      int length = wrapper == null ? 0 : wrapper.toBytes().length;
-      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), length));
-      if (wrapper == null) {
+      int length;
+      if (redisString == null) {
+        length = 0;
+      } else {
+        ByteArrayWrapper wrapper = redisString.getValue();
+        length = wrapper.length();
+      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), length));
+
-    if (wrapper == null) {
+    if (redisString == null) {
-      r.put(key, new ByteArrayWrapper(bytes));
+      region.put(key, new RedisString(new ByteArrayWrapper(bytes)));
-
+      ByteArrayWrapper wrapper = redisString.getValue();
-        r.put(key, new ByteArrayWrapper(bytes));
+        region.put(key, new RedisString(new ByteArrayWrapper(bytes)));
-        r.put(key, new ByteArrayWrapper(newBytes));
+        region.put(key, new RedisString(new ByteArrayWrapper(bytes)));

INS26 INS40 UPD74 INS43 UPD43 UPD42 INS42 UPD42 INS11 UPD42 INS60 UPD42 INS43 INS32 INS60 INS25 MOV43 INS59 INS42 UPD42 MOV42 MOV42 MOV42 MOV39 INS59 INS27 MOV8 INS8 UPD42 INS14 INS42 INS32 MOV42 UPD42 MOV42 MOV33 INS21 INS60 INS21 INS43 MOV14 INS42 INS42 INS7 MOV43 INS59 INS7 INS42 UPD42 INS14 UPD42 INS14 INS42 INS34 INS42 INS32 INS42 INS32 INS43 MOV14 INS43 INS14 UPD42 MOV42 INS42 INS42 INS42 INS42 INS42 INS43 UPD42 MOV42 INS42 DEL32 DEL27 DEL34 DEL42 DEL32 DEL42 DEL22 DEL16 DEL59 DEL60 DEL42 DEL33 DEL27 DEL25 DEL14