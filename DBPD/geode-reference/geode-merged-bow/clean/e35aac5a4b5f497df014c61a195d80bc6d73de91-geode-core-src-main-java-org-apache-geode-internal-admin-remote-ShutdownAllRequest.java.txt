Merge branch 'release/1.5.0'

-import org.apache.geode.distributed.internal.DM;
+import org.apache.geode.distributed.internal.ClusterDistributionManager;
-import org.apache.geode.internal.cache.GemFireCacheImpl;
-  public static Set send(final DM dm, long timeout) {
-    boolean hadCache = hasCache();
-    DistributionManager dism = dm instanceof DistributionManager ? (DistributionManager) dm : null;
+  public static Set send(final DistributionManager dm, long timeout) {
+    boolean hadCache = hasCache(dm);
+    ClusterDistributionManager dism =
+        dm instanceof ClusterDistributionManager ? (ClusterDistributionManager) dm : null;
-        e.handleAsUnexpected();
+        e.handleCause();
-  protected void process(DistributionManager dm) {
-    boolean isToShutdown = hasCache();
+  protected void process(ClusterDistributionManager dm) {
+    boolean isToShutdown = hasCache(dm);
-  private static boolean hasCache() {
-    InternalCache cache = GemFireCacheImpl.getInstance();
+  private static boolean hasCache(DistributionManager manager) {
+    InternalCache cache = manager.getCache();
-  protected AdminResponse createResponse(DM dm) {
-    boolean isToShutdown = hasCache();
+  protected AdminResponse createResponse(DistributionManager dm) {
+    boolean isToShutdown = hasCache(dm);
-    ShutDownAllReplyProcessor(DM dm, Collection initMembers) {
+    ShutDownAllReplyProcessor(DistributionManager dm, Collection initMembers) {

UPD40 INS44 INS44 MOV44 MOV43 INS43 INS42 MOV43 INS42 UPD43 INS42 UPD43 UPD42 UPD42 INS42 INS42 UPD42 UPD42 INS42 INS43 INS43 INS42 INS42 UPD42 DEL40 DEL26 DEL42 DEL43 DEL42 DEL43 DEL42 DEL44