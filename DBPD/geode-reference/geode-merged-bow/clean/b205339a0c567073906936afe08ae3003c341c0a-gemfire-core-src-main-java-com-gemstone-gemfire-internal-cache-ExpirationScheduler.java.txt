Merge branch 'feature/GEODE-8' into develop

-import java.util.Date;
-      // By using getExpirationTime and passing a Date to schedule
-      // we get rid of two calls of System.currentTimeMillis().
-      // The Date object creation is very simple and has a very short life.
-      timer.schedule(task, new Date(task.getExpirationTime()));
+      // To fix bug 52267 do not create a Date here; instead calculate the relative duration.
+      timer.schedule(task, task.getExpiryMillis());
-
-  /** schedules the given entry expiration task */
+  
+  /** schedules the given entry expiration task and returns true; returns false if not scheduled */
-    try {
-      if(logger.isTraceEnabled()) {
-        logger.trace(LocalizedMessage.create(LocalizedStrings.ExpirationScheduler_SCHEDULING__0__TO_FIRE_IN__1__MS, new Object[] {task, Long.valueOf(task.getExpiryMillis())}));
-      }
-      // By using getExpirationTime and passing a Date to schedule
-      // we get rid of two calls of System.currentTimeMillis().
-      // The Date object creation is very simple and has a very short life.
-      timer.schedule(task, new Date(task.getExpirationTime()));
-    }
-    catch (EntryNotFoundException e) {
-      // ignore - there are unsynchronized paths that allow an entry to
-      // be destroyed out from under us.
-      return false;
-    }
-    catch (IllegalStateException e) {
-      // task must have been cancelled by another thread so don't schedule it
-      return false;
-    }
-    return true;
-  }
-
-  /** schedule a java.util.TimerTask for execution */
-  public void schedule(SystemTimer.SystemTimerTask task, long when) {
-    timer.schedule(task, when);
+    return addExpiryTask(task) != null;

INS8 INS41 UPD66 INS27 INS32 INS33 INS42 MOV42 INS32 MOV42 UPD42 MOV42 DEL40 DEL26 DEL42 DEL43 DEL32 DEL14 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL40 DEL42 DEL43 DEL85 DEL5 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL4 DEL3 DEL32 DEL32 DEL21 DEL8 DEL25 DEL42 DEL42 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL14 DEL32 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL9 DEL41 DEL8 DEL12 DEL42 DEL43 DEL42 DEL44 DEL9 DEL41 DEL8 DEL12 DEL54 DEL9 DEL41 DEL8 DEL66 DEL65 DEL29 DEL83 DEL39 DEL42 DEL40 DEL43 DEL42 DEL44 DEL39 DEL42 DEL44 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL31