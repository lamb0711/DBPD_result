GEODE-6823 Hang in ElderInitProcessor.init()

This corrects elder init processing to use the isCloseInProgress to
check for shutdown.  A coding error during refactoring caused it to check the
isCloseInProgress() method, which did more than just return the value of
the isCloseInProgress variable and was incorrectly reporting a close in progress
during startup operations.

I've renamed the old isCloseInProgress() method to avoid similar coding
errors in the future and added a new implementation that merely returns
the value of the field, as you'd expect it to do.

While writing tests I found that the ClusterElderManagerTest was leaving
blocked threads behind because the waitForElder() method in
ClusterElderManager was not interruptable.  I've changed that method to
be interruptable.  We don't interrupt message-processing threads so this
should be a safe change.

-      if (isCloseInProgress()) {
+      if (shouldInhibitMembershipWarnings()) {
-  /**
-   * Returns true if this DM or the DistributedSystem owned by it is closing or is closed.
-   */
-  boolean isCloseInProgress() {
-    if (closeInProgress) {
+  private boolean shouldInhibitMembershipWarnings() {
+    if (isCloseInProgress()) {
-  public boolean isShutdownStarted() {
+  /**
+   * Returns true if this distribution manager has initiated shutdown
+   */
+  public boolean isCloseInProgress() {
-          if (isCloseInProgress()) {
+          if (shouldInhibitMembershipWarnings()) {
-          if (isCloseInProgress()) {
+          if (shouldInhibitMembershipWarnings()) {
-      if (p_crashed && !isCloseInProgress()) {
+      if (p_crashed && !shouldInhibitMembershipWarnings()) {
-  public ElderState getElderState(boolean waitToBecomeElder) {
+  public ElderState getElderState(boolean waitToBecomeElder) throws InterruptedException {
-  public boolean waitForElder(final InternalDistributedMember desiredElder) {
+  public boolean waitForElder(final InternalDistributedMember desiredElder)
+      throws InterruptedException {
-          if (manager.isCloseInProgress()) {
+          if (manager.shouldInhibitMembershipWarnings()) {

INS83 UPD42 INS29 UPD42 INS43 INS43 INS65 INS42 INS42 INS32 INS66 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 DEL66 DEL65 DEL29 DEL42