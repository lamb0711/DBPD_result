GEODE-1463: Legacy OperationContexts do not set the appropriate Shiro
permission tuple

- Moved ResourceOperationContext into a 'public' package.
- Converted OperationContext into an interface.
- Cleaned up the hierarchy of everything that previously
  extended OperationContext.
- Marked GetOperationContext as abstract seeing that
  GetOperationContextImpl extends it and there are no uses of
  GetOperationContext anywhere. (So why does it still exist?).

-import com.gemstone.gemfire.cache.operations.OperationContext;
+import com.gemstone.gemfire.cache.operations.internal.ResourceOperationContext;
-public class QueryOperationContext extends OperationContext {
+public class QueryOperationContext extends ResourceOperationContext {
-  /** True if this is a post-operation context */
-  private boolean postOperation;
-
-   * 
-   * @param queryString
-   *                the query string for this operation
-   * @param regionNames
-   *                names of regions that are part of the query string
-   * @param postOperation
-   *                true to set the post-operation flag
+   *
+   * @param queryString   the query string for this operation
+   * @param regionNames   names of regions that are part of the query string
+   * @param postOperation true to set the post-operation flag
-  public QueryOperationContext(String queryString, Set regionNames,
-      boolean postOperation) {
+  public QueryOperationContext(String queryString, Set regionNames, boolean postOperation) {
+    this(OperationCode.QUERY, queryString, regionNames, postOperation);
+  }
+
+  QueryOperationContext(OperationCode code, String queryString, Set regionNames, boolean postOperation) {
+    super(Resource.DATA, code, postOperation);
-    this.queryResult = null;
-    this.postOperation = postOperation;
-   * 
-   * @param queryString
-   *                the query string for this operation
-   * @param regionNames
-   *                names of regions that are part of the query string
-   * @param postOperation
-   *                true to set the post-operation flag
-   * @param queryParams
-   *                the bind parameters for the query
+   *
+   * @param queryString   the query string for this operation
+   * @param regionNames   names of regions that are part of the query string
+   * @param postOperation true to set the post-operation flag
+   * @param queryParams   the bind parameters for the query
-  public QueryOperationContext(String queryString, Set regionNames,
-      boolean postOperation, Object[] queryParams) {
-    this(queryString, regionNames, postOperation);
+  public QueryOperationContext(String queryString, Set regionNames, boolean postOperation, Object[] queryParams) {
+    this(OperationCode.QUERY, queryString, regionNames, postOperation);
-  
-  /**
-   * Return the operation associated with the <code>OperationContext</code>
-   * object.
-   * 
-   * @return the <code>OperationCode</code> of this operation
-   */
-  @Override
-  public OperationCode getOperationCode() {
-    return OperationCode.QUERY;
-  }
-
-  /**
-   * True if the context is for post-operation.
-   */
-  @Override
-  public boolean isPostOperation() {
-    return this.postOperation;
-  }
-
-  /**
-   * Set the post-operation flag to true.
-   */
-  public void setPostOperation() {
-    this.postOperation = true;
-  }
-   * 
+   *
-   * 
+   *
-   * 
+   *
-   * 
+   *
-   * 
+   *
-   * 
+   *
-

UPD40 UPD43 INS31 UPD42 INS29 MOV83 INS42 INS44 INS44 INS44 INS8 INS42 INS44 MOV65 UPD65 MOV65 INS65 UPD65 MOV65 INS43 INS42 INS43 INS42 INS39 INS42 INS17 MOV43 INS42 INS46 INS42 UPD66 INS42 UPD66 MOV66 INS42 UPD66 UPD42 MOV42 INS42 INS40 INS42 INS42 INS42 INS42 INS40 INS42 INS42 UPD66 UPD66 UPD66 UPD66 INS40 DEL29 DEL83 DEL39 DEL42 DEL59 DEL23 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL83 DEL42 DEL52 DEL42 DEL22 DEL33 DEL7 DEL21 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21 DEL66 DEL65 DEL29 DEL42 DEL78 DEL42 DEL40 DEL41 DEL8 DEL31 DEL66 DEL65 DEL29 DEL42 DEL78 DEL83 DEL39 DEL42 DEL52 DEL42 DEL22 DEL41 DEL8 DEL31 DEL66 DEL65 DEL29 DEL83 DEL39 DEL42 DEL52 DEL42 DEL22 DEL9 DEL7 DEL21 DEL8 DEL31