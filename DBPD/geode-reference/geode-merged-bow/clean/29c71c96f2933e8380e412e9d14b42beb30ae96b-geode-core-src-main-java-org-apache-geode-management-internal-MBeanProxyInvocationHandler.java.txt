GEODE-5281: replicate failure and fix bug (#2096)

* GEODE-5281: replicate failure and fix bug

- replicate the bad timing using a DUnit test
- fix the bug by only doing one lookup of MBeans
- add more tests
- fix potential NPE in waiting for regions to be ready on servers

Co-authored-by: Kenneth Howe <khowe@pivotal.io>

* add TestingOnly annotation to setter

add a TestingOnly annotation to setter for ProxyFactory in the
FederatingManager for injecting test spies.

-      Region<String, Object> monitoringRegion, ObjectName objectName, Class interfaceClass)
+      Region<String, Object> monitoringRegion, ObjectName objectName,
+      FederationComponent federationComponent, Class interfaceClass)
-    boolean notificationBroadcaster =
-        ((FederationComponent) monitoringRegion.get(objectName.toString())).isNotificationEmitter();
+    boolean notificationBroadcaster = federationComponent.isNotificationEmitter();

INS44 MOV43 INS42 UPD42 MOV42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL11 DEL36