Feature/geode 3583 storage (#1285)

* This resolves the following tickets: GEODE-4196, GEODE-4197, GEODE-4198, GEODE-4199
   GEODE-4200, GEODE-4201, GEODE-4203, GEODE-4204, GEODE-4205, GEODE-4206
   GEODE-4208, GEODE-4209, GEODE-4210, GEODE-4212, and GEODE-4213
-  public static CachedDeserializable create(byte[] v) {
+  public static CachedDeserializable create(byte[] v, InternalCache cache) {
-      if (isPdxEncoded(v) && cachePrefersPdx()) {
+      if (isPdxEncoded(v) && cachePrefersPdx(cache)) {
-  public static CachedDeserializable create(Object object, int serializedSize) {
+  public static CachedDeserializable create(Object object, int serializedSize,
+      InternalCache cache) {
-      if (object instanceof PdxInstance && cachePrefersPdx()) {
+      if (object instanceof PdxInstance && cachePrefersPdx(cache)) {
-  private static boolean cachePrefersPdx() {
-    InternalCache internalCache = GemFireCacheImpl.getInstance();
+  private static boolean cachePrefersPdx(InternalCache internalCache) {
+    // InternalCache internalCache = GemFireCacheImpl.getInstance();

INS44 INS44 INS44 INS43 INS42 INS43 INS42 MOV43 INS42 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60