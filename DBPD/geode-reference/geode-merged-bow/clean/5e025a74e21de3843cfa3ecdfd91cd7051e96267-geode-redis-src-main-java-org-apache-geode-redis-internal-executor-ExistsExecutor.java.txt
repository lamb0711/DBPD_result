GEODE-7992: test Redis EXISTS (#4962)


Co-authored-by: Murtuza Boxwala <1mboxwala2@gmail.com>
-  private final int EXISTS = 1;
-
-  private final int NOT_EXISTS = 0;
-    List<byte[]> commandElems = command.getProcessedCommand();
+    List<ByteArrayWrapper> commandElems = command.getProcessedCommandWrappers();
-    ByteArrayWrapper key = command.getKey();
-    boolean exists = context.getKeyRegistrar().isRegistered(key);
+    long existsCount = commandElems
+        .subList(1, commandElems.size())
+        .stream()
+        .filter(key -> context.getKeyRegistrar().isRegistered(key))
+        .count();
-    if (exists) {
-      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), EXISTS));
-    } else {
-      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), NOT_EXISTS));
-    }
+    command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), existsCount));

INS60 MOV21 UPD74 UPD39 MOV39 INS59 MOV43 UPD42 MOV42 INS32 UPD42 INS32 INS42 UPD42 INS32 UPD42 MOV42 INS86 INS32 UPD42 MOV42 INS59 MOV32 UPD42 MOV42 UPD42 MOV42 INS34 INS32 INS42 UPD42 MOV42 UPD42 MOV42 DEL83 DEL83 DEL39 DEL42 DEL34 DEL59 DEL23 DEL83 DEL83 DEL39 DEL42 DEL34 DEL59 DEL23 DEL39 DEL85 DEL5 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL59 DEL60 DEL42 DEL8 DEL32 DEL42 DEL32 DEL32 DEL21 DEL8 DEL25