Merge branch 'develop' of https://github.com/apache/geode into feature/GEODE-4528

-import org.apache.geode.internal.protocol.protobuf.v1.ProtobufErrorCode;
+import org.apache.geode.internal.protocol.protobuf.v1.serialization.exception.DecodingException;
+import org.apache.geode.internal.protocol.protobuf.v1.serialization.exception.EncodingException;
-  public static ClientProtocol.ErrorResponse makeErrorResponse(ProtobufErrorCode errorCode,
+  public static ClientProtocol.ErrorResponse makeErrorResponse(BasicTypes.ErrorCode errorCode,
-        .setError(BasicTypes.Error.newBuilder()
-            .setErrorCode(ProtobufUtilities.getProtobufErrorCode(errorCode)).setMessage(message))
+        .setError(BasicTypes.Error.newBuilder().setErrorCode(errorCode).setMessage(message))
+
+  public static ClientProtocol.ErrorResponse makeErrorResponse(Exception exception) {
+    if (exception instanceof ConnectionStateException) {
+      return makeErrorResponse((ConnectionStateException) exception);
+    }
+    return ClientProtocol.ErrorResponse
+        .newBuilder().setError(BasicTypes.Error.newBuilder()
+            .setErrorCode(BasicTypes.ErrorCode.SERVER_ERROR).setMessage(exception.toString()))
+        .build();
+  }
+

MOV26 INS26 UPD40 INS40 INS31 INS83 INS83 INS43 INS42 INS44 INS8 UPD43 INS40 INS43 INS42 INS25 INS41 INS40 INS42 INS62 INS8 INS32 INS42 INS43 INS41 INS32 INS42 INS42 INS32 INS32 INS42 INS32 INS42 INS11 INS40 INS42 INS32 INS42 INS32 MOV42 INS43 INS42 INS32 INS42 INS40 INS42 INS42 INS42 INS40 INS42 DEL42 DEL42 DEL42 DEL32