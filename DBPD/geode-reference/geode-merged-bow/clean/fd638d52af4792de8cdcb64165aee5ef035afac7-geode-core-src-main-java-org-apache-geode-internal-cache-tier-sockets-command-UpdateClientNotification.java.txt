Revert "GEODE-2632: use immutable SecurityService impls to improve performance"

This reverts commit 5eca6f0393c1a05804a4c4b7f97203ee2ec226a2.

+/**
+ * 
+ */
-import org.apache.geode.distributed.internal.DistributionStats;
-import org.apache.geode.internal.cache.tier.sockets.BaseCommand;
-import org.apache.geode.internal.cache.tier.sockets.CacheServerStats;
-import org.apache.geode.internal.cache.tier.sockets.Message;
-import org.apache.geode.internal.cache.tier.sockets.ServerConnection;
-import org.apache.geode.internal.security.SecurityService;
+import org.apache.geode.internal.cache.tier.sockets.*;
+import org.apache.geode.distributed.internal.DistributionStats;
+
-  private static final UpdateClientNotification singleton = new UpdateClientNotification();
+  private final static UpdateClientNotification singleton = new UpdateClientNotification();
-  private UpdateClientNotification() {
-    // nothing
-  }
+  private UpdateClientNotification() {}
-  public void cmdExecute(final Message clientMessage, final ServerConnection serverConnection,
-      final SecurityService securityService, long start) throws IOException {
-
+  public void cmdExecute(Message clientMessage, ServerConnection serverConnection, long start)
+      throws IOException {
+    {
+      long oldStart = start;
+      start = DistributionStats.getStatTime();
+      stats.incReadUpdateClientNotificationRequestTime(start - oldStart);
+    }
+    try {
+      // this is no longer needed the client membership id is now used
+      // // Retrieve the data from the message parts
+      // Part clientPortPart = msg.getPart(0);
+      // int clientPort = clientPortPart.getInt();
+      // if (logger.fineEnabled()) {
+      // logger.fine(servConn.getName()
+      // + ": Received client notification update request ("
+      // + msg.getPayloadLength() + " bytes) for " + clientPort + " from "
+      // + servConn.getSocketHost() + ":" + servConn.getSocketPort());
+      // }
+      // // Update the client socket and remote ports
+      // servConn.getAcceptor().getCacheClientNotifier().registerClientPort(
+      // servConn.getSocketHost(), clientPort, servConn.getSocketPort(),
+      // servConn.getProxyID());
-    long oldStart = start;
-    start = DistributionStats.getStatTime();
-    stats.incReadUpdateClientNotificationRequestTime(start - oldStart);
-
-    oldStart = start;
-    start = DistributionStats.getStatTime();
-    stats.incProcessUpdateClientNotificationTime(start - oldStart);
+      // if (logger.fineEnabled()) {
+      // logger.fine(servConn.getName()
+      // + ": Processed client notification update request for "
+      // + clientPort + " from " + servConn.getSocketHost() + ":"
+      // + servConn.getSocketPort());
+      // }
+    } finally {
+      long oldStart = start;
+      start = DistributionStats.getStatTime();
+      stats.incProcessUpdateClientNotificationTime(start - oldStart);
+    }

MOV26 INS29 UPD40 INS83 INS8 INS54 INS60 MOV21 MOV21 INS8 INS8 INS39 INS59 MOV60 MOV21 MOV21 INS42 INS42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL83 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL7 DEL21