GEODE-6945:geode-managment should create its own set of configurationâ€¦ (#3923)

Co-authored-by: Darrel Schneider <dschneider@pivotal.io>

* remove regionName in Index configuration object, use regionPath to infer it.
* support listing indexes for all regions

-import java.util.ArrayList;
-import java.util.Objects;
-import java.util.stream.Collectors;
+import org.apache.geode.management.configuration.Index;
-  @ApiOperation(value = "list indexes")
+  @ApiOperation(value = "list region indexes")
-  public ClusterManagementListResult<RegionConfig.Index, RuntimeInfo> listIndex(
+  public ClusterManagementListResult<Index, RuntimeInfo> listIndex(
-      @RequestParam(required = false) String id) {
+      @RequestParam(required = false, name = "id") String indexName) {
-    ClusterManagementListResult<RegionConfig, RuntimeRegionInfo> result0 = getRegion(regionName);
-    RegionConfig regionConfig = result0.getResult().get(0).getConfig();
-
-    // only send the index information back
-    List<RegionConfig.Index> indexList = regionConfig.getIndexes().stream().map(e -> {
-      if (StringUtils.isNotBlank(id) && !e.getId().equals(id)) {
-        return null;
-      }
-      e.setRegionName(regionName);
-      return e;
-    }).filter(Objects::nonNull).collect(Collectors.toList());
-
-    List<ConfigurationResult<RegionConfig.Index, RuntimeInfo>> responses = new ArrayList<>();
-    for (RegionConfig.Index index : indexList) {
-      responses.add(new ConfigurationResult<>(index));
+    Index filter = new Index();
+    filter.setRegionPath(regionName);
+    if (StringUtils.isNotBlank(indexName)) {
+      filter.setName(indexName);
+    return clusterManagementService.list(filter);
+  }
-    ClusterManagementListResult<RegionConfig.Index, RuntimeInfo> result =
-        new ClusterManagementListResult<>();
-    result.setResult(responses);
-    return result;
+  @ApiOperation(value = "list indexes")
+  @RequestMapping(method = RequestMethod.GET, value = "/indexes")
+  @ResponseBody
+  @PreAuthorize("@securityService.authorize('CLUSTER', 'READ', 'QUERY')")
+  public ClusterManagementListResult<Index, RuntimeInfo> listAllIndex(
+      @RequestParam(required = false, name = "id") String indexName) {
+    Index filter = new Index();
+    if (StringUtils.isNotBlank(indexName)) {
+      filter.setName(indexName);
+    }
+    return clusterManagementService.list(filter);
-  public ClusterManagementListResult<RegionConfig.Index, RuntimeInfo> getIndex(
+  public ClusterManagementListResult<Index, RuntimeInfo> getIndex(
-    ClusterManagementListResult<RegionConfig.Index, RuntimeInfo> result = listIndex(regionName, id);
-    List<ConfigurationResult<RegionConfig.Index, RuntimeInfo>> indexList = result.getResult();
+    ClusterManagementListResult<Index, RuntimeInfo> result = listIndex(regionName, id);
+    List<ConfigurationResult<Index, RuntimeInfo>> indexList = result.getResult();

MOV26 UPD40 INS31 INS31 INS77 MOV77 MOV78 MOV79 MOV83 UPD74 MOV74 MOV42 MOV44 MOV44 INS8 MOV77 INS77 INS78 INS79 INS83 INS74 INS42 INS44 INS8 UPD74 MOV74 INS42 INS80 UPD43 UPD42 MOV60 INS21 MOV25 INS41 INS42 INS80 INS80 INS42 INS42 INS45 MOV43 UPD43 MOV43 MOV43 INS77 INS43 INS42 MOV60 INS25 MOV41 INS43 MOV43 INS42 INS45 INS42 INS80 INS43 INS32 INS32 INS8 INS32 INS42 INS40 INS42 INS45 UPD42 INS42 INS80 INS80 UPD42 MOV42 INS43 INS32 INS8 INS32 INS42 UPD74 UPD74 INS42 INS45 UPD42 MOV42 UPD42 INS14 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV42 MOV42 UPD42 MOV42 INS21 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 INS9 INS42 INS45 UPD42 MOV42 UPD42 INS42 INS42 INS42 MOV21 INS42 INS42 INS42 MOV43 UPD43 UPD74 INS43 INS32 INS43 UPD42 UPD43 MOV43 INS42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 UPD42 UPD42 UPD42 UPD42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL43 DEL42 DEL43 DEL74 DEL42 DEL42 DEL32 DEL32 DEL32 DEL42 DEL32 DEL38 DEL27 DEL33 DEL41 DEL8 DEL43 DEL40 DEL43 DEL74 DEL42 DEL42 DEL43 DEL42 DEL32 DEL34 DEL32 DEL42 DEL32 DEL59 DEL60 DEL42 DEL43 DEL40 DEL43 DEL74 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL42 DEL59 DEL32 DEL21 DEL42 DEL41 DEL8 DEL86 DEL32 DEL42 DEL42 DEL42 DEL90 DEL32 DEL42 DEL42 DEL42 DEL32 DEL32 DEL59 DEL60 DEL42 DEL43 DEL40 DEL43 DEL74 DEL74 DEL42 DEL42 DEL43 DEL74 DEL14 DEL59 DEL60 DEL40 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL43 DEL74 DEL42 DEL14 DEL32 DEL21 DEL8 DEL70 DEL8 DEL31 DEL40 DEL43 DEL74 DEL40 DEL43 DEL40 DEL43