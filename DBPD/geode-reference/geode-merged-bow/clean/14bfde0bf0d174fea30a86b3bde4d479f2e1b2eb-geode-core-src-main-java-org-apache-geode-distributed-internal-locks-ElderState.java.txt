Merge branch 'release/1.8.0'

-import java.util.Iterator;
-import org.apache.geode.internal.i18n.LocalizedStrings;
-import org.apache.geode.internal.logging.log4j.LocalizedMessage;
-  private final HashMap nameToInfo;
+  private final HashMap<String, GrantorInfo> nameToInfo;
-    this.nameToInfo = new HashMap();
+    this.nameToInfo = new HashMap<>();
-        StringBuffer sb = new StringBuffer("ElderState initialized with:");
-        for (Iterator grantors = this.nameToInfo.keySet().iterator(); grantors.hasNext();) {
-          Object key = grantors.next();
-          // key=dlock svc name, value=GrantorInfo object
-          sb.append("\n\t" + key + ": " + this.nameToInfo.get(key));
+        StringBuilder sb = new StringBuilder("ElderState initialized with:");
+        for (String key : this.nameToInfo.keySet()) {
+          sb.append("\n\t").append(key).append(": ").append(this.nameToInfo.get(key));
-      logger.warn(LogMarker.DLS_MARKER, LocalizedMessage
-          .create(LocalizedStrings.ElderState_ELDERSTATE_PROBLEM_SYSTEM_0, checkDM.getSystem()));
+      logger.warn(LogMarker.DLS_MARKER, "ElderState problem: system={}", checkDM.getSystem());
-          LocalizedMessage.create(
-              LocalizedStrings.ElderState_ELDERSTATE_PROBLEM_SYSTEM_DISTRIBUTIONMANAGER_0,
-              checkDM.getSystem().getDistributionManager()));
+          "ElderState problem: system DistributionManager={}",
+          checkDM.getSystem().getDistributionManager());
-          LocalizedMessage.create(
-              LocalizedStrings.ElderState_ELDERSTATE_PROBLEM_DM_0_BUT_SYSTEM_DISTRIBUTIONMANAGER_1,
-              new Object[] {checkDM, checkDM.getSystem().getDistributionManager()}));
+          "ElderState problem: dm={}, but system DistributionManager={}",
+          new Object[] {checkDM, checkDM.getSystem().getDistributionManager()});
-          // current grantor crashed; make new guy grantor and force recovery
+          // current grantor crashed; make new member grantor and force recovery
-              // current grantor crashed; make new guy grantor and force recovery
+              // current grantor crashed; make new member grantor and force recovery
-        return; // KIRK added this null check because becomeGrantor may not have talked to elder
-                // before destroy dls
+        // added null check because becomeGrantor may not have talked to elder before destroy dls
+        return;
-            LocalizedStrings.ElderState_CANNOT_FORCE_GRANTOR_RECOVERY_FOR_GRANTOR_THAT_IS_TRANSFERRING
-                .toLocalizedString());
+            "Cannot force grantor recovery for grantor that is transferring");

INS74 MOV43 INS43 INS43 INS42 INS42 INS74 MOV32 MOV32 MOV32 MOV43 INS70 UPD42 UPD42 UPD40 INS45 UPD42 UPD42 UPD40 INS45 UPD42 UPD42 UPD40 INS45 UPD43 INS44 MOV32 INS8 UPD42 INS43 INS42 MOV21 INS45 UPD43 UPD42 MOV42 INS32 UPD42 INS32 INS42 MOV32 INS32 INS42 INS45 INS32 INS42 INS42 MOV42 MOV42 INS45 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL45 DEL42 DEL45 DEL27 DEL32 DEL43 DEL42 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL8 DEL24 DEL42 DEL42 DEL40 DEL32 DEL42 DEL42 DEL40 DEL32 DEL42 DEL42 DEL40 DEL32 DEL40 DEL42 DEL32