Rename and remove parameters for InternalResourceManager.runWhenStartupTasksComplete

- Refactor InternalResourceManager.runWhenStartupTasksComplete to return the allOf CompletableFuture
- Move the responsibility for chaining the completion and exception actions to ServerLauncher.awaitStartupTasks

Co-authored-by: Aaron Lindsey <alindsey@pivotal.io>
Co-authored-by: Kirk Lund <klund@apache.org>

+import java.util.Objects;
-import java.util.function.Consumer;
+  /**
+   * Adds a task that represents an asynchronous action during startup
+   *
+   * @param startupTask the CompletableFuture startup task
+   */
+    Objects.requireNonNull(startupTask);
-  // TODO Aaron rename and remove parameters
-  public CompletableFuture<Void> runWhenStartupTasksComplete(Runnable runnable,
-      Consumer<Throwable> exceptionAction) {
-    CompletableFuture<Void> startupTasksCompleted =
-        CompletableFuture.allOf(startupTasks.toArray(new CompletableFuture[0]))
-            .thenRun(runnable)
-            .exceptionally((throwable) -> {
-              exceptionAction.accept(throwable);
-              return null;
-            });
-
+  /**
+   * Clears the startup tasks and returns a CompletableFuture that completes when all of the startup
+   * tasks complete.
+   *
+   * @return a CompletableFuture that completes when all of the startup tasks complete
+   */
+  public CompletableFuture<Void> allOfStartupTasks() {
+    CompletableFuture[] completableFutures = startupTasks.toArray(new CompletableFuture[0]);
-
-    return startupTasksCompleted;
+    return CompletableFuture.allOf(completableFutures);

MOV26 UPD40 INS29 INS29 UPD42 INS65 INS65 INS21 INS65 INS65 INS66 INS42 INS66 INS32 INS66 INS66 INS66 INS5 INS32 INS42 INS42 INS42 INS43 INS85 INS42 MOV32 INS42 INS42 INS42 MOV42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL44 DEL43 DEL42 DEL43 DEL74 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL59 DEL42 DEL42 DEL42 DEL32 DEL21 DEL33 DEL41 DEL8 DEL86 DEL32 DEL42