GEODE-7479: Change Membership interface to use MemberIdentifier interface (#4420)

Changing all classes in Membership to be parameterized by an ID type,
which extends MemberIdentifier. This allows core to create a membership
system that manages InternalDistributedMember objects in a type safe
way.

Removing all uses of InternalDistributedMember, DistributedMember, and
friends from within the membership code.

-package org.apache.geode.distributed.internal.membership;
+package org.apache.geode.distributed.internal.membership.gms.api;
-import org.apache.geode.UnmodifiableException;
-import org.apache.geode.distributed.DistributedMember;
-public class MembershipView {
+public class MembershipView<ID extends MemberIdentifier> {
-  private List<InternalDistributedMember> members;
-  private Set<InternalDistributedMember> shutdownMembers;
-  private Set<InternalDistributedMember> crashedMembers;
-  private InternalDistributedMember creator;
-  private Set<InternalDistributedMember> hashedMembers;
+  private List<ID> members;
+  private Set<ID> shutdownMembers;
+  private Set<ID> crashedMembers;
+  private ID creator;
+  private Set<ID> hashedMembers;
-  public MembershipView(InternalDistributedMember creator, int viewId,
-      List<InternalDistributedMember> members) {
+  public MembershipView(ID creator, int viewId,
+      List<ID> members) {
-  public MembershipView(MembershipView other, int viewId) {
+  public MembershipView(MembershipView<ID> other, int viewId) {
-  public MembershipView(InternalDistributedMember creator, int viewId,
-      List<InternalDistributedMember> mbrs, Set<InternalDistributedMember> shutdowns,
-      Set<InternalDistributedMember> crashes) {
+  public MembershipView(ID creator, int viewId,
+      List<ID> mbrs, Set<ID> shutdowns,
+      Set<ID> crashes) {
-  public InternalDistributedMember getCreator() {
+  public ID getCreator() {
-  public void setCreator(InternalDistributedMember creator) {
+  public void setCreator(ID creator) {
-  public List<InternalDistributedMember> getMembers() {
+  public List<ID> getMembers() {
-  public List<InternalDistributedMember> getNewMembers(MembershipView olderView) {
-    List<InternalDistributedMember> result = new ArrayList<>(members);
+  public List<ID> getNewMembers(MembershipView<ID> olderView) {
+    List<ID> result = new ArrayList<>(members);
-  public void add(InternalDistributedMember mbr) {
+  public void add(ID mbr) {
-      throw new UnmodifiableException("this membership view is not modifiable");
+      throw new IllegalStateException("this membership view is not modifiable");
-  public boolean remove(InternalDistributedMember mbr) {
+  public boolean remove(ID mbr) {
-      throw new UnmodifiableException("this membership view is not modifiable");
+      throw new IllegalStateException("this membership view is not modifiable");
-  public void removeAll(Collection<InternalDistributedMember> ids) {
+  public void removeAll(Collection<ID> ids) {
-      throw new UnmodifiableException("this membership view is not modifiable");
+      throw new IllegalStateException("this membership view is not modifiable");
-  public boolean contains(DistributedMember mbr) {
-    assert mbr instanceof InternalDistributedMember;
+  public boolean contains(MemberIdentifier mbr) {
-  public InternalDistributedMember getLeadMember() {
-    for (InternalDistributedMember mbr : this.members) {
+  public ID getLeadMember() {
+    for (ID mbr : this.members) {
-  public synchronized InternalDistributedMember getCanonicalID(InternalDistributedMember id) {
+  public synchronized ID getCanonicalID(ID id) {
-      for (InternalDistributedMember m : this.members) {
+      for (ID m : this.members) {
-  public InternalDistributedMember getCoordinator() {
-    for (InternalDistributedMember addr : members) {
+  public ID getCoordinator() {
+    for (ID addr : members) {
-  public Set<InternalDistributedMember> getShutdownMembers() {
+  public Set<ID> getShutdownMembers() {
-  public Set<InternalDistributedMember> getCrashedMembers() {
+  public Set<ID> getCrashedMembers() {
-    InternalDistributedMember lead = getLeadMember();
+    ID lead = getLeadMember();
-    for (InternalDistributedMember mbr : this.members) {
+    for (ID mbr : this.members) {
-      for (InternalDistributedMember mbr : this.shutdownMembers) {
+      for (ID mbr : this.shutdownMembers) {
-      for (InternalDistributedMember mbr : this.crashedMembers) {
+      for (ID mbr : this.crashedMembers) {
-      return this.members.equals(((MembershipView) other).getMembers());
+      return this.members.equals(((MembershipView<ID>) other).getMembers());

UPD40 INS73 INS42 INS43 UPD74 UPD74 UPD74 UPD43 UPD74 UPD43 UPD74 UPD74 UPD43 UPD43 UPD43 UPD74 UPD74 INS42 UPD43 UPD43 UPD43 UPD42 UPD43 UPD43 UPD74 INS74 UPD43 UPD74 UPD74 UPD74 UPD42 UPD43 UPD43 UPD43 INS74 UPD43 UPD43 UPD74 UPD43 UPD42 UPD42 UPD43 UPD42 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 MOV43 INS43 UPD42 UPD43 UPD43 UPD43 UPD42 UPD42 UPD42 MOV43 INS43 UPD74 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD43 UPD42 INS42 UPD42 UPD42 UPD42 INS42 UPD43 UPD42 UPD43 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD43 UPD43 UPD43 UPD43 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 INS74 MOV43 INS43 INS42 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL43 DEL62 DEL6