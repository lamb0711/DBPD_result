Fixing contents of partially written files

I added some tests of partially written files. The tests write to an
output stream but don't close it, which mimics a partially written file
because of the way the code works - it doesn't save the changes to the
File object until OutputStream is closed.

I found that the metadata was inconsistent with the file contents for
partially written files. I fixed that by deleting any chunks past the
reported length of the file.

+  private long length;
+  private int chunks;
+    this.length = file.length;
+    this.chunks = file.chunks;
-    file.length++;
+    length++;
-    // TODO - What is the state of the system if 
-    // things crash without close?
-    // Seems like a file metadata will be out of sync
-    
-      file.length += min;
+      length += min;
+      file.length = length;
+      file.chunks = chunks;
-    file.getFileSystem().putChunk(file, file.chunks++, chunk);
+    file.getFileSystem().putChunk(file, chunks++, chunk);

INS23 INS23 INS83 INS39 INS59 INS83 INS39 INS59 INS42 INS42 INS21 INS21 INS7 INS7 INS22 INS40 INS22 INS40 INS42 INS21 INS21 INS52 INS42 INS52 INS42 INS7 INS7 INS42 INS42 INS40 INS42 INS40 INS42 DEL40 DEL40 DEL40