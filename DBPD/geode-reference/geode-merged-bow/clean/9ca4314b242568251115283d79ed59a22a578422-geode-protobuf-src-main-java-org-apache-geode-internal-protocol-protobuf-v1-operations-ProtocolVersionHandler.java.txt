GEODE-4084 rename handshake.proto (#1155)

renamed to protocolVersion
-import org.apache.geode.internal.protocol.protobuf.Handshake;
+import org.apache.geode.internal.protocol.protobuf.ProtocolVersion;
-public class HandshakeHandler {
+public class ProtocolVersionHandler {
-  public static boolean handleHandshake(InputStream inputStream, OutputStream outputStream,
+  public static boolean handleVersionMessage(InputStream inputStream, OutputStream outputStream,
-    Handshake.NewConnectionHandshake handshakeRequest =
-        Handshake.NewConnectionHandshake.parseDelimitedFrom(inputStream);
+    ProtocolVersion.NewConnectionClientVersion versionMessage =
+        ProtocolVersion.NewConnectionClientVersion.parseDelimitedFrom(inputStream);
-    statistics.messageReceived(handshakeRequest.getSerializedSize());
+    statistics.messageReceived(versionMessage.getSerializedSize());
-    final boolean handshakeSucceeded =
-        validator.isValid(handshakeRequest.getMajorVersion(), handshakeRequest.getMinorVersion());
+    final boolean versionAccepted =
+        validator.isValid(versionMessage.getMajorVersion(), versionMessage.getMinorVersion());
-    Handshake.HandshakeAcknowledgement handshakeResponse = Handshake.HandshakeAcknowledgement
-        .newBuilder().setServerMajorVersion(Handshake.MajorVersions.CURRENT_MAJOR_VERSION_VALUE)
-        .setServerMinorVersion(Handshake.MinorVersions.CURRENT_MINOR_VERSION_VALUE)
-        .setHandshakePassed(handshakeSucceeded).build();
+    ProtocolVersion.VersionAcknowledgement handshakeResponse =
+        ProtocolVersion.VersionAcknowledgement.newBuilder()
+            .setServerMajorVersion(ProtocolVersion.MajorVersions.CURRENT_MAJOR_VERSION_VALUE)
+            .setServerMinorVersion(ProtocolVersion.MinorVersions.CURRENT_MINOR_VERSION_VALUE)
+            .setVersionAccepted(versionAccepted).build();
-    if (!handshakeSucceeded) {
+    if (!versionAccepted) {
-    return handshakeSucceeded;
+    return versionAccepted;

UPD40 UPD42 UPD42 UPD43 UPD43 UPD42 UPD40 UPD42 UPD42 UPD40 UPD42 UPD40 UPD42 UPD42 UPD42 UPD42 UPD42 UPD40 UPD40 UPD40