GEODE-2632: use immutable SecurityService impls to improve performance

* misc code clean up in classes touched by changes
* new unit tests for SecurityService

-/**
- * 
- */
-import org.apache.geode.internal.cache.tier.Command;
-import org.apache.geode.internal.cache.tier.sockets.*;
+import org.apache.geode.internal.cache.tier.Command;
+import org.apache.geode.internal.cache.tier.sockets.BaseCommand;
+import org.apache.geode.internal.cache.tier.sockets.CacheServerStats;
+import org.apache.geode.internal.cache.tier.sockets.Message;
+import org.apache.geode.internal.cache.tier.sockets.ServerConnection;
+import org.apache.geode.internal.security.SecurityService;
-
-  private final static UpdateClientNotification singleton = new UpdateClientNotification();
+  private static final UpdateClientNotification singleton = new UpdateClientNotification();
-  private UpdateClientNotification() {}
+  private UpdateClientNotification() {
+    // nothing
+  }
-  public void cmdExecute(Message clientMessage, ServerConnection serverConnection, long start)
-      throws IOException {
-    CacheServerStats stats = serverConnection.getCacheServerStats();
-    {
-      long oldStart = start;
-      start = DistributionStats.getStatTime();
-      stats.incReadUpdateClientNotificationRequestTime(start - oldStart);
-    }
-    try {
-      // this is no longer needed the client membership id is now used
-      // // Retrieve the data from the message parts
-      // Part clientPortPart = msg.getPart(0);
-      // int clientPort = clientPortPart.getInt();
-      // if (logger.fineEnabled()) {
-      // logger.fine(servConn.getName()
-      // + ": Received client notification update request ("
-      // + msg.getPayloadLength() + " bytes) for " + clientPort + " from "
-      // + servConn.getSocketHost() + ":" + servConn.getSocketPort());
-      // }
-      // // Update the client socket and remote ports
-      // servConn.getAcceptor().getCacheClientNotifier().registerClientPort(
-      // servConn.getSocketHost(), clientPort, servConn.getSocketPort(),
-      // servConn.getProxyID());
+  public void cmdExecute(final Message clientMessage, final ServerConnection serverConnection,
+      final SecurityService securityService, long start) throws IOException {
-      // if (logger.fineEnabled()) {
-      // logger.fine(servConn.getName()
-      // + ": Processed client notification update request for "
-      // + clientPort + " from " + servConn.getSocketHost() + ":"
-      // + servConn.getSocketPort());
-      // }
-    } finally {
-      long oldStart = start;
-      start = DistributionStats.getStatTime();
-      stats.incProcessUpdateClientNotificationTime(start - oldStart);
-    }
+    CacheServerStats stats = serverConnection.getCacheServerStats();
+
+    long oldStart = start;
+    start = DistributionStats.getStatTime();
+    stats.incReadUpdateClientNotificationRequestTime(start - oldStart);
+
+    oldStart = start;
+    start = DistributionStats.getStatTime();
+    stats.incProcessUpdateClientNotificationTime(start - oldStart);

MOV26 INS26 INS26 INS26 INS26 INS40 INS40 UPD40 INS40 INS40 INS83 INS44 MOV8 INS83 INS83 INS83 INS43 INS42 MOV60 MOV21 INS21 MOV21 INS42 INS7 INS42 INS42 DEL29 DEL83 DEL39 DEL42 DEL42 DEL59 DEL60 DEL8 DEL8 DEL54 DEL8