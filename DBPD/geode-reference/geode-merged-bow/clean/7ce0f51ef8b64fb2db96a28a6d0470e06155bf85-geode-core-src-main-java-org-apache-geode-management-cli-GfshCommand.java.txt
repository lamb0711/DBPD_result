GEODE-6777: Create gateway senders command should only return when DistributedSystemMXBean reflects creation status (#3643)


+import java.util.concurrent.TimeUnit;
+import java.util.function.Supplier;
+
+  /**
+   * Very basic polling functionality that executes a function until it returns true or the timeout
+   * is reached. The polling call is performed on the calling thread. Do not use it with a
+   * function that may have an unbounded runtime. The timeout is very coarse and will not account
+   * for the function overrunning the given time.
+   *
+   * @param function a {@link Supplier Supplier&lt;Boolean&gt;} function that will poll for the
+   *        condition
+   * @return true if the function returns true within the timeout period; false otherwise
+   */
+  public boolean poll(long timeout, TimeUnit unit, Supplier<Boolean> function) {
+    long startWaitTime = System.currentTimeMillis();
+    long waitTime = unit.toMillis(timeout);
+
+    do {
+      try {
+        if (function.get()) {
+          return true;
+        }
+
+        Thread.sleep(100);
+      } catch (InterruptedException e) {
+        Thread.currentThread().interrupt();
+        return false;
+      }
+    } while (System.currentTimeMillis() - startWaitTime < waitTime);
+
+    return false;
+
+  }

INS26 INS26 INS40 INS40 INS31 INS29 INS83 INS39 INS42 INS44 INS44 INS44 INS8 INS65 INS65 INS65 INS39 INS42 INS43 INS42 INS74 INS42 INS60 INS60 INS19 INS41 INS66 INS66 INS66 INS66 INS42 INS66 INS65 INS66 INS66 INS66 INS42 INS43 INS43 INS39 INS59 INS39 INS59 INS8 INS27 INS9 INS42 INS66 INS42 INS42 INS42 INS32 INS42 INS32 INS54 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS8 INS12 INS32 INS42 INS25 INS21 INS44 INS8 INS42 INS42 INS32 INS8 INS32 INS43 INS42 INS21 INS41 INS42 INS42 INS41 INS42 INS42 INS34 INS42 INS32 INS9 INS9 INS32 INS42 INS42 INS42