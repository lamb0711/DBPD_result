GEODE-17: when connecting to a secure manager, prompt for username and password

* refactor the connect command for better readability and retry handling
* throw AuthenticationFailedException for consistency

+
-import java.io.BufferedReader;
-import java.io.InputStreamReader;
-import java.net.URI;
-import java.util.Properties;
+import com.gemstone.gemfire.management.internal.cli.shell.Gfsh;
+import com.gemstone.gemfire.security.AuthenticationFailedException;
+import com.gemstone.gemfire.security.NotAuthorizedException;
+
-import org.springframework.http.client.ClientHttpRequest;
-import org.springframework.web.client.RequestCallback;
-import org.springframework.web.client.RestClientException;
-import com.gemstone.gemfire.internal.lang.StringUtils;
-import com.gemstone.gemfire.internal.util.IOUtils;
-import com.gemstone.gemfire.management.internal.cli.shell.Gfsh;
-import com.gemstone.gemfire.management.internal.security.ResourceConstants;
-
-  private Map<String,String> securityProperties;
+  private Map<String, String> securityProperties;
+
-  public SimpleHttpRequester(Gfsh gfsh,Map<String,String> securityProperties) {
+  public SimpleHttpRequester(Gfsh gfsh, Map<String, String> securityProperties) {
-  public SimpleHttpRequester(final Gfsh gfsh, final int connectTimeout, Map<String,String> securityProperties) {
+  public SimpleHttpRequester(final Gfsh gfsh, final int connectTimeout, Map<String, String> securityProperties) {
-        case BAD_REQUEST: // 400 *
-        case UNAUTHORIZED: // 401
-        case FORBIDDEN: // 403
-        case NOT_FOUND: // 404 *
-        case METHOD_NOT_ALLOWED: // 405 *
-        case NOT_ACCEPTABLE: // 406 *
-        case REQUEST_TIMEOUT: // 408
-        case CONFLICT: // 409
-        case REQUEST_ENTITY_TOO_LARGE: // 413
-        case REQUEST_URI_TOO_LONG: // 414
-        case UNSUPPORTED_MEDIA_TYPE: // 415 *
-        case TOO_MANY_REQUESTS: // 429
-        case INTERNAL_SERVER_ERROR: // 500 *
-        case NOT_IMPLEMENTED: // 501
-        case BAD_GATEWAY: // 502 ?
-        case SERVICE_UNAVAILABLE: // 503
-          return true;
-        default:
-          return false;
+          case BAD_REQUEST: // 400 *
+          case UNAUTHORIZED: // 401
+          case FORBIDDEN: // 403
+          case NOT_FOUND: // 404 *
+          case METHOD_NOT_ALLOWED: // 405 *
+          case NOT_ACCEPTABLE: // 406 *
+          case REQUEST_TIMEOUT: // 408
+          case CONFLICT: // 409
+          case REQUEST_ENTITY_TOO_LARGE: // 413
+          case REQUEST_URI_TOO_LONG: // 414
+          case UNSUPPORTED_MEDIA_TYPE: // 415 *
+          case TOO_MANY_REQUESTS: // 429
+          case INTERNAL_SERVER_ERROR: // 500 *
+          case NOT_IMPLEMENTED: // 501
+          case BAD_GATEWAY: // 502 ?
+          case SERVICE_UNAVAILABLE: // 503
+            return true;
+          default:
+            return false;
-            response.getStatusText());
+          response.getStatusText());
-        throw new RuntimeException(message);
+        if (response.getRawStatusCode() == 401) {
+          throw new AuthenticationFailedException(message);
+        }
+        else if (response.getRawStatusCode() == 403) {
+          throw new NotAuthorizedException(message);
+        }
+        else {
+          throw new RuntimeException(message);
+        }
-   *
-   * @param url
-   *          a String value identifying or locating the resource intended for
-   *          the HTTP operation.
-   * @param urlVariables
-   *          an array of variables to substitute in the URI/URL template.
+   * @param url a String value identifying or locating the resource intended for
+   * the HTTP operation.
+   * @param urlVariables an array of variables to substitute in the URI/URL template.
-   *      Class, Object...)
+   * Class, Object...)
-    if(this.securityProperties != null){
+    if (this.securityProperties != null) {

MOV26 MOV26 MOV26 UPD40 UPD40 UPD66 UPD66 INS25 INS27 INS8 INS25 INS32 INS34 INS53 INS27 INS8 INS8 INS42 INS42 INS14 INS32 INS34 INS53 MOV53 INS43 INS42 INS42 INS42 INS14 INS42 INS43 INS42 INS42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26