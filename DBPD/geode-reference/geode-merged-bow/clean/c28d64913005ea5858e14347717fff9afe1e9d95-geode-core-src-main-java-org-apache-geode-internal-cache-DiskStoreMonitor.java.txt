Merge branch 'release/1.4.0'

-   * 
+   *
-   * 
+   *
-      long min = getMinimumSpace();
+      long minMegabytes = getMinimumSpace();
+      final long minBytes = minMegabytes * 1024 * 1024;
-            min);
+            minMegabytes);
-      boolean belowMin = remaining < 1024 * 1024 * min;
+      boolean belowMin = remaining < minBytes;
-      handleStateChange(next, pct);
+      String criticalMessage = null;
+      if (next == DiskState.CRITICAL) {
+        if (belowMin) {
+          criticalMessage = "the file system only has " + remaining
+              + " bytes free which is below the minimum of " + minBytes + ".";
+        } else {
+          criticalMessage = "the file system is " + pct
+              + " full, which exceeds the critical threshold of " + critical + "%.";
+        }
+      }
+      handleStateChange(next, pct, criticalMessage);
-    protected abstract void handleStateChange(DiskState next, String pct);
+    protected abstract void handleStateChange(DiskState next, String pct, String criticalMessage);
-    protected void handleStateChange(DiskState next, String pct) {
+    protected void handleStateChange(DiskState next, String pct, String critcalMessage) {
-    protected void handleStateChange(DiskState next, String pct) {
+    protected void handleStateChange(DiskState next, String pct, String criticalMessage) {
-      String msg = "Critical disk usage threshold exceeded for volume "
-          + dir.getDir().getAbsolutePath() + ": " + pct + " full";
-
-          // TODO: this is weird...
+          String msg = "Critical disk usage threshold exceeded for volume "
+              + dir.getDir().getAbsolutePath() + ": " + criticalMessage;

INS44 INS44 INS44 INS60 INS60 INS25 INS43 INS42 INS43 INS42 INS43 INS42 INS83 INS39 INS59 INS43 INS59 INS27 INS8 INS42 INS42 INS42 MOV60 UPD42 INS42 INS27 INS42 INS42 INS33 INS42 INS40 INS25 INS42 INS42 INS34 INS34 UPD42 MOV42 INS42 INS8 INS8 UPD42 INS21 INS21 UPD42 INS7 INS7 INS42 INS27 INS42 INS27 INS45 INS42 INS45 INS42 INS45 INS45 INS42 INS45 INS42 INS45 DEL34 DEL34 DEL27 DEL45