GEODE-420: add multi-key keystores

+import java.rmi.Remote;
-
-import com.gemstone.gemfire.distributed.internal.InternalDistributedSystem;
-  private JMXConnectorServer cs;
+  private JMXConnectorServer jmxConnectorServer;
-      cs.stop();
+      jmxConnectorServer.stop();
-    } catch (IOException e) {
+    } catch (Exception e) {
-      }
-      else if (isIntegratedSecurity()){
+      } else if (isIntegratedSecurity()) {
-    final boolean ssl = this.config.getJmxManagerSSLEnabled();
+    final SocketCreator socketCreator = SocketCreatorFactory.getJMXManagerSSLSocketCreator();
+
+    final boolean ssl = socketCreator.useSSL();
-
-    final SocketCreator sc = SocketCreatorFactory.getJMXManagerSSLSocketCreator();
-    RMIClientSocketFactory csf = ssl ? new SslRMIClientSocketFactory() : null;// RMISocketFactory.getDefaultSocketFactory();
+    RMIClientSocketFactory rmiClientSocketFactory = ssl ? new SslRMIClientSocketFactory() : null;// RMISocketFactory.getDefaultSocketFactory();
-    RMIServerSocketFactory ssf = new GemFireRMIServerSocketFactory(sc, bindAddr);
+    RMIServerSocketFactory rmiServerSocketFactory = new GemFireRMIServerSocketFactory(socketCreator, bindAddr);
-    registry = LocateRegistry.createRegistry(port, csf, ssf);
+    registry = LocateRegistry.createRegistry(port, rmiClientSocketFactory, rmiServerSocketFactory);
-    final RMIServerImpl stub = new RMIJRMPServerImpl(port, csf, ssf, env);
+    final RMIServerImpl stub = new RMIJRMPServerImpl(port, rmiClientSocketFactory, rmiServerSocketFactory, env);
-    cs = new RMIConnectorServer(new JMXServiceURL("rmi", hostname, port), env, stub, mbs) {
+    jmxConnectorServer = new RMIConnectorServer(new JMXServiceURL("rmi", hostname, port), env, stub, mbs) {
-    if (! StringUtils.isBlank(shiroConfig) || isIntegratedSecurity()) {
+    if (!StringUtils.isBlank(shiroConfig) || isIntegratedSecurity()) {
-      cs.addNotificationListener(shiroAuthenticator, null, cs.getAttributes());
+      jmxConnectorServer.addNotificationListener(shiroAuthenticator, null, jmxConnectorServer.getAttributes());
-      cs.setMBeanServerForwarder(mBeanServerWrapper);
+      jmxConnectorServer.setMBeanServerForwarder(mBeanServerWrapper);
-    cs.start();
+    jmxConnectorServer.start();

MOV26 UPD40 MOV60 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 DEL52 DEL42 DEL22