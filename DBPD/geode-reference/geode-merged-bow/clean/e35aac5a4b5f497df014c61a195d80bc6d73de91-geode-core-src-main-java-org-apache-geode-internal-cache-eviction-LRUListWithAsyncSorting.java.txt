Merge branch 'release/1.5.0'

-  private static final int MAX_EVICTION_ATTEMPTS = 10;
+  private static final int DEFAULT_MAX_EVICTION_ATTEMPTS = 10;
+  private final int maxEvictionAttempts;
-  LRUListWithAsyncSorting(InternalEvictionStatistics stats, BucketRegion region) {
-    this(stats, region, SINGLETON_EXECUTOR);
-    logger.info("Using experimental LRUListWithAsyncSorting");
+  LRUListWithAsyncSorting(EvictionController controller) {
+    this(controller, SINGLETON_EXECUTOR, DEFAULT_MAX_EVICTION_ATTEMPTS);
-  LRUListWithAsyncSorting(InternalEvictionStatistics stats, BucketRegion region,
-      ExecutorService executor) {
-    super(stats, region);
+  LRUListWithAsyncSorting(EvictionController controller, ExecutorService executor,
+      int maxEvictionAttempts) {
+    super(controller);
+    this.maxEvictionAttempts = maxEvictionAttempts;
-  public void clear(RegionVersionVector regionVersionVector) {
-    super.clear(regionVersionVector);
+  public void clear(RegionVersionVector regionVersionVector, BucketRegion bucketRegion) {
+    super.clear(regionVersionVector, bucketRegion);
-      if (evictionNode.isRecentlyUsed() && evictionAttempts < MAX_EVICTION_ATTEMPTS) {
+      if (evictionNode.isRecentlyUsed() && evictionAttempts < maxEvictionAttempts) {
-        stats.incGreedyReturns(1);
+        getStatistics().incGreedyReturns(1);
-    return size() > 0 && (double) recentlyUsedCount / size() >= this.scanThreshold;
+    return size() >= maxEvictionAttempts
+        && (double) recentlyUsedCount / size() >= this.scanThreshold;

INS23 INS83 INS83 INS39 INS59 INS44 MOV44 UPD42 INS42 UPD43 UPD42 UPD43 UPD42 INS39 INS42 INS46 INS21 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 INS42 INS7 INS22 INS42 INS42 UPD27 INS52 INS42 INS42 UPD42 INS32 UPD42 MOV42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL46 DEL34