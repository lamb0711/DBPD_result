GEODE-5464: Generify DistributionManager and related classes (#2174)

GEODE-5464: Generify DistributionManager and related classes

* Augment various collections to use generics
* Inline some iterator loops that were trivially "foreach" loops
* remove unused code
* Inline some redundant local variables
* make some methods more private
* change some tests to use `InternalDistributedMember` instead of
  `DistributedMember`.
* Make ThrottlingMemLinkedQueueWithDMStats generic and use atomic.
  - The previous synchronization looked quite wrong.
-  public static final long NOT_GRANTOR_SLEEP = Long
+  private static final long NOT_GRANTOR_SLEEP = Long
-  public static final boolean DEBUG_NONGRANTOR_DESTROY_LOOP = Boolean
+  private static final boolean DEBUG_NONGRANTOR_DESTROY_LOOP = Boolean
-  public static final int DEBUG_NONGRANTOR_DESTROY_LOOP_COUNT = Integer
+  private static final int DEBUG_NONGRANTOR_DESTROY_LOOP_COUNT = Integer
-  public static final boolean AUTOMATE_FREE_RESOURCES =
+  private static final boolean AUTOMATE_FREE_RESOURCES =
-  public static final int INVALID_LEASE_ID = -1;
+  static final int INVALID_LEASE_ID = -1;
-  public DLockGrantor getGrantorForElderRecovery() {
-    return getGrantor();
-  }
-
-  void becomeLockGrantor(InternalDistributedMember predecessor) {
+  private void becomeLockGrantor(InternalDistributedMember predecessor) {
-          continue;
-      svc = (DLockService) services.get(serviceName);
+      svc = services.get(serviceName);
-    Collection svcs = Collections.EMPTY_SET;
+    Collection<DLockService> svcs;
-      svcs = new HashSet(services.values());
+      svcs = new HashSet<>(services.values());
-    for (Iterator iter = svcs.iterator(); iter.hasNext();) {
-      DLockService svc = (DLockService) iter.next();
+    for (DLockService svc : svcs) {
-  public static final SuspendLockingToken SUSPEND_LOCKING_TOKEN = new SuspendLockingToken();
+  static final SuspendLockingToken SUSPEND_LOCKING_TOKEN = new SuspendLockingToken();
-  /** Map of all locking services. Key:ServiceName, Value:DLockService */
-  protected static final Map<String, DLockService> services = new HashMap<String, DLockService>();
+  /** Map of all locking services. */
+  protected static final Map<String, DLockService> services = new HashMap<>();
-  protected static final Object creationLock = new Object();
+  private static final Object creationLock = new Object();
-  static ThreadGroup threadGroup;
+  private static ThreadGroup threadGroup;
-  static final String[] reservedNames = new String[] {LTLS, DTLS};
+  private static final String[] reservedNames = new String[] {LTLS, DTLS};
-    DLockService svc = null;
-      svc = (DLockService) services.get(serviceName);
-      return svc;
+      return services.get(serviceName);
-    DLockService svc = null;
-    synchronized (services) {
-      svc = (DLockService) services.get(serviceName);
-    }
+    DLockService svc = getInternalServiceNamed(serviceName);
-      svc = (DLockService) services.get(serviceName);
+      svc = services.get(serviceName);
-    return (DLockService) services.get(serviceName);
+    synchronized (services) {
+      return services.get(serviceName);
+    }
-    for (int i = 0; i < reservedNames.length; i++) {
-      if (serviceName.startsWith(reservedNames[i])) {
+    for (String reservedName : reservedNames) {
+      if (serviceName.startsWith(reservedName)) {
-    Map snapshot = null;
-      snapshot = new HashMap(services);
+      return new HashMap<>(services);
-    return snapshot;
-      Iterator entries = services.entrySet().iterator();
-      while (entries.hasNext()) {
-        Map.Entry entry = (Map.Entry) entries.next();
+      for (Map.Entry entry : services.entrySet()) {
-      DLockService removedService = (DLockService) services.remove(service.getName());
+      DLockService removedService = services.remove(service.getName());

UPD83 UPD83 UPD83 UPD83 INS83 UPD83 INS83 INS83 INS8 INS70 MOV51 INS51 INS70 INS74 INS44 INS42 MOV8 UPD66 UPD74 MOV43 INS42 MOV8 INS44 INS42 MOV8 MOV43 MOV43 MOV43 INS42 INS32 MOV43 INS42 INS41 INS70 MOV32 INS42 INS42 MOV32 MOV14 INS44 MOV32 MOV8 MOV43 MOV32 MOV32 INS42 INS74 MOV43 INS42 MOV32 INS74 MOV43 MOV43 DEL83 DEL83 DEL42 DEL43 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL18 DEL42 DEL43 DEL11 DEL40 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL24 DEL83 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL42 DEL42 DEL43 DEL11 DEL7 DEL21 DEL42 DEL42 DEL43 DEL33 DEL11 DEL42 DEL42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL11 DEL7 DEL21 DEL8 DEL51 DEL42 DEL43 DEL11 DEL42 DEL42 DEL2 DEL39 DEL42 DEL34 DEL59 DEL58 DEL42 DEL40 DEL27 DEL42 DEL37 DEL24 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL42 DEL7 DEL21 DEL42 DEL41 DEL42 DEL40 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL43 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL32 DEL61 DEL42 DEL43 DEL11