GEODE-7326: Add cache gets timers (#4223)

- Add timers to record get operations from a Java client
- Tag each timer with region name and result (hit/miss)
- Close existing entries gauge when closing RegionPerfStats
- Improve micrometer assertj assertions
- Make public fields immutable on Get70.Entry

Co-authored-by: Aaron Lindsey <alindsey@pivotal.io>
Co-authored-by: Kirk Lund <klund@apache.org>
Co-authored-by: Dale Emery <demery@pivotal.io>
+import org.apache.geode.internal.cache.CachePerfStats;
+import org.apache.geode.internal.cache.InternalRegion;
-      String reason = String.format("%s was not found during get request",
-          regionName);
+      String reason = String.format("%s was not found during get request", regionName);
-
+    CachePerfStats regionPerfStats = ((InternalRegion) region).getRegionPerfStats();
+    if (regionPerfStats != null) {
+      regionPerfStats.endGetForClient(startparam, entry.keyNotPresent);
+    }
-    Entry result = new Entry();
-    result.value = data;
-    result.isObject = isObject;
-    result.keyNotPresent = !wasInvalid && (data == null || data == Token.TOMBSTONE);
-    result.versionTag = versionTag;
-    return result;
+    boolean keyNotPresent = !wasInvalid && (data == null || data == Token.TOMBSTONE);
+    return new Entry(data, isObject, keyNotPresent, versionTag);
-    Entry result = new Entry();
-    result.value = data;
-    result.isObject = isObject;
-    result.keyNotPresent = !wasInvalid && (data == null || data == Token.TOMBSTONE);
-    result.versionTag = versionTag;
-    return result;
+    boolean keyNotPresent = !wasInvalid && (data == null || data == Token.TOMBSTONE);
+    return new Entry(data, isObject, keyNotPresent, versionTag);
-    public Object value;
-    public boolean isObject;
-    public boolean keyNotPresent;
-    public VersionTag versionTag;
+    public final Object value;
+    public final boolean isObject;
+    public final boolean keyNotPresent;
+    public final VersionTag versionTag;
+
+    public Entry(Object value, boolean isObject, boolean keyNotPresent, VersionTag versionTag) {
+      this.value = value;
+      this.isObject = isObject;
+      this.keyNotPresent = keyNotPresent;
+      this.versionTag = versionTag;
+    }

INS26 INS26 INS40 INS40 INS31 INS60 INS25 INS83 INS83 INS83 INS83 INS83 INS42 INS44 INS44 INS44 INS44 INS8 INS43 INS59 INS27 INS8 INS39 MOV14 INS39 MOV14 INS43 INS42 INS39 INS42 INS39 INS42 INS43 INS42 INS21 INS21 INS21 INS21 INS42 INS42 INS32 INS42 INS33 INS21 UPD42 MOV27 INS42 INS42 INS42 INS42 UPD42 MOV27 INS42 INS42 INS42 INS42 INS42 INS42 INS7 INS7 INS7 INS7 INS36 INS42 INS32 INS22 INS42 INS22 INS42 INS22 INS42 INS22 INS42 INS11 INS42 INS42 INS42 INS40 INS52 INS42 INS52 INS42 INS52 INS42 INS52 INS42 INS43 INS42 INS42 DEL42 DEL43 DEL40 DEL42 DEL7 DEL21 DEL40 DEL42 DEL7 DEL21 DEL40 DEL7 DEL21 DEL40 DEL42 DEL7 DEL21 DEL42 DEL42 DEL43 DEL40 DEL42 DEL7 DEL21 DEL40 DEL42 DEL7 DEL21 DEL40 DEL7 DEL21 DEL40 DEL42 DEL7 DEL21 DEL42