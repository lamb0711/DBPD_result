GEODE-6802: Execute region synchronization on newly joined member. (#3623)

 * Region sync will be invoked to avoid data inconsistency on a newly joined/restarted member
   if it received a region synchronization request from other members due to timed task.
 * Use a flag in RegionVersionHolder to ensure only one such call is executed.
 * Make sure RVV exception is filled for persistent member requesting region sync. (This may
   leads to CommitConflictException on some transactions on persistent regions due to this
   region sync operation. But it should be rare and is acceptable compared to data inconsistency
   issue.)

-      holder = new RegionVersionHolder<T>(-1);
+      if (mbr.isDiskStoreId() && mbr.equals(myId)) {
+        // For region recovered from disk, we may have local exceptions needs to be
+        // brought back during region synchronization
+        holder = localExceptions.clone();
+        holder.setVersion(localVersion.get());
+      } else {
+        holder = new RegionVersionHolder<T>(-1);
+      }
-    if (id.equals(this.myId)) {
-      if (isForSynchronization()) {
-        // a sync vector only has one holder & no valid version for the vector's owner
+    RegionVersionHolder<T> holder = this.memberToVersion.get(id);
+    // For region synchronization.
+    if (isForSynchronization()) {
+      if (holder == null) {
+        // we only care about missing changes from a particular member, and this
+        // vector is known to contain that member's version holder
+      if (id.equals(this.myId)) {
+        if (!myId.isDiskStoreId()) {
+          // a sync vector only has one holder if not recovered from persistence,
+          // no valid version for the vector's owner
+          return true;
+        }
+      }
+      return holder.contains(version);
+    }
+
+    // Regular GII
+    if (id.equals(this.myId)) {
-    RegionVersionHolder<T> holder = this.memberToVersion.get(id);
-      if (this.singleMember) {
-        // we only care about missing changes from a particular member, and this
-        // vector is known to contain that member's version holder
-        return true;
-      } else {
-        return false;
-      }
+      return false;
-      if (id instanceof InternalDistributedMember) {
+      if (!id.isDiskStoreId()) {
-    if (versionMember instanceof DiskStoreID) {
+    if (versionMember.isDiskStoreId()) {

MOV25 INS25 INS8 MOV32 INS8 MOV8 INS32 INS25 INS25 INS25 INS41 INS42 INS42 INS27 INS8 MOV8 INS27 MOV8 INS32 INS8 INS32 INS32 INS32 INS21 INS21 INS42 INS33 INS42 INS42 INS22 MOV25 INS42 INS42 INS42 INS38 INS42 INS42 INS42 INS42 INS42 INS7 INS32 INS52 INS42 INS38 INS32 INS42 INS32 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL52 DEL42 DEL22 DEL25 DEL8 DEL42 DEL42 DEL43 DEL62 DEL42 DEL42 DEL43 DEL62