GEODE-3727: FlatFormatSerializer should support collection

This closes #933

- * contact.name, contact.homepage.title.
+ * contacts.name, contacts.homepage.title.
- * .addField("name").addField("contact.name").addField("contact.email", new KeywordAnalyzer())
- * .addField("contact.address").addField("contact.homepage.content") .create(INDEX_NAME,
+ * .addField("name").addField("contacts.name").addField("contacts.email", new KeywordAnalyzer())
+ * .addField("contacts.address").addField("contacts.homepage.content") .create(INDEX_NAME,
- * When querying, use the same dot-separated index field name, such as contact.homepage.content
+ * When querying, use the same dot-separated index field name, such as contacts.homepage.content
- * "contact.homepage.content:Hello*", "name"); results = query.findPages();
+ * "contacts.homepage.content:Hello*", "name");
+ * 
+ * results = query.findPages();
-   * name will be in the same format as its indexed, such as contact.homepage.content
+   * name will be in the same format as its indexed, such as contacts.homepage.content
+    if (fieldValue.getClass().isArray()) {
+      Object[] array = (Object[]) fieldValue;
+      for (Object item : array) {
+        addFieldValueForNonCollectionObject(doc, indexedFieldName, item, tokenizedFields);
+      }
+    } else if (fieldValue instanceof Collection) {
+      Collection collection = (Collection) fieldValue;
+      for (Object item : collection) {
+        addFieldValueForNonCollectionObject(doc, indexedFieldName, item, tokenizedFields);
+      }
+    } else {
+      addFieldValueForNonCollectionObject(doc, indexedFieldName, fieldValue, tokenizedFields);
+    }
+  }
+
+  private void addFieldValueForNonCollectionObject(Document doc, String indexedFieldName,
+      Object fieldValue, List<String> tokenizedFields) {

INS31 INS83 INS39 INS42 INS44 INS44 MOV44 INS44 INS8 INS42 INS44 UPD66 UPD66 UPD66 UPD66 UPD66 INS66 INS43 INS42 INS43 INS42 INS74 INS42 MOV60 MOV60 MOV25 INS25 INS43 INS42 UPD66 INS42 INS42 INS43 INS43 INS32 INS8 INS25 INS42 INS42 INS42 INS32 INS42 INS60 INS70 INS62 INS8 INS8 INS42 INS42 INS5 INS59 INS44 INS42 INS8 INS42 INS43 INS60 INS70 INS21 INS43 INS85 INS42 INS11 INS43 INS42 INS21 INS42 INS43 INS59 INS44 INS42 INS8 INS32 INS42 INS5 INS42 INS42 INS32 INS42 INS42 INS11 INS43 INS42 INS21 INS42 INS42 INS42 INS42 INS42 INS43 INS85 INS42 INS42 INS42 INS42 INS42 INS43 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL42