Merge branch 'release/1.5.0'

-import org.apache.geode.cache.*;
-import org.apache.geode.cache.query.*;
+import org.apache.geode.cache.InterestResultPolicy;
+import org.apache.geode.cache.Region;
+import org.apache.geode.cache.query.CqAttributes;
+import org.apache.geode.cache.query.QueryService;
-  public static final int DEFAULT_SOCKET_CONNECT_TIMEOUT = 59000;
+  int DEFAULT_SOCKET_CONNECT_TIMEOUT = 59000;
-  public static final int DEFAULT_FREE_CONNECTION_TIMEOUT = 10000;
+  int DEFAULT_FREE_CONNECTION_TIMEOUT = 10000;
-  public static final int DEFAULT_LOAD_CONDITIONING_INTERVAL = 1000 * 60 * 5;
+  int DEFAULT_LOAD_CONDITIONING_INTERVAL = 1000 * 60 * 5;
-  public static final int DEFAULT_SOCKET_BUFFER_SIZE = 32768;
+  int DEFAULT_SOCKET_BUFFER_SIZE = 32768;
-  public static final int DEFAULT_READ_TIMEOUT = 10000;
+  int DEFAULT_READ_TIMEOUT = 10000;
-  public static final int DEFAULT_MIN_CONNECTIONS = 1;
+  int DEFAULT_MIN_CONNECTIONS = 1;
-  public static final int DEFAULT_MAX_CONNECTIONS = -1;
+  int DEFAULT_MAX_CONNECTIONS = -1;
-  public static final long DEFAULT_IDLE_TIMEOUT = 5000;
+  long DEFAULT_IDLE_TIMEOUT = 5000;
-  public static final int DEFAULT_RETRY_ATTEMPTS = -1;
+  int DEFAULT_RETRY_ATTEMPTS = -1;
-  public static final long DEFAULT_PING_INTERVAL = 10000;
+  long DEFAULT_PING_INTERVAL = 10000;
-  public static final int DEFAULT_STATISTIC_INTERVAL = -1;
+  int DEFAULT_STATISTIC_INTERVAL = -1;
-  public static final boolean DEFAULT_THREAD_LOCAL_CONNECTIONS = false;
+  boolean DEFAULT_THREAD_LOCAL_CONNECTIONS = false;
-  public static final boolean DEFAULT_SUBSCRIPTION_ENABLED = false;
+  boolean DEFAULT_SUBSCRIPTION_ENABLED = false;
-  public static final int DEFAULT_SUBSCRIPTION_REDUNDANCY = 0;
+  int DEFAULT_SUBSCRIPTION_REDUNDANCY = 0;
-  public static final int DEFAULT_SUBSCRIPTION_MESSAGE_TRACKING_TIMEOUT = 900000;
+  int DEFAULT_SUBSCRIPTION_MESSAGE_TRACKING_TIMEOUT = 900000;
-  public static final int DEFAULT_SUBSCRIPTION_ACK_INTERVAL = 100;
+  int DEFAULT_SUBSCRIPTION_ACK_INTERVAL = 100;
+
+  /**
+   * The default number of server "ping" intervals that can elapse with no activity before a
+   * subscription connection is deemed dead and failover is initiated.
+   * <p>
+   * Current value: 0
+   */
+  public static final int DEFAULT_SUBSCRIPTION_TIMEOUT_MULTIPLIER = 0;
-  public static final String DEFAULT_SERVER_GROUP = "";
+  String DEFAULT_SERVER_GROUP = "";
-  public static final boolean DEFAULT_PR_SINGLE_HOP_ENABLED = true;
+  boolean DEFAULT_PR_SINGLE_HOP_ENABLED = true;
-  public static final boolean DEFAULT_MULTIUSER_AUTHENTICATION = false;
+  boolean DEFAULT_MULTIUSER_AUTHENTICATION = false;
-  public PoolFactory setSocketConnectTimeout(int socketConnectTimeout);
+  PoolFactory setSocketConnectTimeout(int socketConnectTimeout);
-  public PoolFactory setFreeConnectionTimeout(int connectionTimeout);
+  PoolFactory setFreeConnectionTimeout(int connectionTimeout);
-  public PoolFactory setLoadConditioningInterval(int loadConditioningInterval);
+  PoolFactory setLoadConditioningInterval(int loadConditioningInterval);
-  public PoolFactory setSocketBufferSize(int bufferSize);
+  PoolFactory setSocketBufferSize(int bufferSize);
-  public PoolFactory setThreadLocalConnections(boolean threadLocalConnections);
+  PoolFactory setThreadLocalConnections(boolean threadLocalConnections);
-  public PoolFactory setReadTimeout(int timeout);
+  PoolFactory setReadTimeout(int timeout);
-  public PoolFactory setMinConnections(int minConnections);
+  PoolFactory setMinConnections(int minConnections);
-  public PoolFactory setMaxConnections(int maxConnections);
+  PoolFactory setMaxConnections(int maxConnections);
-  public PoolFactory setIdleTimeout(long idleTimeout);
+  PoolFactory setIdleTimeout(long idleTimeout);
-  public PoolFactory setRetryAttempts(int retryAttempts);
+  PoolFactory setRetryAttempts(int retryAttempts);
-  public PoolFactory setPingInterval(long pingInterval);
+  PoolFactory setPingInterval(long pingInterval);
-  public PoolFactory setStatisticInterval(int statisticInterval);
+  PoolFactory setStatisticInterval(int statisticInterval);
-  public PoolFactory setServerGroup(String group);
+  PoolFactory setServerGroup(String group);
-  public PoolFactory addLocator(String host, int port);
+  PoolFactory addLocator(String host, int port);
-  public PoolFactory addServer(String host, int port);
+  PoolFactory addServer(String host, int port);
-  public PoolFactory setSubscriptionEnabled(boolean enabled);
+  PoolFactory setSubscriptionEnabled(boolean enabled);
-  public PoolFactory setSubscriptionRedundancy(int redundancy);
+  PoolFactory setSubscriptionRedundancy(int redundancy);
-  public PoolFactory setSubscriptionMessageTrackingTimeout(int messageTrackingTimeout);
+  PoolFactory setSubscriptionMessageTrackingTimeout(int messageTrackingTimeout);
+
+  /**
+   * A server has an inactivity monitor that ensures a message is sent to a client at least once a
+   * minute (60,000 milliseconds). If a subscription timeout multipler is set in the client it
+   * enables timing out of the subscription feed with failover to another server.
+   * <p>
+   * A value of zero (the default) disables timeouts
+   * <p>
+   * The resulting timeout will be multiplied by 1.25 in order to avoid race conditions with the
+   * server sending its "ping" message.
+   */
+  public PoolFactory setSubscriptionTimeoutMultiplier(int multiplier);
-  public PoolFactory setSubscriptionAckInterval(int ackInterval);
+  PoolFactory setSubscriptionAckInterval(int ackInterval);
-  public PoolFactory reset();
+  PoolFactory reset();
-  public Pool create(String name);
+  Pool create(String name);
-  public PoolFactory setPRSingleHopEnabled(boolean enabled);
+  PoolFactory setPRSingleHopEnabled(boolean enabled);
-  public PoolFactory setMultiuserAuthentication(boolean enabled);
+  PoolFactory setMultiuserAuthentication(boolean enabled);

INS26 INS26 INS40 UPD40 UPD40 INS40 INS23 INS31 INS29 INS83 INS83 INS83 INS39 INS59 INS29 INS83 INS43 INS42 INS44 INS65 INS42 INS34 INS65 INS42 INS39 INS42 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83