GEODE-17: Shiro Integration

GEODE-17: associate async request with correct shiro user

GEODE-17

GEODE-17: fix shiro dependency

-import java.util.Properties;
-
-import org.apache.logging.log4j.Logger;
-
-import com.gemstone.gemfire.internal.logging.ManagerLogWriter;
+import com.gemstone.gemfire.management.internal.cli.result.ErrorResultData;
+import com.gemstone.gemfire.security.GemFireSecurityException;
+import org.apache.logging.log4j.Logger;
-//    System.out.println("isGfshRequest :: "+isGfshRequest);
+
+      // throw GemFireSecurityException is the returned error code is 415
+      if(((CommandResult) result).getResultData() instanceof ErrorResultData){
+        ErrorResultData resultData = (ErrorResultData) ((CommandResult)result).getResultData();
+        if(resultData.getErrorCode()==ResultBuilder.ERRORCODE_UNAUTHORIZED){
+          throw new GemFireSecurityException(resultData.getGfJsonObject().toString());
+        }
+      }

MOV26 MOV26 MOV26 UPD40 UPD40 INS8 INS25 MOV41 INS62 INS8 INS32 INS43 INS60 INS25 INS36 INS42 INS42 INS43 INS59 INS27 MOV8 INS11 INS42 INS42 INS11 INS32 INS40 INS53 INS43 INS42 INS43 INS32 INS42 INS42 INS14 INS42 INS42 INS36 INS42 INS43 INS32 INS11 INS42 INS32 INS42 INS43 INS42 INS42 INS42 INS42