GEODE-6889, GEODE-6890: remove sync when updating max stats (#3728)

* GEODE-6889: Ensure the highest value is recorded to replyWaitMaxTime
* GEODE-6890: Ensure the highest value is recorded to maxSentMessagesTime

Co-authored-by: Murtuza Boxwala <mboxwala@pivotal.io>
+import org.apache.geode.annotations.VisibleForTesting;
-  private static final int sentMessagesTimeId;
-  private static final int sentMessagesMaxTimeId;
+  @VisibleForTesting
+  static final int sentMessagesTimeId;
+  @VisibleForTesting
+  static final int sentMessagesMaxTimeId;
-  private static final int replyWaitTimeId;
+  @VisibleForTesting
+  static final int replyWaitTimeId;
-  private static final int replyWaitMaxTimeId;
+  @VisibleForTesting
+  static final int replyWaitMaxTimeId;
+  private final MaxLongGauge maxReplyWaitTime;
+  private final MaxLongGauge maxSentMessagesTime;
+
-    this.stats = f.createAtomicStatistics(type, "distributionStats", statId);
+    this(f.createAtomicStatistics(type, "distributionStats", statId));
+    maxReplyWaitTime = new MaxLongGauge(replyWaitMaxTimeId, stats);
+    maxSentMessagesTime = new MaxLongGauge(sentMessagesMaxTimeId, stats);
-      long millis = nanos / 1000000;
-      if (getSentMessagesMaxTime() < millis) {
-        this.stats.setLong(sentMessagesMaxTimeId, millis);
-      }
+      long millis = NanoTimer.nanosToMillis(nanos);
+      maxSentMessagesTime.recordMax(millis);
-   * Returns the longest time required to distribute a message, in nanos
-   */
-  public long getSentMessagesMaxTime() {
-    return this.stats.getLong(sentMessagesMaxTimeId);
-  }
-
-
-  /**
-  public long getReplyWaitMaxTime() {
-    return stats.getLong(replyWaitMaxTimeId);
-  }
-
+
-      long mswait = System.currentTimeMillis() - initTime;
-      if (mswait > getReplyWaitMaxTime()) {
-        stats.setLong(replyWaitMaxTimeId, mswait);
-      }
+      long waitTime = System.currentTimeMillis() - initTime;
+      maxReplyWaitTime.recordMax(waitTime);

INS26 INS40 INS23 INS23 INS78 INS78 INS78 INS78 INS83 INS83 INS43 INS59 INS83 INS83 INS43 INS59 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS17 INS21 INS21 MOV32 INS7 INS7 INS42 INS14 INS42 INS14 MOV21 MOV21 INS43 INS42 INS42 INS43 INS42 INS42 INS42 INS42 INS32 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 INS42 INS42 INS42 DEL83 DEL83 DEL83 DEL83 DEL52 DEL42 DEL22 DEL7 DEL21 DEL42 DEL34 DEL27 DEL52 DEL42 DEL22 DEL42 DEL42 DEL32 DEL42 DEL27 DEL8 DEL25 DEL66 DEL65 DEL29 DEL83 DEL39 DEL42 DEL52 DEL42 DEL22 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL83 DEL39 DEL42 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL42 DEL42 DEL42 DEL32 DEL27 DEL8 DEL25