GEODE-7727: modify sender thread to detect release of connection (#4629)

* GEODE-7727: modify sender thread to detect relese of connection

* GEODE-7727: Update solution only for shared connections

* GEODE-7727: added test

* GEODE-7727: update ater comments

* GEODE-7727: update test

+      } else {
+        if (sharedResource) {
+          asyncClose(false);
+        }
-
-          if (!isReceiver && (handshakeRead || handshakeCancelled)) {
+          if (!isHandShakeReader && !isReceiver && (handshakeRead || handshakeCancelled)) {
-            // Once we have read the handshake the reader can go away
-            break;
+
+            // Once we have read the handshake for unshared connections, the reader can skip
+            // processing messages
+            if (!sharedResource) {
+              break;
+            }
+
-      if (!isHandShakeReader) {
+      if (!isHandShakeReader || sharedResource) {

INS8 INS27 INS25 MOV38 INS42 INS42 INS8 INS21 INS32 INS42 INS9 INS38 INS25 INS42 INS38 INS8 INS42 MOV10