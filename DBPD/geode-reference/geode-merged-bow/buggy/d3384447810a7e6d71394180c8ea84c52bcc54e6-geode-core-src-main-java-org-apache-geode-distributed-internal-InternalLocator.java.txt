GEODE-6712: locator should not start if cluster configuration service failed to start (#3815)


-import org.apache.geode.distributed.LockServiceDestroyedException;
-  private void startDistributedSystem() throws UnknownHostException {
+  private void startDistributedSystem() throws IOException {
-  private void startCache(DistributedSystem system) {
+  private void startCache(DistributedSystem system) throws IOException {
-  private void startClusterManagementService() {
+  private void startClusterManagementService() throws IOException {
-  private void startConfigurationPersistenceService() {
+  private void startConfigurationPersistenceService() throws IOException {
-    try {
-      if (locator.configurationPersistenceService == null) {
-        // configurationPersistenceService will already be created in case of auto-reconnect
-        locator.configurationPersistenceService =
-            new InternalConfigurationPersistenceService(locator.internalCache, workingDirectory,
-                JAXBService.create());
-      }
-      locator.configurationPersistenceService
-          .initSharedConfiguration(locator.loadFromSharedConfigDir());
-      logger.info(
-          "Cluster configuration service start up completed successfully and is now running ....");
-      isSharedConfigurationStarted = true;
-    } catch (CancelException | LockServiceDestroyedException e) {
-      if (logger.isDebugEnabled()) {
-        logger.debug("Cluster configuration start up was cancelled", e);
-      }
-    } catch (Exception e) {
-      logger.error(e.getMessage(), e);
+
+    if (locator.configurationPersistenceService == null) {
+      // configurationPersistenceService will already be created in case of auto-reconnect
+      locator.configurationPersistenceService =
+          new InternalConfigurationPersistenceService(locator.internalCache, workingDirectory,
+              JAXBService.create());
+    locator.configurationPersistenceService
+        .initSharedConfiguration(locator.loadFromSharedConfigDir());
+    logger.info(
+        "Cluster configuration service start up completed successfully and is now running ....");
+    isSharedConfigurationStarted = true;

UPD43 INS43 INS43 INS43 MOV8 UPD42 INS42 INS42 UPD42 MOV42 MOV21 MOV25 MOV25 MOV25 MOV25 DEL40 DEL26 DEL42 DEL43 DEL42 DEL43 DEL84 DEL42 DEL44 DEL42 DEL42 DEL32 DEL42 DEL42 DEL45 DEL42 DEL32 DEL21 DEL8 DEL25 DEL8 DEL12 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL21 DEL8 DEL12 DEL54 DEL8