GEODE-77: send Remove messages to members that are kicked out during view installation

This also changes view preparation to only attempt to prepare the view once.
If the initial preparation fails we create the new view kicking out
unresponsive members and just send it out, along with the Remove messages.

-
+  
+  /** a test hook to make this member unresponsive */
+  private volatile boolean playingDead;
+  
-    if (m.getView().contains(m.getView().getCreator())) {
+    if (!playingDead && m.getView().contains(m.getView().getCreator())) {
-          // TODO we don't want to give up on the locators if we receive
-          // a response from a locator that's joined the system.  Otherwise
-          // we'll give up and cause a split-brain
+              logger.debug("Locator's address indicates it is part of a distributed system "
+                  + "so I will not become membership coordinator on this attempt to join");
-      if (logger.isInfoEnabled() && !newView.getCreator().equals(localAddress)) { // view-creator logs this
+      if (logger.isInfoEnabled()
+          && newView.getCreator().equals(localAddress)) { // view-creator logs this
+    playingDead = true;
+    playingDead = false;
+          int size = failures.size();
+          List<String> reasons = new ArrayList<>(size);
+          for (int i=0; i<size; i++) {
+            reasons.add("Failed to acknowledge a new membership view and then failed tcp/ip connection attempt");
+          }
+          sendRemoveMessages(failures, reasons, newView);
+        
+        // if there is no conflicting view then we can count
+        // the current state as being prepared.  All members
+        // who are going to ack have already done so or passed
+        // a liveness test
+        if (conflictingView == null) {
+          prepared = true;
+        }
+        

INS23 INS29 INS83 INS83 INS39 INS59 INS65 INS42 INS21 INS21 INS66 INS27 INS7 INS7 INS38 MOV32 INS42 INS9 INS42 INS9 INS42 INS25 MOV32 INS27 INS8 INS60 INS60 INS24 INS21 INS42 INS33 INS21 INS39 INS59 INS74 INS59 INS58 INS27 INS37 INS8 INS32 INS7 INS42 INS32 INS43 INS43 INS42 INS14 INS39 INS59 INS42 INS42 INS42 INS21 INS42 INS42 INS42 INS42 INS42 INS9 INS42 INS42 INS42 INS42 INS74 INS42 INS42 INS34 INS32 INS43 INS42 INS42 INS45 INS21 INS42 INS32 INS42 INS42 INS27 INS45 INS45 DEL38