GEODE-5284: Add testing surrounding MBean persistence during member failure and reconnection. (#2066)

* Add null-check to ConfigurationChangeListener to avoid NPE when a locator joins.
* Add withPort method to MemberStarterRule to specify membership port
* Add testing associated with MemberStarterRule addition
* Ensure cleanup of members in MemberStarterRuleIntegrationTest.
* Improve names and extract helper methods
* use the methods provided by the starter rules to force disconnect and
to reconnect servers and locators. Adds a parameter in InternalLocator
to track the status of the reconnect. Adds export of cache xml for
reconnect so that the server is able to restore its state following
disconnect.

Co-Authored-by: Helena Bales <hbales@pivotal.io>
Co-Authored-by: Dale Emery <dale@dhemery.com>
Co-Authored-by: Patrick Rhomberg <prhomberg@pivotal.io>
Co-Authored-By: Jinmei Liao <jinmeiliao@pivotal.io>
+import static java.util.concurrent.TimeUnit.SECONDS;
+
+import java.util.concurrent.TimeUnit;
+import org.awaitility.Awaitility;
+import org.apache.geode.distributed.internal.InternalDistributedSystem;
+import org.apache.geode.distributed.internal.InternalLocator;
+import org.apache.geode.internal.cache.InternalCache;
+  public void waitTilLocatorFullyReconnected() {
+    vm.invoke(() -> Awaitility.waitAtMost(30, TimeUnit.SECONDS).until(() -> {
+      InternalLocator intLocator = InternalLocator.getLocator();
+      InternalCache cache = ClusterStartupRule.getCache();
+      return intLocator != null && cache != null && intLocator.getDistributedSystem().isConnected()
+          && intLocator.isReconnected();
+    }));
+  }
+
+  public void waitTilServerFullyReconnected() {
+    vm.invoke(() -> Awaitility.waitAtMost(30, SECONDS).until(() -> {
+      InternalDistributedSystem internalDistributedSystem =
+          InternalDistributedSystem.getConnectedInstance();
+      return internalDistributedSystem != null
+          && internalDistributedSystem.getCache() != null
+          && !internalDistributedSystem.getCache().getCacheServers().isEmpty();
+    }));
+
+  }
+

INS26 INS26 INS26 INS26 INS26 INS26 INS40 INS40 INS40 INS40 INS40 INS40 INS31 INS31 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS8 INS21 INS21 INS32 INS32 INS42 INS42 INS86 INS42 INS42 INS86 INS32 INS32 INS32 INS42 INS86 INS32 INS42 INS86 INS42 INS42 INS34 INS40 INS8 INS42 INS42 INS34 INS42 INS8 INS60 INS60 INS41 INS60 INS41 INS43 INS59 INS43 INS59 INS27 INS43 INS59 INS27 INS42 INS42 INS32 INS42 INS42 INS32 INS27 INS32 INS42 INS42 INS32 INS27 INS38 INS42 INS42 INS42 INS42 INS27 INS32 INS42 INS42 INS42 INS42 INS27 INS27 INS32 INS27 INS27 INS32 INS42 INS42 INS33 INS32 INS33 INS32 INS42 INS42 INS33 INS42 INS33 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS42