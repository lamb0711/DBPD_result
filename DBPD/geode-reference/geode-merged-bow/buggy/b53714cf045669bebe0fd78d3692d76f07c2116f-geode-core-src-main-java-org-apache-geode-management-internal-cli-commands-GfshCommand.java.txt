GEODE-4735: get rid of Cache.getInstance call from CliUtils and GfshCâ€¦ (#1551)

* GEODE-4735: get rid of Cache.getInstance call from CliUtils and GfshCommand

* all functions in CliUtils take cache as a parameter if needs one.
* InternalCache is injected to the command when the command is initialized.
-import org.apache.geode.cache.CacheFactory;
+import org.apache.geode.cache.Cache;
-public interface GfshCommand extends CommandMarker {
+public abstract class GfshCommand implements CommandMarker {
+  private InternalCache cache;
-  String EXPERIMENTAL = "(Experimental) ";
+  public void setCache(Cache cache) {
+    this.cache = (InternalCache) cache;
+  }
-  default boolean isConnectedAndReady() {
+  public InternalCache getCache() {
+    return cache;
+  }
+
+  public static final String EXPERIMENTAL = "(Experimental) ";
+
+  public boolean isConnectedAndReady() {
-  default ClusterConfigurationService getSharedConfiguration() {
+  public ClusterConfigurationService getSharedConfiguration() {
-  default void persistClusterConfiguration(Result result, Runnable runnable) {
+  public void persistClusterConfiguration(Result result, Runnable runnable) {
-  default XmlEntity findXmlEntity(List<CliFunctionResult> functionResults) {
+  public XmlEntity findXmlEntity(List<CliFunctionResult> functionResults) {
-  default boolean isDebugging() {
+  public boolean isDebugging() {
-  default boolean isLogging() {
+  public boolean isLogging() {
-  default InternalCache getCache() {
-    return (InternalCache) CacheFactory.getAnyInstance();
-  }
-
-  default SecurityService getSecurityService() {
+  public SecurityService getSecurityService() {
-  default Gfsh getGfsh() {
+  public Gfsh getGfsh() {
-  default DistributedMember getMember(final String memberName) {
+  public DistributedMember getMember(final String memberName) {
-  default DistributedMember findMember(final String memberName) {
+  public DistributedMember findMember(final String memberName) {
-  default Set<DistributedMember> getAllMembers(final InternalCache cache) {
+  public Set<DistributedMember> getAllMembers() {
-  default Set<DistributedMember> getAllNormalMembers(InternalCache cache) {
+  public Set<DistributedMember> getAllNormalMembers() {
-  default Execution getMembersFunctionExecutor(final Set<DistributedMember> members) {
+  public Execution getMembersFunctionExecutor(final Set<DistributedMember> members) {
-  default Set<DistributedMember> findMembers(String[] groups, String[] members) {
+  public Set<DistributedMember> findMembers(String[] groups, String[] members) {
-  default Set<DistributedMember> getMembers(String[] groups, String[] members) {
+  public Set<DistributedMember> getMembers(String[] groups, String[] members) {
-  default Set<DistributedMember> findMembersIncludingLocators(String[] groups, String[] members) {
+  public Set<DistributedMember> findMembersIncludingLocators(String[] groups, String[] members) {
-  default Set<DistributedMember> getMembersIncludingLocators(String[] groups, String[] members) {
+  public Set<DistributedMember> getMembersIncludingLocators(String[] groups, String[] members) {
-  default ManagementService getManagementService() {
+  public ManagementService getManagementService() {
-  default Set<DistributedMember> findMembersForRegion(InternalCache cache, String regionPath) {
+  public Set<DistributedMember> findMembersForRegion(String regionPath) {
-  default ResultCollector<?, ?> executeFunction(Function function, Object args,
+  public Set<DistributedMember> findAnyMembersForRegion(String regionPath) {
+    return CliUtil.getRegionAssociatedMembers(regionPath, cache, false);
+  }
+
+  public ResultCollector<?, ?> executeFunction(Function function, Object args,
-  default ResultCollector<?, ?> executeFunction(Function function, Object args,
+  public ResultCollector<?, ?> executeFunction(Function function, Object args,
-  default List<CliFunctionResult> executeAndGetFunctionResult(Function function, Object args,
+  public List<CliFunctionResult> executeAndGetFunctionResult(Function function, Object args,
-  default Set<DistributedMember> findAnyMembersForRegion(InternalCache cache, String regionPath) {
-    return CliUtil.getRegionAssociatedMembers(regionPath, cache, false);
-  }
-
-  default Set<DistributedMember> findMembersWithAsyncEventQueue(String queueId) {
+  public Set<DistributedMember> findMembersWithAsyncEventQueue(String queueId) {

MOV31 MOV31 UPD40 INS83 INS23 INS31 INS83 MOV43 INS59 INS83 INS39 INS42 INS44 INS8 UPD83 INS83 INS83 INS83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 UPD83 INS42 INS43 INS42 INS21 INS42 INS7 INS42 INS22 MOV11 INS52 INS42 INS42 DEL42 DEL42 DEL32 DEL83 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44