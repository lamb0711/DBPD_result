GEODE-7162: Remove AttributesFactory in geode-lucene (#4280)

- Fixed method setPartitionAttributes to behave as the one within
  the deprecated AttributesFactory class.
- Removed references to the deprecated AttributesFactory from the
  geode-lucene module.
+import org.apache.geode.internal.cache.PartitionAttributesImpl;
-  public void setPartitionAttributes(PartitionAttributes pa) {
-    if (pa != null) {
+  public void setPartitionAttributes(PartitionAttributes partitionAttr) {
+    if (partitionAttr != null) {
-        this.setDataPolicy(PartitionedRegionHelper.DEFAULT_DATA_POLICY);
+        setDataPolicy(PartitionedRegionHelper.DEFAULT_DATA_POLICY);
+      } else if (!PartitionedRegionHelper.ALLOWED_DATA_POLICIES.contains(getDataPolicy())) {
+        throw new IllegalStateException(
+            String.format(
+                "Data policy %s is not allowed for a partitioned region. DataPolicies other than %s are not allowed.",
+                this.getDataPolicy(), PartitionedRegionHelper.ALLOWED_DATA_POLICIES));
-      this.partitionAttributes = pa;
+      if (hasPartitionAttributes()
+          && partitionAttributes instanceof PartitionAttributesImpl
+          && partitionAttr instanceof PartitionAttributesImpl) {
+
+        // Make a copy and call merge on it to prevent bug 51616
+        PartitionAttributesImpl copy = ((PartitionAttributesImpl) partitionAttributes).copy();
+        copy.merge((PartitionAttributesImpl) partitionAttr);
+        this.partitionAttributes = copy;
+      } else {
+        this.partitionAttributes = partitionAttr;
+      }
+
+      ((PartitionAttributesImpl) partitionAttributes).setOffHeap(offHeap);
+    } else {
+      partitionAttributes = null;
+      setHasPartitionAttributes(false);

INS26 INS40 UPD42 INS8 INS8 UPD42 MOV25 INS25 MOV21 INS21 INS21 INS21 INS25 INS27 MOV8 INS8 INS32 INS7 INS32 INS38 INS8 INS32 INS62 INS62 INS60 INS21 INS21 INS36 INS42 INS42 INS42 INS33 INS42 INS9 INS32 INS53 INS42 INS42 INS43 INS42 INS43 INS43 INS59 INS32 INS7 INS11 INS40 INS42 INS32 INS14 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS11 UPD42 INS22 INS42 INS43 INS42 INS42 INS43 INS32 INS36 INS42 INS43 INS42 INS52 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS40 INS11 INS42 INS52 INS42 INS43 INS42 INS42 DEL52