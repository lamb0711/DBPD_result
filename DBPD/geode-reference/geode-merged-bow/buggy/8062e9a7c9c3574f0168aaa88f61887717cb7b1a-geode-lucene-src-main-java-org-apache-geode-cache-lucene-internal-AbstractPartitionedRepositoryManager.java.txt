GEODE-2367: Lucene indexes do not handle ha scenarios

* Added afterSecondary callback to partition listener to allow cleaning up
  of the index repo when the bucket losses primary
* Added lock prior to creating the bucket indexes to prevent multiple index
  writers from being available at a time
* Changed single point of lucene index creation, no longer creating on the fly

+import java.util.concurrent.Callable;
+import java.util.concurrent.Future;
+import java.util.concurrent.FutureTask;
-  /**
-   * Return the repository for a given user bucket
-   */
-  protected IndexRepository getRepository(Integer bucketId) throws BucketNotFoundException {
-    IndexRepository repo = indexRepositories.get(bucketId);
-    if (repo != null && !repo.isClosed()) {
-      return repo;
-    }
-
-    repo = indexRepositories.compute(bucketId, (key, oldRepository) -> {
+  protected IndexRepository createRepository(Integer bucketId) throws BucketNotFoundException {
+    IndexRepository repo = indexRepositories.compute(bucketId, (key, oldRepository) -> {
+    return repo;
+  }
-    if (repo == null) {
-      throw new BucketNotFoundException(
-          "Colocated index buckets not found for bucket id " + bucketId);
+  /**
+   * Return the repository for a given user bucket
+   */
+  protected IndexRepository getRepository(Integer bucketId) throws BucketNotFoundException {
+    IndexRepository repo = indexRepositories.get(bucketId);
+    if (repo != null && !repo.isClosed()) {
+      return repo;
-    return repo;
+    throw new BucketNotFoundException(
+        "Colocated index buckets not found for bucket id " + bucketId);
+  }
+
+  protected void cleanRepository(Integer bucketId) throws BucketNotFoundException {
+    IndexRepository repo = indexRepositories.remove(bucketId);
+    if (repo != null) {
+      repo.cleanup();
+    }

INS26 INS26 INS26 INS40 INS40 INS40 INS31 INS31 INS43 INS42 MOV29 INS83 INS43 INS42 INS44 INS43 INS8 INS83 INS39 INS42 INS44 INS43 INS8 INS42 INS60 INS42 INS43 INS42 INS42 MOV60 MOV25 MOV53 INS43 INS42 INS42 INS60 INS25 MOV43 INS59 INS42 INS42 INS43 INS59 INS27 INS8 INS42 MOV32 INS42 INS42 INS32 INS42 INS33 INS21 INS42 INS42 INS42 INS32 INS42 INS42 DEL42 DEL42 DEL7 DEL21 DEL42 DEL33 DEL27 DEL8 DEL25