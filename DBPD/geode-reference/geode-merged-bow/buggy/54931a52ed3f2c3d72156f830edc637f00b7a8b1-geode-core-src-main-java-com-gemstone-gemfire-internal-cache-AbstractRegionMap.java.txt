GEODE-1044: InitialImagePut executes BEFORE_UPDATE_OP on indexes for updates

When entries are recovered from persistence, the values are added to the index,
however a gii can then occur where the initialImagePut needs to properly
alert the index that an update is occuring.  The BEFORE_UPDATE_OP allows the index
to retreive the oldKey and notifies the index that an update is occuring.

Refactor QueryTestUtils and removed unused code
Minor modification for QueryTestUtils to be more generic and not be specific to Portfolios

+                    // Due to having no reverse map, we need to be able to generate the oldkey before doing an update
+                    // Without the BEFORE_UPDATE_OP, we would see duplicate entries in the index as the update could not locate the old key
+                    if (!oldRe.isRemoved()) {
+                      owner.getIndexManager().updateIndexes(oldRe, IndexManager.REMOVE_ENTRY, IndexProtocol.BEFORE_UPDATE_OP);
+                    }
+              
-              if (owner.getIndexManager() != null) {
-                owner.getIndexManager().updateIndexes(newRe, newRe.isRemoved() ? IndexManager.REMOVE_ENTRY : IndexManager.UPDATE_ENTRY, 
-                    newRe.isRemoved() ? IndexProtocol.OTHER_OP : IndexProtocol.AFTER_UPDATE_OP);
+                if (owner.getIndexManager() != null) {
+                  // Due to having no reverse map, we need to be able to generate the oldkey before doing an update
+                  // Without the BEFORE_UPDATE_OP, we would see duplicate entries in the index as the update could not locate the old key
+                  if (oldRe != null && !oldRe.isRemoved()) {
+                    owner.getIndexManager().updateIndexes(oldRe, IndexManager.REMOVE_ENTRY, IndexProtocol.BEFORE_UPDATE_OP);
+                  }
+                  owner.getIndexManager().updateIndexes(newRe, newRe.isRemoved() ? IndexManager.REMOVE_ENTRY : IndexManager.UPDATE_ENTRY,
+                      newRe.isRemoved() ? IndexProtocol.OTHER_OP : IndexProtocol.AFTER_UPDATE_OP);

INS25 INS27 INS8 INS27 INS38 INS21 INS42 INS33 INS32 INS32 INS25 INS42 INS42 INS32 INS42 INS42 INS40 INS40 INS38 INS8 INS42 INS42 INS32 INS21 INS42 INS42 INS32 INS32 INS42 INS42 INS40 INS40 INS42 INS42