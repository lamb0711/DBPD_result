GEODE-1760 Sending partial results to users ResultCollector

For non-HA functions on the client, results will now be passed to the
users result collector, even if some nodes fail due to a bucket movement
or cache close.

Signed-off-by: Dan Smith <upthewaterspout@apache.org>

-
+import com.gemstone.gemfire.GemFireException;
+        GemFireException functionExecutionException = null;
-              rc.clearResults();
-              if (!isHA) {
+              // Clear the results only if isHA so that partial results can be returned.
+              if (isHA) {
+                rc.clearResults();
+              } else {
-                  throw new FunctionInvocationTargetException(ee.getCause()
-                      .getCause());
+                  functionExecutionException = new FunctionInvocationTargetException(
+                      ee.getCause().getCause());
-                  throw new FunctionInvocationTargetException(
+                  functionExecutionException = new FunctionInvocationTargetException(
-                
-              throw (FunctionException)ee.getCause();
+              FunctionException fe = (FunctionException)ee.getCause();
+              if (isHA) {
+                throw fe;
+              } else {
+                functionExecutionException = fe;
+              }
-              throw (ServerOperationException)ee.getCause();
+              ServerOperationException soe = (ServerOperationException)ee.getCause();
+              if (isHA) {
+                throw soe;
+              } else {
+                functionExecutionException = soe;
+              }
-              reexecute = true;
-              rc.clearResults();
-              if (!isHA) {
-                reexecute = false;
-                throw (ServerConnectivityException) ee.getCause();
+              // Clear the results only if isHA so that partial results can be returned.
+              if (isHA) {
+                reexecute = true;
+                rc.clearResults();
+              } else {
+                functionExecutionException = (ServerConnectivityException) ee.getCause();
+        if (functionExecutionException != null) {
+          throw functionExecutionException;
+        }

INS26 INS40 INS60 INS25 INS43 INS59 INS27 INS8 INS42 INS42 INS33 INS42 INS33 INS53 INS42 INS42 INS8 INS60 INS25 MOV21 INS43 INS59 INS42 INS8 INS8 INS60 INS25 INS42 INS42 MOV11 MOV53 INS21 INS43 INS59 INS42 INS8 INS8 INS21 INS21 INS42 INS7 INS42 INS42 MOV11 MOV53 INS21 INS42 INS8 INS7 INS7 INS42 INS42 INS42 INS7 MOV21 MOV21 INS42 MOV14 INS42 MOV14 INS42 INS42 UPD42 MOV11 DEL42 DEL38 DEL53 DEL53 DEL42 DEL38 DEL9 DEL53