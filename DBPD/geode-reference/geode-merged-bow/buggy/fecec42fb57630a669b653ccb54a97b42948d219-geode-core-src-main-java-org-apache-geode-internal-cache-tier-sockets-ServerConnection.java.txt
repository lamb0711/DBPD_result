GEODE-3059: LoadMonitor.connectionClosed incrementing statistics only for client-server connection

The stat should only be incremented/decremented for certain kinds of
connections.  I've modified it to include protobuf connections.  All
of the constant byte identifiers in Acceptor.java have been moved to
an enum in CommunicationMode.java.  In that class I've added some
"isa" checks to replace the many big "if" checks for different kinds
of connection modes.

A new connection modes will henceforth need to be added to
CommunicationMode.java where the appropriate "isa" methods can be
updated to include the new mode.

+import org.apache.geode.internal.cache.tier.CommunicationMode;
-  final private AcceptorImpl acceptor;
+  final AcceptorImpl acceptor;
-  protected final byte communicationMode;
+  protected final CommunicationMode communicationMode;
-    this.communicationMode = communicationMode;
+    this.communicationMode = CommunicationMode.fromModeNumber(communicationMode);
-    if (this.communicationMode == Acceptor.CLIENT_TO_SERVER_FOR_QUEUE) {
+    if (this.communicationMode == CommunicationMode.ClientToServerForQueue) {
-    return communicationMode == Acceptor.CLIENT_TO_SERVER
-        || communicationMode == Acceptor.PRIMARY_SERVER_TO_CLIENT
-        || communicationMode == Acceptor.SECONDARY_SERVER_TO_CLIENT
-        || communicationMode == Acceptor.CLIENT_TO_SERVER_FOR_QUEUE;
+    return communicationMode.isClientToServerOrSubscriptionFeed();
-      if (getCommunicationMode() != Acceptor.GATEWAY_TO_GATEWAY)
+      if (!getCommunicationMode().isWAN())
-            && this.communicationMode != Acceptor.GATEWAY_TO_GATEWAY) {
+            && !this.communicationMode.isWAN()) {
-        if (this.communicationMode == Acceptor.CLIENT_TO_SERVER_FOR_QUEUE) {
+        if (this.communicationMode == CommunicationMode.ClientToServerForQueue) {
-        && (this.communicationMode != Acceptor.GATEWAY_TO_GATEWAY)
-        && (!this.requestMsg.getAndResetIsMetaRegion())
-        && (!isInternalMessage(this.requestMsg, ALLOW_INTERNAL_MESSAGES_WITHOUT_CREDENTIALS))) {
+        && !this.communicationMode.isWAN() && !this.requestMsg.getAndResetIsMetaRegion()
+        && !isInternalMessage(this.requestMsg, ALLOW_INTERNAL_MESSAGES_WITHOUT_CREDENTIALS)) {
-  protected byte getCommunicationMode() {
+  protected CommunicationMode getCommunicationMode() {
-    if (this.communicationMode == Acceptor.CLIENT_TO_SERVER || isGatewayConnection()
-        || this.communicationMode == Acceptor.MONITOR_TO_SERVER
-        || this.communicationMode == Acceptor.PROTOBUF_CLIENT_SERVER_PROTOCOL
-    /* || this.communicationMode == Acceptor.CLIENT_TO_SERVER_FOR_QUEUE */) {
+    if (this.communicationMode.isWAN()
+        || this.communicationMode.isCountedAsClientServerConnection()) {
-    if (this.handshake.getVersion().isPre65() || isGatewayConnection()) {
+    if (this.handshake.getVersion().isPre65() || communicationMode.isWAN()) {
-  private boolean isGatewayConnection() {
-    return getCommunicationMode() == Acceptor.GATEWAY_TO_GATEWAY;
-  }
-

INS26 INS40 INS43 INS43 INS42 INS42 INS32 MOV27 INS32 UPD40 INS42 INS42 MOV38 INS32 MOV32 INS42 INS42 INS42 INS38 MOV38 MOV22 INS42 MOV22 UPD42 INS42 UPD42 INS32 INS38 MOV32 INS42 INS32 INS38 UPD40 MOV22 INS42 INS32 MOV22 INS42 DEL83 DEL39 DEL42 DEL42 DEL40 DEL27 DEL42 DEL40 DEL27 DEL27 DEL42 DEL40 DEL27 DEL27 DEL42 DEL40 DEL27 DEL27 DEL40 DEL27 DEL40 DEL27 DEL40 DEL27 DEL36 DEL36 DEL36 DEL39 DEL40 DEL27 DEL27 DEL40 DEL27 DEL52 DEL42 DEL22 DEL40 DEL27 DEL27 DEL83 DEL39 DEL42 DEL42 DEL32 DEL40 DEL27 DEL41 DEL8 DEL31