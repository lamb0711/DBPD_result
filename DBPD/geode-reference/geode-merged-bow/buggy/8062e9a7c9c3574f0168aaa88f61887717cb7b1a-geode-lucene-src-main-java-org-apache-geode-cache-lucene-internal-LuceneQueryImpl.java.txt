GEODE-2367: Lucene indexes do not handle ha scenarios

* Added afterSecondary callback to partition listener to allow cleaning up
  of the index repo when the bucket losses primary
* Added lock prior to creating the bucket indexes to prevent multiple index
  writers from being available at a time
* Changed single point of lucene index creation, no longer creating on the fly

+import org.apache.geode.internal.cache.BucketNotFoundException;
+import org.apache.geode.internal.logging.LogService;
+import org.apache.logging.log4j.Logger;
+  Logger logger = LogService.getLogger();
+  private final static int MAX_TRIES = 500;
+
-    ResultCollector<TopEntriesCollector, TopEntries<K>> rc =
-        (ResultCollector<TopEntriesCollector, TopEntries<K>>) onRegion().withArgs(context)
-            .withCollector(collector).execute(LuceneFunction.ID);
+
-    TopEntries<K> entries;
-    try {
-      entries = rc.getResult();
-    } catch (FunctionException e) {
-      if (e.getCause() instanceof LuceneQueryException) {
-        throw new LuceneQueryException(e);
-      } else {
-        throw e;
+    TopEntries<K> entries = null;
+    int numTries = 0;
+    while (entries == null && numTries++ < MAX_TRIES) {
+      try {
+        ResultCollector<TopEntriesCollector, TopEntries<K>> rc =
+            (ResultCollector<TopEntriesCollector, TopEntries<K>>) onRegion().withArgs(context)
+                .withCollector(collector).execute(LuceneFunction.ID);
+        entries = rc.getResult();
+      } catch (FunctionException e) {
+        if (e.getCause() instanceof LuceneQueryException) {
+          throw new LuceneQueryException(e);
+        } else if (e.getCause() instanceof BucketNotFoundException) {
+          logger.debug("Retrying due to index on bucket not found:" + e);
+          // throw e;
+        } else {
+          e.printStackTrace();
+          throw e;
+        }

INS26 INS26 INS26 INS40 INS40 INS40 INS23 INS23 INS43 INS59 INS83 INS83 INS83 INS39 INS59 INS42 INS42 INS32 INS42 INS34 INS60 INS61 INS42 INS42 INS39 INS59 INS27 INS8 INS33 INS42 INS34 INS27 INS27 MOV54 INS42 INS33 INS37 INS42 INS42 MOV60 INS25 INS62 INS8 MOV8 INS32 INS43 INS21 INS21 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS27 INS42 INS42 INS45 INS42