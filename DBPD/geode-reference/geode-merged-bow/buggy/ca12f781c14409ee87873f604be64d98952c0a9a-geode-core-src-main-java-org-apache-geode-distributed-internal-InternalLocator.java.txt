GEODE-2970: clearing LogWriterAppender when shutting down locator.

* Do not bury the NPE in AlterRuntimeConfigFunction
* destroy the LogWriterAppender when removing the locator
* added test

-      if (hasLocator()) {
-        if (locator.equals(InternalLocator.locator)) {
-          InternalLocator.locator = null;
-          return true;
-        }
+      LogWriterAppenders.stop(LogWriterAppenders.Identifier.MAIN);
+      LogWriterAppenders.stop(LogWriterAppenders.Identifier.SECURITY);
+      LogWriterAppenders.destroy(LogWriterAppenders.Identifier.MAIN);
+      LogWriterAppenders.destroy(LogWriterAppenders.Identifier.SECURITY);
+      if (locator != null && locator.equals(InternalLocator.locator)) {
+        InternalLocator.locator = null;
+        return true;
-   * Creates a distribution locator that runs in this VM on the given port and bind address and
-   * creates a distributed system.
-   * 
-   * @param port the tcp/ip port to listen on
-   * @param logFile the file that log messages should be written to
-   * @param logger a log writer that should be used (logFile parameter is ignored)
-   * @param securityLogger the logger to be used for security related log messages
-   * @param dsProperties optional properties to configure the distributed system (e.g., mcast
-   *        addr/port, other locators)
-   * @param hostnameForClients the name to give to clients for connecting to this locator
-   * @since GemFire 7.0
-   */
-  public static InternalLocator startLocator(int port, File logFile, File stateFile,
-      InternalLogWriter logger, InternalLogWriter securityLogger, InetAddress bindAddress,
-      Properties dsProperties, String hostnameForClients) throws IOException {
-    return startLocator(port, logFile, stateFile, logger, securityLogger, bindAddress, true,
-        dsProperties, hostnameForClients);
-  }
-
-  /**
-    return startLocator(locatorPort, logFile, stateFile, logger, logger1, addr, dsProperties, s);
+    return startLocator(locatorPort, logFile, stateFile, logger, logger1, addr, true, dsProperties,
+        s);

MOV8 INS21 INS21 INS21 INS21 MOV41 INS9 INS32 INS32 INS32 INS32 INS27 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS27 MOV32 INS42 INS33 DEL42 DEL32 DEL25 DEL8 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL66 DEL65 DEL29 DEL83 DEL83 DEL42 DEL43 DEL42 DEL39 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL9 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31