Fixing contents of partially written files

I added some tests of partially written files. The tests write to an
output stream but don't close it, which mimics a partially written file
because of the way the code works - it doesn't save the changes to the
File object until OutputStream is closed.

I found that the metadata was inconsistent with the file contents for
partially written files. I fixed that by deleting any chunks past the
reported length of the file.

-  final int chunkSize = 1_000_000;
+  static final int CHUNK_SIZE = 1024 * 1024; //1 MB
+    
+    //The file's metadata indicates that this chunk shouldn't
+    //exist. Purge all of the chunks that are larger than the file metadata
+    if(id >= file.chunks) {
+      while(chunkRegion.containsKey(key)) {
+        chunkRegion.remove(key);
+        key.chunkId++;
+      }
+      
+      return null;
+    }
+    

INS83 UPD42 INS27 INS25 INS34 INS34 INS27 INS8 INS42 INS40 INS61 INS41 INS32 INS8 INS33 INS42 INS42 INS42 INS21 INS21 INS32 INS37 INS42 INS42 INS42 INS40 DEL34