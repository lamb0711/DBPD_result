GEODE-3520: isValid API made public

	* In case an index update corrupts the index, the index will be marked invalid
	* Queries will not use that index while executing queries.
	* The API isValid had been made public so that users can find out if the index ia valid or not
	* A new field has been added to the list index gfsh command which shows the isValid flag.
	* If while loading the data index during its creation and it causes an exception, the index creation will fail.

-            if (((AbstractIndex) index).isPopulated() && index.getType() != IndexType.PRIMARY_KEY) {
+            if (index.isValid() && ((AbstractIndex) index).isPopulated()
+                && index.getType() != IndexType.PRIMARY_KEY) {
-
-                index.addIndexMapping(entry);
-
+                addIndexMapping(entry, index);
-              index.addIndexMapping(entry);
+              addIndexMapping(entry, index);
+  private void addIndexMapping(RegionEntry entry, IndexProtocol index) throws IMQException {
+    try {
+      index.addIndexMapping(entry);
+    } catch (Exception exception) {
+      index.markValid(false);
+      setPRIndexAsInvalid((AbstractIndex) index);
+      logger.warn("Put operation for the entry corrupted the index : "
+          + ((AbstractIndex) index).indexName + " with the exception : \n " + exception);
+    }
+  }
+
+  private void setPRIndexAsInvalid(AbstractIndex index) {
+    if (index.prIndex != null) {
+      AbstractIndex prIndex = (AbstractIndex) index.prIndex;
+      prIndex.markValid(false);
+    }
+  }
+
