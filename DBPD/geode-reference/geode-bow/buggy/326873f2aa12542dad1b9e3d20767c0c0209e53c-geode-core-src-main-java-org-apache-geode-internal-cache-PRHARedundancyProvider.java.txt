GEODE-6517: Fix a race by counting down the latch. (#3297)



+
-    allBucketsRecoveredFromDisk = new CountDownLatch(proxyBucketArray.length);
-    try {
-      if (proxyBucketArray.length > 0) {
-        this.redundancyLogger = new RedundancyLogger(this);
-        Thread loggingThread = new LoggingThread(
-            "RedundancyLogger for region " + this.prRegion.getName(), false, this.redundancyLogger);
-        loggingThread.start();
-      }
-    } catch (RuntimeException e) {
-      allBucketsRecoveredFromDisk = null;
-      throw e;
-    }
+    startRedundancyLogger(proxyBucketArray.length);
+    allBucketsRecoveredFromDisk = new CountDownLatch(proxyBucketArray.length);
+  void startRedundancyLogger(int proxyBuckets) {
+    if (proxyBuckets > 0) {
+      redundancyLogger = new RedundancyLogger(this);
+      Thread loggingThread = new LoggingThread(
+          "RedundancyLogger for region " + this.prRegion.getName(), false, this.redundancyLogger);
+      loggingThread.start();
+    }
+  }
+
