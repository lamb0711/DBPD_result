GEODE-2267: Enhance server/locator startup rules to include workingDir

+import static org.apache.geode.distributed.ConfigurationProperties.LOG_FILE;
+import static org.apache.geode.distributed.ConfigurationProperties.NAME;
-import org.awaitility.Awaitility;
+import org.apache.commons.io.FileUtils;
+import org.awaitility.Awaitility;
+import java.io.File;
+import java.nio.file.Files;
-  private Properties properties;
+  private File workingDir;
+  private String oldUserDir;
-  public LocatorStarterRule(Properties properties) {
-    this.properties = properties;
+  public LocatorStarterRule(File workingDir) {
+    this.workingDir = workingDir.getAbsoluteFile();
-  public void startLocator() throws Exception {
+  @Override
+  protected void before() throws Exception {
+    oldUserDir = System.getProperty("user.dir");
+    if (workingDir == null) {
+      workingDir = Files.createTempDirectory("locator").toAbsolutePath().toFile();
+    }
+    System.setProperty("user.dir", workingDir.toString());
+  }
+
+  @Override
+  protected void after() {
+    if (locator != null) {
+      locator.stop();
+    }
+    FileUtils.deleteQuietly(workingDir);
+    if (oldUserDir == null) {
+      System.clearProperty("user.dir");
+    } else {
+      System.setProperty("user.dir", oldUserDir);
+    }
+  }
+
+
+  public org.apache.geode.test.dunit.rules.Locator startLocator() throws Exception {
+    return startLocator(new Properties());
+  }
+
+  public org.apache.geode.test.dunit.rules.Locator startLocator(Properties properties)
+      throws Exception {
-    startLocator(properties);
-  }
+    if (!properties.containsKey(NAME)) {
+      properties.setProperty(NAME, "locator");
+    }
-  public void startLocator(Properties properties) throws Exception {
+    String name = properties.getProperty(NAME);
+    if (!properties.containsKey(LOG_FILE)) {
+      properties.setProperty(LOG_FILE, new File(name + ".log").getAbsolutePath());
+    }
+
-  }
-
-  @Override
-  protected void before() throws Throwable {
-    if (properties != null)
-      startLocator(properties);
-  }
-
-  @Override
-  protected void after() {
-    if (locator != null) {
-      locator.stop();
-    }
+    return new org.apache.geode.test.dunit.rules.Locator(locatorPort, workingDir, name);
