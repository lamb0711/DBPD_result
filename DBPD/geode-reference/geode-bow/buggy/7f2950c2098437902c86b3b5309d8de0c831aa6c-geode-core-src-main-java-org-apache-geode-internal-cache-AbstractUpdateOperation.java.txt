GEODE-3967: fix the offheap memory leak in serial gateway sender's unprocessedEvents.

When ConcurrentCacheModificationException happened, GatewaySenderEventImpl
should save the status and notify gatewaysender if it hold primary queue,
because other member might have put the event into the secondary queue

Let event with CME only enqueue to primary, but not to dispatch. The old
logic does not allow CME event to  enqueue. This is wrong, because an event
without CME might have been added into the secondary queue.

We should not dispatch the CME event, otherwise it will cause remote site
data inconsistency since these CME events are misordered.

So we should enqueue it, but not to dispatch.

Also add rollingUpgradeTests

+  private static boolean checkIfToUpdateAfterCreateFailed(LocalRegion rgn, EntryEventImpl ev) {
+    // Try to create is failed due to found the entry exist, double check if should update
+    boolean doUpdate = true;
+    if (ev.oldValueIsDestroyedToken()) {
+      if (rgn.getVersionVector() != null && ev.getVersionTag() != null) {
+        rgn.getVersionVector().recordVersion(
+            (InternalDistributedMember) ev.getDistributedMember(), ev.getVersionTag());
+      }
+      doUpdate = false;
+    }
+    if (ev.isConcurrencyConflict()) {
+      if (logger.isDebugEnabled()) {
+        logger.debug("basicUpdate failed with CME, not to retry:" + ev);
+      }
+      doUpdate = false;
+    }
+    return doUpdate;
+  }
+
-            if (ev.oldValueIsDestroyedToken()) {
-              if (rgn.getVersionVector() != null && ev.getVersionTag() != null) {
-                rgn.getVersionVector().recordVersion(
-                    (InternalDistributedMember) ev.getDistributedMember(), ev.getVersionTag());
-              }
-              doUpdate = false;
-            }
+            doUpdate = checkIfToUpdateAfterCreateFailed(rgn, ev);
-                rgn.basicUpdate(ev, true /* ifNew */, false/* ifOld */, lastMod,
+                rgn.basicUpdate(ev, false /* ifNew */, false/* ifOld */, lastMod,
