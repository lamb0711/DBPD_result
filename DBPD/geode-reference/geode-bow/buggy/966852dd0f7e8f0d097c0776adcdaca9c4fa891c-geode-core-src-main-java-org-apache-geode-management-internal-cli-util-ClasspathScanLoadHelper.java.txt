GEODE-5619: Change scanning for XSDRootElement to consider all packagâ€¦ (#2361)



+import java.util.regex.Pattern;
+import io.github.classgraph.utils.WhiteBlackList;
-        .filter(ci -> Arrays.stream(onlyFromPackages).anyMatch(p -> ci.getName().startsWith(p)));
+        .filter(ci -> Arrays.stream(onlyFromPackages)
+            .anyMatch(p -> classMatchesPackage(ci.getName(), p)));
-        .filter(ci -> Arrays.stream(onlyFromPackages).anyMatch(p -> ci.getName().startsWith(p)));
+        .filter(ci -> Arrays.stream(onlyFromPackages)
+            .anyMatch(p -> classMatchesPackage(ci.getName(), p)));
+  private boolean classMatchesPackage(String className, String packageSpec) {
+    if (!packageSpec.contains("*")) {
+      return className.startsWith(packageSpec);
+    }
+
+    Pattern globPattern = WhiteBlackList.globToPattern(packageSpec);
+    return globPattern.matcher(className).matches();
+  }
+
