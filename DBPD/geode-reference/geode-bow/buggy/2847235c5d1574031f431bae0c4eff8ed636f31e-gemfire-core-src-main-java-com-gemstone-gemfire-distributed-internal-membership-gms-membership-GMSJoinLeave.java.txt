GEODE-77: send Remove messages to members that are kicked out during view installation

This also changes view preparation to only attempt to prepare the view once.
If the initial preparation fails we create the new view kicking out
unresponsive members and just send it out, along with the Remove messages.

-
+  
+  /** a test hook to make this member unresponsive */
+  private volatile boolean playingDead;
+  
-    if (m.getView().contains(m.getView().getCreator())) {
+    if (!playingDead && m.getView().contains(m.getView().getCreator())) {
-          // TODO we don't want to give up on the locators if we receive
-          // a response from a locator that's joined the system.  Otherwise
-          // we'll give up and cause a split-brain
+              logger.debug("Locator's address indicates it is part of a distributed system "
+                  + "so I will not become membership coordinator on this attempt to join");
-      if (logger.isInfoEnabled() && !newView.getCreator().equals(localAddress)) { // view-creator logs this
+      if (logger.isInfoEnabled()
+          && newView.getCreator().equals(localAddress)) { // view-creator logs this
+    playingDead = true;
+    playingDead = false;
+          int size = failures.size();
+          List<String> reasons = new ArrayList<>(size);
+          for (int i=0; i<size; i++) {
+            reasons.add("Failed to acknowledge a new membership view and then failed tcp/ip connection attempt");
+          }
+          sendRemoveMessages(failures, reasons, newView);
+        
+        // if there is no conflicting view then we can count
+        // the current state as being prepared.  All members
+        // who are going to ack have already done so or passed
+        // a liveness test
+        if (conflictingView == null) {
+          prepared = true;
+        }
+        
