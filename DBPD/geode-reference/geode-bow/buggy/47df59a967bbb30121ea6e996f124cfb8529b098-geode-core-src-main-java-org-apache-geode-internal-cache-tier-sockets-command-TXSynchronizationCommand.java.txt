GEODE-4142: save commit message for failover after jta commit (#1324)

* GEODE-4142: save commit message for failover after jta commit.

  check if the jta has completed before retrying the beforeCompeltion and afterCompletion in failover cases.

+import org.apache.geode.internal.cache.TXId;
-
+    final boolean isDebugEnabled = logger.isDebugEnabled();
+    final TXId txId = txProxy.getTxId();
+    TXCommitMessage commitMessage = txMgr.getRecentlyCompletedMessage(txId);
+    if (commitMessage != null && commitMessage != TXCommitMessage.ROLLBACK_MSG) {
+      assert type == CompletionType.AFTER_COMPLETION;
+      try {
+        CommitCommand.writeCommitResponse(commitMessage, clientMessage, serverConnection);
+      } catch (IOException e) {
+        if (isDebugEnabled) {
+          logger.debug("Problem writing reply to client", e);
+        }
+      } catch (RuntimeException e) {
+        try {
+          writeException(clientMessage, e, false, serverConnection);
+        } catch (IOException ioe) {
+          if (isDebugEnabled) {
+            logger.debug("Problem writing reply to client", ioe);
+          }
+        }
+      }
+      serverConnection.setAsTrue(RESPONDED);
+      return;
+    }
+
-      final boolean isDebugEnabled = logger.isDebugEnabled();
