GEODE-2928: get rid of the isGfshVM static variable

* consolidate the availability indicators
* remove the isGfshVM and isGfshVM() method
* enhance the MultiStepCommand to include info on shellOnly commands to enhance command validation
* remove the SUPPORT_MULTIPLE_GFSH static flag and properly remove the gfsh instance at the end of each test

+import org.apache.commons.lang.StringUtils;
+import org.apache.geode.management.internal.cli.multistep.MultiStepCommand;
+import java.util.Arrays;
-      if (!isShellOnly(method)) {
+      if (!isShellOnly(method, gfshParseResult)) {
-  private boolean isShellOnly(Method method) {
+  private boolean isShellOnly(Method method, GfshParseResult result) {
-    return cliMetadata != null && cliMetadata.shellOnly();
+    if (cliMetadata == null) {
+      return false;
+    }
+    if (cliMetadata.shellOnly()) {
+      return true;
+    }
+    MultiStepCommand stepCommand = method.getAnnotation(MultiStepCommand.class);
+    if (stepCommand == null) {
+      return false;
+    }
+    String step = result.getParamValue(MultiStepCommand.STEP_PARAMETER_NAME);
+    if (StringUtils.isBlank(step)) {
+      return false;
+    }
+    if (Arrays.asList(stepCommand.shellOnlyStep()).contains(step)) {
+      return true;
+    }
+    return false;
