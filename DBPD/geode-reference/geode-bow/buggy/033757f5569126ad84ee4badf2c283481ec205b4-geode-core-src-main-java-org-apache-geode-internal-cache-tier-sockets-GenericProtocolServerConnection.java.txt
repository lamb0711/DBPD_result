GEODE-3751: a single place for client protocol loading, logic.

* Load a single service, `ClientProtocolService`.
  - (well, authenticators are still separate).
* Move several interfaces to `geode-protobuf` from core.
* Client protocol state and statistics are now stored on the new
  `ClientProtocolPipeline` interface. This will allow us to keep
  connection logic for core separated from protocol logic.
* implement pipelines for Cache and Locator.
* some other small fixes and changes.

Signed-off-by: Galen O'Sullivan <gosullivan@pivotal.io>

This closes #873

Signed-off-by: Brian Rowe <browe@pivotal.io>

+import org.apache.geode.cache.IncompatibleVersionException;
-import org.apache.geode.security.SecurityManager;
-import org.apache.geode.security.server.Authenticator;
-  private final ClientProtocolMessageHandler messageHandler;
-  private final SecurityManager securityManager;
-  private final Authenticator authenticator;
+  private final ClientProtocolProcessor protocolPipeline;
-      byte communicationMode, Acceptor acceptor, ClientProtocolMessageHandler newClientProtocol,
-      SecurityService securityService, Authenticator authenticator) {
+      byte communicationMode, Acceptor acceptor, ClientProtocolProcessor clientProtocolProcessor,
+      SecurityService securityService) {
-    securityManager = securityService.getSecurityManager();
-    this.messageHandler = newClientProtocol;
-    this.authenticator = authenticator;
-    this.messageHandler.getStatistics().clientConnected();
+    this.protocolPipeline = clientProtocolProcessor;
-      if (!authenticator.isAuthenticated()) {
-        authenticator.authenticate(inputStream, outputStream, securityManager);
-      } else {
-        messageHandler.receiveMessage(inputStream, outputStream, new MessageExecutionContext(
-            this.getCache(), authenticator.getAuthorizer(), messageHandler.getStatistics()));
-      }
+      protocolPipeline.processMessage(inputStream, outputStream);
-    } catch (IOException e) {
+    } catch (IOException | IncompatibleVersionException e) {
-        messageHandler.getStatistics().clientDisconnected();
+        protocolPipeline.close();
