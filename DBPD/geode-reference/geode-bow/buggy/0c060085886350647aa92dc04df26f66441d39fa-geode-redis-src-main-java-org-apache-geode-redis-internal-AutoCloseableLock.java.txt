GEODE-7828: Convert backing store for Redis Hashes and Sets to single regions (#4781)

* Revert "Revert "GEODE-7828: Convert backing store for Redis Hashes and Sets to single regions (#4745)" (#4780)"

This reverts commit f0982cdedf1b122f734919d0647434cca33ec254.

* Fix sporadic test failures for concurrent HSetNX
+ *
-package org.apache.geode.codeAnalysis;
+package org.apache.geode.redis.internal;
+import java.util.concurrent.locks.Lock;
-import org.apache.geode.redis.internal.GeodeRedisService;
+/**
+ * Created by gosullivan on 3/10/17.
+ */
+public class AutoCloseableLock implements AutoCloseable {
+  private final Lock lock;
+  private final ByteArrayWrapper key;
-public class AnalyzeRedisSerializablesJUnitTest extends AnalyzeSerializablesJUnitTestBase {
-
-  @Override
-  protected String getModuleName() {
-    return "geode-redis";
+  public AutoCloseableLock(ByteArrayWrapper key, Lock lock) {
+    this.key = key;
+    this.lock = lock;
-  protected Class getModuleClass() {
-    return GeodeRedisService.class;
+  public void close() {
+    lock.unlock();
