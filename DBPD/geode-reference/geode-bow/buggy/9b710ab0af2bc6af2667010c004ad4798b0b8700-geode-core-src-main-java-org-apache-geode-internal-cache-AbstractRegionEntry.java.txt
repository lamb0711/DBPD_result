GEODE-1885: Removed call to check readiness (region check) after the offheap region entry is released.

GEODE-1885: Missing subsctiption event with Offheap partitioned region during bucket rebalance.

During the trasaction commit on redundant bucket region, if the bucket region is moved, the call-back logic (to deliver subscription events) were not invoked due to check-readiness call with offheap region. The check-readiness throws exception, if the region is not found, which causes the code to return early without sending the subscription events.

In this scenario, calling check-readiness is not needed...

-    if (value != null && context != null && (this instanceof OffHeapRegionEntry) 
-        && context instanceof LocalRegion && ((LocalRegion)context).isThisRegionBeingClosedOrDestroyed()) {
-      ((OffHeapRegionEntry)this).release();
-      ((LocalRegion)context).checkReadiness();
-    }
+    releaseOffHeapRefIfRegionBeingClosedOrDestroyed(context, value);
+  public void releaseOffHeapRefIfRegionBeingClosedOrDestroyed(
+      RegionEntryContext context, Object ref) {
+    if (isOffHeapReference(ref) && isThisRegionBeingClosedOrDestroyed(context)) {
+      ((OffHeapRegionEntry)this).release();
+    }
+  }
+
+  private boolean isThisRegionBeingClosedOrDestroyed(RegionEntryContext context) {
+    return context instanceof LocalRegion
+        && ((LocalRegion)context).isThisRegionBeingClosedOrDestroyed();
+  }
+
+  private boolean isOffHeapReference(Object ref) {
+    return ref != Token.REMOVED_PHASE1 && this instanceof OffHeapRegionEntry
+        && ref instanceof StoredObject && ((StoredObject)ref).hasRefCount();
+  }
+
-              _setValue(prepareValueForCache(region, value, false));
-              if (value != null && region != null && (this instanceof OffHeapRegionEntry) && region.isThisRegionBeingClosedOrDestroyed()) {
-                ((OffHeapRegionEntry)this).release();
-                region.checkReadiness();
-              }
+                Object preparedValue = prepareValueForCache(region, value, false);
+                _setValue(preparedValue);
+                releaseOffHeapRefIfRegionBeingClosedOrDestroyed(region, preparedValue);
