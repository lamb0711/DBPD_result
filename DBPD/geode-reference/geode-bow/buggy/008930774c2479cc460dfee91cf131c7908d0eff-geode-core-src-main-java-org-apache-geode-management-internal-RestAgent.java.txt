GEODE-6492: Ensure that starting HttpService can fail gracefully in the face of errors (#3275)

- If the HttpService (or war deployment) fails, simply log a warning
  message and continue.
- Add a simple gradle building test which ensures that 'geode-core' is
  the only module required to start a basic Cache.



-
-      } catch (RuntimeException e) {
-        logger.debug(e.getMessage(), e);
+      } catch (Throwable e) {
+        logger.warn("Unable to start dev REST API: {}", e.toString());
-  public void startHttpService(InternalCache cache) {
+  public void startHttpService(InternalCache cache) throws Exception {
-    try {
-      // Check if we're already running inside Tomcat
-      if (isRunningInTomcat()) {
-        logger.warn(
-            "Detected presence of catalina system properties. HTTP service will not be started. To enable the GemFire Developer REST API, please deploy the /geode-web-api WAR file in your application server.");
-      } else if (agentUtil.isAnyWarFileAvailable(gemfireAPIWar)) {
+    // Check if we're already running inside Tomcat
+    if (isRunningInTomcat()) {
+      logger.warn(
+          "Detected presence of catalina system properties. HTTP service will not be started. To enable the GemFire Developer REST API, please deploy the /geode-web-api WAR file in your application server.");
+    } else if (agentUtil.isAnyWarFileAvailable(gemfireAPIWar)) {
-        Pair<String, Object> securityServiceAttr =
-            new ImmutablePair<>(HttpService.SECURITY_SERVICE_SERVLET_CONTEXT_PARAM,
-                securityService);
+      Pair<String, Object> securityServiceAttr =
+          new ImmutablePair<>(HttpService.SECURITY_SERVICE_SERVLET_CONTEXT_PARAM,
+              securityService);
-        HttpService httpService = cache.getHttpService();
-        httpService
-            .addWebApplication("/gemfire-api", gemfireAPIWar, securityServiceAttr);
+      if (cache.getHttpService().isPresent()) {
+        HttpService httpService = cache.getHttpService().get();
+        httpService.addWebApplication("/gemfire-api", gemfireAPIWar, securityServiceAttr);
+      } else {
+        logger.warn("HttpService is not available - could not start Dev REST API");
-    } catch (Exception e) {
-      throw new RuntimeException("HTTP service failed to start due to " + e.getMessage());
