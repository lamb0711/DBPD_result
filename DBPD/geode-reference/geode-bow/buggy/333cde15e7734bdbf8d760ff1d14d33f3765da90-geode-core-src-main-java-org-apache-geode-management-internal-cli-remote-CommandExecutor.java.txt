GEODE-5971: Refactor AlterAsycnEventQueueCommand to use SingleGfshCommand (#2854)

Co-authored-by: Jens Deppe <jdeppe@pivotal.io>
Co-authored-by: Kenneth Howe <khowe@pivotal.io>

+import static org.apache.geode.management.internal.cli.commands.AlterAsyncEventQueueCommand.GROUP_STATUS_SECTION;
+
+import java.util.Arrays;
+import java.util.List;
+import java.util.stream.Collectors;
+
+import org.apache.commons.lang3.StringUtils;
-import org.apache.geode.distributed.ConfigurationPersistenceService;
+import org.apache.geode.distributed.internal.InternalConfigurationPersistenceService;
+import org.apache.geode.management.cli.UpdateAllConfigurationGroupsMarker;
+import org.apache.geode.management.internal.cli.result.model.TabularResultModel;
+  protected Object callInvokeMethod(Object command, GfshParseResult parseResult) {
+    return ReflectionUtils.invokeMethod(parseResult.getMethod(), command,
+        parseResult.getArguments());
+  }
+
-    Object result =
-        ReflectionUtils.invokeMethod(parseResult.getMethod(), command, parseResult.getArguments());
+    Object result = callInvokeMethod(command, parseResult);
-    ConfigurationPersistenceService ccService = gfshCommand.getConfigurationPersistenceService();
+    InternalConfigurationPersistenceService ccService =
+        (InternalConfigurationPersistenceService) gfshCommand.getConfigurationPersistenceService();
+    List<String> groupsToUpdate;
-    if (groupInput == null) {
-      groupInput = "cluster";
+    TabularResultModel table = null;
+
+    if (!StringUtils.isBlank(groupInput)) {
+      groupsToUpdate = Arrays.asList(groupInput.split(","));
+    } else if (gfshCommand instanceof UpdateAllConfigurationGroupsMarker) {
+      groupsToUpdate = ccService.getGroups().stream().collect(Collectors.toList());
+      table = resultModel.addTable(GROUP_STATUS_SECTION);
+      table.setColumnHeader("Group", "Status");
+    } else {
+      groupsToUpdate = Arrays.asList("cluster");
-    String[] groups = groupInput.split(",");
-    for (String group : groups) {
+
+    final TabularResultModel finalTable = table;
+    for (String group : groupsToUpdate) {
-          gfshCommand.updateClusterConfig(group, cc, resultModel.getConfigObject());
-          infoResultModel
-              .addLine("Changes to configuration for group '" + group + "' are persisted.");
+          if (gfshCommand.updateConfigForGroup(group, cc, resultModel.getConfigObject())) {
+            if (finalTable != null) {
+              finalTable.addRow(group, "Cluster Configuration Updated");
+            } else {
+              infoResultModel
+                  .addLine("Changes to configuration for group '" + group + "' are persisted.");
+            }
+          } else {
+            if (finalTable != null) {
+              finalTable.addRow(group, "Cluster Configuration not updated");
+
+            } else {
+              infoResultModel
+                  .addLine("No changes were made to the configuration for group '" + group + "'");
+            }
+          }
+
