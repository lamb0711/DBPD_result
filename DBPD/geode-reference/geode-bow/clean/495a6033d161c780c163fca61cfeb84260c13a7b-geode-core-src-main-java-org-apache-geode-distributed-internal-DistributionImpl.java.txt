GEODE-7653: move required settings to MembershipBuilder constructor (#4578)



+import org.apache.geode.distributed.internal.tcpserver.TcpSocketCreator;
-      membership = MembershipBuilder.<InternalDistributedMember>newMembershipBuilder()
+      final TcpClient locatorClient = new TcpClient(
+          asTcpSocketCreator(
+              SocketCreatorFactory
+                  .getSocketCreatorForComponent(SecurableCommunicationChannel.LOCATOR)),
+          InternalDataSerializer.getDSFIDSerializer().getObjectSerializer(),
+          InternalDataSerializer.getDSFIDSerializer().getObjectDeserializer());
+      final TcpSocketCreator socketCreator = asTcpSocketCreator(SocketCreatorFactory
+          .getSocketCreatorForComponent(SecurableCommunicationChannel.CLUSTER));
+      membership = MembershipBuilder.<InternalDistributedMember>newMembershipBuilder(
+          socketCreator,
+          locatorClient,
+          InternalDataSerializer.getDSFIDSerializer(),
+          new ClusterDistributionManager.ClusterDistributionManagerIDFactory())
-          .setSerializer(InternalDataSerializer.getDSFIDSerializer())
-          .setMemberIDFactory(new ClusterDistributionManager.ClusterDistributionManagerIDFactory())
-          .setLocatorClient(new TcpClient(
-              asTcpSocketCreator(
-                  SocketCreatorFactory
-                      .getSocketCreatorForComponent(SecurableCommunicationChannel.LOCATOR)),
-              InternalDataSerializer.getDSFIDSerializer().getObjectSerializer(),
-              InternalDataSerializer.getDSFIDSerializer().getObjectDeserializer()))
-          .setSocketCreator(asTcpSocketCreator(SocketCreatorFactory
-              .getSocketCreatorForComponent(SecurableCommunicationChannel.CLUSTER)))
