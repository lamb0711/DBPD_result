Merge branch 'develop' into feature/GEODE-7049

+import static org.apache.geode.internal.net.SSLConfigurationFactory.GEODE_SSL_CONFIG_PROPERTIES;
+
+import java.io.StringReader;
+import java.util.Properties;
+import org.apache.geode.internal.admin.SSLConfig;
+import org.apache.geode.internal.net.SSLConfigurationFactory;
+
+      return socketCreator.connectForClient(host, port, 0);
-      /*
-       * In the context of a gfsh VM the javax.net.ssl properties are used to configure SSL
-       * appropriately - see the constructor for JMXOperationInvoker.
-       */
-      return defaultFactory.createSocket(host, port);
+      try {
+        // In gfsh the ssl config is stored within the GEODE_SSL_CONFIG_PROPERTIES system property.
+        // See the constructor for JMXOperationInvoker.
+        Properties gfProperties = new Properties();
+        gfProperties.load(new StringReader(System.getProperty(GEODE_SSL_CONFIG_PROPERTIES)));
+        SSLConfig sslConfig = SSLConfigurationFactory
+            .getSSLConfigForComponent(gfProperties, SecurableCommunicationChannel.JMX);
+        socketCreator = new SocketCreator(sslConfig);
+        return socketCreator.connectForClient(host, port, 0);
+      } catch (Exception finalException) {
+        // Back off and use the default factory (javax.net.ssl properties are used to configure
+        // SSL).
+        return defaultFactory.createSocket(host, port);
+      }
-
-    return socketCreator.connectForClient(host, port, 0);
-
