Revert "GEODE-2632: use immutable SecurityService impls to improve performance"

This reverts commit 5eca6f0393c1a05804a4c4b7f97203ee2ec226a2.

-import org.apache.geode.internal.security.CallbackInstantiator;
-import org.apache.geode.internal.security.Credentials;
+import org.apache.geode.internal.security.IntegratedSecurityService;
-import org.apache.geode.internal.security.SecurityServiceFactory;
-  private final SecurityService securityService;
+  private static SecurityService securityService = IntegratedSecurityService.getSecurityService();
-    this.securityService = SecurityServiceFactory.create();
-      byte communicationMode, SecurityService securityService)
-      throws IOException, AuthenticationRequiredException {
-
+      byte communicationMode) throws IOException, AuthenticationRequiredException {
-    this.securityService = securityService;
-
-    {
+    // SocketChannel sc = sock.getChannel();
+    /*
+     * if (sc != null) { } else
+     */ {
-            this.credentials = readCredentials(dis, dos, sys, this.securityService);
+            this.credentials = readCredentials(dis, dos, sys);
-    this.securityService = SecurityServiceFactory.create();
-    this.securityService = handShake.securityService;
-    if ((dhSKAlgo != null
-        && dhSKAlgo.length() > 0) /* || securityService.isClientSecurityRequired() */) {
+    if ((dhSKAlgo != null && dhSKAlgo.length() > 0) || securityService.isClientSecurityRequired()) {
-      return Credentials.getCredentials(securityProperties);
+      return SecurityService.getCredentials(securityProperties);
-      AuthInitialize auth =
-          CallbackInstantiator.getObjectOfType(authInitMethod, AuthInitialize.class);
+      AuthInitialize auth = SecurityService.getObjectOfType(authInitMethod, AuthInitialize.class);
-      DistributedSystem system, SecurityService securityService)
-      throws GemFireSecurityException, IOException {
+      DistributedSystem system) throws GemFireSecurityException, IOException {
-      InternalLogWriter securityLogWriter, DistributedMember member,
-      SecurityService securityService)
+      InternalLogWriter securityLogWriter, DistributedMember member)
-        (InternalLogWriter) this.system.getSecurityLogWriter(), this.id.getDistributedMember(),
-        this.securityService);
+        (InternalLogWriter) this.system.getSecurityLogWriter(), this.id.getDistributedMember());
-    Properties peerWanProps = readCredentials(dis, dos, this.system, this.securityService);
+    Properties peerWanProps = readCredentials(dis, dos, this.system);
-        (InternalLogWriter) this.system.getSecurityLogWriter(), member, this.securityService);
+        (InternalLogWriter) this.system.getSecurityLogWriter(), member);
