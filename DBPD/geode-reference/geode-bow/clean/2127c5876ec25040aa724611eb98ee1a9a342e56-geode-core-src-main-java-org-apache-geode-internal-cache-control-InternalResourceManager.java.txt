ServerLauncher.start() waits for startup tasks to complete

- Extract ControllableProcess interface
- Improve testability of ServerLauncher

Co-authored-by: Aaron Lindsey <alindsey@pivotal.io>
Co-authored-by: Kirk Lund <klund@apache.org>
Co-authored-by: Dale Emery <demery@pivotal.io>

-  public void runWhenStartupTasksComplete(Runnable runnable, Consumer<Throwable> exceptionAction) {
-    CompletableFuture.allOf(startupTasks.toArray(new CompletableFuture[0]))
-        .thenRun(runnable)
-        .exceptionally((throwable) -> {
-          exceptionAction.accept(throwable);
-          return null;
-        });
+  // TODO Aaron rename and remove parameters
+  public CompletableFuture<Void> runWhenStartupTasksComplete(Runnable runnable,
+      Consumer<Throwable> exceptionAction) {
+    CompletableFuture<Void> startupTasksCompleted =
+        CompletableFuture.allOf(startupTasks.toArray(new CompletableFuture[0]))
+            .thenRun(runnable)
+            .exceptionally((throwable) -> {
+              exceptionAction.accept(throwable);
+              return null;
+            });
+
+    return startupTasksCompleted;
