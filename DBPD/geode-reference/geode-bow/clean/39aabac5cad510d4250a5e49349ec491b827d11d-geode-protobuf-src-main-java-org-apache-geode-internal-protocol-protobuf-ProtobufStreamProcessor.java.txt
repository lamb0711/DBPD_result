Merge remote-tracking branch 'origin/develop' into feature/GEODE-3239

-package org.apache.geode.protocol.protobuf;
+package org.apache.geode.internal.protocol.protobuf;
+import org.apache.logging.log4j.Logger;
+
-import org.apache.geode.protocol.exception.InvalidProtocolMessageException;
-import org.apache.geode.internal.protocol.protobuf.ClientProtocol;
-import org.apache.geode.protocol.protobuf.registry.OperationContextRegistry;
-import org.apache.geode.protocol.protobuf.serializer.ProtobufProtocolSerializer;
-import org.apache.geode.protocol.protobuf.utilities.ProtobufUtilities;
-import org.apache.geode.serialization.registry.exception.CodecAlreadyRegisteredForTypeException;
+import org.apache.geode.internal.logging.LogService;
+import org.apache.geode.internal.protocol.exception.InvalidProtocolMessageException;
+import org.apache.geode.internal.protocol.protobuf.registry.OperationContextRegistry;
+import org.apache.geode.internal.protocol.protobuf.serializer.ProtobufProtocolSerializer;
+import org.apache.geode.internal.protocol.protobuf.statistics.ProtobufClientStatistics;
+import org.apache.geode.internal.protocol.protobuf.utilities.ProtobufUtilities;
+  private static final Logger logger = LogService.getLogger();
-  public ProtobufStreamProcessor() throws CodecAlreadyRegisteredForTypeException {
+  public ProtobufStreamProcessor() {
-      throw new EOFException("Tried to deserialize protobuf message at EOF");
+      String errorMessage = "Tried to deserialize protobuf message at EOF";
+      logger.debug(errorMessage);
+      throw new EOFException(errorMessage);
+    ProtobufClientStatistics statistics = executionContext.getStatistics();
+    statistics.messageReceived(message.getSerializedSize());
-    ClientProtocol.MessageHeader responseHeader =
-        ProtobufUtilities.createMessageHeaderForRequest(message);
-    ClientProtocol.Message responseMessage =
-        ProtobufUtilities.createProtobufResponse(responseHeader, response);
+    ClientProtocol.Message responseMessage = ProtobufUtilities.createProtobufResponse(response);
+    statistics.messageSent(responseMessage.getSerializedSize());
