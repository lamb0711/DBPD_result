Merge branch 'release/1.5.0'

+import org.apache.geode.internal.cache.tier.ClientSideHandshake;
-import org.apache.geode.internal.cache.tier.sockets.HandShake;
-  private HandShake handShake;
+  private ClientSideHandshake handshake;
-      HandShake handShake, int socketBufferSize, int handShakeTimeout, int readTimeout,
+      ClientSideHandshake handshake, int socketBufferSize, int handshakeTimeout, int readTimeout,
-    theSocket = sc.connectForClient(location.getHostName(), location.getPort(), handShakeTimeout,
+    theSocket = sc.connectForClient(location.getHostName(), location.getPort(), handshakeTimeout,
-    // System.out.println("ConnectionImpl setting buffer sizes: " +
-    // socketBufferSize);
-    theSocket.setSoTimeout(handShakeTimeout);
+    theSocket.setSoTimeout(handshakeTimeout);
-    this.status = handShake.handshakeWithServer(this, location, communicationMode);
+    this.status = handshake.handshakeWithServer(this, location, communicationMode);
-    // logger.warning("ESTABLISHING ENDPOINT:"+location+" MEMBERID:"+endpoint.getMemberId(),new
-    // Exception());
-  protected HandShake getHandShake() {
-    return handShake;
+  protected byte[] encryptBytes(byte[] messageBytes) throws Exception {
+    return handshake.getEncryptor().encryptBytes(messageBytes);
-  protected void setHandShake(HandShake handShake) {
-    this.handShake = handShake;
+  protected byte[] decryptBytes(byte[] messageBytes) throws Exception {
+    return handshake.getEncryptor().decryptBytes(messageBytes);
+  }
+
+  protected void setHandshake(ClientSideHandshake handshake) {
+    this.handshake = handshake;
