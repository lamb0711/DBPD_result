GEODE-967: Changed to serialize substitute value only if necessary

+      rawValue = this.substituteValue;
+    }
+    if (rawValue == null) {
+      result = this.substituteValue;
+      if (result == null) {
+      }
-// TODO OFFHEAP MERGE: handle substituteValue here?
+        } else if (this.substituteValue != null) {
+          // If the substitute value is set, return it.
+          return this.substituteValue;
-// TODO OFFHEAP MERGE: handle substituteValue here?
+    if (v == null) {
+      v = this.substituteValue;
+    }
+      if (this.substituteValue != null) {
+        // The substitute value is set. Serialize it
+        isSerializingValue.set(Boolean.TRUE);
+        result = EntryEventImpl.serialize(this.substituteValue);
+        isSerializingValue.set(Boolean.FALSE);
+        return result;
+      }
+            isSerializingValue.set(Boolean.TRUE);
+            isSerializingValue.set(Boolean.FALSE);
-        // The substituteValue represents null. Set the value to null.
+        // The substituteValue represents null. Set the value and substituteValue to null.
+        this.substituteValue = null;
-        // The substituteValue is an object. Serialize it.
-        isSerializingValue.set(Boolean.TRUE);
-        this.value = CacheServerHelper.serialize(this.substituteValue);
-        isSerializingValue.set(Boolean.FALSE);
-        event.setCachedSerializedNewValue(this.value);
+        // The substituteValue is an object. Leave it as is.
+      if (this.substituteValue != null) {
+        return sizeOf(this.substituteValue);
+      } else {
+      }
-    if (this.value != null) {
+    if (this.value != null || this.substituteValue != null) {
