GEODE:6784 Added unit tests to classes in the tomcat module (#4061)

Co-authored-by: Benjamin Ross <bross@pivotal.io>
Co-authored-by: Donal Evans <doevans@pivotal.io>
-      if (SecurityUtil.isPackageProtectionEnabled()) {
+      if (isPackageProtectionEnabled()) {
-        facade = (DeltaSessionFacade) AccessController.doPrivileged(
-            (PrivilegedAction) () -> new DeltaSessionFacade(fsession));
+        facade = getNewFacade(fsession);
-  private boolean isCommitEnabled() {
+  boolean isCommitEnabled() {
+
+
+
+  Object getAttributeWithoutDeserialize(String name) {
+    return super.getAttribute(name);
+  }
+
-    this.eventQueue.add(event);
+    addEventToEventQueue(event);
-      // Don't use this.getAttribute() because we don't want to deserialize the value.
-      Object value = super.getAttribute(attributeNames.nextElement());
+      // Don't use getAttribute() because we don't want to deserialize the value.
+      Object value = getAttributeWithoutDeserialize(attributeNames.nextElement());
-  private byte[] serialize(Object obj) {
+  byte[] serialize(Object obj) {
-      serializedValue = BlobHelper.serializeToBlob(obj);
+      serializedValue = serializeViaBlobHelper(obj);
+  byte[] serializeViaBlobHelper(Object obj) throws IOException {
+    return BlobHelper.serializeToBlob(obj);
+  }
+
+
+
+  // Helper methods to enable better unit testing
+  DeltaSessionFacade getNewFacade(DeltaSessionInterface fSession) {
+    return (DeltaSessionFacade) AccessController.doPrivileged(
+        (PrivilegedAction) () -> new DeltaSessionFacade(fSession));
+  }
+
+  boolean isPackageProtectionEnabled() {
+    return SecurityUtil.isPackageProtectionEnabled();
+  }
+
+  void addEventToEventQueue(DeltaSessionAttributeEvent event) {
+    eventQueue.add(event);
+  }
