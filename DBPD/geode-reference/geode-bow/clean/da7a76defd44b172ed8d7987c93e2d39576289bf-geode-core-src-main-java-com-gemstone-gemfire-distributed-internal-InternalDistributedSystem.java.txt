Merge branch 'develop' into feature/GEODE-17-2

+import java.lang.reflect.Method;
+import com.gemstone.gemfire.internal.OSProcess;
-import com.gemstone.gemfire.internal.cache.CacheServerImpl;
+import com.gemstone.gemfire.internal.cache.CacheServerImpl;
-    this.offHeapStore = OffHeapStorage.createOffHeapStorage(getLogWriter(), this, offHeapMemorySize, this);
+    this.offHeapStore = OffHeapStorage.createOffHeapStorage(this, offHeapMemorySize, this);
+      if (sampler.isSamplingEnabled()) {
+        if (sampler.getStatSamplerStats().getJvmPauses() > 0) {
+          try {
+            // if running tests then create a heap dump
+            Class.forName("com.gemstone.gemfire.test.dunit.standalone.DUnitLauncher");
+            Class<?> jmapClass = Class.forName("sun.tools.jmap.JMap");
+            logger.info("This member of the distributed system has been forced to disconnect.  JVM pauses have been detected - dumping heap");
+            String pid = String.valueOf(OSProcess.getId());
+            String fileName = "java"+pid+".hprof";
+            Object parameters = new String[]{"-dump:format=b,file="+fileName, pid};
+            Method main = jmapClass.getDeclaredMethod("main", String[].class);
+            main.invoke(null, parameters);
+          } catch (Exception e) {
+          }
+        }
+      }
