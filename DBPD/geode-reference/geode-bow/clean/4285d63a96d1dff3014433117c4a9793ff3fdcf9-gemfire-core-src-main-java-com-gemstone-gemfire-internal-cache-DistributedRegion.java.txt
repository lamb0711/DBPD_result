GEODE-774

When wan event was retried, the version tag might not be created.
Do not distribute such event.

Also add a unit test for the fix.

-        distributeUpdate(event, lastModified, ifNew, ifOld, expectedOldValue, requireOldValue);
-        event.invokeCallbacks(this,true, true);
+        if (!getConcurrencyChecksEnabled() || event.hasValidVersionTag()) {
+          distributeUpdate(event, lastModified, ifNew, ifOld, expectedOldValue, requireOldValue);
+          event.invokeCallbacks(this,true, true);
+        }
-        distributeDestroy(event, expectedOldValue);
-        event.invokeCallbacks(this,true, false);
+        if (!getConcurrencyChecksEnabled() || event.hasValidVersionTag()) {
+          distributeDestroy(event, expectedOldValue);
+          event.invokeCallbacks(this,true, false);
+        }
-        distributeInvalidate(event);
-        event.invokeCallbacks(this,true, false);
+    	if (!getConcurrencyChecksEnabled() || event.hasValidVersionTag()) {
+          distributeInvalidate(event);
+          event.invokeCallbacks(this,true, false);
+    	}
-      distributeUpdateEntryVersion(event);
+      if (!getConcurrencyChecksEnabled() || event.hasValidVersionTag()) {
+        distributeUpdateEntryVersion(event);
+      }
