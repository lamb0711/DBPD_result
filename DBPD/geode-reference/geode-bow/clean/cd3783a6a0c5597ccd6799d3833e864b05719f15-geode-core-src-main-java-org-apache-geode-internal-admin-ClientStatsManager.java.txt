GEODE-5493: fix publication of client statistics

Fix publication of client statistics with security enabled. Remove dead
code related to retrieving old statistics that never worked. Add test
for fix.

Signed-off-by: Dan Smith <dsmith@pivotal.io>

-import java.util.Map.Entry;
+import org.apache.logging.log4j.Logger;
-import org.apache.geode.cache.Region;
-import org.apache.geode.i18n.LogWriterI18n;
+import org.apache.geode.internal.logging.LogService;
+  private static final Logger logger = LogService.getLogger();
+
-    LogWriterI18n logger = currentCache.getLoggerI18n();
-    if (logger.fineEnabled())
-      logger.fine("Entering ClientStatsManager#publishClientStats...");
+    if (logger.isDebugEnabled()) {
+      logger.debug("Entering ClientStatsManager#publishClientStats...");
+    }
-      logger.warning(
+      logger.warn(
-    if (logger.fineEnabled()) {
-      logger.fine("Exiting ClientStatsManager#publishClientStats.");
+    if (logger.isDebugEnabled()) {
+      logger.debug("Exiting ClientStatsManager#publishClientStats.");
-    LogWriterI18n logger = currentCache.getLoggerI18n();
+
-      if (logger.infoEnabled()) {
+      if (logger.isInfoEnabled()) {
-      logger.warning(LocalizedStrings.ClientStatsManager_CLIENTSTATSMANAGER_0_ARE_NOT_AVAILABLE,
-          "CachePerfStats");
+      logger.warn(LocalizedStrings.ClientStatsManager_CLIENTSTATSMANAGER_0_ARE_NOT_AVAILABLE
+          .toLocalizedString("CachePerfStats"));
-      logger.warning(LocalizedStrings.ClientStatsManager_CLIENTSTATSMANAGER_0_ARE_NOT_AVAILABLE,
-          "VMStats");
+      logger.warn(LocalizedStrings.ClientStatsManager_CLIENTSTATSMANAGER_0_ARE_NOT_AVAILABLE
+          .toLocalizedString("VMStats"));
-    LogWriterI18n logger = currentCache.getLoggerI18n();
-      logger.info(LocalizedStrings.DEBUG,
-          "ClientHealthStats for poolName " + poolName + " poolStatsStr=" + poolStatsStr);
+      logger.debug("ClientHealthStats for poolName " + poolName + " poolStatsStr=" + poolStatsStr);
-      // consider old stats
-      Region clientHealthMonitoringRegion = ClientHealthMonitoringRegion.getInstance(currentCache);
-
-      if (clientHealthMonitoringRegion != null) {
-        InternalDistributedSystem ds =
-            (InternalDistributedSystem) currentCache.getDistributedSystem();
-        ClientHealthStats oldStats =
-            (ClientHealthStats) clientHealthMonitoringRegion.get(ds.getMemberId());
-        logger.info(LocalizedStrings.DEBUG, "getClientHealthStats got oldStats  " + oldStats);
-        if (oldStats != null) {
-          Map<String, String> oldPoolStats = oldStats.getPoolStats();
-          logger.info(LocalizedStrings.DEBUG,
-              "getClientHealthStats got oldPoolStats  " + oldPoolStats);
-          if (oldPoolStats != null) {
-            for (Entry<String, String> entry : oldPoolStats.entrySet()) {
-              if (!poolName.equals(entry.getKey())) {
-                stats.getPoolStats().put(entry.getKey(), entry.getValue());
-              }
-            }
-          }
-        }
-      }
-
-      logger.fine("Exception in getting pool stats in  getClientHealthStats "
+      logger.debug("Exception in getting pool stats in  getClientHealthStats "
