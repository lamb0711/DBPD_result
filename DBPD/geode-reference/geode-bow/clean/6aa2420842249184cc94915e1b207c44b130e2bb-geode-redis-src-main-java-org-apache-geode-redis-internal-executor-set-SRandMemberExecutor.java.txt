Introduce RedisResponse to SET executors (#5114)


-import org.apache.geode.redis.internal.CoderException;
-import org.apache.geode.redis.internal.RedisConstants;
+import org.apache.geode.redis.internal.RedisResponse;
-  public void executeCommand(Command command, ExecutionHandlerContext context) {
+  public RedisResponse executeCommandWithResponse(Command command,
+      ExecutionHandlerContext context) {
-        command.setResponse(
-            Coder.getErrorResponse(context.getByteBufAllocator(), ERROR_NOT_NUMERIC));
-        return;
+        return RedisResponse.error(ERROR_NOT_NUMERIC);
+
-      command.setResponse(Coder.getNilResponse(context.getByteBufAllocator()));
-      return;
+      return RedisResponse.nil();
+
-    try {
-      if (results.isEmpty()) {
-        command.setResponse(Coder.getNilResponse(context.getByteBufAllocator()));
-      } else if (count == 1) {
-        command.setResponse(
-            Coder.getBulkStringResponse(context.getByteBufAllocator(),
-                results.iterator().next().toBytes()));
-      } else {
-        command.setResponse(Coder.getArrayResponse(context.getByteBufAllocator(), results));
-      }
-    } catch (CoderException e) {
-      command.setResponse(Coder.getErrorResponse(context.getByteBufAllocator(),
-          RedisConstants.SERVER_ERROR_MESSAGE));
+
+    if (results.isEmpty()) {
+      return RedisResponse.nil();
+    } else if (count == 1) {
+      return RedisResponse.bulkString(results.iterator().next());
+    } else {
+      return RedisResponse.array(results);
