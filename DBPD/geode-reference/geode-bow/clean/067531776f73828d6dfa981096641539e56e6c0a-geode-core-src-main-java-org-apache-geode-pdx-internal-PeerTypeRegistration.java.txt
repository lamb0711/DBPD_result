GEODE-3115 Added changes to check for persistent region during pdx type registry.

-    checkAllowed(true, hasPersistentRegions());
+    checkAllowed(true, this.cache.hasPersistentRegion());
-      boolean hasPersistentRegions = hasPersistentRegions();
-      checkAllowed(hasGatewaySender(), hasPersistentRegions);
+      checkAllowed(hasGatewaySender(), this.cache.hasPersistentRegion());
-  public boolean hasPersistentRegions() {
-    Collection<DiskStore> diskStores = cache.listDiskStoresIncludingRegionOwned();
-    boolean hasPersistentRegions = false;
-    for (DiskStore store : diskStores) {
-      hasPersistentRegions |= ((DiskStoreImpl) store).hasPersistedData();
-    }
-    return hasPersistentRegions;
-  }
-
-  private void checkAllowed(boolean hasGatewaySender, boolean hasDiskStore) {
-    if (hasDiskStore && !cache.getPdxPersistent()) {
+  private void checkAllowed(boolean hasGatewaySender, boolean hasPersistentRegion) {
+    if (hasPersistentRegion && !cache.getPdxPersistent()) {
