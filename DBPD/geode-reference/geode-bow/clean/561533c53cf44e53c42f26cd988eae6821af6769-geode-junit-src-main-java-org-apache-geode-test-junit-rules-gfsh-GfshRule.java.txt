GEODE-8200: enhance GfshRule to specify a working dir (#5299)

* improve some backward compatibility test to cover more versions.
-  public GfshExecution execute(GfshScript gfshScript) {
+  public GfshExecution execute(File workingDir, String... commands) {
+    return execute(GfshScript.of(commands), workingDir);
+  }
+
+  /**
+   * this will allow you to specify a gfsh workingDir when executing the script
+   * this is usually helpful if:
+   * 1. you would start a different gfsh session but would
+   * like to remain in the same working dir as your previous one, (You can get your gfsh session's
+   * working dir by using GfshExecution.getWorkingDir)
+   * 2. you already prepared the workingdir with some initial setup.
+   *
+   * This way, this workingDir will be managed by the gfshRule and stop all the processes that
+   * exists in this working dir when tests finish
+   */
+  public GfshExecution execute(GfshScript gfshScript, File workingDir) {
-      File workingDir = new File(temporaryFolder.getRoot(), gfshScript.getName());
-      workingDir.mkdirs();
-
-
+  public GfshExecution execute(GfshScript gfshScript) {
+    try {
+      File workingDir = new File(temporaryFolder.getRoot(), gfshScript.getName());
+      workingDir.mkdirs();
+      return execute(gfshScript, workingDir);
+    } catch (Exception e) {
+      throw new RuntimeException(e);
+    }
+  }
+
+
+  public static String startServerCommand(String name, int port, int connectedLocatorPort) {
+    String command = "start server --name=" + name
+        + " --server-port=" + port
+        + " --locators=localhost[" + connectedLocatorPort + "]";
+    return command;
+  }
+
+  public static String startLocatorCommand(String name, int port, int jmxPort, int httpPort,
+      int connectedLocatorPort) {
+    String command = "start locator --name=" + name
+        + " --port=" + port
+        + " --http-service-port=" + httpPort;
+    if (connectedLocatorPort > 0) {
+      command += " --locators=localhost[" + connectedLocatorPort + "]";
+    }
+    command += " --J=-Dgemfire.jmx-manager-port=" + jmxPort;
+    return command;
+  }
