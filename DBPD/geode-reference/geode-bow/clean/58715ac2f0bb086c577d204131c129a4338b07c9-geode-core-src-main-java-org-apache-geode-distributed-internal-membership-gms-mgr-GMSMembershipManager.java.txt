GEODE-5464: Generify DistributionManager and related classes (#2174)

GEODE-5464: Generify DistributionManager and related classes

* Augment various collections to use generics
* Inline some iterator loops that were trivially "foreach" loops
* remove unused code
* Inline some redundant local variables
* make some methods more private
* change some tests to use `InternalDistributedMember` instead of
  `DistributedMember`.
* Make ThrottlingMemLinkedQueueWithDMStats generic and use atomic.
  - The previous synchronization looked quite wrong.
-import java.io.IOException;
-import org.apache.geode.cache.Cache;
-  private List membershipTestHooks;
+  private List<MembershipTestHook> membershipTestHooks;
-          CacheXmlGenerator.generate((Cache) cache, pw, true, false);
+          CacheXmlGenerator.generate(cache, pw, true, false);
-  protected Set<InternalDistributedMember> directChannelSend(
+  Set<InternalDistributedMember> directChannelSend(
-      List<InternalDistributedMember> members = (List<InternalDistributedMember>) ex.getMembers();
+      List<InternalDistributedMember> members = ex.getMembers();
-    } catch (IOException e) {
-      if (logger.isDebugEnabled()) {
-        logger.debug("Membership: directChannelSend caught exception: {}", e.getMessage(), e);
-      }
-      if (e instanceof NotSerializableException) {
-        throw (NotSerializableException) e;
-      }
-    } catch (RuntimeException | Error e) {
+    } catch (NotSerializableException | RuntimeException | Error e) {
-  protected void setDirectChannel(DirectChannel dc) {
+  void setDirectChannel(DirectChannel dc) {
-  public Map getMessageState(DistributedMember member, boolean includeMulticast) {
-    Map result = new HashMap();
+  public Map<String, Long> getMessageState(DistributedMember member, boolean includeMulticast) {
+    Map<String, Long> result = new HashMap<>();
-  public void waitForMessageState(DistributedMember otherMember, Map state)
+  public void waitForMessageState(DistributedMember otherMember, Map<String, Long> state)
-  public boolean waitForSerialMessageProcessing(InternalDistributedMember idm)
+  private boolean waitForSerialMessageProcessing(InternalDistributedMember idm)
-    OverflowQueueWithDMStats serialQueue = listener.getDM().getSerialQueue(idm);
+    OverflowQueueWithDMStats<Runnable> serialQueue = listener.getDM().getSerialQueue(idm);
-        List l = new ArrayList(this.membershipTestHooks);
+        List<MembershipTestHook> l = new ArrayList<>(this.membershipTestHooks);
-          List l = new ArrayList(this.membershipTestHooks);
+          List<MembershipTestHook> l = new ArrayList<>(this.membershipTestHooks);
