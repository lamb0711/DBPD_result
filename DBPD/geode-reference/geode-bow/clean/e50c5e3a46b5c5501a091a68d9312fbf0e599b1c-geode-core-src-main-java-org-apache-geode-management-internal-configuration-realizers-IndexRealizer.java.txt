GEODE-7425 delete index (#4503)

Co-authored-by: Joris Melchior <joris.melchior@gmail.com>
Co-authored-by: Jinmei Liao <jliao@pivotal.io>
Co-authored-by: Darrel Schneider <dschneider@pivotal.io>
+import org.apache.geode.cache.query.IndexExistsException;
+import org.apache.geode.cache.query.IndexNameConflictException;
+import org.apache.geode.cache.query.RegionNotFoundException;
-    } catch (Exception e) {
-      logger.error(e.getMessage(), e);
+    } catch (IndexNameConflictException | IndexExistsException | RegionNotFoundException e) {
+    } catch (RuntimeException r) {
+      logger.error(r.getMessage(), r);
+      realizationResult.setSuccess(false);
+      realizationResult.setMessage(r.getMessage());
-    return null;
+    QueryService queryService = cache.getQueryService();
+    RealizationResult realizationResult = new RealizationResult();
+    Region<Object, Object> region = cache.getRegion("/" + config.getRegionName());
+    if (region == null) {
+      realizationResult.setSuccess(false);
+      realizationResult.setMessage("Region for index not found: " + config.getRegionName());
+      return realizationResult;
+    }
+    org.apache.geode.cache.query.Index index = queryService.getIndex(region, config.getName());
+    if (index == null) {
+      realizationResult.setSuccess(false);
+      realizationResult.setMessage("Index not found for Region: "
+          + config.getRegionName()
+          + ", "
+          + config.getName());
+      return realizationResult;
+    }
+    try {
+      queryService.removeIndex(index);
+      realizationResult.setSuccess(true);
+      realizationResult.setMessage("Index "
+          + config.getName()
+          + " successfully removed from "
+          + config.getRegionName());
+      return realizationResult;
+    } catch (RuntimeException e) {
+      logger.error(e.getMessage(), e);
+      realizationResult.setSuccess(false);
+      realizationResult.setMessage(e.getMessage());
+    }
+
+    return realizationResult;
