Merge branch 'develop' into feature/GEODE-420

-import com.gemstone.gemfire.cache.lucene.internal.filesystem.FileSystemStats;
-import org.apache.lucene.analysis.Analyzer;
-                                        PartitionedRegion userRegion,
-                                        PartitionedRegion fileRegion,
-                                        PartitionedRegion chunkRegion,
-                                        Analyzer analyzer,
-                                        LuceneIndexStats indexStats,
-                                        FileSystemStats fileSystemStats)
+                                        LuceneIndexImpl index, PartitionedRegion userRegion)
-    BucketRegion fileBucket = getMatchingBucket(fileRegion, bucketId);
-    BucketRegion chunkBucket = getMatchingBucket(chunkRegion, bucketId);
+    LuceneIndexForPartitionedRegion indexForPR = (LuceneIndexForPartitionedRegion)index; 
+    BucketRegion fileBucket = getMatchingBucket(indexForPR.getFileRegion(), bucketId);
+    BucketRegion chunkBucket = getMatchingBucket(indexForPR.getChunkRegion(), bucketId);
+    BucketRegion dataBucket = getMatchingBucket(userRegion, bucketId);
-    RegionDirectory dir = new RegionDirectory(fileBucket, chunkBucket, fileSystemStats);
-    IndexWriterConfig config = new IndexWriterConfig(analyzer);
+    RegionDirectory dir = new RegionDirectory(fileBucket, chunkBucket, indexForPR.getFileSystemStats());
+    IndexWriterConfig config = new IndexWriterConfig(indexForPR.getAnalyzer());
-    repo = new IndexRepositoryImpl(fileBucket, writer, serializer, indexStats);
+    repo = new IndexRepositoryImpl(fileBucket, writer, serializer, indexForPR.getIndexStats(), dataBucket);
