Merge branch 'develop' into feature/GEODE-6187

+import static org.apache.commons.lang3.SystemUtils.isJavaVersionAtLeast;
-import static org.apache.geode.test.awaitility.GeodeAwaitility.await;
+import org.apache.commons.lang3.JavaVersion;
-import org.apache.geode.distributed.internal.InternalDistributedSystem;
-import org.apache.geode.test.dunit.RMIException;
+import org.apache.geode.test.dunit.IgnoredException;
+    if (isJavaVersionAtLeast(JavaVersion.JAVA_11)) {
+      // GEODE-6247: JDK 11 has an issue where native code is reporting committed is 2MB > max.
+      IgnoredException.addIgnoredException("committed = 538968064 should be < max = 536870912");
+    }
-   * this crashes the VM hosting the member/client. It removes the VM from the occupied VM list
-   * so that we can ignore it at cleanup.
+   * this crashes the VM hosting the member/client.
-    VMProvider member = occupiedVMs.remove(index);
-    member.invokeAsync(() -> {
-      if (InternalDistributedSystem.shutdownHook != null) {
-        Runtime.getRuntime().removeShutdownHook(InternalDistributedSystem.shutdownHook);
-      }
-      System.exit(1);
-    });
-
-    // wait till member is not reachable anymore.
-    await().until(() -> {
-      try {
-        member.invoke(() -> {
-        });
-      } catch (RMIException e) {
-        return true;
-      }
-      return false;
-    });
-
-    // delete the lingering files under this vm
-    Arrays.stream(member.getVM().getWorkingDirectory().listFiles())
-        .forEach(FileUtils::deleteQuietly);
-
-    member.getVM().bounce();
+    VMProvider member = occupiedVMs.get(index);
+    member.getVM().bounceForcibly();
