change more string commands to have CommandFunction support (#5184)

* CommandFunction now supports getrange, setrange, bitcount, bitop, bitpos, getbit, setbit, incrbyfloat, mget, and strlen.

Added integration test coverage for untested string commands.

+    boolean duplicatesAllowed = count < 0;
+    if (duplicatesAllowed) {
+      count = -count;
+    }
-    Set<ByteArrayWrapper> result = new HashSet<>();
-    // Note that rand.nextInt can return duplicates when "count" is high
-    // so we need to use a Set to collect the results.
-    while (result.size() < count) {
-      ByteArrayWrapper s = entries[rand.nextInt(entries.length)];
-      result.add(s);
+    if (duplicatesAllowed) {
+      ArrayList<ByteArrayWrapper> result = new ArrayList<>(count);
+      while (count > 0) {
+        result.add(entries[rand.nextInt(entries.length)]);
+        count--;
+      }
+      return result;
+    } else {
+      Set<ByteArrayWrapper> result = new HashSet<>();
+      // Note that rand.nextInt can return duplicates when "count" is high
+      // so we need to use a Set to collect the results.
+      while (result.size() < count) {
+        ByteArrayWrapper s = entries[rand.nextInt(entries.length)];
+        result.add(s);
+      }
+      return result;
-    return result;
