GEODE-5247: Gfsh query results contain json instead of object references (#1985)


+import org.apache.geode.pdx.JSONFormatter;
-        columnData.put(field, pdx.getField(field).toString());
+        columnData.put(field, valueToJson(pdx.getField(field)));
-        columnData.put(field, struct.get(field).toString());
+        columnData.put(field, valueToJson(struct.get(field)));
+      }
+    }
+
+    private String valueToJson(Object value) {
+      if (value == null) {
+        return "null";
+      }
+
+      if (value instanceof String) {
+        return (String) value;
+      }
+
+      if (value instanceof PdxInstance) {
+        return JSONFormatter.toJSON((PdxInstance) value);
+      }
+
+      ObjectMapper mapper = new ObjectMapper();
+      try {
+        return mapper.writeValueAsString(value);
+      } catch (JsonProcessingException jex) {
+        return jex.getMessage();
