GEODE-7536 - Break Gfsh out into separate module (#4422)


- ManagementUtils is split from CliUtil with non-CLI methods.
- Introduce new CommandProcessor interface which is a CacheService. This
  is implemented by OnlineCommandProcessor and is used in
  MemberMBeanBridge.
- Remove try/catch from ClusterConfigurationStatusRetriever since any
  exception will be handled at a higher level.

+import org.apache.geode.cache.Cache;
+import org.apache.geode.cache.internal.CommandProcessor;
+import org.apache.geode.internal.cache.CacheService;
+import org.apache.geode.management.internal.beans.CacheServiceMBeanBase;
-public class OnlineCommandProcessor {
-  protected final CommandExecutor executor;
-  private final GfshParser gfshParser;
+public class OnlineCommandProcessor implements CommandProcessor {
+  protected CommandExecutor executor;
+  private GfshParser gfshParser;
-  private final SecurityService securityService;
+  private SecurityService securityService;
-  public OnlineCommandProcessor(Properties cacheProperties, SecurityService securityService,
-      InternalCache cache) {
-    this(cacheProperties, securityService, new CommandExecutor(), cache);
-  }
+  private InternalCache cache;
+
+  public OnlineCommandProcessor() {}
+
+  @Override
+  public String executeCommandReturningJson(String command, Map<String, String> env,
+      List<String> stagedFilePaths) {
+    return executeCommand(command, env, stagedFilePaths).toJson();
+  }
+
+  @Override
+  public boolean init(Cache cache) {
+    Properties cacheProperties = cache.getDistributedSystem().getProperties();
+    this.securityService = ((InternalCache) cache).getSecurityService();
+    this.gfshParser = new GfshParser(new CommandManager(cacheProperties, (InternalCache) cache));
+    this.executor = new CommandExecutor();
+    this.cache = (InternalCache) cache;
+
+    return true;
+  }
+
+  @Override
+  public Class<? extends CacheService> getInterface() {
+    return CommandProcessor.class;
+  }
+
+  @Override
+  public CacheServiceMBeanBase getMBean() {
+    return null;
+  }
