Merge remote-tracking branch 'upstream/develop' into develop

+import org.apache.geode.internal.logging.LoggingSession;
+import org.apache.geode.internal.logging.NullLoggingSession;
-import org.apache.geode.internal.logging.log4j.LogWriterAppender;
-import org.apache.geode.internal.logging.log4j.LogWriterAppenders;
-  private LogWriterAppender logWriterAppender;
-
+  private final LoggingSession loggingSession;
+
+  private static LoggingSession createLoggingSession() {
+    return NullLoggingSession.create();
+  }
+
+    loggingSession = createLoggingSession();
-    this.logWriterAppender = LogWriterAppenders.getOrCreateAppender(
-        LogWriterAppenders.Identifier.MAIN, false, this.config.createLogConfig(), false);
+    loggingSession.startSession();
-      this.logWriter = LogWriterFactory.createLogWriterLogger(false, false,
-          this.config.createLogConfig(), false);
+      this.logWriter = LogWriterFactory.createLogWriterLogger(this.config.createLogConfig(), false);
-      if (this.logWriterAppender != null) {
-        LogWriterAppenders.stop(LogWriterAppenders.Identifier.MAIN);
-      }
+      loggingSession.stopSession();
-        if (logWriterAppender != null) {
-          LogWriterAppenders.destroy(LogWriterAppenders.Identifier.MAIN);
-        }
+        loggingSession.shutdown();
