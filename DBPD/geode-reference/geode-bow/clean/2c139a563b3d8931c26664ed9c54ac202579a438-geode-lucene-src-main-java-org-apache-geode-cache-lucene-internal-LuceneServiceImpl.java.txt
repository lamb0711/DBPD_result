GEODE-5197: Synchronized update cache service profiles (#2270)

* new lock created for updating the region's cache service profile
* synchronized the addition / validation / removal of LuceneIndexCreationProfile in the data region.
-    region.addCacheServiceProfile(luceneIndexCreationProfile);
+    Runnable validateIndexProfile =
+        getIndexValidationRunnable(region, indexName, luceneIndexCreationProfile);
+    region.executeSynchronizedOperationOnCacheProfiles(validateIndexProfile);
-    try {
-      validateLuceneIndexProfile(region);
-    } catch (IllegalStateException e) {
-      region.removeCacheServiceProfile(luceneIndexCreationProfile.getId());
-      throw new UnsupportedOperationException(
-          LocalizedStrings.LuceneIndexCreation_INDEX_CANNOT_BE_CREATED_DUE_TO_PROFILE_VIOLATION
-              .toString(indexName),
-          e);
-    }
+  private Runnable getIndexValidationRunnable(PartitionedRegion region, String indexName,
+      LuceneIndexCreationProfile luceneIndexCreationProfile) {
+    return () -> {
+      region.addCacheServiceProfile(luceneIndexCreationProfile);
+      try {
+        validateLuceneIndexProfile(region);
+      } catch (IllegalStateException e) {
+        region.removeCacheServiceProfile(luceneIndexCreationProfile.getId());
+        throw new UnsupportedOperationException(
+            LocalizedStrings.LuceneIndexCreation_INDEX_CANNOT_BE_CREATED_DUE_TO_PROFILE_VIOLATION
+                .toString(indexName),
+            e);
+      }
+    };
+  }
+
