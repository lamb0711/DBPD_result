Merge branch 'release/1.5.0'

-import org.apache.geode.distributed.internal.DistributionManager;
+import org.apache.geode.distributed.internal.ClusterDistributionManager;
-      msg.processorType = DistributionManager.SERIAL_EXECUTOR;
+      msg.processorType = ClusterDistributionManager.SERIAL_EXECUTOR;
-      msg.processorType = DistributionManager.HIGH_PRIORITY_EXECUTOR;
+      msg.processorType = ClusterDistributionManager.HIGH_PRIORITY_EXECUTOR;
-  protected boolean operateOnTx(TXId txId, DistributionManager dm) throws RemoteOperationException {
+  protected boolean operateOnTx(TXId txId, ClusterDistributionManager dm)
+      throws RemoteOperationException {
+    TXCommitMessage commitMessage = txMgr.getRecentlyCompletedMessage(txId);
+    if (commitMessage != null) {
+      TXCommitMessage message =
+          commitMessage == TXCommitMessage.ROLLBACK_MSG ? null : commitMessage;
+      TXRemoteCommitReplyMessage.send(getSender(), getProcessorId(), message, getReplySender(dm));
+      return false;
+    }
-    TXCommitMessage cmsg = txState.getCommitMessage();
-    TXRemoteCommitReplyMessage.send(getSender(), getProcessorId(), cmsg, getReplySender(dm));
+    commitMessage = txState.getCommitMessage();
+    TXRemoteCommitReplyMessage.send(getSender(), getProcessorId(), commitMessage,
+        getReplySender(dm));
