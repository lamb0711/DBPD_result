Merge remote-tracking branch 'origin/develop' into wan_cq_donation

-      if (theSocket != null)
+      if (theSocket != null) {
+        theSocket.getOutputStream().flush();
+        theSocket.shutdownOutput();
+      }
