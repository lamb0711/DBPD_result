GEODE-7652: MembershipBuilder lets you set the local locator (#4614)


+import org.apache.geode.distributed.internal.membership.api.MembershipLocator;
-      final RemoteTransportConfig transport, final InternalDistributedSystem system,
+      final RemoteTransportConfig transport,
+      final InternalDistributedSystem system,
-      final MessageListener<InternalDistributedMember> messageListener) {
+      final MessageListener<InternalDistributedMember> messageListener,
+      final MembershipLocator<InternalDistributedMember> locator) {
+          .setMembershipLocator(locator)
-  public static void connectLocatorToServices(Membership<InternalDistributedMember> membership) {
-    // see if a locator was started and put it in GMS Services
-    InternalLocator l = (InternalLocator) Locator.getLocator();
-    if (l != null && l.getMembershipLocator() != null) {
-      l.getMembershipLocator().setMembership(membership);
-    }
-  }
-
-      MessageListener<InternalDistributedMember> messageListener) {
+      MessageListener<InternalDistributedMember> messageListener,
+      final MembershipLocator<InternalDistributedMember> locator) {
-            messageListener);
+            messageListener, locator);
-    public void started() {
-      connectLocatorToServices(distribution.getMembership());
-    }
-
-    @Override
