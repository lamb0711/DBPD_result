Merge remote-tracking branch 'origin/develop' into feature/GEODE-3239

-package org.apache.geode.serialization.registry;
+package org.apache.geode.internal.serialization.registry;
+import org.apache.geode.GemFireConfigException;
-import org.apache.geode.serialization.SerializationType;
-import org.apache.geode.serialization.TypeCodec;
-import org.apache.geode.serialization.registry.exception.CodecAlreadyRegisteredForTypeException;
-import org.apache.geode.serialization.registry.exception.CodecNotRegisteredForTypeException;
+import org.apache.geode.internal.serialization.SerializationType;
+import org.apache.geode.internal.serialization.TypeCodec;
+import org.apache.geode.internal.serialization.registry.exception.CodecAlreadyRegisteredForTypeException;
+import org.apache.geode.internal.serialization.registry.exception.CodecNotRegisteredForTypeException;
-  private HashMap<SerializationType, TypeCodec> codecRegistry = new HashMap<>();
+  private final HashMap<SerializationType, TypeCodec> codecRegistry = new HashMap<>();
-  public SerializationCodecRegistry() throws CodecAlreadyRegisteredForTypeException {
+  public SerializationCodecRegistry() {
-    for (TypeCodec typeCodec : typeCodecs) {
-      register(typeCodec.getSerializationType(), typeCodec);
+    try {
+      for (TypeCodec typeCodec : typeCodecs) {
+        register(typeCodec.getSerializationType(), typeCodec);
+      }
+    } catch (CodecAlreadyRegisteredForTypeException ex) {
+      throw new GemFireConfigException("Multiple implementations found for the same TypeCodec", ex);
-  public synchronized void register(SerializationType serializationType, TypeCodec<?> typeCodec)
-      throws CodecAlreadyRegisteredForTypeException {
+  private void register(SerializationType serializationType, TypeCodec<?> typeCodec) {
