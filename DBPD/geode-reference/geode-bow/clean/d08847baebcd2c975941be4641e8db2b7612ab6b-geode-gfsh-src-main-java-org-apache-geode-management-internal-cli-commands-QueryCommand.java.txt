GEODE-8112: Add --member option in query command. (#5102)


-          help = CliStrings.QUERY__INTERACTIVE__HELP) final boolean interactive) {
-    DataCommandResult dataResult = select(query);
+          help = CliStrings.QUERY__INTERACTIVE__HELP) final boolean interactive,
+      @CliOption(key = CliStrings.MEMBER,
+          optionContext = ConverterHint.MEMBERIDNAME,
+          help = CliStrings.QUERY__MEMBER__HELP) final String memberNameOrId) {
+
+    DistributedMember targetMember = memberNameOrId == null ? null : getMember(memberNameOrId);
+    DataCommandResult dataResult = select(query, targetMember);
-  private DataCommandResult select(String query) {
+  DataCommandResult select(String query, DistributedMember targetMember) {
-        Set<DistributedMember> members =
-            ManagementUtils
-                .getQueryRegionsAssociatedMembers(regionsInQuery, (InternalCache) cache, false);
+        Set<DistributedMember> members = getMembers(targetMember, (InternalCache) cache,
+            regionsInQuery);
+  Set<DistributedMember> getMembers(DistributedMember targetMember, InternalCache cache,
+      Set<String> regionsInQuery) {
+    return targetMember == null
+        ? getQueryRegionsAssociatedMembers(cache, regionsInQuery)
+        : Collections.singleton(targetMember);
+  }
+
+  Set<DistributedMember> getQueryRegionsAssociatedMembers(InternalCache cache,
+      Set<String> regionsInQuery) {
+    return ManagementUtils
+        .getQueryRegionsAssociatedMembers(regionsInQuery, cache, false);
+  }
+
