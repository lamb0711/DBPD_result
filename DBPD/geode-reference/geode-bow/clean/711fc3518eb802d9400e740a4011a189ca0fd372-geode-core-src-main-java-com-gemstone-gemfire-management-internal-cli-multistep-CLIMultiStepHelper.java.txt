GEODE-1469: correctly handle the step arguements in http request

-import org.springframework.shell.event.ParseResult;
-import org.springframework.util.ReflectionUtils;
-
+import org.springframework.shell.event.ParseResult;
+import org.springframework.util.ReflectionUtils;
+
-
-            CommandRequest commandRequest = new CommandRequest(gfshParseResult, prepareJSONArgs(shell.getEnv(), nextStepArgs));
+            // this makes sure that "quit" step will correctly update the environment with empty stepArgs
+            if (nextStepArgs != null) {
+              GfJsonObject argsJSon = nextStepArgs.getSectionGfJsonObject();
+              shell.setEnvProperty(CLIMultiStepHelper.STEP_ARGS, argsJSon.toString());
+            }
+            CommandRequest commandRequest = new CommandRequest(gfshParseResult, shell.getEnv());
-  public static Map<String, String> prepareJSONArgs(Map<String, String> env, SectionResultData nextStepArgs) {
-    if (nextStepArgs != null) {
-      GfJsonObject argsJSon = nextStepArgs.getSectionGfJsonObject();
-      env.put(CLIMultiStepHelper.STEP_ARGS, argsJSon.toString());
-    }
-    return env;
-  }
-
