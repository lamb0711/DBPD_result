Merge pull request #868 from apache/feature/GEODE-3744

GEODE-3744: Local region will not participate in a transaction hostedâ€¦
-    if (region.getPartitionAttributes() == null) {
+    if (region.getPartitionAttributes() != null) {
+      // a partitioned region
+      stub = new PartitionedTXRegionStub(this, region);
+    } else if (region.getScope().isLocal()) {
+      // GEODE-3744 Local region should not be involved in a transaction on a PeerTXStateStub
+      throw new TransactionException(
+          "Local region " + region + " should not participate in a transaction not hosted locally");
+    } else {
-    } else {
-      stub = new PartitionedTXRegionStub(this, region);
