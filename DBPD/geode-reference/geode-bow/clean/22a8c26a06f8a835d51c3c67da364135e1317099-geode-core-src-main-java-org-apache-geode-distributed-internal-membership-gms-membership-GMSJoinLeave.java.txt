GEODE-7345: break dependency on SocketCreator (#4322)


+  /**
+   * for messaging locator
+   */
+  private final TcpClient locatorClient;
+
+  public GMSJoinLeave(final TcpClient locatorClient) {
+    this.locatorClient = locatorClient;
+  }
+
-  private TcpClientWrapper tcpClientWrapper = new TcpClientWrapper();
-
-  /***
-   * testing purpose. Sets the TcpClient that is used by GMSJoinLeave to communicate with Locators.
-   *
-   * @param tcpClientWrapper the wrapper
-   */
-  void setTcpClientWrapper(TcpClientWrapper tcpClientWrapper) {
-    this.tcpClientWrapper = tcpClientWrapper;
-  }
-
-          Object o = tcpClientWrapper.sendCoordinatorFindRequest(addr, request, connectTimeout);
+          Object o = locatorClient.requestToServer(addr, request, connectTimeout, true);
-  protected class TcpClientWrapper {
-    protected Object sendCoordinatorFindRequest(InetSocketAddress addr,
-        FindCoordinatorRequest request, int connectTimeout)
-        throws ClassNotFoundException, IOException {
-      TcpClient client = new TcpClient();
-      return client.requestToServer(addr, request, connectTimeout, true);
-    }
-  }
-
