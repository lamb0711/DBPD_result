GEODE-3948 fixing handling of sotimeout in Message.receive()

Changes made for GEODE-3948 caused the Message.receive() method to block
indefinitely waiting for a response.  That wasn't the intent - it should
honor the current setting of sotimeout.

(cherry picked from commit 2758f58b9d)

-  private static final int NO_HEADER_READ_TIMEOUT = 0;
-
-  private void readHeaderAndBody(int headerReadTimeoutMillis) throws IOException {
+  private void readHeaderAndBody(boolean setHeaderReadTimeout, int headerReadTimeoutMillis)
+      throws IOException {
-    int timeout = socket.getSoTimeout();
-    try {
+    int oldTimeout = -1;
+    if (setHeaderReadTimeout) {
+      oldTimeout = socket.getSoTimeout();
+    }
+    try {
-      socket.setSoTimeout(timeout);
+      if (setHeaderReadTimeout) {
+        socket.setSoTimeout(oldTimeout);
+      }
-        readHeaderAndBody(timeoutMillis);
+        readHeaderAndBody(true, timeoutMillis);
-    receiveWithHeaderReadTimeout(NO_HEADER_READ_TIMEOUT);
+    if (this.socket != null) {
+      synchronized (getCommBuffer()) {
+        readHeaderAndBody(false, -1);
+      }
+    } else {
+      throw new IOException("Dead Connection");
+    }
