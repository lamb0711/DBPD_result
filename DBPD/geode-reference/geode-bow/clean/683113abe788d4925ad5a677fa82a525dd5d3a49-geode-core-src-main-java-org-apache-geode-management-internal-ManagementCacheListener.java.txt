GEODE-7710: Fix race condition in federation of MXBeans (#4807)

JMX Manager may fail to federate one or more MXBeans during startup
because of a race condition involving FederatingManager and
ManagementCacheListener.

Change ManagementCacheListener to be ready upon construction.
+import org.apache.geode.cache.Region;
+import org.apache.geode.distributed.DistributedMember;
- * This listener is attached to the Monitoring Region to receive any addition or deletion of MBEans
- *
- * It updates the last refreshed time of proxy once it gets the update request from the Managed Node
- *
- *
+ * This listener is attached to the Monitoring Region to receive any addition or deletion of MBeans.
+ * It updates the last refreshed time of proxy once it gets the update request from the Managed
+ * Node.
-public class ManagementCacheListener extends CacheListenerAdapter<String, Object> {
-
+class ManagementCacheListener extends CacheListenerAdapter<String, Object> {
-  private MBeanProxyFactory proxyHelper;
+  private final MBeanProxyFactory proxyHelper;
-  private volatile boolean readyForEvents;
-
-  public ManagementCacheListener(MBeanProxyFactory proxyHelper) {
+  ManagementCacheListener(MBeanProxyFactory proxyHelper) {
-    this.readyForEvents = false;
-    if (!readyForEvents) {
-      return;
-    }
-      proxyHelper.createProxy(event.getDistributedMember(), objectName, event.getRegion(),
+      DistributedMember distributedMember = event.getDistributedMember();
+      Region<String, Object> region = event.getRegion();
+      proxyHelper.createProxy(distributedMember, objectName, region,
-
-
-      if (!readyForEvents) {
-        return;
-      }
-
-
-
-  void markReady() {
-    readyForEvents = true;
-  }
-
