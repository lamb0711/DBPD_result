Merge branch 'develop' into feature/GEODE-420

# Conflicts:
#	geode-core/src/main/java/com/gemstone/gemfire/distributed/internal/InternalDistributedSystem.java

-import com.gemstone.gemfire.internal.security.SecurityService;
-      if (pr.isNetworkHop().byteValue() != (byte) 0) {
-        writeReplyWithRefreshMetadata(msg, servConn, pr, sendOldValue, oldValueIsObject, oldValue, pr.isNetworkHop()
-                                                                                                     .byteValue(), clientEvent
-          .getVersionTag());
-        pr.setIsNetworkHop((byte) 0);
-        pr.setMetadataVersion(Byte.valueOf((byte) 0));
+      if (pr.getNetworkHopType() != PartitionedRegion.NETWORK_HOP_NONE) {
+        writeReplyWithRefreshMetadata(msg, servConn, pr, sendOldValue, oldValueIsObject, oldValue, pr.getNetworkHopType()
+          , clientEvent.getVersionTag());
+        pr.clearNetworkHopData();
-    replyMsg.addBytesPart(new byte[] { pr.getMetadataVersion().byteValue(), nwHopType });
+    replyMsg.addBytesPart(new byte[] { pr.getMetadataVersion(), nwHopType });
