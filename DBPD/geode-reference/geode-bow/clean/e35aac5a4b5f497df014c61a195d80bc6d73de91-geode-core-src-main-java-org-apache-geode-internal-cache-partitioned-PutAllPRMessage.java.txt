Merge branch 'release/1.5.0'

-import org.apache.geode.distributed.internal.DM;
+import org.apache.geode.distributed.internal.ClusterDistributionManager;
-  protected boolean operateOnPartitionedRegion(DistributionManager dm, PartitionedRegion pr,
+  protected boolean operateOnPartitionedRegion(ClusterDistributionManager dm, PartitionedRegion pr,
-        putAllPRData[0].getValue(), this.callbackArg, false /* originRemote */, getSender(),
-        true/* generate Callbacks */, putAllPRData[0].getEventID());
+        putAllPRData[0].getValue(r.getCache()), this.callbackArg, false /* originRemote */,
+        getSender(), true/* generate Callbacks */, putAllPRData[0].getEventID());
-                  succeeded.put(putAllPRData[i].getKey(), putAllPRData[i].getValue());
+                  succeeded.put(putAllPRData[i].getKey(), putAllPRData[i].getValue(r.getCache()));
+    Object prdValue = prd.getValue(r.getCache());
-    EntryEventImpl ev = EntryEventImpl.create(r, prd.getOp(), prd.getKey(), prd.getValue(), null,
-        false, eventSender, !skipCallbacks, prd.getEventID());
+    EntryEventImpl ev = EntryEventImpl.create(r, prd.getOp(), prd.getKey(), prdValue, null, false,
+        eventSender, !skipCallbacks, prd.getEventID());
-      if (prd.getValue() == null
-          && ev.getRegion().getAttributes().getDataPolicy() == DataPolicy.NORMAL) {
+      if (prdValue == null && ev.getRegion().getAttributes().getDataPolicy() == DataPolicy.NORMAL) {
-      ev.setNewValue(prd.getValue());
+      ev.setNewValue(prdValue);
-  protected void sendReply(InternalDistributedMember member, int procId, DM dm, ReplyException ex,
-      PartitionedRegion pr, long startTime) {
+  protected void sendReply(InternalDistributedMember member, int procId, DistributionManager dm,
+      ReplyException ex, PartitionedRegion pr, long startTime) {
-  protected boolean mayAddToMultipleSerialGateways(DistributionManager dm) {
+  protected boolean mayAddToMultipleSerialGateways(ClusterDistributionManager dm) {
-    public void process(final DM dm, final ReplyProcessor21 rp) {
+    public void process(final DistributionManager dm, final ReplyProcessor21 rp) {
-      try {
-        waitForCacheException();
-      } catch (ForceReattemptException e) {
-        throw e;
-      }
+      waitForCacheException();
