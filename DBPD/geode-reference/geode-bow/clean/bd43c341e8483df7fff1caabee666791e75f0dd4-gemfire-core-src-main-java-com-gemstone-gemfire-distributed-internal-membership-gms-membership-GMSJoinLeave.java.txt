new unit tests and code clean-up

New unit tests to increase code coverage.  I also tinkered with
trying to get EclEmma output from DUnit ChildVMs but it seems to
be run in a shutdownHook in parallel with the DUnitLauncher
shutdownHook.

-      long locatorWaitTime = services.getConfig().getLocatorWaitTime() * 1000;
+      long locatorWaitTime = ((long)services.getConfig().getLocatorWaitTime()) * 1000L;
-      viewRequests.notify();
+      viewRequests.notifyAll();
-    long giveUpTime = System.currentTimeMillis() + services.getConfig().getLocatorWaitTime() * 1000;
+    long giveUpTime = System.currentTimeMillis() + ((long)services.getConfig().getLocatorWaitTime() * 1000L);
-      joinResponse.notify();
+      joinResponse.notifyAll();
-        joinResponse.notify();
+        joinResponse.notifyAll();
-      int failurePoint = (int) (Math.round(51 * oldWeight) / 100.0);
+      int failurePoint = (int) (Math.round(51.0 * oldWeight) / 100.0);
+      assert m instanceof JoinRequestMessage;
+      assert m instanceof JoinResponseMessage;
+      assert m instanceof InstallViewMessage;
+      assert m instanceof ViewAckMessage;
+      assert m instanceof LeaveRequestMessage;
+      assert m instanceof RemoveMemberMessage;
+      assert m instanceof FindCoordinatorRequest;
+      assert m instanceof FindCoordinatorResponse;
+      assert m instanceof NetworkPartitionMessage;
-        notify();
+        notifyAll();
-        if (!this.waiting) {
-          // if we've set waiting to false due to incoming messages then
-          // we've discounted receiving any other responses from the
-          // remaining members due to leave/crash notification
-          result = pendingRemovals;
-        } else {
-          result.addAll(pendingRemovals);
-          this.waiting = false;
+        synchronized(this) {
+          if (!this.waiting) {
+            // if we've set waiting to false due to incoming messages then
+            // we've discounted receiving any other responses from the
+            // remaining members due to leave/crash notification
+            result = pendingRemovals;
+          } else {
+            result.addAll(pendingRemovals);
+            this.waiting = false;
+          }
-        viewRequests.notify();
+        viewRequests.notifyAll();
-        int size = joinReqs.size();
