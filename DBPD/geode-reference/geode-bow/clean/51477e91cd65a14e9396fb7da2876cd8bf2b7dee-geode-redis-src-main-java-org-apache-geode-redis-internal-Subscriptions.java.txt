GEODE-7943 add synchronization to Subscriptions class (#4913)

* Add synchronized to size()
* Move test to integrationTest
* Switch to CopyOnWriteList (it appears not to really introduce memory issues)
* Fix a small cleanup issue in ExpireAtIntegrationTest

Authored-by: Jens Deppe <jdeppe@vmware.com>
-import java.util.ArrayList;
+import java.util.concurrent.CopyOnWriteArrayList;
-  private List<Subscription> subscriptions = new ArrayList<>();
+  private final List<Subscription> subscriptions = new CopyOnWriteArrayList<>();
-    return this.subscriptions.stream()
+    return subscriptions.stream()
-    this.subscriptions.add(subscription);
+    subscriptions.add(subscription);
-    this.subscriptions.removeIf(subscription -> subscription.matchesClient(client));
+    subscriptions.removeIf(subscription -> subscription.matchesClient(client));
-    this.subscriptions.removeIf(subscription -> subscription.isEqualTo(channel, client));
+    subscriptions.removeIf(subscription -> subscription.isEqualTo(channel, client));
+  }
+
+  /**
+   * @return the total number of all local subscriptions
+   */
+  public int size() {
+    return subscriptions.size();
