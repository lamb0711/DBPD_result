GEODE-2277 Now pdxEvent from gateway added through pdx Type registry

This make sure that we have one mechanism to add pdx type into pdx
registry. Added test for it.

+import org.apache.geode.internal.util.BlobHelper;
+import org.apache.geode.pdx.internal.EnumId;
+import org.apache.geode.pdx.internal.EnumInfo;
+import org.apache.geode.pdx.internal.PdxType;
+      boolean isPdxEvent = false;
+          isPdxEvent = true;
-                result = region.basicBridgeCreate(key, value, isObject, callbackArg,
-                    servConn.getProxyID(), false, clientEvent, false);
-                // If the create fails (presumably because it already exists),
-                // attempt to update the entry
-                if (!result) {
-                  result = region.basicBridgePut(key, value, null, isObject, callbackArg,
-                      servConn.getProxyID(), false, clientEvent);
+                if (isPdxEvent) {
+                  result = addPdxType(crHelper, key, value);
+                } else {
+                  result = region.basicBridgeCreate(key, value, isObject, callbackArg,
+                      servConn.getProxyID(), false, clientEvent, false);
+                  // If the create fails (presumably because it already exists),
+                  // attempt to update the entry
+                  if (!result) {
+                    result = region.basicBridgePut(key, value, null, isObject, callbackArg,
+                        servConn.getProxyID(), false, clientEvent);
+                  }
-                boolean result = region.basicBridgePut(key, value, null, isObject, callbackArg,
-                    servConn.getProxyID(), false, clientEvent);
+                boolean result = false;
+                if (isPdxEvent) {
+                  result = addPdxType(crHelper, key, value);
+                } else {
+                  result = region.basicBridgePut(key, value, null, isObject, callbackArg,
+                      servConn.getProxyID(), false, clientEvent);
+                }
+  private boolean addPdxType(CachedRegionHelper crHelper, Object key, Object value)
+      throws Exception {
+    if (key instanceof EnumId) {
+      EnumId enumId = (EnumId) key;
+      value = BlobHelper.deserializeBlob((byte[]) value);
+      ((GemFireCacheImpl) crHelper.getCache()).getPdxRegistry().addRemoteEnum(enumId.intValue(),
+          (EnumInfo) value);
+    } else {
+      value = BlobHelper.deserializeBlob((byte[]) value);
+      ((GemFireCacheImpl) crHelper.getCache()).getPdxRegistry().addRemoteType((int) key,
+          (PdxType) value);
+    }
+    return true;
+  }
+
