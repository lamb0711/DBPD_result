GEODE-8330: Structural Improvements to Versioning

Follow-on to GEODE-8240, this commit eliminates redundancy in 
versioning code and provides a single way to convert a short
to a version and a single way to acquire a known version from
a (possibly unknown) version.
+import org.apache.geode.internal.serialization.Versioning;
+import org.apache.geode.internal.serialization.VersioningIO;
-   * @param version the version of the recipient
+   * @param versionOrdinal the version of the recipient
-      short version) throws IOException {
+      short versionOrdinal) throws IOException {
+      final Version version =
+          Versioning.getKnownVersionOrDefault(
+              Versioning.getVersionOrdinal(versionOrdinal),
+              Version.CURRENT);
-          new BufferDataOutputStream(Version.fromOrdinalNoThrow(version, false));
-      Version.writeOrdinal(out_stream,
+          new BufferDataOutputStream(version);
+      VersioningIO.writeOrdinal(out_stream,
-        writeEncryptedMessage(gfmsg, dst, version, out_stream);
+        writeEncryptedMessage(gfmsg, dst, versionOrdinal, out_stream);
-  void writeEncryptedMessage(Message<ID> gfmsg, ID recipient, short version,
+  void writeEncryptedMessage(Message<ID> gfmsg, ID recipient, short versionOrdinal,
+      final Version version =
+          Versioning.getKnownVersionOrDefault(
+              Versioning.getVersionOrdinal(versionOrdinal),
+              Version.CURRENT);
-          new BufferDataOutputStream(Version.fromOrdinalNoThrow(version, false));
+          new BufferDataOutputStream(version);
-      short ordinal = Version.readOrdinal(dis);
+      short ordinal = VersioningIO.readOrdinal(dis);
+        final Version version = Versioning.getKnownVersionOrDefault(
+            Versioning.getVersionOrdinal(ordinal),
+            Version.CURRENT);
-            Version.fromOrdinalNoThrow(ordinal, false));
+            version);
+          final Version version = Versioning.getKnownVersionOrDefault(
+              Versioning.getVersionOrdinal(ordinal),
+              Version.CURRENT);
-              Version.fromOrdinalNoThrow(ordinal, false));
+              version);
