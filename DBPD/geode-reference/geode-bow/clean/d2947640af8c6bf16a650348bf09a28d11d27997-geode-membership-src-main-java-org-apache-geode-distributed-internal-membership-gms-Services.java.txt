GEODE-7652: MembershipBuilder lets you set the local locator (#4614)


+import org.apache.geode.distributed.internal.membership.api.MembershipLocator;
+import org.apache.geode.distributed.internal.membership.gms.locator.MembershipLocatorImpl;
+  private MembershipLocator<ID> membershipLocator;
+
+      if (membershipLocator != null) {
+        /*
+         * Now that all the services have started we can let the membership locator know
+         * about them. We must do this before telling the manager to joinDistributedSystem()
+         * later in this method
+         */
+        final MembershipLocatorImpl locatorImpl =
+            (MembershipLocatorImpl) this.membershipLocator;
+        locatorImpl.setServices(this);
+      }
+
-  public Locator<ID> getLocator() {
-    return this.locator;
+  public void setLocators(final Locator<ID> locator,
+      final MembershipLocator<ID> membershipLocator) {
+    this.locator = locator;
+    this.membershipLocator = membershipLocator;
-  public void setLocator(Locator<ID> locator) {
-    this.locator = locator;
+  public Locator<ID> getLocator() {
+    return locator;
