GEODE-7803: provide undeprecated internal region create (#4722)

You can now use InternalRegionFactory to create a region configured with InternalRegionArguments. No need to use the deprecated AttributesFactory.
InternalRegionFactory used to be named RegionFactoryImpl.

-import java.io.IOException;
-import org.apache.geode.cache.AttributesFactory;
+import org.apache.geode.cache.RegionShortcut;
+import org.apache.geode.internal.cache.InternalRegionFactory;
-      AttributesFactory<Long, AsyncEvent> factory = new AttributesFactory<Long, AsyncEvent>();
-      factory.setScope(NO_ACK ? Scope.DISTRIBUTED_NO_ACK : Scope.DISTRIBUTED_ACK);
-      factory.setDataPolicy(
-          this.enablePersistence ? DataPolicy.PERSISTENT_REPLICATE : DataPolicy.REPLICATE);
+      RegionShortcut regionShortcut;
+      if (enablePersistence) {
+        regionShortcut = RegionShortcut.REPLICATE_PERSISTENT;
+      } else {
+        regionShortcut = RegionShortcut.REPLICATE;
+      }
+      InternalRegionFactory<Long, AsyncEvent> factory =
+          gemCache.createInternalRegionFactory(regionShortcut);
+      if (NO_ACK) {
+        factory.setScope(Scope.DISTRIBUTED_NO_ACK);
+      }
-      final RegionAttributes<Long, AsyncEvent> ra = factory.create();
+      final RegionAttributes<Long, AsyncEvent> ra = factory.getCreateAttributes();
-        try {
-          this.region = gemCache.createVMRegion(this.regionName, ra,
-              new InternalRegionArguments().setInternalMetaRegion(meta).setDestroyLockFlag(true)
-                  .setSnapshotInputStream(null).setImageTarget(null)
-                  .setIsUsedForSerialGatewaySenderQueue(true).setInternalRegion(true)
-                  .setSerialGatewaySender(sender));
-
-          // Add overflow statistics to the mbean
-          addOverflowStatisticsToMBean(gemCache, sender);
-        } catch (IOException veryUnLikely) {
-          logger.fatal(String.format("Unexpected Exception during init of %s",
-              this.getClass()),
-              veryUnLikely);
-        } catch (ClassNotFoundException alsoUnlikely) {
-          logger.fatal(String.format("Unexpected Exception during init of %s",
-              this.getClass()),
-              alsoUnlikely);
-        }
+        factory
+            .setInternalMetaRegion(meta)
+            .setDestroyLockFlag(true)
+            .setSnapshotInputStream(null)
+            .setImageTarget(null)
+            .setIsUsedForSerialGatewaySenderQueue(true)
+            .setInternalRegion(true)
+            .setSerialGatewaySender(sender);
+        region = factory.create(regionName);
+        // Add overflow statistics to the mbean
+        addOverflowStatisticsToMBean(gemCache, sender);
