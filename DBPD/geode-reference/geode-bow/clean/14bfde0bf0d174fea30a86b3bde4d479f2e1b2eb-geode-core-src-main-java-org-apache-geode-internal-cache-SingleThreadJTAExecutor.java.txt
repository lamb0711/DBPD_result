Merge branch 'release/1.8.0'

-  private void doOps(TXState txState, CancelCriterion cancelCriterion) {
-    beforeCompletion.doOp(txState);
-    afterCompletion.doOp(txState, cancelCriterion);
+  void doOps(TXState txState, CancelCriterion cancelCriterion) {
+    try {
+      beforeCompletion.doOp(txState);
+    } finally {
+      afterCompletion.doOp(txState, cancelCriterion);
+    }
-  public void executeAfterCompletion(CancelCriterion cancelCriterion, int status) {
-    afterCompletion.execute(cancelCriterion, status);
+  public void executeAfterCompletionCommit() {
+    afterCompletion.executeCommit();
+  }
+
+  public void executeAfterCompletionRollback() {
+    afterCompletion.executeRollback();
-  public void cleanup(CancelCriterion cancelCriterion) {
-    afterCompletion.cancel(cancelCriterion);
+  public void cleanup() {
+    afterCompletion.cancel();
