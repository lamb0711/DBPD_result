GEODE-4858: Update *DiskStore commands to use ResultModel and SingleGfshCommand (#1996)


+import org.apache.geode.cache.configuration.CacheConfig;
+import org.apache.geode.cache.configuration.CacheElement;
-import org.apache.geode.distributed.internal.InternalConfigurationPersistenceService;
-import org.apache.geode.management.cli.Result;
+import org.apache.geode.management.cli.SingleGfshCommand;
-import org.apache.geode.management.internal.cli.result.ResultBuilder;
-import org.apache.geode.management.internal.configuration.domain.XmlEntity;
+import org.apache.geode.management.internal.cli.result.model.ResultModel;
-public class DestroyDiskStoreCommand extends InternalGfshCommand {
+public class DestroyDiskStoreCommand extends SingleGfshCommand {
-  public Result destroyDiskStore(
+  public ResultModel destroyDiskStore(
-      return ResultBuilder.createUserErrorResult(CliStrings.NO_MEMBERS_FOUND_MESSAGE);
+      return ResultModel.createError(CliStrings.NO_MEMBERS_FOUND_MESSAGE);
-    Result result = ResultBuilder.buildResult(results);
-    XmlEntity xmlEntity = findXmlEntity(results);
-
-    if (xmlEntity != null) {
-      persistClusterConfiguration(result,
-          () -> ((InternalConfigurationPersistenceService) getConfigurationPersistenceService())
-              .deleteXmlEntity(xmlEntity, groups));
-    }
+    ResultModel result = ResultModel.createMemberStatusResult(results, ifExist);
+    result.setConfigObject(name);
+
+  @Override
+  public void updateClusterConfig(String group, CacheConfig config, Object configObject) {
+    String diskStoreName = (String) configObject;
+    CacheElement.removeElement(config.getDiskStores(), diskStoreName);
+  }
