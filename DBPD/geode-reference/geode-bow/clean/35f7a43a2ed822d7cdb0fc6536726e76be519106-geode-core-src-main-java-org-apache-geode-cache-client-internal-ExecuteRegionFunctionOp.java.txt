GEODE-5884: Adding to function exception list if cause is FunctionInvocationTargetException (#2809)


+
+    // For testing only
+    ExecuteRegionFunctionOpImpl() {
+      super(MessageType.EXECUTE_REGION_FUNCTION,
+          0);
+      resultCollector = null;
+      function = null;
+      isReExecute = (byte) 0;
+      regionName = "";
+      executor = null;
+      hasResult = (byte) 0;
+      failedNodes = null;
+      functionId = null;
+      executeOnBucketSet = true;
+      isHA = true;
+    }
+
-    private void addFunctionException(final FunctionException result) {
-      if (result instanceof FunctionInvocationTargetException) {
+    void addFunctionException(final FunctionException result) {
+      if (result.getCause() instanceof FunctionInvocationTargetException) {
-          this.functionException = new FunctionException(result);
+          this.functionException = result;
-        this.functionException.addException(result);
-      } else if (result instanceof InternalFunctionInvocationTargetException) {
+        this.functionException.addException(result.getCause());
+      } else if (result instanceof FunctionInvocationTargetException) {
+    FunctionException getFunctionException() {
+      return functionException;
+    }
+
