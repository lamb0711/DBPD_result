GEODE-4570: Remove getInstance() singleton call from SecurityServiceFâ€¦ (#1482)

* Also now need to pass a SecurityContext into the Spring environment

-import static org.apache.geode.internal.security.SecurityServiceFactory.findSecurityService;
-
+import javax.servlet.ServletContext;
+import org.springframework.web.context.ServletContextAware;
+import org.apache.geode.annotations.TestingOnly;
+import org.apache.geode.management.internal.JettyHelper;
-public class LoginHandlerInterceptor extends HandlerInterceptorAdapter {
+public class LoginHandlerInterceptor extends HandlerInterceptorAdapter
+    implements ServletContextAware {
-  private final SecurityService securityService;
+  private SecurityService securityService;
-  public LoginHandlerInterceptor() {
-    this(findSecurityService());
-  }
+  public LoginHandlerInterceptor() {}
+  @TestingOnly
+
+  /**
+   * This is used to pass attributes into the Spring/Jetty environment from the instantiating Geode
+   * environment.
+   *
+   * @param servletContext
+   */
+  @Override
+  public void setServletContext(ServletContext servletContext) {
+    securityService = (SecurityService) servletContext
+        .getAttribute(JettyHelper.SECURITY_SERVICE_SERVLET_CONTEXT_PARAM);
+  }
