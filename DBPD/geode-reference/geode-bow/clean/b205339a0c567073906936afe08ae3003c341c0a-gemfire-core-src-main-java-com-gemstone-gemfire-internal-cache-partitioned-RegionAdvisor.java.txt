Merge branch 'feature/GEODE-8' into develop

+import com.gemstone.gemfire.internal.cache.GemFireCacheImpl;
-import com.gemstone.gemfire.internal.cache.control.InternalResourceManager;
+import com.gemstone.gemfire.internal.cache.control.MemoryThresholds;
+import com.gemstone.gemfire.internal.cache.control.ResourceAdvisor;
-      InternalResourceManager irm = getPartitionedRegion().
-                                getCache().getResourceManager();
-      boolean sick = irm.getHeapCriticalMembers().contains(member);
+      ResourceAdvisor advisor = getPartitionedRegion().
+                                getCache().getResourceAdvisor();
+      boolean sick = advisor.adviseCritialMembers().contains(member);
-    if (InternalResourceManager.isLowMemoryExceptionDisabled()) {
+    if (MemoryThresholds.isLowMemoryExceptionDisabled()) {
+  public boolean waitForLocalBucketStorage(int bucketId)
+  {
+    Assert.assertTrue(this.buckets != null);
+    return this.buckets[bucketId].getBucketAdvisor()
+         .waitForStorage();
+  }
+  
