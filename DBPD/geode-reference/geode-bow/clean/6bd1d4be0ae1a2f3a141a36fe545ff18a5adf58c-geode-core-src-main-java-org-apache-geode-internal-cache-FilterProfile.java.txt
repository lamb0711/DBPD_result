GEODE-8247: modified FilterRoutingInfo checks (#5248)

* GEODE-8247: solution and new tests added

* GEODE-8247: fix for failing test

* GEODE-8247: update after comments
+    // bug #50809 - local routing for transactional ops must be done here
+    // because the event isn't available later and we lose the old value for the entry
+    boolean processLocalProfile = false;
-      frInfo = new FilterRoutingInfo();
-      // bug #50809 - local routing for transactional ops must be done here
-      // because the event isn't available later and we lose the old value for the entry
-      final boolean processLocalProfile =
+      processLocalProfile =
+      frInfo = new FilterRoutingInfo();
+    Profile[] tempProfiles = peerProfiles;
+
+    if (processLocalProfile) {
+      tempProfiles = new Profile[peerProfiles.length + 1];
+      for (int i = 0; i < peerProfiles.length; i++) {
+        tempProfiles[i] = peerProfiles[i];
+      }
+      tempProfiles[peerProfiles.length] = localProfile;
+    }
+
-    frInfo = fillInInterestRoutingInfo(event, peerProfiles, frInfo, cacheOpRecipients);
-    if (frInfo == null || !frInfo.hasMemberWithFilterInfo()) {
+    frInfo = fillInInterestRoutingInfo(event, tempProfiles, frInfo, cacheOpRecipients);
+    if (frInfo == null || (!frInfo.hasMemberWithFilterInfo() && !processLocalProfile)) {
