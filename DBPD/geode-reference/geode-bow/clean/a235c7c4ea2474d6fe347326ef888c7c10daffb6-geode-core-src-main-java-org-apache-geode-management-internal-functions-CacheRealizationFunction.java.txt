GEODE-8078: log and report error at the correct place. (#5111)

* For get operation, if cache is not ready, just don't report any runtime information
* do not log the CacheClosedException
+import org.apache.geode.annotations.VisibleForTesting;
+import org.apache.geode.cache.CacheClosedException;
-    RemoteInputStream jarStream = (RemoteInputStream) context.getArguments().get(2);
-    InternalCache cache = (InternalCache) context.getCache();
-    try {
-      if (operation == CacheElementOperation.GET) {
+    // for get operation, caller is expecting RuntimeInfo
+    if (operation == CacheElementOperation.GET) {
+      try {
+        InternalCache cache = (InternalCache) context.getCache();
-      } else {
+      } catch (CacheClosedException e) {
+        // cache not ready or closed already, no need to log and do not return any runtime info
+        context.getResultSender().lastResult(null);
+      } catch (Exception e) {
+        logError("Unable to gather runtime information on this member. ", e);
+        context.getResultSender().lastResult(null);
+      }
+    }
+    // for other operations, caller is expecting RealizationResult
+    else {
+      try {
+        RemoteInputStream jarStream = (RemoteInputStream) context.getArguments().get(2);
+        InternalCache cache = (InternalCache) context.getCache();
+      } catch (CacheClosedException e) {
+        // cache not ready or closed already, no need to log it
+        context.getResultSender().lastResult(new RealizationResult()
+            .setSuccess(false)
+            .setMessage(e.getMessage()));
+      } catch (Exception e) {
+        logError("unable to update cache with the configuration.", e);
+        context.getResultSender().lastResult(new RealizationResult()
+            .setSuccess(false)
+            .setMemberName(context.getMemberName())
+            .setMessage(e.getMessage()));
-    } catch (Exception e) {
-      logger.error(e.getMessage(), e);
-      context.getResultSender().lastResult(new RealizationResult()
-          .setSuccess(false)
-          .setMemberName(context.getMemberName())
-          .setMessage(e.getMessage()));
+  }
+  @VisibleForTesting
+  void logError(String s, Exception e) {
+    logger.error(s, e);
-    // set the membername if this is not a global runtime
+    // set the member name if this is not a global runtime
