GEODE-4059: Changing protobuf handshake to not need communication mode bytes

This closes pull request #1137

Squashed commit of the following:

commit d9f5144cd7f7ddcf42eb7eb5febed531cbf67362
Merge: 6fa9bf6c8 8fd707201
Author: Bruce Schuchardt <bschuchardt@pivotal.io>
Date:   Fri Dec 8 09:34:55 2017 -0800

    Merge branch 'feature/GEODE-4059' of https://github.com/WireBaron/geode into WireBaron-feature/GEODE-4059

commit 8fd707201f0e02b1fdf81c1596f93d3fd9ccb0cf
Author: Brian Rowe <browe@pivotal.io>
Date:   Thu Dec 7 14:53:28 2017 -0800

    Removing extra handshake from a unit test.

    Signed-off-by: Galen O'Sullivan <gosullivan@pivotal.io>

commit 7d07c6f5163d99b92a12ca856a1b397fda6e0eb4
Author: Galen O'Sullivan <gosullivan@pivotal.io>
Date:   Wed Dec 6 16:20:25 2017 -0800

    GEODE-4059: Changing protobuf handshake to not need communication mode bytes

    - Moved handshake proto messages into top level handshake.proto
    - Changed protobuf communication mode to match leading byte of handshake
    - Updated handshake handler and tests to handle changes
    - Modified locator to accept protobuf communication mode in lieu of gossip

    Signed-off-by: Brian Rowe <browe@pivotal.io>

+   * The first byte of any locator connection will be the high order byte of its gossip version,
+   * which will always be 0. Communication modes should not collide with this value.
+   */
+  ReservedForGossip((byte) 0, "Locator gossip version"),
+  /**
+   * For the new client-server protocol.
+   *
+   * Protobuf handshake messages are specially constructed so that this value will match the first
+   * byte sent, allowing clients to start protobuf connections with a handshake instead of
+   * communication mode bytes.
+   */
+  ProtobufClientServerProtocol((byte) 10, "Protobuf client"),
+  /**
-  ClientToServerForQueue((byte) 107, "clientToServerForQueue"),
-  /**
-   * For the new client-server protocol, which ignores the usual handshake mechanism.
-   */
-  ProtobufClientServerProtocol((byte) 110, "Protobuf client");
+  ClientToServerForQueue((byte) 107, "clientToServerForQueue");
-    return 100 <= mode && mode <= 110;
+    return (100 <= mode && mode <= 107) || mode == 10;
+      case 10:
+        return ProtobufClientServerProtocol;
-      case 110:
-        return ProtobufClientServerProtocol;
