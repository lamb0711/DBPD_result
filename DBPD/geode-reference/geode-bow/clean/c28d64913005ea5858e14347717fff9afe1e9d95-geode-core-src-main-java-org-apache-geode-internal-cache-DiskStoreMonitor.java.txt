Merge branch 'release/1.4.0'

-   * 
+   *
-   * 
+   *
-      long min = getMinimumSpace();
+      long minMegabytes = getMinimumSpace();
+      final long minBytes = minMegabytes * 1024 * 1024;
-            min);
+            minMegabytes);
-      boolean belowMin = remaining < 1024 * 1024 * min;
+      boolean belowMin = remaining < minBytes;
-      handleStateChange(next, pct);
+      String criticalMessage = null;
+      if (next == DiskState.CRITICAL) {
+        if (belowMin) {
+          criticalMessage = "the file system only has " + remaining
+              + " bytes free which is below the minimum of " + minBytes + ".";
+        } else {
+          criticalMessage = "the file system is " + pct
+              + " full, which exceeds the critical threshold of " + critical + "%.";
+        }
+      }
+      handleStateChange(next, pct, criticalMessage);
-    protected abstract void handleStateChange(DiskState next, String pct);
+    protected abstract void handleStateChange(DiskState next, String pct, String criticalMessage);
-    protected void handleStateChange(DiskState next, String pct) {
+    protected void handleStateChange(DiskState next, String pct, String critcalMessage) {
-    protected void handleStateChange(DiskState next, String pct) {
+    protected void handleStateChange(DiskState next, String pct, String criticalMessage) {
-      String msg = "Critical disk usage threshold exceeded for volume "
-          + dir.getDir().getAbsolutePath() + ": " + pct + " full";
-
-          // TODO: this is weird...
+          String msg = "Critical disk usage threshold exceeded for volume "
+              + dir.getDir().getAbsolutePath() + ": " + criticalMessage;
