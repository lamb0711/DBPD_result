GEODE-5070: Support --member option for describe & list jdbc connectoâ€¦ (#1798)

    When cluster configuration service is disabled user
    have to provide --member option in-order to describe
    and list connections and mappings.
+import java.util.List;
+
+import org.apache.geode.distributed.DistributedMember;
+import org.apache.geode.management.cli.ConverterHint;
+  static final String DESCRIBE_MAPPING_MEMBER__HELP =
+      "Member(s) from which the specified jdbc mapping is retrieved.";
-  public Result describeMapping(@CliOption(key = DESCRIBE_MAPPING__REGION_NAME, mandatory = true,
-      help = DESCRIBE_MAPPING__REGION_NAME__HELP) String regionName) {
+  public Result describeMapping(
+      @CliOption(key = DESCRIBE_MAPPING__REGION_NAME, mandatory = true,
+          help = DESCRIBE_MAPPING__REGION_NAME__HELP) String regionName,
+      @CliOption(key = {CliStrings.MEMBER}, optionContext = ConverterHint.MEMBERIDNAME,
+          help = DESCRIBE_MAPPING_MEMBER__HELP) String onMember) {
+    // when member is specified, we go to each member and describe what are on the members
+    if (onMember != null) {
+      DistributedMember member = getMember(onMember);
+      if (member == null) {
+        return ResultBuilder.createUserErrorResult(CliStrings.NO_MEMBERS_FOUND_MESSAGE);
+      }
+
+      List<?> result =
+          (List<?>) executeFunction(new DescribeMappingFunction(), regionName, member).getResult();
+      ConnectorService.RegionMapping mapping = (ConnectorService.RegionMapping) result.get(0);
+      CompositeResultData resultData = ResultBuilder.createCompositeResultData();
+      fillResultData(mapping, resultData);
+
+      return ResultBuilder.buildResult(resultData);
+    }
+
+    // otherwise, use cluster configuration to describe the connections
-      return ResultBuilder.createInfoResult("cluster configuration service is not running");
+      return ResultBuilder.createInfoResult(
+          "cluster configuration service is not running. Use --member option to describe mappings on specific members.");
