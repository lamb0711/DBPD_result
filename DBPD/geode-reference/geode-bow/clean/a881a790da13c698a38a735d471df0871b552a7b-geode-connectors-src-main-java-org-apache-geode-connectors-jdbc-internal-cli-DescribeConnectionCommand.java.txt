GEODE-5070: Support --member option for describe & list jdbc connectoâ€¦ (#1798)

    When cluster configuration service is disabled user
    have to provide --member option in-order to describe
    and list connections and mappings.
+import java.util.List;
+
+import org.apache.logging.log4j.Logger;
+import org.apache.geode.distributed.DistributedMember;
+import org.apache.geode.internal.logging.LogService;
+import org.apache.geode.management.cli.ConverterHint;
+  private static Logger logger = LogService.getLogger();
+  static final String DESCRIBE_CONNECTION_MEMBER__HELP =
+      "Member(s) from which the specified jdbc connections is retrieved.";
-  public Result describeConnection(@CliOption(key = DESCRIBE_CONNECTION__NAME, mandatory = true,
-      help = DESCRIBE_CONNECTION__NAME__HELP) String name) {
+  public Result describeConnection(
+      @CliOption(key = DESCRIBE_CONNECTION__NAME, mandatory = true,
+          help = DESCRIBE_CONNECTION__NAME__HELP) String name,
+      @CliOption(key = {CliStrings.MEMBER}, optionContext = ConverterHint.MEMBERIDNAME,
+          help = DESCRIBE_CONNECTION_MEMBER__HELP) String onMember) {
+    // when member is specified, we go to each member and describe what are on the members
+    if (onMember != null) {
+      DistributedMember member = getMember(onMember);
+      if (member == null) {
+        return ResultBuilder.createUserErrorResult(CliStrings.NO_MEMBERS_FOUND_MESSAGE);
+      }
+
+      List<?> result =
+          (List<?>) executeFunction(new DescribeConnectionFunction(), name, member).getResult();
+      ConnectorService.Connection connection = (ConnectorService.Connection) result.get(0);
+      CompositeResultData resultData = ResultBuilder.createCompositeResultData();
+      fillResultData(connection, resultData);
+
+      return ResultBuilder.buildResult(resultData);
+    }
+
+    // otherwise, use cluster configuration to describe the connections
-      return ResultBuilder.createInfoResult("cluster configuration service is not running");
+      return ResultBuilder.createInfoResult(
+          "cluster configuration service is not running. Use --member option to describe connections on specific members.");
