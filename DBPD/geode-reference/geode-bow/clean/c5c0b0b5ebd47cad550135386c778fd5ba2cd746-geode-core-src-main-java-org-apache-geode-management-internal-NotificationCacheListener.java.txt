Revert "GEODE-7710: Fix race condition in federation of MXBeans (#4807)" (#4832)

* Revert "GEODE-7710: Fix race condition in sending JMX notifications (#4808)"

This reverts commit ff6b0c87cef91158be084a2d8ea8d9936a095e41.

* Revert "GEODE-7710: Fix race condition in federation of MXBeans (#4807)"

This reverts commit 683113abe788d4925ad5a677fa82a525dd5d3a49.
+
-import org.apache.geode.annotations.VisibleForTesting;
+import org.apache.geode.cache.CacheListener;
-import org.apache.geode.cache.util.CacheListenerAdapter;
+import org.apache.geode.cache.RegionEvent;
+ *
-class NotificationCacheListener extends CacheListenerAdapter<NotificationKey, Notification> {
+public class NotificationCacheListener implements CacheListener<NotificationKey, Notification> {
-  private final NotificationHubClient notificationHubClient;
+  /**
+   * For the
+   */
+  private NotificationHubClient notifClient;
-  NotificationCacheListener(MBeanProxyFactory mBeanProxyFactory) {
-    this(new NotificationHubClient(mBeanProxyFactory));
-  }
+  private volatile boolean readyForEvents;
-  @VisibleForTesting
-  NotificationCacheListener(NotificationHubClient notificationHubClient) {
-    this.notificationHubClient = notificationHubClient;
+  public NotificationCacheListener(MBeanProxyFactory proxyHelper) {
+
+    notifClient = new NotificationHubClient(proxyHelper);
+    this.readyForEvents = false;
+
-    notificationHubClient.sendNotification(event);
+    if (!readyForEvents) {
+      return;
+    }
+    notifClient.sendNotification(event);
+
+  }
+
+  @Override
+  public void afterDestroy(EntryEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterInvalidate(EntryEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterRegionClear(RegionEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterRegionCreate(RegionEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterRegionDestroy(RegionEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterRegionInvalidate(RegionEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
+  }
+
+  @Override
+  public void afterRegionLive(RegionEvent<NotificationKey, Notification> event) {
+    // TODO Auto-generated method stub
+
-    notificationHubClient.sendNotification(event);
+    if (!readyForEvents) {
+      return;
+    }
+    notifClient.sendNotification(event);
+
+
+  @Override
+  public void close() {
+    // TODO Auto-generated method stub
+
+  }
+
+  public void markReady() {
+    readyForEvents = true;
+  }
+
