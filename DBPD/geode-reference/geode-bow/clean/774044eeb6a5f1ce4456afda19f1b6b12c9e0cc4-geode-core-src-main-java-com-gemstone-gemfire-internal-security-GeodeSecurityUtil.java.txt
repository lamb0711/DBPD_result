Geode-1569: require principal to be Serializable so that post process can happen in a remote server

+import java.io.Serializable;
-import java.security.Principal;
+import org.apache.geode.security.PostProcessor;
-import org.apache.geode.security.PostProcessor;
-    if(!needPostProcess())
+    return postProcess(null, regionPath, key, value, valueIsSerialized);
+  }
+
+  public static Object postProcess(Serializable principal, String regionPath, Object key, Object value, boolean valueIsSerialized) {
+    if (!needPostProcess())
-    Subject subject = getSubject();
-
-    if(subject == null)
-      return value;
+    if (principal == null) {
+      Subject subject = getSubject();
+      if (subject == null)
+        return value;
+      principal = (Serializable) subject.getPrincipal();
+    }
-        Object newObj = postProcessor.processRegionValue((Principal)subject.getPrincipal(), regionName, key,  oldObj);
+        Object newObj = postProcessor.processRegionValue(principal, regionName, key,  oldObj);
-      newValue = postProcessor.processRegionValue((Principal) subject.getPrincipal(), regionName, key, value);
+      newValue = postProcessor.processRegionValue(principal, regionName, key, value);
