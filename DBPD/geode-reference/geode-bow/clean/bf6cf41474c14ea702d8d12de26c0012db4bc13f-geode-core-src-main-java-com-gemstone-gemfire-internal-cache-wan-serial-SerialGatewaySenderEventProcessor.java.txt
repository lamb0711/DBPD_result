GEODE-1678: Fix offheap memory leak when gateway sender events failed to be enqueued to GatewaySenderQueue.

-              queuePrimaryEvent(gatewayEvent);
-              queuedEvent = true;
+              queuedEvent = queuePrimaryEvent(gatewayEvent);
-      queuePrimaryEvent(senderEvent);
+      
+      boolean queuedEvent =false;
+      try {
+        queuedEvent = queuePrimaryEvent(senderEvent);
+      } finally {
+        //When queuePrimaryEvent() failed with some exception, it could
+        //occur after the GatewaySenderEventImpl is put onto the queue.
+        //In that case, the GatewaySenderEventImpl could be released here,
+        //and IllegalStateException could be thrown if getDeserializedValue is called
+        //when the event is accessed through the region queue.
+        if (!queuedEvent) {
+          GatewaySenderEventImpl.release(senderEvent);
+        }
+      }
-  private void queuePrimaryEvent(GatewaySenderEventImpl gatewayEvent)
+  private boolean queuePrimaryEvent(GatewaySenderEventImpl gatewayEvent)
-      return;
+      return false;
+    boolean putDone = false;
-      this.queue.put(gatewayEvent);
+      putDone = this.queue.put(gatewayEvent);      
+    return putDone;
