Feature/geode 7258 2 (#4250)

GEODE-7258: The function retry logic is modified to handle exception
thrown, while trying to connect to a server thats shutdown/closed.

    Co-authored-by: Anil <agingade@pivotal.io>
    Co-authored-by: Xiaojian Zhou <gzhou@pivotal.io>

-import org.apache.geode.cache.client.PoolFactory;
+  private static final int MAX_RETRY_INITIAL_VALUE = -1;
+
-   *
-   * @param pool the pool to use to communicate with the server.
-   * @param resultCollector is used to collect the results from the Server
-   * @param maxRetryAttempts Maximum number of retry attempts
-      int maxRetryAttempts, boolean isHA,
+      int retryAttempts, boolean isHA,
+    int maxRetryAttempts = retryAttempts > 0 ? retryAttempts : MAX_RETRY_INITIAL_VALUE;
-        if (maxRetryAttempts == PoolFactory.DEFAULT_RETRY_ATTEMPTS) {
-          // If the retryAttempt is set to default(-1). Try it on all servers once.
-          // Calculating number of servers when function is re-executed as it involves
-          // messaging locator.
-          maxRetryAttempts = ((PoolImpl) pool).getConnectionSource().getAllServers().size() - 1;
+        if (maxRetryAttempts == MAX_RETRY_INITIAL_VALUE) {
+          maxRetryAttempts = ((PoolImpl) pool).calculateRetryAttempts(se);
