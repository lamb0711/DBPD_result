Merge branch 'develop' of http://git-wip-us.apache.org/repos/asf/incubator-geode into develop

+  public  static final String INIT_FILE_PROPERTY            = "gfsh.init-file";
-
+  public  static final String DEFAULT_INIT_FILE_NAME 	= ".gfsh2rc";	
-
+  private String initFileName;
-    this(HISTORY_FILE.getAbsolutePath(), DEFAULT_PROMPT, MAX_HISTORY_SIZE, null, null, null, null);
+    this(HISTORY_FILE.getAbsolutePath(), DEFAULT_PROMPT, MAX_HISTORY_SIZE, null, null, null, null, null);
-      Integer logCount) {
+      Integer logCount, String initFileName) {
+    if (initFileName == null) {
+      this.initFileName = this.searchForInitFileName();
+    } else {
+      this.initFileName = initFileName;
+    }
+
+  public String getInitFileName() {
+    return initFileName;
+  }
+
+    builder.append(
+        "init-file=" + (getInitFileName() == null ? "" : getInitFileName()))
+        .append(Gfsh.LINE_SEPARATOR);
-    builder.append(" [historyFileName=");
+    builder.append(" [initFileName=");
+    builder.append(getInitFileName() == null ? "" : getInitFileName());
+    builder.append(", historyFileName=");
-}
+  /*
+   * Search for the init file using the system property, then the current
+   * directory, then the home directory. It need not exist at all.
+   */
+  private String searchForInitFileName() {
+    String homeDirectoryInitFileName = System.getProperty("user.home")
+        + File.separatorChar + DEFAULT_INIT_FILE_NAME;
+    String currentDirectoryInitFileName = System.getProperty("user.dir")
+        + File.separatorChar + DEFAULT_INIT_FILE_NAME;
+    String systemPropertyInitFileName = System.getProperty(INIT_FILE_PROPERTY);
+
+    String[] initFileNames = { systemPropertyInitFileName,
+        currentDirectoryInitFileName, homeDirectoryInitFileName };
+
+    for (String initFileName : initFileNames) {
+      if (IOUtils.isExistingPathname(initFileName)) {
+        return initFileName;
+      }
+    }
+
+    return null;
+  }
+}
