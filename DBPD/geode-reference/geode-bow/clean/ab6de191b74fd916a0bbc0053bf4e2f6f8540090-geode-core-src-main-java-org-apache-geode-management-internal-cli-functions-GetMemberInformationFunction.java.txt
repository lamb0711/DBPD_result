GEODE-6745: Add status to list members output for REST v2 (#3558)


+import org.apache.geode.distributed.LocatorLauncher;
+import org.apache.geode.distributed.ServerLauncher;
-      memberInfo.setProcessId("" + member.getProcessId());
+      memberInfo.setProcessId(member.getProcessId());
-
-      memberInfo.setHeapUsage(Long.toString(bytesToMeg(memUsage.getUsed())));
-      memberInfo.setMaxHeapSize(Long.toString(bytesToMeg(memUsage.getMax())));
-      memberInfo.setInitHeapSize(Long.toString(bytesToMeg(memUsage.getInit())));
+      memberInfo.setHeapUsage(bytesToMeg(memUsage.getUsed()));
+      memberInfo.setMaxHeapSize(bytesToMeg(memUsage.getMax()));
+      memberInfo.setInitHeapSize(bytesToMeg(memUsage.getInit()));
-          String bindAddress = cs.getBindAddress();
-          int port = cs.getPort();
-          boolean isRunning = cs.isRunning();
-
-          CacheServerInfo cacheServerInfo = new CacheServerInfo(bindAddress, port, isRunning);
+          CacheServerInfo cacheServerInfo = new CacheServerInfo(cs);
+
+        ServerLauncher.ServerState state = ServerLauncher.getServerState();
+        if (state != null) {
+          memberInfo.setStatus(state.getStatus().getDescription());
+        }
+
+        LocatorLauncher.LocatorState state = LocatorLauncher.getLocatorState();
+        if (state != null) {
+          memberInfo.setStatus(state.getStatus().getDescription());
+        }
