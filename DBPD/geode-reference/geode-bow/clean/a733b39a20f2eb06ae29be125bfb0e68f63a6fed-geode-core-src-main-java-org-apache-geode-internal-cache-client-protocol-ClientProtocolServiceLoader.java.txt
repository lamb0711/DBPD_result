GEODE-3895: Add Handshake/Message version byte (#1001)

Signed-off-by: Galen O'Sullivan <gosullivan@pivotal.io>
-import org.apache.geode.internal.cache.tier.sockets.ServiceLoadingFailureException;
+import org.apache.geode.internal.cache.client.protocol.exception.ServiceLoadingFailureException;
+import org.apache.geode.internal.cache.client.protocol.exception.ServiceVersionNotFoundException;
-  public ClientProtocolService lookupService() {
+  public ClientProtocolService lookupService(int protocolVersion) {
-    return clientProtocolServices.get(0);
+    ClientProtocolService clientProtocolService = clientProtocolServices.get(0);
+    if (clientProtocolService.getServiceProtocolVersion() != protocolVersion) {
+      throw new ServiceVersionNotFoundException(
+          "The ClientProtocolService doesn't match the requested version.");
+    }
+    return clientProtocolService;
