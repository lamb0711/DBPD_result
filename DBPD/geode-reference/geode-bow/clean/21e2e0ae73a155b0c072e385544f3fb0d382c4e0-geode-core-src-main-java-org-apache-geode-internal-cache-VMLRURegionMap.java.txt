GEODE-4364: extract RegionMapDestroy and add RegionMapDestroyTest (#1347)



-class VMLRURegionMap extends AbstractRegionMap {
+// TODO: change back from public to package-private
+public class VMLRURegionMap extends AbstractRegionMap {
-  VMLRURegionMap(EvictableRegion owner, Attributes attr,
+  public VMLRURegionMap(EvictableRegion owner, Attributes attr,
-  /** used by unit tests */
-  VMLRURegionMap(EvictableRegion owner, Attributes attr, InternalRegionArguments internalRegionArgs,
-      EvictionController evictionController) {
+  public VMLRURegionMap(EvictableRegion owner, Attributes attr,
+      InternalRegionArguments internalRegionArgs, EvictionController evictionController) {
-  protected void initialize(EvictableRegion owner, Attributes attr,
+  protected void initialize(EvictableRegion evictableRegion, Attributes attr,
-    super.initialize(owner, attr, internalRegionArgs, true);
+    if (evictableRegion instanceof InternalRegion) {
+      initialize((InternalRegion) evictableRegion, attr, internalRegionArgs, true);
+    } else {
+      initialize((PlaceHolderDiskRegion) evictableRegion, attr, internalRegionArgs, true);
+    }
-  protected void lruEntryDestroy(RegionEntry re) {
-    final EvictableEntry e = (EvictableEntry) re;
+  public void lruEntryDestroy(RegionEntry regionEntry) {
+    final EvictableEntry e = (EvictableEntry) regionEntry;
-          re.getKey(), getTotalEntrySize(), this.getEvictionList().size(), size(), e.getEntrySize(),
-          !e.isEvicted());
+          regionEntry.getKey(), getTotalEntrySize(), this.getEvictionList().size(), size(),
+          e.getEntrySize(), !e.isEvicted());
-    Token vTok = re.getValueAsToken();
+    Token vTok = regionEntry.getValueAsToken();
-  boolean confirmEvictionDestroy(RegionEntry re) {
+  public boolean confirmEvictionDestroy(RegionEntry regionEntry) {
-    EvictableEntry lruRe = (EvictableEntry) re;
+    EvictableEntry lruRe = (EvictableEntry) regionEntry;
