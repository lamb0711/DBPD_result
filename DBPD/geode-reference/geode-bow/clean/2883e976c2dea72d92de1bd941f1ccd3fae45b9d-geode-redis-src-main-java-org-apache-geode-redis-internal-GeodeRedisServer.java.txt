GEODE-8205: feature flag unsupported Redis commands (#5185)

- In order to enable unsupported Redis commands, set the Java
  system parameter `enable-unsupported-redis-commands=true`.
- The list of un/supported commands can be seen in `RedisCommandType`.

* Introduce RedisClusterStartupRule

Removes boiler plate code for starting a Redis server. By default starts
on an ephemeral port.
- Expose getRedisPort()
- Expose setEnableUnsupported()

Authored-by: Jens Deppe <jdeppe@vmware.com>
Co-authored-by: john Hutchison <hutchisonjo@vmware.com>
+  public static final String ENABLE_REDIS_UNSUPPORTED_COMMANDS_PARAM =
+      "enable-redis-unsupported-commands";
+
+  private static final boolean ENABLE_REDIS_UNSUPPORTED_COMMANDS =
+      Boolean.getBoolean(ENABLE_REDIS_UNSUPPORTED_COMMANDS_PARAM);
+
+  private boolean allowUnsupportedCommands = false;
+
-
-  private boolean started;
+  private boolean started;
+
+  public void setAllowUnsupportedCommands(boolean allowUnsupportedCommands) {
+    this.allowUnsupportedCommands = allowUnsupportedCommands;
+  }
+
+  /**
+   * Precedence of the internal property overrides the global system property.
+   */
+  public boolean allowUnsupportedCommands() {
+    if (allowUnsupportedCommands) {
+      return true;
+    }
+
+    return ENABLE_REDIS_UNSUPPORTED_COMMANDS;
+  }
+
-      Future<?> c = workerGroup.shutdownGracefully();
-      Future<?> c2 = bossGroup.shutdownGracefully();
+      workerGroup.shutdownGracefully();
+      Future<?> bossFuture = bossGroup.shutdownGracefully();
-      c.syncUninterruptibly();
-      c2.syncUninterruptibly();
+      bossFuture.syncUninterruptibly();
