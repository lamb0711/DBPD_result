GEODE-6779: fix issue with Bean check variations (#3798)

Co-authored-by: Peter Tran <ptran@pivotal.io>
Co-authored-by: Joris Melchior <joris.melchior@gmail.com>
+import java.util.stream.Stream;
+import org.apache.logging.log4j.Logger;
+import org.apache.geode.internal.logging.LogService;
+import org.apache.geode.management.DistributedSystemMXBean;
+  private static final Logger logger = LogService.getLogger();
+
+  public boolean diskStoreBeanAndMemberBeanDiskStoreExists(DistributedSystemMXBean dsMXBean,
+      String memberName,
+      String diskStore) {
+    return diskStoreBeanExists(dsMXBean, memberName, diskStore) &&
+        memberBeanDiskStoreExists(dsMXBean, memberName, diskStore);
+  }
+
+  private boolean diskStoreBeanExists(DistributedSystemMXBean dsMXBean, String memberName,
+      String diskStore) {
+    try {
+      dsMXBean.fetchDiskStoreObjectName(memberName, diskStore);
+      return true;
+    } catch (Exception e) {
+      if (!e.getMessage().toLowerCase().contains("not found")) {
+        logger.warn("Unable to retrieve Disk Store ObjectName for member: {}, diskstore: {} - {}",
+            memberName, diskStore, e.getMessage());
+      }
+    }
+    return false;
+  }
+
+  private boolean memberBeanDiskStoreExists(DistributedSystemMXBean dsMXBean, String memberName,
+      String diskStore) {
+    return (Stream.of(dsMXBean.listMemberDiskstore().get(memberName))
+        .filter(dsName -> dsName.equals(diskStore))
+        .findFirst().orElse(null) != null);
+  }
