GEODE-7992: test Redis EXISTS (#4962)


Co-authored-by: Murtuza Boxwala <1mboxwala2@gmail.com>
-  private final int EXISTS = 1;
-
-  private final int NOT_EXISTS = 0;
-    List<byte[]> commandElems = command.getProcessedCommand();
+    List<ByteArrayWrapper> commandElems = command.getProcessedCommandWrappers();
-    ByteArrayWrapper key = command.getKey();
-    boolean exists = context.getKeyRegistrar().isRegistered(key);
+    long existsCount = commandElems
+        .subList(1, commandElems.size())
+        .stream()
+        .filter(key -> context.getKeyRegistrar().isRegistered(key))
+        .count();
-    if (exists) {
-      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), EXISTS));
-    } else {
-      command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), NOT_EXISTS));
-    }
+    command.setResponse(Coder.getIntegerResponse(context.getByteBufAllocator(), existsCount));
