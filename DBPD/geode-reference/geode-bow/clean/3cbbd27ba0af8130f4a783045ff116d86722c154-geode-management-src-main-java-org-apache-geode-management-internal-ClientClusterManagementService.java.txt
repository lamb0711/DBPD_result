GEODE-7075: 'class' field should not be part of json results (#4011)


+import static org.apache.geode.management.configuration.AbstractConfiguration.URI_VERSION;
+import static org.apache.geode.management.internal.Constants.INCLUDE_CLASS_HEADER;
+
+import org.springframework.http.HttpEntity;
+import org.springframework.http.HttpHeaders;
-        .postForEntity(endPoint, config, ClusterManagementRealizationResult.class)
+        .exchange(endPoint, HttpMethod.POST, makeEntity(config),
+            ClusterManagementRealizationResult.class)
+  static <T> HttpEntity<T> makeEntity(T config) {
+    HttpHeaders headers = new HttpHeaders();
+    headers.add(INCLUDE_CLASS_HEADER, "true");
+    return new HttpEntity<>(config, headers);
+  }
+
-            null,
+            makeEntity(null),
-        .getForEntity(endPoint + "/?id={id}&group={group}",
+        .exchange(endPoint + "/?id={id}&group={group}", HttpMethod.GET, makeEntity(config),
-        .getForEntity(getIdentityEndPoint(config), ClusterManagementListResult.class)
+        .exchange(getIdentityEndPoint(config), HttpMethod.GET, makeEntity(config),
+            ClusterManagementListResult.class)
-    result =
-        assertSuccessful(
-            restTemplate.postForEntity(AbstractConfiguration.URI_VERSION + op.getEndpoint(),
-                op, ClusterManagementOperationResult.class).getBody());
+    result = assertSuccessful(restTemplate
+        .exchange(URI_VERSION + op.getEndpoint(), HttpMethod.POST, makeEntity(op),
+            ClusterManagementOperationResult.class)
+        .getBody());
-    result = assertSuccessful(
-        restTemplate.getForEntity(AbstractConfiguration.URI_VERSION + opType.getEndpoint(),
-            ClusterManagementListOperationsResult.class).getBody());
+    result = assertSuccessful(restTemplate
+        .exchange(URI_VERSION + opType.getEndpoint(), HttpMethod.GET,
+            makeEntity(null), ClusterManagementListOperationsResult.class)
+        .getBody());
-    return AbstractConfiguration.URI_VERSION + endpoint;
+    return URI_VERSION + endpoint;
-    return AbstractConfiguration.URI_VERSION + uri;
+    return URI_VERSION + uri;
-      return restTemplate.getForEntity(AbstractConfiguration.URI_VERSION + "/ping", String.class)
+      return restTemplate.getForEntity(URI_VERSION + "/ping", String.class)
