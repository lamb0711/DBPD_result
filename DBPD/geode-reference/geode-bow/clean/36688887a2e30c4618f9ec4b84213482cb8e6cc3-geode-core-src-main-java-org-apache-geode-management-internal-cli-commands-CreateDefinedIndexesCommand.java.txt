GEODE-5318: Extract the valid region name (#2054)

        * Incase of entrySet being used in the from clause while defining an index
	* the region name extracted should not include entrySet part.
	* Including the entrySet causes updates to cluster config to fail.
-      RegionConfig region = config.findRegionConfiguration(index.getFromClause());
-      if (region == null) {
+      RegionConfig regionConfig = getValidRegionConfig(index.getFromClause(), config);
+      if (regionConfig == null) {
-      region.getIndexes().add(index);
+      regionConfig.getIndexes().add(index);
+
+  RegionConfig getValidRegionConfig(String regionPath, CacheConfig cacheConfig) {
+    // Check to see if the region path contains an alias e.g "/region1 r1"
+    // Then the first string will be the regionPath
+    String[] regionPathTokens = regionPath.trim().split(" ");
+    regionPath = regionPathTokens[0];
+    // check to see if the region path is in the form of "--region=region.entrySet() z"
+    RegionConfig regionConfig = cacheConfig.findRegionConfiguration(regionPath);
+    while (regionPath.contains(".") && (regionConfig) == null) {
+      regionPath = regionPath.substring(0, regionPath.lastIndexOf("."));
+      regionConfig = cacheConfig.findRegionConfiguration(regionPath);
+    }
+    return regionConfig;
+  }
