GEODE-4582 Remove singleton calls from product code

Removing calls to find an InternalDistributedSystem from membership
classes.  This also addresses GEODE-1753 "Clean up initialization of GMS
Services log writer", GEODE-4581 and GEODE-4562.

+import org.apache.geode.LogWriter;
-import org.apache.geode.distributed.internal.DistributionConfig;
+import org.apache.geode.distributed.internal.InternalDistributedSystem;
-import org.apache.geode.distributed.internal.membership.gms.locator.GMSLocator;
-import org.apache.geode.internal.logging.InternalLogWriter;
-  private static InternalLogWriter staticLogWriter;
-  private static InternalLogWriter staticSecurityLogWriter;
-
+  private final InternalDistributedSystem distributedSystem;
-  private InternalLogWriter logWriter;
-  private InternalLogWriter securityLogWriter;
+  private LogWriter logWriter;
+  private LogWriter securityLogWriter;
+    this.distributedSystem = null;
-  public Services(DistributedMembershipListener listener, DistributionConfig config,
+  public Services(DistributedMembershipListener listener,
+      InternalDistributedSystem system,
+    this.distributedSystem = system;
-    this.config = new ServiceConfig(transport, config);
+    this.config = new ServiceConfig(transport, system.getConfig());
+    this.logWriter = distributedSystem.getLogWriter();
+    this.securityLogWriter = distributedSystem.getSecurityLogWriter();
-    // InternalDistributedSystem establishes this log writer at boot time
-    // TODO fix this so that IDS doesn't know about Services
-    this.securityLogWriter = staticSecurityLogWriter;
-    staticSecurityLogWriter = null;
-    this.logWriter = staticLogWriter;
-    staticLogWriter = null;
-  public static void setLogWriter(InternalLogWriter writer) {
-    staticLogWriter = writer;
-  }
-
-  public static void setSecurityLogWriter(InternalLogWriter securityWriter) {
-    staticSecurityLogWriter = securityWriter;
+  public InternalDistributedSystem getDistributedSystem() {
+    return this.distributedSystem;
-  public InternalLogWriter getLogWriter() {
+  /**
+   * returns the DistributedSystem's log writer
+   *
+   * @deprecated use a log4j-based LogService
+   */
+  public LogWriter getLogWriter() {
-  public InternalLogWriter getSecurityLogWriter() {
+  /**
+   * returns the DistributedSystem's security log writer
+   *
+   * @deprecated use a log4j-based LogService
+   */
+  public LogWriter getSecurityLogWriter() {
-  public byte[] getPublicKey(InternalDistributedMember mbr) {
-    if (this.locator != null) {
-      return ((GMSLocator) this.locator).getPublicKey(mbr);
-    }
-    return null;
-  }
-
