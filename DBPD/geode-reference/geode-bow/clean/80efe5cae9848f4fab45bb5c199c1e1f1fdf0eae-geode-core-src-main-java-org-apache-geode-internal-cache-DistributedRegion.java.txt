Revert "Revert "GEODE-6807: cache adviseUpdate and adviseAllEventsOrCached" (#4189)" (#4212)

* This reverts commit e225ffcd5dc8f15ae59b46dc24baefcc253801f2.
-    cacheProfile.inRecovery = getImageState().getInRecovery();
+
+    boolean newInRecovery = getImageState().getInRecovery();
+    if (cacheProfile.getInRecovery() != newInRecovery) {
+      distAdvisor.incInRecoveryVersion();
+    }
+    cacheProfile.setInRecovery(newInRecovery);
