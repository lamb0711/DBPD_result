GEODE-2261: do not use remote function calls to update the shared configuration

+import java.util.concurrent.atomic.AtomicReference;
-import org.apache.geode.management.internal.cli.shell.Gfsh;
-import org.apache.geode.management.internal.configuration.SharedConfigurationWriter;
-public class QueueCommands implements CommandMarker {
-  private Gfsh getGfsh() {
-    return Gfsh.getCurrentInstance();
-  }
+public class QueueCommands extends AbstractCommandsSupport {
-      XmlEntity xmlEntity = null;
+      AtomicReference<XmlEntity> xmlEntity = new AtomicReference<>();
-          if (xmlEntity == null) {
-            xmlEntity = result.getXmlEntity();
+          if (xmlEntity.get() == null) {
+            xmlEntity.set(result.getXmlEntity());
-      if (xmlEntity != null) {
-        result
-            .setCommandPersisted((new SharedConfigurationWriter()).addXmlEntity(xmlEntity, groups));
+      if (xmlEntity.get() != null) {
+        persistClusterConfiguration(result,
+            () -> getSharedConfiguration().addXmlEntity(xmlEntity.get(), groups));
