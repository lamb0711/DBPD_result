GEODE-2272: Fix Pulse data browser export

* Pulse no longer loads all results into the browser before generating a results file for download.

This closes #339

+import java.util.concurrent.CountDownLatch;
+import java.util.concurrent.TimeUnit;
+  private CountDownLatch clusterHasBeenInitialized;
+
-  /**
-   * Default constructor only used for testing
-   */
-  public Cluster() {}
-
+    this.clusterHasBeenInitialized = new CountDownLatch(1);
+  public void waitForInitialization(long timeout, TimeUnit unit) throws InterruptedException {
+    clusterHasBeenInitialized.await(timeout, unit);
+  }
+
-    while (!this.stopUpdates) {
-      try {
-        if (!this.updateData()) {
-          this.stale++;
-        } else {
-          this.stale = 0;
+    try {
+      while (!this.stopUpdates) {
+        try {
+          if (!this.updateData()) {
+            this.stale++;
+          } else {
+            this.stale = 0;
+          }
+        } catch (Exception e) {
+          if (LOGGER.infoEnabled()) {
+            LOGGER.info("Exception Occurred while updating cluster data : " + e.getMessage());
+          }
-      } catch (Exception e) {
-        if (LOGGER.infoEnabled()) {
-          LOGGER.info("Exception Occurred while updating cluster data : " + e.getMessage());
+
+        clusterHasBeenInitialized.countDown();
+        try {
+          Thread.sleep(POLL_INTERVAL);
+        } catch (InterruptedException e) {
+          if (LOGGER.infoEnabled()) {
+            LOGGER.info("InterruptedException Occurred : " + e.getMessage());
+          }
-      try {
-        Thread.sleep(POLL_INTERVAL);
-      } catch (InterruptedException e) {
-        if (LOGGER.infoEnabled()) {
-          LOGGER.info("InterruptedException Occurred : " + e.getMessage());
-        }
+      if (LOGGER.infoEnabled()) {
+        LOGGER.info(resourceBundle.getString("LOG_MSG_STOP_THREAD_UPDATES") + " :: "
+            + this.serverName + ":" + this.port);
-    }
-
-    if (LOGGER.infoEnabled()) {
-      LOGGER.info(resourceBundle.getString("LOG_MSG_STOP_THREAD_UPDATES") + " :: " + this.serverName
-          + ":" + this.port);
+    } finally {
+      clusterHasBeenInitialized.countDown();
