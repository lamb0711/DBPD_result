GEODE-8301: add redis stats (#5307)


+import org.apache.geode.distributed.internal.InternalDistributedSystem;
+import org.apache.geode.internal.statistics.StatisticsClock;
+import org.apache.geode.internal.statistics.StatisticsClockFactory;
+  private final RedisStats redisStats;
+    redisStats = createStats(cache);
-    CommandFunction.register(stripedExecutor);
-    RenameFunction.register(stripedExecutor);
+    CommandFunction.register(stripedExecutor, redisStats);
+    RenameFunction.register(stripedExecutor, redisStats);
-    passiveExpirationManager = new PassiveExpirationManager(regionProvider.getDataRegion());
+    passiveExpirationManager =
+        new PassiveExpirationManager(regionProvider.getDataRegion(), redisStats);
-        this::allowUnsupportedCommands, this::shutdown, port, bindAddress);
+        this::allowUnsupportedCommands, this::shutdown, port, bindAddress, redisStats);
+  private static RedisStats createStats(InternalCache cache) {
+    InternalDistributedSystem system = cache.getInternalDistributedSystem();
+    StatisticsClock statisticsClock =
+        StatisticsClockFactory.clock(system.getConfig().getEnableTimeStatistics());
+    return new RedisStats(system.getStatisticsManager(), statisticsClock);
+  }
+
+      redisStats.close();
