GEODE-7537: use dm.getCache instead of CacheFactory.getAnyInstance (#4486)



-import org.apache.geode.cache.CacheFactory;
+import org.apache.geode.internal.cache.InternalCache;
-    return (GemFireCacheImpl) CacheFactory.getAnyInstance();
+    return (GemFireCacheImpl) region.getDistributionManager().getCache();
-    private Cache getCache() {
-      return CacheFactory.getAnyInstance();
+    Cache getCache() {
+      return dmgr.getCache();
-        result = getSynchronizationEvents();
+        result = getSynchronizationEvents(dm.getCache());
-    private Object getSynchronizationEvents() {
+    private Object getSynchronizationEvents(InternalCache cache) {
-      GemFireCacheImpl gfci = (GemFireCacheImpl) getCache();
-      LocalRegion region = (LocalRegion) gfci.getRegion(this.regionPath);
+      LocalRegion region = (LocalRegion) cache.getRegion(this.regionPath);
-      for (GatewaySender sender : gfci.getAllGatewaySenders()) {
+      for (GatewaySender sender : cache.getAllGatewaySenders()) {
-    private Cache getCache() {
-      return CacheFactory.getAnyInstance();
-    }
-
