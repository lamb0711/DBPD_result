GEODE-8219: Apply RedisResponse to all redis string commands (#5206)


+import org.apache.geode.redis.internal.RedisResponse;
-  public void executeCommand(Command command, ExecutionHandlerContext context) {
+  public RedisResponse executeCommandWithResponse(Command command,
+      ExecutionHandlerContext context) {
-      command.setResponse(Coder.getErrorResponse(context.getByteBufAllocator(), ex.getMessage()));
-      return;
+      return RedisResponse.error(ex.getMessage());
-    doSet(command, context, keyToSet, valueToSet, redisStringCommands, setOptions);
+    return doSet(command, context, keyToSet, valueToSet, redisStringCommands, setOptions);
-  private void doSet(Command command, ExecutionHandlerContext context, ByteArrayWrapper key,
+  private RedisResponse doSet(Command command, ExecutionHandlerContext context,
+      ByteArrayWrapper key,
-      command.setResponse(Coder.getSimpleStringResponse(context.getByteBufAllocator(), SUCCESS));
-    } else {
-      command.setResponse(Coder.getNilResponse(context.getByteBufAllocator()));
+      return RedisResponse.string(SUCCESS);
+
+    return RedisResponse.nil();
