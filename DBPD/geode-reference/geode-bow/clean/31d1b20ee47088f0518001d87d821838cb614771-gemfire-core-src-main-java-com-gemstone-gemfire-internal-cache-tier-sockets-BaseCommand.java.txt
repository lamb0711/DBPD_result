Initial import of geode-1.0.0.0-SNAPSHOT-2.
All the new sub-project directories (like jvsd) were not imported.
A diff was done to confirm that this commit is exactly the same as
the open directory the snapshot was made from.

+import com.gemstone.gemfire.internal.offheap.OffHeapHelper;
-    LocalRegion r = clientEvent.getRegion();    
-    VersionTag tag = r.findVersionTagForClientEvent(clientEvent.getEventId());
+    LocalRegion r = clientEvent.getRegion();
+    VersionTag tag =  null;
+    if ((clientEvent.getVersionTag() != null) && (clientEvent.getVersionTag().isGatewayTag())) {
+      tag = r.findVersionTagForGatewayEvent(clientEvent.getEventId());
+    }
+    else {
+      tag = r.findVersionTagForClientEvent(clientEvent.getEventId());
+    }
-    origMsg.flush();
+    origMsg.clearParts();
-    origMsg.flush();
+    origMsg.clearParts();
-    origMsg.flush();
+    origMsg.clearParts();
-        Object data = region.get(entryKey, null, true, true, true, id, versionHolder, true);
+        Object data = region.get(entryKey, null, true, true, true, id, versionHolder, true, false);
-        data = region.get(key, null, true, true, true, id, versionHolder, true);
+        data = region.get(key, null, true, true, true, id, versionHolder, true, false);
-      Object value = region.get(key, null, true, true, true, requestingClient, versionHolder, true);
+      Object value = region.get(key, null, true, true, true, requestingClient, versionHolder, true, false);
+          updateValues(values, key, value, vt);
-          value = ((NonTXEntry)entry).getRegionEntry()._getValue();
+          value = ((NonTXEntry)entry).getRegionEntry()._getValueRetain(region, true);
+          try {
+            updateValues(values, key, value, vt);
+          } finally {
+            // TODO OFFHEAP: in the future we might want to delay this release
+            // until the "values" VersionedObjectList is released.
+            // But for now "updateValues" copies the off-heap value to the heap.
+            OffHeapHelper.release(value);
+          }
-        updateValues(values, key, value, vt);
-              true);
+              true, false);
