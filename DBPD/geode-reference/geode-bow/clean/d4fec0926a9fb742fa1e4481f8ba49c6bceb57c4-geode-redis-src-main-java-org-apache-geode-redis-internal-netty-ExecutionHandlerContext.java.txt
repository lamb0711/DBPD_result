GEODE-8301: add redis stats (#5307)


+import org.apache.geode.redis.internal.RedisStats;
+  private final RedisStats redisStats;
-      EventLoopGroup subscriberGroup, Supplier<Boolean> allowUnsupportedSupplier,
-      Runnable shutdownInvoker, byte[] password) {
+      EventLoopGroup subscriberGroup,
+      Supplier<Boolean> allowUnsupportedSupplier,
+      Runnable shutdownInvoker,
+      RedisStats redisStats,
+      byte[] password) {
+    this.redisStats = redisStats;
+    redisStats.addClient();
+    redisStats.removeClient();
-  private void executeCommand(ChannelHandlerContext ctx, Command command) throws Exception {
+  private void executeCommand(ChannelHandlerContext ctx, Command command) {
-    response = command.execute(this);
-
-    logResponse(response);
-
-    writeToChannel(response);
+    final long start = redisStats.startCommand(command.getCommandType());
+    try {
+      response = command.execute(this);
+      logResponse(response);
+      writeToChannel(response);
+    } finally {
+      redisStats.endCommand(command.getCommandType(), start);
+    }
