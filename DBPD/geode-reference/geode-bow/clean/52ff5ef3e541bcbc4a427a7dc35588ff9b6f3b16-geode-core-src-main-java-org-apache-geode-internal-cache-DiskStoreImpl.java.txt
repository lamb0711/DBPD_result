GEODE-4328: Make backup into a task run by a single thread (#1351)


  * The BackupLock had to acquire and release the underlying lock and keep
  * track of who was supposed to be the true owner of the lock due to the fact
  * that the part of backup that acquired the locks was done on a different
  * thread than the one that release the locks. Since the backup task now is
  * completed in a single thread, we can replace it with a ReentrantLock.
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReentrantLock;
-import org.apache.geode.internal.cache.backup.BackupLock;
-import org.apache.geode.internal.cache.eviction.EvictionCounters;
-  private final BackupLock backupLock = new BackupLock();
+  private final ReentrantLock backupLock = new ReentrantLock();
-  public BackupLock getBackupLock() {
+  public ReentrantLock getBackupLock() {
-    getBackupLock().lockForBackup();
+    getBackupLock().lock();
-    getBackupLock().unlockForBackup();
+    ReentrantLock backupLock = getBackupLock();
+    if (backupLock.isHeldByCurrentThread()) {
+      backupLock.unlock();
+    }
