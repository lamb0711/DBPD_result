Revert "GEODE-1463: Legacy OperationContexts do not set the appropriate Shiro"

This reverts commit 670fae4b3950fa1ce302461312dd1251d8ea2d8a.

-import com.gemstone.gemfire.cache.operations.internal.ResourceOperationContext;
-public abstract class KeyOperationContext extends ResourceOperationContext {
+public abstract class KeyOperationContext extends OperationContext {
+  /** True if this is a post-operation context */
+  private boolean postOperation;
+
-  public KeyOperationContext(OperationCode code, Object key) {
-    this(code, key, false);
+  public KeyOperationContext(Object key) {
+    this.key = key;
+    this.callbackArg = null;
+    this.postOperation = false;
-  protected KeyOperationContext(OperationCode code, Object key, boolean postOperation) {
-    super(Resource.DATA, code, postOperation);
+  public KeyOperationContext(Object key, boolean postOperation) {
+    this.postOperation = postOperation;
+  }
+
+  /**
+   * Return the operation associated with the <code>OperationContext</code>
+   * object.
+   * 
+   * @return The <code>OperationCode</code> of this operation. This is one of
+   *         {@link com.gemstone.gemfire.cache.operations.OperationContext.OperationCode#DESTROY} 
+   *         or {@link com.gemstone.gemfire.cache.operations.OperationContext.OperationCode#CONTAINS_KEY}
+   *         for <code>KeyOperationContext</code>, and one of
+   *         {@link com.gemstone.gemfire.cache.operations.OperationContext.OperationCode#GET} or 
+   *         {@link com.gemstone.gemfire.cache.operations.OperationContext.OperationCode#PUT} for
+   *         <code>KeyValueOperationContext</code>.
+   */
+  @Override
+  public abstract OperationCode getOperationCode();
+
+  /**
+   * True if the context is for post-operation.
+   */
+  @Override
+  public boolean isPostOperation() {
+    return this.postOperation;
+  }
+
+  /**
+   * Set the post-operation flag to true.
+   */
+  protected void setPostOperation() {
+    this.postOperation = true;
