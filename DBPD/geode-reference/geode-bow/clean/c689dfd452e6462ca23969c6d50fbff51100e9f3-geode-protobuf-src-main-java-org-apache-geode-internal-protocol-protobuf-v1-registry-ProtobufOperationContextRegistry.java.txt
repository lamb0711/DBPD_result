GEODE-2999, GEODE-4836: Add PutIfAbsent to the Protobuf protocol.

fix issues with getRequest not properly returning null.

This reverts commit 7a3da494e3b506e8cd485999db7a3cd42e200f85, which
originally reverted 6214a43be9d31fd0be1d133a8f0ad7379ea3f9c2.

This closes #1617

+import org.apache.geode.internal.protocol.protobuf.v1.operations.PutIfAbsentRequestOperationHandler;
-  private Map<ClientProtocol.Message.MessageTypeCase, ProtobufOperationContext> operationContexts =
+  private final Map<MessageTypeCase, ProtobufOperationContext> operationContexts =
-  public ProtobufOperationContext getOperationContext(
-      ClientProtocol.Message.MessageTypeCase apiCase) {
+  public ProtobufOperationContext getOperationContext(MessageTypeCase apiCase) {
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.AUTHENTICATIONREQUEST,
+    operationContexts.put(MessageTypeCase.AUTHENTICATIONREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.DISCONNECTCLIENTREQUEST,
+    operationContexts.put(MessageTypeCase.DISCONNECTCLIENTREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.GETREQUEST,
+    operationContexts.put(MessageTypeCase.GETREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.GETALLREQUEST,
+    operationContexts.put(MessageTypeCase.GETALLREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.PUTREQUEST,
+    operationContexts.put(MessageTypeCase.PUTREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.PUTALLREQUEST,
+    operationContexts.put(MessageTypeCase.PUTALLREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.REMOVEREQUEST,
+    operationContexts.put(MessageTypeCase.REMOVEREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.GETREGIONNAMESREQUEST,
+    operationContexts.put(MessageTypeCase.GETREGIONNAMESREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.GETSIZEREQUEST,
+    operationContexts.put(MessageTypeCase.GETSIZEREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.GETSERVERREQUEST,
+    operationContexts.put(MessageTypeCase.GETSERVERREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.EXECUTEFUNCTIONONREGIONREQUEST,
+    operationContexts.put(MessageTypeCase.EXECUTEFUNCTIONONREGIONREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.EXECUTEFUNCTIONONMEMBERREQUEST,
+    operationContexts.put(MessageTypeCase.EXECUTEFUNCTIONONMEMBERREQUEST,
-    operationContexts.put(ClientProtocol.Message.MessageTypeCase.EXECUTEFUNCTIONONGROUPREQUEST,
+    operationContexts.put(MessageTypeCase.EXECUTEFUNCTIONONGROUPREQUEST,
+
+    operationContexts.put(MessageTypeCase.PUTIFABSENTREQUEST,
+        new ProtobufOperationContext<>(ClientProtocol.Message::getPutIfAbsentRequest,
+            new PutIfAbsentRequestOperationHandler(),
+            opsResp -> ClientProtocol.Message.newBuilder().setPutIfAbsentResponse(opsResp),
+            PutIfAbsentRequestOperationHandler::determineRequiredPermission));
