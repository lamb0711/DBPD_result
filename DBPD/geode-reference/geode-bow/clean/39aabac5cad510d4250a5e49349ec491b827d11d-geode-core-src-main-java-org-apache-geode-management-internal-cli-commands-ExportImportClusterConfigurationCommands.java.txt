Merge remote-tracking branch 'origin/develop' into feature/GEODE-3239

+import java.io.File;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.nio.file.Files;
+import java.nio.file.Path;
+import java.util.Collection;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+
+import org.apache.logging.log4j.Logger;
+import org.springframework.shell.core.annotation.CliCommand;
+import org.springframework.shell.core.annotation.CliOption;
+
+import org.apache.geode.management.internal.cli.shell.Gfsh;
-import org.apache.logging.log4j.Logger;
-import org.springframework.shell.core.annotation.CliCommand;
-import org.springframework.shell.core.annotation.CliOption;
-
-import java.io.File;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.nio.file.Files;
-import java.nio.file.Path;
-import java.util.Collection;
-import java.util.List;
-import java.util.Map;
-import java.util.Set;
-    if (!locator.isSharedConfigurationRunning()) {
+    if (locator == null || !locator.isSharedConfigurationRunning()) {
-      logSevere(e);
+      if (Gfsh.getCurrentInstance() != null) {
+        Gfsh.getCurrentInstance().logSevere(e.getMessage(), e);
+      }
-      logSevere(e);
+      if (Gfsh.getCurrentInstance() != null) {
+        Gfsh.getCurrentInstance().logSevere(e.getMessage(), e);
+      }
-      relatedTopic = {CliStrings.TOPIC_GEODE_CONFIG})
+      isFileUploaded = true, relatedTopic = {CliStrings.TOPIC_GEODE_CONFIG})
-      logSevere(e);
+      if (Gfsh.getCurrentInstance() != null) {
+        Gfsh.getCurrentInstance().logSevere(e.getMessage(), e);
+      }
