GEODE-6269: Extract StatisticsRegistry from IDS (#3068)

Extract StatisticsRegistry from InternalDistributedSystem.

Exclude StatisticsRegistry from entry sizing in ReflectionBasedAutoSerializer.

-import org.apache.geode.internal.OSProcess;
-  /** The StatisticsFactory that created this instance */
-  private final StatisticsManager dSystem;
+  /** The statistics manager that created this instance */
+  private final StatisticsManager statisticsManager;
-   * @param system The distributed system that determines whether or not these statistics are stored
-   *        (and collected) in GemFire shared memory or in the local VM
+   * @param statisticsManager The statistics manager that is creating this instance
-      StatisticsManager system) {
-    super(type, calcTextId(system, textId), calcNumericId(system, numericId), uniqueId, 0);
-    this.dSystem = system;
+      StatisticsManager statisticsManager) {
+    super(type, textId, numericId, uniqueId, 0);
+    this.statisticsManager = statisticsManager;
-  ////////////////////// Static Methods //////////////////////
-
-  private static long calcNumericId(StatisticsManager system, long userValue) {
-    if (userValue != 0) {
-      return userValue;
-    } else {
-      long result = OSProcess.getId(); // fix for bug 30239
-      if (result == 0) {
-        if (system != null) {
-          result = system.getId();
-        }
-      }
-      return result;
-    }
-  }
-
-  private static String calcTextId(StatisticsManager system, String userValue) {
-    if (userValue != null && !userValue.equals("")) {
-      return userValue;
-    } else {
-      if (system != null) {
-        return system.getName();
-      } else {
-        return "";
-      }
-    }
-  }
-
-    if (this.dSystem != null) {
-      dSystem.destroyStatistics(this);
+    if (this.statisticsManager != null) {
+      statisticsManager.destroyStatistics(this);
