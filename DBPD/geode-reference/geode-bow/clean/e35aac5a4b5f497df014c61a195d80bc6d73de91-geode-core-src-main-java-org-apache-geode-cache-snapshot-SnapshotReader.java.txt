Merge branch 'release/1.5.0'

+import org.apache.geode.CancelException;
+import org.apache.geode.cache.Cache;
+import org.apache.geode.cache.CacheFactory;
+import org.apache.geode.internal.cache.InternalCache;
+import org.apache.geode.pdx.internal.TypeRegistry;
-    return GFSnapshot.read(snapshot);
+    TypeRegistry typeRegistry = null;
+    try {
+      Cache cache = CacheFactory.getAnyInstance();
+      if (cache != null) {
+        typeRegistry = ((InternalCache) cache).getPdxRegistry();
+      }
+    } catch (CancelException ignore) {
+      // proceed with no type registry
+    }
+    return GFSnapshot.read(snapshot, typeRegistry);
