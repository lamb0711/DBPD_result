Merge branch 'release/1.8.0'

-import org.apache.geode.cache.query.internal.CqEntry;
-import org.apache.geode.internal.i18n.LocalizedStrings;
-        DefaultQuery.testHook.doTestHook(3);
+        DefaultQuery.testHook.doTestHook(
+            DefaultQuery.TestHook.SPOTS.BEFORE_ADD_OR_UPDATE_MAPPING_OR_DESERIALIZING_NTH_STREAMINGOPERATION,
+            null);
-      QueryMonitor.isQueryExecutionCanceled();
+      QueryMonitor.throwExceptionIfQueryOnCurrentThreadIsCanceled();
-        if (context != null && context.isCqQueryContext()) {
-          result.add(new CqEntry(re.getKey(), value));
-        } else {
-          applyProjection(projAttrib, context, result, value, intermediateResults, isIntersection);
-        }
+        applyCqOrProjection(projAttrib, context, result, value, intermediateResults,
+            isIntersection, re.getKey());
-            LocalizedStrings.IndexCreationMsg_CANCELED_DUE_TO_LOW_MEMORY.toLocalizedString());
+            "Index creation canceled due to low memory");
