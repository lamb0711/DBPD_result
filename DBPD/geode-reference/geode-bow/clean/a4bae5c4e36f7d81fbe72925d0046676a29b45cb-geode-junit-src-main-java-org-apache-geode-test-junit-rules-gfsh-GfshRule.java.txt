GEODE-4934: Throw exception if shutdown fails in GfshRule (#1699)

* GEODE-4934: Throw exception if shutdown fails in GfshRule

The conjecture is that we're missing shutdown problems with a test
that can cause problems in later tests. This change is an attempt
to catch the real error in the sporadic AcceptanceTest failures.

Throw the exception if one or more processes failed the shutdown.

+  private static final String LINE_SEPARATOR = System.getProperty("line.separator");
-    gfshExecutions.stream().map(GfshExecution::getProcess).map(Process::destroyForcibly)
-        .forEach((Process process) -> {
-          try {
-            // Process.destroyForcibly() may not terminate immediately
-            process.waitFor(1, TimeUnit.MINUTES);
-          } catch (InterruptedException ignore) {
-            // We ignore this exception so that we still attempt the rest of the cleanup.
-          }
-        });
-
-    temporaryFolder.delete();
+    final List<String> shutdownExceptions = new ArrayList<>();
+    try {
+      gfshExecutions.stream().map(GfshExecution::getProcess).map(Process::destroyForcibly)
+          .forEach((Process process) -> {
+            try {
+              // Process.destroyForcibly() may not terminate immediately
+              process.waitFor(1, TimeUnit.MINUTES);
+            } catch (InterruptedException ie) {
+              shutdownExceptions
+                  .add(process.toString() + " failed to shutdown: " + ie.getMessage());
+            }
+          });
+      if (!shutdownExceptions.isEmpty()) {
+        throw new RuntimeException("gfshExecutions processes failed to shutdown" + LINE_SEPARATOR
+            + String.join(LINE_SEPARATOR, shutdownExceptions));
+      }
+    } finally {
+      temporaryFolder.delete();
+    }
