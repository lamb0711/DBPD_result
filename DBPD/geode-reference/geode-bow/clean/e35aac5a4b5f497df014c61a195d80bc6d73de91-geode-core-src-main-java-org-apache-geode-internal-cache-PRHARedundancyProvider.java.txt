Merge branch 'release/1.5.0'

-import java.util.*;
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.Collections;
+import java.util.Comparator;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+import java.util.TreeSet;
-import org.apache.geode.distributed.internal.DM;
+import org.apache.geode.distributed.internal.DistributionManager;
-import org.apache.geode.internal.cache.partitioned.*;
+import org.apache.geode.internal.cache.partitioned.Bucket;
+import org.apache.geode.internal.cache.partitioned.BucketBackupMessage;
+import org.apache.geode.internal.cache.partitioned.CreateBucketMessage;
+import org.apache.geode.internal.cache.partitioned.CreateMissingBucketsTask;
+import org.apache.geode.internal.cache.partitioned.EndBucketCreationMessage;
+import org.apache.geode.internal.cache.partitioned.FetchPartitionDetailsMessage;
+import org.apache.geode.internal.cache.partitioned.InternalPRInfo;
+import org.apache.geode.internal.cache.partitioned.InternalPartitionDetails;
+import org.apache.geode.internal.cache.partitioned.LoadProbe;
+import org.apache.geode.internal.cache.partitioned.ManageBackupBucketMessage;
+import org.apache.geode.internal.cache.partitioned.ManageBucketMessage;
+import org.apache.geode.internal.cache.partitioned.OfflineMemberDetails;
+import org.apache.geode.internal.cache.partitioned.OfflineMemberDetailsImpl;
+import org.apache.geode.internal.cache.partitioned.PRLoad;
+import org.apache.geode.internal.cache.partitioned.PartitionMemberInfoImpl;
+import org.apache.geode.internal.cache.partitioned.PartitionRegionInfoImpl;
+import org.apache.geode.internal.cache.partitioned.PartitionedRegionRebalanceOp;
+import org.apache.geode.internal.cache.partitioned.RecoveryRunnable;
+import org.apache.geode.internal.cache.partitioned.RedundancyLogger;
+import org.apache.geode.internal.cache.partitioned.RegionAdvisor;
-        throw new CacheClosedException("Cache is shutting down");
+        throw prRegion.getCache().getCacheClosedException("Cache is shutting down");
-            throw new CacheClosedException("Cache is shutting down");
+            throw prRegion.getCache().getCacheClosedException("Cache is shutting down");
-  public static interface EndBucketCreationObserver {
+  public interface EndBucketCreationObserver {
-    public void afterEndBucketCreationMessageSend(PartitionedRegion pr, int bucketId);
+    void afterEndBucketCreationMessageSend(PartitionedRegion pr, int bucketId);
-    public void afterEndBucketCreation(PartitionedRegion pr, int bucketId);
+    void afterEndBucketCreation(PartitionedRegion pr, int bucketId);
-    DM dm = this.prRegion.getDistributionManager();
+    DistributionManager dm = this.prRegion.getDistributionManager();
-    final DM dm = this.prRegion.getDistributionManager();
+    final DistributionManager dm = this.prRegion.getDistributionManager();
-    public void memberJoined(InternalDistributedMember id) {
+    public void memberJoined(DistributionManager distributionManager,
+        InternalDistributedMember id) {
-    public void memberSuspect(InternalDistributedMember id, InternalDistributedMember whoSuspected,
-        String reason) {}
+    public void memberSuspect(DistributionManager distributionManager, InternalDistributedMember id,
+        InternalDistributedMember whoSuspected, String reason) {}
-    public void memberDeparted(InternalDistributedMember id, boolean crashed) {
+    public void memberDeparted(DistributionManager distributionManager,
+        InternalDistributedMember id, boolean crashed) {
-    public void quorumLost(Set<InternalDistributedMember> failures,
-        List<InternalDistributedMember> remaining) {}
+    public void quorumLost(DistributionManager distributionManager,
+        Set<InternalDistributedMember> failures, List<InternalDistributedMember> remaining) {}
-    public void memberDeparted(final InternalDistributedMember id, final boolean crashed) {
+    public void memberDeparted(DistributionManager distributionManager,
+        final InternalDistributedMember id, final boolean crashed) {
-    public void memberSuspect(InternalDistributedMember id, InternalDistributedMember whoSuspected,
-        String reason) {}
+    public void memberSuspect(DistributionManager distributionManager, InternalDistributedMember id,
+        InternalDistributedMember whoSuspected, String reason) {}
-    public void memberJoined(InternalDistributedMember id) {
+    public void memberJoined(DistributionManager distributionManager,
+        InternalDistributedMember id) {
-    public void quorumLost(Set<InternalDistributedMember> failures,
-        List<InternalDistributedMember> remaining) {}
+    public void quorumLost(DistributionManager distributionManager,
+        Set<InternalDistributedMember> failures, List<InternalDistributedMember> remaining) {}
