merge GEODE-2995, GEODE-3775 into develop with integration test.

Signed-off-by: Brian Rowe <browe@pivotal.io>

+import org.apache.geode.internal.cache.InternalCache;
+import org.apache.geode.internal.cache.tier.sockets.ClientProtocolMessageHandler;
-public class ProtobufStreamProcessor {
+public class ProtobufStreamProcessor implements ClientProtocolMessageHandler {
+
+  @Override
+  public void receiveMessage(InputStream inputStream, OutputStream outputStream,
+      InternalCache cache) throws IOException {
+    try {
+      processOneMessage(inputStream, outputStream, cache);
+    } catch (InvalidProtocolMessageException | OperationHandlerNotRegisteredException
+        | TypeEncodingException e) {
+      throw new IOException(e);
+    }
+  }
