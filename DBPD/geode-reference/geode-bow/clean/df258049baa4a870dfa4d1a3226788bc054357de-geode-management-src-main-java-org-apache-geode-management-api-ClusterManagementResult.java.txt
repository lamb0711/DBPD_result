Merge geode develop branch

-  public ClusterManagementResult(boolean success, String message) {
-    setStatus(success, message);
-  }
-
-  /**
-   * for internal use only
-   */
-    this.statusCode = statusCode;
-    this.statusMessage = message;
+    setStatus(statusCode, message);
-  public void setStatus(boolean success, String message) {
-    if (!success) {
-      statusCode = StatusCode.ERROR;
-    }
-    this.statusMessage = message;
+  public void setStatus(StatusCode statusCode, String message) {
+    this.statusCode = statusCode;
+    this.statusMessage = formatErrorMessage(message);
-   * for internal use only
+   * Capitalized the first letter and adds a period, if needed.
+   * This helps the CMS API give a consistent format to error messages, even when they sometimes
+   * come from parts of the system beyond our control.
-  public void setStatus(StatusCode code, String message) {
-    this.statusCode = code;
-    this.statusMessage = message;
+  private static String formatErrorMessage(String message) {
+    if (isBlank(message)) {
+      return message;
+    }
+    message = message.trim();
+
+    // capitalize the first letter
+    char firstChar = message.charAt(0);
+    char newFirstChar = Character.toUpperCase(firstChar);
+    if (newFirstChar != firstChar) {
+      message = newFirstChar + message.substring(1);
+    }
+
+    // add a period if the sentence is not already punctuated
+    if (!message.endsWith(".") && !message.endsWith("!") && !message.endsWith("?")) {
+      message += ".";
+    }
+
+    return message;
