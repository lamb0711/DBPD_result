Merge branch 'develop' into feature/GEODE-1801

+import static com.sun.corba.se.impl.util.RepositoryId.cache;
+
-  protected static void writeChunkedException(Message origMsg, Throwable e,
+  protected static void writeChunkedException(Message origMsg, Throwable exception,
+    Throwable e = getClientException(servConn, exception);
+  
+  private static Throwable getClientException(ServerConnection servConn, Throwable e) {
+    if (cache instanceof InternalCache) {
+      InternalCache cache = (InternalCache) servConn.getCache();
+      OldClientSupportService svc = cache.getService(OldClientSupportService.class);
+      if (svc != null) {
+        return svc.getThrowable(e, servConn.getClientVersion());
+      }
+    }
+    return e;
+  }
+    Throwable theException = getClientException(servConn, e);
-      String msg = e.getMessage();
+      String msg = theException.getMessage();
-        msg = e.toString();
+        msg = theException.toString();
-    errorMsg.addObjPart(e);
-    errorMsg.addStringPart(getExceptionTrace(e));
+    errorMsg.addObjPart(theException);
+    errorMsg.addStringPart(getExceptionTrace(theException));
-      Throwable e, boolean isSevere, ServerConnection servConn)
+      Throwable exception, boolean isSevere, ServerConnection servConn)
+    Throwable e = getClientException(servConn, exception);
-      int messageType, String message, ServerConnection servConn, Throwable e)
+      int messageType, String message, ServerConnection servConn, Throwable exception)
+    Throwable e = getClientException(servConn, exception);
