Merge branch 'develop' into feature/GEODE-53

+import java.io.DataOutput;
-      DataSerializer.writeObject(this.id, hdos);
+      // we do not know the receiver's version at this point, but the on-wire
+      // form of InternalDistributedMember changed in 9.0, so we must serialize
+      // it using the previous version
+      DataOutput idOut = new VersionedDataOutputStream(hdos, Version.GFE_82);
+      DataSerializer.writeObject(this.id, idOut);
-          conn.setWanSiteVersion(Version.readOrdinal(dis));
+         short wanSiteVersion = Version.readOrdinal(dis);
+         conn.setWanSiteVersion(wanSiteVersion);
+         // establish a versioned stream for the other site, if necessary         
+         if (wanSiteVersion < Version.CURRENT_ORDINAL) {
+           dis = new VersionedDataInputStream(dis, Version.fromOrdinalOrCurrent(wanSiteVersion));
+         }
+    Version v = InternalDataSerializer.getVersionForDataStreamOrNull(p_dis);
+    if (v != null) {
+      dis = new VersionedDataInputStream(dis, v);
+    }
