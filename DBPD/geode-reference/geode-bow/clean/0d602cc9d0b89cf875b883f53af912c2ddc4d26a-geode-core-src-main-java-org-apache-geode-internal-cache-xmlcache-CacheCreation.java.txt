GEODE-8035: Parallel Disk Store Recovery when Cluster Restarts (#5014)

* Add parallel stream for disk store recovery

* Replace synchronized block with CountDownLatch

* Add the new system property parallelDiskStoreRecovery

* Add documentation of the new system property

Authored-by: Jianxia Chen <jchen21@apache.org>
+import java.util.stream.Stream;
+import org.apache.geode.internal.lang.SystemPropertyHelper;
+  @Immutable
+  private static final Optional<Boolean> parallelDiskStoreRecovery = SystemPropertyHelper
+      .getProductBooleanProperty(SystemPropertyHelper.PARALLEL_DISK_STORE_RECOVERY);
+
-    for (DiskStore diskStore : diskStores.values()) {
-      DiskStoreAttributesCreation creation = (DiskStoreAttributesCreation) diskStore;
-      if (creation != pdxRegDSC) {
-        createDiskStore(creation, cache);
-      }
-    }
+    createDiskStores(cache, pdxRegDSC);
+  private void createDiskStores(InternalCache cache, DiskStoreAttributesCreation pdxRegDSC) {
+    Stream<DiskStore> diskStoreStream;
+    if (parallelDiskStoreRecovery.orElse(true)) {
+      diskStoreStream = diskStores.values().parallelStream();
+    } else {
+      diskStoreStream = diskStores.values().stream();
+    }
+    diskStoreStream.forEach(diskStore -> {
+      DiskStoreAttributesCreation creation = (DiskStoreAttributesCreation) diskStore;
+      if (creation != pdxRegDSC) {
+        createDiskStore(creation, cache);
+      }
+    });
+  }
+
+  @Override
+  public void lockDiskStore(String diskStoreName) {
+
+  }
+
+  @Override
+  public void unlockDiskStore(String diskStoreName) {
+
+  }
+
