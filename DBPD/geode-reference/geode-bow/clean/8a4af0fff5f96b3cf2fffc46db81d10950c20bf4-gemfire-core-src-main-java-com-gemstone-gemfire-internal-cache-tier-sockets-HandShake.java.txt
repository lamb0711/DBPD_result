[GEODE-77] Fixed some backward compatibility issues

+import java.io.DataOutput;
-      DataSerializer.writeObject(this.id, hdos);
+      // we do not know the receiver's version at this point, but the on-wire
+      // form of InternalDistributedMember changed in 9.0, so we must serialize
+      // it using the previous version
+      DataOutput idOut = new VersionedDataOutputStream(hdos, Version.GFE_82);
+      DataSerializer.writeObject(this.id, idOut);
-          conn.setWanSiteVersion(Version.readOrdinal(dis));
+         short wanSiteVersion = Version.readOrdinal(dis);
+         conn.setWanSiteVersion(wanSiteVersion);
+         // establish a versioned stream for the other site, if necessary         
+         if (wanSiteVersion < Version.CURRENT_ORDINAL) {
+           dis = new VersionedDataInputStream(dis, Version.fromOrdinalOrCurrent(wanSiteVersion));
+         }
