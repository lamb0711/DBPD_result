GEODE-8020: buffer management problems (#5048)

* GEODE-8020: buffer management problems

This fixes some buffer handling in MsgStreamerList and alters
MstStreamer to avoid creating MsgStreamerList and VersionedMsgStreamers
during normal, non-upgrade, operations.

It also changes NioSslEngine to use synchronization in more places,
notably the close() method, which was possibly allowing multiple threads to
change the state of the engine.

* revert unnecessary change to ClusterCommunicationsDUnitTest

* fixing another null version check

* renamed new BufferPool property

* restore logging of ssl exceptions
+import org.apache.logging.log4j.Logger;
+
+import org.apache.geode.logging.internal.log4j.api.LogService;
+import org.apache.geode.util.internal.GeodeGlossary;
+  private static final Logger logger = LogService.getLogger();
-  public static final boolean useDirectBuffers = !Boolean.getBoolean("p2p.nodirectBuffers");
+  public static final boolean useDirectBuffers = !Boolean.getBoolean("p2p.nodirectBuffers")
+      || Boolean.getBoolean(GeodeGlossary.GEMFIRE_PREFIX + "BufferPool.useHeapBuffers");
-          // if it returns non-null then we have already seen this item
-          // so we have worked all the way through the queue once.
-          // So it is time to give up and allocate a new buffer.
