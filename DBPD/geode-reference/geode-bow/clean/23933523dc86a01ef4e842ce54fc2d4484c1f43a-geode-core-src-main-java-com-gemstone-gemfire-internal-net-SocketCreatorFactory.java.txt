GEODE-420: Fixing SSL Configuration for Gateway WAN tests

-  private static SocketCreatorFactory instance = new SocketCreatorFactory();
+  private static SocketCreatorFactory instance = null;
-  private SocketCreatorFactory() {
-    this(null);
-  }
-
-  private SocketCreatorFactory(DistributionConfig distributionConfig) {
-    initializeSocketCreators(distributionConfig);
-  }
-
+    initialize();
-  private static SocketCreatorFactory getInstance() {
-    if (instance == null) {
+  private synchronized static SocketCreatorFactory getInstance(boolean closing) {
+    if (instance == null && !closing) {
+  private synchronized static SocketCreatorFactory getInstance() {
+    return getInstance(false);
+  }
+
+  private void initialize() {
+    //Hack... get a default cluster socket creator initialized
+    getClusterSSLSocketCreator();
+  }
+
-    getInstance().clearSocketCreators();
-    getInstance().distributionConfig = null;
-    instance = null;
-    SSLConfigurationFactory.close();
+    SocketCreatorFactory socketCreatorFactory = getInstance(true);
+    if (socketCreatorFactory != null) {
+      socketCreatorFactory.clearSocketCreators();
+      socketCreatorFactory.distributionConfig = null;
+      SocketCreatorFactory.instance = null;
+      SSLConfigurationFactory.close();
+    }
-    getInstance().socketCreators.clear();
+    socketCreators.clear();
