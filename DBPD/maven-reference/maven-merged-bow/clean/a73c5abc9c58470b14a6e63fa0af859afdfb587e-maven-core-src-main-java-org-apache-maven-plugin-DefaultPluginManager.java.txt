o in the middle of a ReactorArtifactRepository but ben and igor need access so checking in


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@772832 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.repository.VersionNotFoundException;
-//        catch ( InvalidPluginException e )
-//        {
-//            throw new PluginLoaderException( plugin, "Failed to load plugin. Reason: " + e.getMessage(), e );
-//        }
-        // TODO: such a call in MavenMetadataSource too - packaging not really the intention of type
-
-        // TODO: we don't need to resolve over and over again, as long as we are sure that the parameters are the same
-        // check this with yourkit as a hot spot.
-        // Don't recreate if already created - for effeciency, and because clover plugin adds to it
-        if ( project.getDependencyArtifacts() == null )
-        {
-            // NOTE: Don't worry about covering this case with the error-reporter bindings...it's already handled by the project error reporter.
-            try
-            {
-                project.setDependencyArtifacts( repositorySystem.createArtifacts( project.getDependencies(), null, null, project ) );
-            }
-            catch ( VersionNotFoundException e )
-            {
-                throw new InvalidDependencyVersionException( e.getProjectId(), e.getDependency(), e.getPomFile(), e.getCauseException() );
-            }
-        }
-
+        
+            // Here the root is not resolved because we are presumably working with a project locally.
-            .setArtifactDependencies( project.getDependencyArtifacts() )
+            .setResolveTransitively( true )
+            //.setArtifactDependencies( project.getDependencyArtifacts() )
+        //TODO: this is wrong
-        if ( plugin.getVersion() == null )
-        {
-            throw new IllegalArgumentException( "plugin.version: null" );
-        }
-

UPD42 INS9 DEL40 DEL26 DEL42 DEL42 DEL32 DEL33 DEL27 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL33 DEL33 DEL42 DEL32 DEL32 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL14 DEL53 DEL8 DEL12 DEL54 DEL8 DEL25 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL33 DEL27 DEL42 DEL43 DEL45 DEL14 DEL53 DEL8 DEL25