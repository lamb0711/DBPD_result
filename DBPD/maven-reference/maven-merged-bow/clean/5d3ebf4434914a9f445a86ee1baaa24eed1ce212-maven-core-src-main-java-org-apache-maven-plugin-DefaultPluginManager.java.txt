avoid NPE if there are no parameters in the mojo

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@234155 13f79535-47bb-0310-9956-ffa450edef68

-        
+
-                                                                                          pathTranslator, getLogger(), 
+                                                                                          pathTranslator, getLogger(),
-                if ( fieldValue == null && (value == null || value.getChildCount() == 0 ) )
+                if ( fieldValue == null && ( value == null || value.getChildCount() == 0 ) )
-    
+
-        
-        PlexusConfiguration fromMojo = mojoDescriptor.getMojoConfiguration();
-        
-        for ( Iterator it = mojoDescriptor.getParameters().iterator(); it.hasNext(); )
+
+        if ( mojoDescriptor.getParameters() != null )
-            Parameter parameter = (Parameter) it.next();
+            PlexusConfiguration fromMojo = mojoDescriptor.getMojoConfiguration();
-            String paramName = parameter.getName();
-            String alias = parameter.getAlias();
+            for ( Iterator it = mojoDescriptor.getParameters().iterator(); it.hasNext(); )
+            {
+                Parameter parameter = (Parameter) it.next();
-            PlexusConfiguration pomConfig = fromPom.getChild( paramName );
-            PlexusConfiguration aliased = null;
-            
-            if ( alias != null )
-            {
-                aliased = fromPom.getChild( alias );
-            }
-            
-            PlexusConfiguration mojoConfig = fromMojo.getChild( paramName, false );
-            
-            // first we'll merge configurations from the aliased and real params.
-            // TODO: Is this the right thing to do?
-            if ( aliased != null )
-            {
-                if ( pomConfig == null )
+                String paramName = parameter.getName();
+                String alias = parameter.getAlias();
+
+                PlexusConfiguration pomConfig = fromPom.getChild( paramName );
+                PlexusConfiguration aliased = null;
+
+                if ( alias != null )
-                    pomConfig = new XmlPlexusConfiguration( paramName );
+                    aliased = fromPom.getChild( alias );
-                
-                pomConfig = buildTopDownMergedConfiguration( pomConfig, aliased );
-            }
-            
-            boolean addedPomConfig = false;
-            if ( pomConfig != null )
-            {
-                pomConfig = buildTopDownMergedConfiguration( pomConfig, mojoConfig );
+                PlexusConfiguration mojoConfig = fromMojo.getChild( paramName, false );
-                if ( StringUtils.isNotEmpty( pomConfig.getValue( null ) ) || pomConfig.getChildCount() > 0 )
+                // first we'll merge configurations from the aliased and real params.
+                // TODO: Is this the right thing to do?
+                if ( aliased != null )
-                    result.addChild( pomConfig );
-                    
-                    addedPomConfig = true;
+                    if ( pomConfig == null )
+                    {
+                        pomConfig = new XmlPlexusConfiguration( paramName );
+                    }
+
+                    pomConfig = buildTopDownMergedConfiguration( pomConfig, aliased );
-            }
-            
-            if ( !addedPomConfig && mojoConfig != null )
-            {
-                result.addChild( copyConfiguration( mojoConfig ) );
+
+                boolean addedPomConfig = false;
+
+                if ( pomConfig != null )
+                {
+                    pomConfig = buildTopDownMergedConfiguration( pomConfig, mojoConfig );
+
+                    if ( StringUtils.isNotEmpty( pomConfig.getValue( null ) ) || pomConfig.getChildCount() > 0 )
+                    {
+                        result.addChild( pomConfig );
+
+                        addedPomConfig = true;
+                    }
+                }
+
+                if ( !addedPomConfig && mojoConfig != null )
+                {
+                    result.addChild( copyConfiguration( mojoConfig ) );
+                }
-        
-    private XmlPlexusConfiguration buildTopDownMergedConfiguration( PlexusConfiguration dominant, PlexusConfiguration recessive )
+    private XmlPlexusConfiguration buildTopDownMergedConfiguration( PlexusConfiguration dominant,
+                                                                    PlexusConfiguration recessive )
-        
+
-        
+
-        
+
-        
+
-        
+
-            
+
-        
+
-            
+
-    
+

INS25 INS27 INS8 INS32 INS33 MOV60 MOV24 INS42 INS42