add artifact metadata on installation of snapshot in a local repository


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163676 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.logging.AbstractLogEnabled;
+import org.apache.maven.artifact.metadata.ArtifactMetadata;
-    extends AbstractLogEnabled
-
+    protected abstract String metadataLayoutPattern();
+
-        String path = layoutPattern();
-
-        String groupPath = groupIdAsPath( artifact.getGroupId() );
-
-        path = StringUtils.replace( path, "${groupPath}", groupPath );
-
-        path = StringUtils.replace( path, "${artifactId}", artifact.getArtifactId() );
-
-        path = StringUtils.replace( path, "${version}", artifact.getVersion() );
+        String path = basicPathOf( artifact, layoutPattern() );
+        return path;
+    }
+
+    public String pathOfMetadata( ArtifactMetadata metadata )
+        throws ArtifactPathFormatException
+    {
+        String path = basicPathOf( metadata.getArtifact(), metadataLayoutPattern() );
+
+        path = StringUtils.replace( path, "${metadataFilename}", metadata.getFilename() );
+
+        return path;
+    }
+
+    private String basicPathOf( Artifact artifact, String pattern )
+        throws ArtifactPathFormatException
+    {
+        String path = pattern;
+
+        String groupPath = groupIdAsPath( artifact.getGroupId() );
+
+        path = StringUtils.replace( path, "${groupPath}", groupPath );
+
+        path = StringUtils.replace( path, "${artifactId}", artifact.getArtifactId() );
+
+        path = StringUtils.replace( path, "${version}", artifact.getVersion() );
+
-

UPD40 INS31 INS31 INS31 INS83 INS83 INS43 INS42 INS83 INS43 INS42 INS44 INS43 INS8 INS83 INS43 INS42 INS44 INS43 INS8 UPD83 UPD42 INS44 INS42 INS42 INS43 INS42 INS42 MOV60 MOV25 INS41 INS42 INS43 INS42 INS42 INS60 INS21 INS41 INS43 INS42 INS60 UPD42 MOV42 INS42 INS42 INS43 INS59 INS7 INS42 INS42 INS43 INS59 INS32 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS42 INS42 INS42 MOV32 INS42 INS32 INS32 INS42 INS42 INS42 INS45 INS32 INS42 INS42 INS42 INS42 INS42 DEL43