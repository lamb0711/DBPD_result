PR: MNG-613
changes versioning to use repository metadata

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@278881 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.metadata.AbstractVersionArtifactMetadata;
+import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.metadata.LegacyArtifactMetadata;
+import org.apache.maven.artifact.repository.metadata.ArtifactRepositoryMetadata;
+import org.apache.maven.artifact.repository.metadata.Versioning;
-    public void transformForDeployment( Artifact artifact, ArtifactRepository remoteRepository )
+    public void transformForDeployment( Artifact artifact, ArtifactRepository remoteRepository,
+                                        ArtifactRepository localRepository )
-    protected AbstractVersionArtifactMetadata createMetadata( Artifact artifact )
+    protected LegacyArtifactMetadata createLegacyMetadata( Artifact artifact )
+    protected ArtifactMetadata createMetadata( Artifact artifact, Versioning versioning )
+    {
+        LatestArtifactMetadata metadata = new LatestArtifactMetadata( artifact );
+        metadata.setVersion( versioning.getLatest() );
+        return metadata;
+    }
+
+    protected String constructVersion( ArtifactRepositoryMetadata metadata )
+    {
+        return metadata.getLatestVersion();
+    }

INS26 INS26 INS26 UPD40 INS40 INS40 INS40 INS31 INS31 INS44 UPD43 UPD42 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS8 INS43 INS42 UPD42 INS42 INS43 INS42 INS43 INS42 INS60 INS21 INS41 INS42 INS43 INS42 INS41 INS42 INS42 INS42 INS43 INS59 INS32 INS42 INS42 INS32 INS42 INS42 INS14 INS42 INS42 INS32 INS42 INS42 INS43 INS42 INS42 INS42 INS42