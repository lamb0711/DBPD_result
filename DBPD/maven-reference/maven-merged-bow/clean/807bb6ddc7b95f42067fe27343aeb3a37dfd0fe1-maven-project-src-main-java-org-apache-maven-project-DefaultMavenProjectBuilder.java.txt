Fix: Unable to resolve parent pom that is a snapshot. Added policies from config during build. Also fixed bug in ArtifactPolicySnapshots, allowed override of default policies with a null value.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@728090 13f79535-47bb-0310-9956-ffa450edef68

-    {        
-        List repositories = mavenTools.buildArtifactRepositories( projectBuilder.getSuperModel() );
+    {  
+       List<ArtifactRepository> artifactRepositories = new ArrayList<ArtifactRepository>( );
+       artifactRepositories.addAll( mavenTools.buildArtifactRepositories( projectBuilder.getSuperModel() ) );
+       if(config.getRemoteRepositories() != null) 
+       {
+    	   artifactRepositories.addAll(config.getRemoteRepositories());
+       }
-                                                                                       repositories, artifactResolver ), config );
+                                                                                       artifactRepositories, artifactResolver ), config );
-        
-        File f = (artifact.getFile() != null) ? artifact.getFile() : new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
-        mavenTools.findModelFromRepository( artifact, remoteArtifactRepositories, localRepository );
-
-        ProjectBuilderConfiguration config = new DefaultProjectBuilderConfiguration().setLocalRepository( localRepository );
-
+        
+        File f = (artifact.getFile() != null) ? artifact.getFile() : new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
+        mavenTools.findModelFromRepository( artifact, artifactRepositories, localRepository );
+
+        ProjectBuilderConfiguration config = new DefaultProjectBuilderConfiguration().setLocalRepository( localRepository );

MOV60 MOV21 INS60 INS21 INS25 INS74 INS59 INS32 INS27 INS8 MOV43 INS43 UPD42 MOV42 INS14 INS42 INS42 INS32 INS32 INS33 INS21 UPD42 INS42 INS74 MOV42 MOV42 MOV32 INS42 INS42 INS32 INS43 INS43 INS42 INS42 INS32 UPD42 INS42 INS42 INS42 INS42 DEL32 DEL59 DEL60