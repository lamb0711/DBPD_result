Fixing problem with using distributionManagement repository definition for download of plugins.xml metadata.

Now, in order to build a maven plugin, you need two things:

1. a repository defined in distributionManagment
2. a repository defined in <repositories/> which has the same id as the one in distributionManagement.

This is necessary, since in most cases SSH will be used in the distributionManagement definition for uploading the plugin...which means that the download of the existing plugins.xml file might not be available for users trying to run an install. SSH requires authentication information, and users (particularly those running the bootstrap) might not have this auth info.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@216013 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.util.IOUtil;
-import java.io.FileReader;
-import java.io.Reader;
-                    verifyLocalRepositoryFile( metadataFile );
-
-                catch ( IOException e )
-                {
-                    throw new RepositoryMetadataManagementException(
-                                                                     metadata,
-                                                                     "Download of repository metadata resulted in an invalid file.",
-                                                                     e );
-                }
-    private void verifyLocalRepositoryFile( File metadataFile )
-        throws IOException
-    {
-        Reader metadataReader = null;
-
-        try
-        {
-            metadataReader = new FileReader( metadataFile );
-
-            char[] cbuf = new char[16];
-
-            while ( metadataReader.read( cbuf ) > -1 )
-            {
-                // do nothing...just verify that it can be read.
-            }
-        }
-        finally
-        {
-            IOUtil.close( metadataReader );
-        }
-
-    }
-

DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL32 DEL21 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL45 DEL42 DEL14 DEL53 DEL8 DEL12 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL42 DEL42 DEL43 DEL42 DEL14 DEL7 DEL21 DEL39 DEL85 DEL5 DEL42 DEL39 DEL85 DEL5 DEL34 DEL3 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL34 DEL38 DEL27 DEL8 DEL61 DEL8 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL54 DEL8 DEL31