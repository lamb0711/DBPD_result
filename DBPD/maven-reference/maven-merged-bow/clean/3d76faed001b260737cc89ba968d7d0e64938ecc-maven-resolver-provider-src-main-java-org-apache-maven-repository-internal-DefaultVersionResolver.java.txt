Merge branch 'MNG-6672'

-import org.eclipse.aether.internal.impl.CacheUtils;
-                    CacheUtils.getRepository( session, request.getRepositories(), record.repoClass, record.repoId ) );
+                    getRepository( session, request.getRepositories(), record.repoClass, record.repoId ) );
+    private ArtifactRepository getRepository( RepositorySystemSession session,
+                                              List<RemoteRepository> repositories, Class<?> repoClass,
+                                              String repoId )
+    {
+        if ( repoClass != null )
+        {
+            if ( WorkspaceRepository.class.isAssignableFrom( repoClass ) )
+            {
+                return session.getWorkspaceReader().getRepository();
+            }
+            else if ( LocalRepository.class.isAssignableFrom( repoClass ) )
+            {
+                return session.getLocalRepository();
+            }
+            else
+            {
+                for ( RemoteRepository repository : repositories )
+                {
+                    if ( repoId.equals( repository.getId() ) )
+                    {
+                        return repository;
+                    }
+                }
+            }
+        }
+        return null;
+    }
+
-            workspace = CacheUtils.getWorkspace( session );
+            WorkspaceReader reader = session.getWorkspaceReader();
+            workspace = ( reader != null ) ? reader.getRepository() : null;
-            hash = hash * 31 + CacheUtils.repositoriesHashCode( repositories );
+            hash = hash * 31 + repositories.hashCode();
-                && CacheUtils.eq( workspace, that.workspace )
-                && CacheUtils.repositoriesEquals( repositories, that.repositories );
+                && Objects.equals( workspace, that.workspace ) && repositories.equals( that.repositories );
-}
+}

INS31 INS83 INS43 INS42 INS44 INS44 INS44 INS44 INS8 INS42 INS43 INS42 INS74 INS42 INS74 INS42 INS43 INS42 INS25 INS41 INS42 INS43 INS43 INS43 INS76 INS42 INS27 INS8 INS33 INS60 INS42 INS42 INS42 INS42 INS33 INS25 INS43 INS59 INS32 INS8 INS25 INS42 INS42 INS32 INS16 INS57 INS42 INS42 INS41 INS32 INS8 INS8 INS42 INS42 INS36 INS32 INS33 UPD42 UPD42 UPD42 UPD42 INS43 INS32 INS57 INS42 INS42 INS41 INS70 INS27 UPD42 MOV42 UPD42 MOV42 UPD42 UPD42 INS42 INS32 INS42 INS43 INS32 INS44 INS42 INS8 INS42 INS33 INS42 INS42 INS42 INS42 INS42 INS43 INS42 INS25 INS42 INS32 INS8 INS42 INS42 INS32 INS41 INS42 INS42 INS42 DEL40 DEL26 DEL42 DEL42 DEL32 DEL42 DEL42