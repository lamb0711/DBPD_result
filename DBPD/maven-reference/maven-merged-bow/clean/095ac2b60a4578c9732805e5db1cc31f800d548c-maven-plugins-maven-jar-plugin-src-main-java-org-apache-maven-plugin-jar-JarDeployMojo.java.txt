better error handling


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163308 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Repository;
+import org.apache.maven.model.DistributionManagement;
+        
+        //@todo this will be duplicated in case of every mojo which implements deploy goal
+        // this should be pushed into the ArtifactDeployer component
+        DistributionManagement distributionManagement = project.getDistributionManagement();
+        
+        if ( distributionManagement == null )
+        {
+            String msg = "Deployment failed: distributionManagement element" + 
+                            " was not specified in the pom";
+            throw new Exception( msg );
+        }
+        
+        Repository repository = distributionManagement.getRepository();
+        
+        if ( repository == null )
+        {
+            String msg = "Deployment failed: repository element" + 
+                            " was not specified in the pom inside" + 
+                            " distributionManagement element";
+            throw new Exception( msg );
+         }
+        
+        
-            RepositoryUtils.mavenRepositoryToWagonRepository( project.getDistributionManagement().getRepository() );
+            RepositoryUtils.mavenRepositoryToWagonRepository( repository );

INS26 INS26 INS40 INS40 INS25 INS60 INS25 INS60 INS43 INS27 INS8 INS43 INS59 INS27 INS8 MOV43 INS59 INS42 UPD42 MOV32 INS42 INS33 INS60 INS53 INS42 INS42 INS32 INS42 INS33 INS60 INS53 INS42 INS32 INS43 INS59 INS14 INS42 INS42 INS43 INS59 INS14 INS42 INS42 INS42 INS42 INS42 INS27 INS43 INS42 INS42 INS42 INS27 INS43 INS42 INS45 INS45 INS42 INS45 INS45 INS45 INS42 DEL42 DEL42 DEL42 DEL32 DEL32