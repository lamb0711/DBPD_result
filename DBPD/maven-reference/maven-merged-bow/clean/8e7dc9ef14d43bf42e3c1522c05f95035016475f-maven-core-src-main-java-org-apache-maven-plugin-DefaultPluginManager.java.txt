Realm fixes

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@497305 13f79535-47bb-0310-9956-ffa450edef68

-            DefaultPlexusContainer.setLookupRealm( realm );
+            ClassRealm oldRealm = DefaultPlexusContainer.setLookupRealm( realm );
-            DefaultPlexusContainer.setLookupRealm( null );
+            DefaultPlexusContainer.setLookupRealm( oldRealm );
-                    (ComponentConfigurator) pluginContainer.lookup( ComponentConfigurator.ROLE, configuratorId );
+                    (ComponentConfigurator) pluginContainer.lookup( ComponentConfigurator.ROLE, configuratorId, pluginRealm );
-                configurator = (ComponentConfigurator) pluginContainer.lookup( ComponentConfigurator.ROLE );
+                configurator = (ComponentConfigurator) pluginContainer.lookup( ComponentConfigurator.ROLE, pluginRealm );
+        // XXX this needs the plugin realm!
+        // XXX this needs the plugin realm!

INS60 INS43 INS59 INS42 INS42 MOV32 INS42 INS42 INS42 DEL21 DEL33