[MNG-6305] Validation of CI friendly version incorrect
 o Checkin that only the three expression changelist,
   revision and sha1 are valid in a version.
 o Added some tests.

+import java.util.regex.Matcher;
+    private static final Pattern CI_FRIENDLY_EXPRESSION = Pattern.compile( "\\$\\{(.+?)\\}" );
+
+    private static final List<String> CI_FRIENDLY_POSSIBLE_PROPERTY_NAMES =
+        Arrays.asList( AbstractStringBasedModelInterpolator.REVISION_PROPERTY,
+                       AbstractStringBasedModelInterpolator.CHANGELIST_PROPERTY,
+                       AbstractStringBasedModelInterpolator.SHA1_PROPERTY );
+
-        // module with the same groupId/artifactId this will fail the build 
+        // module with the same groupId/artifactId this will fail the build
-
-        string = string.trim();
-        if ( string.contains( "${" + AbstractStringBasedModelInterpolator.CHANGELIST_PROPERTY + "}" )
-            || string.contains( "${" + AbstractStringBasedModelInterpolator.REVISION_PROPERTY + "}" )
-            || string.contains( "${" + AbstractStringBasedModelInterpolator.SHA1_PROPERTY + "}" ) )
+        Matcher m = CI_FRIENDLY_EXPRESSION.matcher( string.trim() );
+        while ( m.find() )
-            return true;
+            if ( !CI_FRIENDLY_POSSIBLE_PROPERTY_NAMES.contains( m.group( 1 ) ) )
+            {
+                addViolation( problems, severity, version, fieldName, null,
+                              "contains an expression but should be a constant.", tracker );
+
+                return false;
+            }
-        addViolation( problems, severity, version, fieldName, null, "contains an expression but should be a constant.",
-                      tracker );
-
-        return false;
+        return true;

INS26 INS40 INS23 INS23 INS83 INS83 INS83 INS43 INS59 INS83 INS83 INS83 INS74 INS59 INS42 INS42 INS32 INS43 INS43 INS42 INS32 INS60 INS61 MOV41 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS40 INS40 INS40 INS43 INS59 INS32 INS8 INS42 INS42 INS32 UPD42 MOV42 UPD42 MOV42 INS25 UPD42 MOV42 UPD42 MOV42 MOV32 INS38 MOV8 INS32 MOV21 MOV41 UPD42 MOV42 MOV42 INS32 INS42 INS42 INS34 DEL42 DEL7 DEL21 DEL45 DEL40 DEL45 DEL27 DEL32 DEL45 DEL40 DEL45 DEL27 DEL32 DEL45 DEL40 DEL45 DEL27 DEL32 DEL27 DEL25