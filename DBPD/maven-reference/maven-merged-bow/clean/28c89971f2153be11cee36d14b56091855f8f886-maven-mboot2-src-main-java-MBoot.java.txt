clean before build


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162992 13f79535-47bb-0310-9956-ffa450edef68

-    private static final String CLASSES = "target/classes";
-
-    private static final String TEST_CLASSES = "target/test-classes";
-
-    private static final String GENERATED_SOURCES = "target/generated-sources";
+    private static final String CLASSES = BUILD_DIR + "/classes";
+
+    private static final String TEST_CLASSES = BUILD_DIR + "/test-classes";
+
+    private static final String GENERATED_SOURCES = BUILD_DIR + "/generated-sources";
-        String buildDir = new File( basedir, BUILD_DIR ).getAbsolutePath();
+        File buildDirFile = new File( basedir, BUILD_DIR );
+        String buildDir = buildDirFile.getAbsolutePath();
+
+        // clean
+        System.out.println( "Cleaning " + buildDirFile + "..." );
+        FileUtils.forceDelete( buildDirFile );
-            File generatedSourcesDirectory = new File( basedir, "target/generated-sources" );
+            File generatedSourcesDirectory = new File( basedir, GENERATED_SOURCES );
-            generateSources( model.getAbsolutePath(), "java", generatedSourcesDirectory.getAbsolutePath(), "4.0.0", "false" );
+            generateSources( model.getAbsolutePath(), "java", generatedSources, "4.0.0", "false" );
-            generateSources( model.getAbsolutePath(), "java", generatedSourcesDirectory.getAbsolutePath(), "3.0.0", "true" );
+            generateSources( model.getAbsolutePath(), "java", generatedSources, "3.0.0", "true" );
-            generateSources( model.getAbsolutePath(), "xpp3", generatedSourcesDirectory.getAbsolutePath(), "4.0.0", "false" );
+            generateSources( model.getAbsolutePath(), "xpp3", generatedSources, "4.0.0", "false" );
-            generateSources( model.getAbsolutePath(), "xpp3", generatedSourcesDirectory.getAbsolutePath(), "3.0.0", "true" );
+            generateSources( model.getAbsolutePath(), "xpp3", generatedSources, "3.0.0", "true" );
-        compile( testDependencies, testSources, testClasses, basedir + "/target/classes", null );
+        compile( testDependencies, testSources, testClasses, classes, null );

MOV23 MOV43 MOV43 INS27 INS27 INS27 INS60 INS21 INS21 INS42 INS45 INS42 INS45 INS42 INS45 INS43 MOV43 INS59 INS32 INS32 INS42 UPD42 MOV14 INS42 INS32 INS40 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS45 MOV43 MOV32 UPD42 MOV42 MOV32 UPD42 MOV42 MOV32 UPD42 MOV42 MOV32 UPD42 MOV42 MOV43 INS42 DEL45 DEL45 DEL45 DEL42 DEL32 DEL45 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL45 DEL27