o Improving test case.
o Fixing proper reading of the resources sections.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163294 13f79535-47bb-0310-9956-ffa450edef68

-        //
+        // Load the descriptor
+        // ----------------------------------------------------------------------
+        // Set up the Velocity context
+        // ----------------------------------------------------------------------
+
+        // ----------------------------------------------------------------------
+        // Process the templates
+        // ----------------------------------------------------------------------
+
-            processTemplate( outputDirectory, context, ARCHETYPE_POM, null );
+            processTemplate( outputDirectory, context, ARCHETYPE_POM, false, null );
+            processResources( outputDirectory, context, descriptor.getResources(), packageName );
+
+
+            processResources( outputDirectory, context, descriptor.getTestResources(), packageName );
-            processTemplate( outputDirectory, context, template, packageName );
+            processTemplate( outputDirectory, context, template, true, packageName );
-    protected void processTemplate( String outputDirectory, Context context, String template, String packageName )
+    protected void processResources( String outputDirectory, Context context, List resources, String packageName )
+        throws Exception
+    {
+        for ( Iterator i = resources.iterator(); i.hasNext(); )
+        {
+            String template = (String) i.next();
+
+            processTemplate( outputDirectory, context, template, false, packageName );
+        }
+    }
+
+    protected void processTemplate( String outputDirectory, Context context, String template, boolean packageInFileName, String packageName )
-        if ( packageName != null )
+        if ( packageInFileName && packageName != null )

INS31 INS83 INS39 INS42 INS44 INS44 INS44 INS44 INS43 INS8 INS44 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS24 INS39 INS42 INS42 INS42 INS42 INS42 INS58 INS32 INS8 INS27 INS21 INS21 INS43 INS59 INS42 INS42 INS60 INS21 INS42 MOV27 INS32 INS32 INS42 INS42 INS32 INS43 INS59 INS32 INS9 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS32 INS42 INS9 INS42 INS42 INS42 INS42 INS11 INS42 INS42 INS42 INS42 INS9 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS42 INS42 INS42