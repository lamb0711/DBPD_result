remove old style req, resp mojo support

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168082 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.util.CollectionUtils;
-        MojoExecutionRequest request = null;
-
-            // TODO: remove
-            boolean newMojoTechnique = checkMojoTechnique( plugin.getClass() );
-
-            String goalId = PluginDescriptor.getGoalIdFromFullGoal( goalName );
+            String goalId = mojoDescriptor.getGoal();
-            Xpp3Dom dom = session.getProject().getGoalConfiguration( PluginDescriptor.getPluginArtifactIdFromGoal( goalName ),
-                                                                     goalId );
+            Xpp3Dom dom = session.getProject().getGoalConfiguration(
+                PluginDescriptor.getPluginArtifactIdFromGoal( goalName ), goalId );
-                if ( newMojoTechnique )
-                {
-                    Map map = getPluginConfigurationFromExpressions( plugin, mojoDescriptor, mergedConfiguration,
-                                                                     expressionEvaluator );
+                getPluginConfigurationFromExpressions( plugin, mojoDescriptor, mergedConfiguration,
+                                                       expressionEvaluator );
-                    populatePluginFields( plugin, mojoDescriptor, mergedConfiguration, expressionEvaluator );
-                }
-                else
-                {
-                    getLogger().warn( "WARNING: The mojo " + mojoDescriptor.getId() + " is using the OLD API" );
-
-                    Map map = getPluginConfigurationFromExpressions( plugin, mojoDescriptor, mergedConfiguration,
-                                                                     expressionEvaluator );
-
-                    request = createPluginRequest( pomConfiguration, map );
-                }
+                populatePluginFields( plugin, mojoDescriptor, mergedConfiguration, expressionEvaluator );
-                if ( newMojoTechnique )
-                {
-                    plugin.execute();
-                }
-                else
-                {
-                    plugin.execute( request );
-                }
+                plugin.execute();
-    /**
-     * @deprecated
-     */
-    private static boolean checkMojoTechnique( Class aClass )
-    {
-        boolean newMojoTechnique = false;
-        try
-        {
-            aClass.getDeclaredMethod( "execute", new Class[0] );
-            newMojoTechnique = true;
-        }
-        catch ( NoSuchMethodException e )
-        {
-            // intentionally ignored
-
-            Class superclass = aClass.getSuperclass();
-            if ( superclass != AbstractMojo.class )
-            {
-                return checkMojoTechnique( superclass );
-            }
-        }
-        return newMojoTechnique;
-    }
-
-    /**
-     * @param configuration
-     * @param map
-     * @return
-     * @deprecated
-     */
-    private static MojoExecutionRequest createPluginRequest( PlexusConfiguration configuration, Map map )
-    {
-        Map parameters = new HashMap();
-        PlexusConfiguration[] children = configuration.getChildren();
-        for ( int i = 0; i < children.length; i++ )
-        {
-            PlexusConfiguration child = children[i];
-            parameters.put( child.getName(), child.getValue( null ) );
-        }
-        map = CollectionUtils.mergeMaps( map, parameters );
-        return new MojoExecutionRequest( map );
-    }
-
-                                      ExpressionEvaluator expressionEvaluator )
+                                       ExpressionEvaluator expressionEvaluator )
-                                                    "Unable to retrieve component configurator for plugin configuration",
-                                                    e );
+                "Unable to retrieve component configurator for plugin configuration", e );
-    private Map getPluginConfigurationFromExpressions( Mojo plugin, MojoDescriptor goal,
-                                                       PlexusConfiguration mergedConfiguration,
-                                                       ExpressionEvaluator expressionEvaluator )
+    private void getPluginConfigurationFromExpressions( Mojo plugin, MojoDescriptor goal,
+                                                        PlexusConfiguration mergedConfiguration,
+                                                        ExpressionEvaluator expressionEvaluator )
-        Map map = new HashMap();
-
-            map.put( key, value );
-        return map;
-                                                              "maven-project", "plexus-container-artifact", "maven-reporting-api", "doxia-core",
+                                                              "maven-project", "plexus-container-artifact",
+                                                              "maven-reporting-api", "doxia-core",

INS39 MOV8 MOV8 INS21 MOV21 UPD42 UPD42 MOV32 DEL40 DEL26 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL39 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL59 DEL60 DEL42 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL42 DEL32 DEL42 DEL45 DEL42 DEL42 DEL32 DEL45 DEL27 DEL32 DEL21 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL8 DEL25 DEL8 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL25 DEL8 DEL65 DEL29 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL39 DEL42 DEL9 DEL59 DEL60 DEL42 DEL42 DEL45 DEL42 DEL43 DEL85 DEL5 DEL34 DEL3 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL43 DEL57 DEL27 DEL42 DEL42 DEL32 DEL41 DEL8 DEL25 DEL8 DEL12 DEL54 DEL42 DEL41 DEL8 DEL31 DEL42 DEL65 DEL42 DEL65 DEL65 DEL65 DEL29 DEL83 DEL83 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL43 DEL14 DEL59 DEL60 DEL42 DEL43 DEL85 DEL5 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL39 DEL42 DEL34 DEL59 DEL58 DEL42 DEL40 DEL27 DEL42 DEL37 DEL42 DEL43 DEL42 DEL42 DEL42 DEL2 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL33 DEL32 DEL32 DEL21 DEL8 DEL24 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL42 DEL43 DEL42 DEL14 DEL41 DEL8 DEL31 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL43 DEL14 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL41