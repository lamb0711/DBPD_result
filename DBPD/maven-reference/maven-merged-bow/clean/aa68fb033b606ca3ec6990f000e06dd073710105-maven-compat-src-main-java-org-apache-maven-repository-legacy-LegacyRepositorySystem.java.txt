[MNG-2741] [regression] Meaningless error message: "Error transferring file"

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@929217 13f79535-47bb-0310-9956-ffa450edef68

-            throw new ArtifactTransferFailedException( "Error transferring artifact.", e );
+            throw new ArtifactTransferFailedException( getMessage( e, "Error transferring artifact." ), e );
-            throw new ArtifactDoesNotExistException( "Requested artifact does not exist.", e );            
+            throw new ArtifactDoesNotExistException( getMessage( e, "Requested artifact does not exist." ), e );
-            throw new ArtifactTransferFailedException( "Error transferring artifact.", e );
+            throw new ArtifactTransferFailedException( getMessage( e, "Error transferring artifact." ), e );
+    private static String getMessage( Throwable error, String def )
+    {
+        if ( error == null )
+        {
+            return def;
+        }
+        String msg = error.getMessage();
+        if ( StringUtils.isNotEmpty( msg ) )
+        {
+            return msg;
+        }
+        return getMessage( error.getCause(), def );
+    }
+

INS31 INS83 INS83 INS43 INS42 INS44 INS44 INS8 INS42 INS43 INS42 INS43 INS42 INS25 INS60 INS25 INS41 INS42 INS42 INS27 INS8 INS43 INS59 INS32 INS8 INS32 INS42 INS33 INS41 INS42 INS42 INS32 INS42 INS42 INS42 INS41 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS32 INS32 INS42 INS42 INS45 INS42 INS42 INS45 INS42 INS42 INS45 DEL45 DEL45 DEL45