o putting into play the use of the artifact filter during the transitive
  collection of artifacts.

  -> I was previously using a an exclude list but that was only taking into
     account the top-level pass of the artifacts so what was happening was
     things like maven-core weren't going in repeatedly but all of
     maven-core's deps were going in repeatedly. So by using the filter
     in the collector that sort of behaviour is stopped and now I can
     make the filter do anything I want to account for any weirdisms
     I subsequently encounter.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163185 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
-import org.apache.maven.artifact.metadata.ArtifactMetadataSource;
+import org.apache.maven.artifact.metadata.ArtifactMetadataSource;
-                                                         ArtifactMetadataSource source )
+                                                         ArtifactMetadataSource source,
+                                                         ArtifactFilter filter )
-                                                source );
+                                                source,
+                                                filter );
+    public ArtifactResolutionResult resolveTransitively( Set artifacts,
+                                                         Set remoteRepositories,
+                                                         ArtifactRepository localRepository,
+                                                         ArtifactMetadataSource source )
+        throws ArtifactResolutionException
+    {
+        return resolveTransitively( artifacts, remoteRepositories, localRepository, source, null );
+    }
+
-    public ArtifactResolutionResult collect( Set artifacts,
-                                             ArtifactRepository localRepository,
-                                             Set remoteRepositories,
-                                             ArtifactMetadataSource source )
+    protected ArtifactResolutionResult collect( Set artifacts,
+                                                ArtifactRepository localRepository,
+                                                Set remoteRepositories,
+                                                ArtifactMetadataSource source,
+                                                ArtifactFilter filter )
-                    //It's the first time we have encountered this artifact
+                    // ----------------------------------------------------------------------
+                    // It's the first time we have encountered this artifact
+                    // ----------------------------------------------------------------------
+
+                    if ( filter != null && !filter.include( newArtifact.getArtifactId() ) )
+                    {
+                        continue;
+                    }
+
+        // ----------------------------------------------------------------------
+        // ----------------------------------------------------------------------
+
+    protected boolean includeArtifact( String artifactId, String[] artifactExcludes )
+    {
+        for ( int b = 0; b < artifactExcludes.length; b++ )
+        {
+            if ( artifactId.equals( artifactExcludes[b] ) )
+            {
+                return false;
+            }
+        }
+
+        return true;
+    }

MOV26 INS26 INS40 INS31 INS31 INS44 INS83 INS43 INS42 INS44 INS44 INS44 INS44 INS43 INS8 UPD83 INS44 INS83 INS39 INS42 INS44 INS44 INS8 INS43 INS42 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS41 INS43 INS42 INS43 INS42 INS5 INS42 INS24 INS41 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS43 INS85 INS58 INS27 INS37 INS8 INS9 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS39 INS59 INS42 INS40 INS42 INS25 INS42 INS34 INS32 INS8 INS42 INS42 INS2 INS41 INS42 INS42 INS42 INS9 INS25 INS27 INS8 INS27 INS38 INS18 INS42 INS33 INS32 INS42 INS42 INS32 INS42 INS42