[MNG-3281] Revisit backwards compat of extensions (IT 0114)

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@815761 13f79535-47bb-0310-9956-ffa450edef68

+        MavenProject project = session.getCurrentProject();
-        List<ArtifactRepository> remoteRepositories = session.getCurrentProject().getPluginArtifactRepositories();
+        List<ArtifactRepository> remoteRepositories = project.getPluginArtifactRepositories();
-        PluginCache.CacheRecord cacheRecord = pluginCache.get( plugin, localRepository, remoteRepositories );
+        PluginCache.CacheRecord cacheRecord = pluginCache.get( plugin, project, localRepository, remoteRepositories );
-                mavenPluginManager.setupPluginRealm( pluginDescriptor, session, null, null );
+                mavenPluginManager.setupPluginRealm( pluginDescriptor, session, project.getClassRealm(), null );
-            pluginCache.put( plugin, localRepository, remoteRepositories, pluginDescriptor.getClassRealm(),
+            pluginCache.put( plugin, project, localRepository, remoteRepositories, pluginDescriptor.getClassRealm(),

MOV60 INS60 INS43 MOV74 INS59 INS42 UPD42 MOV32 INS42 INS32 INS42 INS42 INS42 INS42 INS32 INS42 INS42 DEL42 DEL32 DEL33