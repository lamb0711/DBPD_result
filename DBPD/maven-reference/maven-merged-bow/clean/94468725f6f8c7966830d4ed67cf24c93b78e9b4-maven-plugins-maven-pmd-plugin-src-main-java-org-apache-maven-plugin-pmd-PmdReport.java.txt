PR: MNG-1043
Submitted by: Ken Weiner
Reviewed by:  Brett Porter
configure the target JDK in PMD report plugin

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@292390 13f79535-47bb-0310-9956-ffa450edef68

-
+import net.sourceforge.pmd.TargetJDK1_3;
+import net.sourceforge.pmd.TargetJDK1_4;
+import net.sourceforge.pmd.TargetJDK1_5;
- * @goal pmd
- *
- * @todo needs to support the multiple source roots
+ * @goal pmd
+ * @todo needs to support the multiple source roots
+     * @parameter expression="${targetJdk}
+     */
+    private String targetJdk;
+
+    /**
-        PMD pmd = new PMD();
+        PMD pmd = getPMD();
+     * Constructs the PMD class, passing it an argument
+     * that configures the target JDK.
+     *
+     * @return the resulting PMD
+     */
+    public PMD getPMD()
+    {
+        PMD pmd;
+        if ( "1.5".equals( targetJdk ) )
+        {
+            pmd = new PMD( new TargetJDK1_5() );
+        }
+        else if ( "1.4".equals( targetJdk ) )
+        {
+            pmd = new PMD( new TargetJDK1_4() );
+        }
+        else if ( "1.3".equals( targetJdk ) )
+        {
+            pmd = new PMD( new TargetJDK1_3() );
+        }
+        else
+        {
+            pmd = new PMD();
+        }
+        return pmd;
+    }
+
+    /**
-        return ResourceBundle.getBundle("pmd-report", locale, PmdReport.class.getClassLoader() );
+        return ResourceBundle.getBundle( "pmd-report", locale, PmdReport.class.getClassLoader() );

INS26 INS26 INS26 INS40 INS40 INS40 MOV65 MOV65 INS23 INS31 INS29 INS83 INS43 INS59 INS29 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS65 INS65 INS42 INS60 INS25 INS41 INS66 INS66 INS66 INS66 INS43 INS59 INS32 INS8 INS25 INS42 INS32 INS42 INS42 INS45 INS42 INS42 INS21 INS32 INS8 INS25 INS42 INS7 INS45 INS42 INS42 INS21 INS32 INS8 INS8 INS42 INS14 INS7 INS45 INS42 INS42 INS21 INS21 INS43 INS14 INS42 INS14 INS7 INS7 INS42 INS43 INS43 INS14 INS42 INS14 INS42 MOV14 INS42 INS42 INS43 INS43 INS14 INS42 INS42 INS43 INS42