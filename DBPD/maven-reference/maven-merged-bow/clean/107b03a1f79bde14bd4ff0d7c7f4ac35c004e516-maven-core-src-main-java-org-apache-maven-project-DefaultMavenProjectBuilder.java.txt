o getting rid of some dead code in the project builder in preparation for trying to group more of the profile handling code as a test is failing in the embedder related to profiles while everything in the pom construction test is working correctly.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@775141 13f79535-47bb-0310-9956-ffa450edef68

-        Artifact artifact =
-            repositorySystem.createProjectArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion() );
+        Artifact artifact = repositorySystem.createProjectArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion() );
+            .setResolveRoot( false )
-        project.getArtifacts().remove( artifact );
-
-            MavenProject topProject = projectBuilderConfiguration.getTopLevelProjectFromReactor();
-            if ( useTopLevelProjectForParent( domainModel, topProject ) )
-            {
-                mavenParents = getDomainModelParentsFromLocalPath( domainModel, localRepository, remoteRepositories, topProject.getFile(), projectBuilderConfiguration );
-            }
-            else if ( isParentLocal( domainModel.getRelativePathOfParent(), pomFile.getParentFile() ) )
+            
+            if ( isParentLocal( domainModel.getRelativePathOfParent(), pomFile.getParentFile() ) )
-    private static boolean useTopLevelProjectForParent( DomainModel currentModel, MavenProject topProject )
-        throws IOException
-    {
-        if ( topProject == null || currentModel.getModel().getParent() == null )
-        {
-            return false;
-        }
-
-        return topProject.getGroupId().equals( currentModel.getParentGroupId() ) && topProject.getArtifactId().equals( currentModel.getParentArtifactId() )
-            && topProject.getVersion().equals( currentModel.getParentVersion() );
-
-    }
-
+        
-        boolean isTop = useTopLevelProjectForParent( domainModel, topProject );
+        
-        if ( !isTop )
+        if ( !parentFile.isFile() )
-            if ( !parentFile.isFile() )
-            {
-                throw new IOException( "File does not exist: File = " + parentFile.getAbsolutePath() );
-            }
-            parentDomainModel = new DomainModel( parentFile );
-            parentDomainModel.setProjectDirectory( parentFile.getParentFile() );
+            throw new IOException( "File does not exist: File = " + parentFile.getAbsolutePath() );
-        else
-        {
-            parentDomainModel = new DomainModel( projectBuilderConfiguration.getTopLevelProjectFromReactor().getFile() );
-        }
+        parentDomainModel = new DomainModel( parentFile );
+        parentDomainModel.setProjectDirectory( parentFile.getParentFile() );
-        {
-            if ( isTop )
-            {
-                if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )
-                {
-                    domainModels
-                        .addAll( getDomainModelParentsFromLocalPath( parentDomainModel, localRepository, remoteRepositories, topProject.getFile().getParentFile(), projectBuilderConfiguration ) );
-                }
-                else
-                {
-                    domainModels.addAll( getDomainModelParentsFromRepository( parentDomainModel, localRepository, remoteRepositories ) );
-                }
-            }
-            else if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )
+        {            
+            if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )

MOV25 MOV25 MOV21 MOV21 MOV25 MOV27 INS8 MOV27 MOV8 MOV60 MOV25 MOV25 MOV21 MOV25 UPD42 MOV42 INS32 MOV32 INS42 INS9 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 UPD9 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL32 DEL42 DEL32 DEL32 DEL7 DEL21 DEL8 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL8 DEL25 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL33 DEL27 DEL42 DEL42 DEL32 DEL42 DEL32 DEL33 DEL27 DEL27 DEL9 DEL41 DEL8 DEL25 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL32 DEL27 DEL41 DEL8 DEL31 DEL39 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL38 DEL8 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL32 DEL14 DEL7 DEL21 DEL8 DEL25 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL32 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL8 DEL25 DEL8 DEL8 DEL25