[MNG-1697] Added a new null check and unit test to addEdgeWithParentCheck(..), just to make sure this is fixed. (I think it was already fixed, but this is just to be extra sure.)

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@425843 13f79535-47bb-0310-9956-ffa450edef68

-            
+
-                String dependencyId = ArtifactUtils.versionlessKey( dependency.getGroupId(),
-                                                                    dependency.getArtifactId() );
+                String dependencyId = ArtifactUtils
+                    .versionlessKey( dependency.getGroupId(), dependency.getArtifactId() );
-    private void addEdgeWithParentCheck( Map projectMap, String extensionId, MavenProject project, String id )
+    private void addEdgeWithParentCheck( Map projectMap, String projectRefId, MavenProject project, String id )
-        MavenProject extProject = (MavenProject) projectMap.get( extensionId );
+        MavenProject extProject = (MavenProject) projectMap.get( projectRefId );
+        
+        if ( extProject == null )
+        {
+            return;
+        }
+
-            if ( !dag.hasEdge( extensionId, id ) || !parentId.equals( id ) )
+            if ( !dag.hasEdge( projectRefId, id ) || !parentId.equals( id ) )
-                dag.addEdge( id, extensionId );
+                dag.addEdge( id, projectRefId );

UPD42 INS25 INS27 INS8 INS42 INS33 INS41 UPD42 UPD42 UPD42