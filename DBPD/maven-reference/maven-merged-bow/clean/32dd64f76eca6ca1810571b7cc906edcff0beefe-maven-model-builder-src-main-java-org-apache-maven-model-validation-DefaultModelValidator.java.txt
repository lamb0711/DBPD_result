[MNG-4953] Issue a warning when a system-scope dependency refers to the project basedir

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1053111 13f79535-47bb-0310-9956-ffa450edef68

-                                       ModelBuildingRequest request )
+                                          ModelBuildingRequest request )
-                if ( StringUtils.isNotEmpty( sysPath ) && !hasExpression( sysPath ) )
+                if ( StringUtils.isNotEmpty( sysPath ) )
-                    addViolation( problems, Severity.WARNING, prefix + ".systemPath", key,
-                                  "should use a variable instead of a hard-coded path " + sysPath, dependency );
+                    if ( !hasExpression( sysPath ) )
+                    {
+                        addViolation( problems, Severity.WARNING, prefix + ".systemPath", key,
+                                      "should use a variable instead of a hard-coded path " + sysPath, dependency );
+                    }
+                    else if ( sysPath.contains( "${basedir}" ) || sysPath.contains( "${project.basedir}" ) )
+                    {
+                        addViolation( problems, Severity.WARNING, prefix + ".systemPath", key,
+                                      "should not point at files within the project directory, " + sysPath
+                                          + " will be unresolvable by dependent projects", dependency );
+                    }
-        return value != null && value.indexOf( "${" ) >= 0;
+        return value != null && value.contains( "${" );

MOV32 UPD42 MOV32 INS8 INS25 MOV38 MOV8 INS25 UPD27 MOV27 INS8 INS32 INS32 INS21 INS42 INS42 INS45 INS42 INS42 INS45 INS32 INS42 INS42 INS40 INS27 INS42 INS27 INS42 INS42 INS45 INS45 INS42 INS45 DEL34 DEL27