update the archetypes


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163837 13f79535-47bb-0310-9956-ffa450edef68

+/*
+ * Copyright 2001-2005 The Apache Software Foundation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
-import org.apache.maven.plugin.PluginExecutionRequest;
-import org.apache.maven.plugin.PluginExecutionResponse;
+import org.apache.maven.plugin.PluginExecutionException;
+import java.io.IOException;
- * @description Goal which cleans the build
+ * @description Goal which touches a timestamp file
- *  type="String"
- *  required="true"
- *  validator=""
- *  expression="#project.build.directory"
- *  description=""
- * 
- * @parameter
- *  name="basedirAlignmentDirectory"
- *  expression="target/test-basedir-alignment"
+ *  expression="#project.build.directory"
-    private static final int DELETE_RETRY_SLEEP_MILLIS = 10;
+    private String outputDirectory;
-    public void execute( PluginExecutionRequest request, PluginExecutionResponse response )
-        throws Exception
+    public void execute()
+        throws PluginExecutionException
-        String outputDirectory = (String) request.getParameter( "outputDirectory" );
-
-        
+
-        
-        File touch = new File( f, "touch.txt" );
-        
-        FileWriter w = new FileWriter( touch );
-        
-        w.write( "touch.txt" );
-        
-        w.close();
-        
-        // This parameter should be aligned to the basedir as the parameter type is specified
-        // as java.io.File
-        
-        String basedirAlignmentDirectory = (String) request.getParameter( "basedirAlignmentDirectory" );
-        f = new File( basedirAlignmentDirectory );
-        
-        if ( !f.exists() )
+        File touch = new File( f, "touch.txt" );
+
+        FileWriter w = null;
+        try
-            f.mkdirs();
-        }         
-        
-        touch = new File( f, "touch.txt" );
-        
-        w = new FileWriter( touch );
-        
-        w.write( "touch.txt" );
-        
-        w.close();        
+            w = new FileWriter( touch );
+
+            w.write( "touch.txt" );
+        }
+        catch ( IOException e )
+        {
+            throw new PluginExecutionException( "Error creating file " + touch );
+        }
+        finally
+        {
+            if ( w != null )
+            {
+                try
+                {
+                    w.close();
+                }
+                catch ( IOException e )
+                {
+                    // ignore
+                }
+            }
+        }

MOV26 UPD40 UPD40 MOV43 INS43 UPD66 UPD66 UPD42 UPD42 MOV42 INS54 INS8 INS12 INS8 INS33 MOV21 MOV21 INS44 INS8 INS25 INS43 INS42 INS53 INS27 INS8 UPD42 MOV42 INS14 INS42 INS33 INS54 INS43 INS27 INS8 INS12 UPD42 MOV42 INS45 INS42 MOV21 INS44 INS8 INS43 INS42 UPD42 MOV42 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL65 DEL83 DEL83 DEL39 DEL34 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL45 DEL32 DEL11 DEL59 DEL60 DEL42 DEL43 DEL42 DEL14 DEL43 DEL42 DEL43 DEL42 DEL42 DEL45 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL43 DEL42 DEL14 DEL7 DEL21 DEL42 DEL42 DEL32 DEL38 DEL42 DEL42 DEL32 DEL21 DEL8 DEL25 DEL42 DEL43 DEL42 DEL45 DEL14 DEL7 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL32 DEL21