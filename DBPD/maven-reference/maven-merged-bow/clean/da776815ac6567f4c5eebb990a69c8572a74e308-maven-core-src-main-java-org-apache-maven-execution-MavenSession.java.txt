o a test which demonstrates the difficulting in testing the execution of a single mojo, indicates some work to isolate the system and make it easier
  for people to reuse this code. igor had to jump through these same hoops to get isolated mojo execution working in m2e. needs some love.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@751582 13f79535-47bb-0310-9956-ffa450edef68

+    //For testing
+    private ArtifactRepository localRepository;
+    
+    private MavenRealmManager realmManager;
+    
+    public MavenSession( ArtifactRepository localRepository, MavenRealmManager realmManager )    
+    {        
+        this.localRepository = localRepository;
+        this.realmManager = realmManager;
+    }
+    
+        if ( realmManager != null )
+        {
+            return realmManager;
+        }
+        
-    public Map getPluginContext( PluginDescriptor pluginDescriptor,
-                                 MavenProject project )
+    public Map getPluginContext( PluginDescriptor pluginDescriptor, MavenProject project )
-
+    
+        if ( localRepository != null )
+        {
+            return localRepository;            
+        }
+        

INS23 INS23 INS31 INS83 INS43 INS59 INS83 INS43 INS59 INS83 INS42 INS44 INS44 INS8 INS42 INS42 INS42 INS42 INS43 INS42 INS43 INS42 INS21 INS21 INS25 INS25 INS42 INS42 INS7 INS7 INS27 INS8 INS27 INS8 INS22 INS42 INS22 INS42 INS42 INS33 INS41 INS42 INS33 INS41 INS52 INS42 INS52 INS42 INS42 INS42