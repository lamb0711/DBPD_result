o Refactored RepositoryCleaner to use DiscoveryPhase and RewritePhase.
o Added the ability to read a pom and figure out whether it's a v4 pom (based on presence of modelVersion)
o Added a more accurate counter for artifacts that are actually rewritten successfully, rather than just the ones that enter the rewriting process.
o Probably need to add the phases still...


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@169041 13f79535-47bb-0310-9956-ffa450edef68

-        config.setSourcePomVersion( props.getProperty( "sourcePomVersion", "v3" ) );
-        config.setMailErrorReport(
-            Boolean.valueOf( props.getProperty( "errorReport.mailOnError", "false" ) ).booleanValue() );
+        config.setMailErrorReport( Boolean.valueOf( props.getProperty( "errorReport.mailOnError", "false" ) )
+            .booleanValue() );
-        System.out.println( "repoclean: Repository Cleaner/Converter.\n\n" +
-                            "Usage: repoclean -h|-template|<configuration-properties-file>\n\n" +
-                            "---------------------------------------------------------------------------\n" +
-                            "  Use the '-template' option to see sample configuration file options.\n" + "\n" );
+        System.out.println( "repoclean: Repository Cleaner/Converter.\n\n"
+            + "Usage: repoclean -h|-template|<configuration-properties-file>\n\n"
+            + "---------------------------------------------------------------------------\n"
+            + "  Use the '-template' option to see sample configuration file options.\n" + "\n" );
-        System.out.println( "# ---------------------------------------------------------------------------\n" +
-                            "# repoclean: Repository Cleaner/Converter.\n" + "# This configuration auto-generated on: " + new java.util.Date() + "\n" +
-                            "# ---------------------------------------------------------------------------\n\n" +
-                            "# [REQUIRED OPTIONS]\n" + "sourceRepositoryPath=/path/to/repository/root\n" + "targetRepositoryPath=/path/to/repository/root\n" + "reportsPath=/path/to/reports/directory\n" + "reportOnly=[true|false]\n" + "\n" + "errorReport.mailOnError=[true|false]\n" + "errorReport.fromAddress=admin@somewhere.com\n" + "errorReport.fromName=Admin\n" + "errorReport.subject=[REPOCLEAN] Error!\n" + "errorReport.toAddress=dev@somewhere.com\n" + "errorReport.toName=Developers List\n" + "\n" + "# [DEFAULT VALUE: legacy]\n" + "#sourceRepositoryLayout=[legacy|default]\n\n" + "# [DEFAULT VALUE: v3]\n" + "#sourcePomType=[v3|v4]\n\n" + "# [DEFAULT VALUE: default]\n" + "#targetRepositoryLayout=[legacy|default]\n" + "# [DEFAULT VALUE: localhost]\n" + "#errorReport.smtpHost=<hostname>\n" + "\n" );
+        System.out.println( "# ---------------------------------------------------------------------------\n"
+            + "# repoclean: Repository Cleaner/Converter.\n" + "# This configuration auto-generated on: "
+            + new java.util.Date() + "\n"
+            + "# ---------------------------------------------------------------------------\n\n"
+            + "# [REQUIRED OPTIONS]\n" + "sourceRepositoryPath=/path/to/repository/root\n"
+            + "targetRepositoryPath=/path/to/repository/root\n" + "reportsPath=/path/to/reports/directory\n"
+            + "reportOnly=[true|false]\n" + "\n" + "errorReport.mailOnError=[true|false]\n"
+            + "errorReport.fromAddress=admin@somewhere.com\n" + "errorReport.fromName=Admin\n"
+            + "errorReport.subject=[REPOCLEAN] Error!\n" + "errorReport.toAddress=dev@somewhere.com\n"
+            + "errorReport.toName=Developers List\n" + "\n" + "# [DEFAULT VALUE: legacy]\n"
+            + "#sourceRepositoryLayout=[legacy|default]\n\n" + "# [DEFAULT VALUE: v3]\n"
+            + "# [DEFAULT VALUE: default]\n" + "#targetRepositoryLayout=[legacy|default]\n"
+            + "# [DEFAULT VALUE: localhost]\n" + "#errorReport.smtpHost=<hostname>\n" + "\n" );
-        System.out.println( "Required input is missing.\n\n" + "Usage:\n" +
-                            "--------------------------------------------------\n\n" +
-                            "repoclean -h|-template|<configuration-properties-file>\n" );
+        System.out.println( "Required input is missing.\n\n" + "Usage:\n"
+            + "--------------------------------------------------\n\n"
+            + "repoclean -h|-template|<configuration-properties-file>\n" );

DEL42 DEL42 DEL42 DEL42 DEL45 DEL45 DEL32 DEL32 DEL21 DEL45