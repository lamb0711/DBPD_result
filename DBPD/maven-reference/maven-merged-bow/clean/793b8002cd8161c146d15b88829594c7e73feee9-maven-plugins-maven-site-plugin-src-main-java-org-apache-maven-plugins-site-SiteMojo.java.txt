PR: MNG-912
Submitted by: Binyan
Reviewed by:  Brett Porter
avoid "duplicate files" checking during site generation for resources

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@292387 13f79535-47bb-0310-9956-ffa450edef68

+                String defaultExcludes = StringUtils.join( DEFAULT_EXCLUDES, "," );
+
-                    tryToFindDuplicates( siteDirectoryFile, duplicate );
+                    // TODO: avoid this hardcoding - the resources dir might be elsewhere. We should really test for duplicate targets, not guess at what source files will be html.
+                    // add the site's 'resources' directory to the default exclude list
+                    String actualExcludes = defaultExcludes + "," + "resources/**";
+
+                    tryToFindDuplicates( siteDirectoryFile, actualExcludes, duplicate );
-                    tryToFindDuplicates( generatedSiteDirectory, duplicate );
+                    tryToFindDuplicates( generatedSiteDirectory, defaultExcludes, duplicate );
+     * @param defaultExcludes files patterns to be exclude from the search
-    private static void tryToFindDuplicates( File directory, Map duplicate )
+    private static void tryToFindDuplicates( File directory, String defaultExcludes, Map duplicate )
-        String defaultExcludes = StringUtils.join( DEFAULT_EXCLUDES, "," );

INS44 INS65 INS43 INS42 INS42 INS66 INS42 MOV60 INS60 INS43 INS59 INS42 INS42 INS27 INS42 INS42 INS42 INS45 INS45