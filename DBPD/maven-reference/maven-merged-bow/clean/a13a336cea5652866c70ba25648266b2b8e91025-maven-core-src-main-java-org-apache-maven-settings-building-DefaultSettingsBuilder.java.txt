[MNG-4390] Make parsing of settings.xml lenient with respect to unrecognized tags

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@824188 13f79535-47bb-0310-9956-ffa450edef68

-            boolean strict = true;
+            Map<String, ?> options = Collections.singletonMap( SettingsReader.IS_STRICT, Boolean.TRUE );
-            Map<String, ?> options = Collections.singletonMap( SettingsReader.IS_STRICT, Boolean.valueOf( strict ) );
+            try
+            {
+                settings = settingsReader.read( settingsFile, options );
+            }
+            catch ( SettingsParseException e )
+            {
+                options = Collections.singletonMap( SettingsReader.IS_STRICT, Boolean.FALSE );
-            settings = settingsReader.read( settingsFile, options );
+                settings = settingsReader.read( settingsFile, options );
+
+                problems.add( new DefaultSettingsProblem( e.getMessage(), SettingsProblem.Severity.WARNING,
+                                                          settingsFile.getAbsolutePath(), e.getLineNumber(),
+                                                          e.getColumnNumber(), e ) );
+            }
-            problems.add( new DefaultSettingsProblem( "Non-parseable settings " + settingsFile,
+            problems.add( new DefaultSettingsProblem( "Non-parseable settings " + settingsFile + ": " + e.getMessage(),
-            problems.add( new DefaultSettingsProblem( "Non-readable settings " + settingsFile,
+            problems.add( new DefaultSettingsProblem( "Non-readable settings " + settingsFile + ": " + e.getMessage(),

INS12 INS60 INS54 INS44 INS8 MOV74 INS59 INS8 MOV12 INS43 INS42 INS21 MOV41 MOV41 MOV42 INS32 INS21 INS42 INS32 MOV42 MOV42 MOV40 INS40 INS7 INS21 MOV21 INS42 INS42 INS14 INS42 INS32 INS7 MOV43 INS27 INS40 MOV32 INS32 INS32 INS42 INS43 INS32 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 INS42 INS32 INS45 INS42 INS45 INS32 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS42 INS42 INS42 INS42 INS40 INS40 INS32 UPD40 INS42 INS42 INS42 INS42 INS42 INS42 DEL45 DEL42 DEL27 DEL39 DEL42 DEL9 DEL59 DEL60 DEL32 DEL32 DEL59 DEL60