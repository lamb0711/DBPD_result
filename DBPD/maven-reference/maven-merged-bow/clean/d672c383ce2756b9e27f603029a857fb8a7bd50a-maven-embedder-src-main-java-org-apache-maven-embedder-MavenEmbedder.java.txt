o adding metadata needed by DefaultRuntimeInformation
o adding required plexus component descriptors



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@291966 13f79535-47bb-0310-9956-ffa450edef68

+    public static final String userHome = System.getProperty( "user.home" );
+
+    private File mavenHome;
+
+    public File getMavenHome()
+    {
+        return mavenHome;
+    }
+
+    public void setMavenHome( File mavenHome )
+    {
+        this.mavenHome = mavenHome;
+    }
+
+        // ----------------------------------------------------------------------
+        // Set the maven.home system property which is need by components like
+        // the plugin registry builder.
+        // ----------------------------------------------------------------------
+
+        // TODO: create a maven.home discovery method.
+
+        if ( mavenHome == null )
+        {
+            mavenHome = new File( userHome, "m2" );
+
+            if ( !mavenHome.exists() )
+            {
+                throw new IllegalStateException( "You have set a maven home, or the default of ~/m2 must exist on your system." );
+            }
+
+            System.setProperty( "maven.home", mavenHome.getAbsolutePath() );
+        }
+

INS23 INS23 INS31 INS31 INS83 INS83 INS83 INS43 INS59 INS83 INS43 INS59 INS83 INS43 INS42 INS8 INS83 INS39 INS42 INS44 INS8 INS42 INS42 INS32 INS42 INS42 INS42 INS41 INS43 INS42 INS21 INS25 INS42 INS42 INS45 INS42 INS42 INS7 INS27 INS8 INS22 INS42 INS42 INS33 INS21 INS25 INS21 INS52 INS42 INS7 INS38 INS8 INS32 INS42 INS14 INS32 INS53 INS42 INS42 INS45 INS32 INS43 INS42 INS45 INS42 INS42 INS14 INS42 INS42 INS42 INS43 INS45 INS42