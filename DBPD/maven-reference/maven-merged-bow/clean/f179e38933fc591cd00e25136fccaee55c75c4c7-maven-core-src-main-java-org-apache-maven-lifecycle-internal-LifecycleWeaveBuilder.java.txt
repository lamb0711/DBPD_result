o Avoided creation of broken ThreadLockedArtifact (i.e. don't wrap null artifacts)

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@980522 13f79535-47bb-0310-9956-ffa450edef68

-                if ( !( mavenProject.getArtifact() instanceof ThreadLockedArtifact ) )
+                Artifact mainArtifact = mavenProject.getArtifact();
+                if ( mainArtifact != null && !( mainArtifact instanceof ThreadLockedArtifact ) )
-                    ThreadLockedArtifact threadLockedArtifact = new ThreadLockedArtifact( mavenProject.getArtifact() );
+                    ThreadLockedArtifact threadLockedArtifact = new ThreadLockedArtifact( mainArtifact );
-                threadLockedArtifact.attachToThread();
+                if ( threadLockedArtifact != null )
+                {
+                    threadLockedArtifact.attachToThread();
+                }

MOV8 INS25 INS43 INS27 INS8 INS25 INS42 UPD42 MOV32 INS27 MOV38 INS60 MOV21 INS27 INS8 INS42 INS33 MOV43 INS59 INS42 INS33 MOV21 INS42 INS14 INS42 MOV43 INS42 DEL14 DEL42 DEL42 DEL32 DEL25 DEL8