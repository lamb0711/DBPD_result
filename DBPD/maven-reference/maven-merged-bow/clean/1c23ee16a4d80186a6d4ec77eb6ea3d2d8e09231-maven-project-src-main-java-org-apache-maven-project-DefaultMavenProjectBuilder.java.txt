[MNG-2054] make it0096 test the problem properly by going to enough depth. Rollback the "fix" for MNG-2130 as it didn't appear to be correct - it caused it0096, and it0099 passes anyway. I suspect there were other circumstances in the codebase causing 99 to fail at the time. You should not use a cached project for inheritence - it will accumulate inherited elements as was the case with MNG-2054.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@390133 13f79535-47bb-0310-9956-ffa450edef68

-            String parentKey = createCacheKey( parentModel.getGroupId(), parentModel.getArtifactId(), parentModel.getVersion() );
-            MavenProject parentProject = (MavenProject)projectCache.get( parentKey );
-
-            if ( parentProject != null )
-            {
-                model = parentProject.getOriginalModel();
-
-                parentDescriptor = parentProject.getFile();
-            }
-            else
-            {
-                model = null;
-            }
+            model = null;
-
-            parentProject = assembleLineage( model, lineage, localRepository, parentProjectDir,
+            MavenProject parent = assembleLineage( model, lineage, localRepository, parentProjectDir,
-            parentProject.setFile( parentDescriptor );
+            parent.setFile( parentDescriptor );
-            project.setParent( parentProject );
+            project.setParent( parent );
-

MOV60 MOV21 MOV43 UPD42 MOV32 UPD42 UPD42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL33 DEL27 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL8 DEL8 DEL25 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL32 DEL42 DEL7 DEL21