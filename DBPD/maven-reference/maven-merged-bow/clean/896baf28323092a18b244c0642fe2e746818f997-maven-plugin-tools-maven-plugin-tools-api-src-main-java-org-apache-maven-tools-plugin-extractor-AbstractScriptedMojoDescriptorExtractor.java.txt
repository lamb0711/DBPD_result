PR: MNG-897

Fixing abstract scripted mojo descriptor extractor to properly construct script resource directories. Also, cleaned up the usage integration test. Ant support works now, but we need to decide what version this should be released under. It will involve re-releasing the plugin-plugin, to take advantage of the new maven-plugin-tools-api, I think.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@329948 13f79535-47bb-0310-9956-ffa450edef68

-            gatherFilesByBasedir( project.getScriptSourceRoots(), scriptExtension );
-
+            gatherFilesByBasedir( project.getBasedir(), project.getScriptSourceRoots(), scriptExtension );
+        
-                gatherFilesByBasedir( project.getScriptSourceRoots(), metadataExtension );
+                gatherFilesByBasedir( project.getBasedir(), project.getScriptSourceRoots(), metadataExtension );
-    protected Map gatherFilesByBasedir( List directories, String scriptFileExtension )
+    protected Map gatherFilesByBasedir( File basedir, List directories, String scriptFileExtension )
-            File dir = new File( resourceDir ).getAbsoluteFile();
+            
+            File dir = new File( basedir, resourceDir ).getAbsoluteFile();
+                scanner.setIncludes( new String[] { "**/*" + scriptFileExtension } );

INS44 INS43 INS42 INS42 INS32 MOV43 INS42 INS42 INS21 INS32 INS32 INS42 INS42 MOV43 INS42 INS42 INS42 INS3 INS5 INS4 INS43 INS85 INS27 INS42 INS45 INS42