decouple auth info from repository, allows removing settings from project code

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@164189 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.wagon.authentication.AuthenticationInfo;
+    // TODO: proxies and authentication are via settings, and should come in via an alternate method - perhaps attached to ArtifactRepository before the method is called (so AR would be composed of WR, not inherit it)
+    private Map authenticationInfoMap = new HashMap();
+
-            wagon.connect( repository, getProxy( repository.getProtocol() ) );
+            wagon.connect( repository, getAuthenticationInfo( repository.getId() ),
+                           getProxy( repository.getProtocol() ) );
-            wagon.connect( repository, getProxy( repository.getProtocol() ) );
+            wagon.connect( repository, getAuthenticationInfo( repository.getId() ),
+                           getProxy( repository.getProtocol() ) );
+    private AuthenticationInfo getAuthenticationInfo( String id )
+    {
+        return (AuthenticationInfo) authenticationInfoMap.get( id );
+    }
+
-    public void setProxy( String protocol, String host, int port, String username, String password,
+    public void addProxy( String protocol, String host, int port, String username, String password,
+
+    public void addAuthenticationInfo( String repositoryId, String username, String password, String privateKey,
+                                       String passphrase )
+    {
+        AuthenticationInfo authInfo = new AuthenticationInfo();
+
+        authInfo.setUserName( username );
+
+        authInfo.setPassword( password );
+
+        authInfo.setPrivateKey( privateKey );
+
+        authInfo.setPassphrase( passphrase );
+
+        authenticationInfoMap.put( repositoryId, authInfo );
+    }

INS26 INS40 INS23 INS31 INS31 INS83 INS43 INS59 INS83 INS43 INS42 INS44 INS8 UPD42 INS83 INS39 INS42 INS44 INS44 INS44 INS44 INS44 INS8 INS42 INS42 INS14 INS42 INS43 INS42 INS41 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS60 INS21 INS21 INS21 INS21 INS21 INS43 INS42 INS11 INS42 INS42 INS42 INS42 INS42 INS43 INS59 INS32 INS32 INS32 INS32 INS32 INS42 INS43 INS32 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS32 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS42 INS42