Generalized error diagnosis for use outside of maven-core. This allows us to print diagnostic messages in the Ant tasks, for instance (these modifications are also included), and share diagnosers between multiple uses (maven-core, maven-artifact-ant, for example). This should help with MNG-784, but I'll verify that before I close it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@314804 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.usability.DiagnosisUtils;
-import org.apache.maven.usability.ErrorDiagnoser;
+import org.apache.maven.usability.SystemWarnings;
+import org.apache.maven.usability.diagnostics.ErrorDiagnostics;
-import java.util.Map;
-
-    protected Map errorDiagnosers;
+    
+    protected ErrorDiagnostics errorDiagnostics;
-            getLogger().info( DiagnosisUtils.getOfflineWarning() );
+            getLogger().info( SystemWarnings.getOfflineWarning() );
-        if ( errorDiagnosers != null )
+        if ( errorDiagnostics != null )
-            for ( Iterator it = errorDiagnosers.values().iterator(); it.hasNext(); )
-            {
-                ErrorDiagnoser diagnoser = (ErrorDiagnoser) it.next();
-
-                if ( diagnoser.canDiagnose( error ) )
-                {
-                    message = diagnoser.diagnose( error );
-
-                    // first one wins.
-                    break;
-                }
-            }
+            message = errorDiagnostics.diagnose( error );
-        if ( errorDiagnosers != null )
+        if ( errorDiagnostics != null )
-            for ( Iterator it = errorDiagnosers.values().iterator(); it.hasNext(); )
-            {
-                ErrorDiagnoser diagnoser = (ErrorDiagnoser) it.next();
-
-                if ( diagnoser.canDiagnose( error ) )
-                {
-                    message = diagnoser.diagnose( error );
-
-                    // first one wins.
-                    break;
-                }
-            }
+            message = errorDiagnostics.diagnose( error );

UPD40 UPD40 UPD43 UPD42 UPD42 MOV8 MOV8 UPD42 UPD42 UPD42 UPD42 UPD42 DEL40 DEL26 DEL10 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL25 DEL8 DEL24 DEL8 DEL10 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL25 DEL8 DEL24 DEL8