MNG-2926 - fixed plugin prefix searching order.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@526484 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
- *
+ * 
- * @version $Id$
+ * @version $Id: DefaultPluginMappingManager.java 495147 2007-01-11 07:47:53Z
+ *          jvanzyl $
-
+            getLogger().debug( "Loading plugin prefixes from group: " + groupId );
+                
+                //if the prefix has already been found, don't add it again.
+                //this is to preserve the correct ordering of prefix searching (MNG-2926)
+                if ( !pluginDefinitionsByPrefix.containsKey( prefix ) )
+                {
+                    String artifactId = mapping.getArtifactId();
-                String artifactId = mapping.getArtifactId();
+                    org.apache.maven.model.Plugin plugin = new org.apache.maven.model.Plugin();
-                org.apache.maven.model.Plugin plugin = new org.apache.maven.model.Plugin();
+                    plugin.setGroupId( metadata.getGroupId() );
-                plugin.setGroupId( metadata.getGroupId() );
+                    plugin.setArtifactId( artifactId );
-                plugin.setArtifactId( artifactId );
-
-                pluginDefinitionsByPrefix.put( prefix, plugin );
+                    pluginDefinitionsByPrefix.put( prefix, plugin );
+                }

INS26 INS40 INS66 UPD66 INS21 INS32 INS32 INS42 INS27 INS25 INS42 INS45 INS42 INS38 INS8 INS32 MOV60 MOV60 MOV21 MOV21 MOV21 INS42 INS42 INS42