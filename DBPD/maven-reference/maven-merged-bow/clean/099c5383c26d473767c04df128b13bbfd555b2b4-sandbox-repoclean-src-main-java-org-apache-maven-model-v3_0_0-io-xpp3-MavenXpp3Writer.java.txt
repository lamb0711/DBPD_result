o Refactored RepositoryCleaner to use DiscoveryPhase and RewritePhase.
o Added the ability to read a pom and figure out whether it's a v4 pom (based on presence of modelVersion)
o Added a more accurate counter for artifacts that are actually rewritten successfully, rather than just the ones that enter the rewriting process.
o Probably need to add the phases still...


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@169041 13f79535-47bb-0310-9956-ffa450edef68

-    public void write( Writer writer, Model model ) throws Exception
+    public void write( Writer writer, Model model )
+        throws Exception
-    private void writeBranch( Branch branch, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeBranch( Branch branch, String tagName, XmlSerializer serializer )
+        throws Exception
-    private void writeBuild( Build build, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeBuild( Build build, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "nagEmailAddress" );
+                    .endTag( NAMESPACE, "nagEmailAddress" );
-                          .endTag( NAMESPACE, "sourceDirectory" );
+                    .endTag( NAMESPACE, "sourceDirectory" );
-                          .endTag( NAMESPACE, "unitTestSourceDirectory" );
+                    .endTag( NAMESPACE, "unitTestSourceDirectory" );
-                          .endTag( NAMESPACE, "aspectSourceDirectory" );
+                    .endTag( NAMESPACE, "aspectSourceDirectory" );
-                          .text( build.getIntegrationUnitTestSourceDirectory() )
-                          .endTag( NAMESPACE, "integrationUnitTestSourceDirectory" );
+                    .text( build.getIntegrationUnitTestSourceDirectory() )
+                    .endTag( NAMESPACE, "integrationUnitTestSourceDirectory" );
-    private void writeContributor( Contributor contributor, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeContributor( Contributor contributor, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "organization" );
+                    .endTag( NAMESPACE, "organization" );
-    private void writeDependency( Dependency dependency, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeDependency( Dependency dependency, String tagName, XmlSerializer serializer )
+        throws Exception
-    private void writeDeveloper( Developer developer, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeDeveloper( Developer developer, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "organization" );
+                    .endTag( NAMESPACE, "organization" );
-    private void writeFileSet( FileSet fileSet, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeFileSet( FileSet fileSet, String tagName, XmlSerializer serializer )
+        throws Exception
-    private void writeLicense( License license, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeLicense( License license, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "distribution" );
+                    .endTag( NAMESPACE, "distribution" );
-    private void writeMailingList( MailingList mailingList, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeMailingList( MailingList mailingList, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "unsubscribe" );
+                    .endTag( NAMESPACE, "unsubscribe" );
-    private void writeModel( Model model, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeModel( Model model, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "currentVersion" );
+                    .endTag( NAMESPACE, "currentVersion" );
-                          .endTag( NAMESPACE, "shortDescription" );
+                    .endTag( NAMESPACE, "shortDescription" );
-                          .endTag( NAMESPACE, "issueTrackingUrl" );
+                    .endTag( NAMESPACE, "issueTrackingUrl" );
-                          .endTag( NAMESPACE, "inceptionYear" );
+                    .endTag( NAMESPACE, "inceptionYear" );
-                          .endTag( NAMESPACE, "gumpRepositoryId" );
+                    .endTag( NAMESPACE, "gumpRepositoryId" );
-                          .endTag( NAMESPACE, "siteDirectory" );
+                    .endTag( NAMESPACE, "siteDirectory" );
-                          .endTag( NAMESPACE, "distributionSite" );
+                    .endTag( NAMESPACE, "distributionSite" );
-                          .endTag( NAMESPACE, "distributionDirectory" );
+                    .endTag( NAMESPACE, "distributionDirectory" );
-                          .endTag( NAMESPACE, "package" );
+                    .endTag( NAMESPACE, "package" );
-    private void writePatternSet( PatternSet patternSet, String tagName, XmlSerializer serializer ) throws Exception
+    private void writePatternSet( PatternSet patternSet, String tagName, XmlSerializer serializer )
+        throws Exception
-    private void writeRepository( Repository repository, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeRepository( Repository repository, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "developerConnection" );
+                    .endTag( NAMESPACE, "developerConnection" );
-    private void writeResource( Resource resource, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeResource( Resource resource, String tagName, XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "filtering" );
+                    .endTag( NAMESPACE, "filtering" );
-                                         XmlSerializer serializer ) throws Exception
+                                         XmlSerializer serializer )
+        throws Exception
-                          .endTag( NAMESPACE, "className" );
+                    .endTag( NAMESPACE, "className" );
-                          .endTag( NAMESPACE, "property" );
+                    .endTag( NAMESPACE, "property" );
-                          .endTag( NAMESPACE, "directory" );
+                    .endTag( NAMESPACE, "directory" );
-    private void writeUnitTest( UnitTest unitTest, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeUnitTest( UnitTest unitTest, String tagName, XmlSerializer serializer )
+        throws Exception
-    private void writeVersion( Version version, String tagName, XmlSerializer serializer ) throws Exception
+    private void writeVersion( Version version, String tagName, XmlSerializer serializer )
+        throws Exception

