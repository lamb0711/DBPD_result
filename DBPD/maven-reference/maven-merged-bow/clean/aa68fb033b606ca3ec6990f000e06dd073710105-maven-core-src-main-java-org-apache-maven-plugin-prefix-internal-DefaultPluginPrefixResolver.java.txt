[MNG-2741] [regression] Meaningless error message: "Error transferring file"

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@929217 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashMap;
-        List<ArtifactRepository> recheck = new ArrayList<ArtifactRepository>();
+        Map<String, List<ArtifactRepository>> recheck = new HashMap<String, List<ArtifactRepository>>();
-                            logger.warn( "Failed to retrieve " + remotePath + ": " + e.getMessage(), e );
+                            logger.warn( "Failed to retrieve " + remotePath + " from " + repository.getId() + ": "
+                                + e.getMessage(), e );
-                            logger.warn( "Failed to retrieve " + remotePath + ": " + e.getMessage() );
+                            logger.warn( "Failed to retrieve " + remotePath + " from " + repository.getId() + ": "
+                                + e.getMessage() );
-                    recheck.add( repository );
+                    List<ArtifactRepository> repos = recheck.get( pluginGroup );
+                    if ( repos == null )
+                    {
+                        repos = new ArrayList<ArtifactRepository>();
+                        recheck.put( pluginGroup, repos );
+                    }
+                    repos.add( repository );
-            for ( ArtifactRepository repository : recheck )
+            List<ArtifactRepository> repos = recheck.get( pluginGroup );
+            if ( repos == null )
+            {
+                continue;
+            }
+
+            for ( ArtifactRepository repository : repos )
-                        logger.warn( "Failed to retrieve " + remotePath + ": " + e.getMessage(), e );
+                        logger.warn( "Failed to retrieve " + remotePath + " from " + repository.getId() + ": "
+                            + e.getMessage(), e );
-                        logger.warn( "Failed to retrieve " + remotePath + ": " + e.getMessage() );
+                        logger.warn( "Failed to retrieve " + remotePath + " from " + repository.getId() + ": "
+                            + e.getMessage() );

INS26 INS40 INS74 INS43 INS43 INS74 INS14 INS60 INS25 INS42 INS42 INS43 INS43 INS74 INS74 INS59 INS27 INS8 UPD42 INS42 INS42 INS43 INS43 INS74 INS43 INS43 INS42 INS32 INS42 INS33 INS18 INS42 INS42 INS43 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS60 INS25 MOV74 INS59 INS27 INS8 INS42 INS32 INS42 INS33 INS21 INS21 UPD42 INS42 INS42 INS42 INS7 INS32 INS42 MOV14 INS42 INS42 INS42 INS42 INS45 INS32 MOV32 INS45 INS32 MOV32 INS42 INS42 INS42 INS42 INS45 INS32 MOV32 INS45 INS32 MOV32 INS42 INS42 INS42 INS42