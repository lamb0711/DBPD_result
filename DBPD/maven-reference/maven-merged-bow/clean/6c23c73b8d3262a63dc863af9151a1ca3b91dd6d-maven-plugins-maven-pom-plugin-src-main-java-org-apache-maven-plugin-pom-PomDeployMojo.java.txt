error handling on pom:deploy


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163497 13f79535-47bb-0310-9956-ffa450edef68

- *
- *
- * @parameter
- *  name="project"
- *  type="org.apache.maven.project.MavenProject"
- *  required="true"
- *  validator=""
- *  expression="#project"
- *  description=""
- *
- * @parameter
- *  name="deployer"
- *  type="org.apache.maven.artifact.deployer.ArtifactDeployer"
- *  required="true"
- *  validator=""
- *  expression="#component.org.apache.maven.artifact.deployer.ArtifactDeployer"
- *  description=""
+ * @parameter name="project"
+ * type="org.apache.maven.project.MavenProject"
+ * required="true"
+ * validator=""
+ * expression="#project"
+ * description=""
+ * @parameter name="deployer"
+ * type="org.apache.maven.artifact.deployer.ArtifactDeployer"
+ * required="true"
+ * validator=""
+ * expression="#component.org.apache.maven.artifact.deployer.ArtifactDeployer"
+ * description=""
-        ArtifactRepository deploymentRepository =
-            RepositoryUtils.mavenRepositoryToWagonRepository( project.getDistributionManagement().getRepository() );
+        // TODO: validation instead
+        if ( project.getDistributionManagement() == null )
+        {
+            // TODO: simple failure response
+            throw new Exception( "distributionManagement is required for deployment" );
+        }
-        Artifact artifact = new DefaultArtifact( project.getGroupId(),
-                                                 project.getArtifactId(),
-                                                 project.getVersion(),
+        ArtifactRepository deploymentRepository = RepositoryUtils.mavenRepositoryToWagonRepository(
+            project.getDistributionManagement().getRepository() );
+
+        Artifact artifact = new DefaultArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion(),

UPD66 UPD66 INS25 INS27 INS8 INS32 INS33 INS53 INS42 INS42 INS14 INS43 INS45 INS42