o Created non-abstract base class for DefaultArtifactFactory to extend, called ArtifactConstructionSupport, which provides centralized means for constructing artifacts consistently without all the maven-core specific methods. These maven-core specifics not delegate to the generic methods provided in this new class.
o Adjusted the maven-archetype stuff to work with the new artifact creation/resolution/etc. methods in maven-artifact and maven-core.
o Removed all direct construction of DefaultArtifact and replaced with ArtifactConstructionSupport where it would have involved putting the DefaultArtifactFactory in the plexus.xml, and where the code doesn't need dependency-oriented methods.
o Archetype works now, using the example provided in plexus/plexus-site/src/site/apt/building-plexus-applications.apt


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163615 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Set;
-import org.apache.maven.artifact.manager.WagonManager;
+import org.apache.maven.artifact.construction.ArtifactConstructionSupport;
-
-    private WagonManager wagonManager;
-
+    
+    
+    private ArtifactConstructionSupport artifactConstructionSupport = new ArtifactConstructionSupport();
-                                 ArtifactRepository localRepository, Set remoteRepositories, Map parameters )
+                                 ArtifactRepository localRepository, List remoteRepositories, Map parameters )
-        Artifact archetypeJar =
-            wagonManager.createArtifact( archetypeGroupId, archetypeArtifactId, archetypeVersion, "jar" );
+        Artifact archetypeArtifact =
+            artifactConstructionSupport.createArtifact( archetypeGroupId, archetypeArtifactId, archetypeVersion, Artifact.SCOPE_RUNTIME, "jar" );
-            artifactResolver.resolve( archetypeJar, remoteRepositories, localRepository );
+            artifactResolver.resolve( archetypeArtifact, remoteRepositories, localRepository );
-            urls[0] = archetypeJar.getFile().toURL();
+            urls[0] = archetypeArtifact.getFile().toURL();

MOV23 UPD40 UPD43 UPD42 UPD42 INS14 UPD43 INS43 UPD42 INS42 UPD42 UPD42 INS40 UPD42 UPD42 DEL40 DEL26