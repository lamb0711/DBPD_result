PR: MNG-1251
Submitted By: Jerome Lacoste
Reviewed By: John Casey

I did not apply this patch. A better solution was to initialize the artifact data a little more thoroughly, and only delegate those methods which must track changes to the main artifact (like version info, groupId, and artifactId...essentially, the things that determine how to locate metadata on the repository). For these delegating methods, I've disabled the corresponding setter methods with UnsupportedOperationException to indicate that these attributes must be managed via the main artifact, and why. The MavenProjectHelper will now lookup the proper ArtifactHandler for the given attachment type, and pass that on to the AttachedArtifact constructor also.

Jerome, thanks very much for the effort in exploring this issue. I appreciate the help.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@330392 13f79535-47bb-0310-9956-ffa450edef68

-        setVersionRange( versionRange );
+        this.versionRange = versionRange;
+        
+        selectVersionFromNewRangeIfAvailable();
-    public final void setVersionRange( VersionRange versionRange )
+    public void setVersionRange( VersionRange versionRange )
-
+        
+        selectVersionFromNewRangeIfAvailable();
+    }
+    
+    private void selectVersionFromNewRangeIfAvailable()
+    {

INS31 INS83 INS39 INS42 MOV44 INS8 UPD83 UPD42 INS21 MOV21 INS21 INS7 INS32 INS32 INS22 INS42 INS42 INS42 INS52 INS42 DEL42 DEL42 DEL32 DEL83