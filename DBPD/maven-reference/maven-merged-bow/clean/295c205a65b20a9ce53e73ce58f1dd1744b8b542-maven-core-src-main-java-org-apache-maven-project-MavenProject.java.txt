[MNG-5868] No duplicate artifacts in attached artifacts
if attached artifacts already contains the artifact remove it and add the new one

Signed-off-by: olivier lamy <olamy@apache.org>

+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+
+    private static final Logger LOGGER = LoggerFactory.getLogger( MavenProject.class );
+
-    private List<Artifact> attachedArtifacts;
+    private List<Artifact> attachedArtifacts = new ArrayList<>();
-     * @throws DuplicateArtifactAttachmentException
+     * @deprecated Please use {@link MavenProjectHelper}
+     * @throws DuplicateArtifactAttachmentException will never happen but leave it for backward compatibility
-        getAttachedArtifacts().add( artifact );
+        // if already there we remove it and add again
+        int index = attachedArtifacts.indexOf( artifact );
+        if ( index >= 0 )
+        {
+            LOGGER.warn( "artifact {} already attached, replace previous instance", artifact );
+            attachedArtifacts.set( index, artifact );
+        }
+        else
+        {
+            attachedArtifacts.add( artifact );
+        }
-        return attachedArtifacts;
+        return Collections.unmodifiableList( attachedArtifacts );

INS26 INS26 INS40 INS40 INS23 INS83 INS83 INS83 INS43 INS59 INS8 INS42 INS42 INS32 INS14 INS65 INS60 INS25 INS42 INS42 INS57 INS74 INS66 INS65 INS66 INS39 INS59 INS27 INS8 INS8 INS32 INS43 INS43 INS42 INS42 INS32 INS42 INS34 INS21 INS21 MOV21 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 UPD42 MOV42 DEL32 DEL8 DEL42