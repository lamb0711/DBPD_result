MNG-4245: can't access protected mirrors with latest 3.0-SNAPSHOT (rev 795227)
Submitted by: Igor Fedorenko


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@795913 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.repository.DefaultArtifactRepository;
+import org.apache.maven.artifact.repository.Authentication;
-    public void addMirror( String id, String mirrorOf, String url )
+    public void addMirror( String id, String mirrorOf, String url, Authentication auth )
-        ArtifactRepository mirror = repositoryFactory.createArtifactRepository( id, url, (ArtifactRepositoryLayout)null, null, null );
-
+            ArtifactRepository mirror = repositoryFactory.createArtifactRepository( id, url, (ArtifactRepositoryLayout)null, null, null );
+            
+            mirror.setAuthentication( auth );
+
+                    repository.setAuthentication( mirror.getAuthentication() );

UPD40 INS44 INS43 INS42 INS42 MOV60 INS21 INS32 INS42 INS42 INS42 INS21 INS32 INS42 INS42 INS32 INS42 INS42