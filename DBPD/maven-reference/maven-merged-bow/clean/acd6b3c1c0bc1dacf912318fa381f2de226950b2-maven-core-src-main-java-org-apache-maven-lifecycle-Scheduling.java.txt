[MNG-4633] Re-added configurable phase synchronization wrt upstream phase
           Made execution plan calculation parallel in weave mode

Existing weave mode would only phase-lock to the same phase upstream.
Execution plan calculation made parallel at high-level, still looking
into reducing blocking in DefaultMavenPluginManager to cash in on this.

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@941474 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.model.Plugin;
+import org.apache.maven.plugin.MojoExecution;
-import java.util.Map;
-    public Scheduling() {
+    public Scheduling()
+    {
-    public Scheduling(String lifecycle, List<Schedule> schedules) {
+    public Scheduling( String lifecycle, List<Schedule> schedules )
+    {
-    public String getLifecycle() {
+    public String getLifecycle()
+    {
-    public void setLifecycle(String lifecycle) {
+    public void setLifecycle( String lifecycle )
+    {
-    public List<Schedule> getSchedules() {
+    public List<Schedule> getSchedules()
+    {
-    public Schedule getSchedule(String phaseName){
-        if (phaseName == null) return null;
-        for (Schedule schedule : schedules) {
-            if (phaseName.equals(schedule.getPhase()) )
-                return schedule;
+    public Schedule getSchedule( String phaseName )
+    {
+        if ( phaseName == null )
+        {
+            return null;
-        return null;
-    }
-    
-    public Schedule getSchedule(Plugin mojoClass){
-        if (mojoClass == null) return null;
-        for (Schedule schedule : schedules) {
-            if (mojoClass.getKey().equals(schedule.getMojoClass()) )
+        for ( Schedule schedule : schedules )
+        {
+            if ( phaseName.equals( schedule.getPhase() ) )
+            {
+            }
-    public void setSchedules(List<Schedule> schedules) {
+    public Schedule getSchedule( MojoExecution mojoExecution )
+    {
+        if ( mojoExecution == null )
+        {
+            return null;
+        }
+        for ( Schedule schedule : schedules )
+        {
+            if ( schedule.appliesTo( mojoExecution ) )
+            {
+                return schedule;
+            }
+        }
+        return null;
+    }
+
+    public void setSchedules( List<Schedule> schedules )
+    {

UPD40 UPD43 UPD42 INS8 UPD42 INS8 MOV41 UPD42 MOV41 INS8 INS32 INS8 MOV41 MOV42 INS42 UPD42 MOV42 MOV41 DEL40 DEL26 DEL42 DEL42 DEL32 DEL42 DEL32 DEL32