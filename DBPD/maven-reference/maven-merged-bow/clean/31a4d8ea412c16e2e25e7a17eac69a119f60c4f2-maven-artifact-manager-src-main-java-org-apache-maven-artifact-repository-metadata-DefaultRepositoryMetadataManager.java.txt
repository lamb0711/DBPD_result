PR: MNG-951
timestamp the metadata so that it can be merged correctly

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@292139 13f79535-47bb-0310-9956-ffa450edef68

-                        // NOTE: [jc; 21-sept-2005] won't this cause inconsistencies if the metadata wasn't found?
-                        // this will write out an essentially empty metadata file, which will result
-                        // in the loop below NOT merging anything (each successive pass is still empty),
-                        // which means that the last repository will be set as the artifact repo, rather
-                        // than leaving it null. This is the root cause of MNG-900, but I'm not sure how
-                        // to fix it.
-        loadMetadata( metadata, localRepository, localRepository );
+        loadMetadata( metadata, localRepository, localRepository );
-                if ( !metadata.merge( repoMetadata.getMetadata() ) )
+                if ( repoMetadata.getMetadata().merge( metadata ) )
-            repoMetadata.setMetadata( metadata );
+            else
+            {
+                repoMetadata.setMetadata( metadata );
+            }
-        
+
-        
+
-        
+

MOV21 INS8 MOV21 MOV32 MOV32 UPD42 UPD42 DEL38