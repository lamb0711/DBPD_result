[MNG-4052] import scope dependencies prefer to download pom rather than find it in the current project

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@798221 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.PrintWriter;
+import java.io.StringWriter;
+import java.util.List;
+import org.apache.maven.model.building.ModelProblem;
+    private List<ProjectBuildingResult> results;
+
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message );
+        super( createMessage( message, projectId, new File( pomLocation ) ) );
-        super( message );
+        super( createMessage( message, projectId, pomFile ) );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, null ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, pomFile ), cause );
-        super( message, cause );
+        super( createMessage( message, projectId, new File( pomLocation ) ), cause );
+    public ProjectBuildingException( List<ProjectBuildingResult> results )
+    {
+        super( createMessage( results ) );
+        this.projectId = "";
+        this.results = results;
+    }
-    public String getMessage()
+    public List<ProjectBuildingResult> getResults()
-        return super.getMessage() + " for project " + projectId +
-            ( ( getPomFile() == null ? "" : " at " + getPomFile().getAbsolutePath() ) );
+        return results;
+
+    private static String createMessage( String message, String projectId, File pomFile )
+    {
+        StringBuilder buffer = new StringBuilder( 256 );
+        buffer.append( message );
+        buffer.append( " for project " ).append( projectId );
+        if ( pomFile != null )
+        {
+            buffer.append( " at " ).append( pomFile.getAbsolutePath() );
+        }
+        return buffer.toString();
+    }
+
+    private static String createMessage( List<ProjectBuildingResult> results )
+    {
+        StringWriter buffer = new StringWriter( 1024 );
+
+        PrintWriter writer = new PrintWriter( buffer );
+        writer.println( "Some problems were encountered while processing the POMs:" );
+        for ( ProjectBuildingResult result : results )
+        {
+            for ( ModelProblem problem : result.getProblems() )
+            {
+                writer.print( "o " );
+                writer.println( problem.getMessage() );
+            }
+        }
+        writer.close();
+
+        return buffer.toString();
+    }
+

INS26 INS26 INS26 INS26 MOV31 MOV31 MOV31 MOV31 MOV31 MOV31 INS40 INS40 INS40 INS40 INS23 INS31 INS31 INS31 INS31 INS83 INS74 INS59 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV83 MOV42 MOV44 MOV44 MOV44 INS8 MOV44 INS83 INS42 MOV44 MOV44 MOV44 INS8 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 MOV44 INS44 INS83 INS74 INS42 INS8 INS83 UPD83 INS42 INS44 INS44 INS44 INS83 INS83 INS43 INS42 INS44 INS8 INS43 INS43 INS42 INS21 INS21 MOV21 MOV21 INS21 MOV21 MOV21 INS46 MOV21 MOV21 INS46 MOV21 MOV21 MOV21 MOV21 MOV21 MOV46 MOV21 INS46 MOV21 MOV21 MOV21 MOV21 MOV21 MOV21 INS21 INS46 MOV21 MOV21 MOV21 INS46 MOV21 MOV21 INS74 INS42 INS21 INS21 INS43 INS43 INS41 INS43 INS42 INS43 INS42 INS43 INS42 INS60 INS21 INS21 INS25 INS41 INS42 INS74 INS42 INS60 INS60 INS21 INS70 INS21 INS41 INS42 INS42 INS32 INS7 INS32 INS32 INS7 INS32 MOV7 INS32 MOV7 INS7 INS32 INS32 INS32 INS42 INS32 INS42 INS32 MOV7 INS32 INS32 INS32 INS32 INS42 INS32 INS32 INS32 INS32 INS7 INS32 INS32 INS32 MOV7 INS32 INS42 INS32 INS32 INS42 INS43 INS43 INS32 INS7 INS7 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS59 INS32 INS32 INS27 INS8 INS32 INS43 INS43 INS43 INS59 INS43 INS59 INS32 INS44 INS42 INS8 INS32 INS32 INS42 INS42 INS42 INS33 INS22 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS22 INS42 INS42 INS42 INS42 INS42 MOV22 INS42 INS42 INS42 INS14 MOV22 MOV42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS42 INS42 INS14 MOV14 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS42 INS42 INS33 INS42 INS42 INS42 INS33 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS22 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 MOV22 MOV42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS22 INS45 INS22 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS32 INS42 INS42 INS42 MOV33 INS21 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS45 INS43 INS42 INS70 INS42 INS42 INS42 INS42 INS52 INS42 INS43 INS42 INS52 INS42 MOV52 INS43 INS42 MOV52 MOV42 INS43 INS42 INS43 INS42 INS43 INS42 MOV43 MOV42 INS43 INS42 INS52 INS42 INS43 INS42 MOV52 INS43 INS42 MOV43 MOV42 INS52 INS42 INS52 INS42 INS43 INS34 INS42 INS42 INS45 INS32 INS43 INS34 INS43 INS42 INS42 INS44 INS32 INS8 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS43 INS42 INS42 INS42 INS21 INS21 INS42 INS42 INS45 UPD42 MOV42 MOV42 INS42 INS32 INS32 INS42 INS42 INS45 INS42 INS42 INS32 INS42 INS42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL46 DEL42 DEL42 DEL46 DEL42 DEL42 DEL42 DEL42 DEL8 DEL31 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL46 DEL42 DEL42 DEL42 DEL46 DEL42 DEL42 DEL42 DEL42 DEL48 DEL45 DEL42 DEL42 DEL32 DEL27 DEL45 DEL45 DEL32 DEL32 DEL27 DEL16 DEL36 DEL36 DEL27 DEL41