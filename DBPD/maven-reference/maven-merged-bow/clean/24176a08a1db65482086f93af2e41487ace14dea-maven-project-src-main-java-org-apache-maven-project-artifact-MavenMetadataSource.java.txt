Rolling back merge attempt until I have time to fix failing unit tests (most likely tomorrow will do it).

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@679244 13f79535-47bb-0310-9956-ffa450edef68

-        ProjectRelocation rel = retrieveRelocatedProject( artifact, localRepository, remoteRepositories );
-        
-        if ( rel == null )
-        {
-            return artifact;
-        }
-        
-        MavenProject project = rel.project;
+        ProjectRelocation res = retrieveRelocatedProject( artifact, localRepository, remoteRepositories );
+        MavenProject project = res.project;
+
-        
-        // NOTE: Using artifact information here, since some POMs are deployed 
-        // to central with one version in the filename, but another in the <version> string!
-        // Case in point: org.apache.ws.commons:XmlSchema:1.1:pom.
-        //
-        // Since relocation triggers a reconfiguration of the artifact's information
-        // in retrieveRelocatedProject(..), this is safe to do.
-            result = artifactFactory.createArtifactWithClassifier( artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getType(), artifact.getClassifier() );
+            result = artifactFactory.createArtifactWithClassifier( project.getGroupId(), project.getArtifactId(), project.getVersion(), artifact.getType(), artifact.getClassifier() );
-            result = artifactFactory.createArtifact( artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getScope(), artifact.getType() );
+            result = artifactFactory.createArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion(), artifact.getScope(), artifact.getType() );

UPD42 UPD40 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 DEL42 DEL33 DEL27 DEL42 DEL41 DEL8 DEL25