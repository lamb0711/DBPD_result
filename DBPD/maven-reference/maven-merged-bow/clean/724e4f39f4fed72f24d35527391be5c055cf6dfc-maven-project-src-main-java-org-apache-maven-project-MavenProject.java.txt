PR: MNG-1245

Version not taken into account for reactor projects. 

Artifacts for reactor projects get replaced by a wrong version local repo artifact.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@419624 13f79535-47bb-0310-9956-ffa450edef68

-                    String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId() );
+                    String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId(), a.getVersion() );
-                    String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId() );
+                    String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId(), a.getVersion() );
-        projectReferences.put( getProjectReferenceId( project.getGroupId(), project.getArtifactId() ), project );
+        projectReferences.put( getProjectReferenceId( project.getGroupId(), project.getArtifactId(), project.getVersion() ), project );
-    private static String getProjectReferenceId( String groupId, String artifactId )
+    private static String getProjectReferenceId( String groupId, String artifactId, String version )
-        return groupId + ":" + artifactId;
+        return groupId + ":" + artifactId + ":" + version;
-            // TODO: use MavenProject getProjectReferenceId
-            String refId = ArtifactUtils.versionlessKey( pluginArtifact.getGroupId(), pluginArtifact.getArtifactId() );
+            String refId = getProjectReferenceId( pluginArtifact.getGroupId(), pluginArtifact.getArtifactId(), pluginArtifact.getVersion() );

INS44 INS43 INS42 INS42 INS45 INS42 INS32 INS42 INS42 INS42 INS32 UPD42 MOV42 UPD42 MOV42 INS32 INS32 INS42 INS42 INS42 INS42