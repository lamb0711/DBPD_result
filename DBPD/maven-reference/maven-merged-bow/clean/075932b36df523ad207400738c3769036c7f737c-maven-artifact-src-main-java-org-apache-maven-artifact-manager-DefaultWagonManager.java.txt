PR: MNG-447
ensure the checksums don't get overwritten by the extra put commands


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@180072 13f79535-47bb-0310-9956-ffa450edef68

-        Map checksums = new HashMap();
+        Map checksums = new HashMap( 2 );
+        Map sums = new HashMap( 2 );
-            // We do this in here so we can checksum the artifact metadata too, otherwise it could be metadata itself
+            // Pre-store the checksums as any future puts will overwrite them
+                sums.put( extension, observer.getActualChecksum() );
+            }
+
+            // We do this in here so we can checksum the artifact metadata too, otherwise it could be metadata itself
+            for ( Iterator i = checksums.keySet().iterator(); i.hasNext(); )
+            {
+                String extension = (String) i.next();
-                FileUtils.fileWrite( temp.getAbsolutePath(), observer.getActualChecksum() );
+                FileUtils.fileWrite( temp.getAbsolutePath(), (String) sums.get( extension ) );
-}
+}

INS60 INS43 INS59 INS42 INS42 INS14 INS24 INS34 INS43 INS34 INS58 INS32 INS8 INS42 INS43 INS59 INS42 INS42 INS60 MOV60 INS21 INS42 INS42 INS32 INS43 INS59 INS32 INS32 INS42 INS42 INS42 INS11 INS42 INS42 INS42 MOV32 INS11 INS42 INS42 INS43 INS32 INS43 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42