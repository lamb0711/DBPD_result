MNG-5214: Dependency resolution substitutes g:a:v:jar for j:a:v:something-else when something-else isn't in the reactor
o allow ejb-client types artifacts to dance with jar artifacts to allow reactor resolution to target/classes, thus
unbreaking some integration tests.


git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1212793 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Arrays;
+    private final static Collection<String> JAR_LIKE_TYPES = Arrays.asList( "jar", "test-jar", "ejb-client" );
+
+    private final static Collection<String> COMPILE_PHASE_TYPES = Arrays.asList( "jar", "ejb-client" );
-
+    
-                if ( project.hasLifecyclePhase( "compile" ) && artifact.getProperty( "type", "").equals( "jar" ) ) /* also reject non-"" classifier? */
+                String type = artifact.getProperty( "type", "");
+                if ( project.hasLifecyclePhase( "compile" ) && COMPILE_PHASE_TYPES.contains( type ) )
-        else if ( "test-jar".equals ( requestedType ) && "jar".equals( attachedType ) )
-        {
-            typeOk = true;
-        }
-        else if ( "jar".equals ( requestedType ) && "test-jar".equals( attachedType ) )
+        else if ( JAR_LIKE_TYPES.contains( requestedType ) && JAR_LIKE_TYPES.contains( attachedType ) )

INS26 INS40 INS23 INS23 INS83 INS83 INS83 INS74 INS59 INS83 INS83 INS83 INS74 INS59 INS43 INS43 INS42 INS32 INS43 INS43 INS42 INS32 INS42 INS42 INS42 INS42 INS45 INS45 INS45 INS42 INS42 INS42 INS42 INS45 INS45 MOV25 MOV32 MOV8 INS60 INS42 UPD42 INS42 UPD42 INS43 INS59 INS42 INS42 MOV32 INS42 UPD42 INS42 DEL45 DEL45 DEL42 DEL42 DEL32 DEL45 DEL42 DEL42 DEL32 DEL27 DEL42 DEL9 DEL7 DEL21 DEL8 DEL45 DEL45 DEL25