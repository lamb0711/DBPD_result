o improving the ease of use of metadata:

http://jira.codehaus.org/browse/MNG-395



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@170292 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.OutputStream;
+import java.io.FileOutputStream;
+import java.util.Properties;
+        // We want to add the metadata for the project to the JAR in two forms:
+        // The first form is that of the POM itself. Applications that wish to
+        // access the POM for an artifact using maven tools they can.
+        //
+        // The second form is that of a properties file containing the basic
+        // top-level POM elements so that applications that wish to access
+        // POM information without the use of maven tools can do so.
-        archiver.addFile( project.getFile(), "META-INF/maven/pom.xml" );
+        String groupId = project.getGroupId();
+
+        String artifactId = project.getArtifactId();
+
+        archiver.addFile( project.getFile(), "META-INF/maven/" + groupId + "/" + artifactId + "/pom.xml" );
+
+        // ----------------------------------------------------------------------
+        // Create pom.properties file
+        // ----------------------------------------------------------------------
+
+        Properties p = new Properties();
+
+        p.setProperty( "groupId", project.getGroupId() );
+
+        p.setProperty( "artifactId", project.getArtifactId() );
+
+        p.setProperty( "version", project.getVersion() );
+
+        File pomPropertiesFile = new File( project.getFile().getParentFile(), "pom.properties" );
+
+        OutputStream os = new FileOutputStream( pomPropertiesFile );
+
+        p.store( os, "Generated by Maven" );
+
+        os.close(); // stream is flushed but not closed by Properties.store()
+
+        archiver.addFile( pomPropertiesFile, "META-INF/maven/" + groupId + "/" + artifactId + "/pom.properties" );
+
+        // ----------------------------------------------------------------------
+        // Create the manifest
+        // ----------------------------------------------------------------------
+
+
+
+
+        // Cleanup
+
+        pomPropertiesFile.delete();

INS26 INS26 INS26 INS40 INS40 INS40 INS60 INS60 INS60 INS21 INS21 INS21 INS60 INS60 INS21 INS21 INS21 INS21 INS43 INS59 INS43 INS59 INS43 INS59 INS32 INS32 INS32 INS43 INS59 INS43 INS59 INS32 INS32 INS32 INS32 INS42 INS42 INS32 INS42 INS42 INS32 INS27 INS42 INS42 INS14 INS42 INS42 INS45 INS32 INS42 INS42 INS45 INS32 INS42 INS42 INS45 INS32 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS45 INS42 INS45 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS45 INS43 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS42 INS32 INS42 INS42 INS42 INS42 DEL45