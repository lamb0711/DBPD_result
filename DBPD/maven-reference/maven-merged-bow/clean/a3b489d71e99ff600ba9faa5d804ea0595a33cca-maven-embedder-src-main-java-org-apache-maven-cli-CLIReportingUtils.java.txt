Adding error reporting for most project errors via aspects that collect the context information and format a nice message (the aspect just binds to the errors API in org.apache.maven.project.error.*).

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@598748 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.InvalidRepositoryException;
-import org.apache.maven.model.Dependency;
-import org.apache.maven.profiles.activation.ProfileActivationException;
-import org.apache.maven.project.InvalidProjectModelException;
-import org.apache.maven.project.InvalidProjectVersionException;
-import org.apache.maven.project.artifact.InvalidDependencyVersionException;
-        if ( e instanceof InvalidProjectModelException )
+//        if ( e instanceof InvalidProjectModelException )
+//        {
+//            InvalidProjectModelException error = (InvalidProjectModelException) e;
+//
+//            writer.write( error.getMessage() );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "The following POM validation errors were detected:" );
+//            writer.write( NEWLINE );
+//
+//            for ( Iterator it = error.getValidationResult().getMessages().iterator(); it.hasNext(); )
+//            {
+//                String message = (String) it.next();
+//                writer.write( NEWLINE );
+//                writer.write( " - " );
+//                writer.write( message );
+//            }
+//
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//
+//            result = true;
+//        }
+        if ( false )
-            InvalidProjectModelException error = (InvalidProjectModelException) e;
-
-            writer.write( error.getMessage() );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "The following POM validation errors were detected:" );
-            writer.write( NEWLINE );
-
-            for ( Iterator it = error.getValidationResult().getMessages().iterator(); it.hasNext(); )
-            {
-                String message = (String) it.next();
-                writer.write( NEWLINE );
-                writer.write( " - " );
-                writer.write( message );
-            }
-
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-
-            result = true;
-        else if ( e instanceof InvalidDependencyVersionException )
-        {
-            writer.write( NEWLINE );
-            writer.write( "Your project declares a dependency with an invalid version." );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-
-            Dependency dep = ((InvalidDependencyVersionException)e).getDependency();
-            writer.write( "Dependency:" );
-            writer.write( NEWLINE );
-            writer.write( "Group-Id: " );
-            writer.write( dep.getGroupId() );
-            writer.write( NEWLINE );
-            writer.write( "Artifact-Id: " );
-            writer.write( dep.getArtifactId() );
-            writer.write( NEWLINE );
-            writer.write( "Version: " );
-            writer.write( dep.getVersion() );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-
-            writer.write( "Reason: " );
-            writer.write( cause.getMessage() );
-            writer.write( NEWLINE );
-
-            result = true;
-        }
+//        else if ( e instanceof InvalidDependencyVersionException )
+//        {
+//            writer.write( NEWLINE );
+//            writer.write( "Your project declares a dependency with an invalid version." );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//
+//            Dependency dep = ((InvalidDependencyVersionException)e).getDependency();
+//            writer.write( "Dependency:" );
+//            writer.write( NEWLINE );
+//            writer.write( "Group-Id: " );
+//            writer.write( dep.getGroupId() );
+//            writer.write( NEWLINE );
+//            writer.write( "Artifact-Id: " );
+//            writer.write( dep.getArtifactId() );
+//            writer.write( NEWLINE );
+//            writer.write( "Version: " );
+//            writer.write( dep.getVersion() );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//
+//            writer.write( "Reason: " );
+//            writer.write( cause.getMessage() );
+//            writer.write( NEWLINE );
+//
+//            result = true;
+//        }
-        else if ( e instanceof InvalidProjectVersionException )
-        {
-            writer.write( NEWLINE );
-            writer.write( "You have an invalid version in your POM:" );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "Location: " );
-            writer.write( ((InvalidProjectVersionException)e).getLocationInPom() );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "Reason: " );
-            writer.write( cause.getMessage() );
-            writer.write( NEWLINE );
-
-            result = true;
-        }
+//        else if ( e instanceof InvalidProjectVersionException )
+//        {
+//            writer.write( NEWLINE );
+//            writer.write( "You have an invalid version in your POM:" );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "Location: " );
+//            writer.write( ((InvalidProjectVersionException)e).getLocationInPom() );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "Reason: " );
+//            writer.write( cause.getMessage() );
+//            writer.write( NEWLINE );
+//
+//            result = true;
+//        }
-        else if ( cause instanceof ProfileActivationException )
-        {
-            writer.write( NEWLINE );
-            writer.write( "Profile activation failed. One or more named profile activators may be missing." );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "Reason: " );
-            writer.write( cause.getMessage() );
-            writer.write( NEWLINE );
-
-            result = true;
-        }
+        // handled by aspect binding to ProjectErrorReporter now.
+//        else if ( cause instanceof ProfileActivationException )
+//        {
+//            writer.write( NEWLINE );
+//            writer.write( "Profile activation failed. One or more named profile activators may be missing." );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "Reason: " );
+//            writer.write( cause.getMessage() );
+//            writer.write( NEWLINE );
+//
+//            result = true;
+//        }
-        else if ( cause instanceof InvalidRepositoryException )
-        {
-            writer.write( NEWLINE );
-            writer.write( "You have an invalid repository/pluginRepository declaration in your POM:" );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "Repository-Id: " );
-            writer.write( ((InvalidRepositoryException)cause).getRepositoryId() );
-            writer.write( NEWLINE );
-            writer.write( NEWLINE );
-            writer.write( "Reason: " );
-            writer.write( cause.getMessage() );
-            writer.write( NEWLINE );
-
-            result = true;
-        }
+//        else if ( cause instanceof InvalidRepositoryException )
+//        {
+//            writer.write( NEWLINE );
+//            writer.write( "You have an invalid repository/pluginRepository declaration in your POM:" );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "Repository-Id: " );
+//            writer.write( ((InvalidRepositoryException)cause).getRepositoryId() );
+//            writer.write( NEWLINE );
+//            writer.write( NEWLINE );
+//            writer.write( "Reason: " );
+//            writer.write( cause.getMessage() );
+//            writer.write( NEWLINE );
+//
+//            result = true;
+//        }

MOV25 INS9 INS8 MOV27 MOV8 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL43 DEL62 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL42 DEL42 DEL43 DEL62 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL43 DEL42 DEL11 DEL36 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL25 DEL42 DEL42 DEL43 DEL62 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL11 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL24 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL42 DEL42 DEL43 DEL62 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL11 DEL36 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL42 DEL42 DEL43 DEL62 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL43 DEL42 DEL11 DEL36 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL9 DEL7 DEL21 DEL8 DEL25 DEL25 DEL25