Adding SettingsBuilderAdvice, to enable skipping default locations for settings files. Also, removing the settings cache, to enable call-by-call synchronization of settings between Maven embedder instances that share the same settings files. Next step is to refresh settings per-call to the embedder.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@511172 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.InvalidRepositoryException;
-import org.apache.maven.artifact.InvalidRepositoryException;
+import org.apache.maven.model.DeploymentRepository;
+import org.apache.maven.model.Repository;
+import org.apache.maven.model.RepositoryBase;
+import org.apache.maven.model.RepositoryPolicy;
+import org.apache.maven.settings.SettingsBuilderAdvice;
-import org.apache.maven.model.Repository;
-import org.apache.maven.model.DeploymentRepository;
-import org.apache.maven.model.RepositoryPolicy;
-import org.apache.maven.model.RepositoryBase;
-import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
-import org.codehaus.plexus.PlexusContainer;
+import org.codehaus.plexus.PlexusContainer;
+import org.codehaus.plexus.component.repository.exception.ComponentLookupException;
-import org.codehaus.plexus.component.repository.exception.ComponentLookupException;
+import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
-import java.util.List;
+import java.util.List;
-        Settings settings = buildSettings(userSettingsPath,
-                                          globalSettingsPath,
-                                          pluginUpdateOverride);
+        return buildSettings( userSettingsPath, globalSettingsPath, interactive, offline, usePluginRegistry,
+                              pluginUpdateOverride, new SettingsBuilderAdvice() );
+    }
+    
+    public Settings buildSettings( File userSettingsPath,
+                                   File globalSettingsPath,
+                                   boolean interactive,
+                                   boolean offline,
+                                   boolean usePluginRegistry,
+                                   boolean pluginUpdateOverride,
+                                   SettingsBuilderAdvice advice )
+        throws SettingsConfigurationException
+    {
+        Settings settings = buildSettings( userSettingsPath, globalSettingsPath, pluginUpdateOverride, advice );
+        
+        return buildSettings( userSettingsPath, globalSettingsPath, pluginUpdateOverride, new SettingsBuilderAdvice() );
+    }
+    
+    public Settings buildSettings( File userSettingsPath,
+                                   File globalSettingsPath,
+                                   boolean pluginUpdateOverride,
+                                   SettingsBuilderAdvice advice )
+        throws SettingsConfigurationException
+    {
+        
+        if ( advice == null )
+        {
+            advice = new SettingsBuilderAdvice();
+        }
-            settings = settingsBuilder.buildSettings( userSettingsPath, globalSettingsPath );
+            settings = settingsBuilder.buildSettings( userSettingsPath, globalSettingsPath, advice );

MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 INS26 INS40 INS31 INS31 INS83 INS43 INS42 INS44 INS44 INS44 INS44 INS44 INS44 INS43 INS8 INS44 INS83 INS43 INS42 INS44 INS44 INS44 INS43 INS8 INS44 INS42 INS43 INS42 INS43 INS42 INS39 INS42 INS39 INS42 INS39 INS42 INS39 INS42 INS42 INS41 INS43 INS42 INS42 INS43 INS42 INS43 INS42 INS39 INS42 INS42 INS41 INS43 INS42 INS25 INS42 INS42 INS32 INS42 INS42 INS42 INS32 INS42 INS27 INS8 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS14 INS42 INS33 INS21 INS43 INS42 INS43 INS7 INS42 INS42 INS42 INS14 INS43 INS42 INS42