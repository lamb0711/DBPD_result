o Added duplicate check for mojo descriptor Parameters
o changed the exception(s) throws during mojo descriptor extraction to be derivatives of InvalidPluginDescriptorException
o changed PluginConfigurationException in plugin.descriptor to InvalidPluginDescriptorException
o changed all "true".equals(something) to Boolean.valueOf(something).booleanValue()
o added validation of 'modelVersion' back to [Default]ModelValidator
o Fixed/added tests for new 'modelVersion' validation
o changed all requiresXXX in MojoDescriptor to XXXRequired, and getRequiresXXX():boolean to isXXXRequired():boolean to help maintain bean-ness for future use




git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168630 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.descriptor.InvalidPluginDescriptorException;
-import org.apache.maven.tools.plugin.PluginToolsException;
+import org.apache.maven.tools.plugin.extractor.ExtractionException;
-    protected List extractMojoDescriptors( Map sourceFilesKeyedByBasedir, PluginDescriptor pluginDescriptor )
-        throws PluginToolsException
+    protected List extractMojoDescriptors( Map sourceFilesKeyedByBasedir, PluginDescriptor pluginDescriptor ) 
+        throws ExtractionException, InvalidPluginDescriptorException
-                        throw new PluginToolsException( "Error reading descriptor Marmalade mojo in: " + scriptFile, e );
+                        throw new ExtractionException( "Error extracting mojo descriptor from Marmalade script: " + scriptFile, e );
-                        throw new PluginToolsException( "Error extracting descriptor Marmalade mojo from: " + scriptFile, e );
+                        Throwable cause = e.getCause();
+                        
+                        if ( cause instanceof InvalidPluginDescriptorException )
+                        {
+                            throw (InvalidPluginDescriptorException) cause;
+                        }
+                        else
+                        {
+                            throw new ExtractionException( "Error extracting mojo descriptor from Marmalade script: " + scriptFile, e );
+                        }

MOV26 INS26 INS40 UPD40 INS43 UPD43 INS42 UPD42 INS8 INS60 INS25 INS43 INS59 INS62 INS8 INS8 UPD43 INS42 INS42 INS32 INS42 INS43 INS53 MOV53 UPD42 UPD45 INS42 INS42 INS42 INS11 INS43 INS42 UPD43 INS42 UPD42 UPD45 DEL8