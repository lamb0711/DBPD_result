MNG-3649: making sure that the request parameters which are populated from the CLI are honored in plugins like the release plugin which consume CLI options from the user
          settings object. ug.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@701216 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.maven.embedder.user;
+package org.apache.maven.embedder.execution;
+ * We want to make sure that what is ask for in the execution request overrides what is in the settings.
+ * The CLI feeds into an execution request so if a particular value is present in the execution request
+ * then we will take that over the value coming from the user settings.
+    private Settings settings;
-    public SettingsAdapter( MavenExecutionRequest request )
+    public SettingsAdapter( MavenExecutionRequest request, Settings settings )
+        this.settings = settings;
-        return request.getLocalRepositoryPath().getAbsolutePath();
+        if ( request.getLocalRepositoryPath() != null )
+        {
+            return request.getLocalRepositoryPath().getAbsolutePath();
+        }
+        
+        return settings.getLocalRepository();
-    {
-        return request.isInteractiveMode();
+    {                    
+        return request.isInteractiveMode();            
+    // These we are not setting in the execution request currently
+    
-        return request.getProxies();
+        return settings.getProxies();
-        return request.getServers();
+        return settings.getServers();
-        return request.getMirrors();
+        return settings.getMirrors();
-        return request.getProfiles();
+        return settings.getProfiles();
-        return request.getActiveProfiles();
+        return settings.getActiveProfiles();
-        return request.getPluginGroups();
+        return settings.getPluginGroups();

UPD40 INS23 INS83 INS43 INS59 INS44 INS8 MOV43 MOV43 MOV43 MOV43 MOV43 MOV43 INS66 INS66 INS66 INS42 INS42 INS43 INS42 INS21 INS25 INS41 INS42 INS7 INS27 MOV8 INS32 INS22 INS42 INS32 INS33 INS42 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 INS52 INS42 INS42 INS42