PR: MNG-423
move default value into configuration, rather than relying on Java. More convenient for other languages, and allows us to validate/document it. Cleaned up the plugin manager handling. More should be pushed into plexus proper.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@188647 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.HashMap;
+import java.util.HashSet;
-import java.util.Map;
+import java.util.Set;
-            
+
-            
+
-        
-        Map configuration = new HashMap();
-        
-        if( parameters != null )
+
+        Set configuration = new HashSet();
+
+        if ( parameters != null )
-                    if ( expression != null && expression.length() > 0 )
+                    if ( StringUtils.isNotEmpty( parameter.getDefaultValue() ) ||
+                        StringUtils.isNotEmpty( parameter.getExpression() ) )
-                        configuration.put( parameter, expression );
+                        configuration.add( parameter );
-            for ( Iterator i = configuration.keySet().iterator(); i.hasNext(); )
+            for ( Iterator i = configuration.iterator(); i.hasNext(); )
-                w.writeText( (String) configuration.get( parameter ) );
+                if ( parameter.getDefaultValue() != null )
+                {
+                    w.addAttribute( "default-value", parameter.getDefaultValue() );
+                }
+
+                if ( parameter.getExpression() != null )
+                {
+                    w.writeText( parameter.getExpression() );
+                }

UPD40 UPD40 UPD43 UPD42 UPD43 UPD42 INS25 INS25 INS27 INS8 INS27 INS8 MOV42 INS32 INS33 INS21 INS32 INS33 MOV21 UPD27 INS42 INS42 INS32 INS42 INS42 INS32 INS32 INS42 INS42 INS45 INS32 INS32 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 INS42 UPD42 DEL42 DEL33 DEL27 DEL32 DEL34 DEL27 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL32 DEL11