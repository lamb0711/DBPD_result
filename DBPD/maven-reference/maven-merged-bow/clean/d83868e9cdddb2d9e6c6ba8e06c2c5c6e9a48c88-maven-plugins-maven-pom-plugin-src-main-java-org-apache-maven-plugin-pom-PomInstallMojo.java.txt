*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162928 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.maven.plugin.jar;
+package org.apache.maven.plugin.pom;
+import org.apache.maven.artifact.Artifact;
+import org.apache.maven.artifact.DefaultArtifact;
+import org.apache.maven.artifact.installer.ArtifactInstaller;
+import org.apache.maven.artifact.repository.ArtifactRepository;
-import org.apache.maven.artifact.installer.ArtifactInstaller;
-import org.codehaus.plexus.util.FileUtils;
- * @description install a jar in local repository
+ * @description installs project's main artifact in local repository
- * @parameter
- *  name="project"
- *  type="org.apache.maven.project.MavenProject"
- *  required="true"
- *  validator=""
- *  expression="#project"
- *  description=""
+ * @parameter name="project"
+ * type="org.apache.maven.project.MavenProject"
+ * required="true"
+ * validator=""
+ * expression="#project"
+ * description=""
- * @parameter
- *  name="installer"
- *  type="org.apache.maven.artifact.installer.ArtifactInstaller"
- *  required="true"
- *  validator=""
- *  expression="#component.org.apache.maven.artifact.installer.ArtifactInstaller"
- *  description=""
+ * @parameter name="installer"
+ * type="org.apache.maven.artifact.installer.ArtifactInstaller"
+ * required="true"
+ * validator=""
+ * expression="#component.org.apache.maven.artifact.installer.ArtifactInstaller"
+ * description=""
+ *
+ * @parameter name="localRepository"
+ * type="org.apache.maven.artifact.repository.ArtifactRepository"
+ * required="true"
+ * validator=""
+ * expression="#localRepository"
+ * description=""
+ *
-        artifactInstaller.install( project.getFile(), "pom", project );
+        ArtifactRepository localRepository = (ArtifactRepository) request.getParameter( "localRepository" );
+
+        Artifact artifact = new DefaultArtifact( project.getGroupId(),
+                                                 project.getArtifactId(),
+                                                 project.getVersion(),
+                                                 "pom" );
+
+        File pom = new File( project.getFile().getParentFile(), "pom.xml" );
+
+        artifactInstaller.install( pom, artifact, localRepository );

MOV26 MOV26 INS26 INS26 UPD40 UPD40 INS40 INS40 INS65 UPD66 UPD66 UPD66 INS66 INS66 INS66 INS66 INS66 INS66 INS60 INS60 INS60 INS43 INS59 INS43 INS59 INS43 INS59 INS32 INS42 INS42 INS11 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS43 INS32 INS32 INS32 INS45 INS43 MOV32 MOV42 INS45 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 DEL42 DEL45 DEL42