[MNG-1797][MNG-2420] Fixing exclusions that bleed over into other dependencies, and modifying DefaultProfileManager to (a) deprecate constructor that takes Settings but no properties, and (b) add a constructor that takes Settings and properties.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@438189 13f79535-47bb-0310-9956-ffa450edef68

-        this( container, (Settings)null );
-        if (props != null) {
-            systemProperties = props;
-        }
+        this( container, (Settings)null, props );
+    /**
+     * @deprecated without passing in the system properties, the SystemPropertiesProfileActivator will not work correctly
+     * in embedded envirnments.
+     */
+    /**
+     * the properties passed to the profile manager are the props that
+     * are passed to maven, possibly containing profile activator properties
+     *
+     */
+    public DefaultProfileManager( PlexusContainer container, Settings settings, Properties props )
+    {
+        this.container = container;
+
+        loadSettingsProfiles( settings );
+        
+        if ( props != null )
+        {
+            systemProperties = props;
+        }
+    }
+    

MOV31 INS31 INS29 INS83 INS42 INS44 INS44 MOV8 INS29 INS44 INS8 INS65 INS43 INS42 INS43 INS42 INS65 INS43 INS42 INS21 INS21 MOV25 INS66 INS66 INS42 INS42 INS42 INS66 INS66 INS42 INS7 INS32 INS22 INS42 INS42 INS42 INS52 INS42