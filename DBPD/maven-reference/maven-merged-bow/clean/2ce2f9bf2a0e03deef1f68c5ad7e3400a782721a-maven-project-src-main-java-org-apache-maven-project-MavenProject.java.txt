[MNG-2720] Multiproject dependencies not accurate for project.compileClasspathElements when run from root project

o Basically merged from r741841 but I opted to leave in the resolution from project directories since I am not sure whether this can safely be removed right now

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@747588 13f79535-47bb-0310-9956-ffa450edef68

-        String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId(), a.getVersion() );
-        MavenProject project = (MavenProject) projectReferences.get( refId );
-
-        boolean projectDirFound = false;
-        if ( project != null )
+        File file = a.getFile();
+        if ( file != null )
-            if ( a.getType().equals( "test-jar" ) )
+            list.add( file.getPath() );
+        }
+        else
+        {
+            String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId(), a.getVersion() );
+            MavenProject project = (MavenProject) projectReferences.get( refId );
+
+            boolean projectDirFound = false;
+            if ( project != null )
-                File testOutputDir = new File( project.getBuild().getTestOutputDirectory() );
-                if ( testOutputDir.exists() )
+                if ( "test-jar".equals( a.getType() ) )
-                    list.add( testOutputDir.getAbsolutePath() );
+                    File testOutputDir = new File( project.getBuild().getTestOutputDirectory() );
+                    if ( testOutputDir.exists() )
+                    {
+                        list.add( testOutputDir.getAbsolutePath() );
+                        projectDirFound = true;
+                    }
+                }
+                else
+                {
+                    list.add( project.getBuild().getOutputDirectory() );
-            else
-            {
-                list.add( project.getBuild().getOutputDirectory() );
-                projectDirFound = true;
-            }
-        }
-        if ( !projectDirFound )
-        {
-            File file = a.getFile();
-            if ( file == null )
+            if ( !projectDirFound )
-            list.add( file.getPath() );

MOV60 INS27 INS8 INS42 INS33 MOV60 MOV60 MOV60 MOV25 MOV25 MOV38 MOV32 INS45 DEL45 DEL42 DEL33 DEL27