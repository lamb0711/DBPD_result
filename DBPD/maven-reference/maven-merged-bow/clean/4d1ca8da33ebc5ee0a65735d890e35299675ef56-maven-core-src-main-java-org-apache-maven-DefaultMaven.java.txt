o Removed AuthenticationInfoProvider stuff
o Added ArtifactRepositoryFactory stuff to construct with AuthenticationInfo if possible.
o Added UserModelBuilder stuff for componentizing UserModel construction.
  -> DefaultUserModelBuilder has a configuration point 'userModelPath' which can redirect where it reads user.xml from (${user.home} is substitutable here).
o Added warning message to deployment plugin when deployment repo has no authentication info available.
o Added warning message for repos with null <id/> (auth info cannot be assigned here).
o Added a couple of debug-level messages for aid in debugging repo- and userModel-related problems.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163558 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepositoryFactory;
+import org.apache.maven.model.Repository;
+import org.apache.maven.model.user.UserModelUtils;
-import org.apache.maven.util.UserModelUtils;
+    
+    protected ArtifactRepositoryFactory artifactRepositoryFactory;
+        
+        session.setRemoteRepositories( getArtifactRepositories( project, request.getUserModel() ) );
+    private List getArtifactRepositories( MavenProject project, UserModel userModel )
+    {
+        List remoteRepos = new ArrayList();
+        for ( Iterator it = project.getRepositories().iterator(); it.hasNext(); )
+        {
+            Repository modelRepo = (Repository) it.next();
+            remoteRepos.add( artifactRepositoryFactory.createArtifactRepository( modelRepo, userModel ) );
+        }
+
+        return remoteRepos;
+    }
+

MOV26 INS26 INS26 INS40 INS40 UPD40 INS23 INS31 INS83 INS43 INS59 INS83 INS43 INS42 INS44 INS44 INS8 INS42 INS42 INS21 INS42 INS43 INS42 INS43 INS42 INS60 INS24 INS41 INS32 INS42 INS42 INS43 INS59 INS58 INS32 INS8 INS42 INS42 INS42 INS32 INS42 INS42 INS14 INS43 INS59 INS42 INS42 INS60 INS21 INS42 INS42 INS32 INS43 INS42 INS42 INS32 INS43 INS59 INS32 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS11 INS42 INS42 INS32 INS42 INS42 INS43 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42