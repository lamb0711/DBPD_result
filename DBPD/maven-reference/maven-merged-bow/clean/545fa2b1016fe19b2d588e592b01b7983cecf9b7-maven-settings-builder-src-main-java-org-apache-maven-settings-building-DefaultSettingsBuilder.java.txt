o Introduced SettingsSource to enable non-file based content providers

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1029127 13f79535-47bb-0310-9956-ffa450edef68

-        Settings globalSettings = readSettings( request.getGlobalSettingsFile(), request, problems );
+        SettingsSource globalSettingsSource =
+            getSettingsSource( request.getGlobalSettingsFile(), request.getGlobalSettingsSource() );
+        Settings globalSettings = readSettings( globalSettingsSource, request, problems );
-        Settings userSettings = readSettings( request.getUserSettingsFile(), request, problems );
+        SettingsSource userSettingsSource =
+            getSettingsSource( request.getUserSettingsFile(), request.getUserSettingsSource() );
+        Settings userSettings = readSettings( userSettingsSource, request, problems );
-    private Settings readSettings( File settingsFile, SettingsBuildingRequest request,
+    private SettingsSource getSettingsSource( File settingsFile, SettingsSource settingsSource )
+    {
+        if ( settingsSource != null )
+        {
+            return settingsSource;
+        }
+        else if ( settingsFile != null && settingsFile.exists() )
+        {
+            return new FileSettingsSource( settingsFile );
+        }
+        return null;
+    }
+
+    private Settings readSettings( SettingsSource settingsSource, SettingsBuildingRequest request,
-        if ( settingsFile == null || !settingsFile.exists() )
+        if ( settingsSource == null )
-        problems.setSource( settingsFile.getAbsolutePath() );
+        problems.setSource( settingsSource.getLocation() );
-                settings = settingsReader.read( settingsFile, options );
+                settings = settingsReader.read( settingsSource.getInputStream(), options );
-                settings = settingsReader.read( settingsFile, options );
+                settings = settingsReader.read( settingsSource.getInputStream(), options );
-            problems.add( SettingsProblem.Severity.FATAL, "Non-parseable settings " + settingsFile + ": "
+            problems.add( SettingsProblem.Severity.FATAL, "Non-parseable settings " + settingsSource.getLocation() + ": "
-            problems.add( SettingsProblem.Severity.FATAL, "Non-readable settings " + settingsFile + ": "
+            problems.add( SettingsProblem.Severity.FATAL, "Non-readable settings " + settingsSource.getLocation() + ": "

INS31 INS83 INS43 INS42 MOV44 INS44 INS8 INS44 INS60 INS60 INS42 INS43 INS42 INS25 INS41 INS43 INS42 INS25 INS43 MOV43 INS59 INS43 MOV43 INS59 INS42 INS27 INS8 MOV25 INS33 INS42 INS27 MOV8 INS42 UPD42 INS42 INS32 INS42 UPD42 INS42 INS32 INS42 INS33 INS41 UPD27 INS8 INS42 INS33 UPD42 INS32 INS42 INS42 INS42 INS42 UPD42 INS32 INS42 INS42 INS42 INS42 INS42 UPD27 MOV32 INS41 UPD42 UPD42 MOV42 UPD42 MOV42 MOV42 UPD42 MOV42 INS14 INS43 INS42 INS42 INS32 MOV32 INS32 MOV32 INS32 INS42 INS42 INS42 INS42 UPD42 MOV42 INS42 INS32 UPD42 MOV42 INS42 DEL38 DEL42 DEL42