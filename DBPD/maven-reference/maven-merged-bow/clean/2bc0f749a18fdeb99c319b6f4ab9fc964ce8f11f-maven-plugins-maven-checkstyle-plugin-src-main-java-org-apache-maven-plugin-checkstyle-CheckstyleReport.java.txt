PR: MNG-1034
use reporting for default output directory

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@292104 13f79535-47bb-0310-9956-ffa450edef68

+import com.puppycrawl.tools.checkstyle.Checker;
+import com.puppycrawl.tools.checkstyle.ConfigurationLoader;
+import com.puppycrawl.tools.checkstyle.DefaultLogger;
+import com.puppycrawl.tools.checkstyle.ModuleFactory;
+import com.puppycrawl.tools.checkstyle.PackageNamesLoader;
+import com.puppycrawl.tools.checkstyle.PropertiesExpander;
+import com.puppycrawl.tools.checkstyle.XMLLogger;
+import com.puppycrawl.tools.checkstyle.api.AuditListener;
+import com.puppycrawl.tools.checkstyle.api.CheckstyleException;
+import com.puppycrawl.tools.checkstyle.api.Configuration;
+import com.puppycrawl.tools.checkstyle.api.FilterSet;
+import com.puppycrawl.tools.checkstyle.filters.SuppressionsLoader;
-import com.puppycrawl.tools.checkstyle.api.AuditListener;
-import com.puppycrawl.tools.checkstyle.api.Configuration;
-import com.puppycrawl.tools.checkstyle.ConfigurationLoader;
-import com.puppycrawl.tools.checkstyle.Checker;
-import com.puppycrawl.tools.checkstyle.DefaultLogger;
-import com.puppycrawl.tools.checkstyle.ModuleFactory;
-import com.puppycrawl.tools.checkstyle.PackageNamesLoader;
-import com.puppycrawl.tools.checkstyle.PropertiesExpander;
-import com.puppycrawl.tools.checkstyle.XMLLogger;
-import com.puppycrawl.tools.checkstyle.api.CheckstyleException;
-import com.puppycrawl.tools.checkstyle.api.FilterSet;
-import com.puppycrawl.tools.checkstyle.filters.SuppressionsLoader;
-
- * @goal checkstyle
- *
+ * @goal checkstyle
-     * @parameter expression="${project.build.directory}/site"
+     * @parameter default-value="${project.reporting.outputDirectory}"
-    private String outputDirectory;
+    private File outputDirectory;
-     *     "sun" (for the Sun coding conventions), "turbine", and "avalon".
-     *     Default is sun.
+     * "sun" (for the Sun coding conventions), "turbine", and "avalon".
+     * Default is sun.
-     *     to verify that source code has the correct copyright.
+     * to verify that source code has the correct copyright.
-     *     created with the violations. Note: This is in addition to the XML result file (containing
-     *     the violations in XML format which is always created.
+     * created with the violations. Note: This is in addition to the XML result file (containing
+     * the violations in XML format which is always created.
-    private String useFile;
+    private File useFile;
-     *     property named <code>checkstyle.supperssions.file</code> with the value of this
-     *     property. This allows using the Checkstyle property your own custom checkstyle
-     *     configuration file when specifying a suppressions file.
+     * property named <code>checkstyle.supperssions.file</code> with the value of this
+     * property. This allows using the Checkstyle property your own custom checkstyle
+     * configuration file when specifying a suppressions file.
-     *     determined by the <code>outputFileFormat</code>
+     * determined by the <code>outputFileFormat</code>
-     *     "plain" and "xml"
+     * "plain" and "xml"
-        return outputDirectory;
+        return outputDirectory.getAbsolutePath();
+            {
+            }
+            {
+            }
-        if ( StringUtils.isNotEmpty( useFile ) )
+        if ( useFile != null )
-            File outputFile = new File( useFile );
-
-            OutputStream out = getOutputStream( outputFile );
+            OutputStream out = getOutputStream( useFile );
-                throw new MavenReportException( "Invalid output file format: (" + outputFileFormat
-                    + "). Must be 'plain' or 'xml'." );
+                throw new MavenReportException(
+                    "Invalid output file format: (" + outputFileFormat + "). Must be 'plain' or 'xml'." );
-        FileOutputStream out;
-
-            File parentFile = file.getParentFile();
+            File parentFile = file.getAbsoluteFile().getParentFile();
+            {
+            }
+            {
+            }
+            {
+            }
+        {
+        }
+        {
+        }

MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV65 MOV43 UPD43 MOV42 UPD66 INS32 INS27 INS8 INS8 INS42 INS42 INS42 INS33 MOV41 MOV41 INS8 INS8 INS8 INS8 INS8 MOV21 MOV21 MOV21 MOV21 MOV21 UPD42 INS32 MOV42 INS42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL14 DEL59 DEL60 DEL42 DEL43 DEL42 DEL59 DEL60