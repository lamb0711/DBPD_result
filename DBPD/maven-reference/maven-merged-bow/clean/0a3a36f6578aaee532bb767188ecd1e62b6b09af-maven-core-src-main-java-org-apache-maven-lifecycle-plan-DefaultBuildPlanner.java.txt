Fixing the case for site:run where a direct mojo invocation needs reports.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@523087 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.model.Phase;
-                BuildPlanModifier modder = new ReportingPlanModifier( mojoBinding, reportBindings );
+                Phase phase = LifecycleUtils.findPhaseForMojoBinding( mojoBinding, lifecycleBindings, true );
+                
+                if ( phase == null )
+                {
+                    if ( planElement instanceof DirectInvocationOriginElement )
+                    {
+                        DirectInvocationModifier modder = new SimpleDirectInvocationModifier( mojoBinding, reportBindings );
-                planElement.addModifier( modder );
+                        ((DirectInvocationOriginElement) planElement).addDirectInvocationModifier( modder );
+                    }
+                    else
+                    {
+                        throw new LifecyclePlannerException( "Cannot inject reports for direct invocation: "
+                            + MojoBindingUtils.toString( mojoBinding )
+                            + "; current plan element does not accept direct-invocation modifiers." );
+                    }
+                }
+                else
+                {
+                    BuildPlanModifier modder = new ReportingPlanModifier( mojoBinding, reportBindings );
+
+                    planElement.addModifier( modder );
+                }

INS26 INS40 INS8 MOV60 INS60 INS25 INS10 INS43 INS59 INS27 INS8 MOV8 INS42 INS42 INS32 INS42 INS33 INS25 INS42 INS42 INS42 INS42 INS9 INS62 INS8 INS8 INS42 INS43 INS60 INS21 INS53 INS42 INS43 INS59 INS32 INS14 INS42 INS42 INS14 INS36 INS42 INS42 INS43 INS27 INS43 INS42 INS42 INS11 INS42 INS45 INS32 INS45 INS42 INS43 INS42 INS42 INS42 INS42 INS42 DEL10