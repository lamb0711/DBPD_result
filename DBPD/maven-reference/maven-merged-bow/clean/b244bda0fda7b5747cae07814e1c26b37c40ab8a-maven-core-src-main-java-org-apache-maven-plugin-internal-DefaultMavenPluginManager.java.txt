o Improved error reporting

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@826015 13f79535-47bb-0310-9956-ffa450edef68

-                        pluginDescriptor = parsePluginDescriptor( is, plugin );
+                        pluginDescriptor = parsePluginDescriptor( is, plugin, pluginFile.getAbsolutePath() );
-                if ( pluginXml.canRead() )
+                if ( pluginXml.isFile() )
-                        pluginDescriptor = parsePluginDescriptor( is, plugin );
+                        pluginDescriptor = parsePluginDescriptor( is, plugin, pluginXml.getAbsolutePath() );
+
+            if ( pluginDescriptor == null )
+            {
+                throw new IOException( "No plugin descriptor found at " + getPluginDescriptorLocation() );
+            }
-            throw new PluginDescriptorParsingException( plugin, e );
-        }
-
-        if ( pluginDescriptor == null )
-        {
-            throw new InvalidPluginDescriptorException( "Missing plugin descriptor for " + plugin.getId() + " ("
-                + pluginFile + ")" );
+            throw new PluginDescriptorParsingException( plugin, pluginFile.getAbsolutePath(), e );
-    private PluginDescriptor parsePluginDescriptor( InputStream is, Plugin plugin )
+    private PluginDescriptor parsePluginDescriptor( InputStream is, Plugin plugin, String descriptorLocation )
-            PluginDescriptor pluginDescriptor = builder.build( reader );
+            PluginDescriptor pluginDescriptor = builder.build( reader, descriptorLocation );
-            throw new PluginDescriptorParsingException( plugin, e );
+            throw new PluginDescriptorParsingException( plugin, descriptorLocation, e );
-            throw new PluginDescriptorParsingException( plugin, e );
+            throw new PluginDescriptorParsingException( plugin, descriptorLocation, e );

INS44 INS43 INS42 INS42 INS25 MOV27 INS8 INS53 INS14 INS32 INS42 MOV43 INS42 MOV43 INS42 UPD42 INS43 INS27 INS42 INS42 INS42 INS45 INS32 INS42 INS32 INS32 INS42 INS42 INS42 INS42 DEL42 DEL43 DEL45 DEL42 DEL42 DEL32 DEL45 DEL42 DEL45 DEL27 DEL14 DEL53 DEL8 DEL25