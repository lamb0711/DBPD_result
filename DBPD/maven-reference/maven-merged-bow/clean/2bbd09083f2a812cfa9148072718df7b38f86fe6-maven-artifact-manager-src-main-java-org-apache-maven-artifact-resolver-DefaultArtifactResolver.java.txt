PR: MNG-1127
ensure file is set to the snapshot version

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307219 13f79535-47bb-0310-9956-ffa450edef68

-            // skip artifacts with a file - they are already resolved
+                boolean resolved = false;
-                    if ( artifact.isSnapshot() && !artifact.getBaseVersion().equals( artifact.getVersion() ) )
+                    resolved = true;
+                }
+                else if ( destination.exists() )
+                {
+                    // locally resolved...no need to hit the remote repo.
+                    artifact.setResolved( true );
+                }
+
+                if ( artifact.isSnapshot() && !artifact.getBaseVersion().equals( artifact.getVersion() ) )
+                {
+                    String version = artifact.getVersion();
+                    artifact.selectVersion( artifact.getBaseVersion() );
+                    File copy = new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
+                    if ( resolved || !copy.exists() )
-                        String version = artifact.getVersion();
-                        artifact.selectVersion( artifact.getBaseVersion() );
-                        File copy = new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
+                        // recopy file if it was reresolved, or doesn't exist.
-                        artifact.selectVersion( version );
-                }
-                else if ( destination.exists() )
-                {
-                    // locally resolved...no need to hit the remote repo.
-                    artifact.setResolved( true );
+                    artifact.setFile( copy );
+                    artifact.selectVersion( version );

MOV8 MOV25 MOV27 INS25 MOV32 MOV8 MOV25 MOV38 MOV60 MOV21 MOV54 MOV60 INS60 INS25 INS39 INS59 MOV27 INS8 MOV25 INS42 INS9 MOV25 MOV54 INS21 INS25 INS21 INS7 INS27 INS8 INS32 INS42 INS9 INS42 INS38 MOV54 INS42 INS42 INS42 INS32 INS42 INS42 DEL25 DEL25 DEL8