When the downloadSources flag was off, also source files available in the local repository were not used.
Fixed so that sources archives available in the local repository are used but no additional jars are downloaded.
Added an explanation message on how to turn source downloading on (this should be on by default, but let's wait till there will be more sources archives in the m2 repo)

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@330090 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
-                if ( downloadSources )
-                {
-                    Artifact sourceArtifact = retrieveSourceArtifact( artifact, remoteArtifactRepositories,
-                                                                      localRepository, artifactResolver,
-                                                                      artifactFactory );
+                Artifact sourceArtifact = retrieveSourceArtifact( artifact, remoteArtifactRepositories,
+                                                                  localRepository, artifactResolver, artifactFactory,
+                                                                  downloadSources );
-                    if ( !sourceArtifact.isResolved() )
+                if ( !sourceArtifact.isResolved() )
+                {
+                    if ( downloadSources )
-                                                      sourceArtifact.getArtifactId() ) );
+                                                      sourceArtifact.getId() ) );
-                        log.debug( Messages.getString( "EclipseClasspathWriter.sourcesavailable", //$NON-NLS-1$
-                                                       new Object[] {
-                                                           sourceArtifact.getArtifactId(),
-                                                           sourceArtifact.getFile().getAbsolutePath() } ) );
-
-                        sourcepath = "M2_REPO/" //$NON-NLS-1$
-                            + EclipseUtils.toRelativeAndFixSeparator( localRepositoryFile, sourceArtifact.getFile()
-                                .getAbsolutePath(), false );
+                        log.info( Messages.getString( "EclipseClasspathWriter.sourcesnotdownloaded", //$NON-NLS-1$
+                                                      sourceArtifact.getId() ) );
+                }
+                else
+                {
+                    log.debug( Messages.getString( "EclipseClasspathWriter.sourcesavailable", //$NON-NLS-1$
+                                                   new Object[] {
+                                                       sourceArtifact.getId(),
+                                                       sourceArtifact.getFile().getAbsolutePath() } ) );
+
+                    sourcepath = "M2_REPO/" //$NON-NLS-1$
+                        + EclipseUtils.toRelativeAndFixSeparator( localRepositoryFile, sourceArtifact.getFile()
+                            .getAbsolutePath(), false );
-                                            ArtifactFactory artifactFactory )
+                                            ArtifactFactory artifactFactory, boolean downloadSources )
-            artifactResolver.resolve( sourceArtifact, remoteArtifactRepositories, localRepository );
+            artifactResolver.resolve( sourceArtifact, downloadSources ? remoteArtifactRepositories : new ArrayList(),
+                                      localRepository );
-                                                     new Object[] { sourceArtifact.getArtifactId(), e.getMessage() } );
+                                                     new Object[] { sourceArtifact.getId(), e.getMessage() } );
-                                                 new Object[] { sourceArtifact.getArtifactId(), e.getMessage() } );
+                                                 new Object[] { sourceArtifact.getId(), e.getMessage() } );

INS26 INS40 MOV8 INS44 MOV60 MOV60 MOV60 MOV21 MOV21 MOV21 MOV25 MOV21 INS39 INS42 MOV12 MOV32 MOV8 MOV60 MOV25 MOV44 INS8 MOV44 MOV8 MOV32 MOV8 INS25 MOV53 MOV60 MOV60 MOV21 MOV21 INS16 MOV32 MOV8 INS8 INS42 INS42 INS14 MOV21 INS25 INS43 UPD45 INS42 INS42 MOV8 INS8 INS42 INS21 UPD45 INS32 UPD42 INS42 INS42 INS32 INS42 INS42 INS45 INS32 UPD42 UPD42 INS42 INS42 UPD42 DEL42 DEL25 DEL8 DEL42 DEL25 DEL8