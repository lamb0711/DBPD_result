Fixing the case where there were exceptions in the build, but for whatever reason they didn't trigger a reactor-manager build failure flag...in cases where there isn't really a project against which to log the error, for instance.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@616968 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.model.Phase;
+import java.util.HashSet;
+import java.util.Set;
+    private Set fullyResolvedBindings = new HashSet();
+
+    private boolean includingReports = false;
+
-                       final Map directInvocationBindings, final List tasks )
+                       final Map directInvocationBindings, final Set fullyResolvedMojoBindings, final List tasks,
+                       boolean includingReports )
+        fullyResolvedBindings = new HashSet( fullyResolvedMojoBindings );
+        this.includingReports = includingReports;
+    public void markAsIncludingReports()
+    {
+        includingReports = true;
+    }
+
+    public boolean isIncludingReports()
+    {
+        return includingReports;
+    }
+
+    public boolean isFullyResolved( final MojoBinding mojoBinding )
+    {
+        String key = MojoBindingUtils.createMojoBindingKey( mojoBinding, false );
+
+        return fullyResolvedBindings.contains( key );
+    }
+
+    public void markFullyResolved()
+    {
+        for ( Iterator bindingIterator = bindings.getBindingList().iterator(); bindingIterator.hasNext(); )
+        {
+            LifecycleBinding binding = (LifecycleBinding) bindingIterator.next();
+
+            for ( Iterator phaseIterator = binding.getPhasesInOrder().iterator(); phaseIterator.hasNext(); )
+            {
+                Phase phase = (Phase) phaseIterator.next();
+
+                for ( Iterator mojoBindingIterator = phase.getBindings().iterator(); mojoBindingIterator.hasNext(); )
+                {
+                    MojoBinding mojoBinding = (MojoBinding) mojoBindingIterator.next();
+
+                    String key = MojoBindingUtils.createMojoBindingKey( mojoBinding, false );
+
+                    fullyResolvedBindings.add( key );
+                }
+            }
+        }
+
+        for ( Iterator it = directInvocationBindings.values().iterator(); it.hasNext(); )
+        {
+            MojoBinding mojoBinding = (MojoBinding) it.next();
+
+            String key = MojoBindingUtils.createMojoBindingKey( mojoBinding, false );
+
+            fullyResolvedBindings.add( key );
+        }
+    }
+
-        return new BuildPlan( bindings, forkedDirectInvocations, forkedPhases, directInvocationBindings, newTasks );
+        return new BuildPlan( bindings, forkedDirectInvocations, forkedPhases, directInvocationBindings, fullyResolvedBindings, newTasks, includingReports );

INS26 INS26 INS26 INS40 INS40 INS40 INS23 INS23 INS31 INS31 INS31 INS31 INS83 INS43 INS59 INS83 INS39 INS59 INS44 INS44 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS44 INS8 INS83 INS39 INS42 INS8 INS42 INS42 INS14 INS42 INS9 INS83 INS43 INS42 INS39 INS42 INS21 INS21 INS21 INS41 INS83 INS43 INS42 INS60 INS41 INS24 INS24 INS43 INS42 INS7 INS7 INS7 INS42 INS42 INS43 INS59 INS32 INS58 INS32 INS8 INS58 INS32 INS8 INS42 INS42 INS14 INS22 INS42 INS42 INS9 INS42 INS42 INS32 INS42 INS42 INS42 INS43 INS59 INS42 INS42 INS60 INS24 INS43 INS59 INS42 INS42 INS60 INS60 INS21 INS42 INS42 INS43 INS42 INS52 INS42 INS42 INS42 INS42 INS9 INS42 INS42 INS32 INS43 INS59 INS58 INS32 INS8 INS42 INS42 INS32 INS43 INS59 INS43 INS59 INS32 INS42 INS32 INS42 INS42 INS42 INS11 INS43 INS59 INS42 INS42 INS60 INS24 INS32 INS42 INS42 INS42 INS11 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS42 INS42 INS32 INS43 INS59 INS58 INS32 INS8 INS42 INS42 INS43 INS32 INS42 INS42 INS42 INS9 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS11 INS43 INS59 INS42 INS42 INS60 INS60 INS21 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS42 INS42 INS32 INS43 INS59 INS43 INS59 INS32 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS11 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS43 INS32 INS42 INS42 INS42 INS9 INS42 INS42 INS42