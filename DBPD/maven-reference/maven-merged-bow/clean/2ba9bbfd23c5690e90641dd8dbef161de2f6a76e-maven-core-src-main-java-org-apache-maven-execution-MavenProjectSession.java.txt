Fixing it0112 and it0115, and cleaning up extension isolation further. Also, adding a flag to tell whether an accompanying profiles.xml file is valid for any given POM file...when loaded from a repository (or stubbed), this flag should always be false.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@586061 13f79535-47bb-0310-9956-ffa450edef68

-    public static String createRealmId( Artifact realmArtifact )
+    private String createExtensionRealmId( Artifact realmArtifact )
-        return ArtifactUtils.versionlessKey( realmArtifact );
+        return projectId + "/extensions/" + ArtifactUtils.versionlessKey( realmArtifact );
-    public boolean containsRealm( Artifact extensionArtifact )
+    public boolean containsExtensionRealm( Artifact extensionArtifact )
-        String id = createRealmId( extensionArtifact );
+        String id = createExtensionRealmId( extensionArtifact );
-        String id = createRealmId( plugin );
-        return componentRealms.containsKey( id );
+        String realmId = createPluginRealmId( ArtifactUtils.versionlessKey( plugin.getGroupId(), plugin.getArtifactId() ) );
+
+        return componentRealms.containsKey( realmId );
-        String realmId = MavenProjectSession.createRealmId( extensionArtifact );
-        ClassRealm extRealm = container.getContainerRealm().createChildRealm( projectId + "/" + realmId );
+        String realmId = createExtensionRealmId( extensionArtifact );
+        ClassRealm extRealm = container.getContainerRealm().createChildRealm( realmId );
-    public ClassRealm getComponentRealm( String key )
+    public ClassRealm getPluginRealm( Plugin plugin )
+        throws NoSuchRealmException
-        return (ClassRealm) componentRealms.get( key );
+        String realmId = createPluginRealmId( ArtifactUtils.versionlessKey( plugin.getGroupId(), plugin.getArtifactId() ) );
+
+        return projectRealm.getWorld().getRealm( realmId );
-    public ClassRealm createPluginRealm( Plugin projectPlugin )
+    public ClassRealm createPluginRealm( Plugin plugin )
-        String realmId = MavenProjectSession.createRealmId( projectPlugin );
+        String realmId = createPluginRealmId( ArtifactUtils.versionlessKey( plugin.getGroupId(), plugin.getArtifactId() ) );
+
-    public static String createRealmId( Plugin plugin )
+    private String createPluginRealmId( String baseId )
-        return ArtifactUtils.versionlessKey( plugin.getGroupId(), plugin.getArtifactId() );
+        return projectId + "/plugins/" + baseId;
-    public static String createRealmId( PluginDescriptor pd )
-    {
-        return ArtifactUtils.versionlessKey( pd.getGroupId(), pd.getArtifactId() );
-    }
-
-    public ClassRealm getPluginRealm( PluginDescriptor pluginDescriptor )
+    public ClassRealm getPluginRealm( PluginDescriptor pd )
-        String realmId = MavenProjectSession.createRealmId( pluginDescriptor );
+        String realmId = createPluginRealmId( ArtifactUtils.versionlessKey( pd.getGroupId(), pd.getArtifactId() ) );
+

MOV31 UPD83 UPD42 UPD42 MOV43 UPD42 INS43 UPD83 MOV43 UPD42 INS44 MOV44 INS42 INS60 INS41 UPD42 MOV43 INS42 INS27 MOV43 INS59 INS32 INS27 MOV43 INS42 INS45 MOV32 UPD42 UPD42 INS42 INS32 INS32 INS42 INS42 INS32 INS42 INS45 INS42 UPD42 UPD42 INS32 UPD42 INS42 INS42 INS32 INS42 INS42 INS42 MOV32 UPD42 MOV32 INS42 INS42 INS32 INS32 MOV42 MOV42 MOV32 MOV32 INS42 UPD42 MOV42 INS32 INS32 MOV42 INS42 INS42 INS42 INS42 UPD42 MOV42 UPD42 MOV42 INS42 DEL83 DEL42 DEL42 DEL45 DEL42 DEL27 DEL83 DEL42 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL11 DEL41 DEL8 DEL31 DEL83 DEL41 DEL32 DEL83 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42