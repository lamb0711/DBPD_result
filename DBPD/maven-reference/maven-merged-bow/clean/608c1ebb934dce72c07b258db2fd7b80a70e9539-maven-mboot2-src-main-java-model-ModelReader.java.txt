don't inherit test deps

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@314948 13f79535-47bb-0310-9956-ffa450edef68

-            List chain = Collections.singletonList(
-                new Dependency( groupId, artifactId, version, packaging, this.chain ) );
+            List chain =
+                Collections.singletonList( new Dependency( groupId, artifactId, version, packaging, this.chain ) );
-            ModelReader p = retrievePom( parentGroupId, parentArtifactId, parentVersion, "pom", false,
-                                         excluded, Collections.EMPTY_LIST );
+            ModelReader p = retrievePom( parentGroupId, parentArtifactId, parentVersion, "pom", false, excluded,
+                                         Collections.EMPTY_LIST );
-            // Do we care about runtime here?
-            if ( Dependency.SCOPE_TEST.equals( inheritedScope ) )
+            // skip test deps
+            if ( !Dependency.SCOPE_TEST.equals( d.getScope() ) )
-                d.setScope( Dependency.SCOPE_TEST );
-            }
-
-            if ( !hasDependency( d, target ) && !excluded.contains( d.getConflictId() ) )
-            {
-                if ( "plexus".equals( d.getGroupId() ) && ( "plexus-utils".equals( d.getArtifactId() ) ||
-                    "plexus-container-default".equals( d.getArtifactId() ) ) )
+                // Do we care about runtime here?
+                if ( Dependency.SCOPE_TEST.equals( inheritedScope ) )
-                    throw new IllegalStateException( d.getConflictId() + " found in chain " + d.getChain() );
+                    d.setScope( Dependency.SCOPE_TEST );
-                target.put( d.getConflictId(), d );
+
+                if ( !hasDependency( d, target ) && !excluded.contains( d.getConflictId() ) )
+                {
+                    if ( "plexus".equals( d.getGroupId() ) && ( "plexus-utils".equals( d.getArtifactId() ) ||
+                        "plexus-container-default".equals( d.getArtifactId() ) ) )
+                    {
+                        throw new IllegalStateException( d.getConflictId() + " found in chain " + d.getChain() );
+                    }
+                    target.put( d.getConflictId(), d );
+                }

INS25 INS38 INS8 INS32 MOV25 MOV25 INS40 INS42 INS32 INS42 INS42