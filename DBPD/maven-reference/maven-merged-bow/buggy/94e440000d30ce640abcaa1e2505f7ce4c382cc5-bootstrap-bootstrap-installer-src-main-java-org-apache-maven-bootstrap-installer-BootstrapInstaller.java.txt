o merge of the maven-embedder-refactor branch into the trunk



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@392327 13f79535-47bb-0310-9956-ffa450edef68

-        ModelReader mavenCoreModel = bootstrapper.getCachedModel( "org.apache.maven", "maven-core" );
+        ModelReader mavenCliModel = bootstrapper.getCachedModel( "org.apache.maven", "maven-cli" );
-        createInstallation( installation, mavenCoreModel );
+        createInstallation( installation, mavenCliModel );
-        File mavenCoreDir = mavenCoreModel.getProjectFile().getParentFile();
-        runMaven( installation, mavenCoreDir, new String[]{"clean", "assembly:assembly"} );
+        File mavenCliDir = mavenCliModel.getProjectFile().getParentFile();
+        runMaven( installation, mavenCliDir, new String[]{"clean", "assembly:assembly"} );
-        String finalName = "maven-" + mavenCoreModel.getVersion();
-        File file = new File( mavenCoreDir, "target/" + finalName + "-bin.zip" );
+        String finalName = "maven-" + mavenCliModel.getVersion();
+        File file = new File( mavenCliDir, "target/" + finalName + "-bin.zip" );
-    private void createInstallation( File dir, ModelReader mavenCoreModel )
+    private void createInstallation( File dir, ModelReader mavenCliModel )
-        for ( Iterator i = mavenCoreModel.getDependencies().iterator(); i.hasNext(); )
+        for ( Iterator i = mavenCliModel.getDependencies().iterator(); i.hasNext(); )
-        Dependency coreAsDep = new Dependency( mavenCoreModel.getGroupId(), mavenCoreModel.getArtifactId(),
-                                               mavenCoreModel.getVersion(), mavenCoreModel.getPackaging(),
+        Dependency coreAsDep = new Dependency( mavenCliModel.getGroupId(), mavenCliModel.getArtifactId(),
+                                               mavenCliModel.getVersion(), mavenCliModel.getPackaging(),
-        File srcBinDirectory = new File( mavenCoreModel.getProjectFile().getParentFile(), "src/bin" );
+        File srcBinDirectory = new File( mavenCliModel.getProjectFile().getParentFile(), "src/bin" );

UPD42 UPD42 UPD42 UPD42 UPD42 UPD45 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42