o merge of the maven-embedder-refactor branch into the trunk



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@392327 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.MavenTools;
-    // TODO: remove
-    private PlexusContainer container;
+    protected PlexusContainer container;
+    private MavenTools mavenTools;
+
-            project = processProjectLogic( "<Super-POM>", project, null, null, true );
+            project = processProjectLogic( "<Super-POM>", project, null, null, STRICT_MODEL_PARSING );
-        Model model = readModel( "unknown", projectDescriptor, true );
+        Model model = readModel( "unknown", projectDescriptor, STRICT_MODEL_PARSING );
-                                              true );
+                                              STRICT_MODEL_PARSING );
-            model = readModel( projectId, file, false );
+            model = readModel( projectId, file, STRICT_MODEL_PARSING );
-                    artifactRepo = ProjectUtils.buildArtifactRepository( mavenRepo, artifactRepositoryFactory, container );
+                    artifactRepo = mavenTools.buildArtifactRepository( mavenRepo );
-            return ProjectUtils.buildArtifactRepositories( model.getRepositories(), artifactRepositoryFactory, container );
+            return mavenTools.buildArtifactRepositories( model.getRepositories() );
-        project.setPluginArtifactRepositories( ProjectUtils.buildArtifactRepositories( model.getPluginRepositories(),
-                                                                                       artifactRepositoryFactory,
-                                                                                       container ) );
+        project.setPluginArtifactRepositories( mavenTools.buildArtifactRepositories( model.getPluginRepositories() ) );
-            ArtifactRepository repo = ProjectUtils.buildDeploymentArtifactRepository( dm.getRepository(),
-                                                                                      artifactRepositoryFactory,
-                                                                                      container );
+            ArtifactRepository repo = mavenTools.buildDeploymentArtifactRepository( dm.getRepository() );
-                repo = ProjectUtils.buildDeploymentArtifactRepository( dm.getSnapshotRepository(),
-                                                                       artifactRepositoryFactory, container );
+                repo = mavenTools.buildDeploymentArtifactRepository( dm.getSnapshotRepository() );
-            ProjectUtils.buildArtifactRepositories( model.getRepositories(), artifactRepositoryFactory, container ) );
+            mavenTools.buildArtifactRepositories( model.getRepositories() ) );
-        return readModel( projectId, url, true );
+        return readModel( projectId, url, STRICT_MODEL_PARSING );

INS26 INS40 INS23 UPD83 INS83 INS43 INS59 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 INS42 INS42 UPD42 UPD42 UPD42 DEL9 DEL9 DEL9 DEL9 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL9