PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
-import org.apache.maven.artifact.repository.layout.ArtifactPathFormatException;
-    private ArtifactHandlerManager artifactHandlerManager;
-
-        try
-        {
-            putRemoteFile( repository, source, repository.pathOf( artifact ), downloadMonitor );
-        }
-        catch ( ArtifactPathFormatException e )
-        {
-            throw new TransferFailedException( "Path of artifact could not be determined: ", e );
-        }
+        putRemoteFile( repository, source, repository.pathOf( artifact ), downloadMonitor );
-        try
-        {
-            getLogger().info( "Uploading " + artifactMetadata );
-            putRemoteFile( repository, source, repository.pathOfMetadata( artifactMetadata ), null );
-        }
-        catch ( ArtifactPathFormatException e )
-        {
-            throw new TransferFailedException( "Path of artifact could not be determined: ", e );
-        }
+        getLogger().info( "Uploading " + artifactMetadata );
+        putRemoteFile( repository, source, repository.pathOfMetadata( artifactMetadata ), null );
-        String remotePath = null;
-        try
-        {
-            remotePath = repository.pathOf( artifact );
-        }
-        catch ( ArtifactPathFormatException e )
-        {
-            // TODO may be more appropriate to propogate the APFE
-            throw new TransferFailedException( "Failed to determine path for artifact", e );
-        }
+        String remotePath = repository.pathOf( artifact );
-        String remotePath;
-        try
-        {
-            remotePath = remoteRepository.pathOfMetadata( metadata );
-        }
-        catch ( ArtifactPathFormatException e )
-        {
-            // TODO may be more appropriate to propogate APFE
-            throw new TransferFailedException( "Failed to determine path for artifact", e );
-        }
+        String remotePath = remoteRepository.pathOfMetadata( metadata );

MOV8 MOV8 MOV43 MOV43 MOV32 MOV32 DEL40 DEL26 DEL40 DEL26 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53 DEL8 DEL12 DEL54 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53 DEL8 DEL12 DEL54 DEL8 DEL33 DEL42 DEL7 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53 DEL8 DEL12 DEL54 DEL42 DEL7 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53 DEL8 DEL12 DEL54