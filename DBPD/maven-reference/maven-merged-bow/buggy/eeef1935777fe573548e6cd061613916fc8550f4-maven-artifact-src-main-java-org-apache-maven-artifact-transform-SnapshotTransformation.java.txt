save a version of the file if it did not exist - this prevents an older snapshot blowing an installed one away on a clean repo


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163723 13f79535-47bb-0310-9956-ffa450edef68

-                
+
+        throws ArtifactMetadataRetrievalException
-        // Nothing to do
+        try
+        {
+            SnapshotArtifactMetadata metadata = SnapshotArtifactMetadata.readFromLocalRepository( artifact,
+                                                                                                  localRepository );
+            if ( metadata.getLastModified() == 0 )
+            {
+                // doesn't exist - create to avoid an old snapshot download later
+                metadata.storeInLocalRepository( localRepository );
+            }
+        }
+        catch ( ArtifactPathFormatException e )
+        {
+            throw new ArtifactMetadataRetrievalException( "Error getting existing metadata", e );
+        }
+        catch ( IOException e )
+        {
+            throw new ArtifactMetadataRetrievalException( "Error getting existing metadata", e );
+        }

INS43 INS8 INS42 INS54 INS8 INS12 INS12 INS60 INS25 INS44 INS8 INS44 INS8 INS43 INS59 INS27 INS8 INS43 INS42 INS53 INS43 INS42 INS53 INS42 INS42 INS32 INS32 INS34 INS21 INS42 INS14 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS43 INS45 INS42 INS43 INS45 INS42 INS42 INS42 INS42 INS42 INS42 DEL8