[MNG-4895] Plugins depending on 3rd party JARs that contain the Maven API can't be configured/run due to type incompatibilities

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1034880 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
+     * Gets the class realm exposing the Maven API. This is basically a restricted view on the Maven core realm.
+     * 
+     * @return The class realm exposing the Maven API, never {@code null}.
+     */
+    ClassRealm getMavenApiRealm();
+
+    /**
-     * @param parent The parent realm for the new realm, may be {@code null} to use the Maven core realm.
-     * @param imports The packages/types to import from the parent realm, may be {@code null}.
+     * @param parent The parent realm for the new realm, may be {@code null}.
+     * @param parentImports The packages/types to import from the parent realm, may be {@code null}.
+     * @param foreignImports The packages/types to import from foreign realms, may be {@code null}.
-    ClassRealm createPluginRealm( Plugin plugin, ClassLoader parent, List<String> imports, List<Artifact> artifacts );
+    ClassRealm createPluginRealm( Plugin plugin, ClassLoader parent, List<String> parentImports,
+                                  Map<String, ClassLoader> foreignImports, List<Artifact> artifacts );

INS26 INS40 INS31 INS29 INS43 INS42 INS44 INS65 INS65 INS42 INS65 UPD42 INS74 INS42 INS66 INS66 INS65 INS66 MOV65 UPD66 UPD42 MOV65 INS42 INS66 INS65 INS66 INS43 INS43 INS43 INS66 INS66 INS42 INS42 INS42