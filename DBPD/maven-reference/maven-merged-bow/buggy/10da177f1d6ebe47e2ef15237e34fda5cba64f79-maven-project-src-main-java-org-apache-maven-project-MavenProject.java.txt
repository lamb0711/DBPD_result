[MNG-3119] Modifying MavenProject.addAttachment(..) and MavenProjectHelper.attachArtifact(..) implementations to throw an unchecked exception when a project attachment will collide with existing attachments. This includes tests to verify the behavior. The unchecked exception allows Maven to deal with it as a real build failure, while avoiding the need to modify the MavenProjectHelper API, which is part of Maven's core and which would render many existing plugins incompatible with new Maven releases.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@618497 13f79535-47bb-0310-9956-ffa450edef68

+        throws DuplicateArtifactAttachmentException
+        List attachedArtifacts = getAttachedArtifacts();
+
+        if ( attachedArtifacts.contains( artifact ) )
+        {
+            throw new DuplicateArtifactAttachmentException( this, artifact );
+        }
+
-        sb.append( this.getGroupId() );
+        sb.append( getGroupId() );
-        sb.append( this.getArtifactId() );
+        sb.append( getArtifactId() );
-        sb.append( this.getVersion() );
+        sb.append( getVersion() );
-        
-        try 
+
+        try
-            sb.append( this.getFile().getPath() );
+            sb.append( getFile().getPath() );
-        
-        return sb.toString();        
+
+        return sb.toString();
-    
+

INS43 INS8 INS42 INS60 INS25 MOV21 INS43 INS59 INS32 INS8 INS42 INS42 INS32 INS42 INS42 INS42 INS53 INS42 INS14 INS43 INS52 INS42 INS42 DEL8 DEL52 DEL52 DEL52 DEL52