Merge of sisbell-maven-2.1-profile branch. Removes use of project lineage from builder.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@693332 13f79535-47bb-0310-9956-ffa450edef68

-    /** Unfortunately we have projects that are still sending us JARs without the accompanying POMs. */
+    /**
+     * Unfortunately we have projects that are still sending us JARs without the accompanying POMs.
+     */
-    public Artifact retrieveRelocatedArtifact( Artifact artifact,
-                                               ArtifactRepository localRepository,
+    public Artifact retrieveRelocatedArtifact( Artifact artifact, ArtifactRepository localRepository,
-        
+
-        
+
-        
-        // NOTE: Using artifact information here, since some POMs are deployed 
+        // NOTE: Using artifact information here, since some POMs are deployed
-            result = artifactFactory.createArtifactWithClassifier( artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getType(), artifact.getClassifier() );
+            result = artifactFactory.createArtifactWithClassifier( artifact.getGroupId(), artifact.getArtifactId(),
+                                                                   artifact.getVersion(), artifact.getType(),
+                                                                   artifact.getClassifier() );
-            result = artifactFactory.createArtifact( artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getScope(), artifact.getType() );
+            result = artifactFactory.createArtifact( artifact.getGroupId(), artifact.getArtifactId(),
+                                                     artifact.getVersion(), artifact.getScope(), artifact.getType() );
-    private ProjectRelocation retrieveRelocatedProject( Artifact artifact,
-                                                   ArtifactRepository localRepository,
-                                                   List<ArtifactRepository> remoteRepositories )
+    private ProjectRelocation retrieveRelocatedProject( Artifact artifact, ArtifactRepository localRepository,
+                                                        List<ArtifactRepository> remoteRepositories )
-            throw new ArtifactMetadataRetrievalException( "Cannot lookup MavenProjectBuilder component instance: " + e.getMessage(), e );
+            throw new ArtifactMetadataRetrievalException(
+                "Cannot lookup MavenProjectBuilder component instance: " + e.getMessage(), e );
-                    project = mavenProjectBuilder.buildFromRepository( pomArtifact, remoteRepositories, localRepository );
+                    project =
+                        mavenProjectBuilder.buildFromRepository( pomArtifact, remoteRepositories, localRepository );
-                    
+
-                            artifact.setAvailableVersions( retrieveAvailableVersions( artifact, localRepository,
-                                                                                           remoteRepositories ) );
+                            artifact.setAvailableVersions(
+                                retrieveAvailableVersions( artifact, localRepository, remoteRepositories ) );
-                        if ( ( artifact.getDependencyTrail() != null ) && ( artifact.getDependencyTrail().size() == 1 ) )
+                        if ( ( artifact.getDependencyTrail() != null ) &&
+                            ( artifact.getDependencyTrail().size() == 1 ) )
-                    artifacts = project.createArtifacts( artifactFactory, artifact.getScope(),
-                                                         artifact.getDependencyFilter() );
+                    artifacts =
+                        project.createArtifacts( artifactFactory, artifact.getScope(), artifact.getDependencyFilter() );
-            throw new ArtifactMetadataRetrievalException( "Invalid POM file for artifact: '" +
-                artifact.getDependencyConflictId() + "': " + e.getMessage(), e, artifact );
+            throw new ArtifactMetadataRetrievalException(
+                "Invalid POM file for artifact: '" + artifact.getDependencyConflictId() + "': " + e.getMessage(), e,
+                artifact );
-            getLogger().warn(
-                              "\n\tDEPRECATION: The POM for the artifact '"
-                                  + artifact.getDependencyConflictId()
-                                  + "' was invalid or not found on any repositories.\n"
-                                  + "\tThis may not be supported by future versions of Maven and should be corrected as soon as possible.\n"
-                                  + "\tError given: " + e.getMessage() + "\n" );
+            getLogger().warn( "\n\tDEPRECATION: The POM for the artifact '" + artifact.getDependencyConflictId() +
+                "' was invalid or not found on any repositories.\n" +
+                "\tThis may not be supported by future versions of Maven and should be corrected as soon as possible.\n" +
+                "\tError given: " + e.getMessage() + "\n" );
-     * @todo desperately needs refactoring. It's just here because it's implementation is maven-project specific
+     * @todo desperately needs refactoring. It's just here because it's implementation is maven-project specific
-    public static Set<Artifact> createArtifacts( ArtifactFactory artifactFactory, List<Dependency> dependencies, String inheritedScope,
-                                       ArtifactFilter dependencyFilter, MavenProject project )
+    public static Set<Artifact> createArtifacts( ArtifactFactory artifactFactory, List<Dependency> dependencies,
+                                                 String inheritedScope, ArtifactFilter dependencyFilter,
+                                                 MavenProject project )
-    public List<ArtifactVersion> retrieveAvailableVersionsFromDeploymentRepository(
-                                                                                    Artifact artifact,
+    public List<ArtifactVersion> retrieveAvailableVersionsFromDeploymentRepository( Artifact artifact,
-            versions = Collections.<ArtifactVersion> emptyList();
+            versions = Collections.<ArtifactVersion>emptyList();
+

MOV65 UPD66