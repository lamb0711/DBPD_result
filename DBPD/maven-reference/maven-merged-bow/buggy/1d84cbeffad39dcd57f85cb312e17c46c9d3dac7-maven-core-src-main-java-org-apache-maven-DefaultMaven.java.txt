MNG-5578: Make the workspace reader pluggable by creating a session scope where the MavenSession created can be injected in implementations that have the @SessionScoped annotation

+    @Requirement
+    private SessionScope sessionScope;
+        
+        try
+        {
+            session.setProjectMap( getProjectMap( session.getProjects() ) );
+        }
+        catch ( DuplicateProjectException e )
+        {
+            return addExceptionToResult( result, e );
+        }
+        
+        WorkspaceReader reactorWorkspace;
+        sessionScope.enter();
+        sessionScope.seed( MavenSession.class, session );
+        try
+        {
+            reactorWorkspace = container.lookup( WorkspaceReader.class );
+        }
+        catch ( ComponentLookupException e )
+        {
+            return addExceptionToResult( result, e );
+        }
+        
-        ReactorReader reactorRepository = null;
-        try
-        {
-            reactorRepository = new ReactorReader( session, getProjectMap( session.getProjects() ) );
-        }
-        catch ( DuplicateProjectException e )
-        {
-            return addExceptionToResult( result, e );
-        }
-
-        repoSession.setWorkspaceReader( ChainedWorkspaceReader.newInstance( reactorRepository,
+        repoSession.setWorkspaceReader( ChainedWorkspaceReader.newInstance( reactorWorkspace,
+        sessionScope.exit();
+

INS23 INS78 INS83 INS43 INS59 MOV60 INS42 INS42 INS42 INS21 INS21 INS54 INS21 UPD43 INS32 INS32 INS8 INS12 INS32 UPD42 UPD42 INS42 INS42 INS42 INS42 INS57 INS42 INS21 INS44 INS8 INS42 INS42 INS32 INS43 INS7 INS43 INS42 INS41 UPD42 INS42 INS42 MOV32 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS57 INS42 INS42 INS42 INS43 INS42 DEL42 DEL42 DEL43 DEL42 DEL14 DEL7 DEL33