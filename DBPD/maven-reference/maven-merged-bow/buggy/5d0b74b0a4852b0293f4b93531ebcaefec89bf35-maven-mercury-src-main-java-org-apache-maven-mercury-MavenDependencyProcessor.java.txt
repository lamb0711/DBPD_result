Fixed pom profile activation issues. Added support for hooking up latest builder into Mercury.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@759145 13f79535-47bb-0310-9956-ffa450edef68

-public final class MavenDependencyProcessor
+public class MavenDependencyProcessor
+	/**
+	 * Over-ride this method to change how dependencies are obtained
+	 */
-        List<InterpolatorProperty> interpolatorProperties = new ArrayList<InterpolatorProperty>();
-        interpolatorProperties.add( new InterpolatorProperty( "${mavenVersion}", "3.0-SNAPSHOT",
-                                                              PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
-
-        if ( system != null )
-        {
-            interpolatorProperties.addAll(
-                InterpolatorProperty.toInterpolatorProperties( system, PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
-        }
-        if ( user != null )
-        {
-            interpolatorProperties.addAll(
-                InterpolatorProperty.toInterpolatorProperties( user, PomInterpolatorTag.USER_PROPERTIES.name() ) );
-        }
+        List<InterpolatorProperty> interpolatorProperties = createInterpolatorProperties(system, user);
+    
+    protected final List<InterpolatorProperty> createInterpolatorProperties(Map system, Map user)
+    {
+        List<InterpolatorProperty> interpolatorProperties = new ArrayList<InterpolatorProperty>();
+        interpolatorProperties.add( new InterpolatorProperty( "${mavenVersion}", "3.0-SNAPSHOT",
+                                                              PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
-    private static List<DomainModel> getParentsOfDomainModel( MavenDomainModel domainModel, MetadataReader mdReader )
+        if ( system != null )
+        {
+            interpolatorProperties.addAll(
+                InterpolatorProperty.toInterpolatorProperties( system, PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
+        }
+        if ( user != null )
+        {
+            interpolatorProperties.addAll(
+                InterpolatorProperty.toInterpolatorProperties( user, PomInterpolatorTag.USER_PROPERTIES.name() ) );
+        }
+        return interpolatorProperties;
+    }
+
+    protected final List<DomainModel> getParentsOfDomainModel( MavenDomainModel domainModel, MetadataReader mdReader )

INS42 INS31 INS29 INS83 INS83 INS74 INS42 INS44 INS44 INS8 UPD83 UPD83 INS65 INS60 INS43 INS43 INS43 INS42 INS43 INS42 MOV60 MOV21 MOV25 MOV25 INS41 INS66 INS74 INS59 INS42 INS42 INS42 INS42 INS42 INS43 INS43 INS42 INS32 INS42 INS42 INS42 INS42 INS42 DEL83 DEL42