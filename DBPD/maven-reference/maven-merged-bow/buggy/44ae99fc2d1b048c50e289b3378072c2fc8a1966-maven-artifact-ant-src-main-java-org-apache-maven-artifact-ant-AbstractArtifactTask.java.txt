Merge maven.new for latest plexus classworlds and container APIs

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@483302 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.classworlds.ClassWorld;
-import org.codehaus.classworlds.DuplicateRealmException;
+import org.codehaus.plexus.classworlds.ClassWorld;
+import org.codehaus.plexus.classworlds.realm.DuplicateRealmException;
+import org.codehaus.plexus.PlexusContainer;
+import org.codehaus.plexus.DefaultPlexusContainer;
-import org.codehaus.plexus.embed.Embedder;
-    private Embedder embedder;
+    private PlexusContainer container;
-                getEmbedder().release( repositoryFactory );
+                getContainer().release( repositoryFactory );
-            return getEmbedder().lookup( role );
+            return getContainer().lookup( role );
-            return getEmbedder().lookup( role, roleHint );
+            return getContainer().lookup( role, roleHint );
-    protected synchronized Embedder getEmbedder()
+    protected synchronized PlexusContainer getContainer()
-        if ( embedder == null )
+        if ( container == null )
-            embedder = (Embedder) getProject().getReference( Embedder.class.getName() );
+            container = (PlexusContainer) getProject().getReference( PlexusContainer.class.getName() );
-            if ( embedder == null )
+            if ( container == null )
-                embedder = new Embedder();
-
-                    embedder.start( classWorld );
+                    container = new DefaultPlexusContainer( null, null, null, classWorld );
+
-                getProject().addReference( Embedder.class.getName(), embedder );
+                getProject().addReference( PlexusContainer.class.getName(),container );
-        return embedder;
+
+        return container;
-            ErrorDiagnostics diagnostics = (ErrorDiagnostics) embedder.lookup( ErrorDiagnostics.ROLE );
+            ErrorDiagnostics diagnostics = (ErrorDiagnostics) container.lookup( ErrorDiagnostics.ROLE );

MOV26 INS26 UPD40 UPD40 UPD40 INS40 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 INS7 UPD43 INS42 INS14 UPD43 UPD42 INS43 INS33 INS33 INS33 INS42 UPD42 INS42 DEL42 DEL42 DEL43 DEL14 DEL7 DEL21 DEL42 DEL42 DEL42 DEL32