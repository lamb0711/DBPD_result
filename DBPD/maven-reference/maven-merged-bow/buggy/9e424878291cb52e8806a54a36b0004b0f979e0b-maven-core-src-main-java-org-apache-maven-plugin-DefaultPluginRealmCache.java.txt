o Extended base plugin manager to allow for caller-supplied exclusions of certain plugin dependencies

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@881793 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
+        private final ArtifactFilter filter;
+
-        public CacheKey( Plugin plugin, ClassLoader parentRealm, List<String> parentImports, ArtifactRepository localRepository,
+        public CacheKey( Plugin plugin, ClassLoader parentRealm, List<String> parentImports,
+                         ArtifactFilter dependencyFilter, ArtifactRepository localRepository,
+            this.filter = dependencyFilter;
+            hash = hash * 31 + ( dependencyFilter != null ? dependencyFilter.hashCode() : 0 );
-                && eq( repositories, other.repositories );
+                && eq( repositories, other.repositories ) && eq( filter, other.filter )
+                && eq( parentImports, other.parentImports );
-                            ArtifactRepository localRepository, List<ArtifactRepository> remoteRepositories )
+                            ArtifactFilter dependencyFilter, ArtifactRepository localRepository,
+                            List<ArtifactRepository> remoteRepositories )
-        return cache.get( new CacheKey( plugin, parentRealm, parentImports, localRepository, remoteRepositories ) );
+        return cache.get( new CacheKey( plugin, parentRealm, parentImports, dependencyFilter, localRepository,
+                                        remoteRepositories ) );
-    public CacheRecord put( Plugin plugin, ClassLoader parentRealm, List<String> parentImports,
+    public CacheRecord put( Plugin plugin, ClassLoader parentRealm, List<String> parentImports,ArtifactFilter dependencyFilter,
-        CacheKey key = new CacheKey( plugin, parentRealm, parentImports, localRepository, remoteRepositories );
+        CacheKey key =
+            new CacheKey( plugin, parentRealm, parentImports, dependencyFilter, localRepository, remoteRepositories );

INS26 INS40 INS23 INS44 INS44 INS83 INS83 INS43 INS59 INS44 INS43 INS42 INS43 INS42 INS42 INS42 INS43 INS42 INS21 INS21 INS42 INS42 MOV43 INS42 INS7 INS7 INS27 INS22 INS42 INS42 INS27 INS27 INS32 MOV43 INS42 MOV43 INS42 INS52 INS42 INS27 INS36 MOV27 INS32 INS42 INS42 INS40 INS42 INS34 INS16 INS42 INS42 INS40 INS27 INS32 INS34 INS42 INS33 INS42 INS42