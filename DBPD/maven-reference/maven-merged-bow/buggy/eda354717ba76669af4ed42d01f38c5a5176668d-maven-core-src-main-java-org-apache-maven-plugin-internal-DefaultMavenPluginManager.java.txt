[MNG-4194] API to safely release of plugin realms

o Allowed cache to track usage of plugins by projects

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@817681 13f79535-47bb-0310-9956-ffa450edef68

+        MavenProject project = session.getCurrentProject();
+
-                                  session.getCurrentProject().getPluginArtifactRepositories() );
+                                  project.getPluginArtifactRepositories() );
-                                  session.getCurrentProject().getPluginArtifactRepositories(),
-                                  pluginDescriptor.getClassRealm(), pluginDescriptor.getArtifacts() );
+                                  project.getPluginArtifactRepositories(), pluginDescriptor.getClassRealm(),
+                                  pluginDescriptor.getArtifacts() );
+
+        pluginRealmCache.register( project, pluginDescriptor.getClassRealm() );

INS60 INS21 INS43 INS59 INS32 INS42 INS42 MOV32 INS42 INS42 INS42 INS32 INS42 INS42 INS42 UPD42 MOV42 DEL42 DEL32