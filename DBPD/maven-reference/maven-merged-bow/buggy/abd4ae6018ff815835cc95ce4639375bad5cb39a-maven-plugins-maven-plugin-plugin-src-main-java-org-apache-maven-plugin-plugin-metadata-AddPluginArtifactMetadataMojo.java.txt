PR: MNG-613
make repository metadata behave more like snapshots with daily updates.
next step is to move the version checking to use that instead and fallback to the old files

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@266298 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.metadata.GroupRepositoryMetadata;
+import org.apache.maven.plugin.descriptor.PluginDescriptor;
-/** Inject any plugin-specific artifact metadata to the project's artifact, for subsequent installation
- *  and deployment. The first use-case for this is to add the LATEST metadata (which is plugin-specific)
- *  for shipping alongside the plugin's artifact.
- *  
+/**
+ * Inject any plugin-specific artifact metadata to the project's artifact, for subsequent installation
+ * and deployment. The first use-case for this is to add the LATEST metadata (which is plugin-specific)
+ * for shipping alongside the plugin's artifact.
+ *
-    
-    /** The project artifact, which should have the LATEST metadata added to it.
-     * 
+
+    /**
+     * The project artifact, which should have the LATEST metadata added to it.
+     *
+    /**
+     * @parameter
+     */
+    private String goalPrefix;
+
-        
+
-        
+
-        
+
+
+        GroupRepositoryMetadata groupMetadata = new GroupRepositoryMetadata( project.getGroupId() );
+        groupMetadata.addPluginMapping( getGoalPrefix(), project.getArtifactId() );
+
+        projectArtifact.addMetadata( groupMetadata );
+    private String getGoalPrefix()
+    {
+        if ( goalPrefix == null )
+        {
+            goalPrefix = PluginDescriptor.getGoalPrefixFromArtifactId( project.getArtifactId() );
+        }
+
+        return goalPrefix;
+    }

INS26 INS26 INS40 INS40 INS23 INS31 INS29 INS83 INS43 INS59 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS60 INS21 INS21 INS42 INS25 INS41 INS43 INS59 INS32 INS32 INS27 INS8 INS42 INS42 INS42 INS14 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS33 INS21 INS43 INS32 INS42 INS42 INS42 INS7 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42