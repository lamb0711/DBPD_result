o Exposed methods to allow the Site Plugin to reuse the forking code for report mojos

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@808828 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+import org.apache.maven.plugin.MojoExecution;
+import org.apache.maven.plugin.MojoExecutionException;
+import org.apache.maven.plugin.MojoFailureException;
+import org.apache.maven.plugin.PluginConfigurationException;
+import org.apache.maven.project.MavenProject;
+
+    /**
+     * Calculates the forked mojo executions requested by the mojo associated with the specified mojo execution.
+     * 
+     * @param mojoExecution The mojo execution for which to calculate the forked mojo executions, must not be {@code
+     *            null}.
+     * @param session The current build session that holds the projects and further settings, must not be {@code null}.
+     */
+    void calculateForkedExecutions( MojoExecution mojoExecution, MavenSession session )
+        throws MojoNotFoundException, PluginNotFoundException, PluginResolutionException,
+        PluginDescriptorParsingException, NoPluginFoundForPrefixException, InvalidPluginDescriptorException,
+        LifecyclePhaseNotFoundException, LifecycleNotFoundException, PluginVersionResolutionException;
+
+    /**
+     * Executes the previously calculated forked mojo executions of the given mojo execution. If the specified mojo
+     * execution requires no forking, this method does nothing. The return value denotes a subset of the projects from
+     * the session that have been forked. The method {@link MavenProject#getExecutionProject()} of those projects
+     * returns the project clone on which the forked execution were performed. It is the responsibility of the caller to
+     * reset those execution projects to {@code null} once they are no longer needed to free memory and to avoid
+     * accidental usage by unrelated mojos.
+     * 
+     * @param mojoExecution The mojo execution whose forked mojo executions should be processed, must not be {@code
+     *            null}.
+     * @param session The current build session that holds the projects and further settings, must not be {@code null}.
+     * @return The (unmodifiable) list of projects that have been forked, can be empty if no forking was required but
+     *         will never be {@code null}.
+     */
+    List<MavenProject> executeForkedExecutions( MojoExecution mojoExecution, MavenSession session )
+        throws MojoFailureException, MojoExecutionException, PluginConfigurationException, PluginManagerException;
+

INS26 INS26 INS26 INS26 INS26 INS26 INS40 INS40 INS40 INS40 INS40 INS40 INS31 INS31 INS29 INS39 INS42 INS44 INS44 INS43 INS43 INS43 INS43 INS43 INS43 INS43 INS43 INS43 INS29 INS74 INS42 INS44 INS44 INS43 INS43 INS43 INS43 INS65 INS65 INS65 INS43 INS42 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS65 INS65 INS65 INS65 INS43 INS43 INS43 INS42 INS43 INS42 INS42 INS42 INS42 INS42 INS66 INS42 INS66 INS65 INS66 INS42 INS66 INS65 INS66 INS42 INS42 INS66 INS66 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS66 INS42 INS66 INS65 INS66 INS42 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS42 INS42 INS42 INS42 INS66 INS66 INS68 INS66 INS66 INS66 INS66 INS42 INS42