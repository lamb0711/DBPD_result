Working on: MNG-483

Fixing profile application to separate profiles discovered in and around POM from those in settings.xml, and apply them separately in the order: 

for-each-project-in-inheritance:{POM, profiles.xml}, settings.xml

Added common interface for accumulating, explicitly activating and deactivating, and retrieving profiles to be applied to a given project. This manager interface (ProfileManager) is general enough to be applicable to both the project-level and settings-level profiles.

Added 'performRelease'-keyed profile to super-POM which will be used by the release plugin and anyone using a parallel process, and which will enable '-DupdateReleaseInfo=true' for the deploy mojo, along with enabling the source attachment for the project.

Added 'attach' parameter to JarSourceMojo to allow local POM to turn off source attachments, overriding release profile in super-pom.

Updated the release:perform mojo to use '-DperformRelease=true' for switching on the new release profile, rather than just using '-DupdateReleaseInfo=true'...



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@233013 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Stack;
+
+    public void assembleProfilePropertiesInheritance()
+    {
+        Stack propertyStack = new Stack();
+        
+        MavenProject current = this;
+        while( current != null )
+        {
+            Properties toAdd = current.profileProperties;
+            
+            if ( toAdd != null && !toAdd.isEmpty() )
+            {
+                propertyStack.push( toAdd );
+            }
+            
+            current = current.getParent();
+        }
+        
+        Properties newProfilesProperties = new Properties();
+        
+        while( !propertyStack.isEmpty() )
+        {
+            newProfilesProperties.putAll( (Properties) propertyStack.pop() );
+        }
+        
+        this.profileProperties = newProfilesProperties;
+    }

INS26 INS40 INS31 INS83 INS39 INS42 INS8 INS60 INS60 INS61 INS60 INS61 INS21 INS43 INS59 INS43 INS59 INS27 INS8 INS43 INS59 INS38 INS8 INS7 INS42 INS42 INS14 INS42 INS42 INS52 INS42 INS33 INS60 INS25 INS21 INS42 INS42 INS14 INS32 INS21 INS22 INS42 INS43 INS43 INS59 INS27 INS8 INS7 INS43 INS42 INS42 INS32 INS52 INS42 INS42 INS42 INS42 INS40 INS27 INS38 INS21 INS42 INS32 INS42 INS42 INS42 INS11 INS42 INS33 INS32 INS32 INS42 INS42 INS43 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42