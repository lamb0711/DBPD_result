Error reporting works properly now.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@604401 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.error.DefaultProjectErrorReporter;
+    extends DefaultProjectErrorReporter
-    private Map formattedMessages = new HashMap();
+    private static final String NEWLINE = "\n";
-    private Map realCauses = new HashMap();
-
-    /**
-     * @see org.apache.maven.project.error.ProjectErrorReporter#clearErrors()
-     */
-    public void clearErrors()
+    public DefaultCoreErrorReporter( Map formattedMessageStore, Map realCauseStore )
-        formattedMessages.clear();
-        realCauses.clear();
+        super( formattedMessageStore, realCauseStore );
-    /**
-     * @see org.apache.maven.project.error.ProjectErrorReporter#hasInformationFor(java.lang.Throwable)
-     */
-    public Throwable findReportedException( Throwable error )
+    public DefaultCoreErrorReporter()
-        if ( formattedMessages.containsKey( error ) )
-        {
-            return error;
-        }
-        else if ( error.getCause() != null )
-        {
-            return findReportedException( error.getCause() );
-        }
-        return null;
-    }
-
-    /**
-     * @see org.apache.maven.project.error.ProjectErrorReporter#getFormattedMessage(java.lang.Throwable)
-     */
-    public String getFormattedMessage( Throwable error )
-    {
-        return (String) formattedMessages.get( error );
-    }
-
-    /**
-     * @see org.apache.maven.project.error.ProjectErrorReporter#getRealCause(java.lang.Throwable)
-     */
-    public Throwable getRealCause( Throwable error )
-    {
-        return (Throwable) realCauses.get( error );
-    }
-
-    private void registerBuildError( Throwable error,
-                                     String formattedMessage,
-                                     Throwable realCause )
-    {
-        formattedMessages.put( error, formattedMessage );
-        if ( realCause != null )
-        {
-            realCauses.put( error, realCause );
-        }
-    }
-
-    private void registerBuildError( Throwable error,
-                                     String formattedMessage )
-    {
-        formattedMessages.put( error, formattedMessage );

INS26 INS40 INS43 INS23 UPD42 MOV42 MOV83 INS83 INS83 MOV43 INS59 UPD83 UPD42 UPD83 UPD42 INS42 INS45 MOV43 UPD42 MOV43 UPD42 INS46 INS42 INS42 DEL83 DEL42 DEL43 DEL14 DEL59 DEL23 DEL42 DEL42 DEL43 DEL14 DEL59 DEL23 DEL40 DEL42 DEL68 DEL65 DEL29 DEL83 DEL39 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL32 DEL21 DEL8 DEL31 DEL40 DEL42 DEL40 DEL43 DEL69 DEL68 DEL65 DEL29 DEL83 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL32 DEL42 DEL41 DEL8 DEL42 DEL42 DEL32 DEL33 DEL27 DEL42 DEL42 DEL42 DEL32 DEL32 DEL41 DEL8 DEL25 DEL25 DEL33 DEL41 DEL8 DEL31 DEL40 DEL42 DEL40 DEL43 DEL69 DEL68 DEL65 DEL29 DEL83 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL11 DEL41 DEL8 DEL31 DEL40 DEL42 DEL40 DEL43 DEL69 DEL68 DEL65 DEL29 DEL83 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL11 DEL41 DEL8 DEL31 DEL39 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL33 DEL27 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL25 DEL39 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21