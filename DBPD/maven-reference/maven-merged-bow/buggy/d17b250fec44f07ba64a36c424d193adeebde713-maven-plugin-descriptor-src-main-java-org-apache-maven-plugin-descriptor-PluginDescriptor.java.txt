- allow multiple versions of a plugin to operate concurrently.
- allow specification of a mojo as groupId:artifactId:version:goal
- general removal of more hard coding

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168543 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Iterator;
+    private String version;
+
-    public void setMojos( List mojos )
-        throws DuplicateMojoDescriptorException
-    {
-        for ( Iterator it = mojos.iterator(); it.hasNext(); )
-        {
-            MojoDescriptor descriptor = (MojoDescriptor) it.next();
-
-            addMojo( descriptor );
-        }
-    }
-
-            throw new DuplicateMojoDescriptorException( getGoalPrefix(), mojoDescriptor.getGoal(), existing
-                .getImplementation(), mojoDescriptor.getImplementation() );
+            throw new DuplicateMojoDescriptorException( getGoalPrefix(), mojoDescriptor.getGoal(), existing.getImplementation(), mojoDescriptor.getImplementation() );
-
-        setId( artifactId );
-    public static String constructPluginKey( String groupId, String artifactId )
+    public static String constructPluginKey( String groupId, String artifactId, String version )
-        return groupId + ":" + artifactId;
+        return groupId + ":" + artifactId + ":" + version;
-        return constructPluginKey( groupId, artifactId );
-    }
-
-    /**
-     * @todo remove - harcoding.
-     */
-    public static String getPrefixFromGoal( String goalName )
-    {
-        String prefix = goalName;
-
-        if ( prefix.indexOf( ":" ) > 0 )
+        String id = constructPluginKey( groupId, artifactId, version );
+        if ( groupId == null || artifactId == null || version == null )
-            prefix = prefix.substring( 0, prefix.indexOf( ":" ) );
+            throw new IllegalStateException( "Plugin descriptor ID incomplete: " + id );
-        return prefix;
+        return id;
-     * @todo remove - harcoding. What about clashes?
+     * @todo move to plugin-tools-api as a default only
-    public static String getGoalIdFromFullGoal( String goalName )
-    {
-        // TODO: much less of this magic is needed - make the mojoDescriptor just store the first and second part
-        int index = goalName.indexOf( ':' );
-        if ( index >= 0 )
-        {
-            return goalName.substring( index + 1 );
-        }
-        return null;
-    }
-
+
+    public void setVersion( String version )
+    {
+        this.version = version;
+    }
+
+    public String getVersion()
+    {
+        return version;
+    }

MOV31 INS23 INS31 INS31 INS83 MOV43 INS59 INS44 MOV83 MOV43 MOV42 INS8 INS83 INS39 INS42 MOV44 INS8 UPD42 INS8 UPD42 MOV42 MOV43 INS42 INS60 INS25 INS41 UPD42 MOV21 MOV41 MOV43 INS59 INS27 INS8 INS42 UPD66 INS42 INS45 INS42 INS42 INS32 INS27 INS27 INS53 INS22 INS42 MOV42 MOV42 MOV42 INS42 INS27 INS27 INS42 INS33 INS14 INS52 INS42 INS42 INS33 INS42 INS33 INS43 INS27 INS42 INS45 INS42 DEL40 DEL26 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL32 DEL21 DEL8 DEL24 DEL8 DEL31 DEL42 DEL42 DEL32 DEL21 DEL32 DEL41 DEL8 DEL31 DEL66 DEL65 DEL29 DEL83 DEL83 DEL42 DEL42 DEL44 DEL42 DEL42 DEL59 DEL60 DEL42 DEL42 DEL45 DEL32 DEL34 DEL27 DEL8 DEL25 DEL42 DEL41 DEL8 DEL31 DEL42 DEL42 DEL42 DEL34 DEL42 DEL42 DEL45 DEL32 DEL32 DEL83 DEL42 DEL42 DEL42 DEL34 DEL27 DEL32 DEL39 DEL42 DEL42 DEL42 DEL13 DEL32 DEL59 DEL60 DEL42 DEL34 DEL27 DEL8 DEL25 DEL33 DEL41 DEL8