PR: MNG-1499
Submitted By: David Jackman
Reviewed By: John Casey

Applied. Thanks, David.

This patch makes the ordering of plugins deterministic after they are merged via inheritance or other mechanism.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@345312 13f79535-47bb-0310-9956-ffa450edef68

+        
+        List mergedPlugins = new ArrayList();
-                    assembledPlugins.put( assembledPlugin.getKey(), assembledPlugin );
+                    mergedPlugins.add(assembledPlugin);
-                    assembledPlugins.put( childPlugin.getKey(), childPlugin );
+                    mergedPlugins.add(childPlugin);
-            childContainer.setPlugins( new ArrayList( assembledPlugins.values() ) );
+            childContainer.setPlugins(mergedPlugins);
+            List mergedExecutions = new ArrayList();
+            
+                    mergedExecutions.add(assembled);
-            for ( Iterator it = childExecutions.entrySet().iterator(); it.hasNext(); )
+            for ( Iterator it = child.getExecutions().iterator(); it.hasNext(); )
-                Map.Entry entry = (Map.Entry) it.next();
+                PluginExecution childExecution = (PluginExecution)it.next();
-                String id = (String) entry.getKey();
-
-                if ( !assembledExecutions.containsKey( id ) )
+                if ( !assembledExecutions.containsKey( childExecution.getId() ) )
-                    assembledExecutions.put( id, entry.getValue() );
+                    mergedExecutions.add(childExecution);
-            child.setExecutions( new ArrayList( assembledExecutions.values() ) );
+            child.setExecutions(mergedExecutions);

INS60 INS43 INS59 INS42 INS42 MOV14 INS60 INS43 INS59 INS42 INS42 INS42 MOV14 INS42 UPD43 INS21 INS42 UPD42 INS32 UPD42 UPD42 UPD43 INS32 UPD42 UPD42 MOV42 UPD42 UPD42 MOV42 INS42 INS42 INS42 INS42 INS42 UPD42 MOV42 UPD42 UPD42 UPD42 MOV42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL40 DEL40 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL42 DEL42 DEL32