o restore profile manager location so that the site plugin works ...                                                                                                                                                                                                         
o teach the resolution to understand when the root is local with a file present versus retrieving the root as well          


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@749924 13f79535-47bb-0310-9956-ffa450edef68

-    private Set<Artifact> getPluginArtifacts( Artifact pluginArtifact,
-                                    Plugin plugin,
-                                    MavenProject project,
-                                    ArtifactRepository localRepository )
+    private Set<Artifact> getPluginArtifacts( Artifact pluginArtifact, Plugin plugin, MavenProject project, ArtifactRepository localRepository )
-            projectPluginDependencies = repositorySystem.createArtifacts(
-                                                                             plugin.getDependencies(),
-                                                                             null,
-                                                                             coreArtifactFilterManager.getCoreArtifactFilter(),
-                                                                             project );            
+            projectPluginDependencies = repositorySystem.createArtifacts( plugin.getDependencies(), null, coreArtifactFilterManager.getCoreArtifactFilter(), project );            
-            throw new InvalidPluginException( "Plugin '" + plugin + "' is invalid: "
-                                              + e.getMessage(), ee );
+            throw new InvalidPluginException( "Plugin '" + plugin + "' is invalid: " + e.getMessage(), ee );
-            throw new ArtifactResolutionException(
-                                                   "Unable to download metadata from repository for plugin '"
-                                                                   + pluginArtifact.getId() + "': "
-                                                                   + e.getMessage(),
-                                                   pluginArtifact, e );
+            throw new ArtifactResolutionException( "Unable to download metadata from repository for plugin '" + pluginArtifact.getId() + "': " + e.getMessage(), pluginArtifact, e );
-            MavenProject pluginProject =
-                mavenProjectBuilder.buildFromRepository( pluginArtifact, project.getRemoteArtifactRepositories(), localRepository );
+            MavenProject pluginProject = mavenProjectBuilder.buildFromRepository( pluginArtifact, project.getRemoteArtifactRepositories(), localRepository );
-
+        
-
-        if ( result.hasErrorArtifactExceptions() )
+        
+        if ( result.hasExceptions() )
-            throw result.getErrorArtifactExceptions().get( 0 );
+            result.getExceptions().get(  0 ).printStackTrace();

UPD42 INS21 INS32 INS32 INS42 MOV32 MOV42 MOV34 UPD42 DEL32 DEL53