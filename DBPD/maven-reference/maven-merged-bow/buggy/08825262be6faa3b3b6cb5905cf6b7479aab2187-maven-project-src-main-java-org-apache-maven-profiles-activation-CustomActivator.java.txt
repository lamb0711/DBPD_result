Adding custom profile activator support, using the <custom/> tag in the <activation/> section of a profile.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@499911 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.context.BuildContextManager;
+    private BuildContextManager buildContextManager;
+
+        throws ProfileActivationException
-
-                return activator.canDetermineActivation( profile );
+                
+                if ( activator != null )
+                {
+                    return activator.canDetermineActivation( profile );
+                }
+        throws ProfileActivationException
+        CustomActivatorAdvice advice = CustomActivatorAdvice.getCustomActivatorAdvice( buildContextManager );
+
-        ProfileActivator activator;
+        ProfileActivator activator = null;
+
-            throw new IllegalArgumentException( "Cannot find ProfileActivator with role-hint: " + type
-                + ". \nPerhaps you're missing a build extension? \nSee debug output for more information." );
+            if ( !advice.failQuietly() )
+            {
+                throw new ProfileActivationException( "Cannot find ProfileActivator with role-hint: " + type
+                    + ". \nPerhaps you're missing a build extension?", e );
+            }
-            throw new IllegalArgumentException( "Failed to configure ProfileActivator with role-hint: " + type
-                + ". Turn on debug mode for more information." );
+            if ( !advice.failQuietly() )
+            {
+                throw new ProfileActivationException( "Failed to configure ProfileActivator with role-hint: " + type
+                    + ".", e );
+            }
+        throws ProfileActivationException

INS26 INS40 INS23 INS83 INS43 INS59 INS43 INS43 INS43 INS42 INS42 INS42 INS42 INS60 INS42 INS43 INS59 INS42 INS42 INS32 INS33 INS42 INS42 INS42 INS25 INS25 INS25 INS38 INS8 INS38 INS8 INS27 INS8 INS32 MOV53 INS32 MOV53 INS42 INS33 MOV41 INS42 INS42 INS42 INS42 UPD43 INS42 UPD43 INS42 UPD42 UPD45 UPD42 UPD45