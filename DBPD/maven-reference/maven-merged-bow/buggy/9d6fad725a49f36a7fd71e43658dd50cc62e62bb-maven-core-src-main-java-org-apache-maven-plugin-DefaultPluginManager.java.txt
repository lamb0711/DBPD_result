change @requiresDependencyResolution to take a scope (default is "runtime" if no scope specified, none if tag not specified at all).
This still means ALL tests get the test dependencies of their compile time dependencies. Check if there is really a valid use case for that.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163780 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.filter.ScopeArtifactFilter;
-            if ( mojoDescriptor.requiresDependencyResolution() )
+            if ( mojoDescriptor.getRequiresDependencyResolution() != null )
-                    resolveTransitiveDependencies( session, artifactResolver, mavenProjectBuilder );
+                    resolveTransitiveDependencies( session, artifactResolver, mavenProjectBuilder,
+                                                   mojoDescriptor.getRequiresDependencyResolution() );
-                                                              "plexus-container-api", "plexus-container-default",
-                                                              "plexus-artifact-container", "wagon-provider-api",
-                                                              "classworlds"} );
-
+                                                              "plexus-container-default", "plexus-artifact-container",
+                                                              "wagon-provider-api", "classworlds"} );
-                                                MavenProjectBuilder mavenProjectBuilder )
+                                                MavenProjectBuilder mavenProjectBuilder, String scope )
+        ArtifactFilter filter = new ScopeArtifactFilter( scope );
+
-                                                                                sourceReader );
+                                                                                sourceReader, filter );

INS26 INS40 INS44 INS43 INS42 INS60 INS42 INS43 INS59 INS42 INS42 INS14 INS27 INS43 INS42 INS42 INS32 INS33 INS42 MOV42 UPD42 MOV42 INS32 INS42 INS42 DEL32 DEL45