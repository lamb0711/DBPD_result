o adding a validation method to the lifecycle executor so that I can tell users what is wrong before actually trying
  to execute the lifecycle. Trying to do this validation shows in detail how tangled some of our code is as I need
  to create the dispatcher in order to create the session which is required to make the reactorManager which 
  is required to get the project required to validate the goal name ... yah.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@572214 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.lifecycle.LifecycleUtils;
+import org.apache.maven.lifecycle.TaskValidationResult;
-        initializeBuildContext( request );
+        MavenExecutionResult result = new DefaultMavenExecutionResult();
+
+        ReactorManager reactorManager = createReactorManager(
+            request,
+            result );
+
+        if ( result.hasExceptions() )
+        {
+            return result;
+        }
-        MavenExecutionResult result = new DefaultMavenExecutionResult();
+        MavenSession session = createSession(
+            request,
+            reactorManager,
+            dispatcher );
+
+        for ( Iterator i = request.getGoals().iterator(); i.hasNext(); )
+        {
+            String goal = (String) i.next();
+
+            TaskValidationResult tvr = lifecycleExecutor.isTaskValid( goal, session, reactorManager.getTopLevelProject() );
+
+            if ( !tvr.isTaskValid() )
+            {
+                result.addException( new BuildFailureException( tvr.getMessage() ) );
+
+                return result;
+            }
+        }
-        ReactorManager reactorManager = createReactorManager(
-            request,
-            result );
-
-        // Check and make sure the creation of the reactor manager didn't cause a problem.
-
-        if ( result.hasExceptions() )
-        {
-            return result;
-        }
-
-        MavenSession session = createSession(
-            request,
-            reactorManager,
-            dispatcher );
+        initializeBuildContext( request );

UPD40 MOV21 MOV60 MOV60 MOV25 MOV60 INS24 INS58 INS32 INS8 INS43 INS59 INS42 INS42 INS60 INS60 INS25 INS42 INS42 INS32 INS43 INS59 INS43 INS59 INS38 INS8 INS32 INS42 INS42 INS42 INS11 INS42 INS42 INS32 INS32 INS21 INS41 INS42 INS42 INS43 INS32 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS43 INS32 INS42 INS42 INS42