PR: MNG-613
reorganise in preparation for generalised repository metadata

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@264091 13f79535-47bb-0310-9956-ffa450edef68

+/**
+ * @todo try to crop all, particularly plugin stuff
+ * @todo check caching?
+ */
-
-
-        metadata.setFile( metadataFile );
-    public void deploy( RepositoryMetadata metadata, ArtifactRepository remote )
+    public void deploy( File source, RepositoryMetadata metadata, ArtifactRepository remote )
-        File metadataFile = metadata.getFile();
-
-            wagonManager.putRepositoryMetadata( metadataFile, metadata, remote );
-
-            metadata.setFile( metadataFile );
+            wagonManager.putRepositoryMetadata( source, metadata, remote );
-    public void install( RepositoryMetadata metadata, ArtifactRepository local )
+    public void install( File source, RepositoryMetadata metadata, ArtifactRepository local )
-            FileUtils.copyFile( metadata.getFile(), metadataFile );
+            FileUtils.copyFile( source, metadataFile );
-    private File constructLocalRepositoryFile( RepositoryMetadata metadata, ArtifactRepository local )
+    private static File constructLocalRepositoryFile( RepositoryMetadata metadata, ArtifactRepository local )
-        String metadataPath = local.formatAsFile( metadata.getRepositoryPath() );
-
-        metadataPath = metadataPath.replace( File.separatorChar, '/' );
-
-        return new File( local.getBasedir(), metadataPath );
+        return new File( local.getBasedir(), local.pathOfRepositoryMetadata( metadata ) );

INS29 INS65 INS65 INS44 INS44 INS83 INS66 INS66 MOV43 INS42 INS43 INS42 INS42 INS32 INS42 INS42 INS42 UPD42 UPD42 MOV42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL40 DEL13 DEL32 DEL7 DEL21 DEL42