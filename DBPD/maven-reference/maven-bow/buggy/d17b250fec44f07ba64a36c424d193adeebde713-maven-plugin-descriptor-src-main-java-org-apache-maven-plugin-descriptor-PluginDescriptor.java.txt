- allow multiple versions of a plugin to operate concurrently.
- allow specification of a mojo as groupId:artifactId:version:goal
- general removal of more hard coding

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168543 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Iterator;
+    private String version;
+
-    public void setMojos( List mojos )
-        throws DuplicateMojoDescriptorException
-    {
-        for ( Iterator it = mojos.iterator(); it.hasNext(); )
-        {
-            MojoDescriptor descriptor = (MojoDescriptor) it.next();
-
-            addMojo( descriptor );
-        }
-    }
-
-            throw new DuplicateMojoDescriptorException( getGoalPrefix(), mojoDescriptor.getGoal(), existing
-                .getImplementation(), mojoDescriptor.getImplementation() );
+            throw new DuplicateMojoDescriptorException( getGoalPrefix(), mojoDescriptor.getGoal(), existing.getImplementation(), mojoDescriptor.getImplementation() );
-
-        setId( artifactId );
-    public static String constructPluginKey( String groupId, String artifactId )
+    public static String constructPluginKey( String groupId, String artifactId, String version )
-        return groupId + ":" + artifactId;
+        return groupId + ":" + artifactId + ":" + version;
-        return constructPluginKey( groupId, artifactId );
-    }
-
-    /**
-     * @todo remove - harcoding.
-     */
-    public static String getPrefixFromGoal( String goalName )
-    {
-        String prefix = goalName;
-
-        if ( prefix.indexOf( ":" ) > 0 )
+        String id = constructPluginKey( groupId, artifactId, version );
+        if ( groupId == null || artifactId == null || version == null )
-            prefix = prefix.substring( 0, prefix.indexOf( ":" ) );
+            throw new IllegalStateException( "Plugin descriptor ID incomplete: " + id );
-        return prefix;
+        return id;
-     * @todo remove - harcoding. What about clashes?
+     * @todo move to plugin-tools-api as a default only
-    public static String getGoalIdFromFullGoal( String goalName )
-    {
-        // TODO: much less of this magic is needed - make the mojoDescriptor just store the first and second part
-        int index = goalName.indexOf( ':' );
-        if ( index >= 0 )
-        {
-            return goalName.substring( index + 1 );
-        }
-        return null;
-    }
-
+
+    public void setVersion( String version )
+    {
+        this.version = version;
+    }
+
+    public String getVersion()
+    {
+        return version;
+    }
