[MNG-5073] ProjectBuilder.build(File,ProjectBuildingRequest) returns null project if dependency version info is missing

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1176414 13f79535-47bb-0310-9956-ffa450edef68

-        DefaultModelProblemCollector problems = new DefaultModelProblemCollector( null );
+        DefaultModelProblemCollector problems = new DefaultModelProblemCollector( result );
+        result.setActiveExternalProfiles( activeExternalProfiles );
+
-                throw new ModelBuildingException( problems.getRootModel(), problems.getRootModelId(),
-                                                  problems.getProblems() );
+                throw problems.newModelBuildingException();
-        result.setProblems( problems.getProblems() );
-
-        result.setActiveExternalProfiles( activeExternalProfiles );
-
-        DefaultModelProblemCollector problems = new DefaultModelProblemCollector( result.getProblems() );
+        DefaultModelProblemCollector problems = new DefaultModelProblemCollector( result );
-            throw new ModelBuildingException( resultModel, problems.getRootModelId(), problems.getProblems() );
+            throw problems.newModelBuildingException();
-            throw new ModelBuildingException( problems.getRootModel(), problems.getRootModelId(),
-                                              problems.getProblems() );
+            throw problems.newModelBuildingException();
-            throw new ModelBuildingException( problems.getRootModel(), problems.getRootModelId(),
-                                              problems.getProblems() );
+            throw problems.newModelBuildingException();
-            throw new ModelBuildingException( problems.getRootModel(), problems.getRootModelId(),
-                                              problems.getProblems() );
+            throw problems.newModelBuildingException();
-            throw new ModelBuildingException( problems.getRootModel(), problems.getRootModelId(),
-                                              problems.getProblems() );
+            throw problems.newModelBuildingException();
-        ModelData parentData =
-            new ModelData( parentModel, parent.getGroupId(), parent.getArtifactId(), parent.getVersion() );
+        ModelData parentData = new ModelData( parentModel, groupId, artifactId, version );
