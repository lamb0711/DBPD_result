[MNG-4204] Remove support for legacy style repositories

o Made validator output a deprecation warning

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@814342 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.DistributionManagement;
+
+            for ( Repository repository : model.getRepositories() )
+            {
+                validateRepositoryLayout( problems, repository, "repositories.repository", request );
+            }
+
+            for ( Repository repository : model.getPluginRepositories() )
+            {
+                validateRepositoryLayout( problems, repository, "pluginRepositories.pluginRepository", request );
+            }
+
+            DistributionManagement distMgmt = model.getDistributionManagement();
+            if ( distMgmt != null )
+            {
+                validateRepositoryLayout( problems, distMgmt.getRepository(), "distributionManagement.repository",
+                                          request );
+                validateRepositoryLayout( problems, distMgmt.getSnapshotRepository(),
+                                          "distributionManagement.snapshotRepository", request );
+            }
+    private void validateRepositoryLayout( ModelProblemCollector problems, Repository repository, String prefix,
+                                           ModelBuildingRequest request )
+    {
+        if ( repository != null && "legacy".equals( repository.getLayout() ) )
+        {
+            addViolation( problems, true, "'" + prefix + ".layout = legacy' is deprecated: " + repository.getId() );
+        }
+    }
+
