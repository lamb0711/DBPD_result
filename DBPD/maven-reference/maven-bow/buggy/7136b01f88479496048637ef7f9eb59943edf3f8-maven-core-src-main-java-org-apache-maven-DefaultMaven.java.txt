o merging in my changes from the refactored embedder branch

  milos, this has some stuff that we worked on so i've tried to unify everythign in trunk
  now


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@483655 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.execution.MavenExecutionResult;
+import org.apache.maven.execution.DefaultMavenExecutionResult;
-import org.apache.maven.model.Profile;
-import org.apache.maven.settings.SettingsUtils;
-import org.codehaus.plexus.logging.AbstractLogger;
-    public void execute( MavenExecutionRequest request )
+    public MavenExecutionResult execute( MavenExecutionRequest request )
-        // FIXME: This will not touch the core maven logger, since it's already been initialized for
-        // this component.
+        Logger logger = loggerManager.getLoggerForComponent( Mojo.ROLE );
+                
+        if ( request.getEventMonitors() == null )
+        {
+            request.addEventMonitor( new DefaultEventMonitor( logger ) );
+        }
+
-        
-        Logger myLogger = getLogger();
-        
-        // TODO: When the above problem is fixed, remove this.
-        if ( myLogger instanceof AbstractLogger )
-        {
-            ((AbstractLogger) myLogger).setThreshold( request.getLoggingLevel() );
-        }
-
-        Logger mojoLogger = loggerManager.getLoggerForComponent( Mojo.ROLE );
-
-        if ( request.isDefaultEventMonitorActive() )
-        {
-            request.addEventMonitor( new DefaultEventMonitor( mojoLogger ) );
-        }
-        wagonManager.setInteractive( request.isInteractive() );
+        wagonManager.setInteractive( request.isInteractiveMode() );
-        dispatcher.dispatchEnd( event, request.getBaseDirectory() );
+        dispatcher.dispatchEnd( event, request.getBaseDirectory() );                
+
+        return new DefaultMavenExecutionResult( rm.getTopLevelProject(), null );
-            String requestFailureBehavior = request.getFailureBehavior();
+            String requestFailureBehavior = request.getReactorFailureBehavior();
-                                        !request.isReactorActive() );
+                                        !request.useReactor() );
-     * @todo [mkleint] as part of fix MNG-1884, I've copied this code into 
-     * MavenEmbedder. if rewritten, needs to be rewritten there too
-        if ( request.isReactorActive() )
+        if ( request.useReactor() )
