[MNG-4633] Fixed weave mode bug when building m3 itself in weave mode.

Updated testcase for MEP.

Also removed all unused/unecessar code from weave mode.

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@934201 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashMap;
-import java.util.LinkedHashMap;
-import java.util.LinkedHashSet;
-import java.util.List;
-import java.util.Map;
-import java.util.Set;
-
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.HashMap;
+import java.util.LinkedHashMap;
+import java.util.LinkedHashSet;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+
-    // @Requirement(role=Lifecycle.class)
-    // @Requirement
-    public DefaultLifecycles( List<Lifecycle> lifecycles, List<Scheduling> schedules )
+    public DefaultLifecycles( Map<String, Lifecycle> lifecycles, List<Scheduling> schedules, Logger logger )
-
-        for ( Lifecycle lifecycle : lifecycles )
-        {
-            this.lifecycles.put( lifecycle.getId(), lifecycle );
-        }
+        this.logger = logger;
+        this.lifecycles = lifecycles;
-     * 
-     * @param lifecyclePhaseName
-     * @return
+     *
+     * @param lifecyclePhaseName The name of the lifecycle phase
+     * @return Schecduling information related to phase
+     * 
+     * @return A map of lifecycles, indexed on id
-            
+
-                    logger.warn( "Duplicated lifecycle phase " + phase + ". Defined in " + original.getId()
-                        + " but also in " + lifecycle.getId() );
+                    logger.warn(
+                        "Duplicated lifecycle phase " + phase + ". Defined in " + original.getId() + " but also in " +
+                            lifecycle.getId() );
