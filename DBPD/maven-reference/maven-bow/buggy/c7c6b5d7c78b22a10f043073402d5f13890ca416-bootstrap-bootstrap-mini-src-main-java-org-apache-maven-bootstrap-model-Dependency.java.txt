Refactored the bootstrapper to use a proper Model
and inheritance/dependency chains so repositories defined in models
are used for metadata too. Previously they got lost because of all
the cloning.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@420408 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
-import java.util.Collection;
-public class Dependency
+public class Dependency extends Model
-    private String version;
-
-    private String artifactId;
-
-    private String groupId;
-
-    private String type = "jar";
-
-    private List chain;
-
-    private Collection repositories;
-
-        this.chain = new ArrayList( chain );
-        this.chain.add( this );
+        super(chain);
-        this.version = version;
-        this.artifactId = artifactId;
-        this.groupId = groupId;
-        this.type = type;
+        setVersion( version );
+        setArtifactId( artifactId );
+        setGroupId( groupId );
+        setType( type );
-    public void setGroupId( String groupId )
-    {
-        this.groupId = groupId;
-    }
-
-    public String getGroupId()
-    {
-        return groupId;
-    }
-
-    public String getArtifactId()
-    {
-        return artifactId;
-    }
-
-    public void setArtifactId( String artifactId )
-    {
-        this.artifactId = artifactId;
-    }
-
-    public void setVersion( String version )
-    {
-        this.version = version;
-    }
-
-    public String getVersion()
-    {
-        return version;
-    }
-
-        return type;
+        return getPackaging();
-        this.type = type;
+        setPackaging( type );
-    public Collection getRepositories()
-    {
-        if ( repositories == null )
-            repositories = new ArrayList();
-
-        return repositories;
-    }
-
-        return getId() + ":" + getVersion() + ":" + getType();
+        return "Dependency[" + getId() + ":" + getVersion() + ":" + getType() + "]";
-    public int hashCode()
-    {
-        int result = 17;
-        result = 37 * result + groupId.hashCode();
-        result = 37 * result + artifactId.hashCode();
-        result = 37 * result + type.hashCode();
-        result = 37 * result + version.hashCode();
-        return result;
-    }
-
-    public boolean equals( Object o )
-    {
-        if ( o == this )
-        {
-            return true;
-        }
-
-        if ( !( o instanceof Dependency ) )
-        {
-            return false;
-        }
-
-        Dependency d = (Dependency) o;
-
-        if ( !d.getGroupId().equals( groupId ) )
-        {
-            return false;
-        }
-        else if ( !d.getArtifactId().equals( artifactId ) )
-        {
-            return false;
-        }
-        else if ( !d.getVersion().equals( version ) )
-        {
-            return false;
-        }
-        else if ( !d.getType().equals( type ) )
-        {
-            return false;
-        }
-        return true;
-    }
-    public List getChain()
-    {
-        return chain;
-    }
-
-        Dependency dep = new Dependency( groupId, artifactId, version, "pom", chain );
-        dep.repositories = repositories;
+        Dependency dep = new Dependency( getGroupId(), getArtifactId(), getVersion(), "pom", getChain() );
+        dep.getRepositories().addAll( getRepositories() );
+
+    public boolean equals( Object o )
+    {
+        if ( o instanceof Dependency )
+        {
+            return super.equals( o );
+        }
+        else
+        {
+            return false;
+        }
+    }
