Cleaning up reporting some more.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@604750 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.execution.BuildFailure;
+        boolean printSuccess = true;
-            logErrors( reactorManager, request.isShowErrors(), logger );
+            for ( Iterator i = result.getExceptions().iterator(); i.hasNext(); )
+            {
+                Exception e = (Exception) i.next();
+
+                showError( e, request.isShowErrors(), request.getErrorReporter(), logger );
+            }
+
+            line( logger );
+            if ( !request.isShowErrors() )
+            {
+                logger.info( "For more information, run with the -e flag" );
+                line( logger );
+            }
+                printSuccess = false;
-        if ( result.hasExceptions() )
-        {
-            for ( Iterator i = result.getExceptions().iterator(); i.hasNext(); )
-            {
-                Exception e = (Exception) i.next();
-
-                showError( e, request.isShowErrors(), request.getErrorReporter(), logger );
-            }
-        }
-        else
+        if ( printSuccess )
-    private static void logErrors( ReactorManager rm,
-                                   boolean showErrors,
-                                   MavenEmbedderLogger logger )
-    {
-        for ( Iterator it = rm.getSortedProjects().iterator(); it.hasNext(); )
-        {
-            MavenProject project = (MavenProject) it.next();
-
-            if ( rm.hasBuildFailure( project ) )
-            {
-                BuildFailure buildFailure = rm.getBuildFailure( project );
-
-                logger.info( "Error for project: " + project.getName() + " (during "
-                             + buildFailure.getTask() + ")" );
-
-                line( logger );
-            }
-        }
-
-        if ( !showErrors )
-        {
-            logger.info( "For more information, run Maven with the -e switch" );
-
-            line( logger );
-        }
-    }
-
-        showError( message, e, showErrors, new DefaultCoreErrorReporter(), new MavenEmbedderConsoleLogger() );
+        MavenEmbedderLogger logger = new MavenEmbedderConsoleLogger();
+
+        showError( message, e, showErrors, new DefaultCoreErrorReporter(), logger );
+
+        if ( !showErrors )
+        {
+            logger.info( "For more information, run with the -e flag" );
+        }
-    static void showError( Exception e,
+    private static void showError( Exception e,
-    public static void showError( String message,
+    static void showError( String message,
-        else
-        {
-            writer.write( "For more information, run with the -e flag" );
-        }
