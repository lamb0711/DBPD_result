PR: MNG-870
MAke plugin discovery reactor aware



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@290887 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.artifact.ActiveProjectArtifact;
+        // TODO: share with MMS? Not sure if it belongs here
+        if ( project.getProjectReferences() != null && !project.getProjectReferences().isEmpty() )
+        {
+            // TODO: use MavenProject getProjectReferenceId
+            String refId = plugin.getGroupId() + ":" + plugin.getArtifactId();
+            MavenProject ref = (MavenProject) project.getProjectReferences().get( refId );
+            if ( ref != null && ref.getArtifact() != null )
+            {
+                pluginArtifact = new ActiveProjectArtifact( ref, pluginArtifact );
+            }
+        }
+
