o integrate changes made in maven-artifact for non fail-fast and request/result usage in the embedder for
  use in IDE integration to provide as much feedback as possible.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@571862 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.MavenProjectBuildingResult;
+        MavenExecutionResult result = new DefaultMavenExecutionResult();
+
-            project = mavenProjectBuilder.buildWithDependencies( new File( request.getPomFile() ),
-                                                                 request.getLocalRepository(), profileManager,
-                                                                 request.getTransferListener() );
-            return new DefaultMavenExecutionResult( project, Collections.singletonList( e ) );
+            // At this point real project building, and artifact resolution have not occured.
+
+            result.addException( e );
+
+            return result;
-        return new DefaultMavenExecutionResult( project, Collections.EMPTY_LIST );
+        MavenProjectBuildingResult r = null;
+
+        try
+        {
+            r = mavenProjectBuilder.buildWithDependencies(
+                new File( request.getPomFile() ),
+                request.getLocalRepository(),
+                profileManager,
+                request.getTransferListener() );
+        }
+        catch ( ProjectBuildingException e )
+        {
+
+        }
+
+        result.setProject( r.getProject() );
+
+        result.setArtifactResolutionResult( r.getArtifactResolutionResult() );
+
+
+        return result;
-                                                          configuration.getGlobalSettingsFile() );
+                    configuration.getGlobalSettingsFile() );
-                                                                   snapshotsPolicy, releasesPolicy );
+            snapshotsPolicy, releasesPolicy );
-                return new DefaultMavenExecutionResult( Collections.singletonList( e ) );
+                MavenExecutionResult result = new DefaultMavenExecutionResult();
+
+                result.addException( e );
+
+                return result;
