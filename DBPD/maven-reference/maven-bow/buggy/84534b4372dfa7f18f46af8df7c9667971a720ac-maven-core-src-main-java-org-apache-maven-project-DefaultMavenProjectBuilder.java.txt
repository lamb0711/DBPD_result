o Fixed population of properties in legacy project builder

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@812081 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.execution.MavenSession;
+import org.apache.maven.plugin.LegacySupport;
+    @Requirement
+    private LegacySupport legacySupport;
+
-        
+
+        MavenSession session = legacySupport.getSession();
+        if ( session != null )
+        {
+            configuration.setSystemProperties( session.getSystemProperties() );
+            configuration.setUserProperties( session.getUserProperties() );
+        }
+        else
+        {
+            configuration.setSystemProperties( System.getProperties() );
+        }
+
