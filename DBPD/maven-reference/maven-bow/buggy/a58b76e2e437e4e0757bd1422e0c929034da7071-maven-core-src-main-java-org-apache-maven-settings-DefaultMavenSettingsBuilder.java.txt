Adding profiles.xml and settings.xml support for profiles, along with integration tests for each.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@189510 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.util.StringUtils;
-        String path = settingsPath;
+        String path = System.getProperty( MavenSettingsBuilder.ALT_SETTINGS_XML_LOCATION );
+        
+        if( StringUtils.isEmpty( path ) )
+        {
+            // TODO: This replacing shouldn't be necessary as user.home should be in the
+            // context of the container and thus the value would be interpolated by Plexus
+            String userHome = System.getProperty( "user.home" );
-        // TODO: This replacing shouldn't be necessary as user.home should be in the
-        // context of the container and thus the value would be interpolated by Plexus
-        String userHome = System.getProperty( "user.home" );
-        userHome = userHome.replaceAll( "\\\\", "/" );
-
-        path = path.replaceAll( "\\$\\{user.home\\}", userHome );
-        path = path.replaceAll( "\\\\", "/" );
-        path = path.replaceAll( "//", "/" );
-
-        return new File( path );
+            return new File( userHome, settingsPath ).getAbsoluteFile();
+        }
+        else
+        {
+            return new File( path ).getAbsoluteFile();
+        }
