o restore profile manager location so that the site plugin works ...                                                                                                                                                                                                         
o teach the resolution to understand when the root is local with a file present versus retrieving the root as well          


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@749924 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.profiles.DefaultProfileManager;
+import org.apache.maven.profiles.ProfileActivationContext;
+import org.apache.maven.profiles.ProfileActivationException;
+import org.apache.maven.profiles.ProfileManager;
+        
-        hm.put( ArtifactUtils.artifactId( project.getGroupId(), project.getArtifactId(), "pom", project.getVersion() ),
-                project );
+        hm.put( ArtifactUtils.artifactId( project.getGroupId(), project.getArtifactId(), "pom", project.getVersion() ), project );
+                     
+        Artifact pomArtifact = repositorySystem.createProjectArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion() );
+        pomArtifact.setFile( projectDescriptor );
-            .setArtifact( project.getArtifact() )
+            .setArtifact( pomArtifact )
+        System.out.println( result );
+        
-        PomClassicDomainModel domainModel = buildModel( pom,
-                interpolatorProperties,
-                                                        activeProfileIds, inactiveProfileIds,
-                                                        localRepository, remoteRepositories );
+        PomClassicDomainModel domainModel = buildModel( pom, interpolatorProperties, activeProfileIds, inactiveProfileIds, localRepository, remoteRepositories );
