[MNG-4186] Provide an exact pointer to documentation specific to each known exception that can occur

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@827792 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.exception.DefaultExceptionHandler;
-import org.apache.maven.exception.ExceptionHandler;
-import org.apache.maven.exception.ExceptionSummary;
+import org.apache.maven.repository.LocalRepositoryNotAccessibleException;
+        MavenExecutionResult result;
+
-            return doExecute( request );
+            result = doExecute( request );
-            return processResult( new DefaultMavenExecutionResult(), e );
+            result = processResult( new DefaultMavenExecutionResult(), e );
+
+        return result;
-        
-        DelegatingLocalArtifactRepository delegatingLocalArtifactRepository = new DelegatingLocalArtifactRepository( request.getLocalRepository() );
+
+        try
+        {
+            validateLocalRepository( request );
+        }
+        catch ( LocalRepositoryNotAccessibleException e )
+        {
+            return processResult( result, e );
+        }
+
+        DelegatingLocalArtifactRepository delegatingLocalArtifactRepository =
+            new DelegatingLocalArtifactRepository( request.getLocalRepository() );
+    private void validateLocalRepository( MavenExecutionRequest request )
+        throws LocalRepositoryNotAccessibleException
+    {
+        File localRepoDir = request.getLocalRepositoryPath();
+        localRepoDir.mkdirs();
+
+        if ( !localRepoDir.isDirectory() )
+        {
+            throw new LocalRepositoryNotAccessibleException( "Could not create local repository at " + localRepoDir );
+        }
+    }
+
-        ExceptionHandler handler = new DefaultExceptionHandler();
-        
-        ExceptionSummary es = handler.handleException( e );                        
-
-        
-        result.setExceptionSummary( es );    
-        
+
