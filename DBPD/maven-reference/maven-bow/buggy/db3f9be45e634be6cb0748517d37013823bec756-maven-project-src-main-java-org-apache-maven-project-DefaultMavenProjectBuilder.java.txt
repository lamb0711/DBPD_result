Fixing a problem where parent POMs that are not found during model-lineage discovery were not previously stubbed out, and caused the build to fail where it didn't in 2.0.7

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@564299 13f79535-47bb-0310-9956-ffa450edef68

-    
+
-    
+
-    
+
-    //     
+    //
-        
-        MavenProject project = (MavenProject) projectBuildCache.getCachedProject( artifact );
+
+        MavenProject project = projectBuildCache.getCachedProject( artifact );
-    
-    public MavenProject buildStandaloneSuperProject( ArtifactRepository localRepository, ProfileManager profileManager ) 
+
+    public MavenProject buildStandaloneSuperProject( ArtifactRepository localRepository, ProfileManager profileManager )
-        
+
-        
+
-        
+
-        
+
-        
+
-        
-        if ( activeProfiles != null && !activeProfiles.isEmpty() )
+
+        if ( ( activeProfiles != null ) && !activeProfiles.isEmpty() )
-        
-        if ( activeExternalProfiles != null && !activeExternalProfiles.isEmpty() )
+
+        if ( ( activeExternalProfiles != null ) && !activeExternalProfiles.isEmpty() )
-        if ( dependencyManagement != null && (deps = dependencyManagement.getDependencies()) != null && deps.size() > 0)
+        if ( ( dependencyManagement != null ) && ( (deps = dependencyManagement.getDependencies()) != null ) && ( deps.size() > 0 ))
-                    if ( null != d.getExclusions() && !d.getExclusions().isEmpty() )
+                    if ( ( null != d.getExclusions() ) && !d.getExclusions().isEmpty() )
-        
+
-            if ( project.getDistributionManagement() != null && project.getDistributionManagement().getStatus() != null )
+            if ( ( project.getDistributionManagement() != null ) && ( project.getDistributionManagement().getStatus() != null ) )
-        if ( !projectArtifact.isSnapshot() && status.compareTo( ArtifactStatus.DEPLOYED ) < 0 )
+        if ( !projectArtifact.isSnapshot() && ( status.compareTo( ArtifactStatus.DEPLOYED ) < 0 ) )
-        
+
-        
+
-            
+
-        
+
-        
+
+            getLogger().debug( "[buildInternal] Assembling model-inheritance: child=" + current.getId() + ", parent=" + previous.getId() );
+
+            getLogger().debug( "[buildInternal] Assembled model-inheritance for child=" + current.getId() );
+
-        
+
-        
+
-            MavenProject processedParent = (MavenProject) projectBuildCache.getCachedProject( rawParent );
-            
+            MavenProject processedParent = projectBuildCache.getCachedProject( rawParent );
+
-    
+
-     * 
+     *
-        
+
-        if ( parentSearchRepositories != null && !parentSearchRepositories.isEmpty() )
+        if ( ( parentSearchRepositories != null ) && !parentSearchRepositories.isEmpty() )
-        
+
-        if ( reposFromProfiles != null && !reposFromProfiles.isEmpty() )
+        if ( ( reposFromProfiles != null ) && !reposFromProfiles.isEmpty() )
-        if ( modelRepos != null && !modelRepos.isEmpty() )
+        if ( ( modelRepos != null ) && !modelRepos.isEmpty() )
-        
+
-        
+
-        
+
-        
+
-        
+
-        
+
-        
+
+
+            getLogger().debug( "[assembleLineage] Assembling MavenProject instance for: " + currentModel.getId() );
+
-            
+
-            
+
-            
+
-                
+
-            
+
-            
+
-        
+
-            
+
-            if ( existingActiveProfiles != null && !existingActiveProfiles.isEmpty() )
+            if ( ( existingActiveProfiles != null ) && !existingActiveProfiles.isEmpty() )
-            
+
-        
+
-        this.container = (PlexusContainer) context.get( PlexusConstants.PLEXUS_KEY );
+        container = (PlexusContainer) context.get( PlexusConstants.PLEXUS_KEY );
