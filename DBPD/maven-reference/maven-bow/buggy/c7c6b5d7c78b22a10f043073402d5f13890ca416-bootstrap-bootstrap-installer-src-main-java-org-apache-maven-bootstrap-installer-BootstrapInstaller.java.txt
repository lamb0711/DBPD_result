Refactored the bootstrapper to use a proper Model
and inheritance/dependency chains so repositories defined in models
are used for metadata too. Previously they got lost because of all
the cloning.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@420408 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.bootstrap.model.ModelReader;
+import org.apache.maven.bootstrap.model.Model;
-import java.io.BufferedReader;
-import java.io.InputStreamReader;
-import java.util.Arrays;
-import java.util.Properties;
-        ModelReader mavenCliModel = bootstrapper.getCachedModel( "org.apache.maven", "maven-cli" );
+        Model mavenCliModel = bootstrapper.getCachedModel( "org.apache.maven", "maven-cli" );
-    private void createInstallation( File dir, ModelReader mavenCliModel )
+    private void createInstallation( File dir, Model mavenCliModel )
-        for ( Iterator i = mavenCliModel.getDependencies().iterator(); i.hasNext(); )
+        for ( Iterator i = mavenCliModel.getAllDependencies().iterator(); i.hasNext(); )
