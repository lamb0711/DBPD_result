[MNG-4393] [regression] Parent POMs resolved from repository are parsed in strict mode

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@824842 13f79535-47bb-0310-9956-ffa450edef68

-            model = modelProcessor.read( modelSource.getInputStream(), options );
+            try
+            {
+                model = modelProcessor.read( modelSource.getInputStream(), options );
+            }
+            catch ( ModelParseException e )
+            {
+                if ( !strict || pomFile != null )
+                {
+                    throw e;
+                }
+
+                options = Collections.singletonMap( ModelProcessor.IS_STRICT, Boolean.FALSE );
+
+                model = modelProcessor.read( modelSource.getInputStream(), options );
+
+                problems.addWarning( "Malformed POM " + modelSource.getLocation() + ": " + e.getMessage(), e );
+            }
-            problems.addFatalError( "Non-parseable POM " + modelSource.getLocation() + ": " + e.getMessage(),
-                                    e.getLineNumber(), e.getColumnNumber(), e );
+            problems.addFatalError( "Non-parseable POM " + modelSource.getLocation() + ": " + e.getMessage(), e );
-            problems.addFatalError( "Non-readable POM " + modelSource.getLocation() + ": " + e.getMessage(), -1, -1, e );
+            problems.addFatalError( "Non-readable POM " + modelSource.getLocation() + ": " + e.getMessage(), e );
-                + ModelProblemUtils.toId( groupId, artifactId, version ) + ": " + e.getMessage(), -1, -1, e );
+                + ModelProblemUtils.toId( groupId, artifactId, version ) + ": " + e.getMessage(), e );
