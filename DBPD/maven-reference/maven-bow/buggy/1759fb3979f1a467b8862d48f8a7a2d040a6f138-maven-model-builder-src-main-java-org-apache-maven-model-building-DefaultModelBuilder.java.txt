o Consolidated all inputs of the model builder in the building request

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@793891 13f79535-47bb-0310-9956-ffa450edef68

-    public ModelBuildingResult build( File pomFile, ModelBuildingRequest request )
-        throws ModelBuildingException
-    {
-        return build( new FileModelSource( pomFile ), pomFile, request );
-    }
-
-    public ModelBuildingResult build( ModelSource modelSource, ModelBuildingRequest request )
-        throws ModelBuildingException
-    {
-        return build( modelSource, null, request );
-    }
-
-    private ModelBuildingResult build( ModelSource modelSource, File pomFile, ModelBuildingRequest request )
+    public ModelBuildingResult build( ModelBuildingRequest request )
-        ProfileActivationContext profileActivationContext = getProfileActivationContext( pomFile, request );
+        ProfileActivationContext profileActivationContext = getProfileActivationContext( request );
-        Model inputModel = readModel( modelSource, pomFile, request, problems );
+        Model inputModel = readModel( request.getModelSource(), request.getPomFile(), request, problems );
+        if ( modelSource == null )
+        {
+            if ( pomFile != null )
+            {
+                modelSource = new FileModelSource( pomFile );
+            }
+            else
+            {
+                throw new IllegalArgumentException( "neither model source nor input file are specified" );
+            }
+        }
+
-    private ProfileActivationContext getProfileActivationContext( File pomFile, ModelBuildingRequest request )
+    private ProfileActivationContext getProfileActivationContext( ModelBuildingRequest request )
-        context.setProjectDirectory( ( pomFile != null ) ? pomFile.getParentFile() : null );
+        context.setProjectDirectory( ( request.getPomFile() != null ) ? request.getPomFile().getParentFile() : null );
-        Model candidateModel = readModel( new FileModelSource( pomFile ), pomFile, request, problems );
+        Model candidateModel = readModel( null, pomFile, request, problems );
