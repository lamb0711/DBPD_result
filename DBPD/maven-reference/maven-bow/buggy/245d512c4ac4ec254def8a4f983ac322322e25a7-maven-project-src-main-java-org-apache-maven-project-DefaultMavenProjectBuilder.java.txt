PR: MNG-1110
differentiate between an artifact that is not found, and failure to obtain an artifact

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307034 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.ArtifactNotFoundException;
-        throws ProjectBuildingException, ArtifactResolutionException
+        throws ProjectBuildingException, ArtifactResolutionException, ArtifactNotFoundException
-        throws ProjectBuildingException, ArtifactResolutionException
+        throws ProjectBuildingException, ArtifactResolutionException, ArtifactNotFoundException
-                            getLogger().info(
-                                projectArtifact.getArtifactId() + ": updating metadata due to status of '" + status + "'" );
+                            getLogger().info( projectArtifact.getArtifactId() +
+                                ": updating metadata due to status of '" + status + "'" );
+                            catch ( ArtifactNotFoundException e )
+                            {
+                                getLogger().warn( "Error updating POM - not found. Removing local copy." );
+                                getLogger().debug( "Cause", e );
+                                file.delete();
+                                throw e;
+                            }
-                // TODO: a not found would be better vs other errors
-                // only not found should have the below behaviour
-//                throw new ProjectBuildingException( "Unable to find the POM in the repository", e );
-
+                throw new ProjectBuildingException( "Error getting the POM in the repository", e );
+            }
+            catch ( ArtifactNotFoundException e )
+            {
-    private Model createStubModel(Artifact projectArtifact)
+    private Model createStubModel( Artifact projectArtifact )
-        project.setRemoteArtifactRepositories( ProjectUtils.buildArtifactRepositories( model.getRepositories(),
-                                                                                       artifactRepositoryFactory,
-                                                                                       container ) );
-        
+        project.setRemoteArtifactRepositories(
+            ProjectUtils.buildArtifactRepositories( model.getRepositories(), artifactRepositoryFactory, container ) );
+
