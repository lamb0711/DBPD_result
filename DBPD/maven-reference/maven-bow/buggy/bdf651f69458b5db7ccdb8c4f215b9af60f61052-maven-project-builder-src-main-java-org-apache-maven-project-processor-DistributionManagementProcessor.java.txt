[MNG-2006] - Module SCM URL resolution -relative path. Brought scm path behavior inline with Maven 2

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@759354 13f79535-47bb-0310-9956-ffa450edef68

+import java.net.URI;
+import java.net.URISyntaxException;
+
-                  c.getArtifactId() );
+                  c.getArtifactId(), p );
-                copy( p.getDistributionManagement(), t.getDistributionManagement(), false, c.getArtifactId() );
+                copy( p.getDistributionManagement(), t.getDistributionManagement(), false, c.getArtifactId(), p );
-            copy( p.getDistributionManagement(), t.getDistributionManagement(), false, c.getArtifactId() );
+            copy( p.getDistributionManagement(), t.getDistributionManagement(), false, c.getArtifactId(), p );
-            copySite( t.getDistributionManagement().getSite(), t.getDistributionManagement().getSite(), false, c.getArtifactId() );
+            copySite( t.getDistributionManagement().getSite(), t.getDistributionManagement().getSite(), false, c.getArtifactId(), p );
-    private static void copy( DistributionManagement source, DistributionManagement target, boolean isChild,
-                              String artifactId )
+    private void copy( DistributionManagement source, DistributionManagement target, boolean isChild,
+                              String artifactId, Model parent )
-            copySite( source.getSite(), target.getSite(), isChild, artifactId );
+            copySite( source.getSite(), target.getSite(), isChild, artifactId, parent );
-    private static void copySite( Site source, Site target, boolean isChild, String artifactId )
+    private void copySite( Site source, Site target, boolean isChild, String artifactId, Model parent )
-            }
-
+            }         
-            {
-                target.setUrl( source.getUrl() + (source.getUrl().endsWith("/")  ? "" : "/") + artifactId );
+            {          	
+            	target.setUrl(normalizeUri(source.getUrl(), artifactId, parent));
