Add dependencies in war and add support of scope deps


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163502 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.repository.ArtifactRepository;
- * @parameter name="localRepository"
- *  type="org.apache.maven.artifact.repository.ArtifactRepository"
- *  required="true"
- *  validator=""
- *  expression="#localRepository"
- *  description=""
-    private ArtifactRepository localRepository;
-
-     * @todo properties 'war.bundle' and 'war.target.path'
-     * @todo copy classes to classes webapp directory
+     * @todo properties 'war.target.path'
-        request.getLog().info( "Assembling webapp " + project.getArtifactId() );
+        request.getLog().info( "Assembling webapp " + project.getArtifactId() + " in " + webappDirectory.getAbsolutePath() );
-            if ( "jar".equals( artifact.getType() ) )
+
+            if ( "jar".equals( artifact.getType() ) && Artifact.SCOPE_RUNTIME.equals( artifact.getScope() ) )
-                FileUtils.copyFileToDirectory( new File( localRepository.getBasedir(), artifact.toString() ) , libDirectory );
+                FileUtils.copyFileToDirectory( artifact.getFile() , libDirectory );
-                FileUtils.copyFileToDirectory( new File( localRepository.getBasedir(), artifact.toString() ) , tldDirectory );
+                FileUtils.copyFileToDirectory( artifact.getFile() , tldDirectory );
-        localRepository = (ArtifactRepository) request.getParameter( "localRepository" );
-
