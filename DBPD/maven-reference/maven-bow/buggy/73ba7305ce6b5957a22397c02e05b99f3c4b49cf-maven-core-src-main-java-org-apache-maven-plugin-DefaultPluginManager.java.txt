[MNG-1898] get rid of RealmDelegatingClassLoader, use the RealmClassLoader. Works with test case on MNG-1898 and MNG-1804.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@379425 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.MavenArtifactFilterManager;
-import org.apache.maven.artifact.resolver.filter.ExclusionSetFilter;
-import org.apache.maven.MavenArtifactFilterManager;
-import org.codehaus.classworlds.RealmDelegatingClassLoader;
-    private void checkRequiredMavenVersion( Plugin plugin, ArtifactRepository localRepository, List
-        remoteRepositories )
+    private void checkRequiredMavenVersion( Plugin plugin, ArtifactRepository localRepository, List remoteRepositories )
-            Set artifacts =
-                MavenMetadataSource.createArtifacts( artifactFactory, projectPlugin.getDependencies(), null, null, project );
+            Set artifacts = MavenMetadataSource.createArtifacts( artifactFactory, projectPlugin.getDependencies(), null,
+                                                                 null, project );
-                new RealmDelegatingClassLoader( mojoDescriptor.getPluginDescriptor().getClassRealm() ) );
+                mojoDescriptor.getPluginDescriptor().getClassRealm().getClassLoader() );
-            
+
-            Set resolved =  result.getArtifacts();
+            Set resolved = result.getArtifacts();
-        artifactFilter =  MavenArtifactFilterManager.createStandardFilter();
+        artifactFilter = MavenArtifactFilterManager.createStandardFilter();
