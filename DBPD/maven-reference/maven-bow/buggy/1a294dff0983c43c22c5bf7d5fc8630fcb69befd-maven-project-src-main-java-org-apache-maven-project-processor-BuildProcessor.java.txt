Fixed some problems with inheritance of resources.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@757965 13f79535-47bb-0310-9956-ffa450edef68

-                    
-            copyResources(build, t.getBuild());
-            copyResources(p.getBuild(), t.getBuild());
+            copyResources(build, t.getBuild());           
+            copyResources(p.getBuild(), t.getBuild());                   
+
+     
-        if(target.getResources().isEmpty())
-        {
-            for(Resource resource : source.getResources())
-            {
-                Resource r = new Resource();
-                r.setDirectory( resource.getDirectory());
-                r.setFiltering( resource.isFiltering() );
-                r.setMergeId( resource.getMergeId() );
-                r.setTargetPath( resource.getTargetPath() );
-                r.setExcludes( new ArrayList<String>(resource.getExcludes()) );
-                r.setIncludes( new ArrayList<String>(resource.getIncludes()) );
-                target.getResources().add( r );
-            }           
-        }
-        
-        if(target.getTestResources().isEmpty())
-        {
-            for(Resource resource : source.getTestResources())
-            {
-                Resource r = new Resource();
-                r.setDirectory( resource.getDirectory());
-                r.setFiltering( resource.isFiltering() );
-                r.setMergeId( resource.getMergeId() );
-                r.setTargetPath( resource.getTargetPath() );
-                r.setExcludes( new ArrayList<String>(resource.getExcludes()) );
-                r.setIncludes( new ArrayList<String>(resource.getIncludes()) );
-                target.getTestResources().add( r );
-            }           
-        } 
+
-        }    
-
+        }  
+        
+        if(!source.getResources().isEmpty())
+        {
+            List<Resource> resources = new ArrayList<Resource>();
+            for(Resource resource : source.getResources())
+            {
+                Resource r = new Resource();
+                r.setDirectory( resource.getDirectory());
+                r.setFiltering( resource.isFiltering() );
+                r.setMergeId( resource.getMergeId() );
+                r.setTargetPath( resource.getTargetPath() );
+                r.setExcludes( new ArrayList<String>(resource.getExcludes()) );
+                r.setIncludes( new ArrayList<String>(resource.getIncludes()) );
+                resources.add( r );
+            }           
+            target.setResources( resources );
+        }
+        
+        if(!source.getTestResources().isEmpty())
+        {
+            List<Resource> resources = new ArrayList<Resource>();
+            for(Resource resource : source.getTestResources())
+            {
+                Resource r = new Resource();
+                r.setDirectory( resource.getDirectory());
+                r.setFiltering( resource.isFiltering() );
+                r.setMergeId( resource.getMergeId() );
+                r.setTargetPath( resource.getTargetPath() );
+                r.setExcludes( new ArrayList<String>(resource.getExcludes()) );
+                r.setIncludes( new ArrayList<String>(resource.getIncludes()) );
+                resources.add( r );
+            }   
+            target.setTestResources( resources );
+        } 
