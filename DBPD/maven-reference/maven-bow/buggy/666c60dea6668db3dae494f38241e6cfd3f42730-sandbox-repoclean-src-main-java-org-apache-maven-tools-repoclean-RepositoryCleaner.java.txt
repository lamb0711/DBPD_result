o Fixed, pending changes to DefaultRepositoryLayout as outlined in MNG-321

PR: MNG-332


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163990 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.tools.repoclean.report.ReportWriteException;
+import org.apache.maven.tools.repoclean.report.Reporter;
+    private ArtifactRepositoryLayout bridgingLayout;
+
-
+        
+                            
+                            File bridgedTargetPom = new File( targetRepositoryBase, bridgingLayout.pathOfMetadata( pom ) );
+                                
+                                bridgePomLocations( targetPom, bridgedTargetPom, artifactReporter );
+    private void bridgePomLocations( File targetPom, File bridgedTargetPom, Reporter reporter ) throws IOException, ReportWriteException
+    {
+        if(targetPom.equals(bridgedTargetPom))
+        {
+            reporter.warn("Cannot create legacy-compatible copy of POM at: " + targetPom + "; legacy-compatible path is the same as the converted POM itself."); 
+        }
+        
+        FileInputStream in = null;
+        FileOutputStream out = null;
+        
+        try
+        {
+            in = new FileInputStream(targetPom);
+            out = new FileOutputStream(bridgedTargetPom);
+            
+            IOUtil.copy(in, out);
+        }
+        finally
+        {
+            IOUtil.close(in);
+            IOUtil.close(out);
+        }
+    }
+
