use a regex to parse for more consistency


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163768 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+    private static final Pattern VERSION_FILE_PATTERN = Pattern.compile( "^(.*)-([0-9]{8}.[0-9]{6})-([0-9]+)$" );
+
-/* TODO: try this
-        if( version.matches( "/^(.*)-([0-9]{8}.[0-9]{6})-([0-9]+)$/" ))
+        Matcher matcher = VERSION_FILE_PATTERN.matcher( version );
+        if ( matcher.matches() )
-
+            timestamp = matcher.group( 2 );
+            buildNumber = Integer.valueOf( matcher.group( 3 ) ).intValue();
-*/
-
-        int index = version.lastIndexOf( "-" );
-        if ( version.indexOf( "SNAPSHOT" ) >= 0 || index < 0 )
+        else
-            return;
-        }
-
-        timestamp = version.substring( 0, index );
-        buildNumber = Integer.valueOf( version.substring( index + 1 ) ).intValue();
-        index = timestamp.lastIndexOf( "-" );
-        if ( index >= 0 )
-        {
-            // ignore starting version part, will be prepended later
-            timestamp = timestamp.substring( index + 1 );
