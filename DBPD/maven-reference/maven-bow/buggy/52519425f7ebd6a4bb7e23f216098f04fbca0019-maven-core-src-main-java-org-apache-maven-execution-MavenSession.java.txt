o Restored reactor failure behaviors

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@792111 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collection;
+import java.util.HashSet;
-    
+
+    private ProjectDependencyGraph projectDependencyGraph;
+
+    private Collection<String> blackListedProjects;
+
+    public void setProjectDependencyGraph( ProjectDependencyGraph projectDependencyGraph )
+    {
+        this.projectDependencyGraph = projectDependencyGraph;
+    }
+
+    public String getReactorFailureBehavior()
+    {
+        return request.getReactorFailureBehavior();
+    }
+
+    public boolean isBlackListed( MavenProject project )
+    {
+        return blackListedProjects != null && blackListedProjects.contains( getId( project ) );
+    }
+
+    public void blackList( MavenProject project )
+    {
+        if ( blackListedProjects == null )
+        {
+            blackListedProjects = new HashSet<String>();
+        }
+
+        if ( blackListedProjects.add( getId( project ) ) && projectDependencyGraph != null )
+        {
+            for ( MavenProject downstreamProject : projectDependencyGraph.getDownstreamProjects( project, true ) )
+            {
+                blackListedProjects.add( getId( downstreamProject ) );
+            }
+        }
+    }
+
+    private String getId( MavenProject project )
+    {
+        return project.getGroupId() + ':' + project.getArtifactId() + ':' + project.getVersion();
+    }
+
