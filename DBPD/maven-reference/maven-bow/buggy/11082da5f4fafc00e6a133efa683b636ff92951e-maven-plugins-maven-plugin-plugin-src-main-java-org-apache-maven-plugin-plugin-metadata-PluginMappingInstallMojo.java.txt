Fixing bootstrap.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@219807 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.metadata.InvalidRepositoryMetadataException;
-            getRepositoryMetadataManager().resolveLocally( metadata, getLocalRepository() );
+            try
+            {
+                getRepositoryMetadataManager().resolveLocally( metadata, getLocalRepository() );
+            }
+            catch ( InvalidRepositoryMetadataException e )
+            {
+                getRepositoryMetadataManager().purgeLocalCopy( metadata, getLocalRepository() );
+            }
-            updatePluginMap( metadata );
+            boolean shouldUpdate = updatePluginMap( metadata );
-            getRepositoryMetadataManager().install( metadata, getLocalRepository() );
+            if ( shouldUpdate )
+            {
+                getRepositoryMetadataManager().install( metadata, getLocalRepository() );
+            }
