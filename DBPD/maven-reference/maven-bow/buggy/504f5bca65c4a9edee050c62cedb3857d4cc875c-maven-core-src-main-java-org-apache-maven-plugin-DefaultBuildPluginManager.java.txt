[MNG-4186] Provide an exact pointer to documentation specific to each known exception that can occur

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@827792 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.resolver.ArtifactResolutionException;
-        ClassRealm pluginRealm = getPluginRealm( session, mojoDescriptor.getPluginDescriptor() );            
+        ClassRealm pluginRealm;
+        try
+        {
+            pluginRealm = getPluginRealm( session, mojoDescriptor.getPluginDescriptor() );
+        }
+        catch ( PluginResolutionException e )
+        {
+            throw new PluginExecutionException( mojoExecution, project, e );
+        }
+
+        catch ( NoClassDefFoundError e )
+        {
+            ByteArrayOutputStream os = new ByteArrayOutputStream( 1024 );
+            PrintStream ps = new PrintStream( os );
+            ps.println( "A required class was missing while executing " + mojoDescriptor.getId() + ": "
+                + e.getMessage() );
+            pluginRealm.display( ps );
+
+            Exception wrapper = new PluginContainerException( mojoDescriptor, pluginRealm, os.toString(), e );
+
+            throw new PluginExecutionException( mojoExecution, project, wrapper );
+        }
-            ps.println( "A linkage error occured while executing " + mojoDescriptor.getId() );
-            ps.println( e );
+            ps.println( "An API incompatibility was encountered while executing " + mojoDescriptor.getId() + ": "
+                + e.getClass().getName() + ": " + e.getMessage() );
-            throw new PluginExecutionException( mojoExecution, project, os.toString(), e );
+            Exception wrapper = new PluginContainerException( mojoDescriptor, pluginRealm, os.toString(), e );
+
+            throw new PluginExecutionException( mojoExecution, project, wrapper );
-            ps.println( "A type incompatibility occured while executing " + mojoDescriptor.getId() );
-            ps.println( e );
+            ps.println( "A type incompatibility occured while executing " + mojoDescriptor.getId() + ": "
+                + e.getMessage() );
-     * @throws ArtifactResolutionException 
+     * @throws PluginResolutionException 
-        throws PluginManagerException
+        throws PluginResolutionException, PluginManagerException
-        Plugin plugin = pluginDescriptor.getPlugin();
-
-        try
-        {
-            mavenPluginManager.setupPluginRealm( pluginDescriptor, session,
-                                                 session.getCurrentProject().getClassRealm(), null );
-        }
-        catch ( PluginResolutionException e )
-        {
-            throw new PluginManagerException( plugin, e.getMessage(), e );
-        }
+        mavenPluginManager.setupPluginRealm( pluginDescriptor, session, session.getCurrentProject().getClassRealm(),
+                                             null );
