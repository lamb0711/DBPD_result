Replaced interpolator code.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@694907 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.builder.PomClassicTransformer;
-import org.apache.maven.project.interpolation.ModelInterpolationException;
-import org.apache.maven.project.interpolation.ModelInterpolator;
+import org.apache.maven.extension.ModelInterpolationException;
+import org.apache.maven.shared.model.InterpolatorProperty;
-    private ModelInterpolator modelInterpolator;
-
-    protected DefaultBuildExtensionScanner( ExtensionManager extensionManager,
-                                            MavenProjectBuilder projectBuilder,
-                                            ModelLineageBuilder modelLineageBuilder,
-                                            ModelInterpolator modelInterpolator,
-                                            Logger logger )
-    {
-        this.extensionManager = extensionManager;
-        this.projectBuilder = projectBuilder;
-        this.modelLineageBuilder = modelLineageBuilder;
-        this.modelInterpolator = modelInterpolator;
-        this.logger = logger;
-    }
-
-                model = modelInterpolator.interpolate( model, modelPom.getParentFile(), config, getLogger().isDebugEnabled() );
+                List<InterpolatorProperty> interpolatorProperties = new ArrayList<InterpolatorProperty>();
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( config.getExecutionProperties()));
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( config.getUserProperties()));
+                model = PomClassicTransformer.interpolateModel( model, interpolatorProperties, modelPom.getParentFile());
+                /*
+                try {
+                    model = modelInterpolator.interpolate( model, modelPom.getParentFile(), config, getLogger().isDebugEnabled() );
+                } catch (ModelInterpolationException e) {
+                    e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
+                }
+                */
-        catch ( ModelInterpolationException e )
+        catch ( IOException e )
-                + " prior to scanning for extensions.", pom, e );
+                + " prior to scanning for extensions.", pom, new ModelInterpolationException(e.getMessage()) );
+
