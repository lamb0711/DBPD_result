PR: MNG-505
use comparable versions in ranges

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@219630 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.versioning.InvalidVersionSpecificationException;
+        throws ProjectBuildingException
-                Artifact artifact = artifactFactory.createDependencyArtifact( d.getGroupId(), d.getArtifactId(),
-                                                                              new VersionRange( d.getVersion() ),
-                                                                              d.getType(), d.getScope() );
-
-                map.put( d.getManagementKey(), artifact );
+                try
+                {
+                    VersionRange versionRange = VersionRange.createFromVersionSpec( d.getVersion() );
+                    Artifact artifact = artifactFactory.createDependencyArtifact( d.getGroupId(), d.getArtifactId(),
+                                                                                  versionRange, d.getType(),
+                                                                                  d.getScope() );
+                    map.put( d.getManagementKey(), artifact );
+                }
+                catch ( InvalidVersionSpecificationException e )
+                {
+                    throw new ProjectBuildingException( "Unable to parse dependency version", e );
+                }
-            Model model = modelReader.read( reader );
-            return model;
+            return modelReader.read( reader );
+        throws ProjectBuildingException
-        return MavenMetadataSource.createArtifacts( artifactFactory, dependencies, null, null );
+        try
+        {
+            return MavenMetadataSource.createArtifacts( artifactFactory, dependencies, null, null );
+        }
+        catch ( InvalidVersionSpecificationException e )
+        {
+            throw new ProjectBuildingException( "Unable to parse dependency version", e );
+        }
+        throws ProjectBuildingException
-            Artifact artifact = artifactFactory.createPluginArtifact( p.getGroupId(), p.getArtifactId(),
-                                                                      new VersionRange( version ) );
+            Artifact artifact = null;
+            try
+            {
+                artifact = artifactFactory.createPluginArtifact( p.getGroupId(), p.getArtifactId(),
+                                                                 VersionRange.createFromVersionSpec( version ) );
+            }
+            catch ( InvalidVersionSpecificationException e )
+            {
+                throw new ProjectBuildingException( "Unable to parse plugin version", e );
+            }
+
-        Model superModel = readModel( url );
-
-        return superModel;
+        return readModel( url );
