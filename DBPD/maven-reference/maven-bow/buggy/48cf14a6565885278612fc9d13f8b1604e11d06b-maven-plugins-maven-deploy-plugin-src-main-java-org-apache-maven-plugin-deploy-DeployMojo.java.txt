PR: MNG-378
Only deploy the release information at the point of release

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@177934 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.metadata.ReleaseArtifactMetadata;
+ * Deploys an artifact to remote repository.
- * @description deploys an artifact to remote repository
+    /**
+     * @parameter expression="${updateReleaseInfo}"
+     */
+    private boolean updateReleaseInfo = false;
+
+        if ( updateReleaseInfo )
+        {
+            ReleaseArtifactMetadata metadata = new ReleaseArtifactMetadata( artifact );
+            metadata.setVersion( artifact.getVersion() );
+            artifact.addMetadata( metadata );
+        }
+
-            if ( !isPomArtifact )
+            if ( isPomArtifact )
-                deployer.deploy( buildDirectory, finalName, artifact, deploymentRepository, localRepository );
+                deployer.deploy( pom, artifact, deploymentRepository, localRepository );
-                deployer.deploy( pom, artifact, deploymentRepository, localRepository );
+                deployer.deploy( buildDirectory, finalName, artifact, deploymentRepository, localRepository );
