Replaced old build-plan mess with a single recursive plan instance that tracks direct invocation forks as well as lifecycle forks. All unit tests run, and I'm running integration tests now, to see if this fixes it0013.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@541938 13f79535-47bb-0310-9956-ffa450edef68

-    public static String toString( MojoBinding mojoBinding )
+    public static String toString( final MojoBinding mojoBinding )
-            + ( mojoBinding.getVersion() == null ? "" : mojoBinding.getVersion() + ":" ) + mojoBinding.getGoal();
+                        + ( mojoBinding.getVersion() == null ? "" : mojoBinding.getVersion() + ":" )
+                        + mojoBinding.getGoal();
+    }
+
+    public static String createMojoBindingKey( final MojoBinding mojoBinding, final boolean considerExecutionId )
+    {
+        String key = mojoBinding.getGroupId() + ":" + mojoBinding.getArtifactId() + ":" + mojoBinding.getGoal();
+
+        if ( considerExecutionId )
+        {
+            key += ":" + mojoBinding.getExecutionId();
+        }
+
+        return key;
+    }
+
+    public static String createPluginKey( final MojoBinding binding )
+    {
+        String result = binding.getGroupId() + ":" + binding.getArtifactId();
+
+        if ( binding.getVersion() != null )
+        {
+            result += ":" + binding.getVersion();
+        }
+
+        return result;
