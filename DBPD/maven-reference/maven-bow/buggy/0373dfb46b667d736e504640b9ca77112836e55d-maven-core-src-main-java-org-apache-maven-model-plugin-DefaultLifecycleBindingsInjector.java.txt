o Extended lifecycle injector to collect model problems

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@800353 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.building.ModelBuildingProblems;
+import org.apache.maven.model.building.ModelProblem;
+import org.apache.maven.model.building.ModelProblemUtils;
-    public void injectLifecycleBindings( Model model )
+    public void injectLifecycleBindings( Model model, ModelBuildingProblems problems )
-        // TODO: A bad packaging is a model error, we need to report this as such!
-
-        if ( defaultPlugins != null && !defaultPlugins.isEmpty() )
+        if ( defaultPlugins == null )
+        {
+            String source = ModelProblemUtils.toSourceHint( model );
+            problems.add( new ModelProblem( "Invalid POM " + source + ": Unknown packaging: " + packaging,
+                                            ModelProblem.Severity.ERROR, source ) );
+        }
+        else if ( !defaultPlugins.isEmpty() )
