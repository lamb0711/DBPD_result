o Tweaked error message formatting

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@829065 13f79535-47bb-0310-9956-ffa450edef68

-            if ( exceptionMessage == null )
-            {
-                exceptionMessage = "";
-            }
-
-                        exceptionMessage += ": " + longMessage;
+                        exceptionMessage = join( exceptionMessage, longMessage );
+            if ( StringUtils.isEmpty( exceptionMessage ) )
+            {
+                exceptionMessage = t.getClass().getSimpleName();
+            }
+
-                if ( fullMessage.length() > 0 )
-                {
-                    fullMessage += ": ";
-                }
-                fullMessage += "Unknown host " + exceptionMessage;
+                fullMessage = join( fullMessage, "Unknown host " + exceptionMessage );
-                if ( fullMessage.length() > 0 )
-                {
-                    fullMessage += ": ";
-                }
-                fullMessage += exceptionMessage;
+                fullMessage = join( fullMessage, exceptionMessage );
-        if ( StringUtils.isEmpty( fullMessage ) && exception != null )
+        return fullMessage.trim();
+    }
+
+    private String join( String message1, String message2 )
+    {
+        String message = "";
+
+        if ( StringUtils.isNotEmpty( message1 ) )
-            fullMessage = exception.toString();
+            message = message1.trim();
-        return fullMessage.trim();
+        if ( StringUtils.isNotEmpty( message2 ) )
+        {
+            if ( StringUtils.isNotEmpty( message ) )
+            {
+                if ( message.endsWith( "." ) || message.endsWith( "!" ) || message.endsWith( ":" ) )
+                {
+                    message += " ";
+                }
+                else
+                {
+                    message += ": ";
+                }
+            }
+
+            message += message2;
+        }
+
+        return message;
