Add build method that can disable distributionManagement status for file that come from repository

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@312840 13f79535-47bb-0310-9956-ffa450edef68

-        MavenProject project = buildFromSourceFile( projectDescriptor, localRepository, profileManager );
+        MavenProject project = build( projectDescriptor, localRepository, profileManager );
-        return buildFromSourceFile( projectDescriptor, localRepository, profileManager );
+        return buildFromSourceFile( projectDescriptor, localRepository, profileManager, true );
+    }
+
+    public MavenProject build( File projectDescriptor, ArtifactRepository localRepository,
+                               ProfileManager profileManager, boolean checkDistributionManagementStatus )
+        throws ProjectBuildingException
+    {
+        return buildFromSourceFile( projectDescriptor, localRepository, profileManager,
+                                    checkDistributionManagementStatus );
-                                              ProfileManager profileManager )
+                                              ProfileManager profileManager,
+                                              boolean checkDistributionManagementStatus )
-        if ( project.getDistributionManagement() != null && project.getDistributionManagement().getStatus() != null )
+        if ( checkDistributionManagementStatus )
-            throw new ProjectBuildingException( project.getId(), 
-                "Invalid project file: distribution status must not be specified for a project outside of the repository" );
+            if ( project.getDistributionManagement() != null && project.getDistributionManagement().getStatus() != null )
+            {
+                throw new ProjectBuildingException( project.getId(), 
+                    "Invalid project file: distribution status must not be specified for a project outside of the repository" );
+            }
