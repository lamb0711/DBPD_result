Resolving: MNG-767, MNG-768

o We should have a viable offline mode now. Plugin sensitivity updates to follow.

o See it0069 and it1014 for offline mode tests.

o Brett, building maven-plugins in offline mode with org/apache/maven/plugin/* removed will now give a nice error message. :)



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@291124 13f79535-47bb-0310-9956-ffa450edef68

-            catch ( PlexusContainerException e )
-            {
-                throw new PluginManagerException(
-                    "Error occurred in the artifact container attempting to download plugin " + plugin.getKey(), e );
-            }
-        throws ArtifactResolutionException, PlexusContainerException
+        throws ArtifactResolutionException, PluginManagerException
+        
+        if ( !pluginArtifact.isResolved() )
+        {
+            throw new PluginContainerException( plugin, "Cannot resolve artifact for plugin." );
+        }
-        PlexusContainer child = container.createChildContainer( plugin.getKey(),
-                                                                Collections.singletonList( pluginArtifact.getFile() ),
-                                                                Collections.EMPTY_MAP,
-                                                                Collections.singletonList( pluginCollector ) );
+        PlexusContainer child;
+        try
+        {
+            child = container.createChildContainer( plugin.getKey(),
+                                                    Collections.singletonList( pluginArtifact.getFile() ),
+                                                    Collections.EMPTY_MAP,
+                                                    Collections.singletonList( pluginCollector ) );
+        }
+        catch ( PlexusContainerException e )
+        {
+            throw new PluginContainerException( plugin, "Failed to create plugin container.", e );
+        }
