PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.handler.ArtifactHandler;
+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
+    // TODO: remove, it doesn't know the ones from the plugins
+    private ArtifactHandlerManager artifactHandlerManager;
+
-    public Artifact createArtifact( String groupId, String artifactId, String version, String scope, String type,
-                                    String classifier, String inheritedScope )
+    private Artifact createArtifact( String groupId, String artifactId, String version, String scope, String type,
+                                     String classifier, String inheritedScope )
-        DefaultArtifact artifact = new DefaultArtifact( groupId, artifactId, version, desiredScope, type, classifier );
+        ArtifactHandler handler = artifactHandlerManager.getArtifactHandler( type );
+        DefaultArtifact artifact = new DefaultArtifact( groupId, artifactId, version, desiredScope, type, classifier,
+                                                        handler );
