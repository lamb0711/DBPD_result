MNG-5677 hooks to allow fine-grained cache management

Also fixed broken cache #flush() and missing #dispose() in
couple of places.

Signed-off-by: Igor Fedorenko <igor@ifedorenko.com>

-                    pluginArtifactsCache.register( project, recordArtifacts );
+                    pluginArtifactsCache.register( project, cacheKey, recordArtifacts );
-            pluginArtifactsCache.register( project, recordArtifacts );
+            pluginArtifactsCache.register( project, cacheKey, recordArtifacts );
+            
+            final ExtensionRealmCache.Key extensionKey = extensionRealmCache.createKey( artifacts );
-            ExtensionRealmCache.CacheRecord recordRealm = extensionRealmCache.get( artifacts );
+            ExtensionRealmCache.CacheRecord recordRealm = extensionRealmCache.get( extensionKey );
-                recordRealm = extensionRealmCache.put( artifacts, extensionRealm, extensionDescriptor );
+                recordRealm = extensionRealmCache.put( extensionKey, extensionRealm, extensionDescriptor );
-            extensionRealmCache.register( project, recordRealm );
+            extensionRealmCache.register( project, extensionKey, recordRealm );
-        ProjectRealmCache.CacheRecord record = projectRealmCache.get( extensionRealms );
+        ProjectRealmCache.Key projectRealmKey = projectRealmCache.createKey( extensionRealms );
+
+        ProjectRealmCache.CacheRecord record = projectRealmCache.get( projectRealmKey );
-            record = projectRealmCache.put( extensionRealms, projectRealm, extensionArtifactFilter );
+            record = projectRealmCache.put( projectRealmKey, projectRealm, extensionArtifactFilter );
-        projectRealmCache.register( project, record );
+        projectRealmCache.register( project, projectRealmKey, record );
