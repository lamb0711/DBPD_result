Removing maven-build-context, and replacing it with caching aspects for model-lineage stuff and project instances. Still needs caching for artifact resolution, and I have an aspect for this too, but it's not enabled yet, since it's still buggy.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@595215 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.context.BuildContextManager;
-    private BuildContextManager buildContextManager;
-
-                        // NEW: To support forked execution under the new lifecycle architecture, the current project
-                        // is stored in a build-context managed data type. This context type holds the current project
-                        // for the fork being executed, plus a stack of projects used in the ancestor execution contexts.
-                        LifecycleExecutionContext ctx = new LifecycleExecutionContext( rootProject );
-                        ctx.store( buildContextManager );
+                        session.setCurrentProject( rootProject );
+                            session,
-                        // clean up the execution context, so we don't pollute for future project-executions.
-                        LifecycleExecutionContext.delete( buildContextManager );
-
+                        session.setCurrentProject( null );
-                            LifecycleExecutionContext ctx = new LifecycleExecutionContext( currentProject );
-                            ctx.store( buildContextManager );
+                            session.setCurrentProject( currentProject );
+                                session,
-                            LifecycleExecutionContext.delete( buildContextManager );
-
+                            session.setCurrentProject( null );
+                                       final MavenSession session,
-                project );
+                project,
+                session );
-        // NEW: Retrieve/use the current project stored in the execution context, for consistency.
-        LifecycleExecutionContext ctx = LifecycleExecutionContext.read( buildContextManager );
-        MavenProject project = ctx.getCurrentProject();
+        MavenProject project = session.getCurrentProject();
-                    project );
+                    project,
+                    session );
+            session,
-            project );
+            project,
+            session );
