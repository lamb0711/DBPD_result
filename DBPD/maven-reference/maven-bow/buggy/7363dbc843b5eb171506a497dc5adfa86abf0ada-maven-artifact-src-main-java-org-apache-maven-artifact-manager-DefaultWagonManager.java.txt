PR: MNG-145
Implement and document repository download mirrors

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168292 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.wagon.repository.Repository;
-    // TODO: proxies and authentication are via settings, and should come in via an alternate method - perhaps attached to ArtifactRepository before the method is called (so AR would be composed of WR, not inherit it)
+    // TODO: proxies, authentication and mirrors are via settings, and should come in via an alternate method - perhaps
+    // attached to ArtifactRepository before the method is called (so AR would be composed of WR, not inherit it)
+    private Map mirrors = new HashMap();
+
+        String protocol = repository.getProtocol();
+
-            wagon = getWagon( repository.getProtocol() );
+            wagon = getWagon( protocol );
-            wagon.connect( repository, getAuthenticationInfo( repository.getId() ),
-                           getProxy( repository.getProtocol() ) );
+            wagon.connect( repository, getAuthenticationInfo( repository.getId() ), getProxy( protocol ) );
+        String protocol = repository.getProtocol();
-            wagon = getWagon( repository.getProtocol() );
+            wagon = getWagon( protocol );
-            wagon.connect( repository, getAuthenticationInfo( repository.getId() ),
-                           getProxy( repository.getProtocol() ) );
+            Repository mirror = getMirror( repository.getId() );
+            if ( mirror != null )
+            {
+                repository = repository.createMirror( mirror );
+            }
+
+            wagon.connect( repository, getAuthenticationInfo( repository.getId() ), getProxy( protocol ) );
+    private Repository getMirror( String mirrorOf )
+    {
+        return (Repository) mirrors.get( mirrorOf );
+    }
+
+
+    public void addMirror( String id, String mirrorOf, String url )
+    {
+        Repository mirror = new Repository( id, url );
+
+        mirrors.put( mirrorOf, mirror );
+    }
