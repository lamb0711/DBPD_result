PR: MNG-443
inherited URLs should always append the artifact ID, regardless of trailing slash


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@179721 13f79535-47bb-0310-9956-ffa450edef68

-            if ( parent.getUrl() != null && parent.getUrl().endsWith( "/" ) )
+            if ( parent.getUrl() != null )
-                child.setUrl( parent.getUrl() + child.getArtifactId() + "/" );
+                child.setUrl( appendPath( parent.getUrl(), child.getArtifactId() ) );
-                if ( parentScm.getConnection().endsWith( "/" ) )
-                {
-                    childScm.setConnection( parentScm.getConnection() + child.getArtifactId() + "/" );
-                }
-                else
-                {
-                    childScm.setConnection( parentScm.getConnection() );
-                }
+                childScm.setConnection( appendPath( parentScm.getConnection(), child.getArtifactId() ) );
-                if ( parentScm.getDeveloperConnection().endsWith( "/" ) )
-                {
-                    childScm.setDeveloperConnection( parentScm.getDeveloperConnection() + child.getArtifactId() + "/" );
-                }
-                else
-                {
-                    childScm.setDeveloperConnection( parentScm.getDeveloperConnection() );
-                }
+                childScm.setDeveloperConnection( appendPath( parentScm.getDeveloperConnection(), child.getArtifactId() ) );
-                if ( parentScm.getUrl().endsWith( "/" ) )
-                {
-                    childScm.setUrl( parentScm.getUrl() + child.getArtifactId() + "/" );
-                }
-                else
-                {
-                    childScm.setUrl( parentScm.getUrl() );
-                }
+                childScm.setUrl( appendPath( parentScm.getUrl(), child.getArtifactId() ) );
-                    if ( site.getUrl() != null && site.getUrl().endsWith( "/" ) )
+                    if ( site.getUrl() != null )
-                        site.setUrl( site.getUrl() + child.getArtifactId() + "/" );
+                        site.setUrl( appendPath( site.getUrl(), child.getArtifactId() ) );
-
+    private static String appendPath( String url, String path )
+    {
+        if ( url.endsWith( "/" ) )
+        {
+            return url + path;
+        }
+        else
+        {
+            return url + "/" + path;
+        }
+    }
