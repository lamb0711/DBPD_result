[MNG-2174] Profile bug dealing with dependencies : [MNG-3877] Reporting directory base aligned.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@742594 13f79535-47bb-0310-9956-ffa450edef68

+        List<DomainModel> domainModels = new ArrayList<DomainModel>();
+        domainModels.add( domainModel );
-        Collection<ModelContainer> profileContainers = profileContext.getActiveProfiles();
-        //get mixin
-        List<DomainModel> domainModels = new ArrayList<DomainModel>();
-        domainModels.add( domainModel );
+        Collection<ModelContainer> profileContainers = profileContext.getActiveProfiles();
+
+        for(ModelContainer mc : profileContainers)
+        {
+            List<ModelProperty> transformed = new ArrayList<ModelProperty>();
+            transformed.add(new ModelProperty(ProjectUri.xUri, null));
+            for(ModelProperty mp : mc.getProperties())
+            {
+                if(mp.getUri().startsWith(ProjectUri.Profiles.Profile.xUri) && !mp.getUri().equals(ProjectUri.Profiles.Profile.id)
+                        && !mp.getUri().startsWith(ProjectUri.Profiles.Profile.Activation.xUri) )
+                {
+                    transformed.add(new ModelProperty(mp.getUri().replace(ProjectUri.Profiles.Profile.xUri, ProjectUri.xUri),
+                            mp.getResolvedValue()));
+                }
+            }
+            domainModels.add(new PomClassicDomainModel(transformed));
+        }
