Restore complete list of plugin artifacts in PluginDescriptor for use in ${plugin.artifacts}.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@633239 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
-        populateRealm( id, realm, extensionArtifact, artifacts );
+        populateRealm( id, realm, extensionArtifact, artifacts, null );
-                                          Collection artifacts )
+                                          Collection artifacts,
+                                          ArtifactFilter coreArtifactFilter )
-        populateRealm( id, realm, pluginArtifact, artifacts );
+        populateRealm( id, realm, pluginArtifact, artifacts, coreArtifactFilter );
-                                Collection artifacts )
+                                Collection artifacts,
+                                ArtifactFilter coreArtifactFilter )
-            try
+
+            if ( ( coreArtifactFilter == null ) || coreArtifactFilter.include( artifact ) )
-                realm.addURL( artifact.getFile().toURI().toURL() );
+                try
+                {
+                    realm.addURL( artifact.getFile().toURI().toURL() );
+                }
+                catch ( MalformedURLException e )
+                {
+                    throw new RealmManagementException( id, artifact, "Invalid URL for artifact file: "
+                                                                      + artifact.getFile()
+                                                                      + " to be used in realm: " + id
+                                                                      + ".", e );
+                }
-            catch ( MalformedURLException e )
+            else
-                throw new RealmManagementException( id, artifact, "Invalid URL for artifact file: "
-                                                                  + artifact.getFile()
-                                                                  + " to be used in realm: " + id
-                                                                  + ".", e );
+                logger.debug( "Excluding artifact: " + artifact.getArtifactId() + " from plugin realm; it's already included in Maven's core." );
