o Distinguished different severity levels of model problems, allowing warnings to be collected but still have the build request succeed

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@790109 13f79535-47bb-0310-9956-ffa450edef68

-        if ( !problems.isEmpty() )
+        if ( hasErrors( problems ) )
+        result.setProblems( problems );
+
-                                            modelSource.getLocation(), e ) );
+                                            ModelProblem.Severity.FATAL, modelSource.getLocation(), e ) );
-                                            modelSource.getLocation(), e ) );
+                                            ModelProblem.Severity.FATAL, modelSource.getLocation(), e ) );
+    private boolean hasErrors( List<ModelProblem> problems )
+    {
+        if ( problems != null )
+        {
+            for ( ModelProblem problem : problems )
+            {
+                if ( ModelProblem.Severity.ERROR.compareTo( problem.getSeverity() ) >= 0 )
+                {
+                    return true;
+                }
+            }
+        }
+
+        return false;
+    }
+
-                problems.add( new ModelProblem( "Invalid POM " + source + ": " + result.getMessage( i ), source ) );
+                problems.add( new ModelProblem( "Invalid POM " + source + ": " + result.getMessage( i ),
+                                                ModelProblem.Severity.WARNING, source ) );
-                + e.getProfile().getId() + ": " + e.getMessage(), "(external profiles)", e ) );
+                + e.getProfile().getId() + ": " + e.getMessage(), ModelProblem.Severity.ERROR, "(external profiles)", e ) );
-                                            toSourceHint( model ), e ) );
+                                            ModelProblem.Severity.ERROR, toSourceHint( model ), e ) );
-                    + toSourceHint( model ) + ": " + e.getMessage(), toSourceHint( model ), e ) );
+                    + toSourceHint( model ) + ": " + e.getMessage(), ModelProblem.Severity.ERROR,
+                                                toSourceHint( model ), e ) );
-                + e.getMessage(), toSourceHint( model ), e ) );
+                + e.getMessage(), ModelProblem.Severity.ERROR, toSourceHint( model ), e ) );
-                + toSourceHint( childModel ) + ": " + "No model resolver provided", toSourceHint( childModel ) ) );
+                + toSourceHint( childModel ) + ": " + "No model resolver provided", ModelProblem.Severity.FATAL,
+                                            toSourceHint( childModel ) ) );
-                + toSourceHint( childModel ) + ": " + e.getMessage(), toSourceHint( childModel ), e ) );
+                + toSourceHint( childModel ) + ": " + e.getMessage(), ModelProblem.Severity.FATAL,
+                                            toSourceHint( childModel ), e ) );
