Merge: sisbell-plugin-manager. MNG-3631 - Get plugin config, including mojo descriptor info.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@739970 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.plugin.InvalidPluginException;
-import org.apache.maven.plugin.MavenPluginCollector;
-import org.apache.maven.plugin.MavenPluginDiscoverer;
-import org.apache.maven.plugin.PluginManager;
-import org.apache.maven.plugin.PluginManagerException;
-import org.apache.maven.plugin.PluginNotFoundException;
+import org.apache.maven.plugin.*;
+import org.apache.maven.project.builder.ProjectBuilder;
+import org.apache.maven.project.builder.Mixer;
+import org.apache.maven.plugin.PluginRepository;
+import org.codehaus.plexus.configuration.PlexusConfiguration;
+
+    private PluginRepository pluginRepository;
+
+    private Mixer mixer;
+    public PlexusConfiguration getPluginConfiguration(String pluginId, String mojoId, Model model) throws Exception
+    {        
+        try {
+            return mixer.mixPluginAndReturnConfig(pluginRepository.findPluginById(pluginId, mojoId), model);
+        } catch (PlexusConfigurationException e) {
+            throw new IOException(e.getMessage());
+        }
+    }
+
+            pluginRepository = container.lookup( PluginRepository.class );
+
+            mixer = (Mixer) container.lookup( ProjectBuilder.class );
+
