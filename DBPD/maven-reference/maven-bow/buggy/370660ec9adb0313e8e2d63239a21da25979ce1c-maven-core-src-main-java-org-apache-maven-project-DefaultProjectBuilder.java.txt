o Fixed handling of project directory

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@781119 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.FileModelSource;
-        return build( pomFile, pomFile.getParentFile(), configuration );
+        return build( pomFile, true, configuration );
-    private MavenProject build( File pomFile, File projectDirectory, ProjectBuildingRequest configuration )
+    private MavenProject build( File pomFile, boolean localProject, ProjectBuildingRequest configuration )
-            result = modelBuilder.build( pomFile, configuration.getModelBuildingRequest(), resolver );
+            if ( localProject )
+            {
+                result = modelBuilder.build( pomFile, configuration.getModelBuildingRequest(), resolver );
+            }
+            else
+            {
+                result =
+                    modelBuilder.build( new FileModelSource( pomFile ), configuration.getModelBuildingRequest(),
+                                        resolver );
+            }
-        return build( artifact.getFile(), null, configuration );
+        return build( artifact.getFile(), false, configuration );
-        String projectId = safeVersionlessKey( model.getGroupId(), model.getArtifactId() );
+
-
+            String projectId = safeVersionlessKey( model.getGroupId(), model.getArtifactId() );
