improved error handling and other clean up


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163979 13f79535-47bb-0310-9956-ffa450edef68

-        if ( request.getGoals().isEmpty() )
-        {
-            throw new ReactorException( "You must specify at least one goal. Try 'install'." );
-        }
-
+        List projects;
+
-            List projects;
+            projects = collectProjects( request.getFiles(), request.getLocalRepository(), request.isRecursive() );
-            try
-            {
-                projects = collectProjects( request.getFiles(), request.getLocalRepository(), request.isRecursive() );
+            projects = MavenProject.getSortedProjects( projects );
-                projects = MavenProject.getSortedProjects( projects );
+            if ( projects.isEmpty() )
+            {
+                projects.add( projectBuilder.buildStandaloneSuperProject( request.getLocalRepository() ) );
+            }
+        }
+        catch ( IOException e )
+        {
+            throw new ReactorException( "Error processing projects for the reactor: ", e );
+        }
+        catch ( ProjectBuildingException e )
+        {
+            throw new ReactorException( "Error processing projects for the reactor: ", e );
+        }
+        catch ( CycleDetectedException e )
+        {
+            throw new ReactorException( "Error processing projects for the reactor: ", e );
+        }
-                if ( projects.isEmpty() )
-                {
-                    projects.add( projectBuilder.buildStandaloneSuperProject( request.getLocalRepository() ) );
-                }
-            }
-            catch ( IOException e )
-            {
-                throw new ReactorException( "Error processing projects for the reactor: ", e );
-            }
-            catch ( ProjectBuildingException e )
-            {
-                throw new ReactorException( "Error processing projects for the reactor: ", e );
-            }
-            catch ( CycleDetectedException e )
-            {
-                throw new ReactorException( "Error processing projects for the reactor: ", e );
-            }
-
+        try
+        {
-                    MavenExecutionResponse response = processProject( request, project, dispatcher, request.getGoals() );
+                    MavenExecutionResponse response = processProject( request, project, dispatcher );
-                catch ( Exception e )
+                catch ( LifecycleExecutionException e )
-                    throw new ReactorException( "Modules may not include '..'" );
+                    throw new ProjectBuildingException( "Modules may not include '..'" );
-                                                   EventDispatcher dispatcher, List goals )
+                                                   EventDispatcher dispatcher )
+        List goals = request.getGoals();
+
+                    // TODO: throw exceptions like this, so "failures" are just that
-        if ( min > 0 )
+        String msg = "";
+
+        if ( min > 1 )
-            return min + " minutes " + secs + " seconds";
+            msg = min + " minutes ";
+        }
+        else if ( min == 1 )
+        {
+            msg = "1 minute ";
+        }
+
+        if ( secs > 1 )
+        {
+            msg += secs + " seconds";
+        }
+        else if ( secs == 1 )
+        {
+            msg += "1 second";
-            return secs + " seconds";
+            msg += "< 1 second";
+        return msg;
