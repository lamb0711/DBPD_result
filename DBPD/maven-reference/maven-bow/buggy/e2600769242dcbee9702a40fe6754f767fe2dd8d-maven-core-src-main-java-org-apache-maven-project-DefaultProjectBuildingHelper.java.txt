MNG-4916 cache extension plugin resolution errors


git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1038917 13f79535-47bb-0310-9956-ffa450edef68

-                artifacts = resolveExtensionArtifacts( plugin, project.getRemotePluginRepositories(), request );
+                try
+                {
+                    artifacts = resolveExtensionArtifacts( plugin, project.getRemotePluginRepositories(), request );
-                recordArtifacts = pluginArtifactsCache.put( cacheKey, artifacts );
+                    recordArtifacts = pluginArtifactsCache.put( cacheKey, artifacts );
+                }
+                catch ( PluginResolutionException e )
+                {
+                    pluginArtifactsCache.put( cacheKey, e );
+
+                    pluginArtifactsCache.register( project, recordArtifacts );
+
+                    throw e;
+                }
