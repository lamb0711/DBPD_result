o Refactored mojo/plugin generation, extraction, etc. to accommodate multiple mojo languages.
o Tested with java mojos, mboot to verify nothing broken by refactor.
o TODO: Add marmalade support tests...currently only java-mojos are supported in mboot2, so this isn't going to interrupt things.
o TODO: Once marmalade support is tested, add to the list of artifacts built by mboot2.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163369 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.maven.plugin.generator;
+package org.apache.maven.tools.plugin.generator;
-import org.apache.maven.plugin.descriptor.Parameter;
+import org.apache.maven.plugin.MavenMojoDescriptor;
-import org.codehaus.plexus.util.xml.Xpp3Dom;
-import org.codehaus.plexus.util.xml.XMLWriter;
+import org.apache.maven.plugin.descriptor.Parameter;
+import org.apache.maven.project.MavenProject;
+import org.codehaus.plexus.util.xml.XMLWriter;
+import java.util.Iterator;
+import java.util.Set;
- * @todo need to add validation directives so that systems embedding
- * maven2 can get validation directives to help users in IDEs.
+ * @todo need to add validation directives so that systems embedding maven2 can
+ *       get validation directives to help users in IDEs.
-    extends AbstractGenerator
+    implements Generator
-    protected void processPluginDescriptors( MojoDescriptor[] mojoDescriptors, String destinationDirectory, Xpp3Dom pomDom )
-        throws Exception
+    public void execute( String destinationDirectory, Set mavenMojoDescriptors, MavenProject project ) throws Exception
-        for ( int i = 0; i < mojoDescriptors.length; i++ )
+        for ( Iterator it = mavenMojoDescriptors.iterator(); it.hasNext(); )
-            processPluginDescriptor( mojoDescriptors[i], destinationDirectory );
+            MavenMojoDescriptor descriptor = (MavenMojoDescriptor) it.next();
+            processPluginDescriptor( descriptor, destinationDirectory );
-    protected void processPluginDescriptor( MojoDescriptor mojoDescriptor, String destinationDirectory )
+    protected void processPluginDescriptor( MavenMojoDescriptor descriptor, String destinationDirectory )
+        MojoDescriptor mojoDescriptor = descriptor.getMojoDescriptor();
+
-    private void writeGoalParameterTable( MojoDescriptor mojoDescriptor, XMLWriter w )
-        throws Exception
+    private void writeGoalParameterTable( MojoDescriptor mojoDescriptor, XMLWriter w ) throws Exception
