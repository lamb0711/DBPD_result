implement snapshot policies: default is to only check once a day (after crossing midnight), or if --update-snapshots (-U) is specified on the command line


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163711 13f79535-47bb-0310-9956-ffa450edef68

+    private long lastModified = 0;
+
+            lastModified = new File( path ).lastModified();
-        if ( timestamp != null )
+        if ( timestamp != null && buildNumber > 0 )
-    private void readFromFile( File destination )
+    private void readFromFile( File file )
-        String version = FileUtils.fileRead( destination );
+        String version = FileUtils.fileRead( file );
+        lastModified = file.lastModified();
+
+        if ( version.indexOf( "SNAPSHOT" ) >= 0 )
+        {
+            timestamp = null;
+            buildNumber = 0;
+            return;
+        }
-        index = version.indexOf( "-" );
+        index = timestamp.lastIndexOf( "-" );
+        // TODO: probably shouldn't test timestamp - except that it may be used do differentiate for a build number of 0
+        //  in the local repository. check, then remove from here and just compare the build numbers
+
+
+    public long getLastModified()
+    {
+        return lastModified;
+    }
