change the maven group ID


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163670 13f79535-47bb-0310-9956-ffa450edef68

-                                                "maven/jars/maven-core-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-artifact-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-model-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-plugin-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-plugin-tools-api-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-plugin-tools-java-2.0-SNAPSHOT.jar",
-                                                "maven/jars/maven-plugin-tools-pluggy-2.0-SNAPSHOT.jar"};
+                                                "org.apache.maven/jars/maven-core-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-artifact-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-model-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-plugin-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-plugin-tools-api-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-plugin-tools-java-2.0-SNAPSHOT.jar",
+                                                "org.apache.maven/jars/maven-plugin-tools-pluggy-2.0-SNAPSHOT.jar"};
-    private ModelReader reader;
-
-        reader = new ModelReader();
+        ModelReader reader = new ModelReader();
-            buildProject( directory, builds[i] );
+            reader = buildProject( directory, builds[i] );
-            reader.reset();
-
-            buildProject( directory, pluginBuilds[i] );
-
-            reader.reset();
+            reader = buildProject( directory, pluginBuilds[i] );
-        FileUtils.copyFileToDirectory( repoLocal + "/maven/jars/maven-core-2.0-SNAPSHOT.jar", lib );
+        FileUtils.copyFileToDirectory( repoLocal + "/org.apache.maven/jars/maven-core-2.0-SNAPSHOT.jar", lib );
-    public void buildProject( String basedir, String projectId )
+    public ModelReader buildProject( String basedir, String projectId )
+        ModelReader reader = new ModelReader();
+
-        runTests( basedir, classes, testClasses );
+        runTests( basedir, classes, testClasses, reader );
-        createJar( classes, buildDir );
+        createJar( classes, buildDir, reader );
-        installPom( basedir, repoLocal );
+        installPom( basedir, repoLocal, reader );
-            installPlugin( basedir, repoLocal );
+            installPlugin( basedir, repoLocal, reader );
-            installJar( basedir, repoLocal );
+            installJar( basedir, repoLocal, reader );
+
+        return reader;
-    private void createJar( String classes, String buildDir )
+    private void createJar( String classes, String buildDir, ModelReader reader )
+        ModelReader reader = new ModelReader();
+
+        if ( groupId == null )
+        {
+            groupId = reader.parentGroupId;
+        }
+
+        if ( version == null )
+        {
+            version = reader.parentVersion;
+        }
+
-
-        reader.reset();
-    private void installPom( String basedir, String repoLocal )
+    private void installPom( String basedir, String repoLocal, ModelReader reader )
+        if ( groupId == null )
+        {
+            groupId = reader.parentGroupId;
+        }
+
+        if ( version == null )
+        {
+            version = reader.parentVersion;
+        }
+
-    private void installJar( String basedir, String repoLocal )
+    private void installJar( String basedir, String repoLocal, ModelReader reader )
+        if ( groupId == null )
+        {
+            groupId = reader.parentGroupId;
+        }
+
+        if ( version == null )
+        {
+            version = reader.parentVersion;
+        }
+
-    private void installPlugin( String basedir, String repoLocal )
+    private void installPlugin( String basedir, String repoLocal, ModelReader reader )
+        if ( groupId == null )
+        {
+            groupId = reader.parentGroupId;
+        }
+
+        if ( version == null )
+        {
+            version = reader.parentVersion;
+        }
+
-    private void runTests( String basedir, String classes, String testClasses )
+    private void runTests( String basedir, String classes, String testClasses, ModelReader reader )
-        String reportsDir = new File( basedir, "target/test-reports" ).getAbsolutePath();
+        String reportsDir = new File( basedir, "target/surefire-reports" ).getAbsolutePath();
-        public abstract void reset();
-
-        public void reset()
-        {
-            dependencies = new ArrayList();
-        }
-
