MNG-5549 introduced MojoExecutionListener and ProjectExecutionListener

Signed-off-by: Igor Fedorenko <ifedorenko@apache.org>

-import org.apache.maven.execution.scope.MojoExecutionListener;
+import org.apache.maven.execution.MojoExecutionListener;
+import org.apache.maven.execution.scope.WeakMojoExecutionListener;
+import org.apache.maven.plugin.Mojo;
-    implements Scope
+    implements Scope, MojoExecutionListener
-                if ( provided == null )
+                if ( provided == null && unscoped != null )
-    public void afterExecutionSuccess()
+    public void beforeMojoExecution( MavenSession session, MavenProject project, MojoExecution execution, Mojo mojo )
-            if ( provided instanceof MojoExecutionListener )
+            if ( provided instanceof WeakMojoExecutionListener )
-                ( (MojoExecutionListener) provided ).afterMojoExecutionSuccess();
-                // TODO maybe deal with multiple MojoExecutionExceptions
+                ( (WeakMojoExecutionListener) provided ).beforeMojoExecution( session, project, execution, mojo );
-    public void afterExecutionAlways()
+    public void afterMojoExecutionSuccess( MavenSession session, MavenProject project, MojoExecution execution,
+                                           Mojo mojo )
-            if ( provided instanceof MojoExecutionListener )
+            if ( provided instanceof WeakMojoExecutionListener )
-                ( (MojoExecutionListener) provided ).afterMojoExecutionAlways();
-                // TODO maybe deal with multiple MojoExecutionExceptions
+                ( (WeakMojoExecutionListener) provided ).afterMojoExecutionSuccess( session, project, execution, mojo );
+            }
+        }
+    }
+
+    public void afterExecutionFailure( MavenSession session, MavenProject project, MojoExecution execution, Mojo mojo,
+                                       Throwable cause )
+    {
+        for ( Object provided : getScopeState().provided.values() )
+        {
+            if ( provided instanceof WeakMojoExecutionListener )
+            {
+                ( (WeakMojoExecutionListener) provided ).afterExecutionFailure( session, project, execution, mojo,
+                                                                                cause );
