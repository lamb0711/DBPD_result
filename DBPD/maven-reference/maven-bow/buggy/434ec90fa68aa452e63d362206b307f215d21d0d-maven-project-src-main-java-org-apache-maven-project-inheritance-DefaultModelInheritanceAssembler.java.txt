fix issues with cloning appending extra paths

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@279237 13f79535-47bb-0310-9956-ffa450edef68

+    public void copyModel( Model dest, Model source )
+    {
+        assembleModelInheritance( dest, source, false );
+    }
+
+        assembleModelInheritance( child, parent, true );
+    }
+
+    private void assembleModelInheritance( Model child, Model parent, boolean appendPaths )
+    {
-                child.setUrl( appendPath( parent.getUrl(), child.getArtifactId() ) );
+                child.setUrl( appendPath( parent.getUrl(), child.getArtifactId(), appendPaths ) );
-        assembleDistributionInheritence( child, parent );
+        assembleDistributionInheritence( child, parent, appendPaths );
-        assembleScmInheritance( child, parent );
+        assembleScmInheritance( child, parent, appendPaths );
-    private void assembleScmInheritance( Model child, Model parent )
+    private void assembleScmInheritance( Model child, Model parent, boolean appendPaths )
-                childScm.setConnection( appendPath( parentScm.getConnection(), child.getArtifactId() ) );
+                childScm.setConnection( appendPath( parentScm.getConnection(), child.getArtifactId(), appendPaths ) );
-                    .setDeveloperConnection( appendPath( parentScm.getDeveloperConnection(), child.getArtifactId() ) );
+                    .setDeveloperConnection(
+                        appendPath( parentScm.getDeveloperConnection(), child.getArtifactId(), appendPaths ) );
-                childScm.setUrl( appendPath( parentScm.getUrl(), child.getArtifactId() ) );
+                childScm.setUrl( appendPath( parentScm.getUrl(), child.getArtifactId(), appendPaths ) );
-    private void assembleDistributionInheritence( Model child, Model parent )
+    private void assembleDistributionInheritence( Model child, Model parent, boolean appendPaths )
-                        site.setUrl( appendPath( site.getUrl(), child.getArtifactId() ) );
+                        site.setUrl( appendPath( site.getUrl(), child.getArtifactId(), appendPaths ) );
-    private String appendPath( String url, String path )
+    private String appendPath( String url, String path, boolean appendPaths )
-        if ( url.endsWith( "/" ) )
+        if ( appendPaths )
-            return url + path;
+            if ( url.endsWith( "/" ) )
+            {
+                return url + path;
+            }
+            else
+            {
+                return url + "/" + path;
+            }
-            return url + "/" + path;
+            return url;
