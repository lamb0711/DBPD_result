PR: MNG-378
Only deploy the release information at the point of release

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@177934 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.metadata.ReleaseArtifactMetadata;
+    /**
+     * @parameter expression="${updateReleaseInfo}"
+     */
+    private boolean updateReleaseInfo = false;
+
+        if ( updateReleaseInfo )
+        {
+            ReleaseArtifactMetadata metadata = new ReleaseArtifactMetadata( artifact );
+            metadata.setVersion( artifact.getVersion() );
+            artifact.addMetadata( metadata );
+        }
+
-            if ( !isPomArtifact )
+            if ( isPomArtifact )
-                // TODO: would be something nice to get back from the project to get the full filename (the OGNL feedback thing)
-                installer.install( buildDirectory, finalName, artifact, localRepository );
+                installer.install( pom, artifact, localRepository );
-                installer.install( pom, artifact, localRepository );
+                // TODO: would be something nice to get back from the project to get the full filename (the OGNL feedback thing)
+                installer.install( buildDirectory, finalName, artifact, localRepository );
