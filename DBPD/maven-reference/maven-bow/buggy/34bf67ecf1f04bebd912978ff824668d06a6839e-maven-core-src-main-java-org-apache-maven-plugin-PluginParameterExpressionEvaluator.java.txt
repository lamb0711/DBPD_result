Merging revIds: 515814:520600 from 2.1-lifecycle-refactor branch to trunk.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@520609 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.LifecycleExecutionContext;
+    private final LifecycleExecutionContext lifecycleExecutionContext;
+
+    public PluginParameterExpressionEvaluator( MavenSession context,
+                                               MojoExecution mojoExecution,
+                                               PathTranslator pathTranslator,
+                                               LifecycleExecutionContext lifecycleExecutionContext,
+                                               Logger logger,
+                                               Properties properties )
+    {
+        this.context = context;
+        this.mojoExecution = mojoExecution;
+        this.pathTranslator = pathTranslator;
+        this.lifecycleExecutionContext = lifecycleExecutionContext;
+        this.logger = logger;
+        this.properties = properties;
+        
+        this.project = lifecycleExecutionContext.getCurrentProject();
+
+        String basedir = null;
+
+        if ( project != null )
+        {
+            File projectFile = project.getFile();
+
+            // this should always be the case for non-super POM instances...
+            if ( projectFile != null )
+            {
+                basedir = projectFile.getParentFile().getAbsolutePath();
+            }
+        }
+
+        if ( basedir == null )
+        {
+            basedir = System.getProperty( "user.dir" );
+        }
+
+        this.basedir = basedir;
+    }
+
+    /**
+     * @deprecated Use {@link PluginParameterExpressionEvaluator#PluginParameterExpressionEvaluator(MavenSession, MojoExecution, PathTranslator, LifecycleExecutionContext, Logger, Properties)}
+     * instead.
+     */
+        this.lifecycleExecutionContext = new LifecycleExecutionContext( project );
-        this.project = project;
+        
+        this.project = project;
-            value = mojoExecution.getReports();
+            value = lifecycleExecutionContext.getReports();
