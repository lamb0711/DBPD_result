PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.factory.DefaultArtifactFactory;
+import org.apache.maven.artifact.resolver.filter.AndArtifactFilter;
-import org.apache.maven.artifact.resolver.filter.AndArtifactFilter;
-    // TODO: configure?
-    protected ArtifactFactory artifactFactory = new DefaultArtifactFactory();
+    private ArtifactFactory artifactFactory;
-    public MavenMetadataSource( ArtifactResolver artifactResolver )
+    public MavenMetadataSource( ArtifactResolver artifactResolver, ArtifactFactory artifactFactory )
+        this.artifactFactory = artifactFactory;
-    public MavenMetadataSource( ArtifactResolver artifactResolver, MavenProjectBuilder projectBuilder )
+    public MavenMetadataSource( ArtifactResolver artifactResolver, MavenProjectBuilder projectBuilder,
+                                ArtifactFactory artifactFactory )
+        this.artifactFactory = artifactFactory;
-                    projectArtifacts.add( artifact );
+                projectArtifacts.add( artifact );
