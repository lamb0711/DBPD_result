[MNG-1908] fix the performance problem with this particular fix


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@486484 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.repository.metadata.SnapshotArtifactRepositoryMetadata;
+import org.apache.maven.artifact.repository.metadata.Metadata;
+import org.apache.maven.artifact.repository.metadata.Versioning;
+import org.apache.maven.artifact.repository.metadata.Snapshot;
+                boolean localCopy = false;
+                for ( Iterator i = artifact.getMetadataList().iterator(); i.hasNext(); )
+                {
+                    ArtifactMetadata m = (ArtifactMetadata) i.next();
+                    if ( m instanceof SnapshotArtifactRepositoryMetadata )
+                    {
+                        SnapshotArtifactRepositoryMetadata snapshotMetadata = (SnapshotArtifactRepositoryMetadata) m;
+
+                        Metadata metadata = snapshotMetadata.getMetadata();
+                        if ( metadata != null )
+                        {
+                            Versioning versioning = metadata.getVersioning();
+                            if ( versioning != null )
+                            {
+                                Snapshot snapshot = versioning.getSnapshot();
+                                if ( snapshot != null )
+                                {
+                                    localCopy = snapshot.isLocalCopy();
+                                }
+                            }
+                        }
+                    }
+                }
+
-                    destination.exists() )
+                    destination.exists() && !localCopy )
