o Tracked build success/failure for reactor projects in execution result

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@800292 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.execution.BuildFailure;
+import org.apache.maven.execution.BuildSuccess;
+import org.apache.maven.execution.MavenExecutionResult;
-        logger.info(  "Build Order:" );
+        logger.info( "Build Order:" );
-                
+
+        MavenExecutionResult result = session.getResult();
+
+            long buildStartTime = System.currentTimeMillis();
+
-                MavenExecutionPlan executionPlan = calculateExecutionPlan( session, goals.toArray( new String[] {} ) );
+                MavenExecutionPlan executionPlan =
+                    calculateExecutionPlan( session, goals.toArray( new String[goals.size()] ) );
-                
+
+                long buildEndTime = System.currentTimeMillis();
+
+                result.addBuildSummary( new BuildSuccess( currentProject, buildEndTime - buildStartTime ) );
-                session.getResult().addException( e );
+                result.addException( e );
+
+                long buildEndTime = System.currentTimeMillis();
+
+                result.addBuildSummary( new BuildFailure( currentProject, buildEndTime - buildStartTime, e ) );
-            MojoDescriptor mojoDescriptor = pluginManager.getMojoDescriptor( mojoExecution.getPlugin(), mojoExecution.getGoal(), session
-                .getLocalRepository(), project.getPluginArtifactRepositories() );
+
+            MojoDescriptor mojoDescriptor = mojoExecution.getMojoDescriptor();
+
+            if ( mojoDescriptor == null )
+            {
+                mojoDescriptor =
+                    pluginManager.getMojoDescriptor( mojoExecution.getPlugin(), mojoExecution.getGoal(),
+                                                     session.getLocalRepository(),
+                                                     project.getPluginArtifactRepositories() );
+
+                mojoExecution.setMojoDescriptor( mojoDescriptor );
+            }
-            mojoExecution.setMojoDescriptor( mojoDescriptor );
-
