complete inheritence of distributionManagement


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163565 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.DistributionManagement;
-        if ( child.getDistributionManagement() == null )
-        {
-            child.setDistributionManagement( parent.getDistributionManagement() );
-        }
+        assembleDistributionInheritence( child, parent );
+    private void assembleDistributionInheritence( Model child, Model parent )
+    {
+        if ( parent.getDistributionManagement() != null )
+        {
+            DistributionManagement parentDistMgmt = parent.getDistributionManagement();
+
+            DistributionManagement childDistMgmt = child.getDistributionManagement();
+
+            if ( childDistMgmt == null )
+            {
+                childDistMgmt = new DistributionManagement();
+
+                child.setDistributionManagement( childDistMgmt );
+            }
+
+            if ( childDistMgmt.getSite() == null )
+            {
+                childDistMgmt.setSite( parentDistMgmt.getSite() );
+            }
+
+            if ( childDistMgmt.getRepository() == null )
+            {
+                childDistMgmt.setRepository( parentDistMgmt.getRepository() );
+            }
+        }
+    }
+
+
