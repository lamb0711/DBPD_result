Fixed MNG-805. It's a bit of a workaround but fits nicely with the 
workaround style already in place.

Modified it0012 to be useful (it always succeeded!) and added a child
project to demonstrate this commit fixes MNG-805.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@278741 13f79535-47bb-0310-9956-ffa450edef68

-        context.put( "basedir", project.getBasedir() );
+
+        // FIXME: why is project.file not filled in here? MavenProject.getBasedir() defaults
+        // to the current directory which causes all sorts of problems; might be better off
+        // setting that to null and just filling in the project file name and removing this.
+
+        if ( pomLocation != null && new File( pomLocation ).getParent() != null )
+        {
+        	context.put( "basedir", new File( pomLocation ).getParent() );
+        }
+        else
+        {
+        	context.put( "basedir", project.getBasedir() );
+        }
