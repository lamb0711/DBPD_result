add artifact metadata on installation of snapshot in a local repository


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163676 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.metadata.SnapshotArtifactMetadata;
-        // TODO: implement
+        if ( isSnapshot( artifact ) && "pom".equals( artifact.getType() ) )
+        {
+            // only store the snapshot-version-local.txt file for POMs as every file has an associated POM
+            ArtifactMetadata metadata = SnapshotArtifactMetadata.createLocalSnapshotMetadata( artifact );
+            artifact.addMetadata( metadata );
+        }
+
+    private static boolean isSnapshot( Artifact artifact )
+    {
+        return artifact.getVersion().endsWith( "SNAPSHOT" );
+    }
