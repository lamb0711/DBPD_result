Add startPage and EndPage methods for MultiPageReport

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@171126 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import java.util.Iterator;
+import java.util.List;
+import org.apache.maven.reporting.sink.MultiPageSink;
-    SinkFactory factory;
+    private SinkFactory factory;
+
+    private List sinks = new ArrayList();
+
-    public Sink getSink( String outputName )
+    public abstract boolean usePageLinkBar();
+
+    private Sink getSink( String outputName )
-}
+
+    public MultiPageSink startPage( String outputName )
+        throws Exception
+    {
+        return new MultiPageSink( outputName, getSink( outputName ) );
+    }
+
+    public void endPage( MultiPageSink sink )
+    {
+        if ( usePageLinkBar() )
+        {
+            sinks.add( sink );
+        }
+        else
+        {
+            sink.closeSink();
+        }
+    }
+
+    protected void closeReport()
+    {
+        int counter = 1;
+
+        if ( !sinks.isEmpty() )
+        {
+            for ( Iterator i = sinks.iterator(); i.hasNext(); )
+            {
+                MultiPageSink currentSink = (MultiPageSink) i.next();
+
+                currentSink.paragraph();
+                for ( Iterator j = sinks.iterator(); i.hasNext(); )
+                {
+                    if (counter>1)
+                    {
+                        currentSink.text( "&nbsp;" );
+                    }
+                    MultiPageSink sink = (MultiPageSink) i.next();
+                    sink.link( sink.getOutputName() + ".html" );
+                    sink.text( String.valueOf( counter++ ) );
+                    sink.link_();
+                    
+                }
+                currentSink.paragraph_();
+                currentSink.closeSink();
+            }
+        }
+    }
+}
