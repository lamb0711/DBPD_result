[MNG-3410] Managed versions in plugins are not considered when using them

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@632683 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.ProjectBuildingException;
+import java.util.HashMap;
+        /* get plugin managed versions */
+        Map pluginManagedDependencies = new HashMap();
+        try
+        {
+            MavenProject pluginProject =
+                mavenProjectBuilder.buildFromRepository( pluginArtifact, project.getRemoteArtifactRepositories(),
+                                                         localRepository );
+            if ( pluginProject != null )
+            {
+                pluginManagedDependencies = pluginProject.getManagedVersionMap();
+            }
+        }
+        catch ( ProjectBuildingException e )
+        {
+            // this can't happen, it would have blowed up at artifactMetadataSource.retrieve()
+        }
+
-                                                                                Collections.EMPTY_MAP,
+                                                                                pluginManagedDependencies,
