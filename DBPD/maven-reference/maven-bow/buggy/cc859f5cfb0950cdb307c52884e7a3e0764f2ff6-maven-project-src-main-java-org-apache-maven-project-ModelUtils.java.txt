[MNG-2221] Fixing caching of merged plugins to prevent them from appearing/executing twice in the resulting child POM. See two new unit tests in ModelUtilsTest for proof.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@421309 13f79535-47bb-0310-9956-ffa450edef68

+                // only merge plugin definition from the parent if at least one 
+                // of these is true:
+                // 1. we're not processing the plugins in an inheritance-based merge
+                // 2. the parent's <inherited/> flag is not set
+                // 3. the parent's <inherited/> flag is set to true
+                    // if we're processing this as an inheritance-based merge, and
+                    // the parent's <inherited/> flag is not set, then we need to
+                    // clear the inherited flag in the merge result.
+
+                    // fix for MNG-2221 (assembly cache was not being populated for later reference):
+                    assembledPlugins.put(  assembledPlugin.getKey(), assembledPlugin );
-	    // FIXME: not sure what's intended here, but this entire
-	    // loop can be replaced by 'mergedPlugins.addAll( childPlugins.values() );
-	    // since assembledPlugins is never updated and remains empty.
