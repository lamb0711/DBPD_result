improve download/upload monitors


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@164024 13f79535-47bb-0310-9956-ffa450edef68

-            putRemoteFile( repository, source, repository.pathOf( artifact ) );
+            putRemoteFile( repository, source, repository.pathOf( artifact ), downloadMonitor );
-            putRemoteFile( repository, source, repository.pathOfMetadata( artifactMetadata ) );
+            getLogger().info( "Uploading " + artifactMetadata );
+            putRemoteFile( repository, source, repository.pathOfMetadata( artifactMetadata ), null );
-    private void putRemoteFile( ArtifactRepository repository, File source, String remotePath )
+    private void putRemoteFile( ArtifactRepository repository, File source, String remotePath,
+                                TransferListener downloadMonitor )
-        // TODO: probably don't want this on metadata...
-        // TODO: not working well on upload, commented out for now
-//        if ( downloadMonitor != null )
-//        {
-//            wagon.addTransferListener( downloadMonitor );
-//        }
+        if ( downloadMonitor != null )
+        {
+            wagon.addTransferListener( downloadMonitor );
+        }
-        // TODO: maybe some other listener that still notifies when metadata is being retrieved?
+        getLogger().info( "Retrieving " + metadata );
