o Revised ModelProblem to provide more detailed information about problem location

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@814330 13f79535-47bb-0310-9956-ffa450edef68

-    private String sourceHint;
+    private String source;
-    public void setSourceHint( String sourceHint )
+    public void setSource( String source )
-        this.sourceHint = sourceHint;
+        this.source = source;
-    public void setSourceHint( Model sourceModel )
+    public void setSource( Model source )
-        this.sourceModel = sourceModel;
-        this.sourceHint = null;
+        this.sourceModel = source;
+        this.source = null;
-    private String getSourceHint()
+    private String getSource()
-        if ( sourceHint == null && sourceModel != null )
+        if ( source == null && sourceModel != null )
-            sourceHint = ModelProblemUtils.toSourceHint( sourceModel );
+            source = ModelProblemUtils.toPath( sourceModel );
-        return sourceHint;
+        return source;
+    }
+
+    private String getModelId()
+    {
+        return ModelProblemUtils.toId( sourceModel );
-    public void addFatalError( String message )
+    public void addFatalError( String message, int line, int column, Exception cause )
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.FATAL, getSourceHint() ) );
-    }
-
-    public void addFatalError( String message, Exception cause )
-    {
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.FATAL, getSourceHint(), cause ) );
+        add( message, ModelProblem.Severity.FATAL, line, column, cause );
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.ERROR, getSourceHint() ) );
+        addError( message, null );
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.ERROR, getSourceHint(), cause ) );
+        add( message, ModelProblem.Severity.ERROR, -1, -1, cause );
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.WARNING, getSourceHint() ) );
+        addWarning( message, null );
-        problems.add( new DefaultModelProblem( message, ModelProblem.Severity.WARNING, getSourceHint(), cause ) );
+        add( message, ModelProblem.Severity.WARNING, -1, -1, cause );
+    }
+
+    private void add( String message, ModelProblem.Severity severity, int line, int column, Exception cause )
+    {
+        problems.add( new DefaultModelProblem( message, severity, getSource(), line, column, getModelId(), cause ) );
