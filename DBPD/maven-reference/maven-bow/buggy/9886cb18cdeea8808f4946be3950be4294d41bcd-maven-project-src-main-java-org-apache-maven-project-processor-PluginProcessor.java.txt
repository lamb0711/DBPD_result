Fixed plugin dependency ordering.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@757526 13f79535-47bb-0310-9956-ffa450edef68

-            copy( (Plugin) child, targetPlugin, isChildMostSpecialized );
+            copy( (Plugin) child, targetPlugin, true );
+            copyDependencies( (Plugin) child, targetPlugin, true );
+            copyDependencies( (Plugin) parent, targetPlugin, false );
-                copy( (Plugin) child, targetPlugin, isChildMostSpecialized );
+                copy( (Plugin) child, targetPlugin, true );
+                
+                copyDependencies( (Plugin) child, targetPlugin, true );
+                copyDependencies( (Plugin) parent, targetPlugin, false );
-                copy( (Plugin) child, targetPlugin, isChildMostSpecialized );
+                copy( (Plugin) child, targetPlugin, true );
+                
+                copyDependencies( (Plugin) child, targetPlugin, true );
+                copyDependencies( (Plugin) parent, targetPlugin, false );
-    }       
+    }    
+    
+    
+    private static void copyDependencies(Plugin source, Plugin target, boolean isChild)
+    {
+        DependenciesProcessor proc = new DependenciesProcessor();
+        proc.process( new ArrayList<Dependency>(), new ArrayList<Dependency>(source.getDependencies()), target.getDependencies(), isChild );            
+    }
+    
-        DependenciesProcessor proc = new DependenciesProcessor();
-        if(target.getDependencies().isEmpty())
-        {
-            
-            proc.process( new ArrayList<Dependency>(), new ArrayList<Dependency>(source.getDependencies()), target.getDependencies(), false );            
-        }
-        else
-        {
-            proc.process( new ArrayList<Dependency>(source.getDependencies()), new ArrayList<Dependency>(), target.getDependencies(), false );            
-        }
+
