o Moved plugin prefix resolution into a dedicated component
o Completed compat impl of legacy plugin manager

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@806153 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.prefix.DefaultPluginPrefixRequest;
+import org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException;
+import org.apache.maven.plugin.prefix.PluginPrefixRequest;
+import org.apache.maven.plugin.prefix.PluginPrefixResolver;
+import org.apache.maven.plugin.prefix.PluginPrefixResult;
+    private PluginPrefixResolver pluginPrefixResolver;
+
+    @Requirement
-        // TODO Auto-generated method stub
-        return null;
+        PluginPrefixRequest request = new DefaultPluginPrefixRequest( session );
+        request.setPrefix( prefix );
+        request.setPom( project.getModel() );
+
+        try
+        {
+            PluginPrefixResult result = pluginPrefixResolver.resolve( request );
+
+            Plugin plugin = new Plugin();
+            plugin.setGroupId( result.getGroupId() );
+            plugin.setArtifactId( result.getArtifactId() );
+
+            return plugin;
+        }
+        catch ( NoPluginFoundForPrefixException e )
+        {
+            return null;
+        }
-        // TODO Auto-generated method stub
-        return null;
+        MavenSession session = legacySupport.getSession();
+
+        PluginPrefixRequest request = new DefaultPluginPrefixRequest( session );
+        request.setPrefix( prefix );
+
+        try
+        {
+            PluginPrefixResult result = pluginPrefixResolver.resolve( request );
+
+            Plugin plugin = new Plugin();
+            plugin.setGroupId( result.getGroupId() );
+            plugin.setArtifactId( result.getArtifactId() );
+
+            return loadPluginDescriptor( plugin, session.getCurrentProject(), session );
+        }
+        catch ( Exception e )
+        {
+            return null;
+        }
