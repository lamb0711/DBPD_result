PR: MNG-956
allow the addition of <dependencies> inside a <plugin> element to introduce plugin specific extensions.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@293557 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.artifact.MavenMetadataSource;
-import org.codehaus.plexus.logging.LoggerManager;
-import java.util.Properties;
+
+        try
+        {
+            Set artifacts = MavenMetadataSource.createArtifacts( artifactFactory, plugin.getDependencies(), null, null,
+                                                             project.getProjectReferences() );
+            addedPlugin.setIntroducedDependencyArtifacts( artifacts );
+        }
+        catch ( InvalidVersionSpecificationException e )
+        {
+            throw new PluginManagerException( "Unable to get one of the plugins additional dependencies", e );
+        }
-    private Mojo getConfiguredMojo( MavenSession session,
-                                    Xpp3Dom dom,
-                                    MavenProject project,
-                                    boolean report,
+    private Mojo getConfiguredMojo( MavenSession session, Xpp3Dom dom, MavenProject project, boolean report,
-                Set dependencies = resolutionGroup.getArtifacts();
+                Set dependencies = new HashSet( resolutionGroup.getArtifacts() );
+
+                dependencies.addAll( pluginDescriptor.getIntroducedDependencyArtifacts() );
-            throw new PluginConfigurationException( mojoDescriptor.getPluginDescriptor(), "Unable to parse the created DOM for plugin configuration", e );
+            throw new PluginConfigurationException( mojoDescriptor.getPluginDescriptor(),
+                                                    "Unable to parse the created DOM for plugin configuration", e );
-            throw new PluginConfigurationException(mojoDescriptor.getPluginDescriptor(),
-                                                   "Unable to retrieve component configurator for plugin configuration",
-                                                   e );
+            throw new PluginConfigurationException( mojoDescriptor.getPluginDescriptor(),
+                                                    "Unable to retrieve component configurator for plugin configuration",
+                                                    e );
