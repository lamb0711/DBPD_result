restore more backward comp.

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@944465 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepositoryFactory;
+import org.apache.maven.repository.MirrorSelector;
+import org.apache.maven.settings.Mirror;
+import org.codehaus.plexus.logging.Logger;
+    private Logger logger;    
+    
+    @Requirement
-
+        
+    @Requirement
+    private MirrorSelector mirrorSelector;   
+    
+    @Requirement
+    private ArtifactRepositoryFactory artifactRepositoryFactory;
+    
+    
+    @Deprecated
+    public ArtifactRepository getMirrorRepository( ArtifactRepository repository )
+    {
+        
+        Mirror mirror = mirrorSelector.getMirror( repository, legacySupport.getSession().getSettings().getMirrors() );
+        
+        if ( mirror != null )
+        {
+            String id = mirror.getId();
+            if ( id == null )
+            {
+                // TODO: this should be illegal in settings.xml
+                id = repository.getId();
+            }
+
+            logger.debug( "Using mirror: " + mirror.getUrl() + " (id: " + id + ")" );
+            
+            repository = artifactRepositoryFactory.createArtifactRepository( id, mirror.getUrl(),
+                                                                     repository.getLayout(), repository.getSnapshots(),
+                                                                     repository.getReleases() );
+        }
+        return repository;
+    }     
