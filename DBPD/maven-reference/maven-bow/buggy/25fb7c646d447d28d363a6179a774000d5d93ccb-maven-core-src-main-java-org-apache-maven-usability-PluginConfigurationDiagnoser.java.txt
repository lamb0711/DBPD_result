improved the error diagnosis for invalid plugin parameters, as in MNG-345

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@179274 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.component.configurator.ComponentConfigurationException;
-            return buildDiagnosticMessage( exception );
+            return buildParameterDiagnosticMessage( exception );
+        }
+        else if( DiagnosisUtils.containsInCausality(error, ComponentConfigurationException.class ) )
+        {
+            ComponentConfigurationException cce = (ComponentConfigurationException) DiagnosisUtils.getFromCausality( error, ComponentConfigurationException.class );
+            return buildInvalidPluginConfigurationDiagnosisMessage( cce );
-    private String buildDiagnosticMessage( PluginParameterException exception )
+    private String buildInvalidPluginConfigurationDiagnosisMessage( ComponentConfigurationException cce )
+    {
+        StringBuffer message = new StringBuffer();
+        
+        message.append( "Either your POM or one of its ancestors has declared an invalid plugin configuration.\n" )
+               .append( "The error message is:\n\n" )
+               .append( cce.getMessage() ).append( "\n" );
+        
+        return message.toString();
+    }
+
+    private String buildParameterDiagnosticMessage( PluginParameterException exception )
