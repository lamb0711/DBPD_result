PR: MNG-456
allow separate snapshot and release repositories
deprecate existing snapshotPolicy and checksumPolicy in favour of updatePolicy and checksumPolicy within the <releases> and <snapshots> elements in the <repository> element.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@224707 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.util.StringUtils;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Map;
-
+import org.codehaus.plexus.util.StringUtils;
+
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+
-
-            
+
-        if( recessivePluginGroupIds != null )
+        if ( recessivePluginGroupIds != null )
-            if( dominantPluginGroupIds == null )
+            if ( dominantPluginGroupIds == null )
-            
+
-        org.apache.maven.settings.Activation settingsActivation = settingsProfile.getActivation();
+        Activation settingsActivation = settingsProfile.getActivation();
-            org.apache.maven.settings.ActivationProperty settingsProp = settingsActivation.getProperty();
+            ActivationProperty settingsProp = settingsActivation.getProperty();
+        if ( settingsRepo.getSnapshots() != null )
+        {
+            repo.setSnapshots( convertRepositoryPolicy( settingsRepo.getSnapshots() ) );
+        }
+        if ( settingsRepo.getReleases() != null )
+        {
+            repo.setReleases( convertRepositoryPolicy( settingsRepo.getReleases() ) );
+        }
+
+    private static org.apache.maven.model.RepositoryPolicy convertRepositoryPolicy( RepositoryPolicy settingsPolicy )
+    {
+        org.apache.maven.model.RepositoryPolicy policy = new org.apache.maven.model.RepositoryPolicy();
+        policy.setEnabled( settingsPolicy.isEnabled() );
+        policy.setUpdatePolicy( settingsPolicy.getUpdatePolicy() );
+        policy.setChecksumPolicy( settingsPolicy.getChecksumPolicy() );
+        return policy;
+    }
+
