o check if plugin version is defined
o refactor the report execution, it use only the MavenReportConfiguration
o obtain reports list via reportManager.getReports

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@165232 13f79535-47bb-0310-9956-ffa450edef68

-    public Sink getSink( File outputDirectory )
-        throws IOException
+    private MavenReportConfiguration config;
+
+    public MavenReportConfiguration getConfiguration()
-        return getSink( outputDirectory, getOutputName() );
+        return config;
-    public Sink getSink( File outputDirectory, String outputName )
+    public void setConfiguration( MavenReportConfiguration config )
+    {
+        this.config = config;
+    }
+
+    public void generate()
+        throws MavenReportException
+    {
+        if ( config == null )
+        {
+            throw new MavenReportException( "You must specify a report configuration." );
+        }
+
+        execute();
+    }
+
+    protected abstract void execute()
+        throws MavenReportException;
+
+    public Sink getSink()
-        FileWriter writer = new FileWriter( new File( outputDirectory, "xdoc/" + outputName + ".xml" ) );
+        return getSink( getOutputName() );
+    }
+
+    public Sink getSink( String outputName )
+        throws IOException
+    {
+        FileWriter writer = new FileWriter( new File( config.getOutputDirectory(), "xdoc/" + outputName + ".xml" ) );
