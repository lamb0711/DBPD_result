PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

-        private ArtifactFactory artifactFactory = new DefaultArtifactFactory();
+        private ArtifactFactory artifactFactory;
-        public Source()
+        public Source( ArtifactFactory artifactFactory )
+            this.artifactFactory = artifactFactory;
-        return super.resolveTransitively( artifacts, remoteRepositories, localRepository, new Source(), filter );
+        return super.resolveTransitively( artifacts, remoteRepositories, localRepository, new Source( artifactFactory ), filter );
-        return super.resolveTransitively( artifacts, remoteRepositories, localRepository, new Source() );
+        return super.resolveTransitively( artifacts, remoteRepositories, localRepository, new Source( artifactFactory ) );
-        return super.resolveTransitively( artifact, remoteRepositories, localRepository, new Source() );
+        return super.resolveTransitively( artifact, remoteRepositories, localRepository, new Source( artifactFactory ) );
