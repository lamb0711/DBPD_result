o Removed AuthenticationInfoProvider stuff
o Added ArtifactRepositoryFactory stuff to construct with AuthenticationInfo if possible.
o Added UserModelBuilder stuff for componentizing UserModel construction.
  -> DefaultUserModelBuilder has a configuration point 'userModelPath' which can redirect where it reads user.xml from (${user.home} is substitutable here).
o Added warning message to deployment plugin when deployment repo has no authentication info available.
o Added warning message for repos with null <id/> (auth info cannot be assigned here).
o Added a couple of debug-level messages for aid in debugging repo- and userModel-related problems.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163558 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepositoryFactory;
+import org.apache.maven.model.user.UserModel;
+import org.apache.maven.model.user.UserModelBuilder;
+    
+    private UserModelBuilder userModelBuilder;
+    
+    private ArtifactRepositoryFactory artifactRepositoryFactory;
-    private List buildArtifactRepositories( List repositories )
+    private List buildArtifactRepositories( List repositories ) throws ProjectBuildingException
+        UserModel userModel = null;
+
+        try
+        {
+            userModel = userModelBuilder.buildUserModel();
+        }
+        catch ( Exception e )
+        {
+            throw new ProjectBuildingException( "Cannot read user-model.", e );
+        }
+        
-            ArtifactRepository artifactRepo = new ArtifactRepository( mavenRepo.getId(), mavenRepo.getUrl() );
+            ArtifactRepository artifactRepo = artifactRepositoryFactory.createArtifactRepository( mavenRepo, userModel );
