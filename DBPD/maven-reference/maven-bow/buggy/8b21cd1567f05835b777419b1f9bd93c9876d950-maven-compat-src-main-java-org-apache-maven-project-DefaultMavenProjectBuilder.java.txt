[MNG-4450] [regression] Stub project for missing dependency POMs is not properly created

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@881563 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.resolver.MultipleArtifactsNotFoundException;
-import org.apache.maven.model.DistributionManagement;
-import org.apache.maven.model.Model;
-    public MavenProject buildFromRepository( Artifact artifact, ProjectBuilderConfiguration configuration )
+    public MavenProject buildFromRepository( Artifact artifact, ProjectBuilderConfiguration configuration, boolean allowStubModel )
-        return projectBuilder.build( artifact, configuration ).getProject();
+        return projectBuilder.build( artifact, allowStubModel, configuration ).getProject();
-            return buildFromRepository( artifact, configuration );
+            return buildFromRepository( artifact, configuration, allowStubModel );
-            else if ( e.getCause() instanceof MultipleArtifactsNotFoundException )
-            {
-                if ( allowStubModel )
-                {
-                    MavenProject stubProject = new MavenProject( createStubModel( artifact ) );
-                    stubProject.setParent( buildStandaloneSuperProject( configuration ) );
-                    return stubProject;
-                }
-            }
-    private Model createStubModel( Artifact projectArtifact )
-    {
-        Model model = new Model();
-
-        model.setModelVersion( "4.0.0" );
-
-        model.setArtifactId( projectArtifact.getArtifactId() );
-
-        model.setGroupId( projectArtifact.getGroupId() );
-
-        model.setVersion( projectArtifact.getVersion() );
-
-        // TODO: not correct in some instances
-        model.setPackaging( projectArtifact.getType() );
-
-        model.setDistributionManagement( new DistributionManagement() );
-
-        model.getDistributionManagement().setStatus( "generated" );
-
-        return model;
-    }
-
