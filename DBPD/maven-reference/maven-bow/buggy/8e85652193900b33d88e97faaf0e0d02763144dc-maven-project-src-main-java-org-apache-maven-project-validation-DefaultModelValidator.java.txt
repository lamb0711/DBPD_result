PR: MNG-1355
Submitted By: Edwin Punzalan
Reviewed By: John Casey

Applied patch, with small logical fix (used getArtifactId() where getGroupId() was the intention).

This patch will guard against overwriting cached models in the project builder (check for pre-existing model in cache before adding), and will validate that a POM's parent has a different groupId:artifactId than the current POM.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@354473 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Parent;
+        
+        Parent parent = model.getParent();
+        if ( parent != null )
+        {
+            if ( parent.getGroupId().equals( model.getGroupId() ) && 
+                    parent.getArtifactId().equals( model.getArtifactId() ) )
+            {
+                result.addMessage( "The parent element cannot have the same ID as the project." );
+            }
+        }
