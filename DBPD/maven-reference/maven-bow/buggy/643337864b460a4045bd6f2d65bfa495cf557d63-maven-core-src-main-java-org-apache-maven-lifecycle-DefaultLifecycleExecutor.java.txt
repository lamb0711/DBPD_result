[MNG-3004] Re-added calculateExecutionPlan to DLE, fixed ASF code standard

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@931921 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.internal.LifecycleExecutionPlanCalculator;
+import org.apache.maven.plugin.PluginManagerException;
+    private LifecycleExecutionPlanCalculator lifecycleExecutionPlanCalculator;
+
+    @Requirement
-                                                                                   session.getProjects().size());
+                                                                                   session.getProjects().size() );
-                        lifecycleThreadedBuilder.build( session, callableContext, projectBuilds, taskSegments, analyzer, service );
+                        lifecycleThreadedBuilder.build( session, callableContext, projectBuilds, taskSegments, analyzer,
+                                                        service );
-                    lifecycleModuleBuilder.buildProject( session, callableContext, projectBuild.getProject(), taskSegment );
+                    lifecycleModuleBuilder.buildProject( session, callableContext, projectBuild.getProject(),
+                                                         taskSegment );
+    // Used by m2eclipse
+
+    @SuppressWarnings({"UnusedDeclaration"})
+    public MavenExecutionPlan calculateExecutionPlan( MavenSession session, String... tasks )
+        throws PluginNotFoundException, PluginResolutionException, PluginDescriptorParsingException,
+        MojoNotFoundException, NoPluginFoundForPrefixException, InvalidPluginDescriptorException,
+        PluginManagerException, LifecyclePhaseNotFoundException, LifecycleNotFoundException,
+        PluginVersionResolutionException
+    {
+
+        List<TaskSegment> taskSegments = buildListCalculator.calculateTaskSegments( session );
+
+        TaskSegment mergedSegment = new TaskSegment( false );
+
+        for ( TaskSegment taskSegment : taskSegments )
+        {
+            mergedSegment.getTasks().addAll( taskSegment.getTasks() );
+        }
+
+        return lifecycleExecutionPlanCalculator.calculateExecutionPlan( session, session.getCurrentProject(),
+                                                                        mergedSegment.getTasks() );
+    }
