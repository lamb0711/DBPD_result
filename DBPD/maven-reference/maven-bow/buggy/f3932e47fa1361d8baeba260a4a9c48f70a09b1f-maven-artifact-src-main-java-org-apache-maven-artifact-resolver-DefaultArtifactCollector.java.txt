PR: MNG-947
add optional attribute to a dependency

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@291507 13f79535-47bb-0310-9956-ffa450edef68

-                    artifact.setDependencyTrail( node.getDependencyTrail() );
+                    // If it was optional, we don't add it or its children, just allow the update of the version and scope
+                    if ( !node.getArtifact().isOptional() )
+                    {
+                        artifact.setDependencyTrail( node.getDependencyTrail() );
-                    set.add( node );
+                        set.add( node );
+                    }
-            if ( !child.isResolved() )
+            // We leave in optional ones, but don't pick up its dependencies
+            if ( !child.isResolved() && !child.getArtifact().isOptional() )
