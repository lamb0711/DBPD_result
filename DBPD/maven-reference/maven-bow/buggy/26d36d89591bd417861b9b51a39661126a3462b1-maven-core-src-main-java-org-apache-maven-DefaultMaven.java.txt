PR: MNG-140

split artifact impl from api so that dep resolution can be used independently of wagon
only the first step in making maven-artifact more useful as a public api - more changes to be made


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191634 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.component.repository.exception.ComponentLifecycleException;
+        catch ( ComponentLifecycleException e )
+        {
+            throw new ReactorException( "Unable to configure Maven for execution", e );
+        }
-        throws ComponentLookupException
+        throws ComponentLookupException, ComponentLifecycleException
-        Proxy proxy = settings.getActiveProxy();
-
-        if ( proxy != null )
+        try
-            wagonManager.addProxy( proxy.getProtocol(), proxy.getHost(), proxy.getPort(), proxy.getUsername(),
-                                   proxy.getPassword(), proxy.getNonProxyHosts() );
+            Proxy proxy = settings.getActiveProxy();
+
+            if ( proxy != null )
+            {
+                wagonManager.addProxy( proxy.getProtocol(), proxy.getHost(), proxy.getPort(), proxy.getUsername(),
+                                       proxy.getPassword(), proxy.getNonProxyHosts() );
+            }
+
+            for ( Iterator i = settings.getServers().iterator(); i.hasNext(); )
+            {
+                Server server = (Server) i.next();
+
+                wagonManager.addAuthenticationInfo( server.getId(), server.getUsername(), server.getPassword(),
+                                                    server.getPrivateKey(), server.getPassphrase() );
+            }
+
+            for ( Iterator i = settings.getMirrors().iterator(); i.hasNext(); )
+            {
+                Mirror mirror = (Mirror) i.next();
+
+                wagonManager.addMirror( mirror.getId(), mirror.getMirrorOf(), mirror.getUrl() );
+            }
-
-        for ( Iterator i = settings.getServers().iterator(); i.hasNext(); )
+        finally
-            Server server = (Server) i.next();
-
-            wagonManager.addAuthenticationInfo( server.getId(), server.getUsername(), server.getPassword(),
-                                                server.getPrivateKey(), server.getPassphrase() );
-        }
-
-        for ( Iterator i = settings.getMirrors().iterator(); i.hasNext(); )
-        {
-            Mirror mirror = (Mirror) i.next();
-
-            wagonManager.addMirror( mirror.getId(), mirror.getMirrorOf(), mirror.getUrl() );
+            container.release( wagonManager );
-        else if ( min > 0 )
+        else if ( min == 0 )
