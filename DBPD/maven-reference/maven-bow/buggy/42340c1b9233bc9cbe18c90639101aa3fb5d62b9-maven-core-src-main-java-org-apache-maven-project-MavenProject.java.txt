o Used project realm during dependency resolution
o Fixed NPEs

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@793871 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.classworlds.realm.ClassRealm;
+    private ClassRealm classRealm;
+
-
-    public void setRemoteArtifactRepositories( List<ArtifactRepository> remoteArtifactRepositories )
-    {
-        this.remoteArtifactRepositories = remoteArtifactRepositories;
-    }
-
-    public List<ArtifactRepository> getRemoteArtifactRepositories()
-    {
-        return remoteArtifactRepositories;
-    }
+    public void setRemoteArtifactRepositories( List<ArtifactRepository> remoteArtifactRepositories )
+    {
+        this.remoteArtifactRepositories = remoteArtifactRepositories;
+    }
+
+    public List<ArtifactRepository> getRemoteArtifactRepositories()
+    {
+        if ( remoteArtifactRepositories == null )
+        {
+            remoteArtifactRepositories = new ArrayList<ArtifactRepository>();
+        }
+
+        return remoteArtifactRepositories;
+    }
+
+        if ( pluginArtifactRepositories == null )
+        {
+            pluginArtifactRepositories = new ArrayList<ArtifactRepository>();
+        }
+
+
+    /**
+     * Sets the project's class realm.
+     * 
+     * @param classRealm The class realm hosting the build extensions of this project, may be {@code null}.
+     */
+    public void setClassRealm( ClassRealm classRealm )
+    {
+        this.classRealm = classRealm;
+    }
+
+    /**
+     * Gets the project's class realm. This class realm hosts the build extensions of the project.
+     * 
+     * @return The project's class realm or {@code null}.
+     */
+    public ClassRealm getClassRealm()
+    {
+        return classRealm;
+    }
+
