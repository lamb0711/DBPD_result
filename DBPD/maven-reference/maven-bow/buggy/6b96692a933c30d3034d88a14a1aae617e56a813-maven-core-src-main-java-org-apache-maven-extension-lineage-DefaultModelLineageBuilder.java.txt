Merge of sisbell-maven-2.1-profile branch. Removes use of project lineage from builder.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@693332 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.maven.project.build.model;
+package org.apache.maven.extension.lineage;
+import org.apache.maven.project.ModelAndFile;
- * @see org.apache.maven.project.build.model.ModelLineageBuilder
+ * @see ModelLineageBuilder
-     * @see org.apache.maven.project.build.model.ModelLineageBuilder#buildModelLineage(java.io.File, org.apache.maven.artifact.repository.ArtifactRepository, java.util.List)
+     * @see ModelLineageBuilder#buildModelLineage(java.io.File, org.apache.maven.artifact.repository.ArtifactRepository, java.util.List)
-    public void resumeBuildingModelLineage( ModelLineage lineage,
-                                            ProjectBuilderConfiguration config,
-                                            boolean allowStubs,
-                                            boolean isReactorProject )
-        throws ProjectBuildingException
-    {
-        if ( lineage.size() == 0 )
-        {
-            throw new ProjectBuildingException( "unknown",
-                                                "Cannot resume a ModelLineage that doesn't contain at least one Model instance." );
-        }
-
-        List currentRemoteRepositories = lineage.getDeepestAncestorArtifactRepositoryList();
-
-        if ( currentRemoteRepositories == null )
-        {
-            currentRemoteRepositories = new ArrayList();
-        }
-
-        ModelAndFile current = new ModelAndFile( lineage.getDeepestAncestorModel(),
-                                                 lineage.getDeepestAncestorFile(),
-                                                 lineage.isDeepestAncestorUsingProfilesXml() );
-
-        // use the above information to re-bootstrap the resolution chain...
-        current = resolveParentPom( current,
-                                    currentRemoteRepositories,
-                                    config,
-                                    allowStubs,
-                                    isReactorProject);
-
-        while ( current != null )
-        {
-            lineage.addParent( current.getModel(),
-                               current.getFile(),
-                               currentRemoteRepositories,
-                               current.isValidProfilesXmlLocation() );
-
-            currentRemoteRepositories = updateRepositorySet( current.getModel(),
-                                                             currentRemoteRepositories,
-                                                             current.getFile(),
-                                                             config,
-                                                             current.isValidProfilesXmlLocation() );
-
-            current = resolveParentPom( current,
-                                        currentRemoteRepositories,
-                                        config,
-                                        allowStubs,
-                                        isReactorProject );
-        }
-    }
-
