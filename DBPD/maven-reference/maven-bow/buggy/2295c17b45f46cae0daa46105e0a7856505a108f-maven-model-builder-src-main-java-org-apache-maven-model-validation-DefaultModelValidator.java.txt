[MNG-6305] Validation of CI friendly version incorrect
 o Checkin that only the three expression changelist,
   revision and sha1 are valid in a version.
 o Added some tests.

+import java.util.regex.Matcher;
+    private static final Pattern CI_FRIENDLY_EXPRESSION = Pattern.compile( "\\$\\{(.+?)\\}" );
+
+    private static final List<String> CI_FRIENDLY_POSSIBLE_PROPERTY_NAMES =
+        Arrays.asList( AbstractStringBasedModelInterpolator.REVISION_PROPERTY,
+                       AbstractStringBasedModelInterpolator.CHANGELIST_PROPERTY,
+                       AbstractStringBasedModelInterpolator.SHA1_PROPERTY );
+
-        // module with the same groupId/artifactId this will fail the build 
+        // module with the same groupId/artifactId this will fail the build
-
-        string = string.trim();
-        if ( string.contains( "${" + AbstractStringBasedModelInterpolator.CHANGELIST_PROPERTY + "}" )
-            || string.contains( "${" + AbstractStringBasedModelInterpolator.REVISION_PROPERTY + "}" )
-            || string.contains( "${" + AbstractStringBasedModelInterpolator.SHA1_PROPERTY + "}" ) )
+        Matcher m = CI_FRIENDLY_EXPRESSION.matcher( string.trim() );
+        while ( m.find() )
-            return true;
+            if ( !CI_FRIENDLY_POSSIBLE_PROPERTY_NAMES.contains( m.group( 1 ) ) )
+            {
+                addViolation( problems, severity, version, fieldName, null,
+                              "contains an expression but should be a constant.", tracker );
+
+                return false;
+            }
-        addViolation( problems, severity, version, fieldName, null, "contains an expression but should be a constant.",
-                      tracker );
-
-        return false;
+        return true;
