[MNG-4466] Plugin Metaversion Compatibility

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@883537 13f79535-47bb-0310-9956-ffa450edef68

-                    validateVersion( "build.plugins.plugin.version", problems, errOn30, p.getVersion(), p.getKey() );
+                    validatePluginVersion( "build.plugins.plugin.version", problems, errOn30, p.getVersion(), p.getKey() );
+    private boolean validatePluginVersion( String fieldName, ModelProblemCollector problems, Severity severity, String string,
+                                     String sourceHint )
+    {
+        if ( string == null || string.length() <= 0 )
+        {
+            return true;
+        }
+
+        if ( !hasExpression( string ) && !"RELEASE".equals( string ) && !"LATEST".equals( string ) )
+        {
+            return true;
+        }
+
+        if ( sourceHint != null )
+        {
+            addViolation( problems, severity, "'" + fieldName + "' must be a valid version for " + sourceHint
+                + " but is '" + string + "'." );
+        }
+        else
+        {
+            addViolation( problems, severity, "'" + fieldName + "' must be a valid version but is '" + string + "'." );
+        }
+
+        return false;
+    }
+
