o pull from trunky dunk dunk


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@767707 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Iterator;
+import org.apache.maven.embedder.MavenEmbedder;
-        List goals = commandLine.getArgList();
+        List<String> goals = commandLine.getArgList();
-        List activeProfiles = new ArrayList();
+        List<String> activeProfiles = new ArrayList<String>();
-        List inactiveProfiles = new ArrayList();
+        List<String> inactiveProfiles = new ArrayList<String>();
+        File userToolchainsFile;
+        if ( commandLine.hasOption( CLIManager.ALTERNATE_USER_TOOLCHAINS ) )
+        {
+            userToolchainsFile = new File( commandLine.getOptionValue( CLIManager.ALTERNATE_USER_TOOLCHAINS ) );
+        }
+        else
+        {
+            userToolchainsFile = MavenEmbedder.DEFAULT_USER_TOOLCHAINS_FILE;
+        }
+
-            .setGlobalChecksumPolicy( globalChecksumPolicy ); // default: warn
+            .setGlobalChecksumPolicy( globalChecksumPolicy ) // default: warn
+            .setUserToolchainsFile( userToolchainsFile );
+        
-            Iterator i = envVars.entrySet().iterator();
-            while ( i.hasNext() )
+            for ( Entry<Object, Object> e : envVars.entrySet() )
-                Entry e = (Entry) i.next();
