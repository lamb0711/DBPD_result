[MNG-4412] Make legacy entry points to repository system pick offline mode from session

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@830281 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.execution.MavenSession;
+import org.apache.maven.plugin.LegacySupport;
-    
+
+    @Requirement
+    private LegacySupport legacySupport;
+
+    private void injectSession( RepositoryRequest request )
+    {
+        MavenSession session = legacySupport.getSession();
+
+        if ( session != null )
+        {
+            request.setOffline( session.isOffline() );
+        }
+    }
+
+        injectSession( request );
+        injectSession( request );
+        injectSession( request );
+
