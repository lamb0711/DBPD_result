print path to error for cyclical dependencies

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191839 13f79535-47bb-0310-9956-ffa450edef68

-                                        List remoteRepositories, String downloadUrl, Throwable t )
+                                        List remoteRepositories, String downloadUrl, List path, Throwable t )
-        super( constructMessage( message, groupId, artifactId, version, type, remoteRepositories, downloadUrl ), t );
+        super( constructMessage( message, groupId, artifactId, version, type, remoteRepositories, downloadUrl, path ),
+               t );
-                                        List remoteRepositories, String downloadUrl )
+                                        List remoteRepositories, String downloadUrl, Throwable t )
-        super( constructMessage( message, groupId, artifactId, version, type, remoteRepositories, downloadUrl ) );
+        this( message, groupId, artifactId, version, type, remoteRepositories, downloadUrl, null, t );
+    }
+
+    public ArtifactResolutionException( String message, String groupId, String artifactId, String version, String type,
+                                        List remoteRepositories, String downloadUrl, List path )
+    {
+        super( constructMessage( message, groupId, artifactId, version, type, remoteRepositories, downloadUrl, path ) );
-                                            String type, List remoteRepositories, String downloadUrl )
+                                            String type, List remoteRepositories, String downloadUrl, List path )
+        if ( path != null )
+        {
+            sb.append( LS );
+            sb.append( "Path to dependency: " );
+            sb.append( LS );
+            int num = 1;
+            for ( Iterator i = path.iterator(); i.hasNext(); )
+            {
+                sb.append( "\t" );
+                sb.append( num++ );
+                sb.append( ") " );
+                sb.append( i.next() );
+                sb.append( LS );
+            }
+            sb.append( LS );
+        }
+
-    public ArtifactResolutionException( String message, Artifact artifact, List remoteRepositories, Throwable t )
+    public ArtifactResolutionException( String message, Artifact artifact, List path, List remoteRepositories,
+                                        Throwable t )
-              remoteRepositories, artifact.getDownloadUrl(), t );
+              remoteRepositories, artifact.getDownloadUrl(), path, t );
-    public ArtifactResolutionException( String message, Artifact artifact )
+    public ArtifactResolutionException( String message, Artifact artifact, List remoteRepositories, Throwable t )
+    {
+        // TODO: path
+        this( message, artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getType(),
+              remoteRepositories, artifact.getDownloadUrl(), null, t );
+    }
+
+    public ArtifactResolutionException( String message, Artifact artifact, List path )
-              artifact.getDownloadUrl() );
+              artifact.getDownloadUrl(), path );
