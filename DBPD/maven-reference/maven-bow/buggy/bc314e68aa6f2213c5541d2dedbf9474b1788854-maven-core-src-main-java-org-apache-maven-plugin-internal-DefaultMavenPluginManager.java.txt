o Concentrated all plugin artifact resolution in one component

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@911645 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.resolver.ArtifactResolutionException;
-import org.apache.maven.artifact.resolver.ArtifactResolutionResult;
-import org.apache.maven.artifact.resolver.ResolutionErrorHandler;
-import org.apache.maven.repository.RepositorySystem;
-    protected RepositorySystem repositorySystem;
-
-    @Requirement
-    private ResolutionErrorHandler resolutionErrorHandler;
-
-    @Requirement
-            Artifact pluginArtifact = resolvePluginArtifact( plugin, repositoryRequest );
+            Artifact pluginArtifact =
+                pluginDependenciesResolver.resolve( plugin, new ArtifactResolutionRequest( repositoryRequest ) );
-    private Artifact resolvePluginArtifact( Plugin plugin, RepositoryRequest repositoryRequest )
-        throws PluginResolutionException
-    {
-        Artifact pluginArtifact = repositorySystem.createPluginArtifact( plugin );
-
-        ArtifactResolutionRequest request = new ArtifactResolutionRequest( repositoryRequest );
-        request.setArtifact( pluginArtifact );
-        request.setResolveTransitively( false );
-
-        ArtifactResolutionResult result = repositorySystem.resolve( request );
-
-        try
-        {
-            resolutionErrorHandler.throwErrors( request, result );
-        }
-        catch ( ArtifactResolutionException e )
-        {
-            throw new PluginResolutionException( plugin, e );
-        }
-
-        return pluginArtifact;
-    }
-
-        List<Artifact> pluginArtifacts = resolvePluginArtifacts( plugin, pluginArtifact, request, dependencyFilter );
+        List<Artifact> pluginArtifacts =
+            pluginDependenciesResolver.resolve( plugin, pluginArtifact, request, dependencyFilter );
-    /**
-     * Gets all artifacts required for the class realm of the specified plugin. An artifact in the result list that has
-     * no file set is meant to be excluded from the plugin realm in favor of the equivalent library from the current
-     * core distro.
-     */
-    // FIXME: only exposed to allow workaround for MNG-4194
-    protected List<Artifact> resolvePluginArtifacts( Plugin plugin, Artifact pluginArtifact,
-                                                     ArtifactResolutionRequest request,
-                                                     ArtifactFilter dependencyFilter )
-        throws PluginResolutionException
-    {
-        return pluginDependenciesResolver.resolve( plugin, pluginArtifact, request, dependencyFilter );
-    }
-
