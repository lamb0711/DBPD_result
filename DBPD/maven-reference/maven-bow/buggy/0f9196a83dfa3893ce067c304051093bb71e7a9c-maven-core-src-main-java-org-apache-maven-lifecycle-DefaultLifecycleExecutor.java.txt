Resolving: MNG-608 (deprecate for now, remove later...notes in TODOs)

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@231084 13f79535-47bb-0310-9956-ffa450edef68

-                    mojo = getMojoDescriptor( task, session, project, true );
+                    mojo = getMojoDescriptor( task, session, project, task, true );
-        MojoDescriptor mojoDescriptor = getMojoDescriptor( task, session, project, true );
+        MojoDescriptor mojoDescriptor = getMojoDescriptor( task, session, project, task, true );
-                    MojoDescriptor mojoDescriptor = getMojoDescriptor( goal, session, project, true );
+                    MojoDescriptor mojoDescriptor = getMojoDescriptor( goal, session, project, selectedPhase, false );
-                                              boolean canUsePrefixes )
+                                              String invokedVia, boolean canUsePrefix )
-        if ( numTokens == 2 && canUsePrefixes )
+        
+        // TODO: Add "&& canUsePrefix" to this boolean expression, and remove deprecation warning in next release.
+        if ( numTokens == 2 )
+            if ( !canUsePrefix )
+            {
+                getLogger().warn( "DEPRECATED: Mapped-prefix lookup of mojos are only supported from direct invocation. Please use specification of the form groupId:artifactId[:version]:goal instead. (Offending mojo: \'" + task + "\', invoked via: \'" + invokedVia + "\')" );
+            }
+            
-        else if ( numTokens == 4 )
+        else if ( numTokens == 3 || numTokens == 4 )
-            plugin.setVersion( tok.nextToken() );
+            
+            if ( numTokens == 4 )
+            {
+                plugin.setVersion( tok.nextToken() );
+            }
