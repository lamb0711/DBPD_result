PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.Artifact;
+import org.apache.maven.artifact.factory.ArtifactFactory;
-    private static final String[] DEFAULT_EXCLUDES = new String[]{"**/*Bean.class", "**/*CMP.class",
-                                                                  "**/*Session.class", "**/package.html"};
+    private static final String[] DEFAULT_EXCLUDES = new String[]{"**/*Bean.class", "**/*CMP.class", "**/*Session.class", "**/package.html"};
-     * 
-     * 
+     * @parameter expression="${component.org.apache.maven.artifact.factory.ArtifactFactory}"
+     * @required
+     * @readonly
+     */
+    private ArtifactFactory artifactFactory;
+
+    /**
+
+                Artifact artifact = artifactFactory.createArtifactWithClassifier( project.getGroupId(),
+                                                                                  project.getArtifactId(),
+                                                                                  project.getVersion(), null,
+                                                                                  "ejb-client", "client" );
+                artifact.setFile( clientJarFile );
+
+                project.addAttachedArtifact( artifact );
