propogate more ArtifactResolutionExceptions directly

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@169557 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepository;
+
+import java.util.Iterator;
+import java.util.List;
-    public ArtifactResolutionException( String message, String groupId, String artifactId, String version, String type, Throwable t )
+    private List remoteRepositories;
+
+    public ArtifactResolutionException( String message, String groupId, String artifactId, String version, String type,
+                                        List remoteRepositories, Throwable t )
-        super( "Unable to resolve artifact " + groupId + ":" + artifactId + ":" + version + ":" + type + "\n" + message, t );
+        super( constructMessage( message, groupId, artifactId, version, type, remoteRepositories ), t );
+        this.remoteRepositories = remoteRepositories;
-    public ArtifactResolutionException( String message, Artifact artifact, Throwable t )
+    private static final String LS = System.getProperty( "line.separator" );
+
+    private static String constructMessage( String message, String groupId, String artifactId, String version,
+                                            String type, List remoteRepositories )
-        this( message, artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getType(), t );
+        StringBuffer sb = new StringBuffer();
+
+        sb.append( message );
+        sb.append( LS );
+        sb.append( LS );
+        sb.append( groupId + ":" + artifactId + ":" + version + ":" + type );
+        sb.append( LS );
+        sb.append( LS );
+        sb.append( "from the specified remote repositories:" );
+        sb.append( LS );
+        sb.append( LS );
+
+        for ( Iterator i = remoteRepositories.iterator(); i.hasNext(); )
+        {
+            ArtifactRepository remoteRepository = (ArtifactRepository) i.next();
+
+            sb.append( remoteRepository.getUrl() );
+            if ( i.hasNext() )
+            {
+                sb.append( ", " );
+            }
+        }
+
+        return sb.toString();
+    }
+
+    public ArtifactResolutionException( String message, Artifact artifact, List remoteRepositories, Throwable t )
+    {
+        this( message, artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), artifact.getType(),
+              remoteRepositories, t );
+
+    public List getRemoteRepositories()
+    {
+        return remoteRepositories;
+    }
