o Prevented crappy plugins from messing with container-managed artifact handlers

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@990345 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.concurrent.ConcurrentHashMap;
+
+    private Map<String, ArtifactHandler> unmanagedHandlers = new ConcurrentHashMap<String, ArtifactHandler>();
+
-        ArtifactHandler handler = artifactHandlers.get( type );
+        ArtifactHandler handler = unmanagedHandlers.get( type );
-            handler = new DefaultArtifactHandler( type );
+            handler = artifactHandlers.get( type );
+
+            if ( handler == null )
+            {
+                handler = new DefaultArtifactHandler( type );
+            }
-        artifactHandlers.putAll( handlers );
+        // legacy support for maven-gpg-plugin:1.0
+        unmanagedHandlers.putAll( handlers );
+    @Deprecated
+
