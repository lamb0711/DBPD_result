PR: MNG-847
merge metadata if it is duplicated

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@280086 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.Map;
-    private List metadataList;
-
-    private boolean release = false;
+    private boolean release;
+    private Map metadataMap;
+
-        if ( metadataList == null )
+        if ( metadataMap == null )
-            metadataList = new ArrayList();
+            metadataMap = new HashMap();
-        metadataList.add( metadata );
+
+        ArtifactMetadata m = (ArtifactMetadata) metadataMap.get( metadata.getKey() );
+        if ( m != null )
+        {
+            m.merge( metadata );
+        }
+        else
+        {
+            metadataMap.put( metadata.getKey(), metadata );
+        }
-    public List getMetadataList()
+    public Collection getMetadataList()
-        return metadataList == null ? Collections.EMPTY_LIST : metadataList;
+        return metadataMap == null ? Collections.EMPTY_LIST : metadataMap.values();
