o Refactored code

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@934381 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.PluginExecution;
-                addViolation( problems, Severity.FATAL, "The parent element cannot have the same ID as the project." );
+                addViolation( problems, Severity.FATAL, "parent.artifactId", null, "must be changed"
+                    + ", the parent element cannot have the same groupId:artifactId as the project." );
+
+            Set<String> executionIds = new HashSet<String>();
+
+            for ( PluginExecution exec : plugin.getExecutions() )
+            {
+                if ( !executionIds.add( exec.getId() ) )
+                {
+                    addViolation( problems, Severity.ERROR, "build.plugins.plugin[" + plugin.getKey()
+                        + "].executions.execution.id", null, "must be unique but found duplicate execution with id "
+                        + exec.getId() );
+                }
+            }
-            forcePluginExecutionIdCollision( model, problems );
-
-    private void forcePluginExecutionIdCollision( Model model, ModelProblemCollector problems )
-    {
-        Build build = model.getBuild();
-
-        if ( build != null )
-        {
-            List<Plugin> plugins = build.getPlugins();
-
-            if ( plugins != null )
-            {
-                for ( Plugin plugin : plugins )
-                {
-                    // this will force an IllegalStateException, even if we don't have to do inheritance assembly.
-                    try
-                    {
-                        plugin.getExecutionsAsMap();
-                    }
-                    catch ( IllegalStateException collisionException )
-                    {
-                        addViolation( problems, Severity.ERROR, collisionException.getMessage() );
-                    }
-                }
-            }
-        }
-    }
-
