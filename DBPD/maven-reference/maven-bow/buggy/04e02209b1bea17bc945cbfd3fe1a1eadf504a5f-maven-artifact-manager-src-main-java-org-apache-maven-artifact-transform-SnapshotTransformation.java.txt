PR: MNG-122
use real exceptions for repository metadata

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@320683 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.metadata.ArtifactMetadataRetrievalException;
+import org.apache.maven.artifact.deployer.ArtifactDeploymentException;
+import org.apache.maven.artifact.repository.metadata.RepositoryMetadataResolutionException;
+import org.apache.maven.artifact.resolver.ArtifactResolutionException;
-        throws ArtifactMetadataRetrievalException
+        throws ArtifactResolutionException
-            String version = resolveVersion( artifact, localRepository, remoteRepositories );
-            artifact.updateVersion( version, localRepository );
+            try
+            {
+                String version = resolveVersion( artifact, localRepository, remoteRepositories );
+                artifact.updateVersion( version, localRepository );
+            }
+            catch ( RepositoryMetadataResolutionException e )
+            {
+                throw new ArtifactResolutionException( e.getMessage(), artifact, e );
+            }
-        throws ArtifactMetadataRetrievalException
-        throws ArtifactMetadataRetrievalException
+        throws ArtifactDeploymentException
-            int buildNumber = resolveLatestSnapshotBuildNumber( artifact, localRepository, remoteRepository );
+            try
+            {
+                int buildNumber = resolveLatestSnapshotBuildNumber( artifact, localRepository, remoteRepository );
-            snapshot.setBuildNumber( buildNumber + 1 );
+                snapshot.setBuildNumber( buildNumber + 1 );
+            }
+            catch ( RepositoryMetadataResolutionException e )
+            {
+                throw new ArtifactDeploymentException( "Error retrieving previous build number for artifact '" +
+                    artifact.getDependencyConflictId() + "': " + e.getMessage(), e );
+            }
-        throws ArtifactMetadataRetrievalException
+        throws RepositoryMetadataResolutionException
-            throw new ArtifactMetadataRetrievalException(
+            throw new RepositoryMetadataResolutionException(
