start to enhance the lifecycle. Need to pre-process plugins as currently goals are only executed if added to a phase after the current goal. Also need plugin configuration to activate these changes.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163419 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.LifecycleExecutor;
+import org.apache.maven.lifecycle.Phase;
+    // TODO: remove
+    private LifecycleExecutor lifecycleExecutor;
+
+            String id = mojoDescriptor.getPhase();
+
+            if ( id != null )
+            {
+                Phase phase = lifecycleExecutor.getPhase( id );
+
+                if ( phase != null )
+                {
+                    // TODO: remove debugging
+                    System.err.println( "adding " + mavenMojoDescriptor.getId() + " to phase " + phase.getId() );
+                    phase.getGoals().add( mavenMojoDescriptor.getId() );
+                }
+                else
+                {
+                    // TODO: this should fail
+                }
+            }
+
+        // TODO: these should be configured, not instantiated here
+
+        lifecycleExecutor = (LifecycleExecutor) container.lookup( LifecycleExecutor.ROLE );
+
