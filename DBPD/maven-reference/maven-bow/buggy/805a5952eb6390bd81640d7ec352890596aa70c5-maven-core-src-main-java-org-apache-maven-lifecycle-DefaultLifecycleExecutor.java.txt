Resolving: MNG-1052

o Added pluginManagement injection to MavenProject.addPlugin(..) so that no Plugin definition added to the project can go without having managed info injected into it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@293454 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.model.PluginManagement;
-import org.apache.maven.project.injection.ModelDefaultsInjector;
-    private ModelDefaultsInjector modelDefaultsInjector;
-
-        injectHandlerPluginConfiguration( project, plugin );
+        // this has been simplified from the old code that injected the plugin management stuff, since
+        // pluginManagement injection is now handled by the project method.
+        project.addPlugin( plugin );
-    private void injectHandlerPluginConfiguration( MavenProject project, Plugin plugin )
-    {
-        String key = plugin.getKey();
-
-        Plugin buildPlugin = (Plugin) project.getBuild().getPluginsAsMap().get( key );
-
-        if ( buildPlugin == null )
-        {
-            PluginManagement pluginManagement = project.getPluginManagement();
-            if ( pluginManagement != null )
-            {
-                Plugin managedPlugin = (Plugin) pluginManagement.getPluginsAsMap().get( key );
-
-                if ( managedPlugin != null )
-                {
-                    modelDefaultsInjector.mergePluginWithDefaults( plugin, managedPlugin );
-                }
-            }
-
-            project.addPlugin( plugin );
-        }
-    }
-
