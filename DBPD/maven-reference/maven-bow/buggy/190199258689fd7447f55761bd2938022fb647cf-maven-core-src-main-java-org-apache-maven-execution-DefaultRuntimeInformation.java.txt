PR: MNG-122
exception clean up phase 2

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@320675 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.personality.plexus.lifecycle.phase.Initializable;
+import org.codehaus.plexus.personality.plexus.lifecycle.phase.InitializationException;
-import java.io.InputStream;
+import java.io.InputStream;
-    implements RuntimeInformation
+    implements RuntimeInformation, Initializable
-        throws IOException
-        if ( applicationVersion == null )
-        {
-            InputStream resourceAsStream = null;
-            try
-            {
-                Properties properties = new Properties();
-                resourceAsStream = getClass().getClassLoader().getResourceAsStream(
-                    "META-INF/maven/org.apache.maven/maven-core/pom.properties" );
-                properties.load( resourceAsStream );
-
-                applicationVersion = new DefaultArtifactVersion( properties.getProperty( "version" ) );
-            }
-            finally
-            {
-                IOUtil.close( resourceAsStream );
-            }
-        }
+
+    public void initialize()
+        throws InitializationException
+    {
+        InputStream resourceAsStream = null;
+        try
+        {
+            Properties properties = new Properties();
+            resourceAsStream = getClass().getClassLoader().getResourceAsStream(
+                "META-INF/maven/org.apache.maven/maven-core/pom.properties" );
+            properties.load( resourceAsStream );
+
+            String property = properties.getProperty( "version" );
+            if ( property == null )
+            {
+                throw new InitializationException( "maven-core properties did not include the version" );
+            }
+
+            applicationVersion = new DefaultArtifactVersion( property );
+        }
+        catch ( IOException e )
+        {
+            throw new InitializationException( "Unable to read properties file from maven-core", e );
+        }
+        finally
+        {
+            IOUtil.close( resourceAsStream );
+        }
+    }
