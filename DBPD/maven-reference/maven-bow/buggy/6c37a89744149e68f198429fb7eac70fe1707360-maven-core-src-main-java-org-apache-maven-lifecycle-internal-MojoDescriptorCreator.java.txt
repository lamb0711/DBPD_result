[MNG-4756] Aether integration


git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@988749 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.repository.DefaultRepositoryRequest;
-import org.apache.maven.artifact.repository.RepositoryRequest;
-        RepositoryRequest repositoryRequest = DefaultRepositoryRequest.getRepositoryRequest( session, project );
-
-            resolvePluginVersion( plugin, repositoryRequest );
+            resolvePluginVersion( plugin, session, project );
-        return pluginManager.getMojoDescriptor( plugin, goal, repositoryRequest );
+        return pluginManager.getMojoDescriptor( plugin, goal, project.getRemotePluginRepositories(),
+                                                session.getRepositorySession() );
-    private void resolvePluginVersion( Plugin plugin, RepositoryRequest repositoryRequest )
+    private void resolvePluginVersion( Plugin plugin, MavenSession session, MavenProject project )
-        PluginVersionRequest versionRequest = new DefaultPluginVersionRequest( plugin, repositoryRequest );
+        PluginVersionRequest versionRequest =
+            new DefaultPluginVersionRequest( plugin, session.getRepositorySession(),
+                                             project.getRemotePluginRepositories() );
