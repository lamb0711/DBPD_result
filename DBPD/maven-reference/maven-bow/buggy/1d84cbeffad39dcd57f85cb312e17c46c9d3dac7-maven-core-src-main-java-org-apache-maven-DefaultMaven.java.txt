MNG-5578: Make the workspace reader pluggable by creating a session scope where the MavenSession created can be injected in implementations that have the @SessionScoped annotation

+    @Requirement
+    private SessionScope sessionScope;
+        
+        try
+        {
+            session.setProjectMap( getProjectMap( session.getProjects() ) );
+        }
+        catch ( DuplicateProjectException e )
+        {
+            return addExceptionToResult( result, e );
+        }
+        
+        WorkspaceReader reactorWorkspace;
+        sessionScope.enter();
+        sessionScope.seed( MavenSession.class, session );
+        try
+        {
+            reactorWorkspace = container.lookup( WorkspaceReader.class );
+        }
+        catch ( ComponentLookupException e )
+        {
+            return addExceptionToResult( result, e );
+        }
+        
-        ReactorReader reactorRepository = null;
-        try
-        {
-            reactorRepository = new ReactorReader( session, getProjectMap( session.getProjects() ) );
-        }
-        catch ( DuplicateProjectException e )
-        {
-            return addExceptionToResult( result, e );
-        }
-
-        repoSession.setWorkspaceReader( ChainedWorkspaceReader.newInstance( reactorRepository,
+        repoSession.setWorkspaceReader( ChainedWorkspaceReader.newInstance( reactorWorkspace,
+        sessionScope.exit();
+
