Initial version of war plugin.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163471 13f79535-47bb-0310-9956-ffa450edef68

- *  default="#basedir/src/webapp"
+ *  default="#basedir/src/main/webapp"
- *  name="warSourceIncludes"
+ *  name="warSourceExcludes"
- *  default="#project.build.output/#project.build.finalName"
+ *  default="#project.build.directory/#project.build.finalName"
- *  default="#project.build.output"
+ *  default="#project.build.directory"
-    public static final String WEB_INF = "WEB_INF";
+    public static final String WEB_INF = "WEB-INF";
-                FileUtils.copyDirectory( sourceDirectory, webappDirectory, includes, excludes );
+                //TODO : Use includes and excludes
+                FileUtils.copyDirectoryStructure( sourceDirectory, webappDirectory );
-                //archiver.setArchiver( new WarArchiver() );
+                WarArchiver warArchiver = new WarArchiver();
+
+                archiver.setArchiver( warArchiver );
-                archiver.getArchiver().addDirectory( webappDirectory, new String[] { "**/**" }, null );
+                warArchiver.addDirectory( webappDirectory, new String[] { "**/**" }, new String[] { "**/WEB-INF/web.xml" } );
+
+                warArchiver.setWebxml( new File( webappDirectory, "WEB-INF/web.xml" ) );
