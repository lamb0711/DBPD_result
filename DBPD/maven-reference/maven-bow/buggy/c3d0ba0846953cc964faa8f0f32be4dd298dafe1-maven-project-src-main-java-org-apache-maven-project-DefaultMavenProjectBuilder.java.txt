use managed versions for project


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191783 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Dependency;
+import org.apache.maven.model.DependencyManagement;
-        Artifact artifact = artifactFactory.createArtifact( project.getGroupId(), project.getArtifactId(),
-                                                            project.getVersion(), null, project.getPackaging() );
+        Artifact projectArtifact = artifactFactory.createArtifact( project.getGroupId(), project.getArtifactId(),
+                                                                   project.getVersion(), null, project.getPackaging() );
+        Map managedVersions = createManagedVersionMap( project.getDependencyManagement() );
-                                                                                artifact,
-                                                                                project.getRemoteArtifactRepositories(),
+                                                                                projectArtifact, managedVersions,
+                                                                                project.getRemoteArtifactRepositories(),
+    private Map createManagedVersionMap( DependencyManagement dependencyManagement )
+    {
+        Map map = new HashMap();
+        for ( Iterator i = dependencyManagement.getDependencies().iterator(); i.hasNext(); )
+        {
+            Dependency d = (Dependency) i.next();
+
+            Artifact artifact = artifactFactory.createArtifact( d.getGroupId(), d.getArtifactId(), d.getVersion(),
+                                                                d.getScope(), d.getType(), null );
+
+            map.put( d.getManagementKey(), artifact );
+        }
+        return map;
+    }
+
