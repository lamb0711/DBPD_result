add artifact metadata on installation of snapshot in a local repository


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163676 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.logging.AbstractLogEnabled;
+import org.apache.maven.artifact.metadata.ArtifactMetadata;
-    extends AbstractLogEnabled
-
+    protected abstract String metadataLayoutPattern();
+
-        String path = layoutPattern();
-
-        String groupPath = groupIdAsPath( artifact.getGroupId() );
-
-        path = StringUtils.replace( path, "${groupPath}", groupPath );
-
-        path = StringUtils.replace( path, "${artifactId}", artifact.getArtifactId() );
-
-        path = StringUtils.replace( path, "${version}", artifact.getVersion() );
+        String path = basicPathOf( artifact, layoutPattern() );
+        return path;
+    }
+
+    public String pathOfMetadata( ArtifactMetadata metadata )
+        throws ArtifactPathFormatException
+    {
+        String path = basicPathOf( metadata.getArtifact(), metadataLayoutPattern() );
+
+        path = StringUtils.replace( path, "${metadataFilename}", metadata.getFilename() );
+
+        return path;
+    }
+
+    private String basicPathOf( Artifact artifact, String pattern )
+        throws ArtifactPathFormatException
+    {
+        String path = pattern;
+
+        String groupPath = groupIdAsPath( artifact.getGroupId() );
+
+        path = StringUtils.replace( path, "${groupPath}", groupPath );
+
+        path = StringUtils.replace( path, "${artifactId}", artifact.getArtifactId() );
+
+        path = StringUtils.replace( path, "${version}", artifact.getVersion() );
+
-
