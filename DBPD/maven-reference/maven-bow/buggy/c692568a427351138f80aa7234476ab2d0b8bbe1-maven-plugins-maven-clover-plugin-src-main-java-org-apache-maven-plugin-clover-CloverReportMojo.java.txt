Do not extend AbstractMavenReport as it does not support externally generated HTML report files (see MNG-645). Indeed, in our case it is Clover which generates the report files.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@225267 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.reporting.MavenReport;
+import org.apache.maven.plugin.AbstractMojo;
+import org.apache.maven.plugin.MojoExecutionException;
+import org.codehaus.doxia.sink.Sink;
+import org.codehaus.doxia.module.xhtml.XhtmlSink;
+import java.io.File;
-public class CloverReportMojo
-    extends AbstractMavenReport
+public class CloverReportMojo extends AbstractMojo implements MavenReport
+    private File reportOutputDirectory;
+
+
+    // The methods below are required because we don't extend AbstractMavenReport. The reason is that
+    // AbstractMavenReport does not support externally generated HTML report files.
+
+    /**
+     * @see org.apache.maven.reporting.MavenReport#getReportOutputDirectory()
+     */
+    public File getReportOutputDirectory()
+    {
+        if ( this.reportOutputDirectory == null )
+        {
+            this.reportOutputDirectory = new File( getOutputDirectory() );
+        }
+        return this.reportOutputDirectory;
+    }
+
+    /**
+     * @see MavenReport#setReportOutputDirectory(java.io.File)
+     */
+    public void setReportOutputDirectory( File reportOutputDirectory )
+    {
+        this.reportOutputDirectory = reportOutputDirectory;
+    }
+
+    /**
+     * @see org.apache.maven.reporting.MavenReport#getCategoryName()
+     */
+    public String getCategoryName()
+    {
+        return CATEGORY_PROJECT_REPORTS;
+    }
+
+    /**
+     * @see MavenReport#generate(org.codehaus.doxia.sink.Sink, java.util.Locale)
+     */
+    public void generate(Sink sink, Locale locale) throws MavenReportException
+    {
+        executeReport( locale );
+    }
+
+    /**
+     * @see org.apache.maven.plugin.Mojo#execute()
+     */
+    public void execute()
+        throws MojoExecutionException
+    {
+        try
+        {
+            generate( null, Locale.ENGLISH );
+        }
+        catch ( Exception e )
+        {
+            throw new MojoExecutionException( "An error has occurred in " + getName( Locale.ENGLISH )
+                + " report generation.", e );
+        }
+    }
