PR: MNG-326
take plugins, reports and extensions into account when sorting modules for reactor build

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@225717 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Extension;
+import org.apache.maven.model.Plugin;
+
+            List buildPlugins = project.getBuildPlugins();
+            if ( buildPlugins != null )
+            {
+                for ( Iterator j = buildPlugins.iterator(); j.hasNext(); )
+                {
+                    Plugin plugin = (Plugin) j.next();
+                    String pluginId = getPluginId( plugin );
+                    if ( dag.getVertex( pluginId ) != null )
+                    {
+                        dag.addEdge( id, pluginId );
+                    }
+                }
+            }
+
+            List reportPlugins = project.getReportPlugins();
+            if ( reportPlugins != null )
+            {
+                for ( Iterator j = reportPlugins.iterator(); j.hasNext(); )
+                {
+                    Plugin plugin = (Plugin) j.next();
+                    String pluginId = getPluginId( plugin );
+                    if ( dag.getVertex( pluginId ) != null )
+                    {
+                        dag.addEdge( id, pluginId );
+                    }
+                }
+            }
+
+            for ( Iterator j = project.getBuildExtensions().iterator(); j.hasNext(); )
+            {
+                Extension extension = (Extension) j.next();
+                String extensionId = getExtensionId( extension );
+                if ( dag.getVertex( extensionId ) != null )
+                {
+                    dag.addEdge( id, extensionId );
+                }
+            }
+    private static String getExtensionId( Extension extension )
+    {
+        return extension.getGroupId() + ":" + extension.getArtifactId();
+    }
+
+    private static String getPluginId( Plugin plugin )
+    {
+        return plugin.getGroupId() + ":" + plugin.getArtifactId();
+    }
+
