o take the plugin update registry out of the lifecycle mapping for plugins
o change the way mojo executions are processed and match up the executions when extracting configuration
o give mojo executions originating from the CLI the "default-<goal>" execution id



git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@777166 13f79535-47bb-0310-9956-ffa450edef68

-                MojoExecution mojoExecution = new MojoExecution( mojoDescriptor );
+                MojoExecution mojoExecution = new MojoExecution( mojoDescriptor, "default-" + mojoDescriptor.getGoal() );
-                        mojos.add( new MojoExecution( "org.apache.maven.plugins", "maven-clean-plugin", "2.3", "clean", null ) );
+                        mojos.add( new MojoExecution( "org.apache.maven.plugins", "maven-clean-plugin", "2.3", "clean", "default-clean" ) );
-    
-    //this will get the wrong configuration because it's only matching the goal not the execution id
-    
+        
-    {                
+    {
+        //System.out.println( mojoExecution.getGoal() + " : executionid: " + mojoExecution.getExecutionId() );
+        
-            for ( String goal : e.getGoals() )
+            if ( mojoExecution.getExecutionId().equals( e.getId() ) )
-                if ( mojoExecution.getGoal().equals( goal ) )
+                for ( String goal : e.getGoals() )
-                    Xpp3Dom executionConfiguration = (Xpp3Dom) e.getConfiguration();
+                    if ( mojoExecution.getGoal().equals( goal ) )
+                    {
+                        Xpp3Dom executionConfiguration = (Xpp3Dom) e.getConfiguration();
-                    Xpp3Dom mojoConfiguration = extractMojoConfiguration( executionConfiguration, mojoExecution.getMojoDescriptor() );
+                        Xpp3Dom mojoConfiguration = extractMojoConfiguration( executionConfiguration, mojoExecution.getMojoDescriptor() );
-                    mojoExecution.setConfiguration( mojoConfiguration );
+                        mojoExecution.setConfiguration( mojoConfiguration );
+                    }
-    }
-    
+    }    
