o Tuned code

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@833044 13f79535-47bb-0310-9956-ffa450edef68

-            List<Plugin> original = build.getPlugins();
-            Map<Object, Plugin> normalized = new LinkedHashMap<Object, Plugin>();
+            List<Plugin> plugins = build.getPlugins();
+            Map<Object, Plugin> normalized = new LinkedHashMap<Object, Plugin>( plugins.size() * 2 );
-            for ( Plugin plugin : original )
+            for ( Plugin plugin : plugins )
-            build.setPlugins( new ArrayList<Plugin>( normalized.values() ) );
+            if ( plugins.size() != normalized.size() )
+            {
+                build.setPlugins( new ArrayList<Plugin>( normalized.values() ) );
+            }
-        Map<String, Dependency> dependencies = new LinkedHashMap<String, Dependency>();
-        for ( Dependency dependency : model.getDependencies() )
+        List<Dependency> dependencies = model.getDependencies();
+        Map<String, Dependency> normalized = new LinkedHashMap<String, Dependency>( dependencies.size() * 2 );
+
+        for ( Dependency dependency : dependencies )
-            dependencies.put( dependency.getManagementKey(), dependency );
+            normalized.put( dependency.getManagementKey(), dependency );
-        model.setDependencies( new ArrayList<Dependency>( dependencies.values() ) );
+
+        if ( dependencies.size() != normalized.size() )
+        {
+            model.setDependencies( new ArrayList<Dependency>( normalized.values() ) );
+        }
