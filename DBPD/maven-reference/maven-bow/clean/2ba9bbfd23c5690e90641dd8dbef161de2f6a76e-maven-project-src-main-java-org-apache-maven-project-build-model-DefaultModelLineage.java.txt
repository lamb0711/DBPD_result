Fixing it0112 and it0115, and cleaning up extension isolation further. Also, adding a flag to tell whether an accompanying profiles.xml file is valid for any given POM file...when loaded from a repository (or stubbed), this flag should always be false.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@586061 13f79535-47bb-0310-9956-ffa450edef68

-    public void addParent( Model model, File pomFile, List artifactRepositories )
+    public void addParent( Model model, File pomFile, List artifactRepositories, boolean validProfilesXmlLocation )
-        tuples.add( new ModelLineageTuple( model, pomFile, artifactRepositories ) );
+        tuples.add( new ModelLineageTuple( model, pomFile, artifactRepositories, validProfilesXmlLocation ) );
+    public boolean isDeepestAncestorUsingProfilesXml()
+    {
+        if ( tuples.isEmpty() )
+        {
+            return false;
+        }
+
+        ModelLineageTuple tuple = (ModelLineageTuple) tuples.get( tuples.size() - 1 );
+
+        return tuple.validProfilesXmlLocation;
+    }
+
-    public void setOrigin( Model model, File pomFile, List artifactRepositories )
+    public void setOrigin( Model model, File pomFile, List artifactRepositories, boolean validProfilesXmlLocation )
-        tuples.add( new ModelLineageTuple( model, pomFile, artifactRepositories ) );
+        tuples.add( new ModelLineageTuple( model, pomFile, artifactRepositories, validProfilesXmlLocation ) );
+        private final boolean validProfilesXmlLocation;
+
+            validProfilesXmlLocation = false;
-        private ModelLineageTuple( Model model, File file, List remoteRepositories )
+        private ModelLineageTuple( Model model, File file, List remoteRepositories, boolean validProfilesXmlLocation )
+            this.validProfilesXmlLocation = validProfilesXmlLocation;
