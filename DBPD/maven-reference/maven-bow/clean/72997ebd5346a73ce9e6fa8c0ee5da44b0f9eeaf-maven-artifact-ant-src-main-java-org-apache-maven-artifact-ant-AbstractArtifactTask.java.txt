build an assembly that includes dependencies


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163968 13f79535-47bb-0310-9956-ffa450edef68

-        return createArtifactRepository( "local", "file://" + repository.getLocation(), repository.getLayout() );
+        ArtifactRepositoryLayout repositoryLayout = (ArtifactRepositoryLayout) lookup( ArtifactRepositoryLayout.ROLE,
+                                                                                       repository.getLayout() );
+        return new ArtifactRepository( "local", "file://" + repository.getLocation(), repositoryLayout );
-        return createArtifactRepository( "remote", repository.getUrl(), repository.getLayout() );
-    }
-
-    private ArtifactRepository createArtifactRepository( String id, String url, String layout )
-    {
-                                                                                       layout );
-        return new ArtifactRepository( id, url, repositoryLayout );
+                                                                                       repository.getLayout() );
+        return new ArtifactRepository( "remote", repository.getUrl(), repository.getAuthentication(), repositoryLayout );
