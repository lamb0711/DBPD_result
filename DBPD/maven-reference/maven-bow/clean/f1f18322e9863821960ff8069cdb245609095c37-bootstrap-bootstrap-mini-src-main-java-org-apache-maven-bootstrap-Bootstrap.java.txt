add a command line parser


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@344954 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.bootstrap.util.SimpleArgumentParser;
-    public Bootstrap( String[] args )
+    private static final String USER_HOME = System.getProperty( "user.home" );
+
+    public Bootstrap( SimpleArgumentParser parser )
-        String userHome = System.getProperty( "user.home" );
-
-        File settingsXml = getSettingsPath( userHome, args );
+        File settingsXml = new File( parser.getArgumentValue( "--settings" ) );
-        Settings settings = Settings.read( userHome, settingsXml );
+        Settings settings = Settings.read( USER_HOME, settingsXml );
+    public static SimpleArgumentParser createDefaultParser()
+    {
+        File defaultSettingsFile = new File( USER_HOME, ".m2/settings.xml" );
+        SimpleArgumentParser parser = new SimpleArgumentParser();
+        parser.addArgument( "--settings", "The location of the settings.xml file", "-s", true,
+                            defaultSettingsFile.getAbsolutePath() );
+        return parser;
+    }
+
-        Bootstrap bootstrap = new Bootstrap( args );
+        SimpleArgumentParser parser = createDefaultParser();
+
+        parser.parseCommandLineArguments( args );
+
+        Bootstrap bootstrap = new Bootstrap( parser );
-    private static File getSettingsPath( String userHome, String[] args )
-        throws Exception
-    {
-        for ( int i = 0; i < args.length; i++ )
-        {
-            if ( args[i].equals( "-s" ) || args[i].equals( "--settings" ) )
-            {
-                if ( i == args.length - 1 )
-                {
-                    throw new Exception( "missing argument to -s" );
-                }
-                return new File( args[i + 1] );
-            }
-        }
-        return new File( userHome, ".m2/settings.xml" );
-    }
-
