Added debug option to compiler configuration.
Copied compiler classes from plexus compiler.
Allow bootstrapping with debug info.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163301 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
+import java.util.Set;
+ *
+ *
+ *
+    implements Compiler
-    public String getClasspathString( String[] classpathElements )
+    public String getClasspathString( List classpathElements )
-        for ( int i = 0; i < classpathElements.length; i++ )
+        for ( Iterator it = classpathElements.iterator(); it.hasNext(); )
-            sb.append( classpathElements[i] ).append( PS );
+            String element = (String) it.next();
+            
+            sb.append( element ).append( PS );
-    protected String[] getSourceFiles( String[] sourceDirectories )
+    protected String[] getSourceFiles( CompilerConfiguration config )
-        for ( int i = 0; i < sourceDirectories.length; i++ )
+        for ( Iterator it = config.getSourceLocations().iterator(); it.hasNext(); )
+            String sourceLocation = (String) it.next();
+            
-            scanner.setBasedir( sourceDirectories[i] );
+            scanner.setBasedir( sourceLocation );
-            scanner.setIncludes( new String[]{"**/*.java"} );
+            Set includes = config.getIncludes();
+            if(includes != null && !includes.isEmpty()) {
+                String[] inclStrs = (String[])includes.toArray(new String[includes.size()]);
+                scanner.setIncludes( inclStrs );
+            }
+            else {
+                scanner.setIncludes(new String[] {"**/*.java"});
+            }
+
+            Set excludes = config.getIncludes();
+            if(excludes != null && !excludes.isEmpty()) {
+                String[] exclStrs = (String[])excludes.toArray(new String[excludes.size()]);
+                scanner.setIncludes( exclStrs );
+            }
-                File f = new File( sourceDirectories[i], sourceDirectorySources[j] );
+                File f =  new File( sourceLocation, sourceDirectorySources[j] );
