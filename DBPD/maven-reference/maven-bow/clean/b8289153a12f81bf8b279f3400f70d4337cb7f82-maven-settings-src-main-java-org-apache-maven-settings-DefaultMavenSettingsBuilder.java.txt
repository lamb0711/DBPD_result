Adding read/writeSettings() api to the maven-tools and the embedder along with unit tests in each place, and adding a cache object for the settings that is based on the build-context.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@510335 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.context.BuildContextManager;
+import org.apache.maven.settings.cache.SettingsCache;
-    // ----------------------------------------------------------------------
-    // MavenProfilesBuilder Implementation
-    // ----------------------------------------------------------------------
-
+    private BuildContextManager buildContextManager;
+    
+        SettingsCache cache = SettingsCache.read( buildContextManager, userSettingsFile, globalSettingsFile );
+        
+        if ( cache != null )
+        {
+            return cache.getSettings();
+        }
+        
+        // NOTE: We're allowing users to hang themselves here...if the global settings file is null,
+        // the default location is NOT read.
-            userSettingsFile = new File( new File( System.getProperty( "user.home" ) ), ".m2/settings.xml" );
+            userSettingsFile = DEFAULT_USER_SETTINGS_FILE;
+        
+        cache = new SettingsCache( userSettingsFile, globalSettingsFile, userSettings );
+        cache.store( buildContextManager );
-        return buildSettings( new File( new File( System.getProperty( "user.home" ) ), ".m2/settings.xml" ) );
+        return buildSettings( DEFAULT_USER_SETTINGS_FILE );
