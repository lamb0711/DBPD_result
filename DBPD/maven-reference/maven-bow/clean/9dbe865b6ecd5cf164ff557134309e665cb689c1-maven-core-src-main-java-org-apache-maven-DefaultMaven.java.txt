o the profile manager creation now happens up front in the embedder


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@571903 13f79535-47bb-0310-9956-ffa450edef68

-        ProfileManager globalProfileManager = new DefaultProfileManager( container, request.getProperties() );
-
-        globalProfileManager.loadSettingsProfiles( request.getSettings() );
-
-        globalProfileManager.explicitlyActivate( request.getActiveProfiles() );
-
-        globalProfileManager.explicitlyDeactivate( request.getInactiveProfiles() );
-            projects = getProjects( request, globalProfileManager );
+            projects = getProjects( request );
-    private List getProjects( MavenExecutionRequest request, ProfileManager globalProfileManager )
+    private List getProjects( MavenExecutionRequest request )
-            buildExtensionScanner.scanForBuildExtensions( files, request.getLocalRepository(), globalProfileManager );
+            buildExtensionScanner.scanForBuildExtensions( files, request.getLocalRepository(), request.getProfileManager() );
-                                        request.getSettings(), globalProfileManager, !request.useReactor() );
+                                        request.getSettings(), request.getProfileManager(), !request.useReactor() );
