o fixed mirror code
o more plugin manager wrangling


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@750568 13f79535-47bb-0310-9956-ffa450edef68

-    {
-
+    {        
-
-        String projectId = safeVersionlessKey( artifact.getGroupId(), artifact.getArtifactId() );
-        remoteArtifactRepositories = normalizeToArtifactRepositories( remoteArtifactRepositories, projectId );
-
-        Artifact projectArtifact;
-
+        
+        /*
-
-        ArtifactResolutionRequest request =
-            new ArtifactResolutionRequest( projectArtifact, localRepository, remoteArtifactRepositories );
+        */
+        
+        ArtifactResolutionRequest request = new ArtifactResolutionRequest( artifact, localRepository, remoteArtifactRepositories );
-
-        File file = projectArtifact.getFile();
-        artifact.setFile( file );
+        
-    private List normalizeToArtifactRepositories( List remoteArtifactRepositories, String projectId )
-        throws InvalidRepositoryException
-    {
-        List normalized = new ArrayList( remoteArtifactRepositories.size() );
-
-        boolean normalizationNeeded = false;
-        for ( Iterator it = remoteArtifactRepositories.iterator(); it.hasNext(); )
-        {
-            Object item = it.next();
-
-            if ( item instanceof ArtifactRepository )
-            {
-                normalized.add( item );
-            }
-            else if ( item instanceof Repository )
-            {
-                Repository repo = (Repository) item;
-                item = buildArtifactRepository( repo );
-
-                normalized.add( item );
-                normalizationNeeded = true;
-            }
-            else
-            {
-                throw new InvalidRepositoryException( projectId, "Error building artifact repository from non-repository information item: " + item );
-            }
-        }
-
-        if ( normalizationNeeded )
-        {
-            return normalized;
-        }
-        else
-        {
-            return remoteArtifactRepositories;
-        }
-    }
-
