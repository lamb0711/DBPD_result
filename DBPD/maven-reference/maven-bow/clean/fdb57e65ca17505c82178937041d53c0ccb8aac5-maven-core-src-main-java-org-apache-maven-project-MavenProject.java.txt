o Cleaned up code

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@798504 13f79535-47bb-0310-9956-ffa450edef68

-                File file = a.getFile();
-                                                
-                if ( file == null )
-                {
-                    throw new DependencyResolutionRequiredException( a );
-                }
-                list.add( file.getPath() );
+                addArtifactPath( a, list );
-        
-        /*
-        System.out.println( "TEST CLASSPATH: ");
-        for( String s : list )
-        {
-            System.out.println( ">>>>> " + s );
-        }
-        */
-        
+
-                    File file = a.getFile();
-                    if ( file == null )
-                    {
-                        throw new DependencyResolutionRequiredException( a );
-                    }
-                    list.add( file.getPath() );
+                    addArtifactPath( a, list );
-    private void addArtifactPath( Artifact a, List<String> list )
+    private void addArtifactPath( Artifact artifact, List<String> classpath )
-        File file = a.getFile();
-        if ( file != null )
+        File file = artifact.getFile();
+        if ( file == null )
-            list.add( file.getPath() );
+            throw new DependencyResolutionRequiredException( artifact );
-            String refId = getProjectReferenceId( a.getGroupId(), a.getArtifactId(), a.getVersion() );
-            MavenProject project = projectReferences.get( refId );
-
-            boolean projectDirFound = false;
-            if ( project != null )
-            {
-                if ( "test-jar".equals( a.getType() ) )
-                {
-                    File testOutputDir = new File( project.getBuild().getTestOutputDirectory() );
-                    if ( testOutputDir.exists() )
-                    {
-                        list.add( testOutputDir.getAbsolutePath() );
-                        projectDirFound = true;
-                    }
-                }
-                else
-                {
-                    list.add( project.getBuild().getOutputDirectory() );
-                    projectDirFound = true;
-                }
-            }
-            if ( !projectDirFound )
-            {
-                throw new DependencyResolutionRequiredException( a );
-            }
+            classpath.add( file.getPath() );
-        return groupId + ":" + artifactId + ":" + version;
+        StringBuilder buffer = new StringBuilder( 128 );
+        buffer.append( groupId ).append( ':' ).append( artifactId ).append( ':' ).append( version );
+        return buffer.toString();
