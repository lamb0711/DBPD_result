Fixed empty scm tag being add to pom.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@759417 13f79535-47bb-0310-9956-ffa450edef68

-        if(t.getScm() == null)
+        if((p == null || p.getScm() == null) && (c == null || c.getScm() == null))
-            t.setScm( new Scm() );    
+        	//return;
+        Scm targetScm = (t.getScm() == null) ? new Scm() : t.getScm();
+    
+        copyUrl( ((p != null) ? p.getScm() : null), c.getScm(), targetScm, c.getArtifactId(), p);
+        copyConnection( ((p != null) ? p.getScm() : null), c.getScm(), targetScm, c.getArtifactId(), p);
+        copyDeveloperConnection( ((p != null) ? p.getScm() : null), c.getScm(), targetScm, c.getArtifactId(), p);
+        copyTag( ( ( p != null ) ? p.getScm() : null ), c.getScm(), targetScm );
-        copyUrl( ((p != null) ? p.getScm() : null), c.getScm(), t.getScm(), c.getArtifactId(), p);
-        copyConnection( ((p != null) ? p.getScm() : null), c.getScm(), t.getScm(), c.getArtifactId(), p);
-        copyDeveloperConnection( ((p != null) ? p.getScm() : null), c.getScm(), t.getScm(), c.getArtifactId(), p);
-        copyTag( ( ( p != null ) ? p.getScm() : null ), c.getScm(), t.getScm() );
+        if(t.getScm() ==null && (targetScm.getConnection() !=null || targetScm.getDeveloperConnection() != null || targetScm.getUrl() != null))
+        {
+        	t.setScm(targetScm);
+        }     
