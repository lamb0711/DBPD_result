PR: MNG-958
Submitted by: Johnny R. Ruiz III
Reviewed by:  Brett Porter
optionally include site in assembly


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@314777 13f79535-47bb-0310-9956-ffa450edef68

-    private String basedir;
+    private File basedir;
+     * Directory for site generated.
+     *
+     * @parameter expression="${project.build.directory}/site"
+     * @readonly
+     */
+    private File siteDirectory;
+
+    /**
+     * Set to true to include the site generated by site:site goal.
+     *
+     * @parameter expression="${includeSite}" default-value="false"
+     */
+    private boolean includeSite;
+
+    /**
+
+        if ( includeSite )
+        {
+            includeSiteInAssembly( assembly );
+        }
+
-                directory = basedir;
+                directory = basedir.getAbsolutePath();
+    private void includeSiteInAssembly( Assembly assembly )
+        throws MojoExecutionException
+    {
+        if ( !siteDirectory.exists() )
+        {
+            throw new MojoExecutionException(
+                "site did not exist in the target directory - please run site:site before creating the assembly" );
+        }
+        getLog().info( "Adding site directory to assembly : " + siteDirectory );
+
+        FileSet siteFileSet = new FileSet();
+
+        siteFileSet.setDirectory( siteDirectory.getPath() );
+
+        siteFileSet.setOutputDirectory( "/site" );
+
+        assembly.addFileSet( siteFileSet );
+    }
