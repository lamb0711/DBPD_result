PR: MNG-1109
better handling for timeout and other transfer failed exceptions that are recoverable (ie metadata), and then blacklist the repository for performance.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@306560 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepositoryFactory;
+    private ArtifactRepositoryFactory repositoryFactory;
+
-        if ( policy.isEnabled() )
+        if ( !policy.isEnabled() )
+        {
+            getLogger().debug( "Skipping disabled repository " + repository.getId() );
+        }
+        else if ( repository.isBlacklisted() )
+        {
+            getLogger().debug( "Skipping blacklisted repository " + repository.getId() );
+        }
+        else
-        else
-        {
-            getLogger().debug( "Skipping disabled repository " + repository.getId() );
-        }
-            repository = new DefaultArtifactRepository( mirror.getId(), mirror.getUrl(), repository.getLayout(),
-                                                        repository.getSnapshots(), repository.getReleases() );
+            repository = repositoryFactory.createArtifactRepository( mirror.getId(), mirror.getUrl(),
+                                                                     repository.getLayout(), repository.getSnapshots(),
+                                                                     repository.getReleases() );
