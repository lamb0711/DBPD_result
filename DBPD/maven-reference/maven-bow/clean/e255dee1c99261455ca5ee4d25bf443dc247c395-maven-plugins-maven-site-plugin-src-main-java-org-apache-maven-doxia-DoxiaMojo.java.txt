- disable parent copying for now, it's broken (infinite loop)
- fix detection of files to correct two bugs: site.xml was incorrectly detected as a dupe of site.apt and identical filenames in different paths were incorrectly marked as dupes

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@226507 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashSet;
+import java.util.Set;
-                        List values = (List) entry.getValue();
+                        Set values = (Set) entry.getValue();
-                        if ( values != null && values.size() > 1 )
+                        if ( values.size() > 1 )
+/* Not working: 1) parentProject.getBasedir() returns the current basedir for some reason, so it copies inside itself
+which loops forever, and 2) this might be better working as a top-level aggregation rather than pushing from the
+subprojects...
+*/
-        if ( duplicate == null )
-        {
-            duplicate = new HashMap();
-        }
-
-            String filePattern = "**/" + key + ".*";
-
-            List files = FileUtils.getFileNames( directory, filePattern, defaultExcludes, true );
-            if ( files != null && files.size() > 0 )
+            Set tmp = (Set) duplicate.get( key.toLowerCase() );
+            if ( tmp == null )
-                List tmp = (List) duplicate.get( key.toLowerCase() );
-                if ( tmp == null )
-                {
-                    tmp = new ArrayList();
-                }
-                if ( !tmp.containsAll( files ) )
-                {
-                    tmp.addAll( files );
-                }
+                tmp = new HashSet();
+            tmp.add( key );
