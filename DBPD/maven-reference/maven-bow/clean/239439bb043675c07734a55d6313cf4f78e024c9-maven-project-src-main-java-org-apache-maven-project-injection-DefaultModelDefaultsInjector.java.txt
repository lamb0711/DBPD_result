o Added inherited field to the Plugin and Goal classes in maven.mdo
o Added annotation inheritedByDefault (looks like: @inheritedByDefault true|false) for java mojos
o Added support for inheritedByDefault to MojoDescriptor, descriptor generator and builder
o Factored the plugin combinatorial logic into ModelUtils in o.a.m.project, for later reuse in a plugin-aware model inheritance builder
o Refactored the DefaultModelDefaultsInjector to use the new ModelUtils for plugin merging (this is factored into a utility for reuse in inheritance assembly)


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@178733 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.ModelUtils;
-        if ( plugin.getVersion() == null && def.getVersion() != null )
-        {
-            plugin.setVersion( def.getVersion() );
-        }
-
-        Map defaultGoals = def.getGoalsAsMap();
-
-        List pluginGoals = plugin.getGoals();
-
-        if ( pluginGoals != null )
-        {
-            for ( Iterator it = pluginGoals.iterator(); it.hasNext(); )
-            {
-                Goal pluginGoal = (Goal) it.next();
-
-                Goal defaultGoal = (Goal) defaultGoals.get( pluginGoal.getId() );
-
-                if ( defaultGoal != null )
-                {
-                    Xpp3Dom pluginGoalConfig = (Xpp3Dom) pluginGoal.getConfiguration();
-                    Xpp3Dom defaultGoalConfig = (Xpp3Dom) defaultGoal.getConfiguration();
-
-                    pluginGoalConfig = Xpp3Dom.mergeXpp3Dom( pluginGoalConfig, defaultGoalConfig );
-
-                    pluginGoal.setConfiguration( pluginGoalConfig );
-                }
-            }
-        }
-
-        Xpp3Dom pluginConfiguration = (Xpp3Dom) plugin.getConfiguration();
-        Xpp3Dom defaultConfiguration = (Xpp3Dom) def.getConfiguration();
-
-        pluginConfiguration = Xpp3Dom.mergeXpp3Dom( pluginConfiguration, defaultConfiguration );
-
-        plugin.setConfiguration( pluginConfiguration );
+        ModelUtils.mergeSupplementalPluginDefinition( plugin, def );
