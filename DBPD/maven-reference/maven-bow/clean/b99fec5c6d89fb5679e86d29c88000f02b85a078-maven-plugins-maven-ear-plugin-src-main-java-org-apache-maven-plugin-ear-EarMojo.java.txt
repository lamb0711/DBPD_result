PR: MNG-822
Submitted by: Edwin Punzalan
Reviewed by:  Brett Porter
EAR improvements


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@267433 13f79535-47bb-0310-9956-ffa450edef68

-    private String manifestLocation;
+    private String manifestFile;
-    private String applicationXmlLocation;
+    private String applicationXmlFile;
-
+    
+    /**
+     * Directory that resources are copied to during the build.
+     *
+     * @parameter expression="${project.build.directory}/ear"
+     */
+    private File resourcesDir;
+    
-        getLog().debug( "manifestLocation[" + manifestLocation + "]" );
-        getLog().debug( "applicationXmlLocation[" + applicationXmlLocation + "]" );
+        getLog().debug( "manifestLocation[" + manifestFile + "]" );
+        getLog().debug( "applicationXmlLocation[" + applicationXmlFile + "]" );
-                getLog().info( "Copy ear resources to " + getBuildDir().getAbsolutePath() );
+                getLog().info( "Copy ear sources to " + getBuildDir().getAbsolutePath() );
+            throw new MojoExecutionException( "Error copying EAR sources", e );
+        }
+
+        // Copy resources files
+        try
+        {
+            if ( resourcesDir.exists() )
+            {
+                getLog().info( "Copy ear resources to " + getBuildDir().getAbsolutePath() );
+                FileUtils.copyDirectoryStructure( resourcesDir, getBuildDir() );
+            }
+        }
+        catch ( IOException e )
+        {
-        File customManifestFile = new File( manifestLocation );
+        File customManifestFile = new File( manifestFile );
-            // Does not exist so will use default
+            getLog().info( "Could not find manifest file: " + manifestFile );
