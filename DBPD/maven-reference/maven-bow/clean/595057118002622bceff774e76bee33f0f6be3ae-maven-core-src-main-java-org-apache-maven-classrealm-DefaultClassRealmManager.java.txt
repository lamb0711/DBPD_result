[MNG-4381] Allow extension plugins to contribute non-core components to be reused by other plugins

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@819540 13f79535-47bb-0310-9956-ffa450edef68

+    public ClassRealm createExtensionRealm( Plugin plugin )
+    {
+        if ( plugin == null )
+        {
+            throw new IllegalArgumentException( "extension plugin missing" );
+        }
+
+        return createRealm( getKey( plugin, true ), null, null );
+    }
+
-        return createRealm( getKey( plugin ), parent, imports );
+        return createRealm( getKey( plugin, false ), parent, imports );
-    private String getKey( Plugin plugin )
+    private String getKey( Plugin plugin, boolean extension )
-        return "plugin>" + plugin.getGroupId() + ":" + plugin.getArtifactId() + ":" + version;
+        return ( extension ? "extension>" : "plugin>" ) + plugin.getGroupId() + ":" + plugin.getArtifactId() + ":"
+            + version;
