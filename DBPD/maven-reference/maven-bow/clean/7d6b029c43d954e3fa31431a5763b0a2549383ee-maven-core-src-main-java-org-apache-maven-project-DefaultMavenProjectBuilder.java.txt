some clean up of components and artifact repository factory

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@164181 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Dependency;
-import org.apache.maven.model.Dependency;
+import java.util.HashSet;
-import java.util.HashSet;
+    // TODO: make it a component
-    // TODO: comes from Maven CORE
-        project.setPluginArtifactRepositories( buildPluginRepositories( model.getPluginRepositories() ) );
+        project.setPluginArtifactRepositories( buildArtifactRepositories( model.getPluginRepositories() ) );
-            project.setDistributionManagementArtifactRepository( buildDistributionManagementRepository(
-                dm.getRepository() ) );
+            project.setDistributionManagementArtifactRepository( buildArtifactRepository( dm.getRepository() ) );
-            ArtifactRepositoryLayout remoteRepoLayout = getRepositoryLayout( mavenRepo );
-
-            ArtifactRepository artifactRepo = artifactRepositoryFactory.createArtifactRepository( mavenRepo,
-                                                                                                  remoteRepoLayout );
+            ArtifactRepository artifactRepo = buildArtifactRepository( mavenRepo );
-    private List buildPluginRepositories( List pluginRepositories )
-        throws ProjectBuildingException
-    {
-        List remotePluginRepositories = new ArrayList();
-
-        for ( Iterator it = pluginRepositories.iterator(); it.hasNext(); )
-        {
-            Repository mavenRepo = (Repository) it.next();
-
-            ArtifactRepositoryLayout repositoryLayout = getRepositoryLayout( mavenRepo );
-
-            ArtifactRepository pluginRepository = artifactRepositoryFactory.createArtifactRepository( mavenRepo,
-                                                                                                      repositoryLayout );
-
-            remotePluginRepositories.add( pluginRepository );
-
-        }
-
-        return remotePluginRepositories;
-    }
-
-    private ArtifactRepository buildDistributionManagementRepository( Repository dmRepo )
+    private ArtifactRepository buildArtifactRepository( Repository repo )
-        if ( dmRepo == null )
+        if ( repo != null )
+        {
+            String id = repo.getId();
+            String url = repo.getUrl();
+            ArtifactRepositoryLayout layout = getRepositoryLayout( repo );
+            String snapshotPolicy = repo.getSnapshotPolicy();
+            return artifactRepositoryFactory.createArtifactRepository( id, url, layout, snapshotPolicy );
+        }
+        else
-
-        ArtifactRepositoryLayout repositoryLayout = getRepositoryLayout( dmRepo );
-
-        ArtifactRepository dmArtifactRepository = artifactRepositoryFactory.createArtifactRepository( dmRepo,
-                                                                                                      repositoryLayout );
-
-        return dmArtifactRepository;
