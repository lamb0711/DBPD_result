o changing the caching slightly to share with shane


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@699847 13f79535-47bb-0310-9956-ffa450edef68

+    private HashMap<String, MavenProject> hm = new HashMap<String, MavenProject>();    
+    
+        MavenProject project = hm.get( artifact.getId() );
+        
+        if ( project != null )
+        {            
+            return project;
+        }        
+        
-            repositoryHelper.findModelFromRepository( artifact, remoteArtifactRepositories, localRepository );
+        repositoryHelper.findModelFromRepository( artifact, remoteArtifactRepositories, localRepository );
-            ProjectBuilderConfiguration config =
-                new DefaultProjectBuilderConfiguration().setLocalRepository( localRepository );
+        ProjectBuilderConfiguration config = new DefaultProjectBuilderConfiguration().setLocalRepository( localRepository );
-            List<ArtifactRepository> artifactRepositories =
-                new ArrayList<ArtifactRepository>( remoteArtifactRepositories );
-            artifactRepositories.addAll( repositoryHelper.buildArtifactRepositories(
-                getSuperProject( config, artifact.getFile(), false ).getModel() ) );
+        List<ArtifactRepository> artifactRepositories = new ArrayList<ArtifactRepository>( remoteArtifactRepositories );
+        artifactRepositories.addAll( repositoryHelper.buildArtifactRepositories( getSuperProject( config, artifact.getFile(), false ).getModel() ) );
-            MavenProject project = readModelFromLocalPath( "unknown", artifact.getFile(), new PomArtifactResolver(
-                config.getLocalRepository(), artifactRepositories, artifactResolver ), config );
-            project = buildInternal( project.getModel(), config, artifact.getFile(), project.getParentFile(), false );
+        project = readModelFromLocalPath( "unknown", artifact.getFile(), new PomArtifactResolver( config.getLocalRepository(), artifactRepositories, artifactResolver ), config );
+        project = buildInternal( project.getModel(), config, artifact.getFile(), project.getParentFile(), false );
+        hm.put( artifact.getId(), project );
+        
