PR: MNG-916
ensure RELEASE is not selected as is

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@292172 13f79535-47bb-0310-9956-ffa450edef68

-    public static final String RELEASE_VERSION = "RELEASE";
-
-        if ( RELEASE_VERSION.equals( artifact.getVersion() ) )
+        if ( Artifact.RELEASE_VERSION.equals( artifact.getVersion() ) )
-            if ( version != null && !version.equals( artifact.getVersion() ) )
+            if ( Artifact.RELEASE_VERSION.equals( version ) )
-                artifact.setBaseVersion( version );
-                artifact.updateVersion( version, localRepository );
+                throw new ArtifactMetadataRetrievalException(
+                    "Unable to determine the release version for artifact " + artifact );
+
+            artifact.setBaseVersion( version );
+            artifact.updateVersion( version, localRepository );
