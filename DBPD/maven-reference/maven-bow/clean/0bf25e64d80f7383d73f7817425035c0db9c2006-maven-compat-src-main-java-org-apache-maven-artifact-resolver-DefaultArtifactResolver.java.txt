o adjusting the internals to deal with root-based resolution
o gross hack to work around someone hardcoding a dummy:dummy root artifact in the surefire plugin



git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@756885 13f79535-47bb-0310-9956-ffa450edef68

+    private boolean isDummy( ArtifactResolutionRequest request )
+    {
+        return request.getArtifact().getArtifactId().equals( "dummy" ) && request.getArtifact().getGroupId().equals( "dummy" );        
+    }
+    
-        ArtifactFilter filter = request.getFilter();
+        ArtifactFilter filter = request.getFilter();                       
+        
+        // This is an extreme hack because of the ridiculous APIs we have a root that is disconnected and
+        // useless. The SureFire plugin passes in a dummy root artifact that is actually used in the production
+        // plugin ... We have no choice but to put this hack in the core.
+        if ( isDummy( request ) )
+        {
+            request.setResolveRoot( false );
+        }
-                
+                        
-
+        
-        
+                                
-
-        // Add the root artifact
-        result.addArtifact( rootArtifact );            
+        
+        if ( !isDummy( request ) )
+        {
+            // Add the root artifact
+            result.addArtifact( rootArtifact );                        
+        }                
-
+                
-        
+                
