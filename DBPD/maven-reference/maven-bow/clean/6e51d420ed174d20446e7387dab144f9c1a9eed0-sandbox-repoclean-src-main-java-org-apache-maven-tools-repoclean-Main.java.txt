o fixed conditions under which error emails should be sent
o fixed emailing to contain a link to the report
o reformatted using IDEA
o removed directory tracking from transactions, b/c undo order is too tricky for now
o adjusted code to maven-artifact (post maven-project creation) changes.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@164705 13f79535-47bb-0310-9956-ffa450edef68

-    
+
-        
+
-            if(FORCE_ARG.equals(args[0]))
+            if ( FORCE_ARG.equals( args[0] ) )
-            else if(FORCE_ARG.equals(args[1]))
+            else if ( FORCE_ARG.equals( args[1] ) )
-                System.out.println("Invalid argument list: \'" + args[0] + " " + args[1]);
+                System.out.println( "Invalid argument list: \'" + args[0] + " " + args[1] );
-                System.exit(1);
+                System.exit( 1 );
-            
-            config.setForce(force);
+
+            config.setForce( force );
-            
+
-            
+
-    public static void launch( RepositoryCleanerConfiguration config ) throws Exception
+    public static void launch( RepositoryCleanerConfiguration config )
+        throws Exception
-        config.setMailErrorReport( Boolean.valueOf( props.getProperty( "errorReport.mailOnError", "false") ).booleanValue() );
+        config.setMailErrorReport(
+            Boolean.valueOf( props.getProperty( "errorReport.mailOnError", "false" ) ).booleanValue() );
+        config.setErrorReportLink( props.getProperty( "errorReport.link" ) );
-        System.out.println( "repoclean: Repository Cleaner/Converter.\n\n"
-            + "Usage: repoclean -h|-template|<configuration-properties-file>\n\n"
-            + "---------------------------------------------------------------------------\n"
-            + "  Use the '-template' option to see sample configuration file options.\n"
-            + "\n" );
+        System.out.println( "repoclean: Repository Cleaner/Converter.\n\n" +
+                            "Usage: repoclean -h|-template|<configuration-properties-file>\n\n" +
+                            "---------------------------------------------------------------------------\n" +
+                            "  Use the '-template' option to see sample configuration file options.\n" + "\n" );
-        System.out.println( "# ---------------------------------------------------------------------------\n"
-            + "# repoclean: Repository Cleaner/Converter.\n" 
-            + "# This configuration auto-generated on: " + new java.util.Date() + "\n"
-            + "# ---------------------------------------------------------------------------\n\n"
-            + "# [REQUIRED OPTIONS]\n" 
-            + "sourceRepositoryPath=/path/to/repository/root\n"
-            + "targetRepositoryPath=/path/to/repository/root\n" 
-            + "reportsPath=/path/to/reports/directory\n"
-            + "reportOnly=[true|false]\n"
-            + "\n" 
-            + "errorReport.mailOnError=[true|false]\n"
-            + "errorReport.fromAddress=admin@somewhere.com\n"
-            + "errorReport.fromName=Admin\n"
-            + "errorReport.subject=[REPOCLEAN] Error!\n"
-            + "errorReport.toAddress=dev@somewhere.com\n"
-            + "errorReport.toName=Developers List\n"
-            + "\n"
-            + "# [DEFAULT VALUE: legacy]\n"
-            + "#sourceRepositoryLayout=[legacy|default]\n\n" 
-            + "# [DEFAULT VALUE: v3]\n" 
-            + "#sourcePomType=[v3|v4]\n\n"
-            + "# [DEFAULT VALUE: default]\n" 
-            + "#targetRepositoryLayout=[legacy|default]\n" 
-            + "# [DEFAULT VALUE: localhost]\n"
-            + "#errorReport.smtpHost=<hostname>\n"
-            + "\n" );
+        System.out.println( "# ---------------------------------------------------------------------------\n" +
+                            "# repoclean: Repository Cleaner/Converter.\n" + "# This configuration auto-generated on: " + new java.util.Date() + "\n" +
+                            "# ---------------------------------------------------------------------------\n\n" +
+                            "# [REQUIRED OPTIONS]\n" + "sourceRepositoryPath=/path/to/repository/root\n" + "targetRepositoryPath=/path/to/repository/root\n" + "reportsPath=/path/to/reports/directory\n" + "reportOnly=[true|false]\n" + "\n" + "errorReport.mailOnError=[true|false]\n" + "errorReport.fromAddress=admin@somewhere.com\n" + "errorReport.fromName=Admin\n" + "errorReport.subject=[REPOCLEAN] Error!\n" + "errorReport.toAddress=dev@somewhere.com\n" + "errorReport.toName=Developers List\n" + "\n" + "# [DEFAULT VALUE: legacy]\n" + "#sourceRepositoryLayout=[legacy|default]\n\n" + "# [DEFAULT VALUE: v3]\n" + "#sourcePomType=[v3|v4]\n\n" + "# [DEFAULT VALUE: default]\n" + "#targetRepositoryLayout=[legacy|default]\n" + "# [DEFAULT VALUE: localhost]\n" + "#errorReport.smtpHost=<hostname>\n" + "\n" );
-        System.out.println( "Required input is missing.\n\n" + "Usage:\n"
-            + "--------------------------------------------------\n\n"
-            + "repoclean -h|-template|<configuration-properties-file>\n" );
+        System.out.println( "Required input is missing.\n\n" + "Usage:\n" +
+                            "--------------------------------------------------\n\n" +
+                            "repoclean -h|-template|<configuration-properties-file>\n" );
