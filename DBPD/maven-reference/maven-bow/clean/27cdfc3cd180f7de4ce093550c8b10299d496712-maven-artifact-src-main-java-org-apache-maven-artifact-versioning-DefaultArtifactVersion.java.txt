PR: MNG-505
use comparable versions in ranges

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@219630 13f79535-47bb-0310-9956-ffa450edef68

-    public void parseVersion( String version )
+    public final void parseVersion( String version )
-        String part1 = null;
+        String part1;
-        StringTokenizer tok = new StringTokenizer( part1, "." );
-        majorVersion = Integer.valueOf( tok.nextToken() );
-        if ( tok.hasMoreTokens() )
+        if ( part1.indexOf( "." ) < 0 )
-            minorVersion = Integer.valueOf( tok.nextToken() );
+            try
+            {
+                majorVersion = Integer.valueOf( part1 );
+            }
+            catch ( NumberFormatException e )
+            {
+                // qualifier is the whole version, including "-"
+                qualifier = version;
+            }
-        if ( tok.hasMoreTokens() )
+        else
-            incrementalVersion = Integer.valueOf( tok.nextToken() );
+            StringTokenizer tok = new StringTokenizer( part1, "." );
+            majorVersion = Integer.valueOf( tok.nextToken() );
+            if ( tok.hasMoreTokens() )
+            {
+                minorVersion = Integer.valueOf( tok.nextToken() );
+            }
+            if ( tok.hasMoreTokens() )
+            {
+                incrementalVersion = Integer.valueOf( tok.nextToken() );
+            }
-        buf.append( majorVersion );
+        if ( majorVersion != null )
+        {
+            buf.append( majorVersion );
+        }
-            buf.append( "-" );
+            if ( buf.length() > 0 )
+            {
+                buf.append( "-" );
+            }
