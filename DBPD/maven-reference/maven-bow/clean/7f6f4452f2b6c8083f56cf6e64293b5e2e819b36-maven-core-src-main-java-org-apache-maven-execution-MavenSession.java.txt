o Changed Set to List for remote repo handling so that we can maintain declarative ordering in remote repos we use.
o Added UserModel support, integrated with maven-artifact and wagon via AuthenticationInfoProvider implementation.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163501 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Repository;
-import org.apache.maven.repository.RepositoryUtils;
+import java.util.ArrayList;
+import java.util.Collections;
+import java.util.Iterator;
-    public MavenSession( PlexusContainer container, PluginManager pluginManager, UserModel userModel, ArtifactRepository localRepository,
-        EventDispatcher eventDispatcher, Log log, List goals )
+    public MavenSession( PlexusContainer container, PluginManager pluginManager, UserModel userModel,
+        ArtifactRepository localRepository, EventDispatcher eventDispatcher, Log log, List goals )
-        
+
-    
+
-    public Set getRemoteRepositories()
+    public List getRemoteRepositories()
-        if ( remoteRepositories == null )
+        List result = null;
+
+        if ( project != null )
-            remoteRepositories = RepositoryUtils.mavenToWagon( project.getRepositories() );
+            List repos = project.getRepositories();
+            result = new ArrayList( repos.size() );
+            for ( Iterator it = repos.iterator(); it.hasNext(); )
+            {
+                Repository repo = (Repository) it.next();
+                result.add( new ArtifactRepository( repo.getId(), repo.getUrl() ) );
+            }
+        }
+        else
+        {
+            result = Collections.EMPTY_LIST;
-        return remoteRepositories;
+        return result;
-    
+
