PR: MNG-447
ensure the checksums don't get overwritten by the extra put commands


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@180072 13f79535-47bb-0310-9956-ffa450edef68

-        Map checksums = new HashMap();
+        Map checksums = new HashMap( 2 );
+        Map sums = new HashMap( 2 );
-            // We do this in here so we can checksum the artifact metadata too, otherwise it could be metadata itself
+            // Pre-store the checksums as any future puts will overwrite them
+                sums.put( extension, observer.getActualChecksum() );
+            }
+
+            // We do this in here so we can checksum the artifact metadata too, otherwise it could be metadata itself
+            for ( Iterator i = checksums.keySet().iterator(); i.hasNext(); )
+            {
+                String extension = (String) i.next();
-                FileUtils.fileWrite( temp.getAbsolutePath(), observer.getActualChecksum() );
+                FileUtils.fileWrite( temp.getAbsolutePath(), (String) sums.get( extension ) );
-}
+}
