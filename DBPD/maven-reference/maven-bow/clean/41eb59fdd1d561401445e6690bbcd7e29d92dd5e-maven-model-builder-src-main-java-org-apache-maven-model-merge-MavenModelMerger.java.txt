o Fixed handling of missing project artifact id

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@934440 13f79535-47bb-0310-9956-ffa450edef68

-                target.setUrl( appendPath( src, context.get( ARTIFACT_ID ).toString(),
-                                           context.get( CHILD_PATH_ADJUSTMENT ).toString() ) );
+                target.setUrl( appendPath( src, context ) );
+    protected void mergeModel_ArtifactId( Model target, Model source, boolean sourceDominant, Map<Object, Object> context )
+    {
+        // neither inherited nor injected
+    }
+
+    @Override
-                target.setUrl( appendPath( src, context.get( ARTIFACT_ID ).toString(),
-                                           context.get( CHILD_PATH_ADJUSTMENT ).toString() ) );
+                target.setUrl( appendPath( src, context ) );
-                target.setUrl( appendPath( src, context.get( ARTIFACT_ID ).toString(),
-                                           context.get( CHILD_PATH_ADJUSTMENT ).toString() ) );
+                target.setUrl( appendPath( src, context ) );
-                target.setConnection( appendPath( src, context.get( ARTIFACT_ID ).toString(),
-                                                  context.get( CHILD_PATH_ADJUSTMENT ).toString() ) );
+                target.setConnection( appendPath( src, context ) );
-                target.setDeveloperConnection( appendPath( src, context.get( ARTIFACT_ID ).toString(),
-                                                           context.get( CHILD_PATH_ADJUSTMENT ).toString() ) );
+                target.setDeveloperConnection( appendPath( src, context ) );
+    private String appendPath( String parentPath, Map<Object, Object> context )
+    {
+        Object artifactId = context.get( ARTIFACT_ID );
+        Object childPathAdjustment = context.get( CHILD_PATH_ADJUSTMENT );
+
+        if ( artifactId != null && childPathAdjustment != null )
+        {
+            return appendPath( parentPath, artifactId.toString(), childPathAdjustment.toString() );
+        }
+        else
+        {
+            return parentPath;
+        }
+    }
+
