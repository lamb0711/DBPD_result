*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162928 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.Artifact;
+import org.apache.maven.artifact.DefaultArtifact;
+import org.apache.maven.artifact.installer.ArtifactInstaller;
+import org.apache.maven.artifact.repository.ArtifactRepository;
-import org.apache.maven.Maven;
-
-import java.util.ArrayList;
-import java.util.List;
-* @parameter
- *  name="project"
- *  type="org.apache.maven.project.MavenProject"
- *  required="true"
- *  validator=""
- *  expression="#project"
- *  description=""
+ * @parameter name="project"
+ * type="org.apache.maven.project.MavenProject"
+ * required="true"
+ * validator=""
+ * expression="#project"
+ * description=""
- * @parameter
- *  name="maven"
- *  type="org.apache.maven.Maven"
- *  required="true"
- *  validator=""
- *  expression="#component.org.apache.maven.Maven"
- *  description=""""
+ * @parameter name="installer"
+ * type="org.apache.maven.artifact.installer.ArtifactInstaller"
+ * required="true"
+ * validator=""
+ * expression="#component.org.apache.maven.artifact.installer.ArtifactInstaller"
+ * description=""
- * @author <a href="mailto:michal@codehaus.org">Michal Maczka</a>
- * @version $Id$
+ * @parameter name="localRepository"
+ * type="org.apache.maven.artifact.repository.ArtifactRepository"
+ * required="true"
+ * validator=""
+ * expression="#localRepository"
+ * description=""
+ *
+ * @prereq build
+ *
-
-
-        String type = project.getType();
+        ArtifactInstaller artifactInstaller = (ArtifactInstaller) request.getParameter( "installer" );
-        Maven maven = ( Maven ) request.getParameter( "maven" );
+        ArtifactRepository localRepository = (ArtifactRepository) request.getParameter( "localRepository" );
-        String goal = type + ":install";
+        Artifact artifact = new DefaultArtifact( project.getGroupId(),
+                                                 project.getArtifactId(),
+                                                 project.getVersion(),
+                                                 project.getType() );
-        List goals = new ArrayList( 1 );
-
-        goals.add( goal );
-
-        maven.execute( project, goals );
-
+        artifactInstaller.install( project.getBuild().getDirectory(), artifact, localRepository );
-
-
