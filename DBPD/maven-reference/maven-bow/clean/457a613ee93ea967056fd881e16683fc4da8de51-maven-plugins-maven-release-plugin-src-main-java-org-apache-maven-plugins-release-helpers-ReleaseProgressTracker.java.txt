various release plugin fixes

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@279256 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Scm;
+    private static final String SCM_INFO_PREFIX = "scm-info.";
+
+    public void addOriginalScmInfo( String projectId, Scm scm )
+    {
+        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".connection", scm.getConnection() );
+        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".developerConnection",
+                                       scm.getDeveloperConnection() );
+        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".url", scm.getUrl() );
+        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".tag", scm.getTag() );
+    }
+
+    public void restoreScmInfo( String projectId, Scm scm )
+    {
+        String connection = releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".connection" );
+        if ( connection == null )
+        {
+            throw new IllegalArgumentException(
+                "Project \'" + projectId + "\' has not had its SCM info cached. Cannot restore uncached SCM info." );
+        }
+        scm.setConnection( connection );
+        scm.setDeveloperConnection(
+            releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".developerConnection" ) );
+        scm.setUrl( releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".url" ) );
+        scm.setTag( releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".tag" ) );
+    }
