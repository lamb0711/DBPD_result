Resolving: MNG-878, MNG-880 (again)

o Added full resolution of plugins listed in the project hierarchy
o Added better resolution of snapshots within the reactor, and resolution of ${finalName}
o Added usage of fully inherited model for release-pom.xml, to enable convergence of all POM inheritance to a single POM with no parent.
o Improved handling of SCM info in a reactored situation.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@290221 13f79535-47bb-0310-9956-ffa450edef68

-        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".connection", scm.getConnection() );
-        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".developerConnection",
-                                       scm.getDeveloperConnection() );
-        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".url", scm.getUrl() );
-        releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".tag", scm.getTag() );
+        String connection = scm.getConnection();
+        if ( connection != null )
+        {
+            releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".connection", connection );
+        }
+        
+        String devConnection = scm.getDeveloperConnection();
+        if ( devConnection != null )
+        {
+            releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".developerConnection",
+                                           devConnection );
+        }
+        
+        String url = scm.getUrl();
+        if ( url != null )
+        {
+            releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".url", url );
+        }
+        
+        String tag = scm.getTag();
+        if ( tag != null )
+        {
+            releaseProperties.setProperty( SCM_INFO_PREFIX + projectId + ".tag", tag );
+        }
-        if ( connection == null )
+        if ( connection != null )
-            throw new IllegalArgumentException(
-                "Project \'" + projectId + "\' has not had its SCM info cached. Cannot restore uncached SCM info." );
+            scm.setConnection( connection );
-        scm.setConnection( connection );
-        scm.setDeveloperConnection(
-            releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".developerConnection" ) );
-        scm.setUrl( releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".url" ) );
-        scm.setTag( releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".tag" ) );
+        
+        String devConnection = releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".connection" );
+        if ( devConnection != null )
+        {
+            scm.setDeveloperConnection( devConnection );
+        }
+        
+        String url = releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".url" );
+        if ( url != null )
+        {
+            scm.setUrl( url );
+        }
+        
+        String tag = releaseProperties.getProperty( SCM_INFO_PREFIX + projectId + ".tag" );
+        if ( tag != null )
+        {
+            scm.setTag( tag );
+        }
