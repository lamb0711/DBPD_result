[MNG-4738] DefaultArtifactResolver forks non-daemon threads
Submitted by: Benjamin Hanzelmann

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@979028 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.concurrent.ThreadFactory;
+import java.util.concurrent.atomic.AtomicInteger;
-                new ThreadPoolExecutor( threads, threads, 3, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>() );
+                new ThreadPoolExecutor( threads, threads, 3, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>(), new DaemonThreadCreator());
+    /**
+     * ThreadCreator for creating daemon threads with fixed ThreadGroup-name.
+     */
+    final static class DaemonThreadCreator
+        implements ThreadFactory
+    {
+        static final String THREADGROUP_NAME = "org.apache.maven.artifact.resolver.DefaultArtifactResolver";
+
+        final static ThreadGroup group = new ThreadGroup( THREADGROUP_NAME );
+
+        final static AtomicInteger threadNumber = new AtomicInteger( 1 );
+
+        public Thread newThread( Runnable r )
+        {
+            Thread newThread = new Thread( group, r, "resolver-" + threadNumber.getAndIncrement() );
+            newThread.setDaemon( true );
+            return newThread;
+        }
+    }
+
