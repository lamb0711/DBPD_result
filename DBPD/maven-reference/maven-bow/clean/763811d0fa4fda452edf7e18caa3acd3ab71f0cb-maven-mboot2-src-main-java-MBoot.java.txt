Added debug option to compiler configuration.
Copied compiler classes from plexus compiler.
Allow bootstrapping with debug info.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163301 13f79535-47bb-0310-9956-ffa450edef68

+import compile.CompilerConfiguration;
-            List errors = compiler.compile( classpath( dependencies, extraClasspath ), sourceDirectories, outputDirectory );
+            CompilerConfiguration compilerConfiguration = new CompilerConfiguration();
+            
+            compilerConfiguration.setOutputLocation(outputDirectory);
+            compilerConfiguration.setClasspathEntries(Arrays.asList(classpath( dependencies, extraClasspath )));
+            compilerConfiguration.setSourceLocations(Arrays.asList(sourceDirectories));
+            
+            /* Compile with debugging info */
+            String debugAsString = System.getProperty( "maven.compiler.debug" );
-            for ( Iterator i = errors.iterator(); i.hasNext(); )
+            if ( debugAsString != null )
+            {
+                if ( Boolean.valueOf( debugAsString ).booleanValue() )
+                {
+                    compilerConfiguration.setDebug( true );
+                }
+            }
+
+            List messages = compiler.compile(compilerConfiguration);
+
+            for ( Iterator i = messages.iterator(); i.hasNext(); )
-            if ( errors.size() > 0 )
+            if ( messages.size() > 0 )
