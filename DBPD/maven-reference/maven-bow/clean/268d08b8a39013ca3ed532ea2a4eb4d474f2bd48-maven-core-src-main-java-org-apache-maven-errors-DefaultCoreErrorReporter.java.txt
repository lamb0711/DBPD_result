[MNG-3372] Improve error handling where a mojo is referenced but the plugin doesn't contain it (in direct-invocation cases), and fix plugin-version discovery where a plugin pom gives a maven prereq.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@614708 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.InvalidPluginException;
+    public void reportInvalidPluginForDirectInvocation( String task,
+                                                        MavenSession session,
+                                                        MavenProject project,
+                                                        InvalidPluginException err )
+    {
+        StringWriter writer = new StringWriter();
+
+        writer.write( NEWLINE );
+        writer.write( "Maven encountered an error while loading a plugin for use in your build." );
+        writer.write( NEWLINE );
+        writer.write( NEWLINE );
+
+        writer.write( "Original task invocation:" );
+        writer.write( task );
+        writer.write( NEWLINE );
+        writer.write( NEWLINE );
+        writer.write( "While building project:" );
+        writeProjectCoordinate( project, writer );
+
+        writer.write( NEWLINE );
+        writer.write( NEWLINE );
+        writer.write( "Error message:" );
+        writer.write( err.getMessage() );
+
+        addTips( CoreErrorTips.getInvalidPluginForDirectInvocationTips( task, session, project, err ), writer );
+
+        registerBuildError( err, writer.toString() );
+    }
+
