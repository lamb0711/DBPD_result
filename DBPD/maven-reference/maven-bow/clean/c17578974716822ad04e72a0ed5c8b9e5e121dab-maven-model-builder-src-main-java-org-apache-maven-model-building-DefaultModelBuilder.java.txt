[MNG-5612] avoid fully interpolated values for file based profile
activation values but effective values calculated during activation
+import org.apache.maven.model.Activation;
+import org.apache.maven.model.ActivationFile;
+            Map<String, ActivationFile> interpolatedActivationFiles = getProfileActivationFiles( rawModel, false );
+            injectProfileActivationFiles( tmpModel, interpolatedActivationFiles );
+
+    private Map<String, ActivationFile> getProfileActivationFiles( Model model, boolean clone )
+    {
+        Map<String, ActivationFile> activationFiles = new HashMap<String, ActivationFile>();
+        for ( Profile profile : model.getProfiles() )
+        {
+            Activation activation = profile.getActivation();
+
+            if ( activation == null )
+            {
+                continue;
+            }
+
+            ActivationFile file = activation.getFile();
+
+            if ( file == null )
+            {
+                continue;
+            }
+
+            if ( clone )
+            {
+                file = file.clone();
+            }
+
+            activationFiles.put( profile.getId(), file );
+        }
+
+        return activationFiles;
+    }
+
+    private void injectProfileActivationFiles( Model model, Map<String, ActivationFile> activationFiles )
+    {
+        for ( Profile profile : model.getProfiles() )
+        {
+            Activation activation = profile.getActivation();
+
+            if ( activation == null )
+            {
+                continue;
+            }
+
+            ActivationFile file = activation.getFile();
+
+            if ( file == null )
+            {
+                continue;
+            }
+
+            // restore file specification
+            ActivationFile originalFile = activationFiles.get( profile.getId() );
+            file.setExists( originalFile.getExists() );
+            file.setMissing( originalFile.getMissing() );
+        }
+    }
+
+        // save profiles with file activation before interpolation, since they are evaluated with limited scope
+        Map<String, ActivationFile> originalActivationFiles = getProfileActivationFiles( model, true );
+
+
+        // restore profiles with file activation to their value before full interpolation
+        injectProfileActivationFiles( model, originalActivationFiles );
+
