Adding more context information to existing exceptions, cleaning up construction in exceptions, and adjusting the inheritance hierarchy for exceptions to make them make a little more sense for error reporting. Also, adding improved (but not complete, yet) reporting for BuildFailureExceptions and ProjectBuildingExceptions, with some tests to make sure pertinent information is in the output.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@592859 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.ArtifactUtils;
+import org.apache.maven.model.Dependency;
+import org.apache.maven.project.InvalidProjectVersionException;
+
+import java.io.File;
-    extends Exception
+    extends InvalidProjectVersionException
-    public InvalidDependencyVersionException( String message, InvalidVersionSpecificationException cause )
+    private Dependency dependency;
+
+    public InvalidDependencyVersionException( String projectId, Dependency dependency, File pomFile, InvalidVersionSpecificationException cause )
-        super( message, cause );
+        super( projectId, formatLocationInPom( dependency ), dependency.getVersion(), pomFile, cause );
+        this.dependency = dependency;
-    /**
-     * @deprecated use {@link #InvalidDependencyVersionException(String, InvalidVersionSpecificationException)}
-     */
-    public InvalidDependencyVersionException( String message, Exception cause )
+    private static String formatLocationInPom( Dependency dependency )
-        super( message, cause );
+        return "dependency: " + ArtifactUtils.versionlessKey( dependency.getGroupId(), dependency.getArtifactId() );
+    }
+
+    public Dependency getDependency()
+    {
+        return dependency;
