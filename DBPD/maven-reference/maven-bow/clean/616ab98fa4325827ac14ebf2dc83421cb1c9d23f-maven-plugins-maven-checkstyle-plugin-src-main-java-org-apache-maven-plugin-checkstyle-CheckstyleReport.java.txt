PR: MNG-1003
Submitted by: Edwin Punzalan
refactoring checkstyle report


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@312847 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.util.StringUtils;
+import org.codehaus.plexus.util.StringUtils;
+import java.util.Map;
-     * created with the violations. Note: This is in addition to the XML result file (containing
-     * the violations in XML format which is always created.
+     * created with the violations.
+        Map files = executeCheckstyle();
+
+        CheckstyleReportGenerator generator = new CheckstyleReportGenerator( getSink(), getBundle( locale ) );
+
+        generator.generateReport( files );
+    }
+
+    private Map executeCheckstyle()
+        throws MavenReportException
+    {
-            Configuration config = ConfigurationLoader
-                .loadConfiguration( configFile, new PropertiesExpander( overridingProperties ) );
+            Configuration config = ConfigurationLoader.loadConfiguration( configFile, new PropertiesExpander(
+                overridingProperties ) );
-        AuditListener sinkListener = new CheckstyleReportListener( getSink(), sourceDirectory, getBundle( locale ) );
+        CheckstyleReportListener sinkListener = new CheckstyleReportListener( sourceDirectory );
+
+        return sinkListener.getFiles();
