turn on logging, resolve some issues surrounding test dependencies


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163473 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.Plugin;
+import org.codehaus.plexus.logging.LoggerManager;
-        
-        Logger logger = embedder.getContainer().getLogger();
-        if( logger != null )
+
+        LoggerManager manager = (LoggerManager) embedder.lookup( LoggerManager.ROLE );
+        if ( commandLine.hasOption( CLIManager.DEBUG ) )
+        {
+            manager.setThreshold( Logger.LEVEL_DEBUG );
+        }
+
+        // TODO [BP]: do we set one per mojo? where to do it?
+        Logger logger = manager.getLoggerForComponent( Plugin.ROLE );
+        if ( logger != null )
-        // TODO [BP]: doing this here as it is CLI specific, though it doesn't feel like the right place.
+        // TODO [BP]: doing this here as it is CLI specific, though it doesn't feel like the right place (likewise logger).
-
