* Fixed defaults for repositories (release true, snapshots true, layout default)

* Added support for using repositories from the poms themselves,
  including chained dependencies.
  It's not as clean as I would like to, but there's no notion of a Project:
  the repository-defining project is not added to a Dependency Chain.

* Updated DownloadFailedException to list the dep chain and the repositories
  tried.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@420119 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import java.util.Iterator;
+import java.util.List;
+
+import org.apache.maven.bootstrap.model.Dependency;
+
-public class DownloadFailedException extends Exception
+public class DownloadFailedException
+    extends Exception
+
+    public DownloadFailedException( Dependency dep )
+    {
+        super( createMessage( dep ) );
+    }
+
+    private static String createMessage( Dependency dep )
+    {
+        String msg = "Failed to download dependency: \n\n" + dep + "\n\nChain:\n";
+
+        List repos = new ArrayList();
+
+        for ( Iterator it = dep.getChain().iterator(); it.hasNext(); )
+        {
+            Dependency chainDep = (Dependency) it.next();
+            msg += "\n\t" + chainDep;
+            repos.addAll( chainDep.getRepositories() );
+        }
+
+        msg += "\n\nfrom the following repositories:\n\n";
+
+        for ( Iterator it = repos.iterator(); it.hasNext(); )
+        {
+            msg += "\n\t" + it.next();
+        }
+
+        return msg;
+    }
