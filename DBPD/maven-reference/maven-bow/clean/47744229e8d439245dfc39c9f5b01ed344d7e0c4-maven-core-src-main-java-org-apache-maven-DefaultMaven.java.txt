correct no project handling (eg archetype:create)

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@226540 13f79535-47bb-0310-9956-ffa450edef68

-        
+
-        
+
-            
+
-            
+
-            
-            // TODO: !![jc; 28-jul-2005] check this; if we're using '-r' and there are aggregator tasks, this will result in weirdness.
-            topLevelProject = (MavenProject) projects.get( 0 );
-            
-            projects = ProjectSorter.getSortedProjects(projects);
-            if ( projects.isEmpty() )
+            if ( !projects.isEmpty() )
+            {
+                // TODO: !![jc; 28-jul-2005] check this; if we're using '-r' and there are aggregator tasks, this will result in weirdness.
+                topLevelProject = (MavenProject) projects.get( 0 );
+                projects = ProjectSorter.getSortedProjects( projects );
+            }
+            else
-                projects.add(
-                    projectBuilder.buildStandaloneSuperProject( request.getLocalRepository(), externalProfiles ) );
+                topLevelProject = projectBuilder.buildStandaloneSuperProject( request.getLocalRepository(),
+                                                                              externalProfiles );
+                projects.add( topLevelProject );
-            
+
-                
+
-                            
+
-                    
+
-            
+
-                                 request.getEventDispatcher(), projects, request.getGoals(), request.getBaseDirectory() );
+                                 request.getEventDispatcher(), projects, request.getGoals(),
+                                 request.getBaseDirectory() );
-    
+
-        
+
-            
+
-            
+
-        
+
-        
+
-            
+
-        
+
-            
+
