isolate path generation in Repository class


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163753 13f79535-47bb-0310-9956-ffa450edef68

-import download.ArtifactDownloader;
-import java.io.File;
-    private List remoteRepositories = new ArrayList();
+    private List repositories = new ArrayList();
-    private final ArtifactDownloader downloader;
+    private final Repository localRepository;
-    public ModelReader( ArtifactDownloader downloader )
+    private Repository currentRepository;
+
+    public ModelReader( Repository downloader )
-        this.downloader = downloader;
+        this.localRepository = downloader;
-        return remoteRepositories;
+        return repositories;
+            currentRepository = new Repository();
+
-            File f;
-
-            f = new File( downloader.getMavenRepoLocal(), parentGroupId + "/poms/" + parentArtifactId + "-" +
-                                                          parentVersion + ".pom" );
+            ModelReader p = new ModelReader( localRepository );
-            ModelReader p = new ModelReader( downloader );
-
-            if ( !p.parse( f ) )
+            if ( !p.parse( localRepository.getArtifactFile( parentGroupId, parentArtifactId, parentVersion, "pom" ) ) )
+        else if ( rawName.equals( "repository" ) )
+        {
+            repositories.add( currentRepository );
+
+            insideRepository = false;
+        }
+        else if ( insideRepository )
+        {
+            if ( rawName.equals( "url" ) )
+            {
+                currentRepository.setBasedir( getBodyText() );
+            }
+            else if ( rawName.equals( "layout" ) )
+            {
+                currentRepository.setLayout( getBodyText() );
+            }
+        }
-            else if ( rawName.equals( "repository" ) )
-            {
-                insideRepository = false;
-            }
-        }
-        else if ( insideRepository )
-        {
-            if ( rawName.equals( "url" ) )
-            {
-                remoteRepositories.add( getBodyText() );
-            }
