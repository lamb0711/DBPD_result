
JIRA issues fixed:

MRM-1
MRM-7
MRM-3
MRM-5
o Pipelining all logging through a single Reporter now, to repository.report.txt
o Disabled WARNING reports by default, add 'reportWarnings=true' to config file to enable them.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@189629 13f79535-47bb-0310-9956-ffa450edef68

-    public FileReporter( File reportsBase, String reportPath )
+    private final boolean warningsEnabled;
+
+    public FileReporter( File reportsBase, String reportPath, boolean warningsEnabled )
+        this.warningsEnabled = warningsEnabled;
+        
-        hasWarning = true;
-        write( new AppendingList( 2 ).append( WARN_LEVEL ).append( message ) );
+        if( warningsEnabled )
+        {
+            hasWarning = true;
+            String source = getSourceLine();
+            write( new AppendingList( 3 ).append( WARN_LEVEL ).append( source ).append( message ) );
+        }
-        write( new AppendingList( 3 ).append( ERROR_LEVEL ).append( message ).append( error ) );
+        String source = getSourceLine();
+        write( new AppendingList( 4 ).append( ERROR_LEVEL ).append( source ).append( message ).append( error ) );
-        write( new AppendingList( 2 ).append( ERROR_LEVEL ).append( message ) );
+        String source = getSourceLine();
+        write( new AppendingList( 3 ).append( ERROR_LEVEL ).append( source ).append( message ) );
+    }
+
+    private String getSourceLine()
+    {
+        NullPointerException npe = new NullPointerException();
+        
+        StackTraceElement element = npe.getStackTrace()[2];
+        
+        return " Reported from: (" + element.getClassName() + "." + element.getMethodName() + "(..):" + element.getLineNumber() + ")\n";
