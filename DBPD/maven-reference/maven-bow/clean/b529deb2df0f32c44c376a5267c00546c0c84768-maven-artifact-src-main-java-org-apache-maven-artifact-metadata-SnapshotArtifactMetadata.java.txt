bug fixes, but still not completely fixed


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163693 13f79535-47bb-0310-9956-ffa450edef68

-        if ( version != null )
+        if ( timestamp != null )
-            version = StringUtils.replace( version, "SNAPSHOT", timestamp );
+            if ( version != null )
+            {
+                version = StringUtils.replace( version, "SNAPSHOT", timestamp ) + "-" + buildNumber;
+            }
+            else
+            {
+                version = timestamp + "-" + buildNumber;
+            }
-        else
-        {
-            version = timestamp;
-        }
-        return version + "-" + buildNumber;
+        return version;
