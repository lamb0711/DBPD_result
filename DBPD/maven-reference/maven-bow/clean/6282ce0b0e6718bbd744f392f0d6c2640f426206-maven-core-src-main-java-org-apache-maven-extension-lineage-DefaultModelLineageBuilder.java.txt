o rolling back change, not sure how subclipse commits to two separate repositories in one commit..


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@696679 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.workspace.ProjectWorkspace;
+    private ProjectWorkspace projectWorkspace;
+
-        ModelAndFile current = new ModelAndFile( readModel( pom ), pom, isReactorProject );
+        ModelAndFile current = projectWorkspace.getModelAndFile( pom );
+        if ( current == null )
+        {
+            current = new ModelAndFile( readModel( pom ), pom, isReactorProject );
+            projectWorkspace.storeModelAndFile( current );
+        }
+                result = projectWorkspace.getModelAndFile( parentPomFile );
+            if ( result == null )
+            {
+//                getLogger().debug( "Checking cache for parent model-and-file instance: " + key + " using project groupId:artifactId:version." );
+
+                result = projectWorkspace.getModelAndFile( modelParent.getGroupId(), modelParent.getArtifactId(), modelParent.getVersion() );
+            }
+
+        if ( result != null )
+        {
+//            getLogger().debug( "Caching parent model-and-file: " + result );
+            projectWorkspace.storeModelAndFile( result );
+        }
+
