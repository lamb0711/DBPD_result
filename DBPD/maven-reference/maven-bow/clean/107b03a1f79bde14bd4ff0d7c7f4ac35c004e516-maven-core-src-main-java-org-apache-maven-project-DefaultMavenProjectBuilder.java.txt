o getting rid of some dead code in the project builder in preparation for trying to group more of the profile handling code as a test is failing in the embedder related to profiles while everything in the pom construction test is working correctly.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@775141 13f79535-47bb-0310-9956-ffa450edef68

-        Artifact artifact =
-            repositorySystem.createProjectArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion() );
+        Artifact artifact = repositorySystem.createProjectArtifact( project.getGroupId(), project.getArtifactId(), project.getVersion() );
+            .setResolveRoot( false )
-        project.getArtifacts().remove( artifact );
-
-            MavenProject topProject = projectBuilderConfiguration.getTopLevelProjectFromReactor();
-            if ( useTopLevelProjectForParent( domainModel, topProject ) )
-            {
-                mavenParents = getDomainModelParentsFromLocalPath( domainModel, localRepository, remoteRepositories, topProject.getFile(), projectBuilderConfiguration );
-            }
-            else if ( isParentLocal( domainModel.getRelativePathOfParent(), pomFile.getParentFile() ) )
+            
+            if ( isParentLocal( domainModel.getRelativePathOfParent(), pomFile.getParentFile() ) )
-    private static boolean useTopLevelProjectForParent( DomainModel currentModel, MavenProject topProject )
-        throws IOException
-    {
-        if ( topProject == null || currentModel.getModel().getParent() == null )
-        {
-            return false;
-        }
-
-        return topProject.getGroupId().equals( currentModel.getParentGroupId() ) && topProject.getArtifactId().equals( currentModel.getParentArtifactId() )
-            && topProject.getVersion().equals( currentModel.getParentVersion() );
-
-    }
-
+        
-        boolean isTop = useTopLevelProjectForParent( domainModel, topProject );
+        
-        if ( !isTop )
+        if ( !parentFile.isFile() )
-            if ( !parentFile.isFile() )
-            {
-                throw new IOException( "File does not exist: File = " + parentFile.getAbsolutePath() );
-            }
-            parentDomainModel = new DomainModel( parentFile );
-            parentDomainModel.setProjectDirectory( parentFile.getParentFile() );
+            throw new IOException( "File does not exist: File = " + parentFile.getAbsolutePath() );
-        else
-        {
-            parentDomainModel = new DomainModel( projectBuilderConfiguration.getTopLevelProjectFromReactor().getFile() );
-        }
+        parentDomainModel = new DomainModel( parentFile );
+        parentDomainModel.setProjectDirectory( parentFile.getParentFile() );
-        {
-            if ( isTop )
-            {
-                if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )
-                {
-                    domainModels
-                        .addAll( getDomainModelParentsFromLocalPath( parentDomainModel, localRepository, remoteRepositories, topProject.getFile().getParentFile(), projectBuilderConfiguration ) );
-                }
-                else
-                {
-                    domainModels.addAll( getDomainModelParentsFromRepository( parentDomainModel, localRepository, remoteRepositories ) );
-                }
-            }
-            else if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )
+        {            
+            if ( isParentLocal( parentDomainModel.getRelativePathOfParent(), parentFile.getParentFile() ) )
