Now we do interpolation before management processing. This allow depMng/pluginMng to have interpolated values for group/artifact ids.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@768421 13f79535-47bb-0310-9956-ffa450edef68

+            
-		//Interpolation
-        MavenProject project = interpolateDomainModel( domainModel, configuration, pomFile );
+        //Interpolation & Management
+        MavenProject project;
+		try {
+			Model model = ProcessorContext.processManagementNodes(interpolateDomainModel( domainModel, configuration, pomFile ));
+			project = this.fromDomainModelToMavenProject(model, domainModel.getParentFile(), configuration, pomFile);
+		} catch (IOException e) {
+			throw new ProjectBuildingException("", "");
+		}
+		
-        project = interpolateDomainModel( domainModel, configuration, artifact.getFile() );
+       
+    		try {
+    			Model model = ProcessorContext.processManagementNodes(interpolateDomainModel( domainModel, configuration, artifact.getFile() ));
+    			project = this.fromDomainModelToMavenProject(model, domainModel.getParentFile(), configuration, artifact.getFile());
+    		} catch (IOException e) {
+    			throw new ProjectBuildingException("", "");
+    		}
+
-    private MavenProject interpolateDomainModel( PomClassicDomainModel domainModel, ProjectBuilderConfiguration config, File projectDescriptor )
+    private Model interpolateDomainModel( PomClassicDomainModel domainModel, ProjectBuilderConfiguration config, File projectDescriptor )
+       return model;
+    }
+    
+    private MavenProject fromDomainModelToMavenProject(Model model, File parentFile, ProjectBuilderConfiguration config, File projectDescriptor)
+    	throws InvalidProjectModelException, IOException
+    {
-
+        String projectId = safeVersionlessKey( model.getGroupId(), model.getArtifactId() );
-            project.setParentFile( domainModel.getParentFile() );
+            project.setParentFile( parentFile );
-        return project;
+        return project;   	
