cleanup of the class realm purging

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1413287 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.classworlds.realm.NoSuchRealmException;
+import org.codehaus.plexus.personality.plexus.lifecycle.phase.Disposable;
-    implements PluginRealmCache
+    implements PluginRealmCache, Disposable
+        for ( CacheRecord record : cache.values() )
+        {
+            ClassRealm realm = record.realm;
+            try
+            {
+                realm.getWorld().disposeRealm( realm.getId() );
+            }
+            catch ( NoSuchRealmException e )
+            {
+                // ignore
+            }
+        }
+    public void dispose()
+    {
+        flush();
+    }
+
