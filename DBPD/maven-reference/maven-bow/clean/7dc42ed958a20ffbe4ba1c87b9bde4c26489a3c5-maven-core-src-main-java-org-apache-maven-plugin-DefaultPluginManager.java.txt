Replaced interpolator code.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@694907 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.shared.model.InterpolatorProperty;
+import org.apache.maven.project.builder.PomClassicTransformer;
-import org.apache.maven.project.interpolation.ModelInterpolationException;
-import org.apache.maven.project.interpolation.ModelInterpolator;
-    protected ModelInterpolator modelInterpolator;
-
-                String interpolatedDom = modelInterpolator.interpolate( String.valueOf( dom ),
-                                                                        project.getModel(),
-                                                                        project.getBasedir(),
-                                                                        session.getProjectBuilderConfiguration(),
-                                                                        getLogger().isDebugEnabled() );
-
+                List<InterpolatorProperty> interpolatorProperties = new ArrayList<InterpolatorProperty>();
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( session.getProjectBuilderConfiguration().getExecutionProperties()));
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( session.getProjectBuilderConfiguration().getUserProperties()));
+                String interpolatedDom  =
+                        PomClassicTransformer.interpolateXmlString( String.valueOf( dom ), interpolatorProperties );
-            catch ( ModelInterpolationException e )
-            {
-                throw new PluginManagerException(
-                                                  mojoDescriptor,
-                                                  project,
-                                                  "Failed to calculate concrete state for configuration of: "
-                                                                  + mojoDescriptor.getHumanReadableKey(),
-                                                  e );
-            }
