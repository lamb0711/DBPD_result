Cleaning up extension and plugin realms for a project once the build completes.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@588029 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
+    public void dispose()
+    {
+        for ( Iterator it = componentRealms.values().iterator(); it.hasNext(); )
+        {
+            ClassRealm realm = (ClassRealm) it.next();
+            disposeRealm( realm );
+        }
+
+        disposeRealm( projectRealm );
+        try
+        {
+            container.removeComponentRealm( projectRealm );
+        }
+        catch( PlexusContainerException e )
+        {
+            e.printStackTrace();
+        }
+
+        componentRealms.clear();
+        projectRealm = null;
+    }
+
+    private void disposeRealm( ClassRealm realm )
+    {
+        try
+        {
+            realm.getWorld().disposeRealm( realm.getId() );
+        }
+        catch ( NoSuchRealmException e )
+        {
+            // impossible
+        }
+    }
+
+        checkDisposed();
+
+    private void checkDisposed()
+    {
+        if ( projectRealm == null )
+        {
+            throw new IllegalStateException( "MavenProjectSession for: " + projectId + " with hashcode: " + hashCode() + " has been disposed, and is no longer valid for use." );
+        }
+    }
+
+        checkDisposed();
+
+        checkDisposed();
+
+        checkDisposed();
+
+        checkDisposed();
+
+        checkDisposed();
+
