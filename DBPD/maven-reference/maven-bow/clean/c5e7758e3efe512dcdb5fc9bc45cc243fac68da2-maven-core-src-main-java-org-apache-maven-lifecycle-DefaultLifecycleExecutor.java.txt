[MNG-4580] Plugin dependencies for module ignored when building from aggregator project using direct plugin invocation

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@921579 13f79535-47bb-0310-9956-ffa450edef68

-                MojoDescriptor mojoDescriptor = ( (GoalTask) task ).mojoDescriptor;
+                String pluginGoal = ( (GoalTask) task ).pluginGoal;
+
+                MojoDescriptor mojoDescriptor = getMojoDescriptor( pluginGoal, session, project );
-                currentSegment.tasks.add( new GoalTask( mojoDescriptor ) );
+                currentSegment.tasks.add( new GoalTask( task ) );
-        final MojoDescriptor mojoDescriptor;
+        final String pluginGoal;
-        GoalTask( MojoDescriptor mojoDescriptor )
+        GoalTask( String pluginGoal )
-            this.mojoDescriptor = mojoDescriptor;
+            this.pluginGoal = pluginGoal;
-            return mojoDescriptor.getId();
+            return pluginGoal;
+                            mojoExecution.setLifecyclePhase( execution.getPhase() );
+                            mojoExecution.setLifecyclePhase( mojoDescriptor.getPhase() );
