o Completed marmalade-mojo support, tested with m2 bootstrap with empty local repo and maven-core pegged at 2/26/2005.

  Will resolve CI issues as soon as lifecycle is fixed for IT0013.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163430 13f79535-47bb-0310-9956-ffa450edef68

-        context.setVariable( MarmaladeMojoExecutionDirectives.METADATA_OUTVAR, descriptor );
+        context.setVariable( MarmaladeMojoExecutionDirectives.METADATA_OUTVAR, descriptor, true );
-        if(basePath.endsWith("/"))
+        if(basePath != null)
-            basePath = basePath.substring(0, basePath.length()-2);
-        }
-        
-        String implementationPath = getTagInfo().getSourceFile().substring( basePath.length() );
+            if(basePath.endsWith("/"))
+            {
+                basePath = basePath.substring(0, basePath.length()-2);
+            }
+            
+            String implementationPath = getTagInfo().getSourceFile().substring( basePath.length() );
-        descriptor.setImplementation( implementationPath );
+            descriptor.setImplementation( implementationPath );
+        }
