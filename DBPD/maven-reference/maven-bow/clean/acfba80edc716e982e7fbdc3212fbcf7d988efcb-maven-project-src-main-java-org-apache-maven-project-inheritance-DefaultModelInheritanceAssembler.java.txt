consolidate defaults injection

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@168152 13f79535-47bb-0310-9956-ffa450edef68

-                List childPlugins = childPluginMgmt.getPlugins();
-
-                Map mappedChildPlugins = new TreeMap();
-                for ( Iterator it = childPlugins.iterator(); it.hasNext(); )
-                {
-                    Plugin plugin = (Plugin) it.next();
-                    mappedChildPlugins.put( constructPluginKey( plugin ), plugin );
-                }
+                Map mappedChildPlugins = childPluginMgmt.getPluginsAsMap();
-                    String pluginKey = constructPluginKey( plugin );
-
-                    if ( !mappedChildPlugins.containsKey( pluginKey ) )
+                    if ( !mappedChildPlugins.containsKey( plugin.getKey() ) )
-                        Plugin childPlugin = (Plugin) mappedChildPlugins.get( pluginKey );
+                        Plugin childPlugin = (Plugin) mappedChildPlugins.get( plugin.getKey() );
-                        Map mappedChildGoals = new TreeMap();
-                        for ( Iterator itGoals = childPlugin.getGoals().iterator(); itGoals.hasNext(); )
-                        {
-                            Goal goal = (Goal) itGoals.next();
-                            mappedChildGoals.put( goal.getId(), goal );
-                        }
+                        Map mappedChildGoals = childPlugin.getGoalsAsMap();
-    private String constructPluginKey( Plugin plugin )
-    {
-        return plugin.getGroupId() + ":" + plugin.getArtifactId();
-    }
-
