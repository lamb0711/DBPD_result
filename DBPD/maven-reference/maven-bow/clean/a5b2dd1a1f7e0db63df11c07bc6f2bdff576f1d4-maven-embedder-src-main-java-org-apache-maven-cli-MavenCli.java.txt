o Preferred JRE API

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@895277 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.IOException;
+import java.util.Locale;
-import java.util.Map.Entry;
+import org.codehaus.plexus.util.Os;
-import org.codehaus.plexus.util.cli.CommandLineUtils;
-        try
+        boolean caseSensitive = !Os.isFamily( Os.FAMILY_WINDOWS );
+        for ( Map.Entry<String, String> entry : System.getenv().entrySet() )
-            Properties envVars = CommandLineUtils.getSystemEnvVars();
-            for ( Entry<Object, Object> e : envVars.entrySet() )
-            {
-                systemProperties.setProperty( "env." + e.getKey().toString(), e.getValue().toString() );
-            }
-        }
-        catch ( IOException e )
-        {
-            System.err.println( "Error getting environment vars for profile activation: " + e );
+            String key = "env." + ( caseSensitive ? entry.getKey() : entry.getKey().toUpperCase( Locale.ENGLISH ) );
+            systemProperties.setProperty( key, entry.getValue() );
