o pushing my changes back in with shane's


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@769580 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.exception.DefaultExceptionHandler;
+import org.apache.maven.exception.ExceptionHandler;
+import org.apache.maven.exception.ExceptionSummary;
-import org.apache.maven.lifecycle.LifecycleExecutionException;
-import org.apache.maven.plugin.MojoExecutionException;
-import org.apache.maven.plugin.MojoFailureException;
-        }
-        catch ( LifecycleExecutionException e )
-        {
+        }        
+        catch ( Exception e )
+        {            
+            ExceptionHandler handler = new DefaultExceptionHandler();
+            
+            // This will only be more then one if we have fail at end on and we collect
+            // them per project.
+            ExceptionSummary es = handler.handleException( result.getExceptions().get( 0 ) );                        
+         
+            result.setExceptionSummary( es );
+            
-        catch ( MojoFailureException e )
-        {
-            result.addException( e );
-            return result;
-        }
-        catch ( MojoExecutionException e )
-        {
-            result.addException( e );
-
-            return result;
-        }
