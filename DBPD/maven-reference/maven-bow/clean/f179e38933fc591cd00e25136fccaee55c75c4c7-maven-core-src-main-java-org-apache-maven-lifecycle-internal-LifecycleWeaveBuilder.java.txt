o Avoided creation of broken ThreadLockedArtifact (i.e. don't wrap null artifacts)

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@980522 13f79535-47bb-0310-9956-ffa450edef68

-                if ( !( mavenProject.getArtifact() instanceof ThreadLockedArtifact ) )
+                Artifact mainArtifact = mavenProject.getArtifact();
+                if ( mainArtifact != null && !( mainArtifact instanceof ThreadLockedArtifact ) )
-                    ThreadLockedArtifact threadLockedArtifact = new ThreadLockedArtifact( mavenProject.getArtifact() );
+                    ThreadLockedArtifact threadLockedArtifact = new ThreadLockedArtifact( mainArtifact );
-                threadLockedArtifact.attachToThread();
+                if ( threadLockedArtifact != null )
+                {
+                    threadLockedArtifact.attachToThread();
+                }
