[MNG-3037] Combining plugin dependencies with plugin-level dependencies from the current project PRIOR to resolution, to enable version-conflict resolution to take place between the two sets of dependencies.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@544662 13f79535-47bb-0310-9956-ffa450edef68

-        Set dependencies = new HashSet( resolutionGroup.getArtifacts() );
+        Set dependencies = new LinkedHashSet( resolutionGroup.getArtifacts() );
+
+        // Also resolve the plugin dependencies specified in <plugin><dependencies>:
+        dependencies.addAll( projectPluginDependencies );
-        getLogger().debug( "Main plugin artifacts: " + resolved.toString().replace( ',', '\n' ) );
-
-        // Also resolve the plugin dependencies specified in <plugin><dependencies>:
-        resolved.addAll( artifactResolver.resolveTransitively( projectPluginDependencies,
-                                                               pluginArtifact,
-                                                               project.getManagedVersionMap(),
-                                                               localRepository,
-                                                               repositories,
-                                                               artifactMetadataSource,
-                                                               coreArtifactFilterManager.getArtifactFilter() ).getArtifacts() );
-
-        getLogger().debug( "After adding project-level plugin dependencies: " + resolved.toString().replace( ',', '\n' ) );
-
