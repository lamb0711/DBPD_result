PR: MNG-297
Make sure that the base version is correctly set to -SNAPSHOT instead of a resolved timestamp when appropriate


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163916 13f79535-47bb-0310-9956-ffa450edef68

+            // This corrects the base version, but ensure it is not resolved again
+        Matcher m = SnapshotArtifactMetadata.VERSION_FILE_PATTERN.matcher( artifact.getBaseVersion() );
+        if ( m.matches() )
+        {
+            artifact.setBaseVersion( m.group( 1 ) + "-SNAPSHOT" );
+        }
-        if ( isSnapshot( artifact ) )
+        Matcher m = SnapshotArtifactMetadata.VERSION_FILE_PATTERN.matcher( artifact.getBaseVersion() );
+        if ( m.matches() )
+        {
+            // This corrects the base version, but ensure it is not updated again
+            artifact.setBaseVersion( m.group( 1 ) + "-SNAPSHOT" );
+        }
+        else if ( isSnapshot( artifact ) )
