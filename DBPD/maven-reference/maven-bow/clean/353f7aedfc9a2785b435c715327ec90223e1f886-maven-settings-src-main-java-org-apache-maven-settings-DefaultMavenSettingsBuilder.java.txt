merge from rev.379395

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@379411 13f79535-47bb-0310-9956-ffa450edef68

-        userSettingsFile = getFile( userSettingsPath, "user.home",
-                                    MavenSettingsBuilder.ALT_USER_SETTINGS_XML_LOCATION );
+        userSettingsFile =
+            getFile( userSettingsPath, "user.home", MavenSettingsBuilder.ALT_USER_SETTINGS_XML_LOCATION );
-        globalSettingsFile = getFile( globalSettingsPath, "maven.home",
-                                      MavenSettingsBuilder.ALT_GLOBAL_SETTINGS_XML_LOCATION );
+        globalSettingsFile =
+            getFile( globalSettingsPath, "maven.home", MavenSettingsBuilder.ALT_GLOBAL_SETTINGS_XML_LOCATION );
-                
+
-                
+
-                
+
-                    
+
-                    getLogger().warn( "Failed to initialize environment variable resolver. Skipping environment substitution in settings." );
+                    getLogger().warn(
+                        "Failed to initialize environment variable resolver. Skipping environment substitution in settings." );
-                
+
+            if ( globalSettings == null )
+            {
+                globalSettings = new Settings();
+            }
+
-            
+
-        
-        for( Iterator profiles = settings.getProfiles().iterator(); profiles.hasNext(); )
+
+        for ( Iterator profiles = settings.getProfiles().iterator(); profiles.hasNext(); )
