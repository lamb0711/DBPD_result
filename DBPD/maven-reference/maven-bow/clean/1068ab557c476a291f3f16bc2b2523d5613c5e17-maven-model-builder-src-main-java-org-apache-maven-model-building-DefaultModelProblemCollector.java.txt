[MNG-4454] Incomplete <parent> element causes NPE

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@881784 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.EnumSet;
+import java.util.Set;
+import org.apache.maven.model.building.ModelProblem.Severity;
+    private Set<ModelProblem.Severity> severities = EnumSet.noneOf( ModelProblem.Severity.class );
+
+
+        for ( ModelProblem problem : this.problems )
+        {
+            severities.add( problem.getSeverity() );
+        }
+    }
+
+    public boolean hasFatalErrors()
+    {
+        return severities.contains( ModelProblem.Severity.FATAL );
+    }
+
+    public boolean hasErrors()
+    {
+        return severities.contains( ModelProblem.Severity.ERROR ) || severities.contains( ModelProblem.Severity.FATAL );
+
+        severities.add( problem.getSeverity() );
-        problems.addAll( problems );
+        this.problems.addAll( problems );
+
+        for ( ModelProblem problem : problems )
+        {
+            severities.add( problem.getSeverity() );
+        }
-    public void addFatalError( String message, Exception cause )
+    public void add( Severity severity, String message, Exception cause )
-        add( message, ModelProblem.Severity.FATAL, line, column, cause );
+        add( severity, message, line, column, cause );
-    public void addError( String message )
+    private void add( ModelProblem.Severity severity, String message, int line, int column, Exception cause )
-        addError( message, null );
-    }
+        ModelProblem problem =
+            new DefaultModelProblem( message, severity, getSource(), line, column, getModelId(), cause );
-    public void addError( String message, Exception cause )
-    {
-        int line = -1;
-        int column = -1;
-
-        if ( cause instanceof ModelParseException )
-        {
-            ModelParseException e = (ModelParseException) cause;
-            line = e.getLineNumber();
-            column = e.getColumnNumber();
-        }
-
-        add( message, ModelProblem.Severity.ERROR, line, column, cause );
-    }
-
-    public void addWarning( String message )
-    {
-        addWarning( message, null );
-    }
-
-    public void addWarning( String message, Exception cause )
-    {
-        int line = -1;
-        int column = -1;
-
-        if ( cause instanceof ModelParseException )
-        {
-            ModelParseException e = (ModelParseException) cause;
-            line = e.getLineNumber();
-            column = e.getColumnNumber();
-        }
-
-        add( message, ModelProblem.Severity.WARNING, line, column, cause );
-    }
-
-    private void add( String message, ModelProblem.Severity severity, int line, int column, Exception cause )
-    {
-        problems.add( new DefaultModelProblem( message, severity, getSource(), line, column, getModelId(), cause ) );
+        add( problem );
