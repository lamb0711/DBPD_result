better error handling


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163308 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Repository;
+import org.apache.maven.model.DistributionManagement;
+        
+        //@todo this will be duplicated in case of every mojo which implements deploy goal
+        // this should be pushed into the ArtifactDeployer component
+        DistributionManagement distributionManagement = project.getDistributionManagement();
+        
+        if ( distributionManagement == null )
+        {
+            String msg = "Deployment failed: distributionManagement element" + 
+                            " was not specified in the pom";
+            throw new Exception( msg );
+        }
+        
+        Repository repository = distributionManagement.getRepository();
+        
+        if ( repository == null )
+        {
+            String msg = "Deployment failed: repository element" + 
+                            " was not specified in the pom inside" + 
+                            " distributionManagement element";
+            throw new Exception( msg );
+         }
+        
+        
-            RepositoryUtils.mavenRepositoryToWagonRepository( project.getDistributionManagement().getRepository() );
+            RepositoryUtils.mavenRepositoryToWagonRepository( repository );
