o my test for executing a mojo in isolation is now complete and passes and gives some real indication of the problem that  exists in trying to expose the plugin manager to any external client. the test is pretty nasty but now i can
  work against this while i refactor. i can now merge to trunk.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@751980 13f79535-47bb-0310-9956-ffa450edef68

+    //!!jvz This is one of the last components to remove the legacy system.
+    public void executeMojo( MavenProject project, MojoExecution mojoExecution )
+        throws MojoFailureException, PluginExecutionException, PluginConfigurationException
+    {
+    }    
+    
-        // NOTE: I'm putting these checks in here, since this is the central point of access for
-        // anything that wants to execute a mojo.
-                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( session.getProjectBuilderConfiguration().getExecutionProperties(),
-                                                                                              PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
-                interpolatorProperties
-                    .addAll( InterpolatorProperty.toInterpolatorProperties( session.getProjectBuilderConfiguration().getUserProperties(), PomInterpolatorTag.USER_PROPERTIES.name() ) );
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties(
+                session.getProjectBuilderConfiguration().getExecutionProperties(), PomInterpolatorTag.EXECUTION_PROPERTIES.name() ) );
+                interpolatorProperties.addAll( InterpolatorProperty.toInterpolatorProperties( session.getProjectBuilderConfiguration().getUserProperties(), PomInterpolatorTag.USER_PROPERTIES.name() ) );
-            dispatcher.dispatchStart( event, goalExecId );
+            //dispatcher.dispatchStart( event, goalExecId );
-            dispatcher.dispatchEnd( event, goalExecId );
+            //dispatcher.dispatchEnd( event, goalExecId );
-                pluginContext.put( "project", project );
+                if ( pluginContext != null )
+                {
+                    pluginContext.put( "project", project );
-                pluginContext.put( "pluginDescriptor", pluginDescriptor );
+                    pluginContext.put( "pluginDescriptor", pluginDescriptor );
-                ( (ContextEnabled) mojo ).setPluginContext( pluginContext );
+                    ( (ContextEnabled) mojo ).setPluginContext( pluginContext );
+                }
+    //!!jvz This should not be here, it's part of pre-processing.
