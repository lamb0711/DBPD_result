PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
-import org.apache.maven.artifact.handler.manager.ArtifactHandlerNotFoundException;
-import org.apache.maven.artifact.repository.layout.ArtifactPathFormatException;
-    private ArtifactHandlerManager artifactHandlerManager;
-
-        try
-        {
-            String extension = artifactHandlerManager.getArtifactHandler( artifact.getType() ).getExtension();
-            source = new File( basedir, finalName + "." + extension );
-        }
-        catch ( ArtifactHandlerNotFoundException e )
-        {
-            throw new ArtifactInstallationException( "Error installing artifact: ", e );
-        }
+        String extension = artifact.getArtifactHandler().getExtension();
+        source = new File( basedir, finalName + "." + extension );
-        catch ( ArtifactPathFormatException e )
-        {
-            throw new ArtifactInstallationException( "Error installing artifact: ", e );
-        }
