[MNG-4740] Maven hangs with big aggregators with lots of inter-modules dependencies
Submitted by: Vincent Latombe

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@979808 13f79535-47bb-0310-9956-ffa450edef68

-            projectIds.add( id );
-
-            if ( transitive )
+            if ( projectIds.add( id ) )
-                getDownstreamProjects( id, projectIds, transitive );
+                if ( transitive )
+                {
+                    getDownstreamProjects( id, projectIds, transitive );
+                }
-            projectIds.add( id );
-
-            if ( transitive )
+            if ( projectIds.add( id ) )
-                getUpstreamProjects( id, projectIds, transitive );
+                if ( transitive )
+                {
+                    getUpstreamProjects( id, projectIds, transitive );
+                }
