o Made ProjectBuilder use ProjectBuildingRequest for naming consistency within API

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@780115 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.ArtifactUtils;
-import org.apache.maven.artifact.resolver.ArtifactResolutionRequest;
-import org.apache.maven.artifact.resolver.ArtifactResolutionResult;
-import org.apache.maven.project.artifact.ProjectArtifact;
-import org.apache.maven.repository.RepositorySystem;
-import org.codehaus.plexus.util.StringUtils;
-    @Requirement
-    private RepositorySystem repositorySystem;
-
-        MavenProject project = projectBuilder.build( pomFile, configuration );
-
-        Artifact artifact = new ProjectArtifact( project );                     
-        
-        ArtifactResolutionRequest request = new ArtifactResolutionRequest()
-            .setArtifact( artifact )
-            .setResolveRoot( false )
-            .setResolveTransitively( true )
-            .setLocalRepository( configuration.getLocalRepository() )
-            .setRemoteRepostories( project.getRemoteArtifactRepositories() )
-            .setManagedVersionMap( project.getManagedVersionMap() );
-
-        ArtifactResolutionResult result = repositorySystem.resolve( request );
-
-        if ( result.hasExceptions() )
-        {
-            Exception e = result.getExceptions().get( 0 );
-
-            throw new ProjectBuildingException( safeVersionlessKey( project.getGroupId(), project.getArtifactId() ), "Unable to build project due to an invalid dependency version: " + e.getMessage(),
-                                                pomFile, e );
-        }
-
-        project.setArtifacts( result.getArtifacts() );
-        
-        return new MavenProjectBuildingResult( project, result );
-    }
-
-    private static String safeVersionlessKey( String groupId, String artifactId )
-    {
-        String gid = groupId;
-
-        if ( StringUtils.isEmpty( gid ) )
-        {
-            gid = "unknown";
-        }
-
-        String aid = artifactId;
-
-        if ( StringUtils.isEmpty( aid ) )
-        {
-            aid = "unknown";
-        }
-
-        return ArtifactUtils.versionlessKey( gid, aid );
+        return projectBuilder.buildProjectWithDependencies( pomFile, configuration );
