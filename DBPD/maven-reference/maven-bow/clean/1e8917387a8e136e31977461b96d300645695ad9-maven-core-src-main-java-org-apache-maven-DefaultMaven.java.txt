PR: MNG-1098
show reactor summary on all failures

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307224 13f79535-47bb-0310-9956-ffa450edef68

-        ReactorManager rm;
-
+        List projects;
-            List projects = collectProjects( files, request.getLocalRepository(), request.isRecursive(),
-                                             request.getSettings(), globalProfileManager, !request.isReactorActive() );
+            projects = collectProjects( files, request.getLocalRepository(), request.isRecursive(),
+                                        request.getSettings(), globalProfileManager, !request.isReactorActive() );
-
-            rm = new ReactorManager( projects );
-
-            String requestFailureBehavior = request.getFailureBehavior();
-
-            if ( requestFailureBehavior != null )
-            {
-                rm.setFailureBehavior( requestFailureBehavior );
-            }
-        catch ( CycleDetectedException e )
+        catch ( ProfileActivationException e )
-        catch ( ProfileActivationException e )
+
+        ReactorManager rm = null;
+        try
+        {
+            rm = new ReactorManager( projects );
+
+            String requestFailureBehavior = request.getFailureBehavior();
+
+            if ( requestFailureBehavior != null )
+            {
+                rm.setFailureBehavior( requestFailureBehavior );
+            }
+        }
+        catch ( CycleDetectedException e )
-                        logFailure( response, exception, null );
-
-                        if ( rm.hasMultipleProjects() && response.executedMultipleProjects() )
-                        {
-                            writeReactorSummary( rm );
-                        }
+                        logFailure( response, rm, exception, null );
-                        logFailure( response, e, e.getLongMessage() );
+                        logFailure( response, rm, e, e.getLongMessage() );
-                            logFailure( response, e, e.getLongMessage() );
+                            logFailure( response, rm, e, e.getLongMessage() );
-                        logFailure( response, exception, null );
+                        logFailure( response, rm, exception, null );
-            else
+            else if ( rm.hasBuildSuccess( project ) )
+            else
+            {
+                logReactorSummaryLine( project.getName(), "NOT BUILT" );
+            }
-        logFailure( response, e, null );
+        logError( response );
-    protected void logFailure( MavenExecutionResponse r, Throwable error, String longMessage )
+    protected void logFailure( MavenExecutionResponse r, ReactorManager rm, Throwable error, String longMessage )
+        if ( rm.hasMultipleProjects() && r.executedMultipleProjects() )
+        {
+            writeReactorSummary( rm );
+        }
