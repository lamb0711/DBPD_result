Load Maven version and display


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163824 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Model;
+import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
+import java.io.InputStreamReader;
+import java.net.URL;
+import java.util.Enumeration;
-            System.out.println( "Maven version: " );
+            // TODO: is there a beter way? Maybe read the manifest?
+
+            String version = "unknown";
+
+            for ( Enumeration e = MavenCli.class.getClassLoader().getResources( "/META-INF/maven/pom.xml" );
+                  e.hasMoreElements(); )
+            {
+                URL resource = (URL) e.nextElement();
+                if ( resource.getPath().indexOf( "maven-core" ) >= 0 )
+                {
+                    MavenXpp3Reader reader = new MavenXpp3Reader();
+                    Model model = reader.read( new InputStreamReader( resource.openStream() ) );
+                    version = model.getVersion();
+                    break;
+                }
+            }
+
+            System.out.println( "Maven version: " + version );
