o Refactored RepositoryCleaner to use DiscoveryPhase and RewritePhase.
o Added the ability to read a pom and figure out whether it's a v4 pom (based on presence of modelVersion)
o Added a more accurate counter for artifacts that are actually rewritten successfully, rather than just the ones that enter the rewriting process.
o Probably need to add the phases still...


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@169041 13f79535-47bb-0310-9956-ffa450edef68

-public class PomV3ToV4Translator extends AbstractLogEnabled
+public class PomV3ToV4Translator
+    extends AbstractLogEnabled
-            
+
-                    int plusIdx = id.indexOf("+");
-                    if(plusIdx > -1)
+                    int plusIdx = id.indexOf( "+" );
+                    if ( plusIdx > -1 )
-                        groupId = id.substring(0, plusIdx);
+                        groupId = id.substring( 0, plusIdx );
-            
+
-            reporter.warn( "Ignoring gump repository id: \'" + v3Model.getGumpRepositoryId() +
-                           "\'. This is not supported in v4 POMs." );
+            reporter.warn( "Ignoring gump repository id: \'" + v3Model.getGumpRepositoryId()
+                + "\'. This is not supported in v4 POMs." );
-                    reporter.warn( "Non-standard report name: \'" + reportName +
-                                   "\'. Using entire name for plugin artifactId." );
+                    reporter.warn( "Non-standard report name: \'" + reportName
+                        + "\'. Using entire name for plugin artifactId." );
-                info.append( "Using some contrived information for report: \'" ).append( reportName ).append( "\'.\n" ).append(
-                    "\to groupId: \'maven\'\n" ).append( "\to artifactId: \'" ).append( reportPluginName ).append(
-                        "\'\n" ).append( "\to version: \'1.0-SNAPSHOT\'\n" ).append( "\to goal: \'report\'\n" ).append(
-                            "\n" ).append(
-                                "These values were extracted using the v3 report naming convention, but may be wrong." );
+                info.append( "Using some contrived information for report: \'" ).append( reportName ).append( "\'.\n" )
+                    .append( "\to groupId: \'maven\'\n" ).append( "\to artifactId: \'" ).append( reportPluginName )
+                    .append( "\'\n" ).append( "\to version: \'1.0-SNAPSHOT\'\n" ).append( "\to goal: \'report\'\n" )
+                    .append( "\n" )
+                    .append( "These values were extracted using the v3 report naming convention, but may be wrong." );
-        org.apache.maven.model.v3_0_0.Organization v3Organization, Reporter reporter )
+                                                                      org.apache.maven.model.v3_0_0.Organization v3Organization,
+                                                                      Reporter reporter )
-                org.apache.maven.model.v3_0_0.MailingList v3List = (org.apache.maven.model.v3_0_0.MailingList) it.next();
+                org.apache.maven.model.v3_0_0.MailingList v3List = (org.apache.maven.model.v3_0_0.MailingList) it
+                    .next();
-                                                                    org.apache.maven.model.v3_0_0.Model v3Model )
+                                                                   org.apache.maven.model.v3_0_0.Model v3Model )
-                org.apache.maven.model.v3_0_0.Developer v3Developer = (org.apache.maven.model.v3_0_0.Developer) it.next();
+                org.apache.maven.model.v3_0_0.Developer v3Developer = (org.apache.maven.model.v3_0_0.Developer) it
+                    .next();
-                        int plusIdx = id.indexOf("+");
-                        
-                        if(plusIdx > -1)
+                        int plusIdx = id.indexOf( "+" );
+
+                        if ( plusIdx > -1 )
-                            groupId = id.substring(0, plusIdx);
+                            groupId = id.substring( 0, plusIdx );
-                org.apache.maven.model.v3_0_0.Contributor v3Contributor = (org.apache.maven.model.v3_0_0.Contributor) it.next();
+                org.apache.maven.model.v3_0_0.Contributor v3Contributor = (org.apache.maven.model.v3_0_0.Contributor) it
+                    .next();
