o add functionality to interpolate <extend/> element.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162562 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
+    private String interpolate( String text, Map namespace )
+    {
+        Iterator keys = namespace.keySet().iterator();
-    static class BootstrapPomParser
+        while ( keys.hasNext() )
+        {
+            String key = keys.next().toString();
+
+            Object obj = namespace.get( key );
+
+            String value = obj.toString();
+
+            text = replace( text, "${" + key + "}", value );
+
+            if ( key.indexOf( " " ) == -1 )
+            {
+                text = replace( text, "$" + key, value );
+            }
+        }
+        return text;
+    }
+
+    private String replace( String text, String repl, String with )
+    {
+        return replace( text, repl, with, -1 );
+    }
+
+    private String replace( String text, String repl, String with, int max )
+    {
+        if ( text == null || repl == null || with == null || repl.length() == 0 )
+        {
+            return text;
+        }
+
+        StringBuffer buf = new StringBuffer( text.length() );
+        int start = 0, end = 0;
+        while ( ( end = text.indexOf( repl, start ) ) != -1 )
+        {
+            buf.append( text.substring( start, end ) ).append( with );
+            start = end + repl.length();
+
+            if ( --max == 0 )
+            {
+                break;
+            }
+        }
+        buf.append( text.substring( start ) );
+        return buf.toString();
+    }
+
+    class BootstrapPomParser
-        private static SAXParserFactory saxFactory;
+        private SAXParserFactory saxFactory;
-                String extend = getBodyText();
+                String extend = interpolate( getBodyText(), properties ) ;
