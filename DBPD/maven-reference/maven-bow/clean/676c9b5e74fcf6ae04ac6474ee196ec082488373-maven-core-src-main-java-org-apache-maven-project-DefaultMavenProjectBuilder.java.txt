o Fixing the parent POM downloading problem.

{issue:MNG-19}


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162954 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collection;
+import java.util.Collections;
-            MavenProject project = assembleLineage( projectDescriptor, localRepository, lineage );
-
-            // I think we will need to move this into the assembleLineage method in order to
-            // have access to any repositories set in any of the models. Otherwise we don't
-            // have the information required to to retrieve parent poms.
+            MavenProject project = assembleLineage( projectDescriptor,
+                                                    localRepository, 
+                                                    lineage, 
+                                                    superModel.getRepositories() );
-    private MavenProject assembleLineage( File projectDescriptor, ArtifactRepository localRepository, LinkedList lineage )
+    private MavenProject assembleLineage( File projectDescriptor, 
+                                          ArtifactRepository localRepository, 
+                                          LinkedList lineage,
+                                          List remoteRepositories )
-            // Do the have the necessary information to actually find the parent
+            // Do we have the necessary information to actually find the parent
+            remoteRepositories.addAll( model.getRepositories() );
+
-                                              RepositoryUtils.mavenToWagon( model.getRepositories() ),
+                                              RepositoryUtils.mavenToWagon( remoteRepositories ),
-            MavenProject parent = assembleLineage( parentPom, localRepository, lineage );
+            MavenProject parent = assembleLineage( parentPom, localRepository, lineage, remoteRepositories );
