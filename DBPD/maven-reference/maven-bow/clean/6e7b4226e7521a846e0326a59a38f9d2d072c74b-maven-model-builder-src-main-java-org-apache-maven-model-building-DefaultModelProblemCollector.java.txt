[MNG-1803] Provide line number information when there are errors processing a pom.xml

o Merged feature branch

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@949708 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.InputLocation;
-    public void add( Severity severity, String message, Exception cause )
+    public void add( Severity severity, String message, InputLocation location, Exception cause )
+        String source = null;
+        String modelId = null;
-        if ( cause instanceof ModelParseException )
+        if ( location != null )
+        {
+            line = location.getLineNumber();
+            column = location.getColumnNumber();
+            if ( location.getSource() != null )
+            {
+                modelId = location.getSource().getModelId();
+                source = location.getSource().getLocation();
+            }
+        }
+
+        if ( modelId == null )
+        {
+            modelId = getModelId();
+            source = getSource();
+        }
+
+        if ( line <= 0 && column <= 0 && cause instanceof ModelParseException )
-        add( severity, message, line, column, cause );
-    }
-
-    private void add( ModelProblem.Severity severity, String message, int line, int column, Exception cause )
-    {
-        ModelProblem problem =
-            new DefaultModelProblem( message, severity, getSource(), line, column, getModelId(), cause );
+        ModelProblem problem = new DefaultModelProblem( message, severity, source, line, column, modelId, cause );
