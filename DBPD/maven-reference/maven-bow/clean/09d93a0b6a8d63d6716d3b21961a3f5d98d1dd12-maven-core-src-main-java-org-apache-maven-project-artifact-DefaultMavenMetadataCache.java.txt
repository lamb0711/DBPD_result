o Fixed critical performance regression introduced in r801648. The relocation is now grabbed alongside the direct dependencies when we get the resolution group, these bits are stored in the same file and so we can as well process them in one go.
Issue id: o


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@802251 13f79535-47bb-0310-9956-ffa450edef68

+        private Artifact relocatedArtifact;
-        CacheRecord(Artifact pomArtifact, Set<Artifact> artifacts, Map<String, Artifact> managedVersions, List<ArtifactRepository> remoteRepositories)
+        CacheRecord( Artifact pomArtifact, Artifact relocatedArtifact, Set<Artifact> artifacts,
+                     Map<String, Artifact> managedVersions, List<ArtifactRepository> remoteRepositories )
+            this.relocatedArtifact = ArtifactUtils.copyArtifactSafe( relocatedArtifact );
-        
+
+        public Artifact getRelocatedArtifact()
+        {
+            return relocatedArtifact;
+        }
+
+            Artifact relocatedArtifact = ArtifactUtils.copyArtifactSafe( cacheRecord.getRelocatedArtifact() );
-            return new ResolutionGroup( pomArtifact, artifacts, managedVersions, cacheRecord.getRemoteRepositories() );
+            return new ResolutionGroup( pomArtifact, relocatedArtifact, artifacts, managedVersions,
+                                        cacheRecord.getRemoteRepositories() );
-            new CacheRecord( result.getPomArtifact(), result.getArtifacts(), result.getManagedVersions(),
-                             result.getResolutionRepositories() );
+            new CacheRecord( result.getPomArtifact(), result.getRelocatedArtifact(), result.getArtifacts(),
+                             result.getManagedVersions(), result.getResolutionRepositories() );
