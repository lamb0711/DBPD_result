o right now disabling the setting of the classes directory as this is only done in 2.x in the compiler plugin and causes problems with the integration tests.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@780077 13f79535-47bb-0310-9956-ffa450edef68

-            if ( artifact.getType().equals( "jar" ) )
+            File artifactFile = project.getArtifact().getFile();
+                        
+            if ( artifactFile != null && artifactFile.exists() )
-                File artifactFile = new File( project.getBuild().getDirectory(), project.getArtifactId() + "-" + project.getVersion() + "."+ artifact.getArtifactHandler().getExtension() );
-                
-                File classesDirectory = new File( project.getBuild().getOutputDirectory() );
-
-                
-                if ( artifactFile.exists() )
-                {
-                    artifact.setFile( artifactFile );
-                    artifact.setFromAuthoritativeRepository( true );
+                artifact.setFile( artifactFile );
-                    artifact.setResolved( true );                    
-                }                
-                else if ( classesDirectory.exists() )
-                {
-                    artifact.setFile( classesDirectory );
+                artifact.setFromAuthoritativeRepository( true );
-                    artifact.setFromAuthoritativeRepository( true );
+                artifact.setResolved( true );
+            }            
+            /*
+            
+            TODO: This is being left out because Maven 2.x does not set this internally and it is only done by the compiler
+            plugin and not done generally. This should be done generally but currently causes problems with MNG-3023
+            
+            else if ( new File( project.getBuild().getOutputDirectory() ).exists() )
+            {
+                artifact.setFile( new File( project.getBuild().getOutputDirectory() ) );
-                    artifact.setResolved( true );
-                }
+                artifact.setFromAuthoritativeRepository( true );
+
+                artifact.setResolved( true );
+            */
-                
+
