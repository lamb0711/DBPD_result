o adding in project build failure exceptions that were not being output


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@721255 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.PrintWriter;
+import java.io.StringWriter;
+import java.text.DateFormat;
+import java.text.SimpleDateFormat;
+import java.util.Date;
+import java.util.Iterator;
+import java.util.Locale;
+import java.util.TimeZone;
+
+import org.apache.maven.ProjectBuildFailureException;
+import org.apache.maven.plugin.MojoFailureException;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.PrintWriter;
-import java.io.StringWriter;
-import java.text.DateFormat;
-import java.text.SimpleDateFormat;
-import java.util.Date;
-import java.util.Iterator;
-import java.util.Locale;
-import java.util.Properties;
-import java.util.TimeZone;
-
-
+                
-    {
+    {        
+        System.out.println( e.getClass() );
+        
+        if ( e instanceof ProjectBuildFailureException )
+        {
+            handled = handleBuildFailureException( (ProjectBuildFailureException) e, showStackTraces, writer );
+        }
+
+    private static boolean handleBuildFailureException( ProjectBuildFailureException e, boolean showStackTraces, StringWriter writer )
+    {
+        MojoFailureException mojoFailureException = e.getMojoFailureException();
+        writer.write( mojoFailureException.getMessage() );
+        writer.write( mojoFailureException.getLongMessage() );        
+        return true;
+    }
+    
