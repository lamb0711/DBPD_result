Ignore missing modules during extension-scanning when MavenEmbedder.readProject(..) is called. At other times, as in the case of normal builds, don't suppress missing module exceptions.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@629571 13f79535-47bb-0310-9956-ffa450edef68

-                                        MavenExecutionRequest request )
+                                        MavenExecutionRequest request,
+                                        boolean ignoreMissingModules )
-        
+
-        
+
-            scanInternal( pom, request, visited, internalFiles );
+            scanInternal( pom, request, visited, internalFiles, ignoreMissingModules );
-                                        MavenExecutionRequest request )
+                                        MavenExecutionRequest request,
+                                        boolean ignoreMissingModules )
-        
+
-        
-        scanInternal( pom, request, new ArrayList(), internalFiles );
+
+        scanInternal( pom, request, new ArrayList(), internalFiles, ignoreMissingModules );
-                               List reactorFiles )
+                               List reactorFiles,
+                               boolean ignoreMissingModules )
-                                               reactorFiles );
+                                               reactorFiles,
+                                               ignoreMissingModules );
-                                            List reactorFiles )
+                                            List reactorFiles,
+                                            boolean ignoreMissingModules )
-                    throw new MissingModuleException( moduleSubpath, modulePomDirectory, containingPom );
+                    if ( ignoreMissingModules )
+                    {
+                        continue;
+                    }
+                    else
+                    {
+                        throw new MissingModuleException( moduleSubpath, modulePomDirectory, containingPom );
+                    }
-                
+
-                
-                scanInternal( modulePomDirectory, request, visitedModelIds, reactorFiles );
+
+                scanInternal( modulePomDirectory, request, visitedModelIds, reactorFiles, ignoreMissingModules );
