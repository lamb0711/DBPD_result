[MNG-4776] NPE during build from parent but not from child

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@989222 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.logging.Logger;
+
+    @Requirement
+    private Logger logger;
+
+    @Requirement
+    private LifecyclePluginResolver lifecyclePluginResolver;
+
-                                  PluginPrefixResolver pluginPrefixResolver )
+                                  PluginPrefixResolver pluginPrefixResolver,
+                                  LifecyclePluginResolver lifecyclePluginResolver )
+        this.lifecyclePluginResolver = lifecyclePluginResolver;
+        if ( session.getCurrentProject() != null )
+        {
+            try
+            {
+                lifecyclePluginResolver.resolveMissingPluginVersions( session.getCurrentProject(), session );
+            }
+            catch ( PluginVersionResolutionException e )
+            {
+                // not critical here
+                logger.debug( e.getMessage(), e );
+            }
+        }
+
