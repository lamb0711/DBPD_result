MNG-2398: the lifecycle executor exception wasn't being propagated properly.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@572210 13f79535-47bb-0310-9956-ffa450edef68

-            
+
-            showFatalError( "Error reading user settings: " + cvr.getUserSettingsException().getMessage(), cvr.getUserSettingsException(), showErrors );
+            showError( "Error reading user settings: ", cvr.getUserSettingsException(), showErrors );
-            showFatalError( "Error reading global settings: " + cvr.getGlobalSettingsException().getMessage(), cvr.getGlobalSettingsException(), showErrors );
+            showError( "Error reading global settings: ", cvr.getGlobalSettingsException(), showErrors );
-            showFatalError( "Unable to start the embedded plexus container", e, showErrors );
+            showError( "Unable to start the embedder: ", e, showErrors );
-
-        {                        
-            showFatalError( "Unable to configure the Maven application", (Exception) result.getExceptions().get( 0 ), showErrors );
+        {
+            showError( (Exception) result.getExceptions().get( 0 ), showErrors );
-    private static void showFatalError( String message,
-                                        Exception e,
-                                        boolean show )
+    private static void showError( Exception e,
+                                   boolean show )
-        System.err.println( "FATAL ERROR: " + message );
+        showError( e.getMessage(), e, show );
+    }
+
+    private static void showError( String message,
+                                   Exception e,
+                                   boolean show )
+    {
+        System.err.println( message );
+
-    private static void showError( String message,
-                                   Exception e,
-                                   boolean show )
-    {
-        System.err.println( message );
-        if ( show )
-        {
-            System.err.println( "Error stacktrace:" );
-
-            e.printStackTrace();
-        }
-    }
-
