leave maven-artifact out

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@314762 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Arrays;
+import java.util.Arrays;
-    
+
-     * 
-     *  @parameter expression="${surefire.printSummary}"
-     *             default-value="true"
+     *
+     * @parameter expression="${surefire.printSummary}"
+     * default-value="true"
-    
+
-     * 
+     *
-     *            default-value="brief"       
+     * default-value="brief"
-     private String reportFormat;
-     
-     /**
-      * Option to generate a file test report or just output the test report to the console.
-      * 
-      * @parameter expression="${surefire.useFile}"
-      *            default-value="true"
-      */
-     private boolean useFile;
+    private String reportFormat;
+
+    /**
+     * Option to generate a file test report or just output the test report to the console.
+     *
+     * @parameter expression="${surefire.useFile}"
+     * default-value="true"
+     */
+    private boolean useFile;
-                includes = new ArrayList( Arrays.asList( new String[] { "**/Test*.java", "**/*Test.java", "**/*TestCase.java" } ) );
+                includes = new ArrayList(
+                    Arrays.asList( new String[]{"**/Test*.java", "**/*Test.java", "**/*TestCase.java"} ) );
-                excludes = new ArrayList( Arrays.asList( new String[] { "**/Abstract*Test.java", "**/Abstract*TestCase.java" } ) );
+                excludes = new ArrayList(
+                    Arrays.asList( new String[]{"**/Abstract*Test.java", "**/Abstract*TestCase.java"} ) );
-//            if ( "junit".equals( artifact.getArtifactId() ) || "surefire".equals( artifact.getArtifactId() ) )
-//            {
+            // TODO: this is crude for now. We really want to get "surefire-booter" and all its dependencies, but the
+            // artifacts don't keep track of their children. We could just throw all of them in, but that would add an
+            // unnecessary maven-artifact dependency which is precisely the reason we are isolating the classloader
+            if ( "junit".equals( artifact.getArtifactId() ) || "surefire".equals( artifact.getArtifactId() ) ||
+                "surefire-booter".equals( artifact.getArtifactId() ) ||
+                "plexus-utils".equals( artifact.getArtifactId() ) )
+            {
-//            }
+            }
-        addReporters(surefireBooter);
-        
+        addReporters( surefireBooter );
+
-    
+
-     * <p> Adds Reporters that will generate reports with different formatting. 
-     * <p> The Reporter that will be added will be based on the value of the parameter 
-     *     useFile, reportFormat, and printSummary.
-     *     
+     * <p> Adds Reporters that will generate reports with different formatting.
+     * <p> The Reporter that will be added will be based on the value of the parameter
+     * useFile, reportFormat, and printSummary.
+     *
-    private void addReporters(SurefireBooter surefireBooter)
+    private void addReporters( SurefireBooter surefireBooter )
-        surefireBooter.addReport( "org.codehaus.surefire.report.XMLReporter" );   
+        surefireBooter.addReport( "org.codehaus.surefire.report.XMLReporter" );
