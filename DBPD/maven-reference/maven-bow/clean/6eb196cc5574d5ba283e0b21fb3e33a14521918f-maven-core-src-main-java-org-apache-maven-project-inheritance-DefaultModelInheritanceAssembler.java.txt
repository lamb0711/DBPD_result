o Corrected issue with inheritance of <dependencyManagement/>


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163326 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.DependencyManagement;
+import java.util.ArrayList;
+import java.util.Map;
+import java.util.TreeMap;
+        
+        DependencyManagement parentDepMgmt = parent.getDependencyManagement();
+        DependencyManagement childDepMgmt = child.getDependencyManagement();
+        if(parentDepMgmt != null)
+        {
+            if(childDepMgmt == null)
+            {
+                child.setDependencyManagement(parentDepMgmt);
+            }
+            else
+            {
+                List parentDeps = parentDepMgmt.getDependencies();
+                
+                Map mappedParentDeps = new TreeMap();
+                for ( Iterator it = parentDeps.iterator(); it.hasNext(); )
+                {
+                    Dependency dep = (Dependency) it.next();
+                    mappedParentDeps.put(dep.getManagementKey(), dep);
+                }
+                
+                List deps = new ArrayList(parentDeps);
+                for ( Iterator it = childDepMgmt.getDependencies().iterator(); it.hasNext(); )
+                {
+                    Dependency dep = (Dependency) it.next();
+                    if(!mappedParentDeps.containsKey(dep.getManagementKey()))
+                    {
+                        deps.add(dep);
+                    }
+                }
+                
+                childDepMgmt.setDependencies(deps);
+            }
+        }
