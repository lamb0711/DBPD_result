Implemented list items #2 and #3 from the main issue (scope from m1, and plugin entry translation in POMs). Tests included.


PR: MNG-309


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163974 13f79535-47bb-0310-9956-ffa450edef68

-        Embedder embedder = new Embedder();
-            embedder.start( new ClassWorld() );
-
-            RepositoryCleaner cleaner = null;
-            try
-            {
-                cleaner = (RepositoryCleaner) embedder.lookup( RepositoryCleaner.ROLE );
-
-                cleaner.cleanRepository( config );
-            }
-            finally
-            {
-                if ( cleaner != null )
-                {
-                    embedder.release( cleaner );
-                }
-            }
+            launch( config );
+            
+            System.exit( 0 );
-        catch ( Throwable e )
+        catch ( Exception e )
+            
+            System.exit( 1 );
+        }
+    }
+
+    public static void launch( RepositoryCleanerConfiguration config ) throws Exception
+    {
+        Embedder embedder = new Embedder();
+        embedder.start( new ClassWorld() );
+
+        RepositoryCleaner cleaner = null;
+        try
+        {
+            cleaner = (RepositoryCleaner) embedder.lookup( RepositoryCleaner.ROLE );
+
+            cleaner.cleanRepository( config );
+        }
+        finally
+        {
+            if ( cleaner != null )
+            {
+                embedder.release( cleaner );
+            }
-        config.setErrorReportSmtpHost( props.getProperty( "errorReport.smtpHost", "localhost" ) );
