PR: MNG-758
add @component tag for requirements

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@239397 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.descriptor.Requirement;
-import java.util.ArrayList;
-import java.util.Collection;
+import java.util.HashMap;
+import java.util.Map;
-        Collection requirements = new ArrayList();
+        Map requirements = new HashMap();
-                    requirements.add( parameter );
+                    // remove "component." plus expression delimiters
+                    String role = expression.substring( "${component.".length(), expression.length() - 1 );
+
+                    // TODO: remove deprecated expression
+                    requirements.put( parameter.getName(), new Requirement( role ) );
+                }
+                else if ( parameter.getRequirement() != null )
+                {
+                    requirements.put( parameter.getName(), parameter.getRequirement() );
-            for ( Iterator i = requirements.iterator(); i.hasNext(); )
+            for ( Iterator i = requirements.keySet().iterator(); i.hasNext(); )
-                Parameter requirement = (Parameter) i.next();
+                String key = (String) i.next();
+                Requirement requirement = (Requirement) requirements.get( key );
-                // remove "component." plus expression delimiters
-                String expression = requirement.getExpression();
-                String role = expression.substring( "${component.".length(), expression.length() - 1 );
+                element( w, "role", requirement.getRole() );
-                element( w, "role", role );
+                if ( requirement.getRoleHint() != null )
+                {
+                    element( w, "role-hint", requirement.getRoleHint() );
+                }
-                element( w, "field-name", requirement.getName() );
+                element( w, "field-name", key );
