o in the middle of a ReactorArtifactRepository but ben and igor need access so checking in


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@772832 13f79535-47bb-0310-9956-ffa450edef68

+        
+    private static int count = 0;
+    
+    // org.apache.maven.plugins:maven-remote-resources-plugin:1.0:process
+    MojoDescriptor getMojoDescriptor( String groupId, String artifactId, String version, String goal, MavenProject project, ArtifactRepository localRepository )
+        throws LifecycleExecutionException
+    {        
+        Plugin plugin = new Plugin();
+        plugin.setGroupId( groupId );
+        plugin.setArtifactId( artifactId );
+        plugin.setVersion( version );        
+
+        MojoDescriptor mojoDescriptor;
+    
+        //need to do the active project thing as the site plugin is referencing itself
+        
+        if ( artifactId.equals( "maven-site-plugin" ) ){ count++; System.out.println( count ); };
+        
+        System.out.println( ">>> " + artifactId );
+        try
+        {
+            mojoDescriptor = pluginManager.getMojoDescriptor( plugin, goal, project, localRepository );
+        }
+        catch ( PluginLoaderException e )
+        {
+            throw new LifecycleExecutionException( "Error loading MojoDescriptor.", e );
+        }        
+                
+        return mojoDescriptor;
+    }    
-        for( Plugin p: plugins )
+        for( Plugin p : plugins )
-                for( String g : e.getGoals() )
+                for( String goal : e.getGoals() )
-                    Xpp3Dom dom = getDefaultPluginConfiguration( p.getGroupId(), p.getArtifactId(), p.getVersion(), g, project, localRepository );
+                    Xpp3Dom dom = getDefaultPluginConfiguration( p.getGroupId(), p.getArtifactId(), p.getVersion(), goal, project, localRepository );
-        //return new Xpp3Dom( "configuration" );
-        return convert( getMojoDescriptor( groupId+":"+artifactId+":"+version+":"+goal, project, localRepository ) );
+        return convert( getMojoDescriptor( groupId, artifactId, version, goal, project, localRepository ) );
