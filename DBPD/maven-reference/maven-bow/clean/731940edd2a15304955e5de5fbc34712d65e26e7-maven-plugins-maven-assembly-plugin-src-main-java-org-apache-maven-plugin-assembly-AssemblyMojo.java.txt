PR: MNG-940
Submitted by: Dan Tran
Reviewed by:  Brett Porter
use the plexus archiver manager for unpacking and packing to simplify and expose all archivers

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@295006 13f79535-47bb-0310-9956-ffa450edef68

-import org.codehaus.plexus.archiver.jar.JarArchiver;
+import org.codehaus.plexus.archiver.manager.NoSuchArchiverException;
-import org.codehaus.plexus.archiver.zip.ZipArchiver;
-                // TODO: use component roles? Can we do that in a mojo?
+            catch ( NoSuchArchiverException e )
+            {
+                throw new MojoExecutionException( e.getMessage() );
+            }
-    private static Archiver createArchiver( String format )
-        throws ArchiverException
+    private Archiver createArchiver( String format )
+        throws ArchiverException, NoSuchArchiverException
-            TarArchiver tarArchiver = new TarArchiver();
+            TarArchiver tarArchiver = (TarArchiver) this.archiverManager.getArchiver( "tar" );
-        else if ( format.startsWith( "zip" ) )
-        {
-            archiver = new ZipArchiver();
-        }
-        else if ( format.startsWith( "jar" ) )
-        {
-            // TODO: use MavenArchiver for manifest?
-            JarArchiver jarArchiver = new JarArchiver();
-            jarArchiver.setCompress( true );
-            archiver = jarArchiver;
-        }
-            // TODO: better handling
-            throw new IllegalArgumentException( "Unknown format: " + format );
+            archiver = this.archiverManager.getArchiver( format );
