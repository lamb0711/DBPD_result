MNG-561: improve documentation for the plugin:xdoc goal

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@216148 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.commons.lang.ClassUtils;
- * This class provides the Javadoc report support.
+ * Generates documentation for the Java code in the project using the standard 
+ * <a href="http://java.sun.com/j2se/javadoc/">Javadoc Tool</a> tool.
+    /** The current class directory */
+    private static final String RESOURCE_DIR = ClassUtils.getPackageName(JavadocReport.class).replace('.', '/');
+
+    private static final String DEFAULT_TEMPLATE = RESOURCE_DIR + "/maven-site.vm";
+    
+    /** Default location for css */
+    private static final String DEFAULT_CSS_NAME = "stylesheet.css";
+    private static final String RESOURCE_CSS_DIR = RESOURCE_DIR + "/css";
+    
+    // Using for the plugin:xdoc goal. Best way?
+    /** Default bottom */
+    private static final String DEFAULT_BOTTOM = "Copyright ${project.inceptionYear-currentYear} ${project.organization.name}. All Rights Reserved.";
+    /** Default bottom */
+    private static final String DEFAULT_DESTDIR = "${project.build.directory}/site/apidocs";
+    /** Default doctitle */
+    private static final String DEFAULT_DOCTITLE = "${windowtitle}";
-
-    /** Default location for css */
-    private static final String DEFAULT_STYLESHEET_LOCATION = "org/apache/maven/plugin/javadoc/css/stylesheet.css";
-
+    /** Default window title */
+    private static final String DEFAULT_WINDOW_TITLE = "${project.name} ${project.version} API";
+   
-     * Set an additional parameter on the command line
+     * Set an additional parameter on the command line.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#breakiterator">breakiterator</a>
+     * Uses the sentence break iterator to determine the end of the first sentence.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#breakiterator">breakiterator</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#doclet">doclet</a>
+     * Specifies the class file that starts the doclet used in generating the documentation.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#doclet">doclet</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docletpath">docletpath</a>
+     * Specifies the path to the doclet starting class file (specified with the -doclet option) and any jar files it depends on.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docletpath">docletpath</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#encoding">encoding</a>
+     * Specifies the encoding name of the source files.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#encoding">encoding</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#exclude">exclude</a>
+     * Unconditionally excludes the specified packages and their subpackages from the list formed by -subpackages.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#exclude">exclude</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#extdirs">extdirs</a>
+     * Specifies the directories where extension classes reside.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#extdirs">extdirs</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#locale">locale</a>
+     * Specifies the locale that javadoc uses when generating documentation.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#locale">locale</a>.
-     * Set the maximum memory to be used by the javadoc process
+     * Specifies the maximum Java heap size to be used when launching the javadoc executable. 
+     * Some JVMs refer to this property as the -Xmx parameter. Example: '512' or '512m'.
-     * Set the minimum memory to be used by the javadoc process
+     * Specifies the minimum Java heap size to be used when launching the javadoc executable. 
+     * Some JVMs refer to this property as the -Xms parameter. Example: '128' or '128m'.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#1.1">1.1</a>
+     * This option created documentation with the appearance and functionality of documentation generated by Javadoc 1.1.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#1.1">1.1</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#overview">overview</a>
+     * Specifies that javadoc should retrieve the text for the overview documentation from the "source" file specified by path/filename and place it on the Overview page (overview-summary.html).
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#overview">overview</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#package">package</a>
+     * Shows only protected and public classes and members.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#package">package</a>.
+     *            default-value="true"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#private">private</a>
+     * Shows all classes and members.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#private">private</a>
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#protected">protected</a>
+     * Shows only protected and public classes and members.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#protected">protected</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#public">public</a>
+     * Shows only public classes and members.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#public">public</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#quiet">quiet</a>
+     * Shuts off non-error and non-warning messages, leaving only the warnings and errors appear, making them easier to view.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#quiet">quiet</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#source">source</a>
+     * Necessary to enable javadoc to handle assertions present in J2SE v 1.4 source code.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#source">source</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#verbose">verbose</a>
+     * Provides more detailed messages while javadoc is running.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#verbose">verbose</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#author">author</a>
+     * Specifies whether or not the author text is included in the generated Javadocs.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#author">author</a>.
+     *            default-value="true"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#bottom">bottom</a>
+     * Specifies the text to be placed at the bottom of each output file.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#bottom">bottom</a>.
+     *            default-value="ISO-8859-1"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#charset">charset</a>
+     * Specifies the HTML character set for this document.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#charset">charset</a>.
+     *            default-value="ISO-8859-1"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#d">d</a>
+     * Specifies the destination directory where javadoc saves the generated HTML files. 
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#d">d</a>.
+     *            default-value="${project.build.directory}/site/apidocs"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docfilessubdirs">docfilessubdirs</a>
+     * Enables deep copying of "doc-files" directories.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docfilessubdirs">docfilessubdirs</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docencoding">docencoding</a>
+     * Specifies the encoding of the generated HTML files.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#docencoding">docencoding</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#doctitle">doctitle</a>
+     * Specifies the title to be placed near the top of the overview summary file. 
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#doctitle">doctitle</a>.
+     *            default-value="${windowtitle}"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#excludedocfilessubdir">excludedocfilessubdir</a>
+     * Excludes any "doc-files" subdirectories with the given names. 
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#excludedocfilessubdir">excludedocfilessubdir</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#footer">footer</a>
+     * Specifies the footer text to be placed at the bottom of each output file.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#footer">footer</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#group">group</a>
+     * Separates packages on the overview page into whatever groups you specify, one group per table.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#group">group</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#header">header</a>
+     * Specifies the header text to be placed at the top of each output file.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#header">header</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#helpfile">helpfile</a>
+     * Specifies the path of an alternate help file path\filename that the HELP link in the top and bottom navigation bars link to.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#helpfile">helpfile</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#link">link</a>
+     * Creates links to existing javadoc-generated documentation of external referenced classes.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#link">link</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linkoffline">linkoffline</a>
+     * This option is a variation of -link; they both create links to javadoc-generated documentation for external referenced classes.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linkoffline">linkoffline</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linksource">linksource</a>
+     * Creates an HTML version of each source file (with line numbers) and adds links to them from the standard HTML documentation.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linksource">linksource</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linksource">nodeprecated</a>
-     * 
-     * @parameter expression="${nodeprecated}"
-     */
-    private boolean nodeprecated = false;
-
-    /**
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nocomment">nocomment</a>
+     * Suppress the entire comment body, including the main description and all tags, generating only declarations.
+     * Ssee <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nocomment">nocomment</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nodeprecatedlist">nodeprecatedlist</a>
+     * Prevents the generation of any deprecated API at all in the documentation.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#linksource">nodeprecated</a>.
+     * 
+     * @parameter expression="${nodeprecated}"
+     *            default-value="false"
+     */
+    private boolean nodeprecated = false;
+    
+    /**
+     * Prevents the generation of the file containing the list of deprecated APIs (deprecated-list.html) and the link in the navigation bar to that page.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nodeprecatedlist">nodeprecatedlist</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nohelp">nohelp</a>
+     * Omits the HELP link in the navigation bars at the top and bottom of each page of output.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nohelp">nohelp</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#noindex">noindex</a>
+     * Omits the index from the generated docs.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#noindex">noindex</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nonavbar">nonavbar</a>
+     * Omits the index from the generated docs. The default value is 'false'.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nonavbar">nonavbar</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#noqualifier">noqualifier</a>
+     * Omits qualifying package name from ahead of class names in output.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#noqualifier">noqualifier</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nosince">nosince</a>
+     * Omits from the generated docs the "Since" sections associated with the since tags.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#nosince">nosince</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#notree">notree</a>
+     * Omits the class/interface hierarchy pages from the generated docs. 
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#notree">notree</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#serialwarn">serialwarn</a>
+     * Generates compile-time warnings for missing serial tags.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#serialwarn">serialwarn</a>
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#splitindex">splitindex</a>
+     * Splits the index file into multiple files, alphabetically, one file per letter, plus a file for any index entries that 
+     * start with non-alphabetical characters. 
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#splitindex">splitindex</a>.
+     *            default-value="false"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#stylesheetfile">stylesheetfile</a>
+     * Specifies the path of an alternate HTML stylesheet file.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#stylesheetfile">stylesheetfile</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#tag">tag</a>
+     * Enables the Javadoc tool to interpret a simple, one-argument custom block tag tagname in doc comments.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#tag">tag</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#taglet">taglet</a>
+     * Specifies the class file that starts the taglet used in generating the documentation for that tag.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#taglet">taglet</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#tagletpath">tagletpath</a>
+     * Specifies the search paths for finding taglet class files (.class).
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#tagletpath">tagletpath</a>.
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#use">use</a>
+     * Includes one "Use" page for each documented class and package.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#use">use</a>.
+     *            default-value="true"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#version">version</a>
+     * Includes the version text in the generated docs.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#version">version</a>.
+     *            default-value="true"
-     * @see <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#windowtitle">windowtitle</a>
+     * Specifies the title to be placed in the HTML title tag. 
+     * The default is '${project.name} ${project.version} API'.
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#windowtitle">windowtitle</a>.
+     *            default-value="${project.name} ${project.version} API"
-            File outputDir = new File( getReportOutputDirectory().getAbsolutePath() + "/apidocs" );
-            outputDir.mkdirs();
-
-                if ( StringUtils.isEmpty( this.bottom ) )
+                if ( this.bottom.equals( DEFAULT_BOTTOM ) )
-                if ( StringUtils.isEmpty( this.destDir ) )
+                if ( this.destDir.equals( DEFAULT_DESTDIR ) )
+                    File outputDir = new File( getReportOutputDirectory().getAbsolutePath() + "/apidocs" );
+                    outputDir.mkdirs();
-                    this.stylesheetfile = javadocDirectory + File.separator + DEFAULT_STYLESHEET_LOCATION;
+                    this.stylesheetfile = javadocDirectory + File.separator + DEFAULT_CSS_NAME;
-                if ( StringUtils.isEmpty( this.windowtitle ) )
+                if ( this.windowtitle.equals( DEFAULT_WINDOW_TITLE ) )
-                if ( StringUtils.isEmpty( this.doctitle ) )
+                if ( this.doctitle.equals( DEFAULT_DOCTITLE ) )
-     * @param b
-     *            the flag which controls if the argument is added or not.
-     * @param value
-     *            the argument value to be added.
+     * @param b the flag which controls if the argument is added or not.
+     * @param value the argument value to be added.
-     * @param b
-     *            the flag which controls if the argument is added or not.
-     * @param value
-     *            the argument value to be added.
-     * @param requiredJavaVersion  
-     *            the required Java version, for example 1.31f or 1.4f
+     * @param b the flag which controls if the argument is added or not.
+     * @param value the argument value to be added.
+     * @param requiredJavaVersion the required Java version, for example 1.31f or 1.4f
-     * @param key
-     *            the argument name.
-     * @param value
-     *            the argument value to be added.
+     * @param key the argument name.
+     * @param value the argument value to be added.
-     * @param resource
-     *            the resource
-     * @return InputStream 
-     *            An input stream for reading the resource, or <tt>null</tt>
+     * @param resource the resource
+     * @return InputStream An input stream for reading the resource, or <tt>null</tt>
-     * @throws Exception
-     *             if any
+     * @throws Exception if any
-
+    
-     * Convenience method that copy the <code>STYLESHEET_NAME</code> from the
-     * <code>RESOURCE_DIR</code> to a given outputDirectory.
+     * Convenience method that copy the <code>DEFAULT_STYLESHEET_NAME</code> file from the current class 
+     * loader to the output directory.
-     * @see #DEFAULT_STYLESHEET_LOCATION
-     * @see #RESOURCE_DIR
+     * @see #DEFAULT_CSS_NAME
-     * @param outputDirectory
-     *            the output directory
-     * @throws Exception
-     *             if any
+     * @param outputDirectory the output directory
+     * @throws Exception if any
-        InputStream is = getStream( DEFAULT_STYLESHEET_LOCATION );
+        InputStream is = getStream( RESOURCE_CSS_DIR + "/" + DEFAULT_CSS_NAME );
-            throw new IOException( "The resource " + DEFAULT_STYLESHEET_LOCATION + " doesn't exists." );
+            throw new IOException( "The resource " + DEFAULT_CSS_NAME + " doesn't exists." );
-        File outputFile = new File( outputDirectory, DEFAULT_STYLESHEET_LOCATION );
+        File outputFile = new File( outputDirectory, DEFAULT_CSS_NAME );
