o Preferred JRE API

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@895277 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.IOException;
+import java.util.Locale;
-import java.util.Map.Entry;
-import org.codehaus.plexus.util.cli.CommandLineUtils;
+import org.codehaus.plexus.util.Os;
-            try
+            boolean caseSensitive = !Os.isFamily( Os.FAMILY_WINDOWS );
+            for ( Map.Entry<String, String> entry : System.getenv().entrySet() )
-                Properties env = CommandLineUtils.getSystemEnvVars();
-                for ( Entry<Object, Object> e : env.entrySet() )
-                {
-                    tmp.setProperty( "env." + e.getKey().toString(), e.getValue().toString() );
-                }
-            }
-            catch ( IOException e )
-            {
-                logger.debug( "Error getting environment variables: " + e );
+                String key = "env." + ( caseSensitive ? entry.getKey() : entry.getKey().toUpperCase( Locale.ENGLISH ) );
+                tmp.setProperty( key, entry.getValue() );
