PR: MNG-758
add @component tag for requirements

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@239397 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.plugin.descriptor.InvalidParameterException;
-import org.apache.maven.plugin.descriptor.InvalidPluginDescriptorException;
-import org.apache.maven.plugin.descriptor.MojoDescriptor;
-import org.apache.maven.plugin.descriptor.Parameter;
-import org.apache.maven.plugin.descriptor.PluginDescriptor;
-import org.apache.maven.project.MavenProject;
-import org.apache.maven.tools.plugin.extractor.MojoDescriptorExtractor;
-import org.codehaus.modello.StringUtils;
-import org.codehaus.plexus.logging.AbstractLogEnabled;
-
+import org.apache.maven.plugin.descriptor.InvalidParameterException;
+import org.apache.maven.plugin.descriptor.InvalidPluginDescriptorException;
+import org.apache.maven.plugin.descriptor.MojoDescriptor;
+import org.apache.maven.plugin.descriptor.Parameter;
+import org.apache.maven.plugin.descriptor.PluginDescriptor;
+import org.apache.maven.plugin.descriptor.Requirement;
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.tools.plugin.extractor.MojoDescriptorExtractor;
+import org.codehaus.modello.StringUtils;
+import org.codehaus.plexus.logging.AbstractLogEnabled;
-import java.util.Map.Entry;
-    
+
-    
+
-    
+
-    
+
+    private static final String COMPONENT = "component";
+
-    private MojoDescriptor createMojoDescriptor( JavaSource javaSource, PluginDescriptor pluginDescriptor ) throws InvalidPluginDescriptorException
+    private MojoDescriptor createMojoDescriptor( JavaSource javaSource, PluginDescriptor pluginDescriptor )
+        throws InvalidPluginDescriptorException
-
- 
+
-            
+
-    private void extractParameters( MojoDescriptor mojoDescriptor, JavaClass javaClass ) throws InvalidPluginDescriptorException
+    private void extractParameters( MojoDescriptor mojoDescriptor, JavaClass javaClass )
+        throws InvalidPluginDescriptorException
-            Map.Entry entry = (Entry) it.next();
+            Map.Entry entry = (Map.Entry) it.next();
-            DocletTag parameter = field.getTagByName( PARAMETER );
-
-            pd.setRequired( field.getTagByName( REQUIRED ) != null );
-
-            pd.setEditable( field.getTagByName( READONLY ) == null );
-
-            DocletTag deprecationTag = field.getTagByName( DEPRECATED );
-            if ( deprecationTag != null )
+            DocletTag componentTag = field.getTagByName( COMPONENT );
+            if ( componentTag != null )
-                pd.setDeprecated( deprecationTag.getValue() );
+                String role = componentTag.getNamedParameter( "role" );
+                if ( role == null )
+                {
+                    role = field.getType().toString();
+                }
+
+                String roleHint = componentTag.getNamedParameter( "roleHint" );
+                pd.setRequirement( new Requirement( role, roleHint ) );
-
-            String alias = parameter.getNamedParameter( "alias" );
-
-            if ( !StringUtils.isEmpty( alias ) )
+            else
-                pd.setAlias( alias );
+                DocletTag parameter = field.getTagByName( PARAMETER );
+
+                pd.setRequired( field.getTagByName( REQUIRED ) != null );
+
+                pd.setEditable( field.getTagByName( READONLY ) == null );
+
+                DocletTag deprecationTag = field.getTagByName( DEPRECATED );
+                if ( deprecationTag != null )
+                {
+                    pd.setDeprecated( deprecationTag.getValue() );
+                }
+
+                String alias = parameter.getNamedParameter( "alias" );
+
+                if ( !StringUtils.isEmpty( alias ) )
+                {
+                    pd.setAlias( alias );
+                }
+
+                pd.setExpression( parameter.getNamedParameter( PARAMETER_EXPRESSION ) );
+
+                pd.setDefaultValue( parameter.getNamedParameter( PARAMETER_DEFAULT_VALUE ) );
-
-            pd.setExpression( parameter.getNamedParameter( PARAMETER_EXPRESSION ) );
-
-            pd.setDefaultValue( parameter.getNamedParameter( PARAMETER_DEFAULT_VALUE ) );
-
-                DocletTag paramTag = field.getTagByName( PARAMETER );
-
-                if ( paramTag != null )
+                if ( field.getTagByName( PARAMETER ) != null || field.getTagByName( COMPONENT ) != null )
