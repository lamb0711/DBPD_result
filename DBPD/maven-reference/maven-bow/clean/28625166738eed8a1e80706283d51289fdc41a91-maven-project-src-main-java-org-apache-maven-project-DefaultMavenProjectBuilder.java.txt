o trim out buildArtifactRepositories( Model )


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@747639 13f79535-47bb-0310-9956-ffa450edef68

-        if(projectDescriptor == null)
+        if ( projectDescriptor == null )
-            throw new IllegalArgumentException("projectDescriptor: null");
+            throw new IllegalArgumentException( "projectDescriptor: null" );
-        if(config == null)
+        if ( config == null )
-            throw new IllegalArgumentException("config: null");
+            throw new IllegalArgumentException( "config: null" );
+        }
+
+        List<ArtifactRepository> artifactRepositories = new ArrayList<ArtifactRepository>();
+        try
+        {
+            artifactRepositories.addAll( repositorySystem.buildArtifactRepositories( projectBuilder.getSuperModel().getRepositories() ) );
+        }
+        catch ( InvalidRepositoryException e )
+        {
+            throw new ProjectBuildingException( "Cannot create repositories from super model.", e.getMessage() );
-       List<ArtifactRepository> artifactRepositories = new ArrayList<ArtifactRepository>( );
-       artifactRepositories.addAll( repositorySystem.buildArtifactRepositories( projectBuilder.getSuperModel() ) );
-       if(config.getRemoteRepositories() != null) 
-       {
-    	   artifactRepositories.addAll(config.getRemoteRepositories());
-       }
-        
-        MavenProject project = readModelFromLocalPath( "unknown", 
-                                                       projectDescriptor, 
-                                                       new DefaultPomArtifactResolver( config.getLocalRepository(), 
-                                                                                       artifactRepositories, repositorySystem ), config );
+        if ( config.getRemoteRepositories() != null )
+        {
+            artifactRepositories.addAll( config.getRemoteRepositories() );
+        }
+
+        MavenProject project = readModelFromLocalPath( "unknown", projectDescriptor, new DefaultPomArtifactResolver( config.getLocalRepository(), artifactRepositories, repositorySystem ), config );
-        
+
-        }        
+        }
+        
-        artifactRepositories.addAll( repositorySystem.buildArtifactRepositories( projectBuilder.getSuperModel() ) );
+        try
+        {
+            artifactRepositories.addAll( repositorySystem.buildArtifactRepositories( projectBuilder.getSuperModel().getRepositories() ) );
+        }
+        catch ( InvalidRepositoryException e )
+        {
+            throw new ProjectBuildingException( "Cannot create repositories from super model.", e.getMessage() );
+        }
