o Revised transfer listener to provide better feedback

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@828026 13f79535-47bb-0310-9956-ffa450edef68

-    private boolean showChecksumEvents = false;
-    
+
+    private boolean showChecksumEvents;
+
-        }        
+        }
+
+        doInitiated( transferEvent );
-    public void transferProgress( ArtifactTransferEvent transferEvent, byte[] buffer, int length )
+    protected void doInitiated( ArtifactTransferEvent transferEvent )
+        String message =
+            transferEvent.getRequestType() == ArtifactTransferEvent.REQUEST_PUT ? "Uploading" : "Downloading";
+        System.out.println( message + ": " + transferEvent.getResource().getUrl() );
+    }
+
+    public void transferStarted( ArtifactTransferEvent transferEvent )
+    {
+        if ( !showEvent( transferEvent ) )
+        {
+            return;
+        }
+
+        doStarted( transferEvent );
+    }
+
+    protected void doStarted( ArtifactTransferEvent transferEvent )
+    {
+        // to be overriden by sub classes
+    }
+
+    public void transferProgress( ArtifactTransferEvent transferEvent, long transferred, byte[] buffer, int offset,
+                                  int length )
+    {
+        if ( !showEvent( transferEvent ) )
+        {
+            return;
+        }
+
+        doProgress( transferEvent, transferred, buffer, offset, length );
+    }
+
+    protected void doProgress( ArtifactTransferEvent transferEvent, long transferred, byte[] buffer, int offset,
+                               int length )
+    {
+        // to be overriden by sub classes
-        long contentLength = transferEvent.getResource().getContentLength();
-        if ( contentLength != -1 )
+        if ( !showEvent( transferEvent ) )
-            String type = ( transferEvent.getRequestType() == ArtifactTransferEvent.REQUEST_PUT ? "uploaded" : "downloaded" );
+            return;
+        }
+
+        doCompleted( transferEvent );
+    }
+
+    protected void doCompleted( ArtifactTransferEvent transferEvent )
+    {
+        long contentLength = transferEvent.getResource().getContentLength();
+        if ( contentLength >= 0 )
+        {
+            String type =
+                ( transferEvent.getRequestType() == ArtifactTransferEvent.REQUEST_PUT ? "uploaded" : "downloaded" );
+
