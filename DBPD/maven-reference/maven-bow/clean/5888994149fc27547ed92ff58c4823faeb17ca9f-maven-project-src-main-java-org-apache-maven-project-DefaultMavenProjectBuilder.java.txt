[MNG-3853] [regression] Distribution Management injected by profile is not reflected by MavenProject

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@738128 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Arrays;
-import java.util.LinkedHashSet;
+        List<Profile> projectProfiles = new ArrayList<Profile>();
+
+        projectProfiles.addAll( profileAdvisor.applyActivatedProfiles( model,
+                                                                       isReactorProject ? projectDescriptor : null,
+                                                                       isReactorProject, profileActivationContext ) );
+
+        projectProfiles.addAll( profileAdvisor.applyActivatedExternalProfiles( model,
+                                                                               isReactorProject ? projectDescriptor
+                                                                                               : null,
+                                                                               externalProfileManager ) );
+
-
-        List<Profile> projectProfiles = new ArrayList<Profile>();
-
-        projectProfiles.addAll( profileAdvisor.applyActivatedProfiles( project.getModel(),
-                                                                       isReactorProject ? projectDescriptor : null,
-                                                                       isReactorProject, profileActivationContext ) );
-
-        projectProfiles.addAll( profileAdvisor.applyActivatedExternalProfiles( project.getModel(), project.getFile(), externalProfileManager ) );
-        try
-        {
-            LinkedHashSet repoSet = new LinkedHashSet();
-            if ( ( model.getRepositories() != null ) && !model.getRepositories().isEmpty() )
-            {
-                repoSet.addAll( model.getRepositories() );
-            }
-            if ( ( model.getPluginRepositories() != null ) && !model.getPluginRepositories().isEmpty() )
-            {
-                repoSet.addAll( model.getPluginRepositories() );
-            }
-
-            project.setRemoteArtifactRepositories( mavenTools.buildArtifactRepositories( new ArrayList( repoSet ) ) );
-        }
-        catch ( Exception e )
-        {
-            e.printStackTrace();
-        }
