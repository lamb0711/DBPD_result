o Revised transfer listener to retain resource identity
o Allowed to monitor transfer duration

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@828109 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.repository.MavenArtifact;
+import org.apache.maven.repository.ArtifactTransferResource;
+    private Map<Resource, ArtifactTransferResource> artifacts;
+
+        this.artifacts = new IdentityHashMap<Resource, ArtifactTransferResource>();
-        transfers.remove( transferEvent.getResource() );
-
+
+        artifacts.remove( transferEvent.getResource() );
+        transfers.remove( transferEvent.getResource() );
+        artifacts.remove( transferEvent.getResource() );
+        transfers.remove( transferEvent.getResource() );
-            MavenArtifact artifact = wrap( event.getWagon().getRepository(), event.getResource() );
+            ArtifactTransferResource artifact = wrap( event.getWagon().getRepository(), event.getResource() );
-    private MavenArtifact wrap( Repository repository, Resource resource )
+    private ArtifactTransferResource wrap( Repository repository, Resource resource )
-            return new MavenArtifact( repository.getUrl(), resource.getName(), resource.getContentLength() );
+            ArtifactTransferResource artifact = artifacts.get( resource );
+
+            if ( artifact == null )
+            {
+                artifact = new MavenArtifact( repository.getUrl(), resource );
+                artifacts.put( resource, artifact );
+            }
+
+            return artifact;
