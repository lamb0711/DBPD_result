pass the proxy request parameters to the default wagon


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163344 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.manager.WagonManager;
+import org.codehaus.plexus.component.repository.exception.ComponentLookupException;
+    /** @todo [BP] this might not be required if there is a better way to pass them in. It doesn't feel quite right. */
+    private void resolveParameters( MavenExecutionRequest request )
+        throws ComponentLookupException
+    {
+        WagonManager wagonManager = (WagonManager) container.lookup( WagonManager.ROLE );
+        if ( request.getParameter( "maven.proxy.http.host" ) != null )
+        {
+            String p = request.getParameter( "maven.proxy.http.port" );
+            int port = 8080;
+            if ( p != null )
+            {
+                try
+                {
+                    port = Integer.valueOf( p ).intValue();
+                }
+                catch ( NumberFormatException e )
+                {
+                    getLogger().warn( "maven.proxy.http.port was not valid" );
+                }
+            }
+            wagonManager.setProxy( "http", request.getParameter( "maven.proxy.http.host" ), port,
+                                   request.getParameter( "maven.proxy.http.username" ),
+                                   request.getParameter( "maven.proxy.http.password" ),
+                                   request.getParameter( "maven.proxy.http.nonProxyHosts" ) );
+        }
+    }
+
+            resolveParameters( request );
+
