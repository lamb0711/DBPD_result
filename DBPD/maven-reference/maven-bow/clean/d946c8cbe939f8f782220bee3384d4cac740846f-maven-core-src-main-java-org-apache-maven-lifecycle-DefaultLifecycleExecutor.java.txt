[MNG-4586] Plugin prefix can't be resolved from plugin management if management entry is missing plugin version

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@921932 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.PluginManagement;
+                resolveMissingPluginVersions( session.getTopLevelProject(), session );
+
+        Map<String, String> versions = new HashMap<String, String>();
+
+            versions.put( plugin.getKey(), plugin.getVersion() );
+        }
+
+        PluginManagement pluginManagement = project.getPluginManagement();
+        if ( pluginManagement != null )
+        {
+            for ( Plugin plugin : pluginManagement.getPlugins() )
+            {
+                if ( plugin.getVersion() == null )
+                {
+                    plugin.setVersion( versions.get( plugin.getKey() ) );
+                    if ( plugin.getVersion() == null )
+                    {
+                        PluginVersionRequest request = new DefaultPluginVersionRequest( plugin, session );
+                        plugin.setVersion( pluginVersionResolver.resolve( request ).getVersion() );
+                    }
+                }
+            }
