[MNG-5350] improved warning message: when in debug mode, list the goals and not only the plugins

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1398044 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.plugin.descriptor.MojoDescriptor;
-
+    /**
+     * Get set of plugins having a goal/mojo used but not marked @threadSafe
+     *
+     * @return the set of plugins (without info on which goal is concerned)
+     */
+    /**
+     * Get set of mojos used but not marked @threadSafe
+     *
+     * @return the set of mojo descriptors
+     */
+    public Set<MojoDescriptor> getNonThreadSafeMojos()
+    {
+        Set<MojoDescriptor> mojos = new HashSet<MojoDescriptor>();
+        for ( ExecutionPlanItem executionPlanItem : planItem )
+        {
+            final MojoExecution mojoExecution = executionPlanItem.getMojoExecution();
+            if ( !mojoExecution.getMojoDescriptor().isThreadSafe() )
+            {
+                mojos.add( mojoExecution.getMojoDescriptor() );
+            }
+        }
+        return mojos;
+    }
+
