[MNG-1908] fix the performance problem with this particular fix


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@486484 13f79535-47bb-0310-9956-ffa450edef68

-                getLogger().warn(
-                    "Unable to get resource from repository " + repository.getId() + " (" + repository.getUrl() + ")" );
+                getLogger().warn( "Unable to get resource '" + artifact.getId() + "' from repository " +
+                    repository.getId() + " (" + repository.getUrl() + ")" );
-                getLogger().warn(
-                    "Unable to get resource from repository " + repository.getId() + " (" + repository.getUrl() + ")" );
+                getLogger().warn( "Unable to get resource '" + artifact.getId() + "' from repository " +
+                    repository.getId() + " (" + repository.getUrl() + ")" );
-                                   TransferListener downloadMonitor, String checksumPolicy )
+                                TransferListener downloadMonitor, String checksumPolicy )
-                    downloaded = wagon.getIfNewer( remotePath, temp, destination.lastModified() );
+                    try
+                    {
+                        downloaded = wagon.getIfNewer( remotePath, temp, destination.lastModified() );
+                        if ( !downloaded )
+                        {
+                            // prevent additional checks of this artifact until it expires again
+                            destination.setLastModified( System.currentTimeMillis() );
+                        }
+                    }
+                    catch ( UnsupportedOperationException e )
+                    {
+                        // older wagons throw this. Just get() instead
+                        wagon.get( remotePath, temp );
+                        downloaded = true;
+                    }
