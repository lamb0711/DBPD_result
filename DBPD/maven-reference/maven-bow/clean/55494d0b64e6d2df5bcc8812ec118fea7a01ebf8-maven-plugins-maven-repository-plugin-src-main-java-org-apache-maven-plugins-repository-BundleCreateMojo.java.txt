as usual, don't forget to handle source artifacts (should this be done automatically?)

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@326993 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.File;
+
+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
-import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
-import org.codehaus.plexus.archiver.ArchiverException;
-import java.io.File;
-import java.io.FileWriter;
-import java.io.IOException;
-
-        String finalName =  project.getBuild().getFinalName();
+        String finalName = project.getBuild().getFinalName();
+        File sourceArtifact = new File( outputDirectory, finalName + "-sources." + extension );
+
+            if ( sourceArtifact.exists() )
+            {
+                jarArchiver.addFile( sourceArtifact, sourceArtifact.getName() );
+            }
+            else
+            {
+                getLog()
+                    .warn(
+                           "Sources not included in upload bundle. In order to add sources please run \"mvn source:jar repository:bundle-create\"" );
+            }
+
