PR: MNG-260
Make sure the local repository is consistent after a snapshot deployment


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163913 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.util.FileUtils;
+import java.io.IOException;
+            // Copy the original file to the new one if it was transformed
+            File artifactFile = new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
+            if ( !artifactFile.equals( source ) )
+            {
+                FileUtils.copyFile( source, artifactFile );
+            }
+
+        catch ( IOException e )
+        {
+            throw new ArtifactDeploymentException( "Error deploying artifact: ", e );
+        }
