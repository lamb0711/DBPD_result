[MNG-1797][MNG-2420] Fixing exclusions that bleed over into other dependencies, and modifying DefaultProfileManager to (a) deprecate constructor that takes Settings but no properties, and (b) add a constructor that takes Settings and properties.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@438189 13f79535-47bb-0310-9956-ffa450edef68

-        this( container, (Settings)null );
-        if (props != null) {
-            systemProperties = props;
-        }
+        this( container, (Settings)null, props );
+    /**
+     * @deprecated without passing in the system properties, the SystemPropertiesProfileActivator will not work correctly
+     * in embedded envirnments.
+     */
+    /**
+     * the properties passed to the profile manager are the props that
+     * are passed to maven, possibly containing profile activator properties
+     *
+     */
+    public DefaultProfileManager( PlexusContainer container, Settings settings, Properties props )
+    {
+        this.container = container;
+
+        loadSettingsProfiles( settings );
+        
+        if ( props != null )
+        {
+            systemProperties = props;
+        }
+    }
+    
