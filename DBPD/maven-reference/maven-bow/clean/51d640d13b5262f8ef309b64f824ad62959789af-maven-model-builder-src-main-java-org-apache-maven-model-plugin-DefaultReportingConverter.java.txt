[MNG-4162] Removal of all reporting logic from the core of Maven

o Finished converter for reporting section

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@927602 13f79535-47bb-0310-9956-ffa450edef68

-            if ( !reporting.isExcludeDefaults()
+            if ( !reporting.isExcludeDefaults() && !hasMavenProjectInfoReportsPlugin
-            Xpp3Dom dom = new Xpp3Dom( "plugin" );
+            Xpp3Dom dom = new Xpp3Dom( "reportPlugin" );
-        Xpp3Dom dom = new Xpp3Dom( "plugin" );
+        Xpp3Dom dom = new Xpp3Dom( "reportPlugin" );
-        Xpp3Dom reports = new Xpp3Dom( "reports" );
-        if (! plugin.getReportSets().isEmpty())
+        if ( !plugin.getReportSets().isEmpty() )
-            dom.addChild( reports );
+            Xpp3Dom reportSets = new Xpp3Dom( "reportSets" );
+            for ( ReportSet reportSet : plugin.getReportSets() )
+            {
+                Xpp3Dom rs = convert( reportSet );
+                reportSets.addChild( rs );
+            }
+            dom.addChild( reportSets );
-        // TODO: Clarifiy conversion f reporset.configuration
-        for ( ReportSet reportSet : plugin.getReportSets() )
+
+        return dom;
+    }
+
+    private Xpp3Dom convert( ReportSet reportSet )
+    {
+        Xpp3Dom dom = new Xpp3Dom( "reportSet" );
+
+        addDom( dom, "id", reportSet.getId() );
+
+        Xpp3Dom configuration = (Xpp3Dom) reportSet.getConfiguration();
+        if ( configuration != null )
-            for (String report : reportSet.getReports())
+            configuration = new Xpp3Dom( configuration );
+            dom.addChild( configuration );
+        }
+
+        if ( !reportSet.getReports().isEmpty() )
+        {
+            Xpp3Dom reports = new Xpp3Dom( "reports" );
+            for ( String report : reportSet.getReports() )
+            dom.addChild( reports );
