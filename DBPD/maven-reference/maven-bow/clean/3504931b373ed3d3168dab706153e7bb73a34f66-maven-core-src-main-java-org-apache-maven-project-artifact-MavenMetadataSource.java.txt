o the newly gutted system bootstraps, i think i'm happy about the state of 3.x now :-)


git-svn-id: https://svn.apache.org/repos/asf/maven/components/branches/MNG-2766@773740 13f79535-47bb-0310-9956-ffa450edef68

-//TODO: we don't need the repository metadata thing really, we can retrieve files independendently and parse
-                {                    
+                {
-    /*
-    private Set<Artifact> createArtifacts( List<Dependency> dependencies )
-    {
-        Set<Artifact> artifacts = new LinkedHashSet<Artifact>();
-
-        for ( Dependency d : dependencies )
-        {                    
-            String effectiveScope = getEffectiveScope( d.getScope(), artifact.getScope() );
-
-            if ( effectiveScope != null )
-            {
-                Artifact dependencyArtifact = repositorySystem.createArtifact( d.getGroupId(), d.getArtifactId(), d.getVersion(), effectiveScope, d.getType() );
-
-                artifacts.add( dependencyArtifact );
-            }
-        }
-        
-    }
-    */
-    
-        
+
-            
+
-            
+
-    
-    /*
+
-    {                                                                                                                                                                                                                                   
-        try                                                                                                                                                                                                                             
-        {                                                                                                                                                                                                                               
-            return repositorySystem.createArtifacts( artifactFactory, dependencies, inheritedScope, dependencyFilter, project );                                                                                                                                            
-        }                                                                                                                                                                                                                               
-        catch ( VersionNotFoundException e )                                                                                                                                                                                            
-        {                                                                                                                                                                                                                               
-            throw new InvalidDependencyVersionException( e.getProjectId(), e.getDependency(), e.getPomFile, e.getCauseException() );                                                                                                                                                       
-        }                                                                                                                                                                                                                               
-    } 
-    */                
+    {             
+        return createArtifacts( artifactFactory, dependencies, dependencyFilter );
+    }
+    
+    private static Set<Artifact> createArtifacts( ArtifactFactory factory, List<Dependency> dependencies, ArtifactFilter filter )
+    {
+        Set<Artifact> artifacts = new LinkedHashSet<Artifact>();
+
+        for ( Dependency d : dependencies )
+        {
+            Artifact dependencyArtifact = factory.createArtifact( d.getGroupId(), d.getArtifactId(), d.getVersion(), d.getScope(), d.getType() );
+
+            if ( filter.include( dependencyArtifact ) )
+            {
+                artifacts.add( dependencyArtifact );
+            }
+        }
+        
+        return artifacts;
+    }    
