need to reinstate the non-project builder version for plexus-runtime-builder


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163355 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Model;
+import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
+import java.io.FileReader;
+    /** @todo remove. */
+    private MavenXpp3Reader reader = new MavenXpp3Reader();
+
+    public MavenMetadataSource( ArtifactResolver artifactResolver )
+    {
+        // there is code in plexus that uses this (though it shouldn't) so we
+        // need to be able to not have a project builder
+        this.artifactResolver = artifactResolver;
+        this.mavenProjectBuilder = null;
+    }
+
-            MavenProject project = mavenProjectBuilder.build( metadataArtifact.getFile(), localRepository );
-            //            Model model = reader.read( new FileReader( metadataArtifact.getFile() ) );
-
-            artifacts = createArtifacts( project.getDependencies(), localRepository );
+            if ( mavenProjectBuilder != null )
+            {
+                MavenProject project = mavenProjectBuilder.build( metadataArtifact.getFile(), localRepository );
+                artifacts = createArtifacts( project.getDependencies(), localRepository );
+            }
+            else
+            {
+                Model model = reader.read( new FileReader( metadataArtifact.getFile() ) );
+                artifacts = createArtifacts( model.getDependencies(), localRepository );
+            }
