Adding conditional logic to pull out root cause to a couple diagnosers.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@320918 13f79535-47bb-0310-9956-ffa450edef68

+
+    public static void appendRootCauseIfPresentAndUnique( Throwable error, StringBuffer message, boolean includeTypeInfo )
+    {
+        Throwable root = DiagnosisUtils.getRootCause( error );
+        
+        if ( root != null && root != error )
+        {
+            String rootMsg = root.getMessage();
+            
+            if ( rootMsg != null && error.getMessage().indexOf(rootMsg) < 0 )
+            {
+                message.append( "\nRoot message: " ).append( rootMsg );
+                
+                if ( includeTypeInfo )
+                {
+                    message.append( "\nRoot error type: " ).append( root.getClass().getName() );
+                }
+            }
+        }
+    }
