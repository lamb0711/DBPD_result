some clean up of components and artifact repository factory

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@164181 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.model.Repository;
-import org.apache.maven.settings.Settings;
-import org.apache.maven.settings.Server;
+import org.apache.maven.settings.Server;
+import org.apache.maven.settings.Settings;
-    public ArtifactRepository createArtifactRepository( Repository modelRepository,
-                                                        ArtifactRepositoryLayout repositoryLayout )
+    public ArtifactRepository createArtifactRepository( String id, String url,
+                                                        ArtifactRepositoryLayout repositoryLayout,
+                                                        String snapshotPolicy )
+        AuthenticationInfo authInfo = null;
-        Server repoProfile = null;
-
-        String repoId = modelRepository.getId();
-
-        if ( repoId != null && repoId.length() > 0 )
+        if ( id != null && id.length() > 0 )
-            repoProfile = settings.getServer( modelRepository.getId() );
+            Server repoProfile = settings.getServer( id );
+
+            if ( repoProfile != null )
+            {
+                authInfo = new AuthenticationInfo();
+
+                authInfo.setUserName( repoProfile.getUsername() );
+
+                authInfo.setPassword( repoProfile.getPassword() );
+
+                authInfo.setPrivateKey( repoProfile.getPrivateKey() );
+
+                authInfo.setPassphrase( repoProfile.getPassphrase() );
+            }
+
-                             modelRepository.getUrl() );
+                             url );
-        String snapshotPolicy = globalSnapshotPolicy;
-        if ( snapshotPolicy == null )
+        if ( globalSnapshotPolicy != null )
-            snapshotPolicy = modelRepository.getSnapshotPolicy();
+            snapshotPolicy = globalSnapshotPolicy;
-        if ( repoProfile != null )
+        if ( authInfo != null )
-            AuthenticationInfo authInfo = new AuthenticationInfo();
-
-            authInfo.setUserName( repoProfile.getUsername() );
-
-            authInfo.setPassword( repoProfile.getPassword() );
-
-            authInfo.setPrivateKey( repoProfile.getPrivateKey() );
-
-            authInfo.setPassphrase( repoProfile.getPassphrase() );
-
-            repo = new ArtifactRepository( modelRepository.getId(), modelRepository.getUrl(), authInfo,
-                                           repositoryLayout, snapshotPolicy );
+            repo = new ArtifactRepository( id, url, authInfo, repositoryLayout, snapshotPolicy );
-            repo = new ArtifactRepository( modelRepository.getId(), modelRepository.getUrl(), repositoryLayout,
-                                           snapshotPolicy );
+            repo = new ArtifactRepository( id, url, repositoryLayout, snapshotPolicy );
-
-}
+}
