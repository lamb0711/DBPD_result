o Fixed handling of missing plugin version during calculation of execution plan

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@821170 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.execution.MavenSession;
+import org.apache.maven.project.MavenProject;
+    /**
+     * Creates an empty request.
+     */
+    /**
+     * Creates a request by copying settings from the specified repository request.
+     * 
+     * @param repositoryRequest The repository request to copy from, must not be {@code null}.
+     */
+    /**
+     * Creates a request for the specified plugin by copying settings from the specified repository request.
+     * 
+     * @param The plugin for which to resolve a version, must not be {@code null}.
+     * @param repositoryRequest The repository request to copy from, must not be {@code null}.
+     */
+    /**
+     * Creates a request for the specified plugin by copying settings from the specified build session. If the session
+     * has a current project, its plugin artifact repositories will be used as well.
+     * 
+     * @param The plugin for which to resolve a version, must not be {@code null}.
+     * @param repositoryRequest The repository request to copy from, must not be {@code null}.
+     */
+    public DefaultPluginVersionRequest( Plugin plugin, MavenSession session )
+    {
+        this.groupId = plugin.getGroupId();
+        this.artifactId = plugin.getArtifactId();
+        this.repositoryRequest = new DefaultRepositoryRequest();
+
+        setCache( session.getRepositoryCache() );
+        setLocalRepository( session.getLocalRepository() );
+        setOffline( session.isOffline() );
+
+        MavenProject project = session.getCurrentProject();
+        if ( project != null )
+        {
+            setRemoteRepositories( project.getPluginArtifactRepositories() );
+        }
+    }
+
