o Revised transfer listener to retain resource identity
o Allowed to monitor transfer duration

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@828109 13f79535-47bb-0310-9956-ffa450edef68

+import java.text.DecimalFormat;
+import java.text.DecimalFormatSymbols;
+import java.util.Locale;
+
+import org.apache.maven.repository.ArtifactTransferResource;
-        long contentLength = transferEvent.getResource().getContentLength();
+        ArtifactTransferResource artifact = transferEvent.getResource();
+        long contentLength = artifact.getContentLength();
-            String l = contentLength >= 1024 ? ( contentLength / 1024 ) + "K" : contentLength + "b";
-            System.out.println( l + " " + type );
+            String l = contentLength >= 1024 ? ( ( contentLength + 1023 ) / 1024 ) + " KB" : contentLength + " B";
+
+            String throughput = "";
+            long duration = System.currentTimeMillis() - artifact.getTransferStartTime();
+            if ( duration > 0 )
+            {
+                DecimalFormat format = new DecimalFormat( "0.0", new DecimalFormatSymbols( Locale.ENGLISH ) );
+                double kbPerSec = ( contentLength / 1024.0 ) / ( duration / 1000.0 );
+                throughput = " at " + format.format( kbPerSec ) + " KB/sec";
+            }
+
+            System.out.println( l + " " + type + throughput );
