Fixing the case for site:run where a direct mojo invocation needs reports.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@523087 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.lifecycle.model.Phase;
-                BuildPlanModifier modder = new ReportingPlanModifier( mojoBinding, reportBindings );
+                Phase phase = LifecycleUtils.findPhaseForMojoBinding( mojoBinding, lifecycleBindings, true );
+                
+                if ( phase == null )
+                {
+                    if ( planElement instanceof DirectInvocationOriginElement )
+                    {
+                        DirectInvocationModifier modder = new SimpleDirectInvocationModifier( mojoBinding, reportBindings );
-                planElement.addModifier( modder );
+                        ((DirectInvocationOriginElement) planElement).addDirectInvocationModifier( modder );
+                    }
+                    else
+                    {
+                        throw new LifecyclePlannerException( "Cannot inject reports for direct invocation: "
+                            + MojoBindingUtils.toString( mojoBinding )
+                            + "; current plan element does not accept direct-invocation modifiers." );
+                    }
+                }
+                else
+                {
+                    BuildPlanModifier modder = new ReportingPlanModifier( mojoBinding, reportBindings );
+
+                    planElement.addModifier( modder );
+                }
