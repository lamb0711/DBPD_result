[MNG-4193] Throw validation error upon multiple repository declarations with the same id

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@782796 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collection;
+import java.util.HashSet;
+import org.apache.maven.model.Profile;
-        validateRepositories( result, model.getRepositories(), "repositories.repository" );
+        if ( !request.istLenientValidation() )
+        {
+            validateRepositories( result, model.getRepositories(), "repositories.repository" );
+
+            validateRepositories( result, model.getPluginRepositories(), "pluginRepositories.pluginRepository" );
+
+            for ( Profile profile : model.getProfiles() )
+            {
+                validateRepositories( result, profile.getRepositories(), "profiles.profile[" + profile.getId()
+                    + "].repositories.repository" );
+
+                validateRepositories( result, profile.getPluginRepositories(), "profiles.profile[" + profile.getId()
+                    + "].pluginRepositories.pluginRepository" );
+            }
+        }
+        Collection<String> ids = new HashSet<String>();
+
+
+            if ( !ids.add( repository.getId() ) )
+            {
+                result.addMessage( "'" + prefix + ".id' must be unique: " + repository.getId() + " -> "
+                    + repository.getUrl() );
+            }
