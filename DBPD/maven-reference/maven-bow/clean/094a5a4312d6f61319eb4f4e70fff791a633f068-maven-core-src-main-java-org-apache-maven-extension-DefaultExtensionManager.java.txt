Working on: MNG-662

o Moved extension-artifact creation and caching to MavenProject, initialized by MavenProjectBuilder, just like plugin-artifacts is.

o Added extension-artifact and report-artifact creation (and initialization in MavenProject) to MavenProjectBuilder, for consistency with plugin-artifacts

o Removed dependency on ArtifactFactory in DefaultExtensionManager (extension artifacts are reachable from MavenProject now)

This makes the process of resolving all artifacts referenced by a project much simpler and more consistent (namely, for the release plugin)


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@227147 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.factory.ArtifactFactory;
+import org.apache.maven.artifact.ArtifactUtils;
-import org.apache.maven.artifact.versioning.VersionRange;
-import org.codehaus.plexus.util.StringUtils;
-    private ArtifactFactory artifactFactory;
-
-        // TODO: this is duplicated with DefaultMavenProjectBuilder. Push into artifact factory.
-        String version;
-
-        if ( StringUtils.isEmpty( extension.getVersion() ) )
-        {
-            version = "RELEASE";
-        }
-        else
-        {
-            version = extension.getVersion();
-        }
-
-        VersionRange versionRange = VersionRange.createFromVersionSpec( version );
-        Artifact artifact = artifactFactory.createExtensionArtifact( extension.getGroupId(), extension.getArtifactId(),
-                                                                     versionRange );
+        String extensionId = ArtifactUtils.versionlessKey( extension.getGroupId(), extension.getArtifactId() );
+        
+        Artifact artifact = (Artifact) project.getExtensionArtifactMap().get( extensionId );
