PR: MNG-1650
Submitted By: Allan Ramirez
Reviewed By: John Casey

Applied patch, with modifications. First, refactored to avoid the use of a member variable for turning POM inclusion on/off. Second, please remember to follow the code formatting rules for Maven, available on the project website.

This patch provides a new method for createArchive(..) which includes a flag for turning off POM inclusion from the resulting archive. The default mode used by the original createArchive(..) method is still to include POM information.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@351476 13f79535-47bb-0310-9956-ffa450edef68

-
+    
+    	createArchive( project, archiveConfiguration, false );
+    }
+    
+    public void createArchive( MavenProject project, MavenArchiveConfiguration archiveConfiguration,
+                               boolean excludePomFiles )
+        throws ArchiverException, ManifestException, IOException, DependencyResolutionRequiredException
+    {
-            archiver.addFile( exportReadyPom, "META-INF/maven/" + groupId + "/" + artifactId + "/pom.xml" );
-
+            if( !excludePomFiles )
+            {
+            	archiver.addFile( exportReadyPom, "META-INF/maven/" + groupId + "/" + artifactId + "/pom.xml" );
+            }
+            
+            
-            archiver.addFile( pomPropertiesFile, "META-INF/maven/" + groupId + "/" + artifactId + "/pom.properties" );
+            if( !excludePomFiles )
+            {
+            	archiver.addFile( pomPropertiesFile, "META-INF/maven/" + groupId + "/" + artifactId + "/pom.properties" );
+            }
