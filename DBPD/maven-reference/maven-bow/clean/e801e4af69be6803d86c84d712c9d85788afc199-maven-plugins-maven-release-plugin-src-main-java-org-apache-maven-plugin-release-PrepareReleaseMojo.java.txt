o making the maven.username parameter required.


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@171238 13f79535-47bb-0310-9956-ffa450edef68

-        //checkStatus();
+        checkStatus();
-            System.out.println( "currentProject = " + currentProject );
-
+
+
+
+
+
+
+        // TODO: should probably use a regex or something as most users will probably
+        // not want their comments removed and indenting changed. I don't think it's a big
+        // deal but lots of people complain.
+
+
+
+
+
+
-            getScm().checkin( "[maven-release-plugin] prepare release " + projectVersion, "pom.xml", null );
+            ScmBean scm = getScm();
+
+            scm.setWorkingDirectory( basedir );
+
+            scm.checkin( "[maven-release-plugin] prepare release " + projectVersion, "pom.xml", null );
+        // artifactId = plexus-action
+        //    version = 1.0-beta-4
+        //        tag = PLEXUS_ACTION_1_0_BETA_4
+
+        String tag = project.getArtifactId().toUpperCase() + "_" + projectVersion.toUpperCase();
+
+        tag = tag.replace( '-', '_' );
+
+        tag = tag.replace( '.', '_' );
+
-            if ( getScm().getTag() == null )
+            ScmBean scm = getScm();
+
+            if ( scm.getTag() == null )
-                getLog().info( "What is the new tag name?" );
+                getLog().info( "What tag name should be used? [ " + tag + " ]" );
+
-                getScm().setTag( handler.readLine() );
+
+                String inputTag = handler.readLine();
+
+                if ( !StringUtils.isEmpty( inputTag ) )
+                {
+                    tag = inputTag;
+                }
+
+                scm.setTag( tag );
+
