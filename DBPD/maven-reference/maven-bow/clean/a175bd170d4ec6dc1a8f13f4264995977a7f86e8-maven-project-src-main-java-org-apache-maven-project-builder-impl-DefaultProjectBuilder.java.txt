o super model construction moved into the project builder so that all pure inheritance can be handled therein. Then the only thing we're left with is the mixins



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@727311 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.Reader;
+import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
+import org.codehaus.plexus.util.IOUtil;
+import org.codehaus.plexus.util.ReaderFactory;
-    public PomClassicDomainModel buildModel( File pom, List<Model> mixins,
+    public PomClassicDomainModel buildModel( File pom, 
+                                             List<Model> mixins,
-    public MavenProject buildFromLocalPath( File pom, List<Model> inheritedModels,
+    public MavenProject buildFromLocalPath( File pom, 
+                                            List<Model> mixins,
-                                                        inheritedModels, 
+                                                        mixins, 
-
+
+    // Super Model Handling
+    
+    private static final String MAVEN_MODEL_VERSION = "4.0.0";
+
+    private MavenXpp3Reader modelReader = new MavenXpp3Reader();
+
+    private Model superModel;
+
+    public Model getSuperModel()
+    {
+        if ( superModel != null )
+        {
+            return superModel;
+        }
+
+        Reader reader = null;
+        
+        try
+        {
+            reader = ReaderFactory.newXmlReader( getClass().getClassLoader().getResource( "org/apache/maven/project/pom-" + MAVEN_MODEL_VERSION + ".xml" ) );
+                        
+            superModel = modelReader.read( reader, true );                  
+        }
+        catch ( Exception e )
+        {
+            // Not going to happen we're reading the super pom embedded in the JAR
+        }
+        finally
+        {
+            IOUtil.close( reader );            
+        }
+        
+        return superModel;        
+    }        
