[MNG-4494] allow custom ArtifactRepository configuration and implementation
Issue id: MNG-4494


git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@891083 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout2;
-        ArtifactRepository repository = new MavenArtifactRepository( id, url, repositoryLayout, snapshots, releases );
+        ArtifactRepository repository;
+        if ( repositoryLayout instanceof ArtifactRepositoryLayout2 )
+        {
+            repository =
+                ( (ArtifactRepositoryLayout2) repositoryLayout ).newMavenArtifactRepository( id, url, snapshots,
+                                                                                             releases );
+        }
+        else
+        {
+            repository = new MavenArtifactRepository( id, url, repositoryLayout, snapshots, releases );
+        }
