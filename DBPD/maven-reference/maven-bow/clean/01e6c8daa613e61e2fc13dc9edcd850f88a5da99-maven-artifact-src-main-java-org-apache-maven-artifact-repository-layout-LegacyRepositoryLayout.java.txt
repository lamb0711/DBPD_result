PR: MNG-257

refactor artifact creation to all go through the factory, and assign the type handler from there.
Attach EJB client to the EJB artifact so that it is installed/deployed along with it.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191096 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;
-import org.apache.maven.artifact.handler.manager.ArtifactHandlerNotFoundException;
-
-    private ArtifactHandlerManager artifactHandlerManager;
-
-        throws ArtifactPathFormatException
-        ArtifactHandler artifactHandler = null;
-        try
-        {
-            // TODO: this is a poor excuse to have this method throwing an exception. Validate the artifact first, perhaps associate the handler with it
-            artifactHandler = artifactHandlerManager.getArtifactHandler( artifact.getType() );
-        }
-        catch ( ArtifactHandlerNotFoundException e )
-        {
-            throw new ArtifactPathFormatException( "Cannot find ArtifactHandler for artifact: \'" + artifact.getId() +
-                                                   "\'.", e );
-        }
+        ArtifactHandler artifactHandler = artifact.getArtifactHandler();
-        throws ArtifactPathFormatException
