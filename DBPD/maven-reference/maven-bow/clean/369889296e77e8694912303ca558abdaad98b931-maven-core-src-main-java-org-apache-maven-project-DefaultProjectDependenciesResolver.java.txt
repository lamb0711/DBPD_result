introduced RepositorySessionDecorator

Signed-off-by: Igor Fedorenko <ifedorenko@apache.org>

+import java.util.List;
+    @Requirement
+    private List<RepositorySessionDecorator> decorators;
+
-        RequestTrace trace = RequestTrace.newChild( null, request );
+        final RequestTrace trace = RequestTrace.newChild( null, request );
-        DefaultDependencyResolutionResult result = new DefaultDependencyResolutionResult();
+        final DefaultDependencyResolutionResult result = new DefaultDependencyResolutionResult();
-        MavenProject project = request.getMavenProject();
+        final MavenProject project = request.getMavenProject();
+        final DependencyFilter filter = request.getResolutionFilter();
+        ArtifactTypeRegistry stereotypes = session.getArtifactTypeRegistry();
+
-        DependencyFilter filter = request.getResolutionFilter();
-        ArtifactTypeRegistry stereotypes = session.getArtifactTypeRegistry();
+        for ( RepositorySessionDecorator decorator : decorators )
+        {
+            RepositorySystemSession decorated = decorator.decorate( project, session );
+            if ( decorated != null )
+            {
+                session = decorated;
+            }
+        }
