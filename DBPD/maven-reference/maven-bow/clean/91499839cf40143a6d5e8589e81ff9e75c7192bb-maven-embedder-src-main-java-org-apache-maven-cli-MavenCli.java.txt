[MNG-5230] Command line option to exclude modules from reactor
Contributed by Luuk van den Broek, slightly changed by Robert Scholte
Exclude/include marker char now match profiles, i.e +, ! and -

-import java.util.Arrays;
-            String[] values = commandLine.getOptionValues( CLIManager.PROJECT_LIST );
-            List<String> projects = new ArrayList<String>();
-            for ( String value : values )
+            String[] projectOptionValues = commandLine.getOptionValues( CLIManager.PROJECT_LIST );
+            
+            List<String> inclProjects = new ArrayList<String>();
+            List<String> exclProjects = new ArrayList<String>();
+            
+            if ( projectOptionValues != null )
-                String[] tmp = StringUtils.split( value, "," );
-                projects.addAll( Arrays.asList( tmp ) );
+                for ( String projectOptionValue : projectOptionValues )
+                {
+                    StringTokenizer projectTokens = new StringTokenizer( projectOptionValue, "," );
+
+                    while ( projectTokens.hasMoreTokens() )
+                    {
+                        String projectAction = projectTokens.nextToken().trim();
+
+                        if ( projectAction.startsWith( "-" ) || projectAction.startsWith( "!" ) )
+                        {
+                            exclProjects.add( projectAction.substring( 1 ) );
+                        }
+                        else if ( projectAction.startsWith( "+" ) )
+                        {
+                            inclProjects.add( projectAction.substring( 1 ) );
+                        }
+                        else
+                        {
+                            inclProjects.add( projectAction );
+                        }
+                    }
+                }
-            request.setSelectedProjects( projects );
+            
+            request.setSelectedProjects( inclProjects );
+            request.setExcludedProjects( exclProjects );
