Make sure external profiles are applied to the superPom before it's used as a basis for inheritance in the project builder. Also, adding some debug statements to the lineage-building process.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@601159 13f79535-47bb-0310-9956-ffa450edef68

+        getLogger().debug( "Grabbing profile-injected repositories for: " + model.getId() );
+
-        profileRepos.addAll( profileAdvisor.getArtifactRepositoriesFromActiveProfiles( model,
+        getLogger().debug( "Got external-profile repositories: " + profileRepos );
+
+        LinkedHashSet pomProfileRepos = profileAdvisor.getArtifactRepositoriesFromActiveProfiles( model,
-                                                                                       context ) );
+                                                                                       context );
+
+        getLogger().debug( "Got pom-profile repositories: " + pomProfileRepos );
+
+        profileRepos.addAll( pomProfileRepos );
+                    getLogger().debug( "Attempting to resolve parent POM: " + modelParent.getId() + " using repositories:\n" + StringUtils.join( remoteRepositories.iterator(), "\n" ) );
+
