Resolving: MNG-968

Applied patches from Lester Ecarma (Thanks, Lester!), and refactored the location property of OfflineLink to be a File type, since this will work more readily for locations on the filesystem. Tested on a local variant of maven-core/pom.xml, and it appears to work fine.



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@320874 13f79535-47bb-0310-9956-ffa450edef68

-    
+
-     * @parameter expression="${link}"
+     * @parameter expression="${links}"
-    private String link;
+    private ArrayList links;
-     * @parameter expression="${linkoffline}"
+     * @parameter expression="${offlineLinks}"
-    private String linkoffline;
+    private ArrayList offlineLinks;
-            
+
-                addArgIfNotEmpty( arguments, "-link", quotedPathArgument( link ), true );
-                addArgIfNotEmpty( arguments, "-linkoffline", quotedPathArgument( linkoffline ), true );
+                addLinkArguments( arguments );
+                addLinkofflineArguments( arguments );
-            
+
+     * Convenience method to process offlineLink values as individual -linkoffline javadoc options
+     *
+     * @param arguments argument list
+     */
+    private void addLinkofflineArguments( List arguments )
+    {
+        if ( offlineLinks != null )
+        {
+            for ( int i = 0; i < offlineLinks.size(); i++ )
+            {
+                OfflineLink offlineLink = (OfflineLink)offlineLinks.get(i);
+                addArgIfNotEmpty( arguments, "-linkoffline",
+                                  quotedPathArgument( offlineLink.getUrl() ) + " " + quotedPathArgument( offlineLink.getLocation().getAbsolutePath() ), true );
+            }
+        }
+    }
+
+    /**
+     * Convenience method to process link values as individual -link javadoc options
+     *
+     * @param arguments argument list
+     */
+    private void addLinkArguments( List arguments )
+    {
+        if ( links != null )
+        {
+            for ( int i = 0; i < links.size(); i++ )
+            {
+                addArgIfNotEmpty( arguments, "-link", quotedPathArgument( (String)links.get(i) ), true );
+            }
+        }
+    }
+
+    /**
