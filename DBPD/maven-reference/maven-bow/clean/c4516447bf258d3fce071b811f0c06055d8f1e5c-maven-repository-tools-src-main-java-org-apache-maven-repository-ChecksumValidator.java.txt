Trying to use ChecksumObserver to validate the checksum


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163597 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashSet;
+import java.util.Set;
+import org.apache.maven.artifact.manager.DefaultWagonManager;
+import org.apache.maven.artifact.manager.WagonManager;
+import org.apache.maven.wagon.TransferFailedException;
+import org.apache.maven.wagon.UnsupportedProtocolException;
+import org.apache.maven.wagon.Wagon;
+import org.apache.maven.wagon.observers.ChecksumObserver;
- * 
+    private ChecksumObserver checksumObserver;
+
+    private ArtifactRepository tempRepository;
+
+    public ChecksumValidator()
+    {
+
+        checksumObserver = new ChecksumObserver();
+
+        tempRepository = new ArtifactRepository();
+
+        File f = new File( "target/test-classes/temp/" );
+
+        tempRepository.setUrl( "file://" + f.getPath() );
+
+    }
+
+    public boolean isValidChecksum( Artifact artifact, ArtifactRepository localRepository )
+        throws TransferFailedException, UnsupportedProtocolException
+    {
+        WagonManager wagonManager = new DefaultWagonManager();
+
+        Set set = new HashSet();
+
+        set.add( localRepository );
+
+        Wagon wagon = wagonManager.getWagon( "file://" );
+
+        wagon.addTransferListener( checksumObserver );
+
+        wagonManager.get( artifact, set, tempRepository );
+
+        // File file = artifact.getFile();
+        //
+        // TransferEvent transferEvent = new TransferEvent( wagon, new
+        // Resource(), TransferEvent.TRANSFER_COMPLETED,
+        // TransferEvent.REQUEST_GET );
+        //
+        // checksumObserver.transferStarted( transferEvent );
+        // checksumObserver.transferProgress(transferEvent, file);
+
+        return true;
+    }
+
