some cleanup to execute file - still doesnt work when spaces in path

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@177940 13f79535-47bb-0310-9956-ffa450edef68

+            System.out.println( getJavadocPath() );
-            CommandLineUtils.executeCommandLine( cl, new DefaultConsumer(), new DefaultConsumer() );
+            int exitCode = CommandLineUtils.executeCommandLine( cl, new DefaultConsumer(), new DefaultConsumer() );
+            if ( exitCode != 0 )
+            {
+                throw new MavenReportException( "exit code: " + exitCode );
+            }
-        String osName = System.getProperty( "os.name" );
-        String jdkPath;
-        if ( osName.startsWith( "Windows" ) )
-        {
-            jdkPath = "%JAVA_HOME%";
-        }
-        else
-        {
-            jdkPath = "$JAVA_HOME";
-        }
-
+        // TODO: this could probably be improved/configured
+        // TODO: doesn't work with spaces in java.home
-        return jdkPath + fileSeparator + "bin" + fileSeparator + "javadoc";
+        File f = new File( System.getProperty( "java.home" ), "bin/javadoc" );
+        return f.getAbsolutePath();
-}
+}
