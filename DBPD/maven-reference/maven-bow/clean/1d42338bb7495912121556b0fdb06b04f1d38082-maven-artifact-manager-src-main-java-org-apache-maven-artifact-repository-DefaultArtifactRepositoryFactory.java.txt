PR: MNG-1109
better handling for timeout and other transfer failed exceptions that are recoverable (ie metadata), and then blacklist the repository for performance.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@306560 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashMap;
+import java.util.Map;
+
+    private final Map artifactRepositories = new HashMap();
+
-                                                        ArtifactRepositoryLayout repositoryLayout, boolean uniqueVersion )
+                                                                  ArtifactRepositoryLayout repositoryLayout,
+                                                                  boolean uniqueVersion )
+        if ( artifactRepositories.containsKey( id ) )
+        {
+            ArtifactRepository repository = (ArtifactRepository) artifactRepositories.get( id );
+            // TODO: this should be an if there are duplicates?
+            if ( repository.getUrl().equals( url ) )
+            {
+                return repository;
+            }
+        }
+
-        return new DefaultArtifactRepository( id, url, repositoryLayout, snapshots, releases );
+        DefaultArtifactRepository repository = new DefaultArtifactRepository( id, url, repositoryLayout, snapshots,
+                                                                              releases );
+
+        artifactRepositories.put( id, repository );
+
+        return repository;
