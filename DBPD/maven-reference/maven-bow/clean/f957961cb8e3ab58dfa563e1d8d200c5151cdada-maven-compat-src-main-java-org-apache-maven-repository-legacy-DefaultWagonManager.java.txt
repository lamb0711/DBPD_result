[MNG-4470] [regression] Proxies are ignored during artifact deployment

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@884296 13f79535-47bb-0310-9956-ffa450edef68

-        if ( repository.getAuthentication() != null )
+        if ( repository.getAuthentication() != null && repository.getProxy() != null )
-            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), authenticationInfo( repository ) );                    
+            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), authenticationInfo( repository ),
+                           proxyInfo( repository ) );
+        }
+        else if ( repository.getAuthentication() != null )
+        {
+            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), authenticationInfo( repository ) );
-            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), proxyInfo( repository ) );                    
-        }
-        else if ( repository.getAuthentication() != null && repository.getProxy() != null )
-        {
-            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), authenticationInfo( repository ), proxyInfo( repository ) );                                
+            wagon.connect( new Repository( repository.getId(), repository.getUrl() ), proxyInfo( repository ) );
-            wagon.connect( new Repository( repository.getId(), repository.getUrl() ) );                    
+            wagon.connect( new Repository( repository.getId(), repository.getUrl() ) );
