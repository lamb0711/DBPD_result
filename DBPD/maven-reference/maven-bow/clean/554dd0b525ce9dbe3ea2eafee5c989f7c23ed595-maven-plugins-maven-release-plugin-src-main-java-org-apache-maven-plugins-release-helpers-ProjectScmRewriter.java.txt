Resolving: MNG-842


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@290572 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+
-        if ( scmConnection.indexOf( "/trunk" ) >= 0 )
+        int trunkBegin = scmConnection.indexOf( "/trunk" );
+        
+        if ( trunkBegin >= 0 )
-            scmConnection = StringUtils.replace( scmConnection, "/trunk", "/tags/" + tag );
+            String tail = "";
+            
+            if ( scmConnection.length() > trunkBegin + "/trunk".length() )
+            {
+                tail = scmConnection.substring( trunkBegin + "/trunk".length() );
+                
+                if ( !tail.startsWith( "/" ) )
+                {
+                    tail += "/";
+                }
+            }
+            
+            scmConnection = scmConnection.substring( 0, trunkBegin ) + "/tags/" + tag + tail;
