fix NPE in dependencies report



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@220050 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.repository.ArtifactRepository;
+     * @parameter expression="${localRepository}"
+     * @required
+     * @readonly
+     */
+    private ArtifactRepository localRepository;
+
+    /**
-                                                           artifactFactory );
+                                                           artifactFactory, localRepository );
+        private ArtifactRepository localRepository;
+
-                                    MavenProjectBuilder mavenProjectBuilder, ArtifactFactory artifactFactory )
+                                    MavenProjectBuilder mavenProjectBuilder, ArtifactFactory artifactFactory,
+                                    ArtifactRepository localRepository )
+
+            this.localRepository = localRepository;
-            if ( ( dependencies == null ) || ( dependencies.isEmpty() ) )
+            if ( dependencies == null || dependencies.isEmpty() )
-                    artifactProject = getMavenProjectFromRepository( artifact );
+                    artifactProject = getMavenProjectFromRepository( artifact, localRepository );
-                        artifactProject = getMavenProjectFromRepository( artifact );
+                        artifactProject = getMavenProjectFromRepository( artifact, localRepository );
-                    System.out.println( "nklj-----------------------------" );
-                    System.out.println( artifactProject.getUrl() );
-            if ( ( dependencies == null ) || ( artifacts == null ) )
+            if ( dependencies == null || artifacts == null )
-         * 
+         *
-         * @throws ProjectBuildingException
+         * @throws org.apache.maven.project.ProjectBuildingException
-        private MavenProject getMavenProjectFromRepository( Artifact artifact )
+        private MavenProject getMavenProjectFromRepository( Artifact artifact, ArtifactRepository localRepository )
-            return mavenProjectBuilder.buildFromRepository( artifact, project.getRepositories(), artifact
-                .getRepository() );
+            return mavenProjectBuilder.buildFromRepository( artifact, project.getRepositories(), localRepository );
