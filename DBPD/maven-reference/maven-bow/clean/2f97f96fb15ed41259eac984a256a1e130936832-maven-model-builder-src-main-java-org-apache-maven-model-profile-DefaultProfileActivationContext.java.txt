[MNG-5418] Can't activate a profile by checking for the presence of a file in ${myProperty}.

+import java.util.Enumeration;
+import java.util.HashMap;
- * 
+ *
+    private Map<String, String> projectProperties = Collections.emptyMap();
+
-     * 
+     *
-     * 
+     *
-     * 
+     *
-    @SuppressWarnings( "unchecked" )
+    @SuppressWarnings("unchecked")
-     * 
+     *
-     * 
+     *
-    @SuppressWarnings( "unchecked" )
+    @SuppressWarnings("unchecked")
-     * 
+     *
-     * 
+     *
-     *            happens in the context of metadata retrieval rather than project building.
+     *                         happens in the context of metadata retrieval rather than project building.
+    public Map<String, String> getProjectProperties()
+    {
+        return projectProperties;
+    }
+
+    public DefaultProfileActivationContext setProjectProperties( Properties projectProperties )
+    {
+        if ( projectProperties != null )
+        {
+
+            this.projectProperties = Collections.unmodifiableMap( toMap( projectProperties ) );
+        }
+        else
+        {
+            this.projectProperties = Collections.emptyMap();
+        }
+
+        return this;
+    }
+
+    private Map<String, String> toMap( Properties properties )
+    {
+        if ( properties == null )
+        {
+            return Collections.emptyMap();
+        }
+        Map<String, String> map = new HashMap<String, String>();
+        Enumeration keys = properties.keys();
+        while ( keys.hasMoreElements() )
+        {
+            String key = (String) keys.nextElement();
+            map.put( key, properties.getProperty( key ) );
+        }
+        return map;
+    }
