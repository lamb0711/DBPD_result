o Generalized plugin realm cache

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@817669 13f79535-47bb-0310-9956-ffa450edef68

-    private PluginRealmCache pluginCache;
-
-    @Requirement
-        MavenProject project = session.getCurrentProject();
-        ArtifactRepository localRepository = session.getLocalRepository();
-        List<ArtifactRepository> remoteRepositories = project.getPluginArtifactRepositories();
-
-        PluginRealmCache.CacheRecord cacheRecord = pluginCache.get( plugin, project, localRepository, remoteRepositories );
-
-        if ( cacheRecord != null )
+        try
-            pluginDescriptor.setClassRealm( cacheRecord.realm );
-            pluginDescriptor.setArtifacts( new ArrayList<Artifact>( cacheRecord.artifacts ) );
+            mavenPluginManager.setupPluginRealm( pluginDescriptor, session,
+                                                 session.getCurrentProject().getClassRealm(), null );
-        else
+        catch ( PluginResolutionException e )
-            try
-            {
-                mavenPluginManager.setupPluginRealm( pluginDescriptor, session, project.getClassRealm(), null );
-            }
-            catch ( PluginResolutionException e )
-            {
-                throw new PluginManagerException( plugin, e.getMessage(), e );
-            }
-
-            pluginCache.put( plugin, project, localRepository, remoteRepositories, pluginDescriptor.getClassRealm(),
-                             pluginDescriptor.getArtifacts() );
+            throw new PluginManagerException( plugin, e.getMessage(), e );
