[MNG-2741] [regression] Meaningless error message: "Error transferring file"

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@929217 13f79535-47bb-0310-9956-ffa450edef68

-            throw new ArtifactTransferFailedException( "Error transferring artifact.", e );
+            throw new ArtifactTransferFailedException( getMessage( e, "Error transferring artifact." ), e );
-            throw new ArtifactDoesNotExistException( "Requested artifact does not exist.", e );            
+            throw new ArtifactDoesNotExistException( getMessage( e, "Requested artifact does not exist." ), e );
-            throw new ArtifactTransferFailedException( "Error transferring artifact.", e );
+            throw new ArtifactTransferFailedException( getMessage( e, "Error transferring artifact." ), e );
+    private static String getMessage( Throwable error, String def )
+    {
+        if ( error == null )
+        {
+            return def;
+        }
+        String msg = error.getMessage();
+        if ( StringUtils.isNotEmpty( msg ) )
+        {
+            return msg;
+        }
+        return getMessage( error.getCause(), def );
+    }
+
