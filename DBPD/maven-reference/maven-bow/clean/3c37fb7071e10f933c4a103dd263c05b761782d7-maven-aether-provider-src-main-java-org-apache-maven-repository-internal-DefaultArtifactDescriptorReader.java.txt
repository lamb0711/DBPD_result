o Enabled request tracing for repository events to provide more context for event spies

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1074195 13f79535-47bb-0310-9956-ffa450edef68

+import org.sonatype.aether.RequestTrace;
+import org.sonatype.aether.util.DefaultRequestTrace;
+        RequestTrace trace = DefaultRequestTrace.newChild( request.getTrace(), request );
+
+                versionRequest.setTrace( trace );
-                invalidDescriptor( session, artifact, exception );
+                invalidDescriptor( session, trace, artifact, exception );
+                resolveRequest.setTrace( trace );
-                    missingDescriptor( session, artifact, (Exception) e.getCause() );
+                    missingDescriptor( session, trace, artifact, (Exception) e.getCause() );
-                modelRequest.setModelResolver( new DefaultModelResolver( session, request.getRequestContext(),
-                                                                         artifactResolver, remoteRepositoryManager,
+                modelRequest.setModelResolver( new DefaultModelResolver( session, trace.newChild( modelRequest ),
+                                                                         request.getRequestContext(), artifactResolver,
+                                                                         remoteRepositoryManager,
-                invalidDescriptor( session, artifact, e );
+                invalidDescriptor( session, trace, artifact, e );
-    private void missingDescriptor( RepositorySystemSession session, Artifact artifact, Exception exception )
+    private void missingDescriptor( RepositorySystemSession session, RequestTrace trace, Artifact artifact,
+                                    Exception exception )
-            DefaultRepositoryEvent event = new DefaultRepositoryEvent( EventType.ARTIFACT_DESCRIPTOR_MISSING, session );
+            DefaultRepositoryEvent event =
+                new DefaultRepositoryEvent( EventType.ARTIFACT_DESCRIPTOR_MISSING, session, trace );
-    private void invalidDescriptor( RepositorySystemSession session, Artifact artifact, Exception exception )
+    private void invalidDescriptor( RepositorySystemSession session, RequestTrace trace, Artifact artifact,
+                                    Exception exception )
-            DefaultRepositoryEvent event = new DefaultRepositoryEvent( EventType.ARTIFACT_DESCRIPTOR_INVALID, session );
+            DefaultRepositoryEvent event =
+                new DefaultRepositoryEvent( EventType.ARTIFACT_DESCRIPTOR_INVALID, session, trace );
