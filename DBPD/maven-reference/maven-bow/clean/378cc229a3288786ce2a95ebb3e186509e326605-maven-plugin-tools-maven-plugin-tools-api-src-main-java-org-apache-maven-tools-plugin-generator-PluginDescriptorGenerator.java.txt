convert #component expressions to <requirements/>


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163942 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import java.util.Collection;
+        Collection requirements = new ArrayList();
-            element( w, "required", Boolean.toString( parameter.isRequired() ) );
-
-            element( w, "expression", parameter.getExpression() );
+            if ( parameter.getExpression().startsWith( "#component" ) )
+            {
+                requirements.add( parameter );
+            }
+            else
+            {
+                element( w, "required", Boolean.toString( parameter.isRequired() ) );
+
+                element( w, "expression", parameter.getExpression() );
+            }
-        // Prereqs
+        // Requirements
-        // TODO: remove
-
-        List prereqs = mojoDescriptor.getPrereqs();
-
-        if ( prereqs != null && prereqs.size() > 0 )
+        if ( !requirements.isEmpty() )
-            w.startElement( "prereqs" );
+            w.startElement( "requirements" );
-            for ( int j = 0; j < prereqs.size(); j++ )
+            for ( Iterator i = requirements.iterator(); i.hasNext(); )
-                element( w, "prereq", (String) prereqs.get( j ) );
+                Parameter requirement = (Parameter) i.next();
+
+                w.startElement( "requirement" );
+
+                element( w, "role", requirement.getExpression().substring( 11 ) );
+
+                element( w, "field-name", requirement.getName() );
+
+                w.endElement();
