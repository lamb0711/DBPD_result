PR: MNG-793
Submitted by: Allan Ramirez
only write properties when changed to avoid unnecessary diffs


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@321324 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.FileInputStream;
-
+              
-
+                                  
+                File oldCoreSettingsFile;
+                
-                coreSettings.store( new FileOutputStream( coreSettingsFile ), null );
+                
+                if( coreSettingsFile.exists() )
+                {
+                    oldCoreSettingsFile = coreSettingsFile;
+                    
+                    Properties props = new Properties();
+                    
+                    props.load( new FileInputStream( oldCoreSettingsFile ) );
+                    
+                    if( !props.equals( coreSettings ) )
+                    {
+                        coreSettings.store( new FileOutputStream( coreSettingsFile ), null );
+                    }
+                }
+                else
+                {
+                    coreSettings.store( new FileOutputStream( coreSettingsFile ), null );
-                log.info( Messages.getString( "EclipseSettingsWriter.wrotesettings", //$NON-NLS-1$
-                                              coreSettingsFile.getAbsolutePath() ) );
+                    log.info( Messages.getString( "EclipseSettingsWriter.wrotesettings", //$NON-NLS-1$
+                                                  coreSettingsFile.getAbsolutePath() ) );
+                }
