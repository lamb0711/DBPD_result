PR: MNG-838
improve error reporting for bad settings

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307261 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.SettingsConfigurationException;
-        Settings settings = null;
+        Settings settings;
-            request = createRequest( commandLine,
-                                     settings,
-                                     eventDispatcher,
-                                     loggerManager,
-                                     profileManager,
+            request = createRequest( commandLine, settings, eventDispatcher, loggerManager, profileManager,
+        catch ( SettingsConfigurationException e )
+        {
+            showError( e.getMessage(), e, showErrors );
+            return 1;
+        }
-    private static MavenExecutionRequest createRequest( CommandLine commandLine,
-                                                        Settings settings,
-                                                        EventDispatcher eventDispatcher,
-                                                        LoggerManager loggerManager,
-                                                        ProfileManager profileManager,
-                                                        Properties executionProperties )
+    private static void showError( String message, Exception e, boolean show )
+    {
+        System.err.println( message );
+        if ( show )
+        {
+            System.err.println( "Error stacktrace:" );
+
+            e.printStackTrace();
+        }
+    }
+
+    private static MavenExecutionRequest createRequest( CommandLine commandLine, Settings settings,
+                                                        EventDispatcher eventDispatcher, LoggerManager loggerManager,
+                                                        ProfileManager profileManager, Properties executionProperties )
-        request = new DefaultMavenExecutionRequest( localRepository,
-                                                    settings,
-                                                    eventDispatcher,
-                                                    commandLine.getArgList(),
-                                                    userDir.getPath(),
-                                                    profileManager,
+        request = new DefaultMavenExecutionRequest( localRepository, settings, eventDispatcher,
+                                                    commandLine.getArgList(), userDir.getPath(), profileManager,
