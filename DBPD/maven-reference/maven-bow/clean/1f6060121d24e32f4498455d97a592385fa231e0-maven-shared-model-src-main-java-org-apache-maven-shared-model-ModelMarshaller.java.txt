[MNG-3839] XML parsing of POM does not reliably coalesce text data

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@714059 13f79535-47bb-0310-9956-ffa450edef68

-        String tagValue = null;
+        StringBuilder tagValue = new StringBuilder( 256 );
+        int depthOfTagValue = depth;
+                    case XMLStreamConstants.CDATA:
-                        String tmp = xmlStreamReader.getText();
-                        if ( tmp != null && tmp.trim().length() != 0 )
+                        if ( depth == depthOfTagValue )
-                            tagValue = tmp;
+                            tagValue.append( xmlStreamReader.getTextCharacters(), xmlStreamReader.getTextStart(),
+                                             xmlStreamReader.getTextLength() );
-                        depth++;
-                            modelProperties.add( new ModelProperty( tagName, tagValue ) );
+                            String value = null;
+                            if ( depth < depthOfTagValue )
+                            {
+                                value = tagValue.toString();
+                            }
+                            modelProperties.add( new ModelProperty( tagName, value ) );
+                        depth++;
-                        tagValue = null;
-
+                        tagValue.setLength( 0 );
+                        depthOfTagValue = depth;
-                        if ( tagValue == null )
-                        {
-                            tagValue = "";
-                        }
-                        modelProperties.add( new ModelProperty( tagName, tagValue ) );
+                        modelProperties.add( new ModelProperty( tagName, tagValue.toString() ) );
