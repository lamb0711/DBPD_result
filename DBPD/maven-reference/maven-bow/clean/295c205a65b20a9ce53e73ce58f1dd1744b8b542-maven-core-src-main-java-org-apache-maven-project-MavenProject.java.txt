[MNG-5868] No duplicate artifacts in attached artifacts
if attached artifacts already contains the artifact remove it and add the new one

Signed-off-by: olivier lamy <olamy@apache.org>

+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+
+    private static final Logger LOGGER = LoggerFactory.getLogger( MavenProject.class );
+
-    private List<Artifact> attachedArtifacts;
+    private List<Artifact> attachedArtifacts = new ArrayList<>();
-     * @throws DuplicateArtifactAttachmentException
+     * @deprecated Please use {@link MavenProjectHelper}
+     * @throws DuplicateArtifactAttachmentException will never happen but leave it for backward compatibility
-        getAttachedArtifacts().add( artifact );
+        // if already there we remove it and add again
+        int index = attachedArtifacts.indexOf( artifact );
+        if ( index >= 0 )
+        {
+            LOGGER.warn( "artifact {} already attached, replace previous instance", artifact );
+            attachedArtifacts.set( index, artifact );
+        }
+        else
+        {
+            attachedArtifacts.add( artifact );
+        }
-        return attachedArtifacts;
+        return Collections.unmodifiableList( attachedArtifacts );
