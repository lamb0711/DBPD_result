PR: MNG-613
fix the location of the metadata update check

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@280191 13f79535-47bb-0310-9956-ffa450edef68

-        Versioning versioning = new Versioning();
-        versioning.addVersion( artifact.getVersion() );
-
-        if ( artifact.isRelease() )
-        {
-            versioning.setRelease( artifact.getVersion() );
-        }
-
-        // TODO: need to create?
-        ArtifactMetadata metadata = new ArtifactRepositoryMetadata( artifact, versioning );
+        ArtifactMetadata metadata = createMetadata( artifact );
+        ArtifactMetadata metadata = createMetadata( artifact );
+
+        artifact.addMetadata( metadata );
+    }
+
+    private ArtifactMetadata createMetadata( Artifact artifact )
+    {
-        // TODO: need to create?
-        ArtifactMetadata metadata = new ArtifactRepositoryMetadata( artifact, versioning );
-
-        artifact.addMetadata( metadata );
-
-        // TODO: this should be in the part that actually merges instead
-        getLogger().info( "Retrieving previous metadata from " + remoteRepository.getId() );
-        repositoryMetadataManager.resolveAlways( metadata, localRepository, remoteRepository );
+        return new ArtifactRepositoryMetadata( artifact, versioning );
