PR: MNG-1314
Submitted by: Johnny R. Ruiz III
IDEA 5.0 compatible JDK setting

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@330210 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.artifact.DependencyResolutionRequiredException;
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Set;
-import java.util.Arrays;
-
-import org.apache.maven.artifact.resolver.filter.ScopeArtifactFilter;
+     *
+     * Specify the version of idea to use.  This is needed to identify the default formatting of
+     * project-jdk-name used by idea.  Currently supports 4.x and 5.x.
+     * <p/>
+     * This will only be used when parameter jdkName is not set.
+     *
+     * @parameter expression="${ideaVersion}"
+     * default-value="5.x"
+     */
+    private String ideaVersion;
+
+    /**
+     *
-        if ( project.isExecutionRoot() ) 
+        if ( project.isExecutionRoot() )
-        
+
-            
+
-            
+
-            
+
-            IOUtil.close(reader);
+            IOUtil.close( reader );
-                String defaultJdkName = "java version " + javaVersion;
-                getLog().info( "jdkName is not set, using[" + defaultJdkName + "] as default." );
+                String defaultJdkName;
+
+                if ( ideaVersion.startsWith( "4" ) )
+                {
+                    defaultJdkName = "java version &quot;" + javaVersion + "&quot;";
+                }
+                else
+                {
+                    defaultJdkName = javaVersion.substring( 0, 3 );
+                }
+                getLog().info( "jdkName is not set, using [java version" + javaVersion + "] as default." );
-    
+
-        
+
-               
+
-     * @param content Xpp3Dom element
+     * @param content   Xpp3Dom element
-     * @param isTest True if directory isTestSource.
+     * @param isTest    True if directory isTestSource.
-     * @param basedir The basedir of the project.
+     * @param basedir      The basedir of the project.
-     * @param name Name of the element to be removed
+     * @param name    Name of the element to be removed
-     * @param name Name attribute to find
+     * @param name   Name attribute to find
-     * @param name Setting attribute to find
+     * @param name      Setting attribute to find
-     * @param name Setting attribute to find
+     * @param name      Setting attribute to find
-    private Xpp3Dom findElementName( Xpp3Dom component,  String child, String name )
+    private Xpp3Dom findElementName( Xpp3Dom component, String child, String name )
-    
+
-     * @param name Name of the element
+     * @param name   Name of the element
-     * @param name Name of the element to find.
+     * @param name      Name of the element to find.
-    
+
-     *
-    { 
+    {
-        
+
-            Xpp3Dom element = findElementName( component, "option" , "ACTIVE_VCS_NAME" );
-            
+            Xpp3Dom element = findElementName( component, "option", "ACTIVE_VCS_NAME" );
+
-    
+
-    
+
-        
+
-               
-                int endIndex = connection.indexOf( ":", startIndex + 1);
-                
+
+                int endIndex = connection.indexOf( ":", startIndex + 1 );
+
-                    scmType = connection.substring( startIndex + 1, endIndex);
+                    scmType = connection.substring( startIndex + 1, endIndex );
