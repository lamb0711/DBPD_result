PR: MNG-788
add filtering to the build element


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@290877 13f79535-47bb-0310-9956-ffa450edef68

+     * @deprecated
-    private boolean filtering = false;
+    private boolean filtering = true;
+     * @deprecated use the filters section of the POM.
+    /**
+     * @parameter expression="${project.build.filters}"
+     */
+    private List filters;
+
-            try
+            if ( filters == null || filters.isEmpty() && filterPropertiesFile.exists() )
-                filterProperties = PropertyUtils.loadPropertyFile( filterPropertiesFile, true, true );
+                // Deprecated - remove
+                try
+                {
+                    filterProperties = PropertyUtils.loadPropertyFile( filterPropertiesFile, true, true );
+                }
+                catch ( IOException e )
+                {
+                    throw new MojoExecutionException( "Error loading property file '" + filterPropertiesFile + "'", e );
+                }
-            catch ( IOException e )
+            else
-                throw new MojoExecutionException( "Error loading property file '" + filterPropertiesFile + "'", e );
+                filterProperties = new Properties();
+                for ( Iterator i = filters.iterator(); i.hasNext(); )
+                {
+                    String filtersfile = (String) i.next();
+                    try
+                    {
+                        Properties properties = PropertyUtils.loadPropertyFile( new File( filtersfile ), true, true );
+                        filterProperties.putAll( properties );
+                    }
+                    catch ( IOException e )
+                    {
+                        throw new MojoExecutionException( "Error loading property file '" + filtersfile + "'", e );
+                    }
+                }
