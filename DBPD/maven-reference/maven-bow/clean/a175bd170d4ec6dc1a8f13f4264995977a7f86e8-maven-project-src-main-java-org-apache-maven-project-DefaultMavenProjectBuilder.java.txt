o super model construction moved into the project builder so that all pure inheritance can be handled therein. Then the only thing we're left with is the mixins



git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@727311 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.Reader;
-import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
-import org.codehaus.plexus.personality.plexus.lifecycle.phase.Initializable;
-import org.codehaus.plexus.util.IOUtil;
-import org.codehaus.plexus.util.ReaderFactory;
-    implements MavenProjectBuilder, Initializable, LogEnabled
+    implements MavenProjectBuilder, LogEnabled
-    private MavenXpp3Reader modelReader;
-
-    private static final String MAVEN_MODEL_VERSION = "4.0.0";
-
-    public void initialize()
-    {
-        modelReader = new MavenXpp3Reader();
-    }
-
-    {
-        List repositories = mavenTools.buildArtifactRepositories( getSuperModel() );
+    {        
+        List repositories = mavenTools.buildArtifactRepositories( projectBuilder.getSuperModel() );
-        artifactRepositories.addAll( mavenTools.buildArtifactRepositories( getSuperModel() ) );
+        artifactRepositories.addAll( mavenTools.buildArtifactRepositories( projectBuilder.getSuperModel() ) );
-        Model superModel = getSuperModel();
+        Model superModel = projectBuilder.getSuperModel();
-        Model model = getSuperModel();
+        Model model = projectBuilder.getSuperModel();
-    private Model superModel;
-
-    private Model getSuperModel()
-    {
-        if ( superModel != null )
-        {
-            return superModel;
-        }
-
-        Reader reader = null;
-        
-        try
-        {
-            reader = ReaderFactory.newXmlReader( getClass().getResource( "pom-" + MAVEN_MODEL_VERSION + ".xml" ) );
-                        
-            superModel = modelReader.read( reader, STRICT_MODEL_PARSING );                  
-        }
-        catch ( Exception e )
-        {
-            // Not going to happen we're reading the super pom embedded in the JAR
-        }
-        finally
-        {
-            IOUtil.close( reader );            
-        }
-        
-        return superModel;        
-    }
-
-
-        interpolatorProperties.add(new InterpolatorProperty("${mavenVersion}", MavenProjectBuilder.STANDALONE_SUPERPOM_VERSION, PomInterpolatorTag.EXECUTION_PROPERTIES.name()));
-                                                              Arrays.asList( getSuperModel() ), 
+                                                              Arrays.asList( projectBuilder.getSuperModel() ), 
