MNG-2364 make sure the system properties are passed from the execution/embed requests, to make the on-property profile activation work in embedded environment

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@415000 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Properties;
+import org.codehaus.plexus.context.Context;
+import org.codehaus.plexus.context.ContextException;
+import org.codehaus.plexus.personality.plexus.lifecycle.phase.Contextualizable;
-    extends DetectedProfileActivator
+    extends DetectedProfileActivator implements Contextualizable
+    private Properties properties;
+    
+    public void contextualize(Context context) throws ContextException 
+    {
+        properties = (Properties)context.get("SystemProperties");
+    }
+    
-            String sysValue = System.getProperty( name );
+            String sysValue = properties.getProperty( name );
