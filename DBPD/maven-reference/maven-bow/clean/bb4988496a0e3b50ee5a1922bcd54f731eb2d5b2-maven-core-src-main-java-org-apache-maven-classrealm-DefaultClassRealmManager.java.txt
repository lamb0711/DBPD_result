better plugin/extensions realm parent classloader

Signed-off-by: Igor Fedorenko <ifedorenko@apache.org>

+    /**
+     * During normal command line build, ClassWorld is loaded by jvm system classloader, which only includes
+     * plexus-classworlds jar and possibly javaagent classes, see http://jira.codehaus.org/browse/MNG-4747.
+     * <p>
+     * Using ClassWorld to determine plugin/extensions realm parent classloaders gives m2e and integration test harness
+     * flexibility to load multiple version of maven into dedicated classloaders without assuming state of jvm system
+     * classloader.
+     */
+    private static final ClassLoader PARENT_CLASSLOADER = ClassWorld.class.getClassLoader();
+
-        ClassLoader parent = ClassLoader.getSystemClassLoader();
+        ClassLoader parent = PARENT_CLASSLOADER;
-            parent = ClassLoader.getSystemClassLoader();
+            parent = PARENT_CLASSLOADER;
