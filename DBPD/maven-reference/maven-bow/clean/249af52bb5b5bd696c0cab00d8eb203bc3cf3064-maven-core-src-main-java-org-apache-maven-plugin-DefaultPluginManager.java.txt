Wiring plugin-as-extension back into the new extension scanning stuff.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@598720 13f79535-47bb-0310-9956-ffa450edef68

+        String pluginVersion = plugin.getVersion();
+
-        if ( plugin.getVersion() == null )
+        getLogger().debug( "Resolving plugin: " + plugin.getKey() + " with version: " + pluginVersion );
+        if ( ( pluginVersion == null ) || Artifact.LATEST_VERSION.equals( pluginVersion ) || Artifact.RELEASE_VERSION.equals( pluginVersion ) )
-            String version = pluginVersionManager.resolvePluginVersion( plugin.getGroupId(),
+            pluginVersion = pluginVersionManager.resolvePluginVersion( plugin.getGroupId(),
-            plugin.setVersion( version );
+            plugin.setVersion( pluginVersion );
+
+            getLogger().debug( "Resolved to version: " + pluginVersion );
+                if ( ( pluginRealm != null ) && getLogger().isDebugEnabled() )
+                {
+                    getLogger().debug( "Plugin Realm: " );
+                    pluginRealm.display();
+                }
+
-                                                 + projectPlugin.getKey() + " was not found" );
+                                                 + projectPlugin.getKey() + " was not found. Should have been in realm: " + pluginRealm );
