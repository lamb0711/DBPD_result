PR: MNG-838
improve error reporting for bad settings

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307263 13f79535-47bb-0310-9956-ffa450edef68

+import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
-        catch ( Exception e )
+        catch ( SettingsConfigurationException e )
+        {
+            showError( "Error reading settings.xml: " + e.getMessage(), e, showErrors );
+
+            return 1;
+        }
+        catch ( ComponentLookupException e )
-        throws Exception
+        throws ComponentLookupException, SettingsConfigurationException
-        if ( userSettingsPath != null )
+        try
-            File userSettingsFile = new File( userSettingsPath );
+            if ( userSettingsPath != null )
+            {
+                File userSettingsFile = new File( userSettingsPath );
-            if ( userSettingsFile.exists() && !userSettingsFile.isDirectory() )
-            {
-                settings = settingsBuilder.buildSettings( userSettingsFile );
+                if ( userSettingsFile.exists() && !userSettingsFile.isDirectory() )
+                {
+                    settings = settingsBuilder.buildSettings( userSettingsFile );
+                }
+                else
+                {
+                    System.out.println( "WARNING: Alternate user settings file: " + userSettingsPath +
+                        " is invalid. Using default path." );
+                }
-            else
+
+            if ( settings == null )
-                System.out.println(
-                    "WARNING: Alternate user settings file: " + userSettingsPath + " is invalid. Using default path." );
+                settings = settingsBuilder.buildSettings();
-
-        if ( settings == null )
+        catch ( IOException e )
-            settings = settingsBuilder.buildSettings();
+            throw new SettingsConfigurationException( "Error reading settings file", e );
+        }
+        catch ( XmlPullParserException e )
+        {
+            throw new SettingsConfigurationException( e.getMessage(), e.getDetail(), e.getLineNumber(),
+                                                      e.getColumnNumber() );
