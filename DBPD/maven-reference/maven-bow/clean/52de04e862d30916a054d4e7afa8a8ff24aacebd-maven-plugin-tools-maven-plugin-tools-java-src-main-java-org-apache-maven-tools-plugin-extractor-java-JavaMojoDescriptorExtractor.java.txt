Retrying commit after updating maven-core to HEAD.

o Fixed problems with plugin-plugin (had to do with refactored plugin-tools stuff)
o Added marmalade-mojo support, although without an integration test (verified it doesn't get in the way of 'normal' functionality, though)
o Added code in mboot2 to copy marmalade-mojo support libs to ${maven.home}/lib


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163405 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.plugin.MavenMojoDescriptor;
+        mojoDescriptor.setLanguage( "java" );
+
-                
-                MavenMojoDescriptor mmDescriptor = new MavenMojoDescriptor(mojoDescriptor);
-                
-                JavaClass javaClass = getJavaClass(javaSources[i]);
-                
-                mmDescriptor.setImplementation(javaClass.getFullyQualifiedName());
-                
-                descriptors.add( mmDescriptor );
+
+                //                Commented because it causes a VerifyError:
+                //                java.lang.VerifyError:
+                //                (class:
+                // org/apache/maven/tools/plugin/extractor/java/JavaMojoDescriptorExtractor,
+                //                method: execute signature:
+                // (Ljava/lang/String;Lorg/apache/maven/project/MavenProject;)Ljava/util/Set;)
+                //                Incompatible object argument for function call
+                //                
+                //                Refactored to allow MavenMojoDescriptor.getComponentFactory()
+                //                return MavenMojoDescriptor.getMojoDescriptor().getLanguage(),
+                //                and removed all usage of MavenMojoDescriptor from extractors.
+                //                
+                //                
+                //                MavenMojoDescriptor mmDescriptor = new
+                // MavenMojoDescriptor(mojoDescriptor);
+                //                
+                //                JavaClass javaClass = getJavaClass(javaSources[i]);
+                //                
+                //                mmDescriptor.setImplementation(javaClass.getFullyQualifiedName());
+                //                
+                //                descriptors.add( mmDescriptor );
+
+                descriptors.add( mojoDescriptor );
