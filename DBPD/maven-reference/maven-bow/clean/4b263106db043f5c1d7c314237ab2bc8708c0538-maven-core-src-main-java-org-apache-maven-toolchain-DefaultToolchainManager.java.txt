[MNG-5755] Access toolchains without maven-toolchain-plugin
Added List<Toolchain> getToolchains( MavenSession session, String type, Map<String, String> requirements ) to ToolchainManager

+import java.util.ArrayList;
+import java.util.Collections;
+import java.util.List;
-
+    
+    @Override
-            try
+            List<Toolchain> toolchains = selectToolchains( Collections.singletonList( model ), type, null );
+            
+            if ( !toolchains.isEmpty() )
-                ToolchainFactory fact = factories.get( type );
-                if ( fact != null )
-                {
-                    return fact.createToolchain( model );
-                }
-                else
-                {
-                    logger.error( "Missing toolchain factory for type: " + type
-                        + ". Possibly caused by misconfigured project." );
-                }
-            }
-            catch ( MisconfiguredToolchainException ex )
-            {
-                logger.error( "Misconfigured toolchain.", ex );
+                return toolchains.get( 0 );
+    @Override
+    public List<Toolchain> getToolchains( MavenSession session, String type, Map<String, String> requirements )
+    {
+        List<ToolchainModel> models = session.getRequest().getToolchains().get( type );
+
+        return selectToolchains( models, type, requirements );
+    }
+
+    private List<Toolchain> selectToolchains( List<ToolchainModel> models, String type, Map<String, String> requirements )
+    {
+        List<Toolchain> toolchains = new ArrayList<Toolchain>();
+
+        if ( models != null )
+        {
+            ToolchainFactory fact = factories.get( type );
+
+            if ( fact == null )
+            {
+                logger.error( "Missing toolchain factory for type: " + type
+                    + ". Possibly caused by misconfigured project." );
+            }
+            else
+            {
+                for ( ToolchainModel model : models )
+                {
+                    try
+                    {
+                        ToolchainPrivate toolchain = fact.createToolchain( model );
+                        if ( requirements == null || toolchain.matchesRequirements( requirements ) )
+                        {
+                            toolchains.add( toolchain );
+                        }
+                    }
+                    catch ( MisconfiguredToolchainException ex )
+                    {
+                        logger.error( "Misconfigured toolchain.", ex );
+                    }
+                }
+            }
+        }
+        return toolchains;
+    }
+    
