correct blacklisting logic

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@312921 13f79535-47bb-0310-9956-ffa450edef68

-        blackList( ArtifactUtils.versionlessKey( project.getGroupId(), project.getArtifactId() ) );
+        blackList( getProjectKey( project ) );
-                    blackList( dependentId );
+                    if ( !buildSuccessesByProject.containsKey( dependentId ) &&
+                        !buildFailuresByProject.containsKey( dependentId ) )
+                    {
+                        blackList( dependentId );
+                    }
-        return blackList.contains( ArtifactUtils.versionlessKey( project.getGroupId(), project.getArtifactId() ) );
+        return blackList.contains( getProjectKey( project ) );
+    }
+
+    private static String getProjectKey( MavenProject project )
+    {
+        return ArtifactUtils.versionlessKey( project.getGroupId(), project.getArtifactId() );
-        buildFailuresByProject.put( project.getId(), new BuildFailure( error, task, time ) );
+        buildFailuresByProject.put( getProjectKey( project ), new BuildFailure( error, task, time ) );
-        return buildFailuresByProject.containsKey( project.getId() );
+        return buildFailuresByProject.containsKey( getProjectKey( project ) );
-        return buildSuccessesByProject.containsKey( project.getId() );
+        return buildSuccessesByProject.containsKey( getProjectKey( project ) );
-        buildSuccessesByProject.put( project.getId(), new BuildSuccess( project, time ) );
+        buildSuccessesByProject.put( getProjectKey( project ), new BuildSuccess( project, time ) );
-        return (BuildFailure) buildFailuresByProject.get( project.getId() );
+        return (BuildFailure) buildFailuresByProject.get( getProjectKey( project ) );
-        return (BuildSuccess) buildSuccessesByProject.get( project.getId() );
+        return (BuildSuccess) buildSuccessesByProject.get( getProjectKey( project ) );
