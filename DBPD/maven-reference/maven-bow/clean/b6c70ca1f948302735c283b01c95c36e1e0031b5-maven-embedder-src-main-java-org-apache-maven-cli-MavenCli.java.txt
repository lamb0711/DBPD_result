o another pass at removing wagon from the core.



git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@823064 13f79535-47bb-0310-9956-ffa450edef68

-        ConfigurationValidationResult cvr = validateConfiguration( configuration );
-
-        if ( cvr.isUserSettingsFilePresent() && !cvr.isUserSettingsFileParses() )
-        {
-            CLIReportingUtils.showError( logger, "Error reading user settings: ", cvr.getUserSettingsException(), showErrors );
-
-            return 1;
-        }
-
-        if ( cvr.isGlobalSettingsFilePresent() && !cvr.isGlobalSettingsFileParses() )
-        {
-            CLIReportingUtils.showError( logger, "Error reading global settings: ", cvr.getGlobalSettingsException(), showErrors );
-
-            return 1;
-        }
-
-        Configuration configuration = new DefaultConfiguration().setUserSettingsFile( userSettingsFile ).setGlobalSettingsFile( globalSettingsFile );
-
-        if ( commandLine.hasOption( CLIManager.LOG_FILE ) )
-        {
-            File logFile = new File( commandLine.getOptionValue( CLIManager.LOG_FILE ) ).getAbsoluteFile();
-
-            configuration.setMavenEmbedderLogger( new FileLogger( logFile ) );
-        }
-        else
-        {
-            configuration.setMavenEmbedderLogger( new ConsoleLogger( Logger.LEVEL_ERROR, Maven.class.getName()) );
-        }
+        Configuration configuration = new DefaultConfiguration()
+            .setUserSettingsFile( userSettingsFile )
+            .setGlobalSettingsFile( globalSettingsFile );
