o interpolate System properties into the maven.properties values


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162917 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
+import java.util.Map;
+    public static String interpolate( String text, Map namespace )
+    {
+        Iterator keys = namespace.keySet().iterator();
+
+        while ( keys.hasNext() )
+        {
+            String key = keys.next().toString();
+
+            Object obj = namespace.get( key );
+
+            String value = obj.toString();
+
+            text = replace( text, "${" + key + "}", value );
+
+            if ( key.indexOf( " " ) == -1 )
+            {
+                text = replace( text, "$" + key, value );
+            }
+        }
+        return text;
+    }
+
-        Properties mavenProperties = new Properties();
+        Properties properties = new Properties();
-            mavenProperties.load( new FileInputStream( new File( System.getProperty( "user.home" ), "maven.properties" ) ) );
+            properties.load( new FileInputStream( new File( System.getProperty( "user.home" ), "maven.properties" ) ) );
+
+            for ( Iterator i = properties.keySet().iterator(); i.hasNext(); )
+            {
+                String key = (String) i.next();
+
+                properties.setProperty( key, interpolate( properties.getProperty( key ), System.getProperties() ) );
+            }
+
-        mavenRepoLocal = mavenProperties.getProperty( "maven.repo.local" );
+        mavenRepoLocal = properties.getProperty( "maven.repo.local" );
