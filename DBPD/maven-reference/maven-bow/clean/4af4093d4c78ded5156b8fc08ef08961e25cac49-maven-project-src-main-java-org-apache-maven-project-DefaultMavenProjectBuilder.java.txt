Remove dup code for profile creation.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@750144 13f79535-47bb-0310-9956-ffa450edef68

-        Collection<ModelContainer> profileContainers = profileContext.getActiveProfiles();
-
-        for(ModelContainer mc : profileContainers)
-        {
-            List<ModelProperty> transformed = new ArrayList<ModelProperty>();
-            for(ModelProperty mp : mc.getProperties())
-            {
-                if(mp.getUri().startsWith(ProjectUri.Profiles.Profile.xUri) && !mp.getUri().equals(ProjectUri.Profiles.Profile.id)
-                        && !mp.getUri().startsWith(ProjectUri.Profiles.Profile.Activation.xUri) )
-                {
-                    transformed.add(new ModelProperty(mp.getUri().replace(ProjectUri.Profiles.Profile.xUri, ProjectUri.xUri),
-                            mp.getResolvedValue()));
-                }
-            }
-            domainModels.add(new PomClassicDomainModel(transformed, false));
-        }
+        domainModels.addAll( transformProfiles(profileContext) );
+        domainModels.addAll( transformProfiles(profileContext) );
+
+        domainModels.addAll( getDomainModelParentsFromRepository( parentDomainModel, localRepository, remoteRepositories, properties,
+                                                                  activeProfileIds, inactiveProfileIds ) );
+        return domainModels;
+    }
+    
+    private static List<DomainModel> transformProfiles( ProfileContext profileContext ) throws IOException
+    {
+        List<DomainModel> domainModels = new ArrayList<DomainModel>();
-        }
-
-        domainModels.addAll( getDomainModelParentsFromRepository( parentDomainModel, localRepository, remoteRepositories, properties,
-                                                                  activeProfileIds, inactiveProfileIds ) );
+        }   
