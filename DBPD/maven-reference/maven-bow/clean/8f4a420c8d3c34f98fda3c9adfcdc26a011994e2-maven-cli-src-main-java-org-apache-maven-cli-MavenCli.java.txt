MNG-2728 return a MavenExecutionResult from Maven.execute( request )


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@491512 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.reactor.MavenExecutionException;
+import org.apache.maven.execution.MavenExecutionResult;
-        try
-        {
-            // ----------------------------------------------------------------------
-            // From here we are CLI free
-            // ----------------------------------------------------------------------
-
-            //  -> baseDirectory
-            //  -> goals
-            //  -> debug: use to set the threshold on the logger manager
-            //  -> active profiles (settings)
-            //  -> inactive profiles (settings)
-            //  -> offline (settings)
-            //  -> interactive (settings)
-            //  -> Settings
-            //     -> localRepository
-            //     -> interactiveMode
-            //     -> usePluginRegistry
-            //     -> offline
-            //     -> proxies
-            //     -> servers
-            //     -> mirrors
-            //     -> profiles
-            //     -> activeProfiles
-            //     -> pluginGroups
-            //  -> executionProperties
-            //  -> reactorFailureBehaviour: fail fast, fail at end, fail never
-            //  -> globalChecksumPolicy: fail, warn
-            //  -> showErrors (this is really CLI is but used inside Maven internals
-            //  -> recursive
-            //  -> updateSnapshots
-            //  -> useReactor
-            //  -> transferListener: in the CLI this is batch or console
-
-            // the local repository should just be a path and we should look here:
-            // in the system property
-            // user specified settings.xml
-            // default ~/.m2/settings.xml
-            // and with that maven internals should contruct the ArtifactRepository object
-
-            mavenEmbedder.execute( request );
-        }
-        catch ( MavenExecutionException e )
-        {
-            showFatalError( "Unable to configure the Maven application", e, showErrors );
+        MavenExecutionResult result = mavenEmbedder.execute( request );
+
+        if ( result.hasExceptions() )
+        {                        
+            showFatalError( "Unable to configure the Maven application", (Exception) result.getExceptions().get( 0 ), showErrors );
