o more reduction of the repository interface
o cleaning up the project builder


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@750677 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.ResolutionErrorHandler;
+    private Logger logger;
+    
+    @Requirement
-
+    
-    private Logger logger;
+    private ResolutionErrorHandler resolutionErrorHandler;    
-        File f = ( artifact.getFile() != null ) ? artifact.getFile() : new File( localRepository.getBasedir(), localRepository.pathOf( artifact ) );
-
+        ArtifactResolutionRequest request = new ArtifactResolutionRequest( artifact, localRepository, remoteRepositories );
+        ArtifactResolutionResult result = repositorySystem.resolve( request );
+                
-            repositorySystem.findModelFromRepository( artifact, remoteRepositories, localRepository );
+            resolutionErrorHandler.throwErrors( request, result );
-        catch ( ArtifactNotFoundException e )
-        {
-            throw new ProjectBuildingException( artifact.getId(), "Error finding project artifact.", e );
-        }
-        catch ( InvalidRepositoryException e )
-        {
-            throw new ProjectBuildingException( artifact.getId(), "Error with repository specified in project.", e );
-        }
-
+        
-        artifact.setFile( f );
+        artifact.setFile( artifact.getFile() );
-    private MavenProject readModelFromLocalPath( String projectId, File projectDescriptor, ArtifactRepository localRepository, List<ArtifactRepository> remoteRepositories,
-                                                 ProjectBuilderConfiguration config )
+    private MavenProject readModelFromLocalPath( String projectId, File pomFile, ArtifactRepository localRepository, List<ArtifactRepository> remoteRepositories, ProjectBuilderConfiguration config )
-        if ( projectDescriptor == null )
-        {
-            throw new IllegalArgumentException( "projectDescriptor: null, Project Id =" + projectId );
-        }
-
-            mavenProject = buildFromLocalPath( projectDescriptor, interpolatorProperties, localRepository, remoteRepositories, config, this );
+            mavenProject = buildFromLocalPath( pomFile, interpolatorProperties, localRepository, remoteRepositories, config, this );
-            throw new ProjectBuildingException( projectId, "File = " + projectDescriptor.getAbsolutePath(), e );
+            throw new ProjectBuildingException( projectId, "File = " + pomFile.getAbsolutePath(), e );
-
