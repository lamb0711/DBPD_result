Wiring plugin-as-extension back into the new extension scanning stuff.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@598720 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.model.Plugin;
+        // FIXME: Fix the log level here.
+        getLogger().info( "Checking " + model.getId() + " for extensions." );
+
+
+            List plugins = build.getPlugins();
+
+            if ( ( plugins != null ) && !plugins.isEmpty() )
+            {
+                for ( Iterator extensionIterator = plugins.iterator(); extensionIterator.hasNext(); )
+                {
+                    Plugin plugin = (Plugin) extensionIterator.next();
+
+                    if ( plugin.isExtensions() )
+                    {
+                        getLogger().debug( "Adding plugin: " + plugin.getKey() + " as an extension(from model: " + model.getId() + ")" );
+
+                        try
+                        {
+                            extensionManager.addPluginAsExtension( plugin, model, remoteRepositories, request );
+                        }
+                        catch ( ExtensionManagerException e )
+                        {
+                            throw new ExtensionScanningException( "Cannot resolve pre-scanned plugin artifact (for use as an extension): "
+                                + plugin.getKey() + ": " + e.getMessage(), model, plugin, e );
+                        }
+                    }
+                }
+            }
