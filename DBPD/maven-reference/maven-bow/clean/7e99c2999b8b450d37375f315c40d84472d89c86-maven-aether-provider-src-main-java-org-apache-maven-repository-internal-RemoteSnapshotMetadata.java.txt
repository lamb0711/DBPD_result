[MNG-4452] Metadata for snapshots should include classifier

o Added boolean system/execution property maven.metadata.legacy to enable 1.0.0 format to allow for interop with existing repo mans that could choke on the new format when processing it on the server side

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@995081 13f79535-47bb-0310-9956-ffa450edef68

-    public RemoteSnapshotMetadata( Artifact artifact )
+    private final boolean legacyFormat;
+
+    public RemoteSnapshotMetadata( Artifact artifact, boolean legacyFormat )
-        super( createMetadata( artifact ), null );
+        super( createMetadata( artifact, legacyFormat ), null );
+        this.legacyFormat = legacyFormat;
-    private RemoteSnapshotMetadata( Metadata metadata, File file )
+    private RemoteSnapshotMetadata( Metadata metadata, File file, boolean legacyFormat )
+        this.legacyFormat = legacyFormat;
-    private static Metadata createMetadata( Artifact artifact )
+    private static Metadata createMetadata( Artifact artifact, boolean legacy )
-        metadata.setModelVersion( "1.1.0" );
+        if ( !legacy )
+        {
+            metadata.setModelVersion( "1.1.0" );
+        }
-        return new RemoteSnapshotMetadata( metadata, file );
+        return new RemoteSnapshotMetadata( metadata, file, legacyFormat );
-        metadata.getVersioning().setSnapshotVersions( new ArrayList<SnapshotVersion>( versions.values() ) );
+        if ( !legacyFormat )
+        {
+            metadata.getVersioning().setSnapshotVersions( new ArrayList<SnapshotVersion>( versions.values() ) );
+        }
