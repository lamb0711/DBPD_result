Forcing collision of plugin-execution id's in non-inherited, direct-goal invocation scenarios.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@191621 13f79535-47bb-0310-9956-ffa450edef68

-
+        
+        // we don't have to force the collision exception for superModel here, it's already been done in getSuperModel()
-
+        
+            forcePluginExecutionIdCollision( current );
+
+    private void forcePluginExecutionIdCollision( Model model )
+    {
+        Build build = model.getBuild();
+        
+        if ( build != null )
+        {
+            List plugins = build.getPlugins();
+            
+            if ( plugins != null )
+            {
+                for ( Iterator it = plugins.iterator(); it.hasNext(); )
+                {
+                    Plugin plugin = (Plugin) it.next();
+                    
+                    // this will force an IllegalStateException, even if we don't have to do inheritance assembly.
+                    plugin.getExecutionsAsMap();
+                }
+            }
+        }
+    }
+    
+
-        return readModel( url );
+        Model superModel = readModel( url );
+        
+        forcePluginExecutionIdCollision( superModel );
+
+        return superModel;
