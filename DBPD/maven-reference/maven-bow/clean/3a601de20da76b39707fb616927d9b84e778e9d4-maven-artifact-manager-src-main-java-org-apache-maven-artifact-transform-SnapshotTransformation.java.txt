- ensure we only blacklist a repository on resolve, not deploy
- fail if offline when attempting to deploy or retrieve essential metadata

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@307317 13f79535-47bb-0310-9956-ffa450edef68

-            getLogger().debug( "System is offline. Cannot resolve metadata:\n" + metadata.extendedToString() + "\n\n" );
-
-            getLogger().info( "System is offline. Assuming build number of 0 for " + metadata.getGroupId() + ":" +
-                metadata.getArtifactId() + " snapshot." );
-
-            return 0;
+            // build number is a required feature for metadata consistency
+            throw new ArtifactMetadataRetrievalException(
+                "System is offline. Cannot resolve metadata:\n" + metadata.extendedToString() + "\n\n" );
