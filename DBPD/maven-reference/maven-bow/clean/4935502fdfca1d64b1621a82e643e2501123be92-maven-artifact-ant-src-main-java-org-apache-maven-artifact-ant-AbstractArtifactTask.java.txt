PR: MNG-586
o update ant tasks to latest artifact library changes
o allow addition of extra wagons
o remove wagon-ssh and wagon-scm from depoloyed jar

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@239660 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.maven.profiles.activation.ProfileActivationUtils;
-    private static ArtifactRepositoryPolicy buildArtifactRepositoryPolicy(
-        RepositoryPolicy policy, String defaultUpdatePolicy, String defaultChecksumPolicy )
+    private static ArtifactRepositoryPolicy buildArtifactRepositoryPolicy( RepositoryPolicy policy,
+                                                                           String defaultUpdatePolicy,
+                                                                           String defaultChecksumPolicy )
-            r.setSnapshots( convertRepositoryPolicy( pomRepository.getSnapshots() ) );
+            r.addSnapshots( convertRepositoryPolicy( pomRepository.getSnapshots() ) );
-            r.setReleases( convertRepositoryPolicy( pomRepository.getReleases() ) );
+            r.addReleases( convertRepositoryPolicy( pomRepository.getReleases() ) );
-    private synchronized Embedder getEmbedder()
+    protected static RemoteRepository getDefaultRemoteRepository()
+    {
+        // TODO: could we utilise the super POM for this?
+        RemoteRepository remoteRepository = new RemoteRepository();
+        remoteRepository.setUrl( "http://repo1.maven.org/maven2" );
+        return remoteRepository;
+    }
+
+    protected synchronized Embedder getEmbedder()
-            System.setProperty( ProfileActivationUtils.ACTIVE_PROFILE_IDS, profiles );
+//            System.setProperty( ProfileActivationUtils.ACTIVE_PROFILE_IDS, profiles );
