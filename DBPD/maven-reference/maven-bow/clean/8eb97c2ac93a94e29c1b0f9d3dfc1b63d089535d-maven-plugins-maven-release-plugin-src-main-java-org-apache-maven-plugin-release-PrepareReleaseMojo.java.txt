Fix tag creation. We need to store in release.properties the tag choose by user

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@178310 13f79535-47bb-0310-9956-ffa450edef68

+    private String userTag;
+
-    private String getTagLabel()
+    private String getDefaultTagLabel()
+    private String getTagLabel()
+        throws MojoExecutionException
+    {
+        if ( userTag == null )
+        {
+            userTag = getDefaultTagLabel();
+
+            try
+            {
+                ScmBean scm = getScm();
+
+                if ( scm.getTag() == null )
+                {
+                    getLog().info( "What tag name should be used? [ " + tag + " ]" );
+
+                    InputHandler handler = (InputHandler) getContainer().lookup( InputHandler.ROLE );
+
+                    String inputTag = handler.readLine();
+
+                    if ( !StringUtils.isEmpty( inputTag ) )
+                    {
+                        userTag = inputTag;
+                    }
+                }
+                else
+                {
+                    userTag = scm.getTag();
+                }
+            }
+            catch ( Exception e )
+            {
+                throw new MojoExecutionException( "An error is occurred in the tag process.", e );
+            }
+        }
+
+        return userTag;
+    }
+
-            scm.setWorkingDirectory( basedir );
-
-            if ( scm.getTag() == null )
-            {
-                getLog().info( "What tag name should be used? [ " + tag + " ]" );
-
-                InputHandler handler = (InputHandler) getContainer().lookup( InputHandler.ROLE );
-
-                String inputTag = handler.readLine();
-
-                if ( !StringUtils.isEmpty( inputTag ) )
-                {
-                    tag = inputTag;
-                }
-
-                scm.setTag( tag );
-            }
+            scm.setTag( tag );
