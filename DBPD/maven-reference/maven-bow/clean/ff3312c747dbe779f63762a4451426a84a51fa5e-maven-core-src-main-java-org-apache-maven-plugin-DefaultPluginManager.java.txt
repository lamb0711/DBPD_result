Need to interpolate the plugin configurations that are stored in MojoExecution instances, created during build planning.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@672794 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.project.interpolation.ModelInterpolator;
+import org.codehaus.plexus.util.xml.Xpp3DomBuilder;
+import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
+import java.io.IOException;
+import java.io.StringReader;
+    protected ModelInterpolator modelInterpolator;
+
-            // make a defensive copy, to keep things from getting polluted.
-            dom = new Xpp3Dom( dom );
+            try
+            {
+                String interpolatedDom = modelInterpolator.interpolate( String.valueOf( dom ),
+                                                                        project.getModel(),
+                                                                        project.getBasedir(),
+                                                                        session.getProjectBuilderConfiguration(),
+                                                                        getLogger().isDebugEnabled() );
+
+                dom = Xpp3DomBuilder.build( new StringReader( interpolatedDom ) );
+            }
+            catch ( ModelInterpolationException e )
+            {
+                throw new PluginManagerException(
+                                                  mojoDescriptor,
+                                                  project,
+                                                  "Failed to calculate concrete state for configuration of: "
+                                                                  + mojoDescriptor.getHumanReadableKey(),
+                                                  e );
+            }
+            catch ( XmlPullParserException e )
+            {
+                throw new PluginManagerException(
+                                                  mojoDescriptor,
+                                                  project,
+                                                  "Failed to calculate concrete state for configuration of: "
+                                                                  + mojoDescriptor.getHumanReadableKey(),
+                                                  e );
+            }
+            catch ( IOException e )
+            {
+                throw new PluginManagerException(
+                                                  mojoDescriptor,
+                                                  project,
+                                                  "Failed to calculate concrete state for configuration of: "
+                                                                  + mojoDescriptor.getHumanReadableKey(),
+                                                  e );
+            }
