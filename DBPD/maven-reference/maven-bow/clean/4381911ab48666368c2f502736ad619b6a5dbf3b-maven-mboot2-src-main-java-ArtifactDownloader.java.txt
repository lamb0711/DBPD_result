o installing the parent pom
o don't download things more than once during the bootstrap


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@162876 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Set;
+import java.util.HashSet;
+    private Set downloadedArtifacts = new HashSet();
+
-                File destinationFile = new File( mavenRepoLocal, file );
-
-                // The directory structure for this project may
-                // not exists so create it if missing.
-                File directory = destinationFile.getParentFile();
-
-                if ( directory.exists() == false )
+                if ( !downloadedArtifacts.contains( file ) )
-                    directory.mkdirs();
-                }
+                    File destinationFile = new File( mavenRepoLocal, file );
+                    // The directory structure for this project may
+                    // not exists so create it if missing.
+                    File directory = destinationFile.getParentFile();
-                if ( destinationFile.exists() && file.indexOf( SNAPSHOT_SIGNATURE ) < 0 )
-                {
-                    continue;
-                }
+                    if ( directory.exists() == false )
+                    {
+                        directory.mkdirs();
+                    }
-                //log( "Downloading dependency: " + file );
+                    if ( destinationFile.exists() && file.indexOf( SNAPSHOT_SIGNATURE ) < 0 )
+                    {
+                        continue;
+                    }
-                getRemoteArtifact( file, destinationFile );
+                    getRemoteArtifact( file, destinationFile );
-                if ( !destinationFile.exists() )
-                {
-                    throw new Exception( "Failed to download " + file );
+                    if ( !destinationFile.exists() )
+                    {
+                        throw new Exception( "Failed to download " + file );
+                    }
+
+                    downloadedArtifacts.add( file );
