PR: MNG-1296
Submitted by: Edwin Punzalan
Reviewed by:  Brett Porter
use scope filter and optional flag instead of hard coding


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@327955 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.maven.artifact.resolver.filter.ScopeArtifactFilter;
-            // provided scope
-            if ( !isArtifactRegistered( artifact, allModules ) && !Artifact.SCOPE_TEST.equals( artifact.getScope() ) &&
-                !Artifact.SCOPE_PROVIDED.equals( artifact.getScope() ) )
+            // provided scope, not is it optional
+            ScopeArtifactFilter filter = new ScopeArtifactFilter( Artifact.SCOPE_RUNTIME );
+            if ( !isArtifactRegistered( artifact, allModules ) && !artifact.isOptional() && filter.include( artifact ) )
