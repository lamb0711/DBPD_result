PR: MNG-505
range and soft requirement intersections

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@219633 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
-        // TODO
+        List r1 = this.restrictions;
+        List r2 = restriction.restrictions;
+        List restrictions = Collections.EMPTY_LIST;
+        if ( !r1.isEmpty() || !r2.isEmpty() )
+        {
+            // TODO: amalgamate
+            restrictions = new ArrayList( r1.size() + r2.size() );
+            restrictions.addAll( r1 );
+            restrictions.addAll( r2 );
-        return new VersionRange( version, Collections.EMPTY_LIST );
+            boolean found = false;
+            for ( Iterator i = restrictions.iterator(); i.hasNext() && !found; )
+            {
+                Restriction r = (Restriction) i.next();
+
+                if ( r.containsVersion( version ) )
+                {
+                    found = true;
+                }
+            }
+
+            if ( !found )
+            {
+                version = null;
+            }
+        }
+
+        return new VersionRange( version, restrictions );
-        if ( v1.compareTo( v2 ) > 0 )
+        if ( v1 == null )
+        {
+            return v2;
+        }
+        if ( v2 == null )
+        {
+            return v1;
+        }
+        else if ( v1.compareTo( v2 ) > 0 )
