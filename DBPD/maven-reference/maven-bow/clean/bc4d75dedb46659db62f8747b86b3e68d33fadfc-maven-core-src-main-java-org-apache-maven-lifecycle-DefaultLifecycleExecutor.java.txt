must initialise the whole plugin, even if already loaded, as only some mojos may have been processed


git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@163453 13f79535-47bb-0310-9956-ffa450edef68

-        if ( pluginManager.verifyPlugin( pluginId, mavenSession ) )
+        pluginManager.verifyPlugin( pluginId, mavenSession );
+        PluginDescriptor pluginDescriptor = pluginManager.getPluginDescriptor( pluginId );
+        for ( Iterator j = pluginDescriptor.getMojos().iterator(); j.hasNext(); )
-            PluginDescriptor pluginDescriptor = pluginManager.getPluginDescriptor( pluginId );
-            for ( Iterator j = pluginDescriptor.getMojos().iterator(); j.hasNext(); )
-            {
-                MojoDescriptor mojoDescriptor = (MojoDescriptor) j.next();
+            MojoDescriptor mojoDescriptor = (MojoDescriptor) j.next();
-                // TODO: check if the goal exists in the configuration and is disabled
-                if ( mojoDescriptor.getPhase() != null )
-                {
-                    Phase phase = (Phase) phaseMap.get( mojoDescriptor.getPhase() );
-                    phase.getGoals().add( mojoDescriptor.getId() );
-                }
+            // TODO: check if the goal exists in the configuration and is disabled
+            if ( mojoDescriptor.getPhase() != null )
+            {
+                Phase phase = (Phase) phaseMap.get( mojoDescriptor.getPhase() );
+                phase.getGoals().add( mojoDescriptor.getId() );
+
