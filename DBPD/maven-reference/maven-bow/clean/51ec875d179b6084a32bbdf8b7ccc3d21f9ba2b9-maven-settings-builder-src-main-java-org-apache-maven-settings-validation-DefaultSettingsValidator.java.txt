[MNG-5159] Extend validation of settings.xml to check for uniqueness of id elements

git-svn-id: https://svn.apache.org/repos/asf/maven/maven-3/trunk@1159534 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashSet;
+import java.util.Set;
+            Set<String> serverIds = new HashSet<String>();
+
+
+                if ( !serverIds.add( server.getId() ) )
+                {
+                    addViolation( problems, Severity.WARNING, "servers.server.id", null,
+                                  "must be unique but found duplicate server with id " + server.getId() );
+                }
+            Set<String> profileIds = new HashSet<String>();
+
-                validateRepositories( problems, profile.getRepositories(), "repositories.repository" );
-                validateRepositories( problems, profile.getPluginRepositories(),
-                                      "pluginRepositories.pluginRepository" );
+                if ( !profileIds.add( profile.getId() ) )
+                {
+                    addViolation( problems, Severity.WARNING, "profiles.profile.id", null,
+                                  "must be unique but found duplicate profile with id " + profile.getId() );
+                }
+
+                String prefix = "profiles.profile[" + profile.getId() + "].";
+
+                validateRepositories( problems, profile.getRepositories(), prefix + "repositories.repository" );
+                validateRepositories( problems, profile.getPluginRepositories(), prefix
+                    + "pluginRepositories.pluginRepository" );
+        Set<String> repoIds = new HashSet<String>();
+
+            if ( !repoIds.add( repository.getId() ) )
+            {
+                addViolation( problems, Severity.WARNING, prefix + ".id", null,
+                              "must be unique but found duplicate repository with id " + repository.getId() );
+            }
+
