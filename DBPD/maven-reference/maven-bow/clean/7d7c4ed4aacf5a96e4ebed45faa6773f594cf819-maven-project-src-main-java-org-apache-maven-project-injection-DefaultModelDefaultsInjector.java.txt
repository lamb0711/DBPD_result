Fixing per MNG-357. Inheritance/injection of pluginManagement did not follow the same conventions intended and established by that of dependencyManagement. This fix makes the two more consistent, and allows for more local control over plugin configuration.

git-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk@165016 13f79535-47bb-0310-9956-ffa450edef68

-
-        Map goalMap = new TreeMap();
-
+        
-        if ( pluginGoals != null )
+        if( pluginGoals == null || pluginGoals.isEmpty() )
-            for ( Iterator it = pluginGoals.iterator(); it.hasNext(); )
-            {
-                Goal goal = (Goal) it.next();
-
-                goalMap.put( goal.getId(), goal );
-            }
+            plugin.setGoals( def.getGoals() );
-
-        List defGoals = def.getGoals();
-        if ( defGoals != null )
-        {
-            for ( Iterator it = defGoals.iterator(); it.hasNext(); )
-            {
-                Goal defaultGoal = (Goal) it.next();
-
-                Goal localGoal = (Goal) goalMap.get( defaultGoal.getId() );
-                if ( localGoal == null )
-                {
-                    goalMap.put( defaultGoal.getId(), defaultGoal );
-                }
-                else
-                {
-                    Xpp3Dom goalConfiguration = (Xpp3Dom) localGoal.getConfiguration();
-                    Xpp3Dom defaultGoalConfiguration = (Xpp3Dom) defaultGoal.getConfiguration();
-                    localGoal.setConfiguration( Xpp3Dom.mergeXpp3Dom( goalConfiguration, defaultGoalConfiguration ) );
-                }
-            }
-        }
-
-        plugin.setGoals( new ArrayList( goalMap.values() ) );
-
+        
-        Xpp3Dom defaultPluginConfiguration = (Xpp3Dom) def.getConfiguration();
-        plugin.setConfiguration( Xpp3Dom.mergeXpp3Dom( pluginConfiguration, defaultPluginConfiguration ) );
+        if( pluginConfiguration == null )
+        {
+            plugin.setConfiguration( def.getConfiguration() );
+        }
