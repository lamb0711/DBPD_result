HADOOP-4952. Add new improved file system interface FileContext for the application writer. Contributed by Sanjay Radia.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@816398 13f79535-47bb-0310-9956-ffa450edef68

+  /**
+   * Construct a path from a URI
+   */
+  public Path(URI aUri) {
+    uri = aUri;
+  }
+  
-  /** True if the directory of this path is absolute. */
-  public boolean isAbsolute() {
+  /**
+   *  True if the path component (i.e. directory) of this URI is absolute.
+   */
+  public boolean isUriPathAbsolute() {
+   }
+  
+  /** True if the directory of this path is absolute. */
+  /**
+   * There is some ambiguity here. An absolute path is a slash
+   * relative name without a scheme or an authority.
+   * So either this method was incorrectly named or its
+   * implementation is incorrect.
+   */
+  public boolean isAbsolute() {
+     return isUriPathAbsolute();
-  /** Returns a qualified path object. */
+  
+  /**
+   *  Returns a qualified path object.
+   *  
+   *  Deprecated - use {@link #makeQualified(URI, Path)}
+   */
+ 
+  @Deprecated
+    return makeQualified(fs.getUri(), fs.getWorkingDirectory());
+  }
+  
+  
+  /** Returns a qualified path object. */
+  public Path makeQualified(URI defaultUri, Path workingDir ) {
-      path = new Path(fs.getWorkingDirectory(), this);
+      path = new Path(workingDir, this);
-    URI fsUri = fs.getUri();
-        (authority != null || fsUri.getAuthority() == null))
+        (authority != null || defaultUri.getAuthority() == null))
-      scheme = fsUri.getScheme();
+      scheme = defaultUri.getScheme();
-      authority = fsUri.getAuthority();
+      authority = defaultUri.getAuthority();

INS31 INS31 INS31 INS29 INS83 INS42 INS44 INS8 UPD42 INS29 INS83 INS39 INS42 INS8 INS29 INS78 INS83 MOV43 INS42 MOV44 INS8 INS44 INS44 INS65 INS43 INS42 INS21 INS65 INS41 INS65 INS42 INS41 INS43 INS42 INS43 INS42 INS66 INS42 INS7 UPD66 INS66 INS66 INS66 INS66 INS32 INS66 INS66 INS65 INS32 INS42 INS42 INS42 INS42 INS42 INS68 INS42 MOV32 MOV32 INS42 INS69 INS69 MOV43 INS43 INS42 INS43 INS42 UPD42 UPD42 INS42 UPD42 DEL42 DEL59 DEL60