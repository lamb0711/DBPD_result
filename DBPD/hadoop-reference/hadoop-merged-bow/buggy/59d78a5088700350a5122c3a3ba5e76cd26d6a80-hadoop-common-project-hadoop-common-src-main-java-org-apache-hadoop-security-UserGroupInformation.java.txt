HADOOP-14987. Improve KMSClientProvider log around delegation token checking. Contributed by Xiaoyu Yao and Xiao Chen.

-  public static void logAllUserInfo(UserGroupInformation ugi) throws
-      IOException {
-    if (LOG.isDebugEnabled()) {
-      LOG.debug("UGI: " + ugi);
-      if (ugi.getRealUser() != null) {
-        LOG.debug("+RealUGI: " + ugi.getRealUser());
-      }
-      LOG.debug("+LoginUGI: " + ugi.getLoginUser());
+  /**
+   * Log current UGI and token information into specified log.
+   * @param ugi - UGI
+   * @throws IOException
+   */
+  @InterfaceAudience.LimitedPrivate({"HDFS", "KMS"})
+  @InterfaceStability.Unstable
+  public static void logUserInfo(Logger log, String caption,
+      UserGroupInformation ugi) throws IOException {
+    if (log.isDebugEnabled()) {
+      log.debug(caption + " UGI: " + ugi);
-        LOG.debug("+UGI token:" + token);
+        log.debug("+token:" + token);
+  /**
+   * Log all (current, real, login) UGI and token info into specified log.
+   * @param ugi - UGI
+   * @throws IOException
+   */
+  @InterfaceAudience.LimitedPrivate({"HDFS", "KMS"})
+  @InterfaceStability.Unstable
+  public static void logAllUserInfo(Logger log, UserGroupInformation ugi) throws
+      IOException {
+    if (log.isDebugEnabled()) {
+      logUserInfo(log, "Current", ugi.getCurrentUser());
+      if (ugi.getRealUser() != null) {
+        logUserInfo(log, "Real", ugi.getRealUser());
+      }
+      logUserInfo(log, "Login", ugi.getLoginUser());
+    }
+  }
+
+  /**
+   * Log all (current, real, login) UGI and token info into UGI debug log.
+   * @param ugi - UGI
+   * @throws IOException
+   */
+  public static void logAllUserInfo(UserGroupInformation ugi) throws
+      IOException {
+    logAllUserInfo(LOG, ugi);
+  }
+

INS31 INS31 INS29 INS79 INS78 INS83 INS83 INS39 INS42 INS44 INS44 INS44 INS43 INS8 INS29 INS79 INS78 INS44 INS29 INS83 INS83 INS39 INS42 INS44 INS43 INS8 INS65 INS65 INS65 INS40 INS4 INS40 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS25 INS65 INS65 INS65 INS40 INS4 INS40 INS43 INS42 INS65 INS65 INS65 INS43 INS42 INS42 INS21 INS66 INS42 INS66 INS42 INS45 INS45 INS42 INS42 INS42 INS32 INS8 INS66 INS42 INS66 INS42 INS45 INS45 INS42 INS66 INS42 INS66 INS42 INS42 INS32 INS42 INS42 INS21 MOV70 UPD42 INS42 INS42 INS42 INS32 INS42 INS42 INS27 UPD42 UPD42 INS45 INS32 UPD42 UPD42 INS45 MOV32 INS42 INS45 INS42 INS42 INS42 UPD42 UPD42 UPD42 INS45 MOV32 UPD45 DEL45 DEL42 DEL27 DEL45 DEL27 DEL45 DEL27