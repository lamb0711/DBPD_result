HDFS-1073. Redesign the NameNode's storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.zip.Checksum;
+import org.apache.hadoop.io.DataOutputBuffer;
+import org.apache.hadoop.io.Writable;
+
-  /** {@inheritDoc} */
+  /**
+   * Close the journal.
+   * @throws IOException if the journal can't be closed,
+   *         or if there are unflushed edits
+   */
+   * Close the stream without necessarily flushing any pending data.
+   * This may be called after a previous write or close threw an exception.
+   */
+  abstract public void abort() throws IOException;
+  
+  /**
-  boolean isOperationSupported(byte op) {
-    return true;
-  }
-

INS26 INS26 INS26 MOV31 INS40 INS40 INS40 INS29 INS83 INS83 UPD39 UPD42 INS43 INS65 INS65 INS65 INS42 INS66 INS42 UPD66 MOV66 INS66 INS66 INS66 DEL65 DEL65 DEL39 DEL42 DEL44 DEL9 DEL41 DEL8