HADOOP-10870. Failed to load OpenSSL cipher error logs on systems with old openssl versions (cmccabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/fs-encryption@1612440 13f79535-47bb-0310-9956-ffa450edef68

-    boolean opensslLoaded = false;
+    boolean openSslLoaded = false;
+    String openSslDetail = "";
-    String opensslLibraryName = "";
-      opensslLoaded = NativeCodeLoader.buildSupportsOpenssl() &&
-          OpensslCipher.isNativeCodeLoaded();
-      if (opensslLoaded) {
-        opensslLibraryName = OpensslCipher.getLibraryName();
+      if (OpensslCipher.getLoadingFailureReason() != null) {
+        openSslDetail = OpensslCipher.getLoadingFailureReason();
+        openSslLoaded = false;
+      } else {
+        openSslDetail = OpensslCipher.getLibraryName();
+        openSslLoaded = true;
-    System.out.printf("openssl: %b %s\n", opensslLoaded, opensslLibraryName);
+    System.out.printf("openssl: %b %s\n", openSslLoaded, openSslDetail);

MOV60 MOV60 UPD42 UPD42 INS25 UPD42 UPD42 INS27 INS8 MOV8 INS32 INS33 MOV21 INS21 INS21 INS42 INS42 INS7 INS7 UPD42 INS32 INS42 INS9 UPD42 INS42 INS9 MOV42 UPD42 MOV42 DEL42 DEL42 DEL32 DEL32 DEL27 DEL42 DEL25