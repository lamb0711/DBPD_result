HADOOP-6165. Add metadata to Serializations.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@810756 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
-import org.apache.hadoop.io.serializer.Deserializer;
-import org.apache.hadoop.io.serializer.Serialization;
+import org.apache.hadoop.io.serializer.DeserializerBase;
+import org.apache.hadoop.io.serializer.SerializationBase;
-import org.apache.hadoop.io.serializer.Serializer;
+import org.apache.hadoop.io.serializer.SerializerBase;
- * serialized version of the objects. The {@link Serializer} and
- * {@link Deserializer} are obtained from the {@link SerializationFactory}.
+ * serialized version of the objects. The {@link SerializerBase} and
+ * {@link DeserializerBase} are obtained from the {@link SerializationFactory}.
-  private Serializer<T> serializer;
+  private SerializerBase<T> serializer;
-  private Deserializer<T> deserializer;
+  private DeserializerBase<T> deserializer;
-    this.serializer = factory.getSerializer(c);
-    this.deserializer = factory.getDeserializer(c);
+    Map<String, String> metadata = SerializationBase.getMetadataFromClass(c);
+    this.serializer = factory.getSerializer(metadata);
+    this.deserializer = factory.getDeserializer(metadata);
-   * {@link Serialization} classes. 
+   * {@link SerializationBase} classes. 
-   * {@link Serialization} classes.
+   * {@link SerializationBase} classes.
-   * {@link Serialization} classes.         
+   * {@link SerializationBase} classes.         
-   * {@link Serialization} classes.
+   * {@link SerializationBase} classes.

INS26 INS40 UPD40 UPD40 UPD40 UPD74 UPD74 UPD43 UPD43 INS60 UPD42 UPD42 UPD42 UPD42 INS74 INS59 INS43 INS43 INS43 INS42 INS32 UPD42 UPD42 UPD42 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42