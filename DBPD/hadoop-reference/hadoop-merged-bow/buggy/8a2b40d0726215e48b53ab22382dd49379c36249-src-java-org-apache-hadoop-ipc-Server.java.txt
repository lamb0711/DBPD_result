HADOOP-6920. Metrics instrumentation to move new metrics2 framework. Contributed by Luke Lu.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1101682 13f79535-47bb-0310-9956-ffa450edef68

-          rpcMetrics.authenticationFailures.inc();
+          rpcMetrics.incrAuthenticationFailures();
-          rpcMetrics.authenticationSuccesses.inc();
+          rpcMetrics.incrAuthenticationSuccesses();
+          rpcDetailedMetrics.init(protocol);
-        rpcMetrics.authorizationSuccesses.inc();
+        rpcMetrics.incrAuthorizationSuccesses();
-        rpcMetrics.authorizationFailures.inc();
+        rpcMetrics.incrAuthorizationFailures();
-    this.rpcMetrics = new RpcMetrics(serverName,
-                          Integer.toString(this.port), this);
-    this.rpcDetailedMetrics = new RpcDetailedMetrics(serverName,
-                            Integer.toString(this.port));
+    this.rpcMetrics = RpcMetrics.create(this);
+    this.rpcDetailedMetrics = RpcDetailedMetrics.create(this.port);
-      rpcMetrics.sentBytes.inc(count);
+      rpcMetrics.incrSentBytes(count);
-      rpcMetrics.receivedBytes.inc(count);
+      rpcMetrics.incrReceivedBytes(count);

INS32 MOV32 INS42 INS42 INS52 UPD42 UPD42 INS42 UPD42 INS42 UPD42 INS21 INS42 UPD42 INS32 INS42 UPD42 INS42 UPD42 INS42 INS42 INS42 INS42 UPD42 DEL40 DEL40 DEL40 DEL40 DEL42 DEL43 DEL42 DEL42 DEL42 DEL52 DEL42 DEL22 DEL32 DEL52 DEL14 DEL42 DEL43 DEL42 DEL14 DEL40 DEL40