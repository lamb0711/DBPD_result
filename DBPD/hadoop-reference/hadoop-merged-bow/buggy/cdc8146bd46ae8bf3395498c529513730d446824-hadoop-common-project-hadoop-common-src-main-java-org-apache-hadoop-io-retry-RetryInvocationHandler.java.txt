HADOOP-8068. void methods can swallow exceptions when going through failover path. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1244628 13f79535-47bb-0310-9956-ffa450edef68

-          LOG.warn("Exception while invoking " + method.getName()
-                   + " of " + currentProxy.getClass() + ". Not retrying.", e);
-          if (!method.getReturnType().equals(Void.TYPE)) {
-            throw e; // non-void methods can't fail without an exception
+          if (action.reason != null) {
+            LOG.warn("Exception while invoking " + 
+                currentProxy.getClass() + "." + method.getName() +
+                ". Not retrying because " + action.reason, e);
-          return null;
+          throw e;

INS8 INS25 MOV53 INS27 MOV8 INS40 INS33 MOV32 MOV45 UPD45 UPD45 INS40 DEL42 DEL42 DEL32 DEL42 DEL40 DEL32 DEL38 DEL8 DEL25 DEL33 DEL41