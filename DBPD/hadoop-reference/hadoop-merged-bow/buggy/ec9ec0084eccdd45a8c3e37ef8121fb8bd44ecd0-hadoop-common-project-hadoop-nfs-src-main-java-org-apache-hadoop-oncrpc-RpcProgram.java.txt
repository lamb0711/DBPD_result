HDFS-5469. Add configuration property for the sub-directroy export path. Contributed by Brandon Li

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1540443 13f79535-47bb-0310-9956-ffa450edef68

-  private final int port;
+  private int port; // Ephemeral port is chosen later
-  public void register(int transport) {
+  public void register(int transport, int boundPort) {
+    if (boundPort != port) {
+      LOG.info("The bound port is " + boundPort
+          + ", different with configured port " + port);
+      port = boundPort;
+    }
-      register(vers, transport);
+      PortmapMapping mapEntry = new PortmapMapping(progNumber, vers, transport,
+          port);
+      register(mapEntry);
-   * Register this program with the local portmapper.
-   */
-  private void register(int progVersion, int transport) {
-    PortmapMapping mapEntry = new PortmapMapping(progNumber, progVersion,
-        transport, port);
-    register(mapEntry);
-  }
-  
-  /**

MOV29 UPD83 MOV44 UPD42 INS25 MOV24 INS27 INS8 INS42 INS42 INS21 MOV21 INS60 INS21 INS32 INS7 MOV43 INS59 MOV32 INS42 INS42 INS27 INS42 INS42 INS42 INS14 INS45 INS42 INS45 INS42 MOV43 INS42 INS42 INS42 INS42 DEL83 DEL83 DEL39 DEL42 DEL8 DEL31 DEL66 DEL65 DEL29 DEL39 DEL42 DEL44 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL42 DEL14 DEL59 DEL60