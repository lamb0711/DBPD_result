HADOOP-6904. Support method based RPC compatiblity. Contributed by Hairong Kuang.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1064919 13f79535-47bb-0310-9956-ffa450edef68

+   * @throws IOException if any IO error occurs
-  public long getProtocolVersion(String protocol, 
+  @Deprecated
+  public long getProtocolVersion(String protocol,
+
+  /**
+   * Return protocol version corresponding to protocol interface.
+   * @param protocol The classname of the protocol interface
+   * @param clientVersion The version of the protocol that the client speaks
+   * @param clientMethodsHash the hashcode of client protocol methods
+   * @return the server protocol signature containing its version and
+   *         a list of its supported methods
+   * @see ProtocolSignature#getProtocolSigature(VersionedProtocol, String, 
+   *                long, int) for a default implementation
+   */
+  public ProtocolSignature getProtocolSignature(String protocol, 
+                                 long clientVersion,
+                                 int clientMethodsHash) throws IOException;

INS31 INS78 INS29 INS83 INS43 INS42 INS44 INS44 INS44 INS43 INS65 INS42 INS65 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS39 INS42 INS39 INS42 INS42 INS42 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS66 INS66 INS68 INS66 INS42 INS42 INS42 INS69 INS69 INS69 INS69 INS43 INS43 INS39 INS39 INS42 INS42