HADOOP-6581. Add authenticated TokenIdentifiers to UGI so that they can be used for authorization. Kan Zhang and Jitendra Pandey via jghoman.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@948573 13f79535-47bb-0310-9956-ffa450edef68

-        return tokenId.getUser();
+        UserGroupInformation ugi = tokenId.getUser();
+        if (ugi == null) {
+          throw new AccessControlException(
+              "Can't retrieve username from tokenIdentifier.");
+        }
+        ugi.addTokenIdentifier(tokenId);
+        return ugi;
-  public synchronized void start() throws IOException {
+  public synchronized void start() {

INS60 INS25 INS21 INS43 INS59 INS27 INS8 INS32 INS42 INS42 INS42 MOV32 INS42 INS33 INS53 INS42 INS42 INS42 INS14 INS43 INS45 INS42 DEL42 DEL43