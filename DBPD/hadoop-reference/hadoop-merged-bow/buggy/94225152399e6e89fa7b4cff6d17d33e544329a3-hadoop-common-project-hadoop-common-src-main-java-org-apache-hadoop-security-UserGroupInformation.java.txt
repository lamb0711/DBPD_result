HADOOP-13442. Optimize UGI group lookups. Contributed by Daryn Sharp.

-import java.util.LinkedHashSet;
-    String[] groups = getGroupNames();
-    if (groups.length == 0) {
+    List<String> groups = getGroups();
+    if (groups.isEmpty()) {
-    return groups[0];
+    return groups.get(0);
+   * Get the group names for this user. {@ #getGroups(String)} is less
+   * expensive alternative when checking for a contained element.
+   * @return the list of users with the primary group first. If the command
+   *    fails, it returns an empty list.
+   */
+  public String[] getGroupNames() {
+    List<String> groups = getGroups();
+    return groups.toArray(new String[groups.size()]);
+  }
+
+  /**
-  public synchronized String[] getGroupNames() {
+  public List<String> getGroups() {
-      Set<String> result = new LinkedHashSet<String>
-        (groups.getGroups(getShortUserName()));
-      return result.toArray(new String[result.size()]);
+      return groups.getGroups(getShortUserName());
-      return StringUtils.emptyStringArray;
+      return Collections.emptyList();
-  
+

INS31 INS29 INS83 MOV5 INS42 MOV8 UPD74 MOV74 UPD42 INS65 INS65 UPD43 INS74 INS32 INS32 INS66 INS65 INS66 INS66 INS66 INS66 UPD74 UPD42 INS8 INS43 INS43 INS42 INS42 INS42 INS42 INS34 INS66 UPD43 UPD42 INS32 UPD42 INS41 INS42 MOV42 UPD42 UPD42 INS42 MOV32 UPD42 INS32 INS42 INS42 DEL40 DEL26 DEL43 DEL85 DEL5 DEL40 DEL34 DEL27 DEL42 DEL34 DEL2 DEL14 DEL83 DEL40