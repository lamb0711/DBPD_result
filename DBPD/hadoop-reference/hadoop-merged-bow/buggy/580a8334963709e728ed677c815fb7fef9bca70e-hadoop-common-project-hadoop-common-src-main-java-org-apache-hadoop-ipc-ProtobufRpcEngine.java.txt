HADOOP-13483. Optimize IPC server protobuf decoding. Contributed by Daryn Sharp.

+import org.apache.hadoop.ipc.RpcWritable;
-        RPC.RpcKind.RPC_PROTOCOL_BUFFER, RpcRequestWrapper.class,
+        RPC.RpcKind.RPC_PROTOCOL_BUFFER, RpcWritable.Buffer.class,
-        RpcRequestWrapper request = (RpcRequestWrapper) writableRequest;
-        RequestHeaderProto rpcRequest = request.requestHeader;
+        RpcWritable.Buffer request = (RpcWritable.Buffer) writableRequest;
+        RequestHeaderProto rpcRequest =
+            request.getValue(RequestHeaderProto.getDefaultInstance());
-        
-        
+
-        Message param = prototype.newBuilderForType()
-            .mergeFrom(request.theRequestRead).build();
-        
+        Message param = request.getValue(prototype);
+
-        return new RpcResponseWrapper(result);
+        return RpcWritable.wrap(result);

INS26 INS40 UPD43 UPD43 INS32 INS40 INS40 INS32 INS32 INS42 INS42 INS42 UPD43 INS42 INS42 INS32 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS40 INS42 INS42 DEL42 DEL42 DEL42 DEL40 DEL32 DEL40 DEL32 DEL42 DEL32 DEL42 DEL43 DEL42 DEL14