HADOOP-8924. Add maven plugin alternative to shell script to save package-info.java. Contributed by Alejandro Abdelnur and Chris Nauroth.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1435380 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.YarnVersionAnnotation;
+import org.apache.hadoop.util.VersionInfo;
-public class YarnVersionInfo {
+public class YarnVersionInfo extends VersionInfo {
-  private static Package myPackage;
-  private static YarnVersionAnnotation version;
-  
-  static {
-    myPackage = YarnVersionAnnotation.class.getPackage();
-    version = myPackage.getAnnotation(YarnVersionAnnotation.class);
-  }
+  private static YarnVersionInfo YARN_VERSION_INFO = new YarnVersionInfo();
-  /**
-   * Get the meta-data for the Yarn package.
-   * @return
-   */
-  static Package getPackage() {
-    return myPackage;
+  protected YarnVersionInfo() {
+    super("yarn");
-  
-    return version != null ? version.version() : "Unknown";
+    return YARN_VERSION_INFO._getVersion();
-    return version != null ? version.revision() : "Unknown";
+    return YARN_VERSION_INFO._getRevision();
-    return version != null ? version.branch() : "Unknown";
+    return YARN_VERSION_INFO._getBranch();
-    return version != null ? version.date() : "Unknown";
+    return YARN_VERSION_INFO._getDate();
-    return version != null ? version.user() : "Unknown";
+    return YARN_VERSION_INFO._getUser();
-    return version != null ? version.url() : "Unknown";
+    return YARN_VERSION_INFO._getUrl();
-    return version != null ? version.srcChecksum() : "Unknown";
+    return YARN_VERSION_INFO._getSrcChecksum();
-    return YarnVersionInfo.getVersion() + 
-    " from " + YarnVersionInfo.getRevision() +
-    " by " + YarnVersionInfo.getUser() + 
-    " source checksum " + YarnVersionInfo.getSrcChecksum();
+    return YARN_VERSION_INFO._getBuildVersion();
-    LOG.debug("version: "+ version);
+    LOG.debug("version: "+ getVersion());

UPD40 INS43 INS23 UPD42 MOV42 MOV83 MOV83 UPD43 MOV43 INS59 UPD83 INS42 UPD42 INS42 INS14 INS46 INS43 INS45 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS32 INS42 DEL83 DEL83 DEL43 DEL42 DEL59 DEL23 DEL42 DEL59 DEL23 DEL83 DEL42 DEL42 DEL43 DEL57 DEL42 DEL32 DEL7 DEL21 DEL42 DEL42 DEL42 DEL43 DEL57 DEL32 DEL7 DEL21 DEL8 DEL28 DEL66 DEL65 DEL65 DEL29 DEL42 DEL43 DEL42 DEL42 DEL41 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL42 DEL33 DEL27 DEL32 DEL45 DEL16 DEL32 DEL45 DEL42 DEL42 DEL32 DEL45 DEL42 DEL42 DEL32 DEL45 DEL42 DEL42 DEL32 DEL27 DEL42