HDFS-3835. Long-lived 2NN cannot perform a checkpoint if security is enabled and the NN restarts with outstanding delegation tokens. Contributed by Aaron T. Myers.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1376188 13f79535-47bb-0310-9956-ffa450edef68

+  /**
+   * Reset all data structures and mutable state.
+   */
+  public synchronized void reset() {
+    currentId = 0;
+    allKeys.clear();
+    delegationTokenSequenceNumber = 0;
+    currentTokens.clear();
+  }
+  
-    LOG.info("Creating password for identifier: "+identifier);
+    LOG.info("Creating password for identifier: " + identifier);

INS31 INS29 INS83 INS83 INS39 INS42 INS8 MOV21 INS65 INS21 INS21 INS21 INS21 INS66 INS7 INS32 INS7 INS32 INS42 INS34 INS42 INS42 INS42 INS34 INS42 INS42