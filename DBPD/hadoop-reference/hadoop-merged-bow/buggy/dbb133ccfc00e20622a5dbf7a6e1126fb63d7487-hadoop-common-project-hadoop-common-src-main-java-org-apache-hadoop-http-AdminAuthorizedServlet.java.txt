HADOOP-13707. If kerberos is enabled while HTTP SPNEGO is not configured, some links cannot be accessed. Contributed by Yuanbo Liu.

+import javax.servlet.ServletContext;
- throws ServletException, IOException {
-    // Do the authorization
-    if (HttpServer2.hasAdministratorAccess(getServletContext(), request,
+      throws ServletException, IOException {
+    // If user is a static user and auth Type is null, that means
+    // there is a non-security environment and no need authorization,
+    // otherwise, do the authorization.
+    final ServletContext servletContext = getServletContext();
+    if (HttpServer2.isStaticUserAndNoneAuthType(servletContext, request) ||
+        HttpServer2.hasAdministratorAccess(servletContext, request,

INS26 INS40 INS60 INS83 INS43 INS59 INS27 INS42 INS42 MOV32 INS32 INS32 INS42 INS42 INS42 INS42 MOV42 MOV42 INS42 MOV42 MOV42 DEL32