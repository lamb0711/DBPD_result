HDFS-2582. Scope dfs.ha.namenodes config by nameservice. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1207738 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
-      Collection<InetSocketAddress> addresses = DFSUtil.getHaNnRpcAddresses(
+      Map<String, Map<String, InetSocketAddress>> map = DFSUtil.getHaNnRpcAddresses(
-      for (InetSocketAddress address : addresses) {
+      // TODO(HA): currently hardcoding the nameservice used by MiniDFSCluster.
+      // We need to somehow communicate this into the proxy provider.
+      String nsId = "nameserviceId1";
+      Map<String, InetSocketAddress> addressesInNN = map.get(nsId);
+      
+      for (InetSocketAddress address : addressesInNN.values()) {

INS26 INS40 INS60 INS60 INS74 INS43 INS59 INS74 INS59 INS32 INS43 INS43 INS74 UPD42 INS42 INS42 INS45 INS43 INS43 INS43 INS42 INS32 INS42 INS42 INS42 INS42 UPD43 MOV43 INS43 MOV43 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 INS42 DEL74 DEL42