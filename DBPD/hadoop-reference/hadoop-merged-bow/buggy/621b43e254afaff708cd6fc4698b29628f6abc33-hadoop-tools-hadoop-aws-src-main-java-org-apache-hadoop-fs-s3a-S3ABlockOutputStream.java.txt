HADOOP-13345 HS3Guard: Improved Consistency for S3A.
Contributed by: Chris Nauroth, Aaron Fabbri, Mingliang Liu, Lei (Eddy) Xu,
Sean Mackrory, Steve Loughran and others.

+  /** Total bytes for uploads submitted so far. */
+  private long bytesSubmitted;
+
+      bytesSubmitted += getActiveBlock().dataSize();
+    long bytes = 0;
-          putObject();
+          bytes = putObject();
+        bytes = bytesSubmitted;
-    writeOperationHelper.writeSuccessful();
+    writeOperationHelper.writeSuccessful(bytes);
+   * @return number of bytes uploaded. If thread was interrupted while
+   * waiting for upload to complete, returns zero with interrupted flag set
+   * on this thread.
-  private void putObject() throws IOException {
+  private int putObject() throws IOException {
+      return size;
+      return 0;

INS23 INS29 INS83 INS39 INS59 UPD39 INS65 INS42 INS60 INS65 INS66 INS39 INS59 INS66 INS66 INS66 INS21 INS42 INS34 INS42 INS41 INS7 INS42 INS41 INS42 INS32 INS21 INS34 INS32 INS42 INS7 INS42 INS42 INS42 INS7 INS42 MOV32