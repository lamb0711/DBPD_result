HDFS-8831. Trash Support for deletion in HDFS encryption zone. Contributed by Xiaoyu Yao.

-    trashPolicy = TrashPolicy.getInstance(conf, fs, fs.getHomeDirectory());
+    trashPolicy = TrashPolicy.getInstance(conf, fs);
-    boolean success = trash.moveToTrash(fullyResolvedPath);
-    if (success) {
-      LOG.info("Moved: '" + p + "' to trash at: " + trash.getCurrentTrashDir());
-    }
-    return success;
+    return trash.moveToTrash(fullyResolvedPath);
-  Path getCurrentTrashDir() {
+  Path getCurrentTrashDir() throws IOException {
+
+  public Path getCurrentTrashDir(Path path) throws IOException {
+    return trashPolicy.getCurrentTrashDir(path);
+  }

INS31 INS43 INS83 INS43 INS42 INS44 INS43 INS8 INS42 INS42 INS43 INS42 INS42 INS41 MOV32 INS42 INS32 INS42 INS42 INS42 DEL42 DEL42 DEL32 DEL39 DEL42 DEL59 DEL60 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL32 DEL27 DEL32 DEL21 DEL8 DEL25 DEL42