HDFS-2340. Support getFileBlockLocations and getDelegationToken in webhdfs.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1173468 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.server.namenode.web.resources.NamenodeWebHdfsMethods;
-    String clientMachine = Server.getRemoteAddress();
-    if (clientMachine == null) {
+    String clientMachine = NamenodeWebHdfsMethods.getRemoteAddress();
+    if (clientMachine == null) { //not a web client
+      clientMachine = Server.getRemoteAddress();
+    }
+    if (clientMachine == null) { //not a RPC client

INS26 INS40 INS25 INS27 INS8 INS32 INS42 INS33 INS21 INS42 INS42 INS7 INS42 MOV32