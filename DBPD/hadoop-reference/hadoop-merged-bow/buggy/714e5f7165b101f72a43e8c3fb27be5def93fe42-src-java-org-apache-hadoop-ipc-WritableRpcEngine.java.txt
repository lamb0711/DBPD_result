HADOOP-6889. Make RPC to have an option to timeout. Contributed by Hairong Kuang.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@982681 13f79535-47bb-0310-9956-ffa450edef68

-    private Class[] parameterClasses;
+    private Class<?>[] parameterClasses;
-    public Class[] getParameterClasses() { return parameterClasses; }
+    public Class<?>[] getParameterClasses() { return parameterClasses; }
-    private Class protocol;
+    private Class<?> protocol;
+    private int rpcTimeout;
-    public Invoker(Class protocol,
+    public Invoker(Class<?> protocol,
-                   Configuration conf, SocketFactory factory) {
+                   Configuration conf, SocketFactory factory,
+                   int rpcTimeout) {
+      this.rpcTimeout = rpcTimeout;
-                    protocol, ticket);
+                    protocol, ticket, rpcTimeout);
-  public Object getProxy(Class protocol, long clientVersion,
+  public Object getProxy(Class<?> protocol, long clientVersion,
-                         Configuration conf, SocketFactory factory)
+                         Configuration conf, SocketFactory factory,
+                         int rpcTimeout)
-       new Invoker(protocol, addr, ticket, conf, factory));
+       new Invoker(protocol, addr, ticket, conf, factory, rpcTimeout));
-  public Server getServer(Class protocol,
+  public Server getServer(Class<?> protocol,

INS23 INS44 UPD5 UPD5 INS74 INS83 INS39 INS59 INS44 INS74 INS39 INS42 INS74 INS74 INS74 MOV43 INS76 INS42 INS74 INS39 INS42 INS21 MOV43 INS76 MOV43 INS76 MOV43 INS76 MOV43 INS76 MOV43 INS76 INS7 INS22 INS42 INS52 INS42 INS42 INS42