HADOOP-6951.  Distinct minicluster services (e.g. NN and JT) overwrite each other's service policies.  Contributed by Aaron T. Myers.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1002896 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Set;
-  private static Map<Class<?>, AccessControlList> protocolToAcl =
+  private Map<Class<?>, AccessControlList> protocolToAcl =
-  public static void authorize(UserGroupInformation user, 
+  public void authorize(UserGroupInformation user, 
-  public static synchronized void refresh(Configuration conf,
+  public synchronized void refresh(Configuration conf,
+
+  // Package-protected for use in tests.
+  Set<Class<?>> getProtocolsWithAcls() {
+    return protocolToAcl.keySet();
+  }

INS26 INS40 INS31 INS74 INS42 INS8 INS43 INS74 INS41 INS42 INS43 INS76 INS32 INS42 INS42 INS42 DEL83 DEL83 DEL83