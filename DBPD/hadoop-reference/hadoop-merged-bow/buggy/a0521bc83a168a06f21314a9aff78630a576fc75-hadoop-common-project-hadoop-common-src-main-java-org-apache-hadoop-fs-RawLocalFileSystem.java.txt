HADOOP-11490. Expose truncate API via FileSystem and shell command. Contributed by Milan Desai.
+
+  @Override
+  public boolean truncate(Path f, final long newLength) throws IOException {
+    FileStatus status = getFileStatus(f);
+    if(status == null) {
+      throw new FileNotFoundException("File " + f + " not found");
+    }
+    if(status.isDirectory()) {
+      throw new IOException("Cannot truncate a directory (=" + f + ")");
+    }
+    long oldLength = status.getLen();
+    if(newLength > oldLength) {
+      throw new IllegalArgumentException(
+          "Cannot truncate to a larger file size. Current size: " + oldLength +
+          ", truncate size: " + newLength + ".");
+    }
+    try (FileOutputStream out = new FileOutputStream(pathToFile(f), true)) {
+      try {
+        out.getChannel().truncate(newLength);
+      } catch(IOException e) {
+        throw new FSError(e);
+      }
+    }
+    return true;
+  }

INS31 INS78 INS83 INS39 INS42 INS44 INS44 INS43 INS8 INS42 INS43 INS42 INS83 INS39 INS42 INS42 INS60 INS25 INS25 INS60 INS25 INS54 INS41 INS42 INS43 INS59 INS27 INS8 INS32 INS8 INS39 INS59 INS27 INS8 INS58 INS8 INS9 INS42 INS42 INS32 INS42 INS33 INS53 INS42 INS42 INS53 INS42 INS32 INS42 INS42 INS53 INS43 INS59 INS54 INS42 INS42 INS14 INS14 INS42 INS42 INS14 INS42 INS42 INS14 INS8 INS12 INS43 INS27 INS43 INS27 INS43 INS27 INS43 INS32 INS9 INS21 INS44 INS8 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS42 INS42 INS32 INS43 INS42 INS53 INS32 INS42 INS42 INS42 INS14 INS42 INS42 INS43 INS42 INS42