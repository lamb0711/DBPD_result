HDFS-6984. Serialize FileStatus via protobuf.

+import java.util.EnumSet;
-  private final LocatedBlocks locations;
+
+  private static final long serialVersionUID = 0x23c73328;
+
+  /**
+   * Left transient, because {@link #makeQualifiedLocated(URI,Path)}
+   * is the user-facing type.
+   */
+  private transient LocatedBlocks locations;
-      long access_time, FsPermission permission, String owner, String group,
-      byte[] symlink, byte[] path, long fileId, LocatedBlocks locations,
-      int childrenNum, FileEncryptionInfo feInfo, byte storagePolicy,
-      ErasureCodingPolicy ecPolicy) {
+      long access_time, FsPermission permission, EnumSet<Flags> flags,
+      String owner, String group, byte[] symlink, byte[] path, long fileId,
+      LocatedBlocks locations, int childrenNum, FileEncryptionInfo feInfo,
+      byte storagePolicy, ErasureCodingPolicy ecPolicy) {
-        access_time, permission, owner, group, symlink, path, fileId,
+        access_time, permission, flags, owner, group, symlink, path, fileId,
-    return new LocatedFileStatus(getLen(), isDir(), getReplication(),
-        getBlockSize(), getModificationTime(),
-        getAccessTime(),
-        getPermission(), getOwner(), getGroup(),
-        isSymlink() ? new Path(getSymlink()) : null,
-        (getFullPath(path)).makeQualified(
-            defaultUri, null), // fully-qualify path
+    makeQualified(defaultUri, path);
+    return new LocatedFileStatus(this,
+
+  @Override
+  public boolean equals(Object o) {
+    // satisfy findbugs
+    return super.equals(o);
+  }
+
+  @Override
+  public int hashCode() {
+    // satisfy findbugs
+    return super.hashCode();
+  }
+

INS26 INS40 INS23 INS31 INS31 INS31 INS83 INS39 INS59 INS29 INS83 INS83 MOV43 MOV59 INS44 MOV83 MOV83 MOV43 MOV42 MOV44 MOV44 INS8 INS78 INS83 INS39 INS42 INS44 INS8 INS78 INS83 INS39 INS42 INS8 INS42 INS34 INS65 INS74 INS42 INS21 INS41 INS42 INS43 INS42 INS41 INS42 INS41 INS66 INS65 INS66 INS43 INS43 INS42 INS32 INS14 INS42 INS48 INS48 INS68 INS42 INS42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV43 INS52 MOV32 INS42 INS42 INS42 INS42 INS69 INS69 INS43 MOV43 INS42 DEL32 DEL32 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL32 DEL14 DEL33 DEL16 DEL42 DEL42 DEL32 DEL36 DEL42 DEL42 DEL33 DEL32 DEL14 DEL41 DEL8 DEL31