HADOOP-11332. KerberosAuthenticator#doSpnegoSequence should check if kerberos TGT is available in the subject. Contributed by Dian Fu.

+import javax.security.auth.kerberos.KerberosKey;
+import javax.security.auth.kerberos.KerberosTicket;
-      if (subject == null) {
+      if (subject == null
+          || (subject.getPrivateCredentials(KerberosKey.class).isEmpty()
+              && subject.getPrivateCredentials(KerberosTicket.class).isEmpty())) {

INS26 INS26 INS40 INS40 INS27 MOV27 INS36 INS27 INS32 INS32 INS32 INS42 INS32 INS42 INS42 INS42 INS57 INS42 INS42 INS57 INS43 INS43 INS42 INS42