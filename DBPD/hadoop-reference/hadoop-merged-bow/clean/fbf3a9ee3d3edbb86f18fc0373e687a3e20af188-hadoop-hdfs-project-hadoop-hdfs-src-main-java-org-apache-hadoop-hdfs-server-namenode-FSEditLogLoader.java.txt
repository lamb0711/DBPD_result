HDFS-2992. Edit log failure trace should include transaction ID of error. Contributed by Colin Patrick McCabe


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1295227 13f79535-47bb-0310-9956-ffa450edef68

+    long txId = expectedStartingTxId - 1;
-      long txId = expectedStartingTxId - 1;
-
-            long thisTxId = op.txid;
-            if (thisTxId != txId + 1) {
+            long expectedTxId = txId + 1;
+            txId = op.txid;
+            if (txId != expectedTxId) {
-                  (txId + 1) + " but got " + thisTxId);
+                  expectedTxId + " but got " + txId);
-            txId = thisTxId;
+      sb.append("On transaction ID ").append(txId);

MOV60 INS21 INS32 INS32 INS42 INS42 INS42 INS42 INS45 INS60 INS21 MOV39 INS59 INS7 INS42 MOV27 INS42 INS40 UPD42 INS42 UPD42 MOV42 UPD42 DEL42 DEL40 DEL59 DEL60 DEL34 DEL27 DEL36 DEL42 DEL42 DEL7 DEL21