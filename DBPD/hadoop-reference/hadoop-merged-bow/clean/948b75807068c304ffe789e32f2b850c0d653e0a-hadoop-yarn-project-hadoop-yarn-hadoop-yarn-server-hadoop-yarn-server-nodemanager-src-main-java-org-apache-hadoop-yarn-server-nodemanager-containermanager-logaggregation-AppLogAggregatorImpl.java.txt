YARN-4773. Log aggregation performs extraneous filesystem operations when rolling log aggregation is disabled. Contributed by Jun Gong

-  // This variable is only for testing
-  private final AtomicBoolean waiting = new AtomicBoolean(false);
-  // This variable is only for testing
+  // These variables are only for testing
+  private final AtomicBoolean waiting = new AtomicBoolean(false);
+  private int cleanupOldLogTimes = 0;
-      if (uploadedLogsInThisCycle) {
+      if (uploadedLogsInThisCycle && logAggregationInRolling) {
+        cleanupOldLogTimes++;
+
+  @VisibleForTesting
+  int getCleanupOldLogTimes() {
+    return this.cleanupOldLogTimes;
+  }

INS23 INS31 INS83 INS39 INS59 INS78 INS39 INS42 INS8 INS42 INS34 INS42 INS41 INS22 INS52 INS42 INS27 INS42 INS42 INS21 INS37 INS42 DEL42