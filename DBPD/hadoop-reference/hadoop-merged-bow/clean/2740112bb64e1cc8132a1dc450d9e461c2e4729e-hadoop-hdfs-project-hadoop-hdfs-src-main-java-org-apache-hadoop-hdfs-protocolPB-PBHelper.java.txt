HDFS-2647. Used protobuf based RPC for InterDatanodeProtocol, ClientDatanodeProtocol, JournalProtocol, NamenodeProtocol. Contributed by Suresh Srinivas.



git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1213040 13f79535-47bb-0310-9956-ffa450edef68

-class PBHelper {
+public class PBHelper {
-    return new Block(b.getBlockId(), b.getGenStamp(), b.getNumBytes());
+    return new Block(b.getBlockId(), b.getNumBytes(), b.getGenStamp());
+    if (b == null) {
+      return null;
+    }
+    if (b == null) {
+      return null;
+    }
+
+  public static ReplicaStateProto convert(ReplicaState state) {
+    switch (state) {
+    case RBW:
+      return ReplicaStateProto.RBW;
+    case RUR:
+      return ReplicaStateProto.RUR;
+    case RWR:
+      return ReplicaStateProto.RWR;
+    case TEMPORARY:
+      return ReplicaStateProto.TEMPORARY;
+    case FINALIZED:
+    default:
+      return ReplicaStateProto.FINALIZED;
+    }
+  }

INS83 INS31 INS83 INS83 INS43 INS42 INS44 INS8 INS25 INS25 INS42 INS43 INS42 INS50 MOV32 INS27 INS8 INS27 INS8 INS42 INS42 INS49 INS41 INS49 INS41 INS49 INS41 INS49 INS41 INS49 INS49 INS41 INS42 INS33 INS41 INS42 INS33 INS41 INS42 INS40 INS42 INS40 INS42 INS40 INS42 INS40 INS42 INS40 INS33 INS33