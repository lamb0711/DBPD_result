HDFS-5163. Miscellaneous cache pool RPC fixes (Contributed by Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1520665 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.protocol.AddPathCacheDirectiveException.InvalidPoolError;
+import org.apache.hadoop.hdfs.protocol.AddPathCacheDirectiveException.InvalidPoolNameError;
-  private final long poolId;
-  public PathCacheDirective(String path, long poolId) {
+  private final String pool;
+
+  public PathCacheDirective(String path, String pool) {
-    Preconditions.checkArgument(poolId > 0);
+    Preconditions.checkNotNull(pool);
-    this.poolId = poolId;
+    this.pool = pool;
-  public long getPoolId() {
-    return poolId;
+  public String getPool() {
+    return pool;
-    if (poolId <= 0) {
-      throw new InvalidPoolError(this);
+    if (pool.isEmpty()) {
+      throw new InvalidPoolNameError(this);
-        compare(poolId, rhs.getPoolId()).
+        compare(pool, rhs.getPool()).
-    return new HashCodeBuilder().append(path).append(poolId).hashCode();
+    return new HashCodeBuilder().append(path).append(pool).hashCode();
-      append(", poolId:").append(poolId).
+      append(", pool:").append(pool).

UPD40 INS43 INS43 UPD42 INS42 UPD42 INS43 UPD42 INS42 INS42 UPD42 INS32 UPD42 INS42 UPD42 INS42 INS42 UPD42 UPD42 UPD42 UPD43 UPD42 UPD45 UPD42 UPD42 DEL39 DEL39 DEL42 DEL34 DEL27 DEL39 DEL42 DEL34 DEL27