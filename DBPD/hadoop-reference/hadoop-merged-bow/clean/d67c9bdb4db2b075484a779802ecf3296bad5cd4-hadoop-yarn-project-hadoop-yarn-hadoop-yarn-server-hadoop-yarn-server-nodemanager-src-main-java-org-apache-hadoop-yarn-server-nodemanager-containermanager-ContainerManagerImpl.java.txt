YARN-3040. Make putEntities operation be aware of the app's context. Contributed by Zhijie Shen

+import org.apache.hadoop.yarn.util.resource.Resources;
+import org.apache.hadoop.yarn.util.timeline.TimelineUtils;
-
-    ApplicationImpl app = new ApplicationImpl(dispatcher, p.getUser(), appId,
-        creds, context, p.getAppLogAggregationInitedTime());
+    //TODO: Recover flow and flow run ID
+    ApplicationImpl app = new ApplicationImpl(
+        dispatcher, p.getUser(), null, null, appId, creds, context, p.getAppLogAggregationInitedTime());
+
-        Application application = new ApplicationImpl(dispatcher, user,
-            applicationID, credentials, context);
+        String flowId = launchContext.getEnvironment().get(
+            TimelineUtils.FLOW_ID_TAG_PREFIX);
+        String flowRunId = launchContext.getEnvironment().get(
+            TimelineUtils.FLOW_RUN_ID_TAG_PREFIX);
+        Application application = new ApplicationImpl(
+            dispatcher, user, flowId, flowRunId, applicationID, credentials, context);

MOV26 INS26 INS26 INS40 INS40 INS33 INS33 INS60 INS60 INS43 INS59 INS43 INS59 INS42 INS42 INS32 INS42 INS42 INS32 INS32 INS42 INS40 INS32 INS42 INS40 INS42 INS42 INS42 INS42 INS42 INS42