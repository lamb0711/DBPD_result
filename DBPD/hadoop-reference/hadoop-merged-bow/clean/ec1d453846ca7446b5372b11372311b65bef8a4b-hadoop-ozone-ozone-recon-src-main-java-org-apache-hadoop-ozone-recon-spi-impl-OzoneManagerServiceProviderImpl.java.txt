HDDS-1788. Fix kerberos principal error in Ozone Recon. (#1201)


-import static org.apache.hadoop.ozone.OzoneConfigKeys.OZONE_SECURITY_ENABLED_KEY;
-import org.apache.hadoop.hdds.conf.OzoneConfiguration;
+import org.apache.hadoop.conf.Configuration;
+import org.apache.hadoop.hdfs.DFSUtil;
+import org.apache.hadoop.http.HttpConfig;
-  private OzoneConfiguration configuration;
-
-  @Inject
-  public OzoneManagerServiceProviderImpl(OzoneConfiguration configuration) {
+  public OzoneManagerServiceProviderImpl(Configuration configuration) {
-    boolean ozoneSecurityEnabled = configuration.getBoolean(
-        OZONE_SECURITY_ENABLED_KEY, false);
+    HttpConfig.Policy policy = DFSUtil.getHttpPolicy(configuration);
-    if (ozoneSecurityEnabled) {
+    if (policy.isHttpsEnabled()) {

MOV26 INS26 UPD40 INS40 UPD40 UPD43 UPD42 INS43 INS32 INS40 UPD42 INS42 INS42 UPD42 UPD42 UPD42 DEL42 DEL78 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL39 DEL9 DEL42