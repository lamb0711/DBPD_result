HDFS-9818. Correctly handle EC reconstruction work caused by not enough racks. Contributed by Jing Zhao.

-        EC_RECONSTRUCTION_STRIPED_BLK_THREAD_POOL
-            .submit(new ReconstructAndTransferBlock(reconstructionInfo));
+        ReconstructAndTransferBlock task =
+            new ReconstructAndTransferBlock(reconstructionInfo);
+        if (task.hasValidTargets()) {
+          EC_RECONSTRUCTION_STRIPED_BLK_THREAD_POOL.submit(task);
+        } else {
+          LOG.warn("No missing internal block. Skip reconstruction for task:{}",
+              reconstructionInfo);
+        }
+    private final boolean hasValidTargets;
-      getTargetIndices();
+      hasValidTargets = getTargetIndices();
+    boolean hasValidTargets() {
+      return hasValidTargets;
+    }
+
-    private void getTargetIndices() {
+    /**
+     * @return true if there is valid target for reconstruction
+     */
+    private boolean getTargetIndices() {
+      boolean hasValidTarget = false;
+              hasValidTarget = true;
+      return hasValidTarget;

INS23 INS31 INS83 INS83 INS39 INS59 INS39 INS42 INS8 INS29 UPD39 INS42 INS41 INS65 INS60 INS41 INS7 INS42 INS66 INS39 INS59 INS42 INS8 INS42 MOV32 INS42 INS9 INS60 INS25 INS43 INS59 INS32 INS8 INS8 INS42 INS42 MOV14 INS42 INS42 MOV21 INS21 INS32 INS42 INS42 INS42 INS45 INS42 INS21 INS7 INS42 INS9 DEL8