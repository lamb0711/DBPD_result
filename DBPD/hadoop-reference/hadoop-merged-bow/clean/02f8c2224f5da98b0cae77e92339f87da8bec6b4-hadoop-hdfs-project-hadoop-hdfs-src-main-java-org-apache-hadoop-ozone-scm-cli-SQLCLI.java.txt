HDFS-11888. Ozone: SCM: use state machine for open containers allocated for key/blocks. Contributed by Xiaoyu Yao.

+import com.google.common.base.Preconditions;
+import org.apache.hadoop.ozone.protocol.proto.OzoneProtos;
+import org.apache.hadoop.scm.container.common.helpers.ContainerInfo;
-        Pipeline pipeline = null;
-        pipeline = Pipeline.parseFrom(value);
+        ContainerInfo containerInfo = null;
+        containerInfo = ContainerInfo.fromProtobuf(
+            OzoneProtos.SCMContainerInfo.PARSER.parseFrom(value));
+        Preconditions.checkNotNull(containerInfo);
-          insertContainerDB(conn, containerName, pipeline, uuidChecked);
+          //TODO: include container state to sqllite schema
+          insertContainerDB(conn, containerName,
+              containerInfo.getPipeline().getProtobufMessage(), uuidChecked);

INS26 INS26 INS26 INS40 INS40 INS40 INS21 UPD43 INS32 UPD42 UPD42 UPD42 INS42 INS42 INS42 UPD42 INS42 INS32 INS40 MOV42 MOV42 INS32 INS32 INS42 INS42 UPD42 MOV42