HDDS-2244. Use new ReadWrite lock in OzoneManager. (#1589)


+import static org.apache.hadoop.ozone.om.lock.OzoneManagerLock.Resource.VOLUME_LOCK;
-    boolean acquiredLock = false;
+    boolean acquiredBucketLock = false;
+    boolean acquiredVolumeLock = false;
-      acquiredLock = omMetadataManager.getLock().acquireLock(BUCKET_LOCK,
+      acquiredVolumeLock =
+          omMetadataManager.getLock().acquireReadLock(VOLUME_LOCK, volumeName);
+      acquiredBucketLock =
+          omMetadataManager.getLock().acquireWriteLock(BUCKET_LOCK,
-      if (acquiredLock) {
-        omMetadataManager.getLock().releaseLock(BUCKET_LOCK, volumeName,
+      if (acquiredBucketLock) {
+        omMetadataManager.getLock().releaseWriteLock(BUCKET_LOCK, volumeName,
+      if (acquiredVolumeLock) {
+        omMetadataManager.getLock().releaseReadLock(VOLUME_LOCK, volumeName);
+      }

INS26 INS40 INS60 INS39 INS59 UPD42 INS42 INS9 INS21 INS25 INS7 UPD42 INS42 INS8 UPD42 INS42 INS32 INS21 UPD42 UPD42 INS32 INS42 INS42 INS42 INS42 INS32 INS42 INS42 UPD42 INS32 INS42 INS42 INS42 INS42 INS42 DEL42