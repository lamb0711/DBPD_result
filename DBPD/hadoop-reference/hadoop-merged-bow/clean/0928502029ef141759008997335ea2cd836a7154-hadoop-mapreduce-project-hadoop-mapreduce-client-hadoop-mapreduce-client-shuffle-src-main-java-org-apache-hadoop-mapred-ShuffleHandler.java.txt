YARN-530. Defined Service model strictly, implemented AbstractService for robust subclassing and migrated yarn-common services. Contributed by Steve Loughran.
YARN-117. Migrated rest of YARN to the new service model. Contributed by Steve Louhran.
MAPREDUCE-5298. Moved MapReduce services to YARN-530 stricter lifecycle. Contributed by Steve Loughran.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492718 13f79535-47bb-0310-9956-ffa450edef68

-  public synchronized void init(Configuration conf) {
+  protected void serviceInit(Configuration conf) throws Exception {
-    super.init(new Configuration(conf));
+    super.serviceInit(new Configuration(conf));
-  public synchronized void start() {
+  protected void serviceStart() throws Exception {
-    super.start();
+    super.serviceStart();
-  public synchronized void stop() {
+  protected void serviceStop() throws Exception {
-    ServerBootstrap bootstrap = new ServerBootstrap(selector);
-    bootstrap.releaseExternalResources();
-    pipelineFact.destroy();
-    super.stop();
+    if (selector != null) {
+      ServerBootstrap bootstrap = new ServerBootstrap(selector);
+      bootstrap.releaseExternalResources();
+    }
+    if (pipelineFact != null) {
+      pipelineFact.destroy();
+    }
+    super.serviceStop();

UPD83 UPD42 INS43 UPD83 UPD42 INS43 UPD83 UPD42 INS43 INS42 INS42 INS42 INS25 INS25 INS27 INS8 INS27 INS8 UPD42 UPD42 INS42 INS33 MOV60 MOV21 INS42 INS33 MOV21 UPD42 DEL83 DEL83 DEL83