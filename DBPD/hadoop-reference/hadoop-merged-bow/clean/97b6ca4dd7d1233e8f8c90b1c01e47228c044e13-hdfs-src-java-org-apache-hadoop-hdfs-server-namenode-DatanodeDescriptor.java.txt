Revert 1140913 and 1140909 for HDFS-2107.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1140920 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.hadoop.hdfs.server.blockmanagement;
+package org.apache.hadoop.hdfs.server.namenode;
-import org.apache.hadoop.hdfs.server.namenode.FSNamesystem;
-  public DecommissioningStatus decommissioningStatus = new DecommissioningStatus();
+  DecommissioningStatus decommissioningStatus = new DecommissioningStatus();
-  public boolean isAlive = false;
-  public boolean needKeyUpdate = false;
+  protected boolean isAlive = false;
+  protected boolean needKeyUpdate = false;
-  public boolean addBlock(BlockInfo b) {
+  boolean addBlock(BlockInfo b) {
-  public boolean removeBlock(BlockInfo b) {
+  boolean removeBlock(BlockInfo b) {
-  public BlockInfo replaceBlock(BlockInfo oldBlock, BlockInfo newBlock) {
+  BlockInfo replaceBlock(BlockInfo oldBlock, BlockInfo newBlock) {
-  public void resetBlocks() {
+  void resetBlocks() {
-  public void updateHeartbeat(long capacity, long dfsUsed, long remaining,
+  void updateHeartbeat(long capacity, long dfsUsed, long remaining,
-  public static class BlockIterator implements Iterator<BlockInfo> {
+  static class BlockIterator implements Iterator<BlockInfo> {
-  public Iterator<BlockInfo> getBlockIterator() {
+  Iterator<BlockInfo> getBlockIterator() {
-  public List<BlockTargetPair> getReplicationCommand(int maxTransfers) {
+  List<BlockTargetPair> getReplicationCommand(int maxTransfers) {
-  public BlockInfoUnderConstruction[] getLeaseRecoveryCommand(int maxTransfers) {
+  BlockInfoUnderConstruction[] getLeaseRecoveryCommand(int maxTransfers) {
-  public Block[] getInvalidateBlocks(int maxblocks) {
+  Block[] getInvalidateBlocks(int maxblocks) {
-  public void readFieldsFromFSEditLog(DataInput in) throws IOException {
+  void readFieldsFromFSEditLog(DataInput in) throws IOException {
-  public void incBlocksScheduled() {
+  void incBlocksScheduled() {
-
-  /** Decommissioning status */
-  public class DecommissioningStatus {
-    private int underReplicatedBlocks;
-    private int decommissionOnlyReplicas;
-    private int underReplicatedInOpenFiles;
-    private long startTime;
+  
+  class DecommissioningStatus {
+    int underReplicatedBlocks;
+    int decommissionOnlyReplicas;
+    int underReplicatedInOpenFiles;
+    long startTime;
-
-    /** @return the number of under-replicated blocks */
-    public synchronized int getUnderReplicatedBlocks() {
+    
+    synchronized int getUnderReplicatedBlocks() {
-    /** @return the number of decommission-only replicas */
-    public synchronized int getDecommissionOnlyReplicas() {
+    synchronized int getDecommissionOnlyReplicas() {
-    /** @return the number of under-replicated blocks in open files */
-    public synchronized int getUnderReplicatedInOpenFiles() {
+
+    synchronized int getUnderReplicatedInOpenFiles() {
-    /** Set start time */
-    public synchronized void setStartTime(long time) {
+
+    synchronized void setStartTime(long time) {
-    /** @return start time */
-    public synchronized long getStartTime() {
+    
+    synchronized long getStartTime() {
-  public void setDisallowed(boolean flag) {
+  void setDisallowed(boolean flag) {
-  /** Is the datanode disallowed from communicating with the namenode? */
-  public boolean isDisallowed() {
+  
+  boolean isDisallowed() {

UPD40 UPD83 UPD83 DEL40 DEL26 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL66 DEL65 DEL29 DEL83 DEL83 DEL83 DEL83 DEL83 DEL66 DEL65 DEL29 DEL83 DEL66 DEL65 DEL29 DEL83 DEL66 DEL65 DEL29 DEL83 DEL66 DEL65 DEL29 DEL83 DEL66 DEL65 DEL29 DEL83 DEL83 DEL66 DEL65 DEL29 DEL83