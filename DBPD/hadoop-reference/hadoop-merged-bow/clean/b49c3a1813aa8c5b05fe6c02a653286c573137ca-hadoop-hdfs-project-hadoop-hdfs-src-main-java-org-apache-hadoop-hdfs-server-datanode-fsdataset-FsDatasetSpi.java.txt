HDFS-7722. DataNode#checkDiskError should also remove Storage when error is found. (Lei Xu via Colin P. McCabe)

+import java.util.Set;
-   * @param volumes      The storage locations of the volumes to remove.
+   * @param volumes  The paths of the volumes to be removed.
+   * @param clearFailure set true to clear the failure information about the
+   *                     volumes.
-  public void removeVolumes(Collection<StorageLocation> volumes);
+  public void removeVolumes(Set<File> volumes, boolean clearFailure);
-     * @throws DiskErrorException
+     * @return A set of unhealthy data directories.
-  public void checkDataDir() throws DiskErrorException;
+  public Set<File> checkDataDir();

INS26 INS40 INS44 INS74 INS42 INS65 UPD74 INS39 INS42 UPD65 INS43 INS43 UPD66 INS42 INS66 INS66 UPD43 UPD43 INS66 INS42 UPD42 MOV42 UPD42 UPD42 DEL42 DEL39 DEL42 DEL43