HDFS-9829. Erasure Coding: Improve few exception handling logic of ErasureCodingWorker. Contributed by Rakesh R.

-    LOG.debug("Using striped reads; pool threads=" + num);
+    LOG.debug("Using striped reads; pool threads={}", num);
-    LOG.debug("Using striped block reconstruction; pool threads=" + num);
+    LOG.debug("Using striped block reconstruction; pool threads={}" + num);
-        LOG.warn("Failed to reconstruct striped block "
-            + reconstructionInfo.getExtendedBlock().getLocalBlock(), e);
+        LOG.warn("Failed to reconstruct striped block {}",
+            reconstructionInfo.getExtendedBlock().getLocalBlock(), e);
-        LOG.warn("Failed to reconstruct striped block: " + blockGroup, e);
+        LOG.warn("Failed to reconstruct striped block: {}", blockGroup, e);
-          closeBlockReader(stripedReader.blockReader);
+          IOUtils.closeStream(stripedReader.blockReader);
-            closeBlockReader(failedReader.blockReader);
+            IOUtils.closeStream(failedReader.blockReader);
+          cancelReads(futures.keySet());
+          futures.clear();
-            closeBlockReader(r.blockReader);
+            IOUtils.closeStream(r.blockReader);
-            LOG.warn("Found Checksum error for " + reader.block + " from "
-                + reader.source + " at " + e.getPos());
+            LOG.warn("Found Checksum error for {} from {} at {}", reader.block,
+                reader.source, e.getPos());
-    // close block reader
-    private void closeBlockReader(BlockReader blockReader) {
-      try {
-        if (blockReader != null) {
-          blockReader.close();
-        }
-      } catch (IOException e) {
-        // ignore
-      }
-    }
-
-         *
-         * TODO: add proper tracer
+        LOG.debug("Exception while creating remote block reader, datanode {}",
+            dnInfo, e);

INS45 INS42 UPD45 INS21 INS32 INS45 INS42 INS21 INS21 INS42 INS42 INS45 INS42 INS42 INS45 MOV32 INS42 UPD42 INS32 INS32 INS42 INS32 INS42 INS42 INS42 INS42 INS42 UPD42 INS42 UPD42 INS45 INS40 INS40 MOV32 DEL45 DEL42 DEL27 DEL45 DEL27 DEL45 DEL42 DEL27 DEL45 DEL40 DEL45 DEL40 DEL45 DEL27 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL33 DEL27 DEL42 DEL42 DEL32 DEL21 DEL8 DEL25 DEL8 DEL42 DEL43 DEL42 DEL44 DEL8 DEL12 DEL54 DEL8 DEL31