HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-  public BlockInfoUnderConstructionStriped(Block blk, ECSchema schema,
-      int cellSize) {
-    this(blk, schema, cellSize, UNDER_CONSTRUCTION, null);
+  public BlockInfoUnderConstructionStriped(Block blk, ErasureCodingPolicy ecPolicy) {
+    this(blk, ecPolicy, UNDER_CONSTRUCTION, null);
-  public BlockInfoUnderConstructionStriped(Block blk, ECSchema schema,
-      int cellSize, BlockUCState state, DatanodeStorageInfo[] targets) {
-    super(blk, schema, cellSize);
+  public BlockInfoUnderConstructionStriped(Block blk, ErasureCodingPolicy ecPolicy,
+      BlockUCState state, DatanodeStorageInfo[] targets) {
+    super(blk, ecPolicy);

UPD40 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 DEL39 DEL42 DEL44 DEL42 DEL39 DEL42 DEL44 DEL42