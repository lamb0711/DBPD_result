YARN-10068. Fix TimelineV2Client leaking File Descriptors.

Contributed by Anand Srinivasan. Reviewed by Adam Antal.

+import com.sun.jersey.api.client.ClientHandlerException;
+import com.sun.jersey.api.client.UniformInterfaceException;
-    if (resp == null || resp.getStatusInfo()
-        .getStatusCode() != ClientResponse.Status.OK.getStatusCode()) {
-      String msg =
-          "Response from the timeline server is " + ((resp == null) ? "null"
-              : "not successful," + " HTTP error code: " + resp.getStatus()
-                  + ", Server response:\n" + resp.getEntity(String.class));
+
+    //Close ClientResponse's input stream as we are done posting objects.
+    //ClientResponse#getEntity closes the input stream upon failure in
+    //processing HTTP response.
+    if (resp == null) {
+      String msg = "Error getting HTTP response from the timeline server.";
+    } else if (resp.getStatusInfo().getStatusCode()
+            == ClientResponse.Status.OK.getStatusCode()) {
+      try {
+        resp.close();
+      } catch(ClientHandlerException che) {
+        LOG.warn("Error closing the HTTP response's inputstream. ", che);
+      }
+    } else {
+      String msg = "";
+      try {
+        String stringType = resp.getEntity(String.class);
+        msg = "Server response:\n" + stringType;
+      } catch (ClientHandlerException | UniformInterfaceException chuie) {
+        msg = "Error getting entity from the HTTP response."
+                + chuie.getLocalizedMessage();
+      } catch (Throwable t) {
+        msg = "Error getting entity from the HTTP response."
+                + t.getLocalizedMessage();
+      } finally {
+        msg = "Response from the timeline server is not successful"
+                  + ", HTTP error code: " + resp.getStatus()
+                  + ", "
+                  + msg;
+        LOG.error(msg);
+        throw new YarnException(msg);
+      }

INS26 INS26 INS40 INS40 INS25 MOV27 INS8 INS25 INS60 INS21 INS53 UPD27 MOV27 INS8 MOV8 INS43 INS59 INS32 INS14 INS54 INS60 INS54 INS42 INS42 INS45 INS42 INS42 INS42 INS43 INS42 INS8 INS12 INS43 INS59 INS8 INS12 INS12 INS8 INS42 INS21 INS44 INS8 INS42 MOV42 INS45 INS60 INS21 INS44 INS8 INS44 INS8 INS21 MOV21 MOV53 INS32 INS43 INS42 INS21 MOV43 INS59 INS7 INS84 INS42 INS21 INS43 INS42 INS21 INS7 INS42 INS42 INS42 INS32 INS42 MOV32 INS42 INS27 INS43 INS43 INS7 INS42 INS7 INS42 INS27 INS42 INS42 INS45 INS42 UPD45 MOV45 INS42 INS42 INS42 INS42 INS27 INS42 INS27 MOV27 MOV32 UPD45 MOV45 INS42 INS45 INS32 INS45 INS32 UPD45 UPD45 INS42 INS42 INS42 INS42 DEL42 DEL33 DEL27 DEL36 DEL45 DEL27 DEL16 DEL36 DEL27 DEL59 DEL60 DEL27 DEL25