YARN-3265. Fixed a deadlock in CapacityScheduler by always passing a queue's available resource-limit from the parent queue. Contributed by Wangda Tan.

+import org.apache.hadoop.yarn.server.resourcemanager.scheduler.ResourceLimits;
+   * @param resourceLimits how much overall resource of this queue can use. 
-  public CSAssignment assignContainers(
-      Resource clusterResource, FiCaSchedulerNode node, boolean needToUnreserve);
+  public CSAssignment assignContainers(Resource clusterResource,
+      FiCaSchedulerNode node, boolean needToUnreserve,
+      ResourceLimits resourceLimits);
+   * @param resourceLimits the current ResourceLimits
-  public void updateClusterResource(Resource clusterResource);
+  public void updateClusterResource(Resource clusterResource,
+      ResourceLimits resourceLimits);

INS26 INS40 INS44 INS44 INS65 INS43 INS42 INS65 INS43 INS42 INS42 INS66 INS42 INS42 INS66 INS42