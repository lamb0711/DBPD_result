HDFS-7035. Make adding a new data directory to the DataNode an atomic operation and improve error handling (Lei Xu via Colin P. McCabe)

+import org.apache.hadoop.hdfs.server.protocol.NamespaceInfo;
-  public List<StorageLocation> addVolumes(List<StorageLocation> volumes,
-      final Collection<String> bpids);
+  public void addVolume(
+      final StorageLocation location,
+      final List<NamespaceInfo> nsInfos) throws IOException;

INS26 INS40 INS39 UPD42 INS44 INS43 MOV83 MOV43 INS42 INS83 UPD74 UPD42 UPD42 MOV42 UPD43 UPD42 DEL42 DEL43 DEL74 DEL42 DEL43 DEL43 DEL74 DEL42 DEL44