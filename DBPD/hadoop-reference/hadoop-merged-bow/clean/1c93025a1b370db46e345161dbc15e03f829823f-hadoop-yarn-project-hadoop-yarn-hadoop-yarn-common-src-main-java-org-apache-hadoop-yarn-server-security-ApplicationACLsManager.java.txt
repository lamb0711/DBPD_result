YARN-2527. Fixed the potential NPE in ApplicationACLsManager and added test cases for it. Contributed by Benoy Antony.

+  private static AccessControlList DEFAULT_YARN_APP_ACL 
+    = new AccessControlList(YarnConfiguration.DEFAULT_YARN_APP_ACL);
-
-    AccessControlList applicationACL = this.applicationACLS
-        .get(applicationId).get(applicationAccessType);
-    if (applicationACL == null) {
+    AccessControlList applicationACL = DEFAULT_YARN_APP_ACL;
+    Map<ApplicationAccessType, AccessControlList> acls = this.applicationACLS
+        .get(applicationId);
+    if (acls == null) {
+        LOG.debug("ACL not found for application "
+            + applicationId + " owned by "
+            + applicationOwner + ". Using default ["
+            + YarnConfiguration.DEFAULT_YARN_APP_ACL + "]");
+      }
+    } else {
+      AccessControlList applicationACLInMap = acls.get(applicationAccessType);
+      if (applicationACLInMap != null) {
+        applicationACL = applicationACLInMap;
+      } else if (LOG.isDebugEnabled()) {
-      applicationACL =
-          new AccessControlList(YarnConfiguration.DEFAULT_YARN_APP_ACL);

INS23 INS83 INS83 INS43 INS59 INS42 INS42 MOV14 INS60 MOV43 INS59 INS74 INS8 INS42 INS42 INS43 INS43 INS43 UPD42 MOV32 UPD42 INS25 INS60 INS25 INS42 INS42 INS42 INS32 INS8 INS43 INS59 INS27 INS8 MOV25 INS42 INS42 INS21 INS42 INS42 INS32 INS42 INS33 MOV21 INS32 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS45 INS42 INS45 INS42 INS45 INS40 INS45 DEL42 DEL42 DEL32