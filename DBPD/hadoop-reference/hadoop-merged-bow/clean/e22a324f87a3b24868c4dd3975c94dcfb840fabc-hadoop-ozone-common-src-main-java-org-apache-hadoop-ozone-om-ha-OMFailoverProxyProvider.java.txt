HDDS-2007. Make ozone fs shell command work with OM HA service ids	 (#1360)


+import java.util.Collections;
-import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_SERVICE_IDS_KEY;
+  private final String omServiceId;
+
-      UserGroupInformation ugi) throws IOException {
+      UserGroupInformation ugi, String omServiceId) throws IOException {
-    loadOMClientConfigs(conf);
+    this.omServiceId = omServiceId;
+    loadOMClientConfigs(conf, this.omServiceId);
-  private void loadOMClientConfigs(Configuration config) throws IOException {
+  public OMFailoverProxyProvider(OzoneConfiguration configuration,
+      UserGroupInformation ugi) throws IOException {
+    this(configuration, ugi, null);
+  }
+
+  private void loadOMClientConfigs(Configuration config, String omSvcId)
+      throws IOException {
-    Collection<String> omServiceIds = config.getTrimmedStringCollection(
-        OZONE_OM_SERVICE_IDS_KEY);
-
-    if (omServiceIds.size() > 1) {
-      throw new IllegalArgumentException("Multi-OM Services is not supported." +
-          " Please configure only one OM Service ID in " +
-          OZONE_OM_SERVICE_IDS_KEY);
-    }
+    Collection<String> omServiceIds = Collections.singletonList(omSvcId);

MOV26 UPD40 INS23 INS31 INS83 INS83 INS43 INS59 INS44 INS83 INS42 INS44 INS44 INS43 INS8 INS44 INS42 INS42 INS43 INS42 INS21 INS43 INS42 INS43 INS42 INS42 INS17 INS43 INS42 INS42 INS7 INS42 INS42 INS42 INS42 INS33 INS42 INS22 INS42 INS22 INS52 INS42 INS52 INS42 UPD42 UPD42 UPD42 DEL42 DEL42 DEL32 DEL34 DEL27 DEL42 DEL43 DEL45 DEL45 DEL42 DEL27 DEL14 DEL53 DEL8 DEL25