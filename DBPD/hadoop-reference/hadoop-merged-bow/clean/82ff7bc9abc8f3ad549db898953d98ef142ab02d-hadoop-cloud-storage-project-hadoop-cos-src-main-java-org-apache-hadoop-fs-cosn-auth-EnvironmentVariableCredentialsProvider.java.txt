HADOOP-16959. Resolve hadoop-cos dependency conflict. Contributed by Yang Yu.

-import com.qcloud.cos.exception.CosClientException;
-
+import org.apache.hadoop.conf.Configuration;
+import javax.annotation.Nullable;
+import java.net.URI;
+
- * the provider obtaining the cos credentials from the environment variables.
+ * The provider obtaining the cos credentials from the environment variables.
-public class EnvironmentVariableCredentialProvider
-    implements COSCredentialsProvider {
+public class EnvironmentVariableCredentialsProvider
+    extends AbstractCOSCredentialsProvider implements COSCredentialsProvider {
+
+  public EnvironmentVariableCredentialsProvider(@Nullable URI uri,
+                                                Configuration conf) {
+    super(uri, conf);
+  }
+
-    } else {
-      throw new CosClientException(
-          "Unable to load COS credentials from environment variables" +
-              "(COS_SECRET_ID or COS_SECRET_KEY)");
+
+    return null;
+  }
+
+  @Override
+  public void refresh() {
-    return "EnvironmentVariableCredentialProvider{}";
+    return String.format("EnvironmentVariableCredentialsProvider{%s, %s}",
+        Constants.COSN_SECRET_ID_ENV,
+        Constants.COSN_SECRET_KEY_ENV);

MOV26 INS26 INS26 UPD40 INS40 INS40 UPD42 INS43 INS31 INS31 INS42 INS83 INS42 INS44 INS44 INS8 INS78 INS83 INS39 INS42 INS8 UPD66 INS78 INS43 INS42 INS43 INS42 INS46 INS41 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS32 INS42 INS42 INS45 INS40 INS40 DEL42 DEL43 DEL45 DEL45 DEL27 DEL14 DEL53 DEL8 DEL45