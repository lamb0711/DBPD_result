HDFS-3582. Hook daemon process exit for testing. Contributed by Eli Collins


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1360329 13f79535-47bb-0310-9956-ffa450edef68

+
+import static org.apache.hadoop.util.ExitUtil.terminate;
+
-        System.exit(-1);
+        terminate(1);
-      LOG.error("Exception in secureMain", e);
-      System.exit(-1);
+      LOG.fatal("Exception in secureMain", e);
+      terminate(1);
-      // We need to add System.exit here because either shutdown was called or
-      // some disk related conditions like volumes tolerated or volumes required
+      // We need to terminate the process here because either shutdown was called
+      // or some disk related conditions like volumes tolerated or volumes required
-      // and Datanode process hangs without System.exit.
+      // and Datanode process hangs if it does not exit.
-      System.exit(0);
+      terminate(0);

INS26 INS40 UPD42 UPD42 UPD42 INS34 UPD42 INS34 DEL42 DEL34 DEL38 DEL42 DEL34 DEL38 DEL42