HDFS-12528. Add an option to not disable short-circuit reads on failures. Contributed by Xiao Chen.

-  private final int maxTotalSize;
+  private int maxTotalSize;
+  @VisibleForTesting
+  public void setMaxTotalSize(int maxTotalSize) {
+    this.maxTotalSize = maxTotalSize;
+  }
+
+
+  /**
+   * Can be used in testing to verify whether a read went through SCR, after
+   * the read is done and before the stream is closed.
+   */
+  @VisibleForTesting
+  public int getReplicaInfoMapSize() {
+    return replicaInfoMap.size();
+  }

INS31 INS31 INS78 INS83 INS39 INS42 INS44 INS8 INS29 INS78 INS83 INS39 INS42 INS8 INS42 INS39 INS42 INS21 INS65 INS42 INS41 INS7 INS66 INS66 INS32 INS22 INS42 INS42 INS42 INS52 INS42 DEL83