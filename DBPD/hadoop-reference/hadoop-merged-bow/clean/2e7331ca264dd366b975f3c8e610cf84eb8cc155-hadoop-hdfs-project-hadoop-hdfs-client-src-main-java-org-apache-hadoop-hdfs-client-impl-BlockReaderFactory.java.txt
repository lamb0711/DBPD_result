HDFS-12528. Add an option to not disable short-circuit reads on failures. Contributed by Xiao Chen.

+import static org.apache.hadoop.hdfs.client.HdfsClientConfigKeys.DFS_DOMAIN_SOCKET_DISABLE_INTERVAL_SECOND_KEY;
-      LOG.warn(this + ": unknown response code " + resp.getStatus() +
-          " while attempting to set up short-circuit access. " +
-          resp.getMessage() + ". Disabling short-circuit read for DataNode "
-          + datanode + " temporarily.");
+      final long expiration =
+          clientContext.getDomainSocketFactory().getPathExpireSeconds();
+      String disableMsg = "disabled temporarily for " + expiration + " seconds";
+      if (expiration == 0) {
+        disableMsg = "not disabled";
+      }
+      LOG.warn("{}: unknown response code {} while attempting to set up "
+              + "short-circuit access. {}. Short-circuit read for "
+              + "DataNode {} is {} based on {}.",
+          this, resp.getStatus(), resp.getMessage(), datanode,
+          disableMsg, DFS_DOMAIN_SOCKET_DISABLE_INTERVAL_SECOND_KEY);

INS26 INS40 INS60 INS60 INS25 INS83 INS39 INS59 INS43 INS59 INS27 INS8 INS42 INS32 INS42 INS42 INS27 INS42 INS34 INS21 INS27 INS52 MOV32 MOV32 INS42 INS42 INS42 INS32 INS42 INS45 INS42 INS45 INS7 UPD45 MOV45 UPD45 MOV45 UPD45 MOV45 INS42 INS42 INS42 INS45 DEL52 DEL42 DEL45 DEL27