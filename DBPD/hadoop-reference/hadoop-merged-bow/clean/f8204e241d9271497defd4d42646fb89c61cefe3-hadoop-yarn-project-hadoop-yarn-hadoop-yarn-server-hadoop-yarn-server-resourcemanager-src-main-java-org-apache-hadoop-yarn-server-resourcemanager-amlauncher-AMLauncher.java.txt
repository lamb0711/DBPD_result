YARN-2893. AMLaucher: sporadic job failures due to EOFException in readTokenStorageStream. (Zhihai Xu via gera)

+import org.apache.hadoop.classification.InterfaceAudience.Private;
-  private void setupTokens(
+  @Private
+  @VisibleForTesting
+  protected void setupTokens(
-    if (container.getTokens() != null) {
+    ByteBuffer tokens = container.getTokens();
+    if (tokens != null) {
-      dibb.reset(container.getTokens());
+      dibb.reset(tokens);
+      tokens.rewind();

INS26 INS40 INS78 INS78 UPD83 INS42 INS42 INS60 INS43 INS59 INS42 INS42 MOV32 INS42 INS21 INS32 INS42 INS42 INS42 DEL42 DEL42 DEL32