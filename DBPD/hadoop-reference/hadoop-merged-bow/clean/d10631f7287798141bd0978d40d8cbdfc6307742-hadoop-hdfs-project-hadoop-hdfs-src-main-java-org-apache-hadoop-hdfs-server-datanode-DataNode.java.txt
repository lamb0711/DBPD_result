Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1166495 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.protocol.FSConstants;
+import org.apache.hadoop.hdfs.protocol.HdfsConstants;
-import org.apache.hadoop.hdfs.server.common.HdfsConstants;
-import org.apache.hadoop.hdfs.server.common.HdfsConstants.ReplicaState;
-import org.apache.hadoop.hdfs.server.common.HdfsConstants.StartupOption;
+import org.apache.hadoop.hdfs.server.common.HdfsServerConstants;
+import org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState;
+import org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption;
-                                      HdfsConstants.READ_TIMEOUT);
+                                      HdfsServerConstants.READ_TIMEOUT);
-                                          HdfsConstants.WRITE_TIMEOUT);
+                                          HdfsServerConstants.WRITE_TIMEOUT);
-    ss.setReceiveBufferSize(FSConstants.DEFAULT_DATA_SOCKET_SIZE); 
+    ss.setReceiveBufferSize(HdfsConstants.DEFAULT_DATA_SOCKET_SIZE); 
-      assert FSConstants.LAYOUT_VERSION == nsInfo.getLayoutVersion() :
+      assert HdfsConstants.LAYOUT_VERSION == nsInfo.getLayoutVersion() :
-        + "Expected: "+ FSConstants.LAYOUT_VERSION 
+        + "Expected: "+ HdfsConstants.LAYOUT_VERSION 
-        bpRegistration.storageInfo.layoutVersion = FSConstants.LAYOUT_VERSION;
+        bpRegistration.storageInfo.layoutVersion = HdfsConstants.LAYOUT_VERSION;
-      if (FSConstants.LAYOUT_VERSION != bpNSInfo.getLayoutVersion()) {
+      if (HdfsConstants.LAYOUT_VERSION != bpNSInfo.getLayoutVersion()) {
-          "the same. Expected: "+ FSConstants.LAYOUT_VERSION +
+          "the same. Expected: "+ HdfsConstants.LAYOUT_VERSION +
-                            HdfsConstants.WRITE_TIMEOUT_EXTENSION * (targets.length-1);
+                            HdfsServerConstants.WRITE_TIMEOUT_EXTENSION * (targets.length-1);
-            FSConstants.SMALL_BUFFER_SIZE));
+            HdfsConstants.SMALL_BUFFER_SIZE));

UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40 UPD40