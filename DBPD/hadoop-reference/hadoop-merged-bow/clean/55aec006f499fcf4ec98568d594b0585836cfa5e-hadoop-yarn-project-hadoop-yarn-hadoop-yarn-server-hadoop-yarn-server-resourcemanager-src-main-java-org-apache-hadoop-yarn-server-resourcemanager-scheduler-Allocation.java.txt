Merge r1569890 through r1570083 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1570084 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.api.records.NMToken;
-import org.apache.hadoop.yarn.factories.RecordFactory;
-import org.apache.hadoop.yarn.factory.providers.RecordFactoryProvider;
-
-  public Allocation(List<Container> containers, Resource resourceLimit) {
-    this(containers, resourceLimit, null, null, null);
-  }
-
-  public Allocation(List<Container> containers, Resource resourceLimit,
-      Set<ContainerId> strictContainers) {
-    this(containers, resourceLimit, strictContainers, null, null);
-  }
+  final List<NMToken> nmTokens;
+    this(containers,  resourceLimit,strictContainers,  fungibleContainers,
+      fungibleResources, null);
+  }
+
+  public Allocation(List<Container> containers, Resource resourceLimit,
+      Set<ContainerId> strictContainers, Set<ContainerId> fungibleContainers,
+      List<ResourceRequest> fungibleResources, List<NMToken> nmTokens) {
+    this.nmTokens = nmTokens;
+  public List<NMToken> getNMTokens() {
+    return nmTokens;
+  }
+

MOV26 UPD40 INS23 MOV44 INS31 INS83 INS74 INS59 MOV44 MOV44 INS44 INS83 INS74 INS42 INS8 INS43 INS43 INS42 UPD74 UPD42 INS74 UPD42 INS74 INS42 INS21 INS43 INS43 INS41 INS42 INS42 UPD43 UPD43 INS43 INS43 INS42 INS42 INS43 INS43 INS7 INS42 INS42 INS42 UPD42 UPD42 INS42 UPD42 MOV42 INS42 INS42 INS22 INS42 INS52 INS42 DEL40 DEL26 DEL83 DEL42 DEL42 DEL42 DEL33 DEL33 DEL33 DEL17 DEL8 DEL31 DEL43 DEL33