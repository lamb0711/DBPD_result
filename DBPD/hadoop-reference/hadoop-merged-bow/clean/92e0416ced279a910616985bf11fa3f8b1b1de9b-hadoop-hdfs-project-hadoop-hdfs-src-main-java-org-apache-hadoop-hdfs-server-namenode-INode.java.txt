HDFS-4727. Update inodeMap after deleting files/directories/snapshots.  Contributed by Jing Zhao


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1470756 13f79535-47bb-0310-9956-ffa450edef68

+   * @param removedINodes
+   *          INodes collected from the descents for further cleaning up of 
+   *          inodeMap         
-      Snapshot prior, BlocksMapUpdateInfo collectedBlocks)
-      throws QuotaExceededException;
+      Snapshot prior, BlocksMapUpdateInfo collectedBlocks,
+      List<INode> removedINodes) throws QuotaExceededException;
-   * collects its blocks for further block deletion. If the INode is a 
-   * directory, the method goes down the subtree and collects blocks from the 
-   * descents, and clears its parent/children references as well. The method 
+   * collects its blocks for further block deletion. If the INode is a
+   * directory, the method goes down the subtree and collects blocks from the
+   * descents, and clears its parent/children references as well. The method
-   * @param collectedBlocks blocks collected from the descents for further block
-   *                        deletion/update will be added to this map.
+   * @param collectedBlocks
+   *          blocks collected from the descents for further block
+   *          deletion/update will be added to this map.
+   * @param removedINodes
+   *          INodes collected from the descents for further cleaning up of
+   *          inodeMap
-      BlocksMapUpdateInfo collectedBlocks);
+      BlocksMapUpdateInfo collectedBlocks, List<INode> removedINodes);

INS44 INS44 INS65 INS74 INS42 INS65 INS74 INS42 INS42 INS66 INS66 INS43 INS43 UPD66 UPD66 UPD66 UPD66 INS42 INS66 INS66 INS43 INS43 INS42 INS42 INS42 INS42