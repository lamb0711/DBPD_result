MAPREDUCE-2249. Check the reflexive property of Counters objects when comparing equality. Contributed by Devaraj K.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1144097 13f79535-47bb-0310-9956-ffa450edef68

-    public synchronized boolean equals(Object obj) {
+    public boolean equals(Object obj) {
+      if (this == obj) {
+        return true;
+      }
+      if (obj == null || obj.getClass() != getClass()) {
+        return false;
+      }
-      if (obj != null && obj instanceof Group) {
-        Group g = (Group) obj;
+      Group g = (Group) obj;
+      synchronized (this) {
-  public synchronized boolean equals(Object obj) {
+  public boolean equals(Object obj) {
+    if (this == obj) {
+      return true;
+    }
+    if (obj == null || obj.getClass() != getClass()) {
+      return false;
+    }
-    if (obj != null && obj instanceof Counters) {
-      Counters other = (Counters) obj;
+    Counters other = (Counters) obj;
+    synchronized (this) {

MOV60 MOV60 INS25 MOV60 INS51 INS25 MOV60 INS51 INS27 INS8 UPD27 INS8 INS52 MOV8 INS27 INS8 UPD27 INS8 INS52 MOV8 INS52 INS42 INS41 UPD27 INS27 INS41 INS52 INS42 INS41 UPD27 INS27 INS41 INS9 INS32 INS32 INS9 INS9 INS32 INS32 INS9 INS42 INS42 INS42 INS42 INS42 INS42 DEL83 DEL42 DEL42 DEL43 DEL62 DEL83 DEL42 DEL42 DEL43 DEL62