YARN-6246. Identifying starved apps does not need the scheduler writelock
(Contributed by Karthik Kambatla via Daniel Templeton)

+    FSQueue rootQueue = queueMgr.getRootQueue();
+
+    // Update demands and fairshares
+    writeLock.lock();
-      writeLock.lock();
-
-      FSQueue rootQueue = queueMgr.getRootQueue();
-
-
-      Resource clusterResource = getClusterResource();
-      rootQueue.update(clusterResource, shouldAttemptPreemption());
+      rootQueue.update(getClusterResource());
+    } finally {
+      writeLock.unlock();
+    }
+    readLock.lock();
+    try {
+      // Update starvation stats and identify starved applications
+      if (shouldAttemptPreemption()) {
+        for (FSLeafQueue queue : queueMgr.getLeafQueues()) {
+          queue.updateStarvedApps();
+        }
+      }
+
+      // Log debug information
-      writeLock.unlock();
+      readLock.unlock();

MOV8 MOV21 INS54 INS21 INS54 INS8 MOV8 INS32 INS8 INS8 MOV21 INS21 MOV21 INS42 INS42 INS25 MOV25 INS21 INS32 MOV32 INS8 INS32 INS42 INS42 MOV32 INS70 INS42 INS42 INS44 INS32 INS8 INS43 INS42 INS42 INS42 MOV21 UPD42 MOV42 UPD42 UPD42 DEL42 DEL43 DEL42 DEL59 DEL60 DEL54 DEL8