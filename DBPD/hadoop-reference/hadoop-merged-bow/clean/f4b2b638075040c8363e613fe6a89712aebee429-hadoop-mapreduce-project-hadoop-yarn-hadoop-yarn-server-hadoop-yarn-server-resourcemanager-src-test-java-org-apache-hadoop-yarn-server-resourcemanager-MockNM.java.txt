Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1170378 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.api.records.ContainerStatus;
-    Map<ApplicationId, List<Container>> conts = new HashMap<ApplicationId, List<Container>>();
-    conts.put(container.getId().getAppId(), Arrays
-        .asList(new Container[] { container }));
+    Map<ApplicationId, List<ContainerStatus>> conts = 
+        new HashMap<ApplicationId, List<ContainerStatus>>();
+    conts.put(container.getId().getApplicationAttemptId().getApplicationId(), 
+        Arrays.asList(new ContainerStatus[] { container.getContainerStatus() }));
-    return nodeHeartbeat(new HashMap<ApplicationId, List<Container>>(), b);
+    return nodeHeartbeat(new HashMap<ApplicationId, List<ContainerStatus>>(), b);
-      List<Container>> conts, boolean isHealthy) throws Exception {
+      List<ContainerStatus>> conts, boolean isHealthy) throws Exception {
-    for (Map.Entry<ApplicationId, List<Container>> entry : conts.entrySet()) {
-      status.setContainers(entry.getKey(), entry.getValue());
+    for (Map.Entry<ApplicationId, List<ContainerStatus>> entry : conts.entrySet()) {
+      status.setContainersStatuses(entry.getValue());

INS26 INS40 UPD74 UPD74 UPD74 UPD74 INS32 UPD43 UPD74 UPD43 UPD74 MOV32 INS42 UPD74 UPD42 UPD74 UPD42 UPD74 UPD42 UPD5 UPD74 UPD43 UPD42 UPD43 UPD43 INS32 UPD43 UPD42 UPD42 UPD42 INS42 INS42 UPD42 DEL42 DEL42 DEL42 DEL32