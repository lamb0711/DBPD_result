Merge trunk into auto-HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3042@1337645 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.HashSet;
+import java.util.Set;
-import org.apache.hadoop.hdfs.security.token.delegation.DelegationTokenIdentifier;
+    Set<FileSystem> fsSet = new HashSet<FileSystem>();
-      FileSystem fs = FileSystem.get(p.toUri(), conf);
+      fsSet.add(p.getFileSystem(conf));
+    }
+    for (FileSystem fs : fsSet) {
-  @SuppressWarnings("unchecked")
-  public static Token<DelegationTokenIdentifier> getDelegationToken(
+  public static Token<?> getDelegationToken(
-    return (Token<DelegationTokenIdentifier>) credentials.getToken(new Text(
-        namenode));
+    return (Token<?>) credentials.getToken(new Text(namenode));

MOV26 INS26 UPD40 INS40 INS8 UPD74 MOV74 INS60 INS70 MOV70 INS76 INS74 INS59 MOV44 INS42 INS8 INS44 INS42 INS43 INS43 INS42 INS14 INS21 MOV43 INS42 UPD74 MOV74 INS42 INS42 INS74 INS32 INS76 INS43 INS43 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL59 DEL60 DEL8 DEL42 DEL45 DEL79 DEL42 DEL43 DEL42 DEL43