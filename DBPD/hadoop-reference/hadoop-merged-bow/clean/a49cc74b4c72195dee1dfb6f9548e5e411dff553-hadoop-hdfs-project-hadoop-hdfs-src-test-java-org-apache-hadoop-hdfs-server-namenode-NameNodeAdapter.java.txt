HDFS-9129. Move the safemode block count into BlockManager. Contributed by Mingliang Liu.

-import org.apache.hadoop.hdfs.server.namenode.FSNamesystem.SafeModeInfo;
-  public static int getSafeModeSafeBlocks(NameNode nn) {
-    SafeModeInfo smi = nn.getNamesystem().getSafeModeInfoForTests();
-    if (smi == null) {
+  public static long getSafeModeSafeBlocks(NameNode nn) {
+    if (!nn.getNamesystem().isInSafeMode()) {
-    return smi.blockSafe;
+    Object bmSafeMode = Whitebox.getInternalState(
+        nn.getNamesystem().getBlockManager(), "bmSafeMode");
+    return (long)Whitebox.getInternalState(bmSafeMode, "blockSafe");

UPD39 MOV60 INS38 UPD43 INS11 MOV32 UPD42 UPD42 INS32 INS39 INS32 UPD42 INS42 INS42 INS32 INS45 INS42 INS42 INS42 INS45 INS32 INS42 INS42 INS42 DEL40 DEL26 DEL42 DEL33 DEL27 DEL40