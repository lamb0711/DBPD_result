YARN-8130 Race condition when container events are published for KILLED applications. (Rohith Sharma K S via Haibo Chen)

+import org.apache.hadoop.yarn.api.records.ApplicationId;
-  public NMTimelineEvent(NMTimelineEventType type) {
-    super(type);
+  private ApplicationId appId;
+
+  public NMTimelineEvent(NMTimelineEventType type, ApplicationId appId) {
+    super(type, System.currentTimeMillis());
+    this.appId=appId;
-  public NMTimelineEvent(NMTimelineEventType type, long timestamp) {
-    super(type, timestamp);
+  public ApplicationId getApplicationId() {
+    return appId;

INS26 INS40 INS23 INS83 INS43 INS59 MOV44 INS43 INS42 INS42 INS42 UPD43 UPD42 INS21 INS42 INS41 UPD42 INS32 INS7 INS42 INS42 INS42 INS22 INS42 INS52 INS42 DEL42 DEL39 DEL42 DEL44 DEL42 DEL42 DEL46