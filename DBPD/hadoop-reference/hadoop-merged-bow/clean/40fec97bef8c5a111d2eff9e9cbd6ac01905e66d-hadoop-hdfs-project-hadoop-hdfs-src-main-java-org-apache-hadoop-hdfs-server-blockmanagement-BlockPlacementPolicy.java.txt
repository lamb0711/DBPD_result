svn merge -c -1534417 . for reverting HDFS-4885, which should be committed to trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1534424 13f79535-47bb-0310-9956-ffa450edef68

-   * Verify if the block's placement meets requirement of placement policy,
-   * i.e. replicas are placed on no less than minRacks racks in the system.
+   * Verify that the block is replicated on at least minRacks different racks
+   * if there is more than minRacks rack in the system.
-   * @param numOfReplicas replica number of file to be verified
-   * @return the result of verification
+   * @param minRacks number of racks the block should be replicated to
+   * @return the difference between the required and the actual number of racks
+   * the block is replicated to.
-  abstract public BlockPlacementStatus verifyBlockPlacement(String srcPath,
-      LocatedBlock lBlk,
-      int numOfReplicas);
+  abstract public int verifyBlockPlacement(String srcPath,
+                                           LocatedBlock lBlk,
+                                           int minRacks);

INS39 UPD42 UPD66 UPD66 UPD42 UPD66 UPD66 INS66 DEL42 DEL43