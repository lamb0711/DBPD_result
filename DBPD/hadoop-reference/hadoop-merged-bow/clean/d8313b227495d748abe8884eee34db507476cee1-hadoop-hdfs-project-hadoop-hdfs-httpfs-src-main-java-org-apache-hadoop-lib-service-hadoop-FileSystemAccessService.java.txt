HDFS-14850. Optimize FileSystemAccessService#getFileSystemConfiguration. Contributed by Lisheng Sun.

+  private Configuration fileSystemConf;
+      fileSystemConf = getNewFileSystemConfiguration();
+  private Configuration getNewFileSystemConfiguration() {
+    Configuration conf = new Configuration(true);
+    ConfigurationUtils.copy(serviceHadoopConf, conf);
+    conf.setBoolean(FILE_SYSTEM_SERVICE_CREATED, true);
+
+    // Force-clear server-side umask to make HttpFS match WebHDFS behavior
+    conf.set(FsPermission.UMASK_LABEL, "000");
+    return conf;
+  }
+
-    Configuration conf = new Configuration(true);
-    ConfigurationUtils.copy(serviceHadoopConf, conf);
-    conf.setBoolean(FILE_SYSTEM_SERVICE_CREATED, true);
-
-    // Force-clear server-side umask to make HttpFS match WebHDFS behavior
-    conf.set(FsPermission.UMASK_LABEL, "000");
-
-    return conf;
+    return fileSystemConf;

MOV31 INS23 INS31 INS83 INS43 INS59 UPD83 UPD42 MOV78 INS83 INS43 INS42 INS8 INS42 INS42 INS42 INS41 INS42 INS21 INS7 INS42 INS32 INS42