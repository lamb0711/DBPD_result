YARN-7652. Handle AM register requests asynchronously in FederationInterceptor. Contributed by Botong Huang.

-    this.heartbeatHandler =
-        new AMHeartbeatRequestHandler(this.conf, this.applicationId);
+    // Relayer's rmClient will be set after the RM connection is created
+    this.heartbeatHandler = createAMHeartbeatRequestHandler(this.conf,
+        this.applicationId, this.rmProxyRelayer);
+
+  @VisibleForTesting
+  protected AMHeartbeatRequestHandler createAMHeartbeatRequestHandler(
+      Configuration config, ApplicationId appId,
+      AMRMClientRelayer relayer) {
+    return new AMHeartbeatRequestHandler(config, appId, relayer);
+  }
+
-
-    this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);
-  protected void setHandlerThread(AMHeartbeatRequestHandler thread) {
-    this.heartbeatHandler = thread;
-  }
-
-  @VisibleForTesting

MOV31 MOV21 MOV43 UPD42 INS44 INS44 INS43 INS42 INS43 UPD42 INS43 INS42 INS41 INS42 INS42 INS42 INS14 INS32 MOV43 INS42 INS42 INS42 INS42 MOV22 MOV22 MOV22 DEL14 DEL39 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21 DEL52 DEL42 DEL22 DEL42 DEL32 DEL21