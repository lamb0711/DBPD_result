HDFS-3741. Exhaustive failure injection test for skipped RPCs. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3077@1370497 13f79535-47bb-0310-9956-ffa450edef68

-  private final InetSocketAddress addr;
+  protected final InetSocketAddress addr;
+
+  static final Factory FACTORY = new AsyncLogger.Factory() {
+    @Override
+    public AsyncLogger createLogger(Configuration conf, NamespaceInfo nsInfo,
+        String journalId, InetSocketAddress addr) {
+      return new IPCLoggerChannel(conf, nsInfo, journalId, addr);
+    }
+  };
+
-
+    proxy = createProxy();
+    return proxy;
+  }
+  
+  protected QJournalProtocol createProxy() throws IOException {
-    proxy = new QJournalProtocolTranslatorPB(pbproxy);
-    return proxy;
+    return new QJournalProtocolTranslatorPB(pbproxy);

INS23 INS31 UPD83 INS83 INS83 INS43 INS59 INS83 INS43 INS42 INS43 INS8 UPD42 INS42 INS42 INS14 INS42 INS42 MOV25 INS21 MOV41 INS41 INS43 INS1 INS7 MOV14 INS40 INS31 INS42 INS32 INS78 INS83 INS43 INS42 INS44 INS44 INS44 INS44 INS8 INS42 INS42 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS42 INS42 INS42 INS14 INS43 INS42 INS42 INS42 INS42 INS42 DEL42 DEL7 DEL21