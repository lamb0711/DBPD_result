HDFS-9244. Support nested encryption zones.

Change-Id: I43a13035a8b27956e90967ee82058efb647c3415

-    if ((path == null) || !dfs.isHDFSEncryptionEnabled()) {
+    if ((path == null) || path.isRoot() || !dfs.isHDFSEncryptionEnabled()) {
-    String absSrc = path.toUri().getPath();
-    EncryptionZone ez = dfs.getEZForPath(absSrc);
-    if ((ez != null) && !ez.getPath().equals(absSrc)) {
+    String parentSrc = path.getParent().toUri().getPath();
+    EncryptionZone ez = dfs.getEZForPath(parentSrc);
+    if ((ez != null)) {

MOV36 INS32 UPD42 INS42 INS42 UPD42 INS32 MOV42 INS42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL38 DEL27