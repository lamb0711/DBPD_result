YARN-2091. Add more values to ContainerExitStatus and pass it from NM to RM and then to app masters (Tsuyoshi OZAWA via bikas)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1601762 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.server.nodemanager.ContainerExecutor.ExitCode;
-      container.exitCode = ExitCode.TERMINATED.getExitCode();
+      container.exitCode = killEvent.getContainerExitStatus();
+      container.exitCode = killEvent.getContainerExitStatus();
-      container.exitCode = exitEvent.getExitCode();
+      if (container.hasDefaultExitCode()) {
+        container.exitCode = exitEvent.getExitCode();
+      }
+
-      container.exitCode = ExitCode.TERMINATED.getExitCode();
+      container.exitCode = killEvent.getContainerExitStatus();
+
+  private boolean hasDefaultExitCode() {
+    return (this.exitCode == ContainerExitStatus.INVALID);
+  }
+

INS31 INS83 INS39 INS42 INS8 INS41 INS21 INS25 INS36 INS7 INS32 INS8 INS27 INS40 INS32 INS42 INS42 MOV21 INS22 INS40 INS42 UPD42 INS42 INS42 INS42 UPD42 INS52 INS42 DEL40 DEL26 DEL40 DEL40