HDFS-12862. CacheDirective becomes invalid when NN restart or failover. Contributed by Wang XL.

-      writeLong(directive.getExpiration().getMillis(), out);
+      writeLong(directive.getExpiration().getAbsoluteMillis(), out);
-          "" + directive.getExpiration().getMillis());
+          "" + directive.getExpiration().getAbsoluteMillis());

UPD42 UPD42