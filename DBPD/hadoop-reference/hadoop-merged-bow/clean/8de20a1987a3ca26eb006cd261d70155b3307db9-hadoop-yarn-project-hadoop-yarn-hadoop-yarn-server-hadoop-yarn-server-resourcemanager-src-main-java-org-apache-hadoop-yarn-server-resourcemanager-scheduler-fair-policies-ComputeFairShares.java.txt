Merge trunk into HDFS-6584

-      if (maxShare == Integer.MAX_VALUE) {
-        totalMaxShare = Integer.MAX_VALUE;
+      totalMaxShare = (int) Math.min((long)maxShare + (long)totalMaxShare,
+          Integer.MAX_VALUE);
+      if (totalMaxShare == Integer.MAX_VALUE) {
-      } else {
-        totalMaxShare += maxShare;

INS21 INS25 INS7 INS27 INS8 INS42 INS11 INS42 INS40 MOV10 INS39 INS32 INS42 INS42 INS27 INS40 INS11 INS11 INS39 INS42 INS39 INS42 DEL42 DEL40 DEL27 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL7 DEL21 DEL8 DEL25