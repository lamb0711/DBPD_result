HADOOP-9748. Reduce blocking on UGI.ensureInitialized (daryn)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504874 13f79535-47bb-0310-9956-ffa450edef68

-  private static synchronized void ensureInitialized() {
+  private static void ensureInitialized() {
-      initialize(new Configuration(), false);
+      synchronized(UserGroupInformation.class) {
+        if (conf == null) { // someone might have beat us
+          initialize(new Configuration(), false);
+        }
+      }

INS8 INS25 INS27 INS8 INS42 INS33 INS51 INS57 MOV8 INS43 INS42 DEL83