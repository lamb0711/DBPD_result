HDFS-10662. Optimize UTF8 string/byte conversions. Contributed by Daryn Sharp.

+
+  // Using the charset canonical name for String/byte[] conversions is much
+  // more efficient due to use of cached encoders/decoders.
+  private static final String UTF8_CSN = StandardCharsets.UTF_8.name();
+
-    return str.getBytes(StandardCharsets.UTF_8);
+    try {
+      return str.getBytes(UTF8_CSN);
+    } catch (UnsupportedEncodingException e) {
+      // should never happen!
+      throw new IllegalArgumentException("UTF8 decoding is not supported", e);
+    }
-  private static String bytes2String(byte[] bytes, int offset, int length) {
+  static String bytes2String(byte[] bytes, int offset, int length) {
-      return new String(bytes, offset, length, "UTF8");
-    } catch(UnsupportedEncodingException e) {
-      assert false : "UTF8 encoding is not supported ";
+      return new String(bytes, offset, length, UTF8_CSN);
+    } catch (UnsupportedEncodingException e) {
+      // should never happen!
+      throw new IllegalArgumentException("UTF8 encoding is not supported", e);
-    return null;

INS23 INS83 INS83 INS83 INS43 INS59 INS8 INS42 INS42 INS32 INS54 INS40 INS42 INS8 INS12 MOV41 INS44 INS8 INS43 INS42 INS53 INS53 INS42 INS42 INS14 INS42 INS14 INS43 INS45 INS42 INS43 INS45 INS42 INS42 INS42 DEL40 DEL8 DEL83 DEL45 DEL9 DEL45 DEL6 DEL33 DEL41