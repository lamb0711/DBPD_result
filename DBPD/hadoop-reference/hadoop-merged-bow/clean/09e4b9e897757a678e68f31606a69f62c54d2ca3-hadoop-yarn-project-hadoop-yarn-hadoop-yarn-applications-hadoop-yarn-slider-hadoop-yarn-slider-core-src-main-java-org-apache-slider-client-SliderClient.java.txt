YARN-5690. Integrate native services modules into maven build. Contributed by Billie Rinaldi

+    if (!hasServerLog4jProperties) {
+      // check for log4j properties in hadoop conf dir
+      String hadoopConfDir = System.getenv(ApplicationConstants.Environment
+          .HADOOP_CONF_DIR.name());
+      if (hadoopConfDir != null) {
+        File localFile = new File(hadoopConfDir, SliderKeys
+            .LOG4J_SERVER_PROP_FILENAME);
+        if (localFile.exists()) {
+          Path localFilePath = createLocalPath(localFile);
+          remoteConfPath = new Path(clusterDirectory,
+              SliderKeys.SUBMITTED_CONF_DIR);
+          Path remoteFilePath = new Path(remoteConfPath, SliderKeys
+              .LOG4J_SERVER_PROP_FILENAME);
+          copy(config, localFilePath, remoteFilePath);
+          hasServerLog4jProperties = true;
+        }
+      }
+    }
-    // if the conf dir has a log4j-server.properties, switch to that
+    // if the conf dir has a slideram-log4j.properties, switch to that
-    String libDir = System.getProperty(SliderKeys.PROPERTY_LIB_DIR);
-    if (isSet(libDir)) {
-      File srcFolder = new File(libDir);
+    String[] libDirs = SliderUtils.getLibDirs();
+    if (libDirs.length > 0) {
-      // copy all jars except slider-core-<version>.jar
-      tarGzipFolder(srcFolder, tempLibTarGzipFile, createJarFilter());
+      // copy all jars
+      tarGzipFolder(libDirs, tempLibTarGzipFile, createJarFilter());

INS25 INS38 INS8 INS5 INS27 INS42 INS60 INS25 MOV43 INS85 UPD42 INS40 INS34 INS43 INS59 INS27 INS8 UPD42 UPD42 INS42 INS42 INS32 INS42 INS33 INS60 INS25 UPD42 INS42 INS42 INS32 MOV43 INS59 INS32 INS8 INS40 INS42 INS42 INS14 INS42 INS42 INS60 INS21 INS60 INS21 INS21 MOV43 INS42 INS40 INS43 INS59 INS7 INS43 INS59 INS32 INS7 INS42 INS42 INS32 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS42 INS42 INS42 INS9 INS42 INS42 INS43 INS42 INS40 INS43 INS42 INS40 INS42 INS42 DEL40 DEL42 DEL42 DEL32 DEL42 DEL42 DEL14 DEL59 DEL60