HADOOP-9087. Queue size metric for metric sinks isn't actually maintained. Contributed by Akira AJISAKA

-      if (queue.enqueue(buffer)) return true;
+      if (queue.enqueue(buffer)) {
+        refreshQueueSizeGauge();
+        return true;
+      }
-    if (!queue.enqueue(waitableBuffer)) {
+    if (queue.enqueue(waitableBuffer)) {
+      refreshQueueSizeGauge();
+    } else {
+        refreshQueueSizeGauge();
+          refreshQueueSizeGauge();
+  private void refreshQueueSizeGauge() {
+    qsize.set(queue.size());
+  }
+

INS31 INS83 INS39 INS42 INS8 INS21 MOV32 INS8 INS32 INS21 INS42 INS42 INS32 INS8 INS32 INS42 INS42 INS21 MOV41 INS42 INS21 INS32 INS32 INS42 INS42 INS21 INS32 INS42 DEL38