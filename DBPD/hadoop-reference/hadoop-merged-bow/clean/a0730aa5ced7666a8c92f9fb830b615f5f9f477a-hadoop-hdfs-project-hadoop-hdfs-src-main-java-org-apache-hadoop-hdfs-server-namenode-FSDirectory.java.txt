HDFS-10851. FSDirStatAndListingOp: stop passing path as string. Contributed by Daryn Sharp.

-  INodeAttributes getAttributes(String fullPath, byte[] path,
-      INode node, int snapshot) {
+  INodeAttributes getAttributes(INodesInPath iip)
+      throws FileNotFoundException {
+    INode node = FSDirectory.resolveLastINode(iip);
+    int snapshot = iip.getPathSnapshotId();
-      fullPath = fullPath
-          + (fullPath.endsWith(Path.SEPARATOR) ? "" : Path.SEPARATOR)
-          + DFSUtil.bytes2String(path);
-      nodeAttrs = attributeProvider.getAttributes(fullPath, nodeAttrs);
+      // permission checking sends the full components array including the
+      // first empty component for the root.  however file status
+      // related calls are expected to strip out the root component according
+      // to TestINodeAttributeProvider.
+      byte[][] components = iip.getPathComponents();
+      components = Arrays.copyOfRange(components, 1, components.length);
+      nodeAttrs = attributeProvider.getAttributes(components, nodeAttrs);

INS43 INS8 UPD43 UPD42 INS42 INS60 INS60 MOV60 MOV25 MOV41 UPD42 MOV43 INS59 INS39 INS59 INS42 INS32 INS42 INS32 INS60 INS21 INS42 INS42 INS42 INS42 INS42 INS5 INS59 INS7 INS39 INS85 INS85 INS42 INS32 INS42 INS32 INS42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS34 INS40 UPD42 DEL42 DEL42 DEL42 DEL40 DEL32 DEL45 DEL40 DEL16 DEL36 DEL32 DEL27 DEL7 DEL21 DEL39 DEL85 DEL5 DEL42 DEL44 DEL42 DEL44 DEL39 DEL42 DEL44 DEL8