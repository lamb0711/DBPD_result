HADOOP-12385. Include nested stack trace in SaslRpcClient.getServerToken() (stevel)

+import java.util.Locale;
+  // This log is public as it is referenced in tests
-  
+
-  
-  
+
-    if (LOG.isDebugEnabled()) {
+    if (LOG.isDebugEnabled() && selectedAuthType != null) {
-  
-  }  
-  
+  }
+
-          return null; // tokens aren't supported or user doesn't have one
+          LOG.debug("tokens aren't supported for this protocol" +
+              " or user doesn't have one");
+          return null;
-          return null; // client isn't using kerberos
+          LOG.debug("client isn't using kerberos");
+          return null;
-          return null; // protocol doesn't use kerberos
+          LOG.debug("protocol doesn't use kerberos");
+          return null;
-    
+
-  
+
-   * @return Token<?> for server, or null if no token available
+   * @return Token for server, or null if no token available
-    LOG.debug("Get token info proto:"+protocol+" info:"+tokenInfo);
+    LOG.debug("Get token info proto:" + protocol + " info:" + tokenInfo);
-    } catch (InstantiationException e) {
-      throw new IOException(e.toString());
-    } catch (IllegalAccessException e) {
-      throw new IOException(e.toString());
+    } catch (InstantiationException | IllegalAccessException e) {
+      throw new IOException(e.toString(), e);
-  
+
-    LOG.debug("Get kerberos info proto:"+protocol+" info:"+krbInfo);
+    LOG.debug("Get kerberos info proto:" + protocol + " info:" + krbInfo);
-  
-    
+
-    
+
-  
+
-  
+
-  
+
-    return qop != null && !"auth".equalsIgnoreCase(qop);
+    return qop != null && !"auth".toLowerCase(Locale.ENGLISH).equals(qop);
-  
+
-   * @param in - InputStream used to make the connection
-   * @return InputStream that may be using SASL unwrap
+   * @param out - OutputStream used to make the connection
+   * @return OutputStream that may be using wrapping
-    
+
-    
+
-    
+
-      
+
-      
+
-  
+

INS26 INS40 INS27 UPD66 UPD42 UPD66 UPD66 MOV32 INS27 INS42 INS33 INS84 INS21 INS41 INS21 MOV41 INS21 MOV41 MOV43 MOV43 INS32 UPD42 INS32 INS33 INS32 MOV33 INS32 INS42 MOV45 INS42 INS40 INS42 INS42 INS27 INS42 INS42 INS45 INS42 INS42 INS45 INS45 INS45 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL32 DEL14 DEL53 DEL8 DEL12