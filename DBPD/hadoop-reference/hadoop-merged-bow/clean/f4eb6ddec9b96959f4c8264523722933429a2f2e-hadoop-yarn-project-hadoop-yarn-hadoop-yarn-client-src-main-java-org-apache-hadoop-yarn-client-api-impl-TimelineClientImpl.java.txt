YARN-1780. Improved logging in the Timeline client and server. Contributed by Zhijie Shen.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1575141 13f79535-47bb-0310-9956-ffa450edef68

+    LOG.info("Timeline service address: " + resURI);
-    ClientResponse resp = doPostingEntities(entitiesContainer);
-    if (resp.getClientResponseStatus() != ClientResponse.Status.OK) {
+    ClientResponse resp;
+    try {
+      resp = doPostingEntities(entitiesContainer);
+    } catch (RuntimeException re) {
+      // runtime exception is expected if the client cannot connect the server
+      String msg =
+          "Failed to get the response from the timeline server.";
+      LOG.error(msg, re);
+      throw re;
+    }
+    if (resp == null ||
+        resp.getClientResponseStatus() != ClientResponse.Status.OK) {
-      if (LOG.isDebugEnabled()) {
+      if (LOG.isDebugEnabled() && resp != null) {

INS21 INS54 INS32 INS8 INS12 INS27 INS42 INS42 INS27 INS21 INS44 INS8 INS27 MOV27 INS45 INS42 INS7 INS43 INS42 INS60 INS21 INS53 INS42 INS33 INS27 INS42 MOV32 INS42 INS43 INS59 INS32 INS42 MOV32 INS27 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS33