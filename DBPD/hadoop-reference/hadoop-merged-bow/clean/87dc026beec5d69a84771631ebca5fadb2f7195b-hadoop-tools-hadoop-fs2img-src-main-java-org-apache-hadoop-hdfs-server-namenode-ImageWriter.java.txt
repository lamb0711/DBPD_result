HDFS-12789. [READ] Image generation tool does not close an opened stream

-    dirsTmp = File.createTempFile("fsimg_dir", null);
-    dirsTmp.deleteOnExit();
-    dirs = beginSection(new FileOutputStream(dirsTmp));
+    FileOutputStream dirsTmpStream = null;
+    try {
+      dirsTmp = File.createTempFile("fsimg_dir", null);
+      dirsTmp.deleteOnExit();
+      dirsTmpStream = new FileOutputStream(dirsTmp);
+      dirs = beginSection(dirsTmpStream);
+    } catch (IOException e) {
+      IOUtils.cleanupWithLogger(null, raw, dirsTmpStream);
+      throw e;
+    }
+
-      // appropriate to close raw?
-      IOUtils.cleanup(null, raw, dirs);
+      IOUtils.cleanupWithLogger(null, raw, dirsTmpStream, dirs);

INS60 INS54 INS43 INS59 INS8 INS12 INS42 INS42 INS33 MOV21 MOV21 MOV21 INS21 MOV44 INS8 INS44 INS7 INS21 MOV53 INS43 INS42 INS53 UPD42 MOV14 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS42 INS42 UPD42 INS42 DEL42 DEL32