HDDS-682. Unified o3 address parsing for ozonen sh. Contributed by Elek, Marton.

-import com.google.common.base.Strings;
-import picocli.CommandLine.Command;
-import picocli.CommandLine.Option;
-import picocli.CommandLine.Parameters;
-
-import org.apache.hadoop.ozone.client.OzoneClientUtils;
-import org.apache.hadoop.ozone.client.OzoneVolume;
-import org.apache.hadoop.ozone.client.rest.response.VolumeInfo;
-import org.apache.hadoop.ozone.client.OzoneClientException;
-import org.apache.hadoop.ozone.web.ozShell.Handler;
-import org.apache.hadoop.ozone.web.ozShell.Shell;
-import org.apache.hadoop.ozone.web.utils.JsonUtils;
-
-import java.net.URI;
+import org.apache.hadoop.ozone.client.OzoneClient;
+import org.apache.hadoop.ozone.client.OzoneClientUtils;
+import org.apache.hadoop.ozone.client.OzoneVolume;
+import org.apache.hadoop.ozone.client.rest.response.VolumeInfo;
+import org.apache.hadoop.ozone.web.ozShell.Handler;
+import org.apache.hadoop.ozone.web.ozShell.OzoneAddress;
+import org.apache.hadoop.ozone.web.ozShell.Shell;
+import org.apache.hadoop.ozone.web.utils.JsonUtils;
+
+import picocli.CommandLine.Command;
+import picocli.CommandLine.Option;
+import picocli.CommandLine.Parameters;
+
-    URI ozoneURI = verifyURI(uri);
-    if (!Strings.isNullOrEmpty(ozoneURI.getPath()) && !ozoneURI.getPath()
-        .equals("/")) {
-      throw new OzoneClientException(
-          "Invalid URI: " + ozoneURI + " . Specified path not used." + ozoneURI
-              .getPath());
-    }
+    OzoneAddress address = new OzoneAddress(uri);
+    address.ensureRootAddress();
+    OzoneClient client = address.createClient(createOzoneConfiguration());

MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 UPD40 UPD40 INS21 INS60 UPD43 INS32 INS43 INS59 UPD42 UPD42 INS14 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 INS32 INS43 INS42 UPD42 MOV42 UPD42 MOV42 INS32 INS42 INS42 DEL40 DEL26 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL38 DEL42 DEL32 DEL45 DEL32 DEL38 DEL27 DEL43 DEL45 DEL42 DEL45 DEL32 DEL27 DEL14 DEL53 DEL8 DEL25