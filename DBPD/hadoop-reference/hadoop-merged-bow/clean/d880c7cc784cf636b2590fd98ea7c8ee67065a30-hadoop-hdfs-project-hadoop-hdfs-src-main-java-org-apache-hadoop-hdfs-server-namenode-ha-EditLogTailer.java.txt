HDFS-2772. On transition to active, standby should not swallow ELIE. Contributed by Aaron T. Myers


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1232197 13f79535-47bb-0310-9956-ffa450edef68

-        LOG.warn("Error while reading edits from disk. Will try again.", elie);
-      }
-      if (LOG.isDebugEnabled()) {
-        LOG.debug("editsLoaded: " + editsLoaded);
+        throw elie;
+      } finally {
+        if (editsLoaded > 0) {
+          LOG.info(String.format("Loaded %d edits starting from txid %d ",
+              editsLoaded, lastTxnId));
+        }
+        } catch (EditLogInputException elie) {
+          LOG.warn("Error while reading edits from disk. Will try again.", elie);
-          LOG.error("Error encountered while tailing edits. Shutting down " +
-              "standby NN.", t);
+          LOG.error("Unknown error encountered while tailing edits. " +
+              "Shutting down standby NN.", t);

INS54 MOV8 INS12 INS8 INS44 INS8 MOV25 MOV12 INS43 INS42 MOV21 INS53 INS27 INS42 INS42 INS42 INS34 INS42 INS32 UPD42 MOV42 INS42 INS45 INS42 INS42 UPD45 UPD45 DEL42 DEL42 DEL32 DEL45 DEL42 DEL27 DEL54