HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-    final ECSchema schema = ecZone != null ? ecZone.getSchema() : null;
-    final int cellSize = ecZone != null ? ecZone.getCellSize() : 0;
+    final ErasureCodingPolicy ecPolicy = ecZone != null ? ecZone
+        .getErasureCodingPolicy() : null;
-          Collections.<LocatedBlock> emptyList(), null, false, feInfo, schema,
-          cellSize);
+          Collections.<LocatedBlock> emptyList(), null, false, feInfo, ecPolicy);
-          schema, cellSize);
+          ecPolicy);
-              blockLog.warn("No EC schema found for the file {}. "
+              blockLog.warn("No erasure coding policy found for the file {}. "
-                ecZone.getSchema(), ecZone.getCellSize());
+                ecZone.getErasureCodingPolicy());

UPD40 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD45 DEL83 DEL39 DEL42 DEL42 DEL33 DEL27 DEL42 DEL42 DEL32 DEL34 DEL16 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32