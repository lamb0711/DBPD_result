Merge trunk to HDFS-4685.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4685@1552467 13f79535-47bb-0310-9956-ffa450edef68

+    boolean firstReplicationLog = true;
-            //Log info about one block for this node which needs replication
+            // Log info about one block for this node which needs replication
-              logBlockReplicationInfo(block, srcNode, num);
+              if (firstReplicationLog) {
+                logBlockReplicationInfo(block, srcNode, num);
+              }
+              // Allowing decommission as long as default replication is met
+              if (curReplicas >= defaultReplication) {
+                status = false;
+                firstReplicationLog = false;
+              }

INS60 INS39 INS59 INS42 INS9 INS25 MOV38 INS8 MOV21 MOV25 INS25 INS42 INS27 INS8 INS42 INS42 INS21 INS21 INS7 INS7 INS42 INS9 INS42 INS9