YARN-5266. Wrong exit code while trying to get app logs using regex via CLI. Contributed by Xuan Gong

-  public void printContainerLogsFromRunningApplication(Configuration conf,
+  public int printContainerLogsFromRunningApplication(Configuration conf,
-      List<String> matchedFiles = getMatchedLogFiles(
-          request, allLogs, true);
+      List<String> matchedFiles = getMatchedLogFiles(request, allLogs);
-        return;
+        System.err.println("Can not find any log file matching the pattern: "
+            + request.getLogTypes() + " for the container: " + containerIdStr
+            + " within the application: " + request.getAppId());
+        return -1;
-
+      boolean foundAnyLogs = false;
+          foundAnyLogs = true;
-      logCliHelper.dumpAContainersLogsForALogType(newOptions, false);
+      int result = logCliHelper.dumpAContainerLogsForLogType(
+          newOptions, false);
+      if (result == 0 || foundAnyLogs) {
+        return 0;
+      } else {
+        return -1;
+      }
+      System.err.println("Can not find any log file matching the pattern: "
+          + request.getLogTypes() + " for the container: "
+          + request.getContainerId() + " within the application: "
+          + request.getAppId());
-    return logCliHelper.dumpAContainersLogsForALogType(newOptions);
+    return logCliHelper.dumpAContainerLogsForLogType(newOptions);
+      System.err.println("Can not find any log file matching the pattern: "
+          + request.getLogTypes() + " for the container: "
+          + request.getContainerId() + " within the application: "
+          + request.getAppId());
-    return logCliHelper.dumpAContainersLogsForALogTypeWithoutNodeId(
+    return logCliHelper.dumpAContainerLogsForLogTypeWithoutNodeId(
-        "Work with -am/-containerId and specify comma-separated value "
+        "Specify comma-separated value "
-      printContainerLogsFromRunningApplication(getConf(), request,
+      resultCode = printContainerLogsFromRunningApplication(getConf(), request,
-    int resultCode = 0;
+    int resultCode = -1;
-        resultCode = -1;
+        System.err.println("Can not find any log file matching the pattern: "
+            + options.getLogTypes() + " for the application: "
+            + options.getAppId());
-        printContainerLogsFromRunningApplication(getConf(), container,
-            logCliHelper);
+        int result = printContainerLogsFromRunningApplication(getConf(),
+            container, logCliHelper);
+        if (result == 0) {
+          resultCode = 0;
+        }
-        matchedFiles = getMatchedLogFiles(
-            request, files, true);
+        matchedFiles = getMatchedLogFiles(request, files);
-      Collection<String> candidate, boolean printError) throws IOException {
+      Collection<String> candidate) throws IOException {
-    if (matchedFiles.isEmpty()) {
-      if (printError) {
-        System.err.println("Can not find any log file matching the pattern: "
-            + options.getLogTypes() + " for the application: "
-            + options.getAppId());
-      }
-    }

MOV31 UPD39 UPD42 UPD42 MOV43 INS60 INS60 INS25 INS21 UPD42 INS21 UPD42 MOV38 INS39 INS59 INS39 INS59 INS27 INS8 INS8 INS32 INS32 MOV43 INS7 MOV8 INS21 INS42 INS9 INS42 INS32 INS27 INS42 INS41 INS41 INS40 INS42 INS27 INS40 INS42 INS27 UPD45 INS42 MOV32 MOV21 INS60 INS25 INS32 INS38 MOV42 UPD42 MOV42 MOV42 MOV9 INS42 INS34 INS34 INS38 INS45 INS32 INS45 INS32 INS45 INS32 INS45 INS32 INS45 INS32 INS45 INS32 MOV32 INS39 INS59 INS27 INS8 INS40 INS42 INS27 INS34 INS21 INS34 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 MOV32 INS42 INS34 MOV21 INS45 INS32 INS45 INS42 INS45 INS32 INS7 INS7 INS42 INS42 INS42 INS42 INS42 INS9 INS42 INS34 DEL9 DEL32 DEL21 DEL34 DEL42 DEL7 DEL9 DEL39 DEL42 DEL44 DEL42 DEL42 DEL32 DEL42 DEL25 DEL8 DEL25