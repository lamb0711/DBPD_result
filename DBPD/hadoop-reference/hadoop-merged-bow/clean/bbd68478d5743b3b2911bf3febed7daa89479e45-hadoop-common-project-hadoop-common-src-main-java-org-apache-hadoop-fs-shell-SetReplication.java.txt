HDFS-11598. Improve -setrep for Erasure Coded files. Contributed by Yiqun Lin.

-      if (!item.fs.setReplication(item.path, newRep)) {
-        throw new IOException("Could not set replication for: " + item);
+      // Do the checking if the file is erasure coded since
+      // replication factor for an EC file is meaningless.
+      if (!item.stat.isErasureCoded()) {
+        if (!item.fs.setReplication(item.path, newRep)) {
+          throw new IOException("Could not set replication for: " + item);
+        }
+        out.println("Replication " + newRep + " set: " + item);
+        if (waitOpt) {
+          waitList.add(item);
+        }
+      } else {
+        out.println("Did not set replication for: " + item
+            + ", because it's an erasure coded file.");
-      out.println("Replication " + newRep + " set: " + item);
-      if (waitOpt) waitList.add(item);

INS8 INS25 INS38 MOV8 INS8 INS32 INS21 INS40 INS42 INS8 INS32 MOV21 INS42 INS42 INS27 INS45 INS42 INS45