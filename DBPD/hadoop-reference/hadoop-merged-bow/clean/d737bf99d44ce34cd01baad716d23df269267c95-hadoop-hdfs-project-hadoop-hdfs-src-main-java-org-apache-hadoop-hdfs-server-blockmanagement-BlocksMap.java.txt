HDFS-13350. Negative legacy block ID will confuse Erasure Coding to be considered as striped block. (Contributed by Lei (Eddy) Xu).

-  void removeBlock(Block block) {
+  void removeBlock(BlockInfo block) {
-      decrementBlockStat(b);
+      decrementBlockStat(info);
-  private void incrementBlockStat(Block block) {
-    if (BlockIdManager.isStripedBlockID(block.getBlockId())) {
+  private void incrementBlockStat(BlockInfo block) {
+    if (block.isStriped()) {
-  private void decrementBlockStat(Block block) {
-    if (BlockIdManager.isStripedBlockID(block.getBlockId())) {
+  private void decrementBlockStat(BlockInfo block) {
+    if (block.isStriped()) {

UPD43 UPD43 UPD43 UPD42 UPD42 INS32 UPD42 INS32 MOV42 UPD42 MOV42 MOV42 UPD42 MOV42 UPD42 DEL42 DEL42 DEL32 DEL32 DEL42 DEL42 DEL32 DEL32