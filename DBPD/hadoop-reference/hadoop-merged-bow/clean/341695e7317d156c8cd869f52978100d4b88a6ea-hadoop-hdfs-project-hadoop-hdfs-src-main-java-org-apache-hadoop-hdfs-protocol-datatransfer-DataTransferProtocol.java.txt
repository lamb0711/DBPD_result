Merge trunk into branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/MR-2841@1612742 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.StorageType;
-   * 
+   * The receiver datanode of this call is the next datanode in the pipeline.
+   * The other downstream datanodes are specified by the targets parameter.
+   * Note that the receiver {@link DatanodeInfo} is not required in the
+   * parameter list since the receiver datanode knows its info.  However, the
+   * {@link StorageType} for storing the replica in the receiver datanode is a 
+   * parameter since the receiver datanode may support multiple storage types.
+   *
+   * @param storageType for storing the replica in the receiver datanode.
-   * @param targets target datanodes in the pipeline.
+   * @param targets other downstream datanodes in the pipeline.
+   * @param targetStorageTypes target {@link StorageType}s corresponding
+   *                           to the target datanodes.
+      final StorageType storageType, 
+      final StorageType[] targetStorageTypes, 
-      final DatanodeInfo[] targets) throws IOException;
+      final DatanodeInfo[] targets,
+      final StorageType[] targetStorageTypes) throws IOException;
+   * @param storageType the {@link StorageType} for storing the block.
+      final StorageType storageType, 

INS26 INS40 INS44 INS44 INS44 INS44 INS65 INS65 INS83 INS43 INS42 INS83 INS5 INS42 INS83 INS5 INS42 INS65 INS83 INS43 INS42 INS66 INS66 INS66 INS65 INS66 INS66 INS65 INS66 INS66 INS42 INS66 UPD66 INS42 INS66 INS65 INS66 INS66 INS42 INS43 INS85 INS43 INS85 INS42 INS66 INS65 INS66 INS42 INS42 INS42 INS42 INS42 INS42 INS42