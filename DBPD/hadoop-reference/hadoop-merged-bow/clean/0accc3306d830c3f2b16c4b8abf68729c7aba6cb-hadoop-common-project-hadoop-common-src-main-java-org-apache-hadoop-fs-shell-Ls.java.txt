HADOOP-13079. Add -q option to Ls to print ? instead of non-printable characters. Contributed by John Zhuge.

+  private static final String OPTION_HIDENONPRINTABLE = "q";
-  public static final String USAGE = "[-" + OPTION_PATHONLY + "] [-"
-      + OPTION_DIRECTORY + "] [-" + OPTION_HUMAN + "] [-" + OPTION_RECURSIVE
-      + "] [-" + OPTION_MTIME + "] [-" + OPTION_SIZE + "] [-" + OPTION_REVERSE
-      + "] [-" + OPTION_ATIME + "] [<path> ...]";
+  public static final String USAGE = "[-" + OPTION_PATHONLY + "] [-" +
+      OPTION_DIRECTORY + "] [-" + OPTION_HUMAN + "] [-" +
+      OPTION_HIDENONPRINTABLE + "] [-" + OPTION_RECURSIVE + "] [-" +
+      OPTION_MTIME + "] [-" + OPTION_SIZE + "] [-" + OPTION_REVERSE + "] [-" +
+      OPTION_ATIME + "] [<path> ...]";
+          "  -" + OPTION_HIDENONPRINTABLE +
+          "  Print ? instead of non-printable characters.\n" +
+  /** Whether to print ? instead of non-printable characters. */
+  private boolean hideNonPrintable = false;
+
-    CommandFormat cf = new CommandFormat(0, Integer.MAX_VALUE, OPTION_PATHONLY,
-        OPTION_DIRECTORY, OPTION_HUMAN, OPTION_RECURSIVE, OPTION_REVERSE,
+    CommandFormat cf = new CommandFormat(0, Integer.MAX_VALUE,
+        OPTION_PATHONLY, OPTION_DIRECTORY, OPTION_HUMAN,
+        OPTION_HIDENONPRINTABLE, OPTION_RECURSIVE, OPTION_REVERSE,
+    hideNonPrintable = cf.getOpt(OPTION_HIDENONPRINTABLE);
+  @InterfaceAudience.Private
+  private boolean isHideNonPrintable() {
+    return hideNonPrintable;
+  }
+
-        item);
+        isHideNonPrintable() ? new PrintableString(item.toString()) : item);

INS23 INS23 INS31 INS83 INS83 INS83 INS43 INS59 INS29 INS83 INS39 INS59 INS78 INS83 INS39 INS42 INS8 INS42 INS42 INS45 INS65 INS42 INS9 INS21 INS40 INS41 INS42 INS45 INS42 INS45 INS45 INS66 MOV43 INS7 INS42 INS42 INS32 MOV43 INS42 INS42 INS42 INS42 INS16 INS32 INS14 INS42 INS42 INS43 INS32 INS42 MOV42 INS42