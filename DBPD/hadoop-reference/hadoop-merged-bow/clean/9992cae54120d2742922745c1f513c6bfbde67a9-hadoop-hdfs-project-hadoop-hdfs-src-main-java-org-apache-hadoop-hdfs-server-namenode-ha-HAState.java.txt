Reverting the previous trunk merge since it added other unintended changes in addition


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1177127 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.server.namenode.NameNode;
-  protected final void setStateInternal(final HAContext context, final HAState s)
+  protected final void setStateInternal(final NameNode nn, final HAState s)
-    exitState(context);
-    context.setState(s);
-    s.enterState(context);
+    exitState(nn);
+    nn.setState(s);
+    s.enterState(nn);
-   * @param context HA context
+   * @param nn Namenode
-  public abstract void enterState(final HAContext context)
+  protected abstract void enterState(final NameNode nn)
-   * @param context HA context
+   * @param nn Namenode
-  public abstract void exitState(final HAContext context)
+  protected abstract void exitState(final NameNode nn)
-   * @param context HA context
+   * @param nn Namenode
-  public void setState(HAContext context, HAState s) throws ServiceFailedException {
+  public void setState(NameNode nn, HAState s) throws ServiceFailedException {
-   * @param context HA context
+   * @param nn Namenode
-  public void checkOperation(final HAContext context, final OperationCategory op)
+  public void checkOperation(final NameNode nn, final OperationCategory op)
-        + context.getState();
+        + nn.getState();

INS26 INS40 UPD83 UPD83 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD66 UPD42 UPD42 UPD66 UPD42 UPD42 UPD66 UPD42 UPD42 UPD66 UPD42 UPD42 UPD42 UPD42 UPD42