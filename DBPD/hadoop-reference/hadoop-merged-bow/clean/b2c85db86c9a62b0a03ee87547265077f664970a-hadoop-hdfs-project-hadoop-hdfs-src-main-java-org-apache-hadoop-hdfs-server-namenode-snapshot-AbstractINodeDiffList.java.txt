HDFS-7728. Avoid updating quota usage while loading edits. Contributed by Jing Zhao.

-import org.apache.hadoop.hdfs.server.namenode.QuotaCounts;
-   * @return delta in namespace.
+   * @param currentINode the inode where the snapshot diff is deleted
-  public final QuotaCounts deleteSnapshotDiff(
-      INode.ReclaimContext reclaimContext, final int snapshot, final int prior,
-      final N currentINode) {
+  public final void deleteSnapshotDiff(INode.ReclaimContext reclaimContext,
+      final int snapshot, final int prior, final N currentINode) {
-    
-    QuotaCounts counts = new QuotaCounts.Builder().build();
-    D removed = null;
+
+    D removed;
-        counts.add(removed.destroyDiffAndCollectBlocks(reclaimContext,
-            currentINode));
+        removed.destroyDiffAndCollectBlocks(reclaimContext, currentINode);
-        counts.add(previous.combinePosteriorAndCollectBlocks(reclaimContext,
-            currentINode, removed));
+        previous.combinePosteriorAndCollectBlocks(reclaimContext, currentINode,
+            removed);
-    return counts;
-  private final D addLast(D diff) {
+  private D addLast(D diff) {

INS39 UPD65 INS42 UPD66 MOV32 MOV32 DEL40 DEL26 DEL42 DEL43 DEL42 DEL43 DEL42 DEL40 DEL43 DEL14 DEL42 DEL32 DEL59 DEL60 DEL33 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL41 DEL83