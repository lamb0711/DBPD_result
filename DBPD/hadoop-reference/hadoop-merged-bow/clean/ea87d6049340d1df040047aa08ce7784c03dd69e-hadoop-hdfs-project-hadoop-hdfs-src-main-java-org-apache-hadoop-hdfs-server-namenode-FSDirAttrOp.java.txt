HDFS-13377. The owner of folder can set quota for his sub folder. Contributed by Yang Yun.

-      long nsQuota, long ssQuota, StorageType type) throws IOException {
+      long nsQuota, long ssQuota, StorageType type, boolean allowOwner)
+      throws IOException {
+      if (fsd.isPermissionEnabled() && !pc.isSuperUser() && allowOwner) {
+        INodeDirectory parentDir= iip.getLastINode().getParent();
+        if (parentDir == null ||
+            !parentDir.getUserName().equals(pc.getUser())) {
+          throw new AccessControlException(
+              "Access denied for user " + pc.getUser() +
+              ". Superuser or owner of parent folder privilege is required");
+        }
+      }

INS44 INS39 INS42 INS25 INS27 INS8 INS32 INS38 INS42 INS60 INS25 INS42 INS42 INS32 INS43 INS59 INS27 INS8 INS42 INS42 INS42 INS42 INS32 INS27 INS38 INS53 INS32 INS42 INS42 INS33 INS32 INS14 INS42 INS42 INS32 INS42 INS32 INS43 INS27 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS45 INS42 INS42