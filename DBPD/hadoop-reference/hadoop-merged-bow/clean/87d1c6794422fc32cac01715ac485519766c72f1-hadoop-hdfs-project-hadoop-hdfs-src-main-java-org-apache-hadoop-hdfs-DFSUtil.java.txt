Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1296025 13f79535-47bb-0310-9956-ffa450edef68

-   * If null is returned, client should try {@link #isDefaultNamenodeAddress}
-   * to check pre-Federation, non-HA configurations.
-   * Given the InetSocketAddress for any configured communication with a 
-   * namenode, this method determines whether it is the configured
-   * communication channel for the "default" namenode.
-   * It does a reverse lookup on the list of default communication parameters
-   * to see if the given address matches any of them.
-   * Since the process of resolving URIs to Addresses is slightly expensive,
-   * this utility method should not be used in performance-critical routines.
-   * 
-   * @param conf - configuration
-   * @param address - InetSocketAddress for configured communication with NN.
-   *     Configured addresses are typically given as URIs, but we may have to
-   *     compare against a URI typed in by a human, or the server name may be
-   *     aliased, so we compare unambiguous InetSocketAddresses instead of just
-   *     comparing URI substrings.
-   * @param keys - list of configured communication parameters that should
-   *     be checked for matches.  For example, to compare against RPC addresses,
-   *     provide the list DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,
-   *     DFS_NAMENODE_RPC_ADDRESS_KEY
-   * @return - boolean confirmation if matched generic parameter
-   */
-  public static boolean isDefaultNamenodeAddress(Configuration conf,
-      InetSocketAddress address, String... keys) {
-    for (String key : keys) {
-      String candidateAddress = conf.get(key);
-      if (candidateAddress != null
-          && address.equals(NetUtils.createSocketAddr(candidateAddress)))
-        return true;
-    }
-    return false;
-  }
-  
-  /**

DEL66 DEL42 DEL67 DEL65 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL66 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL66 DEL66 DEL66 DEL65 DEL66 DEL65 DEL29 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL33 DEL27 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL27 DEL9 DEL41 DEL25 DEL8 DEL70 DEL9 DEL41 DEL8 DEL31