HDFS-14422. RBF: Router shouldn't allow READ operations in safe mode. Contributed by Inigo Goiri.

+import org.apache.hadoop.hdfs.server.federation.store.StateStoreUnavailableException;
-    // We allow unchecked and read operations
+    // We allow unchecked and read operations to try, fail later
+    checkSafeMode();
+  }
+  /**
+   * Check if the Router is in safe mode.
+   * @throws StandbyException If the Router is in safe mode and cannot serve
+   *                          client requests.
+   */
+  private void checkSafeMode() throws StandbyException {
+      OperationCategory op = opCategory.get();
+      if (ioe instanceof StateStoreUnavailableException) {
+        checkSafeMode();
+      }

INS26 INS40 INS31 INS29 INS83 INS39 INS42 INS43 INS8 INS21 INS65 INS65 INS42 MOV60 MOV25 INS32 INS66 INS42 INS66 INS66 INS42 INS60 INS43 INS59 INS25 INS42 INS42 INS32 INS62 INS8 INS42 INS42 INS42 INS43 INS21 INS42 INS32 INS42