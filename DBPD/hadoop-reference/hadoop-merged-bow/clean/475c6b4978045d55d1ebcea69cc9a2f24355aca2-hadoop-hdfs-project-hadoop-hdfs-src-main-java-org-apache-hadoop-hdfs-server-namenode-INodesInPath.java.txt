HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.

-    return pathComponent == null ? false
-        : Arrays.equals(HdfsConstants.DOT_SNAPSHOT_DIR_BYTES, pathComponent);
+    return pathComponent != null &&
+        Arrays.equals(HdfsConstants.DOT_SNAPSHOT_DIR_BYTES, pathComponent);
-            DirectoryWithSnapshotFeature sf = null;
+            DirectoryWithSnapshotFeature sf;
-      if (curNode.isSymlink() && (!lastComp || (lastComp && resolveLink))) {
+      if (curNode.isSymlink() && (!lastComp || resolveLink)) {
-      if (isDotSnapshotDir(childName) && isDir && dir.isSnapshottable()) {
+      if (isDotSnapshotDir(childName) && dir.isSnapshottable()) {
-  
+
+  /** @return the full path in string form */
+  public String getPath() {
+    return DFSUtil.byteArray2PathString(path);
+  }
+
-      vaildate();
+      validate();
-  void vaildate() {
+  void validate() {

INS31 INS29 INS83 INS43 INS42 INS8 UPD42 INS65 INS42 INS41 INS27 INS66 INS32 INS27 MOV32 INS42 INS42 INS42 MOV42 MOV33 UPD42 MOV42 DEL27 DEL9 DEL16 DEL33 DEL42 DEL27 DEL36 DEL42