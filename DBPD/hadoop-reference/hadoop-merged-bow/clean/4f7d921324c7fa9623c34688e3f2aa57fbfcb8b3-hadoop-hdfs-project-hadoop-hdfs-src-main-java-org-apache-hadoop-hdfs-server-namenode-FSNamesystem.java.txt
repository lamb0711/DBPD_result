HDFS-4446. Support file snapshots with diff lists.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1443825 13f79535-47bb-0310-9956-ffa450edef68

-            inode.computeFileSize(false), inode.isUnderConstruction(),
-            offset, length, needBlockToken);
+            inode.computeFileSize(false, iip.getPathSnapshot()),
+            inode.isUnderConstruction(), offset, length, needBlockToken);
-      pendingFile = (INodeFileUnderConstruction) pendingFile
-          .recordModification(latestSnapshot);
+      pendingFile = pendingFile.recordModification(latestSnapshot);

MOV32 INS32 INS42 INS42 DEL42 DEL43 DEL11