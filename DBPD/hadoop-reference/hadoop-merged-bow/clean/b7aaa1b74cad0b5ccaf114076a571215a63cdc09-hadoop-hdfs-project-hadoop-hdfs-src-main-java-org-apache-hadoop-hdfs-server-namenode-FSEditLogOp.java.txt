Merge trunk into the HDFS-347 branch.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-347@1467511 13f79535-47bb-0310-9956-ffa450edef68

+    long inodeId;
+    
+    <T extends AddCloseOp> T setInodeId(long inodeId) {
+      this.inodeId = inodeId;
+      return (T)this;
+    }
+      FSImageSerialization.writeLong(inodeId, out);
+      if (LayoutVersion.supports(Feature.ADD_INODE_ID, logVersion)) {
+        this.inodeId = in.readLong();
+      } else {
+        // The inodeId should be updated when this editLogOp is applied
+        this.inodeId = INodeId.GRANDFATHER_INODE_ID;
+      }
+      builder.append(", inodeId=");
+      builder.append(inodeId);
+      XMLUtils.addSaxString(contentHandler, "INODEID",
+          Long.valueOf(inodeId).toString());
+      this.inodeId = Long.valueOf(st.getValue("INODEID"));
+    long inodeId;
+    MkdirOp setInodeId(long inodeId) {
+      this.inodeId = inodeId;
+      return this;
+    }
+    
+      FSImageSerialization.writeLong(inodeId, out);
+      if (LayoutVersion.supports(Feature.ADD_INODE_ID, logVersion)) {
+        this.inodeId = FSImageSerialization.readLong(in);
+      } else {
+        // This id should be updated when this editLogOp is applied
+        this.inodeId = INodeId.GRANDFATHER_INODE_ID;
+      }
+      builder.append(", inodeId=");
+      builder.append(inodeId);
+      XMLUtils.addSaxString(contentHandler, "INODEID",
+          Long.valueOf(inodeId).toString());
+      this.inodeId = Long.valueOf(st.getValue("INODEID"));
+    long inodeId;
+    SymlinkOp setId(long inodeId) {
+      this.inodeId = inodeId;
+      return this;
+    }
+    
+      FSImageSerialization.writeLong(inodeId, out);      
+      if (LayoutVersion.supports(Feature.ADD_INODE_ID, logVersion)) {
+        this.inodeId = FSImageSerialization.readLong(in);
+      } else {
+        // This id should be updated when the editLogOp is applied
+        this.inodeId = INodeId.GRANDFATHER_INODE_ID;
+      }
+      builder.append(", inodeId=");
+      builder.append(inodeId);
+      XMLUtils.addSaxString(contentHandler, "INODEID",
+          Long.valueOf(inodeId).toString());
+      this.inodeId = Long.valueOf(st.getValue("INODEID"));

INS23 INS31 INS23 INS31 INS23 INS31 INS39 INS59 INS73 INS43 INS42 INS44 INS8 INS39 INS59 INS43 INS42 INS44 INS8 MOV21 INS39 INS59 INS43 INS42 INS44 INS8 INS42 INS42 INS43 INS42 INS39 INS42 INS21 INS41 INS21 INS25 INS21 INS21 INS21 INS21 INS42 INS42 INS39 INS42 INS21 INS41 INS21 INS25 INS21 INS21 INS21 INS21 INS42 INS42 INS39 INS42 INS21 INS41 INS21 INS25 INS21 INS21 INS21 INS21 INS42 INS7 INS11 INS32 INS32 INS8 INS8 INS32 INS32 INS32 INS7 INS7 INS52 INS32 INS32 INS8 INS8 INS32 INS32 INS32 INS7 INS7 INS52 INS32 INS32 INS8 INS8 INS32 INS32 INS32 INS7 INS22 INS42 INS43 INS52 INS42 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS21 INS21 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS22 INS32 INS22 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS21 INS21 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS22 INS32 INS22 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS21 INS21 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS32 INS22 INS32 INS52 INS42 INS42 INS7 INS7 INS32 INS42 INS52 INS42 INS42 INS42 INS32 INS52 INS42 INS7 INS7 INS32 INS42 INS52 INS42 INS42 INS42 INS32 INS52 INS42 INS7 INS7 INS32 INS42 INS52 INS42 INS42 INS42 INS32 INS22 INS32 INS22 INS40 INS42 INS42 INS42 INS42 INS42 INS45 INS22 INS32 INS22 INS40 INS42 INS42 INS42 INS42 INS42 INS45 INS22 INS32 INS22 INS40 INS42 INS42 INS42 INS42 INS42 INS45 INS52 INS42 INS42 INS42 INS52 INS42 INS52 INS42 INS42 INS42 INS42 INS52 INS42 INS52 INS42 INS42 INS42 INS42 INS52 INS42