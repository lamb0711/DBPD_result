YARN-5342. Improve non-exclusive node partition resource allocation in Capacity Scheduler. (Sunil G via wangda)

+import org.apache.commons.lang.StringUtils;
-      // it every time to make sure non-labeled resource request will be
+      // it when:
+      // - It allocated on the default partition
+      //
+      // This is to make sure non-labeled resource request will be
-      application.resetMissedNonPartitionedRequestSchedulingOpportunity(
-          schedulerKey);
+      if (StringUtils.equals(node.getPartition(),
+          RMNodeLabelsManager.NO_LABEL)) {
+        application
+            .resetMissedNonPartitionedRequestSchedulingOpportunity(schedulerKey);
+      }
-  
+

INS26 INS40 INS25 INS32 INS8 INS42 INS42 INS32 INS40 MOV21 INS42 INS42