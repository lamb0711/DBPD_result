Revert "HADOOP-16050: s3a SSL connections should use OpenSSL"

This reverts commit b067f8acaa79b1230336900a5c62ba465b2adb28.

Change-Id: I584b050a56c0e6f70b11fa3f7db00d5ac46e7dd8

-import com.amazonaws.thirdparty.apache.http.conn.ssl.SSLConnectionSocketFactory;
-import org.apache.hadoop.security.ssl.OpenSSLSocketFactory;
-import javax.net.ssl.HostnameVerifier;
-   *
-   * @throws IOException if there was an error initializing the protocol
-   *                     settings
-      ClientConfiguration awsConf) throws IOException {
+      ClientConfiguration awsConf) {
-    initProtocolSettings(conf, awsConf);
+    boolean secureConnections = conf.getBoolean(SECURE_CONNECTIONS,
+        DEFAULT_SECURE_CONNECTIONS);
+    awsConf.setProtocol(secureConnections ?  Protocol.HTTPS : Protocol.HTTP);
-   * Initializes the connection protocol settings when connecting to S3 (e.g.
-   * either HTTP or HTTPS). If secure connections are enabled, this method
-   * will load the configured SSL providers.
-   *
-   * @param conf Hadoop configuration
-   * @param awsConf AWS SDK configuration
-   *
-   * @throws IOException if there is an error initializing the configured
-   *                     {@link javax.net.ssl.SSLSocketFactory}
-   */
-  private static void initProtocolSettings(Configuration conf,
-      ClientConfiguration awsConf) throws IOException {
-    boolean secureConnections = conf.getBoolean(SECURE_CONNECTIONS,
-        DEFAULT_SECURE_CONNECTIONS);
-    awsConf.setProtocol(secureConnections ?  Protocol.HTTPS : Protocol.HTTP);
-    if (secureConnections) {
-      OpenSSLSocketFactory.initializeDefaultFactory(
-              conf.getEnum(SSL_CHANNEL_MODE, DEFAULT_SSL_CHANNEL_MODE));
-      awsConf.getApacheHttpClientConfig().setSslSocketFactory(
-            new SSLConnectionSocketFactory(
-                    OpenSSLSocketFactory.getDefaultFactory(),
-                    (HostnameVerifier) null));
-    }
-  }
-
-  /**

MOV60 MOV21 MOV32 UPD42 UPD42 MOV16 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL42 DEL66 DEL66 DEL65 DEL42 DEL43 DEL42 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL40 DEL65 DEL65 DEL29 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL32 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL43 DEL33 DEL11 DEL14 DEL32 DEL21 DEL8 DEL25 DEL8 DEL31