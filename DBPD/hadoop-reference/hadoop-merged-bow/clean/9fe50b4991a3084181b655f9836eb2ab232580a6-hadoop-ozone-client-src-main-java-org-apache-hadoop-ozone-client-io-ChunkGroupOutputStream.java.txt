HDDS-733. Create container if not exist, as part of chunk write.
Contributed by Lokesh Jain.

-import org.apache.hadoop.hdds.scm.container.ContainerInfo;
-import org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos.ObjectStageChangeRequestProto;
-              .setShouldCreateContainer(false)
-        checkKeyLocationInfo(subKeyInfo);
+        addKeyLocationInfo(subKeyInfo);
-  private void checkKeyLocationInfo(OmKeyLocationInfo subKeyInfo)
+  private void addKeyLocationInfo(OmKeyLocationInfo subKeyInfo)
-    ContainerInfo container = containerWithPipeline.getContainerInfo();
-
-    // create container if needed
-    if (subKeyInfo.getShouldCreateContainer()) {
-      try {
-        ContainerProtocolCalls.createContainer(xceiverClient,
-            container.getContainerID(), requestID);
-        scmClient.notifyObjectStageChange(
-            ObjectStageChangeRequestProto.Type.container,
-            subKeyInfo.getContainerID(),
-            ObjectStageChangeRequestProto.Op.create,
-            ObjectStageChangeRequestProto.Stage.complete);
-      } catch (StorageContainerException ex) {
-        if (ex.getResult().equals(Result.CONTAINER_EXISTS)) {
-          //container already exist, this should never happen
-          LOG.debug("Container {} already exists.",
-              container.getContainerID());
-        } else {
-          LOG.error("Container creation failed for {}.",
-              container.getContainerID(), ex);
-          throw ex;
-        }
-      }
-    }
-    checkKeyLocationInfo(subKeyInfo);
+    addKeyLocationInfo(subKeyInfo);

UPD42 UPD42 MOV32 UPD42 UPD42 INS34 UPD42 UPD42 INS40 DEL40 DEL26 DEL40 DEL26 DEL9 DEL40 DEL34 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL21 DEL42 DEL42 DEL40 DEL42 DEL42 DEL32 DEL40 DEL40 DEL32 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32 DEL42 DEL40 DEL32 DEL42 DEL42 DEL45 DEL42 DEL42 DEL32 DEL32 DEL21 DEL8 DEL42 DEL42 DEL45 DEL42 DEL42 DEL32 DEL42 DEL32 DEL21 DEL42 DEL53 DEL8 DEL25 DEL8 DEL12 DEL54 DEL8 DEL25