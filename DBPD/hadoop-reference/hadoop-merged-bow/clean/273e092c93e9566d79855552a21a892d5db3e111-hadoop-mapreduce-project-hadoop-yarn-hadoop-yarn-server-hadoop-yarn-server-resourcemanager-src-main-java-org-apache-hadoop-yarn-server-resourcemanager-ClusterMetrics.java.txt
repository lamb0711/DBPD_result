MAPREDUCE-3313. Fixed initialization of ClusterMetrics which was failing TestResourceTrackerService sometimes. Contributed by Hitesh Shah.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1195319 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.concurrent.atomic.AtomicBoolean;
+
+  private static AtomicBoolean isInitialized = new AtomicBoolean(false);
+  
-    if(INSTANCE == null){
+    if(!isInitialized.get()){
+          isInitialized.set(true);

INS26 INS40 INS23 INS83 INS83 INS43 INS59 INS42 INS42 INS14 INS43 INS9 INS38 INS42 INS32 INS42 INS42 INS21 INS32 INS42 INS42 INS9 DEL42 DEL33 DEL27