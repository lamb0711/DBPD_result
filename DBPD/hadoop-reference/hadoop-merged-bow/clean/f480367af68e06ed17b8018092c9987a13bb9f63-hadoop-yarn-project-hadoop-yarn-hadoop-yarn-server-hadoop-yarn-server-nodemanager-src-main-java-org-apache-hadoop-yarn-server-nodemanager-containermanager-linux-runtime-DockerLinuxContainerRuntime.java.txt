YARN-8027. Setting hostname of docker container breaks for --net=host in docker 1.13. Contributed by Jim Brennan

- *     hostname will be derived from the container ID.
+ *     hostname will be derived from the container ID.  This variable is
+ *     ignored if the network is 'host' and Registry DNS is not enabled.
-    setHostname(runCommand, containerIdStr, hostname);
+    // Only add hostname if network is not host or if Registry DNS is enabled.
+    if (!network.equalsIgnoreCase("host") ||
+        conf.getBoolean(RegistryConstants.KEY_DNS_ENABLED,
+            RegistryConstants.DEFAULT_DNS_ENABLED)) {
+      setHostname(runCommand, containerIdStr, hostname);
+    }

UPD66 INS66 INS25 INS27 INS8 INS38 INS32 MOV21 INS32 INS42 INS42 INS40 INS40 INS42 INS42 INS45