HDFS-8602. Erasure Coding: Client can't read(decode) the EC files which have corrupt blocks. Contributed by Jing Zhao and Kai Sasaki.

-import org.apache.hadoop.io.erasurecode.rawcoder.RSRawDecoder;
-      final int targetLength,
+      final int targetLength, final ExtendedBlock currentBlock,
-          int ret = readToBuffer(reader, datanode, strategy, corruptedBlockMap);
+          int ret = readToBuffer(reader, datanode, strategy, currentBlock,
+              corruptedBlockMap);
+      ExtendedBlock currentBlock,
-          + getCurrentBlock() + " from " + currentNode
+          + currentBlock + " from " + currentNode
-      addIntoCorruptedBlockMap(getCurrentBlock(), currentNode,
+      addIntoCorruptedBlockMap(currentBlock, currentNode,
-          + getCurrentBlock() + " of " + src + " from "
+          + currentBlock + " of " + src + " from "
-          chunk.byteBuffer.remaining(), corruptedBlockMap);
+          chunk.byteBuffer.remaining(), block.getBlock(), corruptedBlockMap);

INS44 INS44 INS83 INS43 INS42 INS43 INS42 INS42 INS42 INS32 UPD42 MOV42 INS42 INS42 INS42 INS42 INS42 DEL40 DEL26 DEL42 DEL32 DEL32 DEL42 DEL32