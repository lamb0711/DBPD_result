HDFS-7716. Erasure Coding: extend BlockInfo to handle EC info. Contributed by Jing Zhao.

-    return id & (~(HdfsConstants.MAX_BLOCKS_IN_GROUP - 1));
+    return id & (~HdfsConstants.BLOCK_GROUP_INDEX_MASK);
+  }
+
+  public static int getBlockIndex(Block reportedBlock) {
+    return (int) (reportedBlock.getBlockId() &
+        HdfsConstants.BLOCK_GROUP_INDEX_MASK);

INS31 INS83 INS83 INS39 INS42 INS44 INS8 INS43 INS42 INS41 INS42 INS11 INS39 INS36 INS27 INS40 INS32 INS40 INS42 INS42 DEL40 DEL34 DEL27 DEL36