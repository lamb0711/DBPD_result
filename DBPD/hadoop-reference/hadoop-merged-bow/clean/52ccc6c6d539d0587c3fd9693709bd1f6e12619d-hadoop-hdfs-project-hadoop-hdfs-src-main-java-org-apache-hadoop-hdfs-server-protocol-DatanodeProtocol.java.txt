HDFS-5051.  Propagate cache status information from the DataNode to the NameNode  (Andrew Wang via Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1513653 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.protocol.BlockListAsLongs;
-import org.apache.hadoop.io.retry.AtMostOnce;
+
+  /**
+   * Communicates the complete list of locally cached blocks to the NameNode.
+   * 
+   * This method is similar to
+   * {@link #blockReport(DatanodeRegistration, String, StorageBlockReport[])},
+   * which is used to communicated blocks stored on disk.
+   *
+   * @param registration
+   * @param poolId block pool ID for the blocks
+   * @param blocks a Long[] array from {@link BlockListAsLongs} that describes 
+   * the list of cached blocks. This is more memory-efficient than a Block[].
+   * @return
+   * @throws IOException
+   */
+  @Idempotent
+  public DatanodeCommand cacheReport(DatanodeRegistration registration,
+      String poolId, long[] blocks) throws IOException;
+

MOV26 UPD40 INS31 INS29 INS78 INS83 INS43 INS42 INS44 INS44 INS44 INS43 INS65 INS65 INS65 INS65 INS65 INS65 INS42 INS42 INS43 INS42 INS43 INS42 INS5 INS42 INS42 INS66 INS66 INS65 INS66 INS66 INS42 INS42 INS66 INS42 INS66 INS65 INS66 INS66 INS42 INS42 INS42 INS39 INS85 INS68 INS42 INS42 INS69 INS69 INS69 INS43 INS43 INS5 INS42 INS42 INS43 INS85 INS42