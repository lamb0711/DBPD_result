HDFS-8823. Move replication factor into individual blocks. Contributed by Haohui Mai.

-     *          block storage policy suite to calculate intended storage type
-     *          usage
+ *          block storage policy suite to calculate intended storage type
+ *          usage
-     *          blocks collected from the descents for further block
-     *          deletion/update will be added to the given map.
+*          blocks collected from the descents for further block
+*          deletion/update will be added to the given map.
- *          INodes collected from the descents for further cleaning up of
+*          INodes collected from the descents for further cleaning up of
-     *      files that the NN need to remove the leases
+     * The blocks whose replication factor need to be updated.
+     */
+    public static class UpdatedReplicationInfo {
+      /**
+       * the expected replication after the update.
+       */
+      private final short targetReplication;
+      /**
+       * The block whose replication needs to be updated.
+       */
+      private final BlockInfo block;
+
+      public UpdatedReplicationInfo(short targetReplication, BlockInfo block) {
+        this.targetReplication = targetReplication;
+        this.block = block;
+      }
+
+      public BlockInfo block() {
+        return block;
+      }
+
+      public short targetReplication() {
+        return targetReplication;
+      }
+    }
+    /**
+    /**
+     * The list of blocks whose replication factor needs to be adjusted
+     */
+    private final List<UpdatedReplicationInfo> toUpdateReplicationInfo;
+      toUpdateReplicationInfo = new ChunkedArrayList<>();
-    
+
+    public List<UpdatedReplicationInfo> toUpdateReplicationInfo() {
+      return toUpdateReplicationInfo;
+    }
+
+    public void addUpdateReplicationFactor(BlockInfo block, short targetRepl) {
+      toUpdateReplicationInfo.add(
+          new UpdatedReplicationInfo(targetRepl, block));
+    }

INS55 INS23 INS31 INS31 INS29 INS83 INS83 INS42 INS23 INS23 INS31 INS31 INS31 INS29 INS83 INS83 INS74 INS59 INS83 INS74 INS42 INS8 INS83 INS39 INS42 INS44 INS44 INS8 INS65 INS29 INS83 INS83 INS39 INS59 INS29 INS83 INS83 INS43 INS59 INS83 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS8 INS83 INS39 INS42 INS8 INS65 INS43 INS43 INS42 INS21 INS43 INS43 INS41 INS43 INS42 INS39 INS42 INS21 INS66 INS65 INS42 INS65 INS42 INS42 INS39 INS42 INS43 INS42 INS21 INS21 INS42 INS41 INS41 INS66 INS42 INS42 INS7 INS42 INS42 INS42 INS42 INS32 INS66 INS66 INS42 INS7 INS7 INS42 INS42 INS42 INS14 INS42 INS42 INS14 INS22 INS42 INS22 INS42 INS74 INS43 INS42 INS42 INS52 INS42 INS52 INS42 INS43 INS42 INS42 DEL66