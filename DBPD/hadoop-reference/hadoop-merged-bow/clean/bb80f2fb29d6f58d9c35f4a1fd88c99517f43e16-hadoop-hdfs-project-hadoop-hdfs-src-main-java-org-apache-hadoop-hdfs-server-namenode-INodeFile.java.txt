HDFS-4436. Change INode.recordModification(..) to return only the current inode and remove the updateCircularList parameter from some methods in INodeDirectoryWithSnapshot.Diff.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1438203 13f79535-47bb-0310-9956-ffa450edef68

+  INodeFile recordModification(final Snapshot latest) {
+    //TODO: change it to use diff list
+    return (INodeFile)super.recordModification(latest);
+  }
+
+  @Override
-      final Pair<? extends INode, ? extends INode> p = recordModification(latest);
-      if (p != null) {
-        ((INodeFile)p.left).setFileReplication(replication, null);
-        return;
-      }
+      recordModification(latest).setFileReplication(replication, null);
+      return;
-

INS31 INS78 INS43 INS42 INS44 INS8 INS8 INS42 INS42 INS83 INS43 INS42 INS41 MOV25 MOV21 INS42 MOV11 MOV27 INS48 INS42 INS42 MOV32 DEL40 DEL42 DEL33 DEL27 DEL36 DEL83 DEL42 DEL43 DEL42 DEL43 DEL76 DEL42 DEL43 DEL76 DEL74 DEL42 DEL59 DEL60 DEL8 DEL25 DEL8