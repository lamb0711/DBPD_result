MAPREDUCE-3749. ConcurrentModificationException in counter groups.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1238734 13f79535-47bb-0310-9956-ffa450edef68

+import com.google.common.collect.ImmutableSet;
-  public synchronized String getName() {
+  public String getName() {
-  public T findCounter(String counterName, String displayName) {
+  public synchronized T findCounter(String counterName, String displayName) {
-  private T findCounterImpl(String counterName, boolean create) {
+  private synchronized T findCounterImpl(String counterName, boolean create) {
-    return counters.values().iterator();
+    return ImmutableSet.copyOf(counters.values()).iterator();

INS26 INS40 INS83 INS83 INS32 MOV32 MOV32 INS42 UPD42 INS42 DEL83