YARN-851. Share NMTokens using NMTokenCache (api-based) between AMRMClient and NMClient instead of memory based approach which is used currently. Contributed by Omkar Vinit Joshi.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1495247 13f79535-47bb-0310-9956-ffa450edef68

-      CallbackHandler callbackHandler, ConcurrentMap<String, Token> nmTokens) {
-    return new NMClientAsyncImpl(callbackHandler, nmTokens);
+      CallbackHandler callbackHandler) {
+    return new NMClientAsyncImpl(callbackHandler);
-  protected NMClientAsync(CallbackHandler callbackHandler,
-      ConcurrentMap<String, Token> nmTokens) {
-    this (NMClientAsync.class.getName(), callbackHandler, nmTokens);
+  protected NMClientAsync(CallbackHandler callbackHandler) {
+    this (NMClientAsync.class.getName(), callbackHandler);
-  protected NMClientAsync(String name, CallbackHandler callbackHandler,
-      ConcurrentMap<String, Token> nmTokens) {
-    this (name, new NMClientImpl(nmTokens), callbackHandler);
+  protected NMClientAsync(String name, CallbackHandler callbackHandler) {
+    this (name, new NMClientImpl(), callbackHandler);

DEL42 DEL43 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL44 DEL42 DEL42 DEL43 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL44 DEL42 DEL42 DEL43 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL44 DEL42