HDFS-8498. Blocks can be committed with wrong size. Contributed by Jing Zhao.

-    coordinator.offerEndBlock(index, block);
+    coordinator.offerEndBlock(index, block.getCurrentBlock());
-    block = lb.getBlock();
+    block.setCurrentBlock(lb.getBlock());
-      block = null;
+      block.setCurrentBlock(null);
-          block = newBlock(block, newGS);
+          updateBlockGS(newGS);

INS32 INS32 INS42 INS42 MOV32 MOV42 INS42 INS32 INS42 INS42 INS33 INS32 UPD42 MOV42 MOV42 DEL42 DEL7 DEL42 DEL33 DEL7 DEL42 DEL42 DEL32 DEL7