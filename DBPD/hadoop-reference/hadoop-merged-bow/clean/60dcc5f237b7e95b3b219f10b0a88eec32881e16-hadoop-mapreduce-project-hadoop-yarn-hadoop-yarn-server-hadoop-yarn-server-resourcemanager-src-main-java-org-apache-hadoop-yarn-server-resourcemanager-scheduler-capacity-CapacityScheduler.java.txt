Merging trunk to HDFS-1623 branch.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1179484 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.server.resourcemanager.scheduler.QueueMetrics;
+import org.apache.hadoop.yarn.server.resourcemanager.scheduler.SchedulerAppReport;
+  @Override
+  public QueueMetrics getRootQueueMetrics() {
+    return root.getMetrics();
+  }
+
-
+  
-  public synchronized Resource getUsedResource(NodeId nodeId) {
-    return nodes.get(nodeId).getUsedResource();
-  }
-
-  public synchronized Resource getAvailableResource(NodeId nodeId) {
-    return nodes.get(nodeId).getAvailableResource();
-  }
-
-    for (RMContainer rmContainer : application.getAllReservedContainers()) {
+    for (RMContainer rmContainer : application.getReservedContainers()) {
-        LOG.info("DEBUG --- allocate: pre-update" +
+        if(LOG.isDebugEnabled()) {
+          LOG.debug("allocate: pre-update" +
+        }
-        LOG.info("DEBUG --- allocate: post-update");
+        LOG.debug("allocate: post-update");
-      LOG.info("DEBUG --- allocate:" +
+      if(LOG.isDebugEnabled()) {
+        LOG.debug("allocate:" +
+      }
-      LOG.info("DEBUG --- Container FINISHED: " + containerId);
+      LOG.debug("Container FINISHED: " + containerId);
-    LOG.info("DEBUG -- Node being looked for scheduling " + nm
+    if(LOG.isDebugEnabled()) {
+      LOG.debug("Node being looked for scheduling " + nm
+    }
+  @Override
+  public SchedulerAppReport getSchedulerAppInfo(
+      ApplicationAttemptId applicationAttemptId) {
+    SchedulerApp app = getApplication(applicationAttemptId);
+    return app == null ? null : new SchedulerAppReport(app);
+  }
+  
-    return new SchedulerNodeReport(
-        node.getUsedResource(), node.getNumContainers());
+    return node == null ? null : new SchedulerNodeReport(node);

INS26 INS26 MOV31 MOV31 INS40 INS40 INS78 UPD43 UPD42 INS78 UPD43 UPD42 INS42 UPD42 INS25 INS42 UPD42 UPD43 UPD42 INS60 INS41 INS32 INS8 UPD42 INS43 INS59 INS16 INS16 UPD42 MOV42 UPD42 UPD42 INS25 INS42 INS42 MOV21 INS42 INS42 INS32 INS27 INS33 INS14 INS27 INS33 INS14 INS32 INS8 UPD42 MOV42 UPD42 MOV42 INS42 INS33 INS43 INS42 INS42 INS33 MOV43 INS42 INS25 INS42 INS42 MOV21 UPD42 UPD42 INS42 INS32 INS8 UPD45 UPD45 INS42 INS42 MOV21 UPD42 UPD45 UPD42 UPD42 UPD45 UPD45 DEL83 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32 DEL83 DEL42 DEL32 DEL42 DEL32 DEL41 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL14