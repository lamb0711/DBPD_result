YARN-1752. Fixed ApplicationMasterService to reject unregister request if AM did not register before. Contributed by Rohith Sharma.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1574623 13f79535-47bb-0310-9956-ffa450edef68

-    unregisterAppAttempt(req);
+    unregisterAppAttempt(req,true);
-  public void unregisterAppAttempt(final FinishApplicationMasterRequest req)
-      throws Exception {
-    waitForState(RMAppAttemptState.RUNNING);
+  public void unregisterAppAttempt(final FinishApplicationMasterRequest req,
+      boolean waitForStateRunning) throws Exception {
+    if (waitForStateRunning) {
+      waitForState(RMAppAttemptState.RUNNING);
+    }
-          .getRMAppAttempt(attemptId).getAMRMToken();
+            .getRMAppAttempt(attemptId).getAMRMToken();

INS44 INS39 INS42 INS25 INS42 INS8 INS9 MOV21