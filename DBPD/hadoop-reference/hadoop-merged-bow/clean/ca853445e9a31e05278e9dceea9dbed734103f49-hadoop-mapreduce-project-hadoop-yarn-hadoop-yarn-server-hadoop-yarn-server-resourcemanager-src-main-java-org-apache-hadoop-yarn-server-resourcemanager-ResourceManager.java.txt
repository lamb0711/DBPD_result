MAPREDUCE-2953. Fix a race condition on submission which caused client to incorrectly assume application was gone by making submission synchronous for RMAppManager. Contributed by Thomas Graves.  


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1166968 13f79535-47bb-0310-9956-ffa450edef68

-  private RMAppManager rmAppManager;
+  protected RMAppManager rmAppManager;
-    clientRM = createClientRMService();
-    addService(clientRM);
-
+
+    clientRM = createClientRMService();
+    addService(clientRM);
-    return new ClientRMService(this.rmContext, scheduler);
+    return new ClientRMService(this.rmContext, scheduler, this.rmAppManager);

UPD83 MOV21 MOV21 INS22 INS52 INS42