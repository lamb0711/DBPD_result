HADOOP-10614. CBZip2InputStream is not threadsafe (Xiangrui Meng via Sandy Ryza)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1595521 13f79535-47bb-0310-9956-ffa450edef68

-  private static boolean skipDecompression = false;
+  private boolean skipDecompression = false;
+    this(in, readMode, false);
+  }
+
+  private CBZip2InputStream(final InputStream in, READ_MODE readMode, boolean skipDecompression)
+      throws IOException {
+    this.skipDecompression = skipDecompression;
-    CBZip2InputStream.skipDecompression = true;
-    CBZip2InputStream anObject = null;
-
-    anObject = new CBZip2InputStream(in, READ_MODE.BYBLOCK);
-
+    CBZip2InputStream anObject = new CBZip2InputStream(in, READ_MODE.BYBLOCK, true);
-      CBZip2InputStream.skipDecompression = false;
+      skipDecompression = false;

INS31 MOV29 INS83 INS42 INS44 INS44 INS43 INS8 UPD83 INS44 INS83 INS43 INS42 INS43 INS42 INS42 INS17 INS39 INS42 INS21 INS60 INS42 INS42 INS42 INS42 INS9 INS7 MOV43 INS59 INS22 INS42 MOV42 INS14 INS52 INS42 MOV43 MOV42 MOV40 INS9 INS42 DEL83 DEL40 DEL9 DEL7 DEL21 DEL33 DEL59 DEL60 DEL42 DEL14 DEL7 DEL21 DEL40