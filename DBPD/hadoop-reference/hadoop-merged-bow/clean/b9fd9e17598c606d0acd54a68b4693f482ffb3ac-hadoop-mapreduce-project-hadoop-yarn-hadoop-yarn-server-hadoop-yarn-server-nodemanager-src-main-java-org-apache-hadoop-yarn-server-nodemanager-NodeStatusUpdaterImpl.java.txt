MAPREDUCE-3034. Ensure NodeManager reboots itself on direction from ResourceManager. Contributed by Devaraj K & Eric Payne. 


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1297310 13f79535-47bb-0310-9956-ffa450edef68

+  private boolean hasToRebootNode;
+  
+  
+  private synchronized void reboot() {
+    this.hasToRebootNode = true;
+    // Stop the status-updater. This will trigger a sub-service state change in
+    // the NodeManager which will then decide to reboot or not based on
+    // isRebooted.
+    this.stop();
+  }
+
+  synchronized boolean hasToRebootNode() {
+    return this.hasToRebootNode;
+  }
-                  + " hence shutting down.");
-              NodeStatusUpdaterImpl.this.stop();
+                  + " hence rebooting.");
+              NodeStatusUpdaterImpl.this.reboot();

INS23 INS31 INS31 INS83 INS39 INS59 INS83 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS8 INS42 INS21 INS21 INS41 INS7 INS32 INS22 INS22 INS9 INS52 INS42 INS52 INS42 INS52 INS42 UPD42 UPD45