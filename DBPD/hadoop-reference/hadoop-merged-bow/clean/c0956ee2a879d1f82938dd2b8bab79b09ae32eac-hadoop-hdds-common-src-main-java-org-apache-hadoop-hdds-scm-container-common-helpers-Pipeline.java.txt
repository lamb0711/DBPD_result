HDDS-476. Add Pipeline reports to make pipeline active on SCM restart.
Contributed by Mukul Kumar Singh.

-import java.util.TreeMap;
+import java.util.concurrent.ConcurrentHashMap;
-    datanodes = new TreeMap<>();
+    datanodes = new ConcurrentHashMap<>();
-  public void addMember(DatanodeDetails datanodeDetails) {
-    datanodes.put(datanodeDetails.getUuid().toString(),
-        datanodeDetails);
+  /**
+   * Adds a datanode to pipeline
+   * @param datanodeDetails datanode to be added.
+   * @return true if the dn was not earlier present, false otherwise
+   */
+  public boolean addMember(DatanodeDetails datanodeDetails) {
+    return datanodes.put(datanodeDetails.getUuid().toString(),
+        datanodeDetails) == null;
+
+  }
+
+  public void resetPipeline() {
+    // reset datanodes in pipeline and learn about them through
+    // pipeline reports on SCM restart
+    datanodes.clear();

UPD40 INS31 INS29 UPD39 INS83 INS39 INS42 INS8 INS65 INS65 INS65 INS41 INS21 INS66 INS42 INS66 INS66 INS27 INS32 MOV32 INS33 INS42 INS42 UPD74 UPD43 UPD42 DEL21