Revert "HDFS-8652. Track BlockInfo instead of Block in CorruptReplicasMap. Contributed by Jing Zhao."

This reverts commit d62b63d297bff12d93de560dd50ddd48743b851d.

+import java.util.ArrayList;
-    for (ReplicaUnderConstruction replica : replicas) {
+    for (int i = 0; i < replicas.size(); i++) {
-      if (replica.isAlive()) {
-        allLiveReplicasTriedAsPrimary = allLiveReplicasTriedAsPrimary
-            && replica.getChosenAsPrimary();
+      if (replicas.get(i).isAlive()) {
+        allLiveReplicasTriedAsPrimary =
+            (allLiveReplicasTriedAsPrimary &&
+                replicas.get(i).getChosenAsPrimary());
-      for (ReplicaUnderConstruction replica : replicas) {
-        replica.setChosenAsPrimary(false);
+      for (int i = 0; i < replicas.size(); i++) {
+        replicas.get(i).setChosenAsPrimary(false);
+   * @throws IOException
+   *           if the state of the block (the generation stamp and the length)
+   *           has not been committed by the client or it does not have at
+   *           least a minimal number of replicas reported from data-nodes.
-    sb.append("{UCState=").append(blockUCState).append(", truncateBlock=")
-      .append(truncateBlock)
+    sb.append("{UCState=").append(blockUCState)
+      .append(", truncateBlock=" + truncateBlock)

INS26 INS40 INS24 INS65 INS58 INS27 INS37 INS8 INS42 INS66 INS66 INS66 MOV32 INS39 INS59 INS42 INS32 INS42 MOV25 INS24 INS45 INS42 INS34 INS42 INS42 INS58 INS27 INS37 INS8 INS42 INS32 INS39 INS59 INS42 INS32 INS42 MOV21 INS45 UPD42 MOV42 INS42 INS42 INS42 INS34 INS42 INS42 INS27 INS36 INS32 INS45 INS42 INS27 UPD42 MOV42 INS42 INS42 MOV42 MOV32 INS32 UPD42 MOV42 INS42 INS42 DEL27 DEL42 DEL43 DEL42 DEL44 DEL42 DEL8 DEL70 DEL42 DEL43 DEL42 DEL44 DEL42 DEL8 DEL70 DEL45 DEL42 DEL45 DEL42 DEL42 DEL45 DEL32