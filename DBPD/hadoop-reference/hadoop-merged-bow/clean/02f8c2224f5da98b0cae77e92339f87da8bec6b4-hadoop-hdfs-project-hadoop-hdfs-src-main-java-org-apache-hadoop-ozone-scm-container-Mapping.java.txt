HDFS-11888. Ozone: SCM: use state machine for open containers allocated for key/blocks. Contributed by Xiaoyu Yao.

+import org.apache.hadoop.scm.container.common.helpers.ContainerInfo;
-   * Returns the Pipeline from the container name.
+   * Returns the ContainerInfo from the container name.
-   * @return - Pipeline that makes up this container.
+   * @return - ContainerInfo such as creation state and the pipeline.
-  Pipeline getContainer(String containerName) throws IOException;
+  ContainerInfo getContainer(String containerName) throws IOException;
-
-   * @return - Pipeline that makes up this container.
+   * @return - Container Info.
-  Pipeline allocateContainer(OzoneProtos.ReplicationType type,
+  ContainerInfo allocateContainer(OzoneProtos.ReplicationType type,
+
+  /**
+   * Update container state.
+   * @param containerName - Container Name
+   * @param event - container life cycle event
+   * @return - new container state
+   * @throws IOException
+   */
+  OzoneProtos.LifeCycleState updateContainerState(String containerName,
+      OzoneProtos.LifeCycleEvent event) throws IOException;

INS26 INS40 INS31 UPD43 UPD43 INS29 INS43 INS42 INS44 INS44 INS43 UPD42 UPD42 INS65 INS65 INS65 INS65 INS65 INS40 INS43 INS42 INS43 INS42 INS42 UPD66 UPD66 UPD66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS42 INS40