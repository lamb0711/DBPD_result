Merging r1540548 through r1540909 from trunk to branch HDFS-2832

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1540910 13f79535-47bb-0310-9956-ffa450edef68

+  /**
+   * Number of cache commands that could not be completed successfully
+   */
+  AtomicLong numBlocksFailedToCache = new AtomicLong(0);
+  /**
+   * Number of uncache commands that could not be completed successfully
+   */
+  AtomicLong numBlocksFailedToUncache = new AtomicLong(0);
+
+      numBlocksFailedToCache.incrementAndGet();
+      numBlocksFailedToUncache.incrementAndGet();
+      numBlocksFailedToUncache.incrementAndGet();
-            " of " + maxBytes + " exceeded."); 
+            " of " + maxBytes + " exceeded.");
+        numBlocksFailedToCache.incrementAndGet();
+          numBlocksFailedToCache.incrementAndGet();
-  // Stats related methods for FsDatasetMBean
+  // Stats related methods for FSDatasetMBean
+
+  public long getNumBlocksFailedToCache() {
+    return numBlocksFailedToCache.get();
+  }
+
+  public long getNumBlocksFailedToUncache() {
+    return numBlocksFailedToUncache.get();
+  }
+

INS23 INS23 INS31 INS31 INS29 INS43 INS59 INS29 INS43 INS59 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS8 INS65 INS42 INS42 INS14 INS65 INS42 INS42 INS14 INS41 INS41 INS66 INS43 INS34 INS66 INS43 INS34 INS21 INS32 INS32 INS42 INS42 INS21 INS21 INS32 INS42 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS21 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS21 INS32 INS42 INS42