HDFS-6565. Use jackson instead jetty json in hdfs-client. Contributed by Akira AJISAKA.

-import java.io.InputStreamReader;
-import org.mortbay.util.ajax.JSON;
+import org.codehaus.jackson.map.ObjectMapper;
-import com.google.common.base.Charsets;
-      return (Map<?, ?>)JSON.parse(new InputStreamReader(in, Charsets.UTF_8));
+      ObjectMapper mapper = new ObjectMapper();
+      return mapper.reader(Map.class).readValue(in);
-        final Object[] array = (Object[])rootmap.get(FileStatus.class.getSimpleName());
+        final List<?> array = JsonUtil.getList(
+            rootmap, FileStatus.class.getSimpleName());
-        final FileStatus[] statuses = new FileStatus[array.length];
-        for (int i = 0; i < array.length; i++) {
-          final Map<?, ?> m = (Map<?, ?>)array[i];
-          statuses[i] = makeQualified(JsonUtil.toFileStatus(m, false), f);
+        final FileStatus[] statuses = new FileStatus[array.size()];
+        int i = 0;
+        for (Object object : array) {
+          final Map<?, ?> m = (Map<?, ?>) object;
+          statuses[i++] = makeQualified(JsonUtil.toFileStatus(m, false), f);
-        return (Long) json.get("long");
+        return ((Number) json.get("long")).longValue();

UPD40 INS60 INS41 INS43 INS59 INS32 UPD42 MOV42 INS42 INS14 INS32 INS42 INS42 INS43 UPD42 MOV42 UPD42 MOV42 INS57 MOV43 INS42 INS43 INS60 INS70 UPD42 MOV42 INS74 INS39 MOV59 INS44 INS42 MOV8 INS32 INS43 INS76 MOV32 MOV43 INS42 INS36 INS42 UPD42 MOV42 UPD42 UPD42 INS42 INS32 MOV11 INS42 INS42 INS43 INS42 MOV37 INS42 DEL40 DEL26 DEL40 DEL26 DEL43 DEL76 DEL76 DEL74 DEL43 DEL42 DEL40 DEL14 DEL32 DEL11 DEL41 DEL43 DEL85 DEL5 DEL85 DEL5 DEL11 DEL40 DEL42 DEL42 DEL2 DEL42 DEL39 DEL58 DEL42 DEL40 DEL27 DEL24 DEL42 DEL43