YARN-8247 Incorrect HTTP status code returned by ATSv2 for non-whitelisted users.  Contributed by Rohith Sharma K S

-import javax.ws.rs.core.Response;
-import javax.ws.rs.core.Response.Status;
+import javax.servlet.http.HttpServletResponse;
-import org.apache.hadoop.yarn.webapp.ForbiddenException;
+    HttpServletRequest httpRequest = (HttpServletRequest) request;
+    HttpServletResponse httpResponse = (HttpServletResponse) response;
+
-          .getCallerUserGroupInformation((HttpServletRequest) request, true);
+          .getCallerUserGroupInformation(httpRequest, true);
-        Response.status(Status.FORBIDDEN).entity(msg).build();
-        throw new ForbiddenException("user " + userName
-            + " is not allowed to read TimelineService V2 data");
+        httpResponse.sendError(HttpServletResponse.SC_FORBIDDEN, msg);
+        return;

UPD40 MOV60 INS60 INS43 INS43 INS59 INS42 UPD42 MOV11 INS42 INS42 INS11 INS60 INS43 INS42 MOV43 INS59 INS42 INS42 INS32 INS41 INS42 INS42 INS42 INS9 INS32 UPD42 MOV42 UPD42 MOV42 UPD40 MOV40 MOV42 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL9 DEL32 DEL32 DEL42 DEL32 DEL42 DEL32 DEL42 DEL43 DEL45 DEL42 DEL45 DEL27 DEL14 DEL53