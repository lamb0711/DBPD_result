HDFS-11488. JN log segment syncing should support HA upgrade. Contributed by Hanisha Koneru.

-  public static boolean isDiskStatsEnabled(double fileIOSamplingFraction) {
+  public static boolean isDiskStatsEnabled(int fileIOSamplingPercentage) {
-    if (fileIOSamplingFraction < 0.000001) {
+    if (fileIOSamplingPercentage <= 0) {
-          .DFS_DATANODE_FILEIO_PROFILING_SAMPLING_FRACTION_KEY + " set to "
-          + fileIOSamplingFraction + ". Disabling file IO profiling");
+          .DFS_DATANODE_FILEIO_PROFILING_SAMPLING_PERCENTAGE_KEY + " set to "
+          + fileIOSamplingPercentage + ". Disabling file IO profiling");
-          .DFS_DATANODE_FILEIO_PROFILING_SAMPLING_FRACTION_KEY + " set to "
-          + fileIOSamplingFraction + ". Enabling file IO profiling");
+          .DFS_DATANODE_FILEIO_PROFILING_SAMPLING_PERCENTAGE_KEY + " set to "
+          + fileIOSamplingPercentage + ". Enabling file IO profiling");

UPD39 UPD42 UPD27 UPD42 UPD34 UPD40 UPD42 UPD40 UPD42