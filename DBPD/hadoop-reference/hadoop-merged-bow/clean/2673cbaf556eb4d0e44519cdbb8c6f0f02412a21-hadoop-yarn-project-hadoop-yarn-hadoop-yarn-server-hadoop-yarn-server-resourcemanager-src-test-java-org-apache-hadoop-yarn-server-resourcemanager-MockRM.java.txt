YARN-4615. Fix random test failure in TestAbstractYarnScheduler#testResourceRequestRecoveryToTheRightAppAttempt. (Sunil G via rohithsharmaks)

-    int timeoutSecs = 0;
+    // This method will assert if state is not expected after timeout.
+    Assert.assertTrue(waitForContainerState(containerId, state, 8 * 1000));
+  }
+
+  public boolean waitForContainerState(ContainerId containerId,
+      RMContainerState containerState, int timeoutMillisecs) throws Exception {
-    while ((container == null || container.getState() != state)
-        && timeoutSecs++ < 40) {
-      System.out.println(
-          "Waiting for" + containerId + " state to be:" + state.name());
-      Thread.sleep(200);
+    int timeoutSecs = 0;
+    while (((container == null) || !containerState.equals(container.getState()))
+        && timeoutSecs++ < timeoutMillisecs / 100) {
+      if(container == null){
+        container = getResourceScheduler().getRMContainer(containerId);
+      }
+      System.out.println("Container : " + containerId +
+          " Waiting for state : " + containerState);
+
+      Thread.sleep(100);
+
+      if (timeoutMillisecs <= timeoutSecs * 100) {
+        return false;
+      }
-    Assert.assertTrue(container.getState() == state);
+
+    System.out.println("Container State is : " + container.getState());
+    Assert.assertEquals("Container state is not correct (timedout)",
+        containerState, container.getState());
+    return true;

INS31 INS83 INS39 INS42 INS44 MOV44 INS43 INS8 UPD39 INS44 INS44 MOV60 INS43 INS42 INS42 INS21 INS43 INS42 INS39 INS42 INS21 INS41 INS42 INS32 INS42 INS32 INS9 INS42 INS42 INS32 INS25 INS25 INS40 UPD42 UPD27 INS42 INS42 INS45 INS42 INS32 INS42 INS42 INS42 INS27 INS27 INS27 INS8 INS27 INS8 INS45 INS42 INS42 INS34 INS34 INS36 INS38 INS42 UPD34 MOV34 INS42 INS33 INS21 UPD34 INS42 INS27 INS41 MOV27 INS32 INS7 UPD45 UPD45 INS42 INS42 INS34 INS9 INS42 INS42 MOV32 INS42 INS32 INS32 INS42 INS42 INS42 DEL42 DEL27 DEL42 DEL42 DEL32 DEL42 DEL42