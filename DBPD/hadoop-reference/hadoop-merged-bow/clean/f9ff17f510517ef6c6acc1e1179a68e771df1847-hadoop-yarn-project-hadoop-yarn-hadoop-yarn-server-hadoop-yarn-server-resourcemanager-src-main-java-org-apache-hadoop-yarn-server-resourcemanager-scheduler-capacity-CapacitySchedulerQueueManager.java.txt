Merge branch 'YARN-5734' into trunk. (xgong)

+import org.apache.hadoop.ha.HAServiceProtocol;
-    // Ensure queue hiearchy in the new XML file is proper.
-    validateQueueHierarchy(queues, newQueues);
+    // When failing over, if using configuration store, don't validate queue
+    // hierarchy since queues can be removed without being STOPPED.
+    if (!csContext.isConfigurationMutable() ||
+        csContext.getRMContext().getHAServiceState()
+            != HAServiceProtocol.HAServiceState.STANDBY) {
+      // Ensure queue hiearchy in the new XML file is proper.
+      validateQueueHierarchy(queues, newQueues);
+    }

INS26 INS40 INS25 INS27 INS8 INS38 INS27 MOV21 INS32 INS32 INS40 INS42 INS42 INS32 INS42 INS42 INS42