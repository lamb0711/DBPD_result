YARN-530. Defined Service model strictly, implemented AbstractService for robust subclassing and migrated yarn-common services. Contributed by Steve Loughran.
YARN-117. Migrated rest of YARN to the new service model. Contributed by Steve Louhran.
MAPREDUCE-5298. Moved MapReduce services to YARN-530 stricter lifecycle. Contributed by Steve Loughran.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492718 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.server.nodemanager.ContainerExecutor;
-  public void init(Configuration conf) {
+  protected void serviceInit(Configuration conf) throws Exception {
-    super.init(conf);
+    super.serviceInit(conf);
-  public void stop() {
-    sched.shutdown();
-    boolean terminated = false;
-    try {
-      terminated = sched.awaitTermination(10, SECONDS);
-    } catch (InterruptedException e) {
+  protected void serviceStop() throws Exception {
+    if (sched != null) {
+      sched.shutdown();
+      boolean terminated = false;
+      try {
+        terminated = sched.awaitTermination(10, SECONDS);
+      } catch (InterruptedException e) {
+      }
+      if (terminated != true) {
+        sched.shutdownNow();
+      }
-    if (terminated != true) {
-      sched.shutdownNow();
-    }
-    super.stop();
+    super.serviceStop();

UPD83 UPD42 INS43 UPD83 UPD42 INS43 INS8 INS42 INS42 INS25 INS21 INS27 MOV8 INS48 UPD42 INS42 INS33 INS42 DEL40 DEL26 DEL42 DEL48 DEL21