YARN-4014. Support user cli interface in for Application Priority. Contributed by Rohith Sharma K S

+    // Update attempt priority to the latest to avoid race condition i.e
+    // SchedulerApplicationAttempt is created with old priority but it is not
+    // set to SchedulerApplication#setCurrentAppAttempt.
+    // Scenario would occur is
+    // 1. SchdulerApplicationAttempt is created with old priority.
+    // 2. updateApplicationPriority() updates SchedulerApplication. Since
+    // currentAttempt is null, it just return.
+    // 3. ScheduelerApplcationAttempt is set in
+    // SchedulerApplication#setCurrentAppAttempt.
+    attempt.setPriority(application.getPriority());
+
-  public synchronized void updateApplicationPriority(Priority newPriority,
+  public void updateApplicationPriority(Priority newPriority,
-    rmContext.getStateStore().updateApplicationStateSynchronously(appState);
+    rmContext.getStateStore().updateApplicationStateSynchronously(appState,
+        false);

INS21 INS32 INS42 INS42 INS32 INS9 INS42 INS42 DEL83