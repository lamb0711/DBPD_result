HDFS-10768. Optimize mkdir ops. Contributed by Daryn Sharp.

-import java.util.Map;
-    final byte[] localName = iip.getLastLocalName();
+    final INodesInPath parent;
-      Map.Entry<INodesInPath, String> e = FSDirMkdirOp
-          .createAncestorDirectories(fsd, iip, dirPerms);
-      if (e == null) {
+      parent = FSDirMkdirOp.createAncestorDirectories(fsd, iip, dirPerms);
+      if (parent == null) {
-      iip = INodesInPath.append(e.getKey(), null, localName);
+    } else {
+      parent = iip.getParentINodesInPath();
-    INodeSymlink newNode = unprotectedAddSymlink(fsd, iip.getExistingINodes(),
-        localName, id, target, mtime, mtime, perm);
+    INodeSymlink newNode = unprotectedAddSymlink(fsd, parent,
+        iip.getLastLocalName(), id, target, mtime, mtime, perm);

MOV43 MOV25 INS8 UPD42 INS21 INS7 UPD42 MOV42 MOV32 UPD42 MOV32 UPD42 INS42 INS32 INS42 INS42 DEL40 DEL26 DEL39 DEL85 DEL5 DEL40 DEL43 DEL42 DEL43 DEL74 DEL42 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL33 DEL42 DEL32 DEL42 DEL32 DEL42