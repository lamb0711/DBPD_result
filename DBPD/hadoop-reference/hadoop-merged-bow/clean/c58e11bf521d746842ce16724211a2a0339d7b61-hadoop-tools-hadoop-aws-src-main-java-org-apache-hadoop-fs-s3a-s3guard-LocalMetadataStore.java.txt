HADOOP-16383. Pass ITtlTimeProvider instance in initialize method in MetadataStore interface.  Contributed by Gabor Bota. (#1009) 



+  private ITtlTimeProvider ttlTimeProvider;
+
-  public void initialize(FileSystem fileSystem) throws IOException {
+  public void initialize(FileSystem fileSystem,
+      ITtlTimeProvider ttlTp) throws IOException {
-    initialize(fs.getConf());
+    initialize(fs.getConf(), ttlTp);
-  public void initialize(Configuration conf) throws IOException {
+  public void initialize(Configuration conf, ITtlTimeProvider ttlTp)
+      throws IOException {
+    this.ttlTimeProvider = ttlTp;
-  public void delete(Path p, ITtlTimeProvider ttlTimeProvider)
+  public void delete(Path p)
-  public void deleteSubtree(Path path, ITtlTimeProvider ttlTimeProvider)
+  public void deleteSubtree(Path path)
-      boolean tombstone, ITtlTimeProvider ttlTimeProvider) {
+      boolean tombstone, ITtlTimeProvider ttlTp) {
-    deleteCacheEntries(path, tombstone, ttlTimeProvider);
+    deleteCacheEntries(path, tombstone, ttlTp);
-      deleteEntryByAncestor(path, localCache, tombstone, ttlTimeProvider);
+      deleteEntryByAncestor(path, localCache, tombstone, ttlTp);
-  public void move(
-      @Nullable Collection<Path> pathsToDelete,
+  public void move(@Nullable Collection<Path> pathsToDelete,
-        ITtlTimeProvider ttlTimeProvider,
-        delete(meta, ttlTimeProvider);
+        delete(meta);
-      ITtlTimeProvider ttlTimeProvider) {
+      ITtlTimeProvider ttlTp) {
-        pmd.setLastUpdated(ttlTimeProvider.getNow());
+        pmd.setLastUpdated(ttlTp.getNow());
-          dir.setLastUpdated(ttlTimeProvider.getNow());
+          dir.setLastUpdated(ttlTp.getNow());
+  public void setTtlTimeProvider(ITtlTimeProvider ttlTimeProvider) {
+    this.ttlTimeProvider = ttlTimeProvider;
+  }
+
+  @Override
-      ITtlTimeProvider ttlTimeProvider,

INS23 INS31 INS83 INS43 INS59 INS44 INS44 INS78 INS83 INS39 INS42 MOV44 INS8 INS42 INS42 INS43 INS42 INS43 INS42 INS21 UPD42 UPD42 INS42 INS21 INS42 INS42 INS7 INS7 INS42 INS22 INS42 UPD42 INS22 INS42 INS52 INS42 INS52 INS42 UPD42 UPD42 UPD42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL42