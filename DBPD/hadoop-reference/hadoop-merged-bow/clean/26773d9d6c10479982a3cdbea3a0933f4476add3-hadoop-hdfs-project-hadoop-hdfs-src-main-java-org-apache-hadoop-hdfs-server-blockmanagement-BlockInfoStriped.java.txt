HDFS-7826. Erasure Coding: Update INodeFile quota computation for striped blocks. Contributed by Kai Sasaki.

+import org.apache.hadoop.hdfs.protocol.HdfsConstants;
+  private final int   chunkSize = HdfsConstants.BLOCK_STRIPED_CHUNK_SIZE;
-  short getTotalBlockNum() {
+  public short getTotalBlockNum() {
+  public long spaceConsumed() {
+    // In case striped blocks, total usage by this striped blocks should
+    // be the total of data blocks and parity blocks because
+    // `getNumBytes` is the total of actual data block size.
+    return ((getNumBytes() - 1) / (dataBlockNum * chunkSize) + 1)
+        * chunkSize * parityBlockNum + getNumBytes();
+  }
+

INS26 INS40 INS23 INS31 INS83 INS83 INS39 INS59 INS83 INS83 INS39 INS42 INS8 INS42 INS40 INS41 INS27 INS27 INS32 INS36 INS42 INS42 INS42 INS27 INS27 INS34 INS36 INS36 INS27 INS27 INS32 INS34 INS42 INS42 INS42