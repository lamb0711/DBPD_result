YARN-9697. Efficient allocation of Opportunistic containers. Contributed by Abhishek Modi.

-import com.google.common.annotations.VisibleForTesting;
-import java.util.Set;
-  static class Allocation {
+  /**
+   * This class encapsulates container and resourceName for an allocation.
+   */
+  public static class Allocation {
-    Allocation(Container container, String resourceName) {
+    /**
+     * Creates an instance of Allocation.
+     * @param container allocated container.
+     * @param resourceName location where it got allocated.
+     */
+    public Allocation(Container container, String resourceName) {
-    Container getContainer() {
+    /**
+     * Get container of the allocation.
+     * @return container of the allocation.
+     */
+    public Container getContainer() {
-    String getResourceName() {
+    /**
+     * Get resource name of the allocation.
+     * @return resource name of the allocation.
+     */
+    public String getResourceName() {
-    public Set<String> getNodeLocations() {
-      return nodeLocations.keySet();
+    public Map<String, AtomicInteger> getNodeMap() {
+      return nodeLocations;
-    public Set<String> getRackLocations() {
-      return rackLocations.keySet();
+    public Map<String, AtomicInteger> getRackMap() {
+      return rackLocations;
-  @VisibleForTesting
-  void setMaxAllocationsPerAMHeartbeat(int maxAllocationsPerAMHeartbeat) {
+  public void setMaxAllocationsPerAMHeartbeat(
+      int maxAllocationsPerAMHeartbeat) {

INS29 INS83 INS83 INS65 INS29 INS83 INS29 INS83 INS29 INS83 UPD74 UPD42 UPD74 UPD42 INS66 INS65 INS65 INS65 INS65 INS65 INS65 INS65 UPD43 MOV43 INS43 UPD43 MOV43 INS43 INS66 INS42 INS66 INS42 INS66 INS66 INS66 INS66 INS66 UPD42 INS42 INS42 UPD42 INS42 INS42 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL78