HDFS-2907.  Add a conf property dfs.datanode.fsdataset.factory to make FSDataset in Datanode pluggable.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1292419 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.server.datanode.FSDatasetInterface;
-        conf.setBoolean(SimulatedFSDataset.CONFIG_PROPERTY_SIMULATED, true);
+        SimulatedFSDataset.setFactory(conf);
-        if (!conf.getBoolean(SimulatedFSDataset.CONFIG_PROPERTY_SIMULATED,
-                                                                false) ) {
+        if (!FSDatasetInterface.Factory.getFactory(conf).isSimulated()) {
-      conf.getBoolean(SimulatedFSDataset.CONFIG_PROPERTY_SIMULATED, false);
+        FSDatasetInterface.Factory.getFactory(conf).isSimulated();

INS26 INS40 INS32 UPD42 INS40 INS42 MOV42 UPD42 UPD42 INS42 INS32 UPD42 INS40 INS42 MOV42 DEL40 DEL9 DEL40 DEL9 DEL40 DEL9