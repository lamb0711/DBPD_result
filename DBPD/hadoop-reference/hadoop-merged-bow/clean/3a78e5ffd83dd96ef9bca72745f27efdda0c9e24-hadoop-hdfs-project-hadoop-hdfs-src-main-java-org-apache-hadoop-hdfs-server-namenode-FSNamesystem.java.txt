HDFS-12975. [SBN read] Changes to the NameNode to support reads from standby. Contributed by Chao Sun.
-   * Used when this NN is in standby state to read from the shared edit log.
+   * Used when this NN is in standby or observer state to read from the
+   * shared edit log.
-   * Start services required in standby state 
+   * Start services required in standby or observer state
-  void startStandbyServices(final Configuration conf) throws IOException {
-    LOG.info("Starting services required for standby state");
+  void startStandbyServices(final Configuration conf, boolean isObserver)
+      throws IOException {
+    LOG.info("Starting services required for " +
+        (isObserver ? "observer" : "standby") + " state");
-    
-    if (standbyShouldCheckpoint) {
+    if (!isObserver && standbyShouldCheckpoint) {

INS44 INS39 INS42 UPD66 INS66 UPD66 INS27 INS27 INS38 INS42 INS45 INS36 INS45 INS42 INS16 INS42 INS45 INS45 DEL45 DEL42