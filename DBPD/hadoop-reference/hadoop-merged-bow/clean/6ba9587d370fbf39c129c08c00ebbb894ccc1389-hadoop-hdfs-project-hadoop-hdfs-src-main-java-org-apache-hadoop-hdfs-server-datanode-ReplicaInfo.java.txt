HDFS-10958. Add instrumentation hooks around Datanode disk IO.

+  /** This is used by some tests and FsDatasetUtil#computeChecksum. */
+  private static final FileIoProvider DEFAULT_FILE_IO_PROVIDER =
+      new FileIoProvider(null);
+
-  
+
+  /**
+   * Get the {@link FileIoProvider} for disk IO operations.
+   */
+  public FileIoProvider getFileIoProvider() {
+    // In tests and when invoked via FsDatasetUtil#computeChecksum, the
+    // target volume for this replica may be unknown and hence null.
+    // Use the DEFAULT_FILE_IO_PROVIDER with no-op hooks.
+    return (volume != null) ? volume.getFileIoProvider()
+        : DEFAULT_FILE_IO_PROVIDER;
+  }
+

INS23 INS31 INS29 INS83 INS83 INS83 INS43 INS59 INS29 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS14 INS65 INS42 INS41 INS66 INS43 INS33 INS66 INS65 INS66 INS16 INS42 INS42 INS36 INS32 INS42 INS27 INS42 INS42 INS42 INS33