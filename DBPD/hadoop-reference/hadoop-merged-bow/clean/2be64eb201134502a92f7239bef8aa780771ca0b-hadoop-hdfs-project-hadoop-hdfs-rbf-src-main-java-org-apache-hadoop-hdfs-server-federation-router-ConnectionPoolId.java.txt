HDFS-13364. RBF: Support NamenodeProtocol in the Router. Contributed by Inigo Goiri.

+  /** Protocol for the connection. */
+  private final Class<?> protocol;
+   * @param proto Protocol of the connection.
-  public ConnectionPoolId(final UserGroupInformation ugi, final String nnId) {
+  public ConnectionPoolId(final UserGroupInformation ugi, final String nnId,
+      final Class<?> proto) {
+    this.protocol = proto;
+        .append(this.protocol)
-      return thisTokens.equals(otherTokens);
+      if (!thisTokens.equals(otherTokens)) {
+        return false;
+      }
+      return this.protocol.equals(other.protocol);
-    return this.ugi + " " + this.getTokenIds() + "->" + this.nnId;
+    return this.ugi + " " + this.getTokenIds() + "->" + this.nnId + " [" +
+        this.protocol.getSimpleName() + "]";
+    if (ret == 0) {
+      ret = this.protocol.toString().compareTo(other.protocol.toString());
+    }

INS23 INS29 INS83 INS83 INS74 INS59 INS44 INS65 INS43 INS76 INS42 INS65 INS83 INS74 INS42 INS21 INS25 INS66 INS42 INS42 INS66 INS43 INS76 INS7 INS27 INS8 INS42 INS22 INS42 INS32 INS25 INS41 INS45 INS32 INS45 INS42 INS34 INS21 INS52 INS42 MOV32 INS42 INS38 INS8 INS32 INS22 INS42 INS7 UPD42 INS22 MOV32 MOV41 INS22 INS42 INS40 INS52 INS42 INS42 INS32 INS52 INS42 INS9 INS52 INS42 INS32 INS42 INS32 INS22 INS42 INS40 INS42 INS52 INS42