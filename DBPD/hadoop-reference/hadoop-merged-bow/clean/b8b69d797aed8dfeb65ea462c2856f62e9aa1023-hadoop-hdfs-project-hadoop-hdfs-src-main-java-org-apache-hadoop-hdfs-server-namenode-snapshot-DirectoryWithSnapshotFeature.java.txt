Revert "HDFS-10797. Disk usage summary of snapshots causes renamed blocks to get counted twice. Contributed by Sean Mackrory."

This reverts commit 6a38d118d86b7907009bcec34f1b788d076f1d1c.

+import org.apache.hadoop.hdfs.server.namenode.ContentCounts;
-  public void computeContentSummary4Snapshot(
-      ContentSummaryComputationContext context) {
+  public void computeContentSummary4Snapshot(final BlockStoragePolicySuite bsps,
+      final ContentCounts counts) {
+    // Create a new blank summary context for blocking processing of subtree.
+    ContentSummaryComputationContext summary = 
+        new ContentSummaryComputationContext(bsps);
-      for(INode deletedNode : d.getChildrenDiff().getList(ListType.DELETED)) {
-        context.reportDeletedSnapshottedNode(deletedNode);
+      for(INode deleted : d.getChildrenDiff().getList(ListType.DELETED)) {
+        deleted.computeContentSummary(Snapshot.CURRENT_STATE_ID, summary);
+    // Add the counts from deleted trees.
+    counts.addContents(summary.getCounts());

INS26 INS40 INS44 INS83 INS43 INS42 INS83 INS43 UPD42 INS60 INS21 INS42 INS42 MOV43 INS59 INS32 INS42 INS14 INS42 INS42 INS32 INS43 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 INS40 UPD42