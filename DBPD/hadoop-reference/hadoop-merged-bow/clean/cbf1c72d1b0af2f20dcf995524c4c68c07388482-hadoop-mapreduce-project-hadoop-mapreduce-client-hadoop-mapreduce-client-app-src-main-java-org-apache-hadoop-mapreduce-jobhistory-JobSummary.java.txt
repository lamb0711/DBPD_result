MAPREDUCE-5778. JobSummary does not escape newlines in the job name. Contributed by Akira AJISAKA


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1576940 13f79535-47bb-0310-9956-ffa450edef68

-      return _add(key, StringUtils.escapeString(String.valueOf(value),
-          StringUtils.ESCAPE_CHAR, charsToEscape));
+      String escapedString = StringUtils.escapeString(String.valueOf(value), 
+          StringUtils.ESCAPE_CHAR, charsToEscape).replaceAll("\n", "\\\\n")
+                                                 .replaceAll("\r", "\\\\r");
+      return _add(key, escapedString);

INS60 INS43 INS59 INS32 INS42 INS42 INS32 INS42 INS42 INS42 MOV32 MOV42 INS42 INS45 INS45 UPD42 INS45 INS45 DEL42