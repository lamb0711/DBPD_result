HDFS-4727. Update inodeMap after deleting files/directories/snapshots.  Contributed by Jing Zhao


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1470756 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+import org.apache.hadoop.hdfs.server.namenode.INode;
-        BlocksMapUpdateInfo collectedBlocks) {
+        BlocksMapUpdateInfo collectedBlocks, final List<INode> removedINodes) {
-      Util.collectBlocksAndClear(sFile, collectedBlocks);
+      Util.collectBlocksAndClear(sFile, collectedBlocks, removedINodes);
-        FileDiff posterior, BlocksMapUpdateInfo collectedBlocks) {
+        FileDiff posterior, BlocksMapUpdateInfo collectedBlocks,
+        final List<INode> removedINodes) {
-          collectedBlocks);
+          collectedBlocks, removedINodes);
-        BlocksMapUpdateInfo collectedBlocks) {
+        BlocksMapUpdateInfo collectedBlocks, final List<INode> removedINodes) {
-          collectedBlocks);
+          collectedBlocks, removedINodes);
-        final BlocksMapUpdateInfo info) {
+        final BlocksMapUpdateInfo info, final List<INode> removedINodes) {
-        file.asINodeFile().destroyAndCollectBlocks(info);
+        file.asINodeFile().destroyAndCollectBlocks(info, removedINodes);

INS26 INS26 INS40 INS40 INS44 INS44 INS44 INS44 INS83 INS74 INS42 INS83 INS74 INS42 INS83 INS74 INS42 INS83 INS74 INS42 INS43 INS43 INS43 INS43 INS43 INS43 INS43 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42