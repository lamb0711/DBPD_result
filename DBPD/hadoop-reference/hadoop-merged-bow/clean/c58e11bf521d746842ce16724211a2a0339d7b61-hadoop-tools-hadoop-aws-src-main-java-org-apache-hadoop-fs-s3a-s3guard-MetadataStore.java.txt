HADOOP-16383. Pass ITtlTimeProvider instance in initialize method in MetadataStore interface.  Contributed by Gabor Bota. (#1009) 



+   * @param ttlTimeProvider the time provider to use for metadata expiry
-  void initialize(FileSystem fs) throws IOException;
+  void initialize(FileSystem fs, ITtlTimeProvider ttlTimeProvider)
+      throws IOException;
-   * @see #initialize(FileSystem)
+   * @see #initialize(FileSystem, ITtlTimeProvider)
+   * @param ttlTimeProvider the time provider to use for metadata expiry
-  void initialize(Configuration conf) throws IOException;
+  void initialize(Configuration conf,
+      ITtlTimeProvider ttlTimeProvider) throws IOException;
-   * @param ttlTimeProvider the time provider to set last_updated. Must not
-   *                        be null.
-  void delete(Path path, ITtlTimeProvider ttlTimeProvider)
+  void delete(Path path)
-   * {@link MetadataStore#delete(Path, ITtlTimeProvider)}. It is currently
+   * {@link MetadataStore#delete(Path)}. It is currently
-   * @param ttlTimeProvider the time provider to set last_updated. Must not
-   *                        be null.
-  void deleteSubtree(Path path, ITtlTimeProvider ttlTimeProvider)
+  void deleteSubtree(Path path)
-   * @param timeProvider time provider for timestamps
-  void addAncestors(
-      Path qualifiedPath,
-      @Nullable ITtlTimeProvider timeProvider,
+  void addAncestors(Path qualifiedPath,
-   * @param ttlTimeProvider the time provider to set last_updated. Must not
-   *                        be null.
-  void move(
-      @Nullable Collection<Path> pathsToDelete,
+  void move(@Nullable Collection<Path> pathsToDelete,
-      ITtlTimeProvider ttlTimeProvider,
+  /**
+   * The TtlTimeProvider has to be set during the initialization for the
+   * metadatastore, but this method can be used for testing, and change the
+   * instance during runtime.
+   *
+   * @param ttlTimeProvider
+   */
+  void setTtlTimeProvider(ITtlTimeProvider ttlTimeProvider);
+

INS31 MOV44 MOV44 INS29 INS39 INS42 MOV44 INS65 INS65 INS65 INS65 INS42 INS66 INS42 INS66 INS66 INS66 INS66 INS42 MOV69 DEL42 DEL66 DEL66 DEL65 DEL42 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL78 DEL42 DEL43 DEL42 DEL44 DEL42 DEL66 DEL66 DEL65