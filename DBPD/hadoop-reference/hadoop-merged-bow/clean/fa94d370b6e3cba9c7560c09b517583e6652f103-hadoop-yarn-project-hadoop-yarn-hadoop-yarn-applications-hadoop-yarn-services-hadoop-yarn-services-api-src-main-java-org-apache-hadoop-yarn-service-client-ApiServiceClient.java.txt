YARN-8869. YARN Service Client might not work correctly with RM REST API for Kerberos authentication. Contributed by Eric Yang.

-import com.sun.jersey.api.client.WebResource;
-  private String getRMWebAddress() {
+  String getRMWebAddress() {
-    List<String> rmServers = RMHAUtils
-        .getRMHAWebappAddresses(new YarnConfiguration(conf));
+    List<String> rmServers = getRMHAWebAddresses(conf);
-        WebResource webResource = client
-            .resource(sb.toString());
+        Builder builder = client
+            .resource(sb.toString()).type(MediaType.APPLICATION_JSON);
-          webResource.header(HttpHeaders.AUTHORIZATION, "Negotiate " +
+          builder.header(HttpHeaders.AUTHORIZATION, "Negotiate " +
-        ClientResponse test = webResource.get(ClientResponse.class);
+        ClientResponse test = builder.get(ClientResponse.class);
+  List<String> getRMHAWebAddresses(Configuration conf) {
+    return RMHAUtils
+        .getRMHAWebappAddresses(new YarnConfiguration(conf));
+  }
+

INS31 MOV74 INS42 INS44 INS8 INS43 INS42 INS41 INS74 INS42 MOV32 INS43 INS43 INS32 INS42 INS42 INS42 INS42 UPD43 UPD42 INS42 INS32 MOV32 INS42 INS40 UPD42 UPD42 DEL40 DEL26 DEL83 DEL42