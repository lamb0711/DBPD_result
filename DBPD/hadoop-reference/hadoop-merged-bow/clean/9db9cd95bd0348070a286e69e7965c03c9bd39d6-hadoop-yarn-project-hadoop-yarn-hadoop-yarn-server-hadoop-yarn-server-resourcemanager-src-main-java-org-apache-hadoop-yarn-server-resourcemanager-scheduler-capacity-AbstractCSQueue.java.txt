YARN-7003. DRAINING state of queues is not recovered after RM restart. Contributed by Tao Yang.

+
+  public void recoverDrainingState() {
+    try {
+      this.writeLock.lock();
+      if (getState() == QueueState.STOPPED) {
+        updateQueueState(QueueState.DRAINING);
+      }
+      LOG.info("Recover draining state for queue " + this.getQueuePath());
+      if (getParent() != null && getParent().getState() == QueueState.STOPPED) {
+        ((AbstractCSQueue) getParent()).recoverDrainingState();
+      }
+    } finally {
+      this.writeLock.unlock();
+    }
+  }

INS31 INS83 INS39 INS42 INS8 INS54 INS8 INS8 INS21 INS25 INS21 INS25 INS21 INS32 INS27 INS8 INS32 INS27 INS8 INS32 INS22 INS42 INS32 INS40 INS21 INS42 INS42 INS27 INS27 INS27 INS21 INS22 INS42 INS52 INS42 INS42 INS32 INS45 INS32 INS32 INS33 INS32 INS40 INS32 INS52 INS42 INS42 INS40 INS52 INS42 INS42 INS32 INS42 INS36 INS42 INS42 INS11 INS43 INS32 INS42 INS42