Merge trunk into HA branch.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1220616 13f79535-47bb-0310-9956-ffa450edef68

-    if ( blockInfoSet.size() > 0 ) {
+    if (!blockInfoSet.isEmpty()) {
-    if (blockInfoSet.size() > 0 ) {
+    if (!blockInfoSet.isEmpty()) {
-      if ( blockInfoSet.size() > 0 ) {
+      if (!blockInfoSet.isEmpty()) {
-      if (blockInfoSet.size() > 0 ) {
+      if (!blockInfoSet.isEmpty()) {
-            || (!(this.isFirstBlockProcessed()))) {
+            || ((!blockInfoSet.isEmpty()) && !(this.isFirstBlockProcessed()))) {

INS38 INS38 INS32 INS32 MOV42 UPD42 MOV42 MOV42 UPD42 MOV42 INS38 INS38 INS32 INS32 MOV42 UPD42 MOV42 MOV42 UPD42 MOV42 INS27 INS36 MOV38 INS38 INS32 INS42 INS42 DEL32 DEL34 DEL27 DEL32 DEL34 DEL27 DEL32 DEL34 DEL27 DEL32 DEL34 DEL27