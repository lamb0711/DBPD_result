YARN-2582. Fixed Log CLI and Web UI for showing aggregated logs of LRS. Contributed Xuan Gong.

-import org.apache.hadoop.fs.Path;
-import org.apache.hadoop.yarn.logaggregation.AggregatedLogFormat;
-import org.apache.hadoop.yarn.logaggregation.LogAggregationUtils;
-    
+
-        System.out.println("Application has not completed." +
-        		" Logs are only available after an application completes");
+        System.out.println("Logs are not avaiable right now.");
-      System.err.println("Unable to get ApplicationState." +
-      		" Attempting to fetch logs directly from the filesystem.");
+      System.err.println("Unable to get ApplicationState."
+          + " Attempting to fetch logs directly from the filesystem.");
-      Path remoteRootLogDir =
-        new Path(getConf().get(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,
-            YarnConfiguration.DEFAULT_NM_REMOTE_APP_LOG_DIR));
-      AggregatedLogFormat.LogReader reader =
-          new AggregatedLogFormat.LogReader(getConf(),
-              LogAggregationUtils.getRemoteNodeLogFileForApp(
-                  remoteRootLogDir,
-                  appId,
-                  appOwner,
-                  ConverterUtils.toNodeId(nodeAddress),
-                  LogAggregationUtils.getRemoteNodeLogDirSuffix(getConf())));
-      resultCode = logCliHelper.dumpAContainerLogs(containerIdStr, reader, System.out);
+      resultCode =
+          logCliHelper.dumpAContainersLogs(appIdStr, containerIdStr,
+            nodeAddress, appOwner);
-      case ACCEPTED:
-      case RUNNING:
+      case ACCEPTED:
+      case RUNNING:

MOV49 MOV49 INS45 UPD42 INS42 INS42 UPD42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL45 DEL45 DEL27 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL32 DEL42 DEL40 DEL40 DEL32 DEL14 DEL59 DEL60 DEL40 DEL43 DEL42 DEL40 DEL43 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL32 DEL32 DEL14 DEL59 DEL60 DEL40