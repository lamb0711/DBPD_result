HDFS-3849. When re-loading the FSImage, we should clear the existing genStamp and leases. Contributed by Colin Patrick McCabe.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1378364 13f79535-47bb-0310-9956-ffa450edef68

+   * Clear all loaded data
+   */
+  void clear() {
+    dir.reset();
+    dtSecretManager.reset();
+    generationStamp.setStamp(GenerationStamp.FIRST_VALID_STAMP);
+    leaseManager.removeAllLeases();
+  }
+
+  @VisibleForTesting
+  LeaseManager getLeaseManager() {
+    return leaseManager;
+  }
+  
+  /**
+
+  /**

INS31 INS31 INS29 INS39 INS42 INS8 INS78 INS43 INS42 INS8 INS65 INS21 INS21 INS21 INS21 INS42 INS42 INS41 INS66 INS32 INS32 INS32 INS32 INS42 INS66 INS42 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS42