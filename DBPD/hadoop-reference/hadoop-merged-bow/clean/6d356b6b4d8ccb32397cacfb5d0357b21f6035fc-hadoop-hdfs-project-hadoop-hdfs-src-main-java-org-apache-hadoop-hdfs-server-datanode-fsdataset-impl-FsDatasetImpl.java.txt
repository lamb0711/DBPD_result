HDFS-11340. DataNode reconfigure for disks doesn't remove the failed volumes. (Manoj Govindassamy via lei)

-      Collection<StorageLocation> storageLocationsToRemove,
+      final Collection<StorageLocation> storageLocsToRemove,
+    Collection<StorageLocation> storageLocationsToRemove =
+        new ArrayList<>(storageLocsToRemove);
+          storageLocationsToRemove.remove(sdLocation);
+        }
+      }
+
+      // A reconfigure can remove the storage location which is already
+      // removed when the failure was detected by DataNode#checkDiskErrorAsync.
+      // Now, lets remove this from the failed volume list.
+      if (clearFailure) {
+        for (StorageLocation storageLocToRemove : storageLocationsToRemove) {
+          volumes.removeVolumeFailureInfo(storageLocToRemove);

INS83 INS74 UPD42 INS60 INS43 INS43 MOV74 INS59 INS42 INS42 INS42 INS14 INS25 INS74 INS42 INS42 INS8 INS43 INS70 INS42 INS44 INS42 INS8 INS21 INS43 INS42 INS21 INS32 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42