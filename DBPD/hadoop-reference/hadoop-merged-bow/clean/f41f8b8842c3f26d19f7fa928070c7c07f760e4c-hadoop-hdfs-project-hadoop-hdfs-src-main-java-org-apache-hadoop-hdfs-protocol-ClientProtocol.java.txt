HDFS-5163. Miscellaneous cache pool RPC fixes (Contributed by Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1520665 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.server.namenode.CachePool;
-  public List<Fallible<PathCacheEntry>> addPathCacheDirectives(
-      List<PathCacheDirective> directives) throws IOException;
+  public List<Fallible<PathCacheEntry>>
+    addPathCacheDirectives(List<PathCacheDirective> directives)
+      throws IOException;
-  @Idempotent
+  @AtMostOnce
-   * @param pool The cache pool to list, or -1 to list all pools
-   * @param maxRepliesPerRequest The maximum number of entries to return per
-   *          request
+   * @param pool The cache pool to list, or the empty string to list all pools
-      long poolId, int maxRepliesPerRequest) throws IOException;
-
+      String pool) throws IOException;
+  
-  public CachePool addCachePool(CachePoolInfo info) throws IOException;
+  public void addCachePool(CachePoolInfo info) throws IOException;
-   * Modify a cache pool, e.g. pool name, permissions, owner, group.
-   * 
-   * @param poolId ID of the cache pool to modify
-   * @param info New metadata for the cache pool
-   * @throws IOException If the request could not be completed.
+   * Modify a cache pool.
+   *
+   * @param req
+   *          The request to modify a cache pool.
+   * @throws IOException 
+   *          If the request could not be completed.
-  public void modifyCachePool(long poolId, CachePoolInfo info)
-      throws IOException;
-
+  public void modifyCachePool(CachePoolInfo req) throws IOException;
+  
-   * @param poolId ID of the cache pool to remove.
+   * @param pool name of the cache pool to remove.
-  @Idempotent
-  public void removeCachePool(long poolId) throws IOException;
+  @AtMostOnce
+  public void removeCachePool(String pool) throws IOException;
-   * @param prevPoolId ID of the last pool listed, or -1 if this is the first
-   *          invocation of listCachePools
-   * @param maxRepliesPerRequest Maximum number of cache pools to return per
-   *          server request.
+   * @param prevPool name of the last pool listed, or the empty string if this is
+   *          the first invocation of listCachePools
-  public RemoteIterator<CachePool> listCachePools(long prevPoolId,
-      int maxRepliesPerRequest) throws IOException;
+  public RemoteIterator<CachePoolInfo> listCachePools(String prevPool)
+      throws IOException;

INS39 UPD74 UPD42 INS43 UPD42 UPD42 UPD42 INS43 UPD42 UPD43 INS43 UPD42 UPD66 INS42 UPD66 UPD42 UPD66 INS66 UPD66 UPD42 UPD66 INS42 UPD42 UPD66 UPD66 UPD42 INS42 DEL40 DEL26 DEL42 DEL66 DEL66 DEL65 DEL39 DEL39 DEL42 DEL44 DEL42 DEL43 DEL42 DEL66 DEL65 DEL39 DEL42 DEL44 DEL39 DEL42 DEL66 DEL66 DEL65 DEL39 DEL39 DEL42 DEL44