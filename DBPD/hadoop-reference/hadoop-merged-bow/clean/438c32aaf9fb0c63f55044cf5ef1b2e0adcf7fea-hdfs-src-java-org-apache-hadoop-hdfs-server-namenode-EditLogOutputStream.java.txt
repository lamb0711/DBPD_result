HDFS-2149. Move EditLogOp serialization formats into FsEditLogOp implementations. Contributed by Ivan Kelly.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1151238 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.OutputStream;
-import org.apache.hadoop.io.Writable;
-abstract class EditLogOutputStream extends OutputStream 
-implements JournalStream {
+abstract class EditLogOutputStream implements JournalStream {
-  /** {@inheritDoc} */
-  abstract public void write(int b) throws IOException;
-
-   * Write edits log record into the stream.
-   * The record is represented by operation name and
-   * an array of Writable arguments.
+   * Write edits log operation to the stream.
-   * @param writables array of Writable arguments
-  abstract void write(byte op, Writable ... writables) throws IOException;
+  abstract void write(FSEditLogOp op) throws IOException;
+
+  /**
+   * Write raw data to an edit log. This data should already have
+   * the transaction ID, checksum, etc included. It is for use
+   * within the BackupNode when replicating edits from the
+   * NameNode.
+   *
+   * @param bytes the bytes to write.
+   * @param offset offset in the bytes to write from
+   * @param length number of bytes to write
+   * @throws IOException
+   */
+  abstract void writeRaw(byte[] bytes, int offset, int length)
+      throws IOException;

MOV31 UPD42 INS44 INS44 UPD43 UPD42 INS65 INS65 INS65 INS65 INS65 INS5 INS42 UPD42 INS39 INS42 UPD66 UPD42 INS66 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS42 UPD66 MOV66 INS42 INS39 INS85 DEL40 DEL26 DEL40 DEL26 DEL42 DEL43 DEL66 DEL66 DEL42 DEL66 DEL65 DEL39 DEL42 DEL44 DEL65 DEL65 DEL83