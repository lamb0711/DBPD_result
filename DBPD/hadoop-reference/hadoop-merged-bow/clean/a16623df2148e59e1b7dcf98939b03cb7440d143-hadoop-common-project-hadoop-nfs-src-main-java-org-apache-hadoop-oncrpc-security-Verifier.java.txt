HADOOP-15307. NFS: flavor AUTH_SYS should use VerifierNone. Contributed by Gabor Bota.

-    if(flavor == AuthFlavor.AUTH_NONE) {
+    if (flavor == AuthFlavor.AUTH_NONE) {
-    } else if(flavor == AuthFlavor.RPCSEC_GSS) {
+    } else if (flavor == AuthFlavor.AUTH_SYS) {
+      // Added in HADOOP-15307 based on HDFS-5085:
+      // When the auth flavor is AUTH_SYS, the corresponding verifier is
+      // AUTH_NONE. I.e., it is impossible to have a verifier with auth
+      // flavor AUTH_SYS.
+      verifer = new VerifierNone();
+    } else if (flavor == AuthFlavor.RPCSEC_GSS) {
-      throw new UnsupportedOperationException("Unsupported verifier flavor"
+      throw new UnsupportedOperationException("Unsupported verifier flavor: "

INS25 INS27 INS8 MOV25 INS42 INS40 INS21 INS7 INS42 INS14 INS43 INS42 UPD45