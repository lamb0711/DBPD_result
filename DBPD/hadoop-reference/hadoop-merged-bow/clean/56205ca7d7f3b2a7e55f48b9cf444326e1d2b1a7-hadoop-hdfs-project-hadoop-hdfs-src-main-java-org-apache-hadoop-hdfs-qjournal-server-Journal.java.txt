HDFS-5840. Follow-up to HDFS-5138 to improve error handling during partial upgrade failures. Contributed by Aaron T. Myers, Suresh Srinivas, and Jing Zhao.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1581260 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption;
-      StorageErrorReporter errorReporter) throws IOException {
-    storage = new JNStorage(conf, logDir, errorReporter);
+      StartupOption startOpt, StorageErrorReporter errorReporter)
+      throws IOException {
+    storage = new JNStorage(conf, logDir, startOpt, errorReporter);

INS26 INS40 INS44 INS43 INS42 INS42 INS42