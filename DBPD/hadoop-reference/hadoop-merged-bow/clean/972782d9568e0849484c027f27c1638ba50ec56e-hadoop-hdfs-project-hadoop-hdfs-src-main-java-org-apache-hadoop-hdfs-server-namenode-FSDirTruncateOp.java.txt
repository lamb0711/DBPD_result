HDFS-9754. Avoid unnecessary getBlockCollection calls in BlockManager. Contributed by Jing Zhao.

+import java.util.Set;
+        oldBlock.delete();
-    long remainingLength =
-        file.collectBlocksBeyondMax(newLength, collectedBlocks);
-    file.excludeSnapshotBlocks(latestSnapshot, collectedBlocks);
+    Set<BlockInfo> toRetain = file.getSnapshotBlocksToRetain(latestSnapshot);
+    long remainingLength = file.collectBlocksBeyondMax(newLength,
+        collectedBlocks, toRetain);

INS26 INS40 INS60 INS74 INS39 INS59 INS43 INS43 UPD42 INS42 INS32 INS42 INS42 UPD42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV42 INS42 INS21 INS32 INS42 INS42 DEL39 DEL42 DEL32 DEL21