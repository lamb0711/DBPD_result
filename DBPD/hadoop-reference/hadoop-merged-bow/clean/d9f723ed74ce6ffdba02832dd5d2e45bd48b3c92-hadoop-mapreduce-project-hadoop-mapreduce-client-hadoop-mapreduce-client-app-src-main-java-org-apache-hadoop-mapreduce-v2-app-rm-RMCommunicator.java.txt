MAPREDUCE-5769. Unregistration to RM should not be called if AM is crashed before registering with RM. Contributed by Rohith


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1577647 13f79535-47bb-0310-9956-ffa450edef68

+  private boolean isApplicationMasterRegistered = false;
+      isApplicationMasterRegistered = true;
-    if(shouldUnregister) {
+    if (isApplicationMasterRegistered && shouldUnregister) {
+
+  @VisibleForTesting
+  protected boolean isApplicationMasterRegistered() {
+    return isApplicationMasterRegistered;
+  }

INS23 INS31 INS83 INS39 INS59 INS78 INS83 INS39 INS42 INS8 INS42 INS9 INS42 INS41 INS27 INS42 INS21 INS42 INS42 INS7 INS42 INS9 DEL42