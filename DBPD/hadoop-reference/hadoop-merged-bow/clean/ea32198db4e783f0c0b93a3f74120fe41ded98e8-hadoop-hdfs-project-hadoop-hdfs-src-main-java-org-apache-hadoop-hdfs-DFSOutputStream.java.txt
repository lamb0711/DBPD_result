HDFS-3298. Add HdfsDataOutputStream as a public API.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1330064 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.client.HdfsDataOutputStream;
-class DFSOutputStream extends FSOutputSummer implements Syncable {
+public final class DFSOutputStream extends FSOutputSummer implements Syncable {
-   * Returns the number of replicas of current block. This can be different
-   * from the designated replication factor of the file because the NameNode
-   * does not replicate the block to which a client is currently writing to.
-   * The client continues to write to a block even if a few datanodes in the
-   * write pipeline have failed. 
+   * @deprecated use {@link HdfsDataOutputStream#getCurrentBlockReplication()}.
+   */
+  @Deprecated
+  public synchronized int getNumCurrentReplicas() throws IOException {
+    return getCurrentBlockReplication();
+  }
+
+  /**
+   * Note that this is not a public API;
+   * use {@link HdfsDataOutputStream#getCurrentBlockReplication()} instead.
+   * 
-  public synchronized int getNumCurrentReplicas() throws IOException {
+  public synchronized int getCurrentBlockReplication() throws IOException {

INS26 INS40 INS83 INS83 INS31 INS29 INS78 INS83 INS83 INS39 INS42 INS43 INS8 UPD42 INS65 INS42 INS42 INS41 INS66 INS65 INS66 INS32 UPD66 UPD66 INS65 UPD66 INS68 INS42 INS68 INS42 INS42 INS42 INS42 DEL66 DEL66