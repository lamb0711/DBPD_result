HADOOP-14850. Read HttpServer2 resources directly from the source tree (if exists). Contributed by Elek, Marton.

+import java.net.MalformedURLException;
-   * @throws FileNotFoundException if 'webapps' directory cannot be found on CLASSPATH.
+   * @throws FileNotFoundException if 'webapps' directory cannot be found
+   *   on CLASSPATH or in the development location.
-    URL url = getClass().getClassLoader().getResource("webapps/" + appName);
-    if (url == null)
-      throw new FileNotFoundException("webapps/" + appName
-          + " not found in CLASSPATH");
-    String urlString = url.toString();
+    URL resourceUrl = null;
+    File webResourceDevLocation = new File("src/main/webapps", appName);
+    if (webResourceDevLocation.exists()) {
+      LOG.info("Web server is in development mode. Resources "
+          + "will be read from the source tree.");
+      try {
+        resourceUrl = webResourceDevLocation.getParentFile().toURI().toURL();
+      } catch (MalformedURLException e) {
+        throw new FileNotFoundException("Mailformed URL while finding the "
+            + "web resource dir:" + e.getMessage());
+      }
+    } else {
+      resourceUrl =
+          getClass().getClassLoader().getResource("webapps/" + appName);
+
+      if (resourceUrl == null) {
+        throw new FileNotFoundException("webapps/" + appName +
+            " not found in CLASSPATH");
+      }
+    }
+    String urlString = resourceUrl.toString();

INS26 INS40 INS8 INS60 INS60 INS25 INS60 MOV41 UPD66 INS66 MOV43 INS59 INS43 INS59 INS32 INS8 MOV8 MOV43 INS59 INS42 INS33 INS42 INS42 INS14 INS42 INS42 INS21 INS54 INS21 INS42 INS32 INS43 INS45 INS42 INS32 INS8 INS12 INS7 INS8 INS42 INS42 INS42 INS42 INS42 INS27 INS21 INS44 INS8 INS42 MOV32 UPD42 MOV53 INS45 INS45 INS7 INS43 INS42 INS53 INS42 INS32 INS42 INS14 INS32 INS42 INS43 INS27 INS32 INS42 INS42 INS45 INS45 INS32 INS42 INS42 INS42 INS42 DEL42 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60