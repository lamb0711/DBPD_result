HDDS-1974. Implement OM CancelDelegationToken request to use Cache and DoubleBuffer. (#1308)


+import org.apache.hadoop.utils.db.Table;
+import javax.annotation.Nonnull;
+import javax.annotation.Nullable;
- * Handle response for DelegationToken request.
+ * Handle response for GetDelegationToken request.
-public class OMDelegationTokenResponse extends OMClientResponse {
+public class OMGetDelegationTokenResponse extends OMClientResponse {
-  private long renewTime;
-  public OMDelegationTokenResponse(OzoneTokenIdentifier ozoneTokenIdentifier,
-      long renewTime, OMResponse omResponse) {
+  private long renewTime = -1L;
+
+  public OMGetDelegationTokenResponse(
+      @Nullable OzoneTokenIdentifier ozoneTokenIdentifier,
+      long renewTime, @Nonnull OMResponse omResponse) {
-
+    Table table = omMetadataManager.getDelegationTokenTable();
-      omMetadataManager.getDelegationTokenTable().putWithBatch(batchOperation,
-          ozoneTokenIdentifier, renewTime);
+      table.putWithBatch(batchOperation, ozoneTokenIdentifier, renewTime);

INS26 INS26 INS26 INS40 INS40 INS40 UPD42 UPD42 UPD66 INS38 INS78 INS78 INS60 INS34 INS42 INS42 INS43 INS59 INS42 INS42 MOV32 INS42