HDFS-11243. [SPS]: Add a protocol command from NN to DN for dropping the SPS work and queues. Contributed by Uma Maheswara Rao G

-
+
+    /**
+     * Clear the trackID vs movement status tracking map.
+     */
+    void removeAll() {
+      synchronized (trackIdVsMovementStatus) {
+        trackIdVsMovementStatus.clear();
+      }
+    }
+
+
+  /**
+   * Drop the in-progress SPS work queues.
+   */
+  public void dropSPSWork() {
+    LOG.info("Received request to drop StoragePolicySatisfierWorker queues. "
+        + "So, none of the SPS Worker queued block movements will"
+        + " be scheduled.");
+    movementTracker.removeAll();
+    handler.removeAll();
+  }

INS31 INS31 INS29 INS83 INS39 INS42 INS8 INS29 INS39 INS42 INS8 INS65 INS21 INS21 INS21 INS65 INS51 INS66 INS32 INS32 INS32 INS66 INS42 INS8 INS42 INS42 INS27 INS42 INS42 INS42 INS42 INS21 INS45 INS45 INS45 INS32 INS42 INS42