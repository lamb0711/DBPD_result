HDFS-5439. Fix TestPendingReplication. (Contributed by Junping Du, Arpit Agarwal)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1539247 13f79535-47bb-0310-9956-ffa450edef68

-  void increment(Block block, DatanodeStorageInfo[] targets) {
+  void increment(Block block, DatanodeDescriptor[] targets) {
-  void decrement(Block block, DatanodeDescriptor dn, String storageID) {
+  void decrement(Block block, DatanodeDescriptor dn) {
-        found.decrementReplicas(dn.getStorageInfo(storageID));
+        found.decrementReplicas(dn);
-    private final List<DatanodeStorageInfo> targets;
+    private final List<DatanodeDescriptor> targets;
-    PendingBlockInfo(DatanodeStorageInfo[] targets) {
+    PendingBlockInfo(DatanodeDescriptor[] targets) {
-      this.targets = targets == null ? new ArrayList<DatanodeStorageInfo>()
-          : new ArrayList<DatanodeStorageInfo>(Arrays.asList(targets));
+      this.targets = targets == null ? new ArrayList<DatanodeDescriptor>()
+          : new ArrayList<DatanodeDescriptor>(Arrays.asList(targets));
-    void incrementReplicas(DatanodeStorageInfo... newTargets) {
+    void incrementReplicas(DatanodeDescriptor... newTargets) {
-        for (DatanodeStorageInfo dn : newTargets) {
+        for (DatanodeDescriptor dn : newTargets) {
-    void decrementReplicas(DatanodeStorageInfo storage) {
-      targets.remove(storage);
+    void decrementReplicas(DatanodeDescriptor target) {
+      targets.remove(target);

UPD5 UPD74 UPD43 UPD43 UPD5 UPD43 UPD43 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 MOV14 UPD42 UPD74 UPD74 MOV32 UPD43 MOV42 UPD43 UPD43 UPD42 UPD42 UPD42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32