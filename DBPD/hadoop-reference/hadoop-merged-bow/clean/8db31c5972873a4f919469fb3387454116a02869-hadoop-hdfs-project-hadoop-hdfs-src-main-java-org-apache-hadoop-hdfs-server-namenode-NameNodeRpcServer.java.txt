HDFS-2922. HA: close out operation categories. Contributed by Eli Collins


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1292620 13f79535-47bb-0310-9956-ffa450edef68

-    // nn.checkOperation(OperationCategory.WRITE);
-    // TODO: I dont think this should be checked - it's just for logging
-    // and dropping backups
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
-      throws IOException {
-    // TODO(HA): decide on OperationCategory for this
+  throws IOException {
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
+
-  public boolean restoreFailedStorage(String arg) 
-      throws AccessControlException {
-    // TODO:HA decide on OperationCategory for this
+  public boolean restoreFailedStorage(String arg) throws IOException { 
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
-  public long getTransactionID() {
-    // TODO:HA decide on OperationCategory for this
+  public long getTransactionID() throws IOException {
+    namesystem.checkOperation(OperationCategory.CHECKPOINT);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.READ);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.WRITE);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.READ);
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.UNCHECKED);
+
-   * @param bandwidth Blanacer bandwidth in bytes per second for all datanodes.
+   * @param bandwidth Balancer bandwidth in bytes per second for all datanodes.
-    // TODO:HA decide on OperationCategory for this
+    namesystem.checkOperation(OperationCategory.UNCHECKED);

UPD43 INS43 INS21 INS21 INS21 UPD42 INS21 INS21 INS21 INS42 INS21 INS21 INS21 INS21 INS21 INS21 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 UPD66 INS32 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS40