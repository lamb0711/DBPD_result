HDFS-9279. Decomissioned capacity should not be considered for configured/used capacity. Contributed by Kihu Shukla .

-    capacityUsed += node.getDfsUsed();
-    blockPoolUsed += node.getBlockPoolUsed();
+      capacityUsed += node.getDfsUsed();
+      blockPoolUsed += node.getBlockPoolUsed();
-    } else {
-      capacityTotal += node.getDfsUsed();
+      cacheCapacity += node.getCacheCapacity();
+      cacheUsed += node.getCacheUsed();
+    } else if (!node.isDecommissioned()) {
+      cacheCapacity += node.getCacheCapacity();
+      cacheUsed += node.getCacheUsed();
-    cacheCapacity += node.getCacheCapacity();
-    cacheUsed += node.getCacheUsed();
-    capacityUsed -= node.getDfsUsed();
-    blockPoolUsed -= node.getBlockPoolUsed();
+      capacityUsed -= node.getDfsUsed();
+      blockPoolUsed -= node.getBlockPoolUsed();
-    } else {
-      capacityTotal -= node.getDfsUsed();
+      cacheCapacity -= node.getCacheCapacity();
+      cacheUsed -= node.getCacheUsed();
+    } else if (!node.isDecommissioned()) {
+      cacheCapacity -= node.getCacheCapacity();
+      cacheUsed -= node.getCacheUsed();
-    cacheCapacity -= node.getCacheCapacity();
-    cacheUsed -= node.getCacheUsed();

INS25 INS25 MOV21 MOV21 MOV21 MOV21 INS38 MOV8 MOV21 MOV21 MOV21 MOV21 INS38 MOV8 INS32 INS21 INS32 INS21 INS42 INS42 INS7 INS42 INS42 INS7 INS42 INS32 UPD42 INS42 INS32 UPD42 INS42 INS42 UPD42 INS42 INS42 UPD42