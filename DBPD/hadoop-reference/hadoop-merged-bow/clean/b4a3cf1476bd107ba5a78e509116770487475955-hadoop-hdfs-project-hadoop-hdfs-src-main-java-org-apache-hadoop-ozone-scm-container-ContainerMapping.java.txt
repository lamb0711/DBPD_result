HDFS-13070. Ozone: SCM: Support for container replica reconciliation - 1. Contributed by Nanda kumar.

-import org.apache.hadoop.hdfs.protocol.DatanodeID;
-import org.apache.hadoop.ozone.protocol.proto.StorageContainerDatanodeProtocolProtos.ContainerReportsRequestProto;
+import org.apache.hadoop.ozone.protocol.proto
+    .StorageContainerDatanodeProtocolProtos.ContainerReportsRequestProto;
+import org.apache.hadoop.ozone.scm.container.replication.ContainerSupervisor;
+  private final ContainerSupervisor containerSupervisor;
+    this.containerSupervisor =
+        new ContainerSupervisor(conf, nodeManager,
+            nodeManager.getNodePoolManager());
-   * @param datanodeID Datanode ID
-   * @param reportType Type of report
-   * @param containerInfos container details
+   * @param reports Container report
-  public void processContainerReports(
-      DatanodeID datanodeID,
-      ContainerReportsRequestProto.reportType reportType,
-      List<StorageContainerDatanodeProtocolProtos.ContainerInfo>
-          containerInfos) throws IOException {
+  public void processContainerReports(ContainerReportsRequestProto reports)
+      throws IOException {
+    List<StorageContainerDatanodeProtocolProtos.ContainerInfo>
+        containerInfos = reports.getReportsList();
+    containerSupervisor.handleContainerReport(reports);
-            // For now, we are just updating the container state to CLOSED.
+            // For now, we are just updating the container state to CLOSING.
-              "container database.", datanodeID,
+              "container database.", reports.getDatanodeID(),

MOV26 UPD40 INS23 INS83 INS83 INS43 INS59 INS42 INS42 INS21 UPD43 UPD42 INS60 INS21 INS7 UPD42 UPD66 INS42 MOV74 INS59 INS32 INS22 INS14 INS42 INS32 INS42 INS42 INS42 INS52 INS42 INS43 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS32 INS42 UPD42 MOV42 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL43 DEL42 DEL44 DEL40 DEL42 DEL44