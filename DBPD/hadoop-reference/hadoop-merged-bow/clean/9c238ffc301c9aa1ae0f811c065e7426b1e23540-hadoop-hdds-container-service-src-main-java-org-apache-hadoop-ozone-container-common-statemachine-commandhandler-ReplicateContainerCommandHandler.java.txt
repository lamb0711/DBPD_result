HDDS-432. Replication of closed containers is not working.
Contributed by Elek, Marton.

+import java.util.List;
+import org.apache.hadoop.hdds.protocol.DatanodeDetails;
+import com.google.common.base.Preconditions;
-
+      List<DatanodeDetails> sourceDatanodes =
+          replicateCommand.getSourceDatanodes();
+
+      Preconditions.checkArgument(sourceDatanodes.size() > 0,
+          String.format("Replication command is received for container %d "
+              + "but the size of source datanodes was 0.", containerID));
+
-          replicateCommand.getSourceDatanodes());
+          sourceDatanodes);
-              replicateCommand.getSourceDatanodes());
+              sourceDatanodes);

INS26 INS26 INS26 INS40 INS40 INS40 INS60 INS21 INS74 MOV59 INS32 INS59 INS43 INS43 INS42 MOV32 INS42 INS42 INS27 INS32 UPD42 MOV42 INS42 INS32 INS42 INS42 INS32 INS34 INS42 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS45 INS45 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32