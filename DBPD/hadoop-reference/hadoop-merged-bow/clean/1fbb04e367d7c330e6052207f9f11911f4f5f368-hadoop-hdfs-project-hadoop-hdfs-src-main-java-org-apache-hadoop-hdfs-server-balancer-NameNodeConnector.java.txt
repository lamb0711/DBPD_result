HDFS-5910. Enhance DataTransferProtocol to allow per-connection choice of encryption/plain-text. (Contributed by Benoy Antony)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1581688 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.protocol.datatransfer.TrustedChannelResolver;
+  private final TrustedChannelResolver trustedChannelResolver;
+    this.trustedChannelResolver = TrustedChannelResolver.getInstance(conf);
-    if (encryptDataTransfer) {
+    if (encryptDataTransfer && !this.trustedChannelResolver.isTrusted()) {

INS26 INS40 INS23 INS83 INS83 INS43 INS59 INS42 INS42 INS21 INS7 INS27 INS22 INS32 INS42 INS38 INS52 INS42 INS42 INS42 INS42 INS32 INS22 INS42 INS52 INS42 DEL42