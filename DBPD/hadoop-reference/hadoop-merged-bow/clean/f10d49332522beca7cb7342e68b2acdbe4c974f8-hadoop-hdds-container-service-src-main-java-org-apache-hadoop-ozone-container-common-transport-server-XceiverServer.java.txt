 HDDS-1119. DN get OM certificate from SCM CA for block token validation. Contributed by Ajay Kumar. (#601)


+import static org.apache.hadoop.hdds.security.exception.SCMSecurityException.ErrorCode.MISSING_BLOCK_TOKEN;
+
+  private final CertificateClient caClient;
-  public XceiverServer(Configuration conf) {
+  public XceiverServer(Configuration conf, CertificateClient client) {
+    this.caClient = client;
-            "request is missing block token.",
-            SCMSecurityException.ErrorCode.MISSING_BLOCK_TOKEN);
+            "request is missing block token.", MISSING_BLOCK_TOKEN);
-      tokenVerifier.verify(encodedToken, "");
+      tokenVerifier.verify(encodedToken, encodedToken);
-    // TODO: instantiate CertificateClient
-    return null;
+    return caClient;

INS26 INS40 INS23 INS83 INS83 INS43 INS59 INS44 INS42 INS42 INS43 INS42 INS21 INS42 INS7 INS42 INS22 INS42 INS52 INS42 INS42 INS42 DEL40 DEL45 DEL33