YARN-10259. Fix reservation logic in Multi Node Placement.

Reviewed by Wangda Tan.

+    ContainerAllocation lastReservation = null;
-      if (AllocationState.ALLOCATED == result.getAllocationState()
-          || AllocationState.RESERVED == result.getAllocationState()) {
+      if (AllocationState.ALLOCATED == result.getAllocationState()) {
+
+      // In MultiNodePlacement, Try Allocate on other Available nodes
+      // from Iterator as well before Reserving. Else there won't be any
+      // Allocate of new containers when the first node in the
+      // iterator could not fit and returns RESERVED allocation.
+      if (AllocationState.RESERVED == result.getAllocationState()) {
+        lastReservation = result;
+        if (iter.hasNext()) {
+          continue;
+        } else {
+          result = doAllocation(lastReservation, node, schedulerKey,
+              reservedContainer);
+        }
+      }

INS60 INS43 INS59 INS42 INS42 INS33 INS25 MOV27 MOV27 INS8 INS21 INS25 INS7 INS32 INS8 INS8 INS42 INS42 INS42 INS42 INS18 INS21 INS7 INS42 INS32 INS42 INS42 INS42 INS42 INS42 DEL27