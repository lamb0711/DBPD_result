Merging trunk to branch HDFS-2802

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1460410 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+
-import org.apache.hadoop.yarn.api.records.AMResponse;
+import org.apache.hadoop.yarn.api.records.ContainerStatus;
+import org.apache.hadoop.yarn.api.records.NodeReport;
+import org.apache.hadoop.yarn.api.records.Resource;
- * <p>The response, via {@link AMResponse}, includes:
+ * <p>The response, includes:
+ *     <li>A list of nodes whose status has been updated.</li>
+ *     <li>The number of available nodes in a cluster.</li>
-   * Get the {@link AMResponse} sent by the <code>ResourceManager</code>.
-   * @return <code>AMResponse</code> sent by the <code>ResourceManager</code>
+   * Should the <code>ApplicationMaster</code> reboot for being horribly
+   * out-of-sync with the <code>ResourceManager</code> as deigned by
+   * {@link #getResponseId()}?
+   *
+   * @return <code>true</code> if the <code>ApplicationMaster</code> should
+   *         reboot, <code>false</code> otherwise
-  public abstract AMResponse getAMResponse();
+  public boolean getReboot();
-  public abstract void setAMResponse(AMResponse amResponse);
-  
-  
+  public void setReboot(boolean reboot);
+
+  /**
+   * Get the <em>last response id</em>.
+   * @return <em>last response id</em>
+   */
+  @Public
+  @Stable
+  public int getResponseId();
+
+  @Private
+  @Unstable
+  public void setResponseId(int responseId);
+
+  /**
+   * Get the list of <em>newly allocated</em> <code>Container</code> by the
+   * <code>ResourceManager</code>.
+   * @return list of <em>newly allocated</em> <code>Container</code>
+   */
+  @Public
+  @Stable
+  public List<Container> getAllocatedContainers();
+
+  /**
+   * Set the list of <em>newly allocated</em> <code>Container</code> by the
+   * <code>ResourceManager</code>.
+   * @param containers list of <em>newly allocated</em> <code>Container</code>
+   */
+  @Public
+  @Stable
+  public void setAllocatedContainers(List<Container> containers);
+
+  /**
+   * Get the <em>available headroom</em> for resources in the cluster for the
+   * application.
+   * @return limit of available headroom for resources in the cluster for the
+   * application
+   */
+  @Public
+  @Stable
+  public Resource getAvailableResources();
+
+  @Private
+  @Unstable
+  public void setAvailableResources(Resource limit);
+
+  /**
+   * Get the list of <em>completed containers' statuses</em>.
+   * @return the list of <em>completed containers' statuses</em>
+   */
+  @Public
+  @Stable
+  public List<ContainerStatus> getCompletedContainersStatuses();
+
+  @Private
+  @Unstable
+  public void setCompletedContainersStatuses(List<ContainerStatus> containers);
+
+  /**
+   * Get the list of <em>updated <code>NodeReport</code>s</em>. Updates could
+   * be changes in health, availability etc of the nodes.
+   * @return The delta of updated nodes since the last response
+   */
+  @Public
+  @Unstable
+  public List<NodeReport> getUpdatedNodes();
+
+  @Private
+  @Unstable
+  public void setUpdatedNodes(final List<NodeReport> updatedNodes);
+

MOV26 INS26 INS26 INS26 INS40 INS40 INS40 UPD40 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS31 MOV65 MOV65 MOV29 MOV78 MOV78 MOV83 INS39 INS42 MOV78 MOV78 UPD83 MOV83 INS39 INS42 INS44 INS29 INS78 INS78 INS83 INS39 INS42 INS78 INS78 INS83 INS39 INS42 INS44 INS29 INS78 INS78 INS83 INS74 INS42 INS29 INS78 INS78 INS83 INS39 INS42 INS44 INS29 INS78 INS78 INS83 UPD43 MOV43 UPD42 MOV42 INS78 INS78 UPD42 INS29 INS78 INS78 INS83 INS74 INS42 INS78 INS78 INS83 INS39 INS42 INS44 INS29 INS78 INS78 INS83 INS74 INS42 INS78 INS78 INS83 INS39 INS42 INS44 UPD66 INS66 INS66 INS39 INS42 INS65 INS65 INS42 INS42 INS42 INS42 INS39 INS42 INS65 INS65 INS42 INS42 INS43 INS43 INS65 INS65 INS42 INS42 INS74 INS42 INS65 INS65 INS42 INS42 UPD42 INS42 INS42 UPD43 UPD42 INS65 INS65 INS42 INS42 INS43 INS43 INS42 INS42 INS74 INS42 INS65 INS65 INS42 INS42 INS43 INS43 INS42 INS42 INS83 INS74 INS42 INS66 UPD66 UPD66 UPD66 INS66 INS66 INS66 INS66 INS66 INS66 INS42 INS42 INS66 INS66 INS42 INS66 INS43 INS43 INS66 INS66 INS66 INS66 UPD42 INS66 INS66 INS42 INS42 INS43 INS43 INS66 INS66 INS66 INS42 INS42 INS43 INS43 INS68 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL42 DEL65 DEL66 DEL42 DEL31 DEL83