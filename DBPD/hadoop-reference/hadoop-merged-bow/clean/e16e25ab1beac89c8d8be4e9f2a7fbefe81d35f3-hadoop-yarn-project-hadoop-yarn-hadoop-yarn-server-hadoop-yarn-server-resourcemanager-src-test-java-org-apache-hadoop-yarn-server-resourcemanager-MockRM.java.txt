YARN-2649. Fixed TestAMRMRPCNodeUpdates test failure. Contributed by Ming Ma

-    return getRMContext().getRMApps().get(appId);
+    RMApp rmApp = getRMContext().getRMApps().get(appId);
+
+    // unmanaged AM won't go to RMAppAttemptState.SCHEDULED.
+    if (waitForAccepted && !unmanaged) {
+      waitForState(rmApp.getCurrentAppAttempt().getAppAttemptId(),
+          RMAppAttemptState.SCHEDULED);
+    }
+
+    return rmApp;

INS60 INS25 INS43 INS59 INS27 INS8 INS42 INS42 INS42 MOV32 INS42 INS38 INS21 INS42 INS32 INS42 INS32 INS40 INS32 INS42 INS42 INS42