Merge trunk to HDFS-4685.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4685@1566100 13f79535-47bb-0310-9956-ffa450edef68

+  private static Long parseLimitString(String limitString) {
+    Long limit = null;
+    if (limitString != null) {
+      if (limitString.equalsIgnoreCase("unlimited")) {
+        limit = CachePoolInfo.LIMIT_UNLIMITED;
+      } else {
+        limit = Long.parseLong(limitString);
+      }
+    }
+    return limit;
+  }
+
-      if (limitString != null) {
-        long limit = Long.parseLong(limitString);
+      Long limit = parseLimitString(limitString);
+      if (limit != null) {
-      Long limit = (limitString == null) ?
-          null : Long.parseLong(limitString);
+      Long limit = parseLimitString(limitString);
-      // If there are no results, we return 1 (failure exit code);
-      // otherwise we return 0 (success exit code).
-      return (numResults == 0) ? 1 : 0;
+      // If list pools succeed, we return 0 (success exit code)
+      return 0;

INS31 INS83 INS83 INS43 INS42 INS44 INS8 INS42 INS43 INS42 INS60 INS25 INS41 INS42 INS43 INS59 MOV27 INS8 INS42 INS60 INS42 INS42 INS33 INS25 INS43 INS59 INS27 INS34 INS32 INS8 INS8 INS42 INS42 INS32 INS42 INS33 INS32 INS42 INS42 INS45 INS21 INS21 INS42 INS42 UPD42 MOV42 MOV42 INS7 INS7 INS42 INS40 INS42 MOV32 DEL39 DEL42 DEL59 DEL60 DEL42 DEL33 DEL27 DEL36 DEL33 DEL42 DEL32 DEL16 DEL42 DEL34 DEL27 DEL36 DEL34 DEL34 DEL16