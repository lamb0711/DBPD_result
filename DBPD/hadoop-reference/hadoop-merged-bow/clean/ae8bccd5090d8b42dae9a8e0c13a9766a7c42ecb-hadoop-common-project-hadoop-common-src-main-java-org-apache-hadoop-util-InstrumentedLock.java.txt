HADOOP-13702. Add instrumented ReadWriteLock. Contributed by Jingcheng Du

-package org.apache.hadoop.hdfs;
+package org.apache.hadoop.util;
-import org.apache.hadoop.util.StringUtils;
-import org.apache.hadoop.util.Timer;
- * whether a specifc lock is being held for too long and periodically
+ * whether a specific lock is being held for too long and periodically
-    lockAcquireTimestamp = clock.monotonicNow();
+    startLockTiming();
-    lockAcquireTimestamp = clock.monotonicNow();
+    startLockTiming();
-      lockAcquireTimestamp = clock.monotonicNow();
+      startLockTiming();
-      lockAcquireTimestamp = clock.monotonicNow();
+      startLockTiming();
+   * Starts timing for the instrumented lock.
+   */
+  protected void startLockTiming() {
+    lockAcquireTimestamp = clock.monotonicNow();
+  }
+
+  /**
-  private void check(long acquireTime, long releaseTime) {
+  protected void check(long acquireTime, long releaseTime) {
+  protected Lock getLock() {
+    return lock;
+  }
+
+  protected Timer getTimer() {
+    return clock;
+  }

UPD40 INS31 INS31 INS31 INS29 INS83 INS39 INS42 MOV8 UPD83 INS83 INS43 INS42 INS8 INS83 INS43 INS42 INS8 UPD66 INS65 INS42 INS41 INS42 INS41 INS32 INS32 INS8 INS66 INS42 INS42 UPD42 MOV42 UPD42 MOV42 INS21 MOV41 INS32 INS32 UPD42 MOV42 INS42 DEL40 DEL26 DEL40 DEL26 DEL42 DEL42 DEL32 DEL7 DEL42 DEL42 DEL32 DEL7 DEL42 DEL42 DEL32 DEL7