Merge trunk into auto-HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3042@1339410 13f79535-47bb-0310-9956-ffa450edef68

+  
+  /**
+   * @return true if the two blocks have the same block ID and the same
+   * generation stamp, or if both blocks are null.
+   */
+  public static boolean matchingIdAndGenStamp(Block a, Block b) {
+    if (a == b) return true; // same block, or both null
+    if (a == null || b == null) return false; // only one null
+    return a.blockId == b.blockId &&
+           a.generationStamp == b.generationStamp;
+  }

INS31 INS29 INS83 INS83 INS39 INS42 INS44 INS44 INS8 INS65 INS43 INS42 INS43 INS42 INS25 INS25 INS41 INS66 INS66 INS42 INS42 INS27 INS41 INS27 INS41 INS27 INS42 INS42 INS9 INS27 INS27 INS9 INS27 INS27 INS42 INS33 INS42 INS33 INS40 INS40 INS40 INS40