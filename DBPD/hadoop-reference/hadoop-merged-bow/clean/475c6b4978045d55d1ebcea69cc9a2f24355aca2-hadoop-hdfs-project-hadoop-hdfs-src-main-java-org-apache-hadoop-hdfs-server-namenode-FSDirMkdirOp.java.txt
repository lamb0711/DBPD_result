HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.

+    INodesInPath iip = fsd.getINodesInPath4Write(src);
-      fsd.checkTraverse(pc, src);
+      fsd.checkTraverse(pc, iip);
-    if (!isDirMutable(fsd, src)) {
+    if (!isDirMutable(fsd, iip)) {
-        fsd.checkAncestorAccess(pc, src, FsAction.WRITE);
+        fsd.checkAncestorAccess(pc, iip, FsAction.WRITE);
-        fsd.verifyParentDir(src);
+        fsd.verifyParentDir(iip, src);
-  private static boolean isDirMutable(
-      FSDirectory fsd, String src) throws UnresolvedLinkException,
-      SnapshotAccessControlException {
-    src = FSDirectory.normalizePath(src);
+  private static boolean isDirMutable(FSDirectory fsd, INodesInPath iip)
+      throws SnapshotAccessControlException {
-      INode node = fsd.getINode4Write(src, false);
+      INode node = iip.getLastINode();

INS60 UPD43 UPD42 INS43 INS59 MOV32 UPD42 INS42 INS42 INS32 INS42 INS42 INS42 UPD42 MOV32 UPD42 UPD42 UPD42 UPD42 INS42 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL42 DEL9