MAPREDUCE-6485. Create a new task attempt with failed map task priority if in-progress attempts are unassigned. (Xianyin Xin via rohithsharmaks)

-        if (task.inProgressAttempts.size() == 0
-            && task.successfulAttempt == null) {
-          task.addAndScheduleAttempt(Avataar.VIRGIN);
+        if (task.successfulAttempt == null) {
+          boolean shouldAddNewAttempt = true;
+          if (task.inProgressAttempts.size() > 0) {
+            // if not all of the inProgressAttempts are hanging for resource
+            for (TaskAttemptId attemptId : task.inProgressAttempts) {
+              if (((TaskAttemptImpl) task.getAttempt(attemptId))
+                  .isContainerAssigned()) {
+                shouldAddNewAttempt = false;
+                break;
+              }
+            }
+          }
+          if (shouldAddNewAttempt) {
+            task.addAndScheduleAttempt(Avataar.VIRGIN);
+          }
-          		" generated for task: " + task.getID());
+              " generated for task: " + task.getID());

INS25 MOV27 INS8 INS60 INS25 MOV25 INS39 INS59 UPD27 MOV27 INS8 INS42 INS42 INS9 INS70 INS44 INS40 INS8 INS43 INS42 INS25 INS42 INS32 INS8 INS36 INS42 INS21 INS10 INS11 INS7 INS43 INS32 INS42 INS9 INS42 INS42 INS42 INS42 DEL27