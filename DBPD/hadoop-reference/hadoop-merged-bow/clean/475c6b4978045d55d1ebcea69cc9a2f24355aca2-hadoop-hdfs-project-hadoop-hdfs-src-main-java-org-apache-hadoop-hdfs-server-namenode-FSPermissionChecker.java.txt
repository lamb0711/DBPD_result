HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.

-import org.apache.hadoop.fs.UnresolvedLinkException;
-  private final UserGroupInformation ugi;
-  private final String user;  
+  private final String user;
-    ugi = callerUgi;
-    HashSet<String> s = new HashSet<String>(Arrays.asList(ugi.getGroupNames()));
+    HashSet<String> s = new HashSet<String>(Arrays.asList(callerUgi.getGroupNames()));
-    user = ugi.getShortUserName();
+    user = callerUgi.getShortUserName();
-   * @param resolveLink whether to resolve the final path component if it is
-   * a symlink
-   * @throws UnresolvedLinkException
-  void checkPermission(String path, FSDirectory dir, boolean doCheckOwner,
+  void checkPermission(INodesInPath inodesInPath, boolean doCheckOwner,
-      FsAction subAccess, boolean ignoreEmptyDir, boolean resolveLink)
-      throws AccessControlException, UnresolvedLinkException {
+      FsAction subAccess, boolean ignoreEmptyDir)
+      throws AccessControlException {
-          + ", ignoreEmptyDir=" + ignoreEmptyDir
-          + ", resolveLink=" + resolveLink);
+          + ", ignoreEmptyDir=" + ignoreEmptyDir);
-    final INodesInPath inodesInPath = dir.getINodesInPath(path, resolveLink);

MOV43 UPD42 MOV74 UPD42 MOV74 UPD42 UPD42 DEL40 DEL26 DEL83 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL42 DEL42 DEL7 DEL21 DEL42 DEL66 DEL66 DEL65 DEL42 DEL65 DEL42 DEL43 DEL42 DEL43 DEL42 DEL44 DEL39 DEL42 DEL44 DEL42 DEL43 DEL45 DEL42 DEL83 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60