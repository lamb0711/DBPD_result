YARN-9644. First RMContext object is always leaked during switch over. Contributed by Bibin A Chundatt.

+    private RMNMInfo rmnmInfo;
-      new RMNMInfo(rmContext, scheduler);
+      rmnmInfo = new RMNMInfo(rmContext, scheduler);
+      // unregister rmnmInfo bean
+      if (rmnmInfo != null) {
+        rmnmInfo.unregister();
+      }
-    Builder<ApplicationMasterService> builder = 
+    Builder<ResourceManager> builder =
-            .$for("cluster", ApplicationMasterService.class, masterService,
+            .$for("cluster", ResourceManager.class, this,

INS23 INS83 INS43 INS59 INS42 INS42 INS25 UPD74 INS7 INS27 INS8 UPD43 INS42 MOV14 INS42 INS33 INS21 UPD42 INS32 INS42 INS42 INS52 UPD43 UPD42 DEL42