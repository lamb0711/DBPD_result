HDFS-7933. fsck should also report decommissioning replicas. Contributed by Xiaoyu Yao.

-                         numReplicas.decommissionedReplicas();
+                         numReplicas.decommissionedAndDecommissioning();
-              " d: " + numReplicas.decommissionedReplicas() +
+              " d: " + numReplicas.decommissionedAndDecommissioning() +
-        replicas.decommissionedReplicas(), getReplication(ucBlock));
+        replicas.decommissionedAndDecommissioning(), getReplication(ucBlock));
+    int decommissioning = 0;
-      else if (node.isDecommissionInProgress() || node.isDecommissioned())
+      else if (node.isDecommissionInProgress()) {
+        decommissioning += countableReplica;
+      } else if (node.isDecommissioned()) {
-      else if (excessBlocks != null && excessBlocks.contains(block)) {
+      } else if (excessBlocks != null && excessBlocks.contains(block)) {
-      numReplicas.initialize(live, decommissioned, corrupt, excess, 0);
+      numReplicas.initialize(live, decommissioned, decommissioning, corrupt,
+          excess, 0);
-                                   num.decommissionedReplicas(),
+                                   num.decommissionedAndDecommissioning(),
-          num.decommissionedReplicas(), fileReplication);
+          num.decommissionedAndDecommissioning(), fileReplication);
-          .decommissionedReplicas(), expectedReplication)) {
+          .decommissionedAndDecommissioning(), expectedReplication)) {
+    int decommissioning = 0;
-      } else if (node.isDecommissionInProgress() || node.isDecommissioned()) {
+      } else if (node.isDecommissionInProgress()) {
+        decommissioning++;
+      } else if (node.isDecommissioned()) {
-    return new NumberReplicas(live, decommissioned, corrupt, excess, stale);
+    return new NumberReplicas(live, decommissioned, decommissioning, corrupt, excess, stale);
-            .decommissionedReplicas(), curExpectedReplicas, curReplicasDelta,
-            expectedReplicasDelta);
+            .decommissionedAndDecommissioning(), curExpectedReplicas,
+            curReplicasDelta, expectedReplicasDelta);
-        neededReplications.remove(block, oldReplicas, repl.decommissionedReplicas(),
-                                  oldExpectedReplicas);
+        neededReplications.remove(block, oldReplicas,
+            repl.decommissionedAndDecommissioning(), oldExpectedReplicas);
-            n.decommissionedReplicas(), expected);
+            n.decommissionedAndDecommissioning(), expected);

INS60 INS60 INS39 INS59 INS39 INS59 INS42 INS34 INS42 INS34 INS42 UPD42 INS25 INS42 INS25 UPD42 UPD42 MOV32 INS8 MOV25 MOV32 INS8 MOV25 INS21 MOV32 INS8 UPD42 UPD42 INS21 MOV32 INS7 MOV21 INS37 INS42 INS42 INS42 UPD42 UPD42 UPD42 UPD42 DEL27 DEL27