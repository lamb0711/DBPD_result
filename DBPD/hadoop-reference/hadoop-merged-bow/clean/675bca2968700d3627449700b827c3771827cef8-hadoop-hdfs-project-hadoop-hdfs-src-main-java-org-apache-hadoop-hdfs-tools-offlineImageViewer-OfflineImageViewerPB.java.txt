HDFS-7280. Use netty 4 in WebImageViewer. Contributed by Haohui Mai.

-  public static void main(String[] args) throws IOException {
+  public static void main(String[] args) throws Exception {
-  public static int run(String[] args) throws IOException {
+  public static int run(String[] args) throws Exception {
-        new WebImageViewer(NetUtils.createSocketAddr(addr))
-            .initServerAndWait(inputFile);
+        WebImageViewer viewer = new WebImageViewer(NetUtils.createSocketAddr
+                (addr));
+        try {
+          viewer.start(inputFile);
+        } finally {
+          viewer.close();
+        }

UPD43 UPD43 UPD42 UPD42 INS60 INS54 INS43 INS59 INS8 INS8 INS42 INS42 MOV14 MOV21 INS21 INS32 INS42 UPD42 INS42 INS42