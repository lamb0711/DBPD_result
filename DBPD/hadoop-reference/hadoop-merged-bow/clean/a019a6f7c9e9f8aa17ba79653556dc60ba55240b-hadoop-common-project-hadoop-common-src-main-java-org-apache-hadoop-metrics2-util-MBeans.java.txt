HADOOP-8177. MBeans shouldn't try to register when it fails to create MBeanName. (Contributed by Devaraj K).


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1302067 13f79535-47bb-0310-9956-ffa450edef68

-    try {
-      mbs.registerMBean(theMbean, name);
-      LOG.debug("Registered "+ name);
-      return name;
-    } catch (InstanceAlreadyExistsException iaee) {
-      if (LOG.isTraceEnabled()) {
-        LOG.trace("Failed to register MBean \""+ name + "\"", iaee);
-      } else {
-        LOG.warn("Failed to register MBean \""+ name
-            + "\": Instance already exists.");
+    if (name != null) {
+      try {
+        mbs.registerMBean(theMbean, name);
+        LOG.debug("Registered " + name);
+        return name;
+      } catch (InstanceAlreadyExistsException iaee) {
+        if (LOG.isTraceEnabled()) {
+          LOG.trace("Failed to register MBean \"" + name + "\"", iaee);
+        } else {
+          LOG.warn("Failed to register MBean \"" + name
+              + "\": Instance already exists.");
+        }
+      } catch (Exception e) {
+        LOG.warn("Failed to register MBean \"" + name + "\"", e);
-    } catch (Exception e) {
-      LOG.warn("Failed to register MBean \""+ name + "\"", e);

INS25 INS27 INS8 INS42 INS33 MOV54