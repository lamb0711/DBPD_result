HDFS-8999. Allow a file to be closed with COMMITTED but not yet COMPLETE blocks.

-import static org.apache.hadoop.hdfs.server.namenode.FSEditLogOp.TruncateOp;
-import com.google.common.collect.Lists;
+import org.apache.hadoop.hdfs.server.namenode.FSEditLogOp.TruncateOp;
-        fsNamesys.leaseManager.removeLeases(Lists.newArrayList(file.getId()));
-        file.toCompleteFile(file.getModificationTime());
+        fsNamesys.getLeaseManager().removeLease(file.getId());
+        file.toCompleteFile(file.getModificationTime(), 0,
+            fsNamesys.getBlockManager().getMinReplication());

MOV26 MOV32 INS32 INS42 INS34 INS32 UPD42 MOV42 UPD42 MOV42 INS32 INS42 INS42 INS42 DEL40 DEL26 DEL40 DEL42 DEL32