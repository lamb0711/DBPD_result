HDFS-7707. Edit log corruption due to delayed block removal again. Contributed by Yongjun Zhang

+import org.apache.hadoop.hdfs.server.namenode.snapshot.DirectoryWithSnapshotFeature;
-      if (tmpParent == null ||
-          tmpParent.searchChildren(tmpChild.getLocalNameBytes()) < 0) {
+      if (tmpParent == null) {
+
+      INode childINode = tmpParent.getChild(tmpChild.getLocalNameBytes(),
+          Snapshot.CURRENT_STATE_ID);
+      if (childINode == null || !childINode.equals(tmpChild)) {
+        // a newly created INode with the same name as an already deleted one
+        // would be a different INode than the deleted one
+        return true;
+      }
+
+

INS26 INS40 INS60 INS25 MOV27 INS43 INS59 INS27 INS8 INS42 INS42 MOV32 INS27 INS38 INS41 UPD42 INS40 INS42 INS33 INS32 INS9 INS42 INS42 INS42 DEL34 DEL27 DEL27