HDFS-9731. Erasure Coding: Rename BlockECRecoveryCommand to BlockECReconstructionCommand. Contributed by Rakesh R.

Change-Id: I405365a8395770e494b92bfe9651f4f0366d8f28

-import org.apache.hadoop.hdfs.protocol.proto.DatanodeProtocolProtos.BlockECRecoveryCommandProto;
+import org.apache.hadoop.hdfs.protocol.proto.DatanodeProtocolProtos.BlockECReconstructionCommandProto;
-import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.BlockECRecoveryInfoProto;
+import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.BlockECReconstructionInfoProto;
-import org.apache.hadoop.hdfs.server.protocol.BlockECRecoveryCommand;
+import org.apache.hadoop.hdfs.server.protocol.BlockECReconstructionCommand;
-import org.apache.hadoop.hdfs.server.protocol.BlockECRecoveryCommand.BlockECRecoveryInfo;
+import org.apache.hadoop.hdfs.server.protocol.BlockECReconstructionCommand.BlockECReconstructionInfo;
-    case BlockECRecoveryCommand:
-      return PBHelper.convert(proto.getBlkECRecoveryCmd());
+    case BlockECReconstructionCommand:
+      return PBHelper.convert(proto.getBlkECReconstructionCmd());
-    case DatanodeProtocol.DNA_ERASURE_CODING_RECOVERY:
-      builder.setCmdType(DatanodeCommandProto.Type.BlockECRecoveryCommand)
-          .setBlkECRecoveryCmd(
-              convert((BlockECRecoveryCommand) datanodeCommand));
+    case DatanodeProtocol.DNA_ERASURE_CODING_RECONSTRUCTION:
+      builder.setCmdType(DatanodeCommandProto.Type.BlockECReconstructionCommand)
+          .setBlkECReconstructionCmd(
+              convert((BlockECReconstructionCommand) datanodeCommand));
-  public static BlockECRecoveryInfo convertBlockECRecoveryInfo(
-      BlockECRecoveryInfoProto blockEcRecoveryInfoProto) {
-    ExtendedBlockProto blockProto = blockEcRecoveryInfoProto.getBlock();
+  public static BlockECReconstructionInfo convertBlockECReconstructionInfo(
+      BlockECReconstructionInfoProto blockEcReconstructionInfoProto) {
+    ExtendedBlockProto blockProto = blockEcReconstructionInfoProto.getBlock();
-    DatanodeInfosProto sourceDnInfosProto = blockEcRecoveryInfoProto
+    DatanodeInfosProto sourceDnInfosProto = blockEcReconstructionInfoProto
-    DatanodeInfosProto targetDnInfosProto = blockEcRecoveryInfoProto
+    DatanodeInfosProto targetDnInfosProto = blockEcReconstructionInfoProto
-    HdfsProtos.StorageUuidsProto targetStorageUuidsProto = blockEcRecoveryInfoProto
-        .getTargetStorageUuids();
+    HdfsProtos.StorageUuidsProto targetStorageUuidsProto =
+        blockEcReconstructionInfoProto.getTargetStorageUuids();
-    StorageTypesProto targetStorageTypesProto = blockEcRecoveryInfoProto
+    StorageTypesProto targetStorageTypesProto = blockEcReconstructionInfoProto
-    byte[] liveBlkIndices = blockEcRecoveryInfoProto.getLiveBlockIndices()
+    byte[] liveBlkIndices = blockEcReconstructionInfoProto.getLiveBlockIndices()
-            blockEcRecoveryInfoProto.getEcPolicy());
-    return new BlockECRecoveryInfo(block, sourceDnInfos, targetDnInfos,
+            blockEcReconstructionInfoProto.getEcPolicy());
+    return new BlockECReconstructionInfo(block, sourceDnInfos, targetDnInfos,
-  public static BlockECRecoveryInfoProto convertBlockECRecoveryInfo(
-      BlockECRecoveryInfo blockEcRecoveryInfo) {
-    BlockECRecoveryInfoProto.Builder builder = BlockECRecoveryInfoProto
-        .newBuilder();
+  public static BlockECReconstructionInfoProto convertBlockECRecoveryInfo(
+      BlockECReconstructionInfo blockEcRecoveryInfo) {
+    BlockECReconstructionInfoProto.Builder builder =
+        BlockECReconstructionInfoProto.newBuilder();
-  public static BlockECRecoveryCommandProto convert(
-      BlockECRecoveryCommand blkECRecoveryCmd) {
-    BlockECRecoveryCommandProto.Builder builder = BlockECRecoveryCommandProto
-        .newBuilder();
-    Collection<BlockECRecoveryInfo> blockECRecoveryInfos = blkECRecoveryCmd
-        .getECTasks();
-    for (BlockECRecoveryInfo blkECRecoveryInfo : blockECRecoveryInfos) {
-      builder
-          .addBlockECRecoveryinfo(convertBlockECRecoveryInfo(blkECRecoveryInfo));
+  public static BlockECReconstructionCommandProto convert(
+      BlockECReconstructionCommand blkECReconstructionCmd) {
+    BlockECReconstructionCommandProto.Builder builder =
+        BlockECReconstructionCommandProto.newBuilder();
+    Collection<BlockECReconstructionInfo> blockECRInfos =
+        blkECReconstructionCmd.getECTasks();
+    for (BlockECReconstructionInfo blkECReconstructInfo : blockECRInfos) {
+      builder.addBlockECReconstructioninfo(
+          convertBlockECRecoveryInfo(blkECReconstructInfo));
-  public static BlockECRecoveryCommand convert(
-      BlockECRecoveryCommandProto blkECRecoveryCmdProto) {
-    Collection<BlockECRecoveryInfo> blkECRecoveryInfos = new ArrayList<>();
-    List<BlockECRecoveryInfoProto> blockECRecoveryinfoList = blkECRecoveryCmdProto
-        .getBlockECRecoveryinfoList();
-    for (BlockECRecoveryInfoProto blockECRecoveryInfoProto : blockECRecoveryinfoList) {
-      blkECRecoveryInfos
-          .add(convertBlockECRecoveryInfo(blockECRecoveryInfoProto));
+  public static BlockECReconstructionCommand convert(
+      BlockECReconstructionCommandProto blkECReconstructionCmdProto) {
+    Collection<BlockECReconstructionInfo> blkECReconstructionInfos =
+        new ArrayList<>();
+    List<BlockECReconstructionInfoProto> blkECRInfoList =
+        blkECReconstructionCmdProto.getBlockECReconstructioninfoList();
+    for (BlockECReconstructionInfoProto blkECRInfoProto : blkECRInfoList) {
+      blkECReconstructionInfos
+          .add(convertBlockECReconstructionInfo(blkECRInfoProto));
-    return new BlockECRecoveryCommand(DatanodeProtocol.DNA_ERASURE_CODING_RECOVERY,
-        blkECRecoveryInfos);
+    return new BlockECReconstructionCommand(
+        DatanodeProtocol.DNA_ERASURE_CODING_RECONSTRUCTION,
+        blkECReconstructionInfos);

UPD40 UPD40 UPD40 UPD40 UPD43 UPD42 UPD43 UPD43 UPD43 UPD42 UPD43 UPD42 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD43 UPD42 UPD43 UPD74 UPD42 UPD42 UPD74 UPD74 UPD42 UPD42 UPD40 UPD43 UPD40 UPD40 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD40 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD40 UPD42 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42