HADOOP-12469. distcp should not ignore the ignoreFailures option. Contributed by Mingliang Liu.

+import org.apache.commons.lang.exception.ExceptionUtils;
+import org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.CopyReadException;
-    if (ignoreFailures && exception.getCause() instanceof
-            RetriableFileCopyCommand.CopyReadException) {
+    if (ignoreFailures &&
+        ExceptionUtils.indexOfType(exception, CopyReadException.class) != -1) {

INS26 INS26 INS40 INS40 INS27 INS32 INS38 UPD42 MOV42 UPD42 MOV42 INS42 INS57 INS34 INS43 INS42 DEL32 DEL40 DEL43 DEL62