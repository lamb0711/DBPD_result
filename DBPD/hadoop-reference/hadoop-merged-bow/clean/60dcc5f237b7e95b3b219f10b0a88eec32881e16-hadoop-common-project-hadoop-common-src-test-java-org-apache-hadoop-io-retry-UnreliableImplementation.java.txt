Merging trunk to HDFS-1623 branch.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1179484 13f79535-47bb-0310-9956-ffa450edef68

+  @Override
+  public String failsIfIdentifierDoesntMatch(String identifier)
+      throws UnreliableException, StandbyException, IOException {
+    if (this.identifier.equals(identifier)) {
+      return identifier;
+    } else {
+      switch (exceptionToFailWith) {
+      case STANDBY_EXCEPTION:
+        throw new StandbyException(identifier);
+      case UNRELIABLE_EXCEPTION:
+        throw new UnreliableException(identifier);
+      case IO_EXCEPTION:
+        throw new IOException(identifier);
+      default:
+        throw new RuntimeException(identifier);
+      }
+    }
+  }
+

INS31 INS78 INS83 INS43 INS42 INS44 INS43 INS43 INS43 INS8 INS42 INS42 INS43 INS42 INS42 INS42 INS42 INS25 INS42 INS32 INS8 INS8 INS22 INS42 INS42 INS41 INS50 INS52 INS42 INS42 INS42 INS49 INS53 INS49 INS53 INS49 INS53 INS49 INS53 INS42 INS14 INS42 INS14 INS42 INS14 INS14 INS43 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS42 INS42 INS42