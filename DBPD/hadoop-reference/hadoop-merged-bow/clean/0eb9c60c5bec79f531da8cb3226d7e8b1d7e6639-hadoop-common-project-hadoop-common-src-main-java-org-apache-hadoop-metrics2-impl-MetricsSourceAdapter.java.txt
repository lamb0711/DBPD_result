HADOOP-12482. Race condition in JMX cache update. (Tony Wu via lei)

+  private boolean lastRecsCleared;
+    // Initialize to true so we always trigger update MBeanInfo cache the first
+    // time calling updateJmxCache
+    this.lastRecsCleared = true;
-        if (lastRecs == null) {
+        // lastRecs might have been set to an object already by another thread.
+        // Track the fact that lastRecs has been reset once to make sure refresh
+        // is correctly triggered.
+        if (lastRecsCleared) {
+          lastRecsCleared = false;
+      lastRecsCleared = true;

INS23 INS83 INS39 INS59 INS42 INS21 INS7 INS22 INS9 INS21 INS52 INS42 INS7 INS42 INS9 INS42 INS21 INS7 INS42 INS9 DEL42 DEL33 DEL27