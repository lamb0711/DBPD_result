MAPREDUCE-6892. Issues with the count of failed/killed tasks in the jhist file. (Peter Bacsko via Haibo Chen)

-public class JobFinishedEvent  implements HistoryEvent {
+public class JobFinishedEvent implements HistoryEvent {
-  private int finishedMaps;
-  private int finishedReduces;
+  private int succeededMaps;
+  private int succeededReduces;
+  private int killedMaps;
+  private int killedReduces;
-   * @param finishedMaps The number of finished maps
-   * @param finishedReduces The number of finished reduces
+   * @param succeededMaps The number of succeeded maps
+   * @param succeededReduces The number of succeeded reduces
-      int finishedMaps, int finishedReduces,
+      int succeededMaps, int succeededReduces,
+      int killedMaps, int killedReduces,
-    this.finishedMaps = finishedMaps;
-    this.finishedReduces = finishedReduces;
+    this.succeededMaps = succeededMaps;
+    this.succeededReduces = succeededReduces;
+    this.killedMaps = killedMaps;
+    this.killedReduces = killedReduces;
-      datum.setFinishedMaps(finishedMaps);
-      datum.setFinishedReduces(finishedReduces);
+      // using finishedMaps & finishedReduces in the Avro schema for backward
+      // compatibility
+      datum.setFinishedMaps(succeededMaps);
+      datum.setFinishedReduces(succeededReduces);
+      datum.setKilledMaps(killedMaps);
+      datum.setKilledReduces(killedReduces);
-    this.finishedMaps = datum.getFinishedMaps();
-    this.finishedReduces = datum.getFinishedReduces();
+    this.succeededMaps = datum.getFinishedMaps();
+    this.succeededReduces = datum.getFinishedReduces();
+    this.killedMaps = datum.getKilledMaps();
+    this.killedReduces = datum.getKilledReduces();
-  public int getFinishedMaps() { return finishedMaps; }
+  public int getSucceededMaps() { return succeededMaps; }
-  public int getFinishedReduces() { return finishedReduces; }
+  public int getSucceededReduces() { return succeededReduces; }
+  /** Get the number of killed maps */
+  public int getKilledMaps() { return killedMaps; }
+  /** Get the number of killed reduces */
+  public int getKilledReduces() { return killedReduces; }
-    tEvent.addInfo("NUM_MAPS", getFinishedMaps());
-    tEvent.addInfo("NUM_REDUCES", getFinishedReduces());
+    tEvent.addInfo("NUM_MAPS", getSucceededMaps() + getFailedMaps()
+        + getKilledMaps());
+    tEvent.addInfo("NUM_REDUCES", getSucceededReduces() + getFailedReduces()
+        + getKilledReduces());
-    tEvent.addInfo("FINISHED_MAPS", getFinishedMaps());
-    tEvent.addInfo("FINISHED_REDUCES", getFinishedReduces());
+    tEvent.addInfo("SUCCESSFUL_MAPS", getSucceededMaps());
+    tEvent.addInfo("SUCCESSFUL_REDUCES", getSucceededReduces());
+    tEvent.addInfo("KILLED_MAPS", getKilledMaps());
+    tEvent.addInfo("KILLED_REDUCES", getKilledReduces());

MOV23 MOV23 MOV31 MOV31 INS23 INS23 MOV44 MOV44 INS31 INS31 INS83 INS39 INS59 INS83 INS39 INS59 INS44 INS44 MOV21 MOV21 MOV29 INS83 INS39 INS42 INS8 MOV29 INS83 INS39 INS42 INS8 INS29 UPD42 INS29 UPD42 INS42 INS42 UPD42 UPD42 INS39 INS42 INS39 INS42 UPD42 UPD42 INS21 INS21 INS21 INS21 INS41 INS41 INS65 INS65 INS21 INS21 UPD42 UPD66 UPD42 UPD66 INS7 INS7 INS7 INS7 INS42 INS42 INS66 UPD42 INS66 UPD42 INS32 INS32 INS22 INS42 INS22 INS42 UPD42 UPD42 INS21 INS21 INS22 INS32 INS22 INS32 INS27 INS27 INS42 INS42 INS45 INS32 INS42 INS42 INS45 INS32 UPD45 UPD45 INS52 INS42 INS52 INS42 UPD42 UPD42 INS32 INS32 UPD42 UPD42 INS52 INS42 INS42 INS42 INS52 INS42 INS42 INS42 INS32 INS32 INS32 INS32 INS32 INS32 INS42 INS42 UPD42 UPD42 UPD42 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 MOV42 INS42 INS42 UPD42 MOV42 INS42 DEL32 DEL32