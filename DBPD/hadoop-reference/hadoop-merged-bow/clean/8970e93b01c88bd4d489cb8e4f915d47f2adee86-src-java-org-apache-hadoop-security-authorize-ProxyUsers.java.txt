HADOOP-6815. refreshSuperUserGroupsConfiguration should use server side configuration for the refresh

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@957074 13f79535-47bb-0310-9956-ffa450edef68

-  private static Configuration conf=null;
+  private static boolean init = false;
-  public static synchronized void refreshSuperUserGroupsConfiguration(Configuration cn) {
-    conf = cn;
+  public static void refreshSuperUserGroupsConfiguration() {
+    //load server side configuration;
+    refreshSuperUserGroupsConfiguration(new Configuration());
+  }
+  /**
+   * refresh configuration
+   * @param conf
+   */
+  public static synchronized void refreshSuperUserGroupsConfiguration(Configuration conf) {
+    
+    
+    init = true;
-    if(conf == null) {
-      refreshSuperUserGroupsConfiguration(newConf); 
+    if(!init) {
+      refreshSuperUserGroupsConfiguration(); 
-    if (!allowedUserGroups.isEmpty()) {
+    if (allowedUserGroups != null && !allowedUserGroups.isEmpty()) {
-    if (!ipList.isEmpty()) {
+    if (ipList != null && !ipList.isEmpty()) {

INS31 INS39 MOV29 INS83 INS83 INS39 INS42 INS8 INS29 MOV21 UPD42 INS9 INS21 INS65 INS65 MOV43 UPD42 INS32 INS66 INS42 INS38 INS27 INS27 INS42 INS14 UPD42 INS9 INS42 INS27 MOV38 INS27 MOV38 MOV43 INS42 INS33 INS42 INS33 DEL33 DEL42 DEL42 DEL33 DEL27 DEL42