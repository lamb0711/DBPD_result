YARN-6685. Add job count in to SLS JSON input format. (Yufei Gu via Haibo Chen)

-    String oldAppId = (String)jsonJob.get("job.id");
-    if (oldAppId == null) {
-      oldAppId = Integer.toString(AM_ID);
-    }
-
-    runNewAM(amType, user, queue, oldAppId, jobStartTime, jobFinishTime,
-        getTaskContainers(jsonJob), null, getAMContainerResource(jsonJob));
+    int jobCount = 1;
+    if (jsonJob.containsKey("job.count")) {
+      jobCount = Integer.parseInt(jsonJob.get("job.count").toString());
+    }
+    jobCount = Math.max(jobCount, 1);
+
+    String oldAppId = (String)jsonJob.get("job.id");
+    // Job id is generated automatically if this job configuration allows
+    // multiple job instances
+    if(jobCount > 1) {
+      oldAppId = null;
+    }
+
+    for (int i = 0; i < jobCount; i++) {
+      runNewAM(amType, user, queue, oldAppId, jobStartTime, jobFinishTime,
+          getTaskContainers(jsonJob), null, getAMContainerResource(jsonJob));
+    }
+
+      if (oldJobId == null) {
+        oldJobId = Integer.toString(AM_ID);
+      }

MOV60 INS60 INS25 INS21 INS25 INS24 INS39 INS59 INS32 INS8 INS7 INS27 INS8 INS58 INS27 INS37 INS8 INS42 INS34 INS42 INS42 INS45 INS21 INS42 INS32 INS42 INS34 INS21 INS39 INS59 INS42 INS42 INS42 MOV21 MOV25 INS7 INS42 INS42 INS42 INS34 INS7 INS42 INS34 INS42 INS32 INS42 INS33 UPD42 INS42 INS42 INS32 INS32 INS42 UPD42 INS42 INS42 INS45