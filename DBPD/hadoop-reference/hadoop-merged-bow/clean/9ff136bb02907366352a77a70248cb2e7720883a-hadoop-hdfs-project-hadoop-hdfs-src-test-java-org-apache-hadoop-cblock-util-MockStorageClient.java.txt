HDFS-12210. Block Storage: volume creation times out while creating 3TB volume because of too many containers. Contributed by Mukul Kumar Singh.

+import java.util.concurrent.atomic.AtomicInteger;
-  private static long currentContainerId = -1;
+  private static AtomicInteger currentContainerId =
+      new AtomicInteger(0);
-    currentContainerId += 1;
-    ContainerLookUpService.addContainer(Long.toString(currentContainerId));
-    return ContainerLookUpService.lookUp(Long.toString(currentContainerId))
+    int contId = currentContainerId.getAndIncrement();
+    ContainerLookUpService.addContainer(Long.toString(contId));
+    return ContainerLookUpService.lookUp(Long.toString(contId))
-    currentContainerId += 1;
-    ContainerLookUpService.addContainer(Long.toString(currentContainerId));
-    return ContainerLookUpService.lookUp(Long.toString(currentContainerId))
-        .getPipeline();  }
+    int contId = currentContainerId.getAndIncrement();
+    ContainerLookUpService.addContainer(Long.toString(contId));
+    return ContainerLookUpService.lookUp(Long.toString(contId))
+        .getPipeline();
+  }

INS26 INS40 INS43 INS42 INS14 INS60 INS60 INS43 INS34 INS39 INS59 INS39 INS59 INS42 INS42 INS32 INS42 INS32 INS42 INS42 UPD42 INS42 INS42 UPD42 UPD42 UPD42 DEL39 DEL34 DEL38 DEL42 DEL34 DEL7 DEL21 DEL42 DEL34 DEL7 DEL21