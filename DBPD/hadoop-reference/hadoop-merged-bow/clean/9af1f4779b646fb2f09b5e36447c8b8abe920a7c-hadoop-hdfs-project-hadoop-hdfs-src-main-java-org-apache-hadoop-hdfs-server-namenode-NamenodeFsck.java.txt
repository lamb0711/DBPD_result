Addendum fix for HDFS-7749 to be compatible with HDFS-7993

-          Iterable<DatanodeStorageInfo> storages = bm.getStorages(block.getLocalBlock());
-          for (Iterator<DatanodeStorageInfo> iterator = storages.iterator(); iterator.hasNext();) {
-            DatanodeStorageInfo storage = iterator.next();
+          DatanodeStorageInfo[] storages = bm.getStorages(storedBlock);
+          for (int i = 0; i < storages.length; i++) {
+            DatanodeStorageInfo storage = storages[i];
-              LightWeightLinkedSet<Block> blocksExcess =
+              LightWeightLinkedSet<BlockInfo> blocksExcess =
-            if (iterator.hasNext()) {
+            if (i < storages.length - 1) {

INS5 INS27 INS37 MOV43 INS85 INS39 INS42 INS40 INS42 UPD42 MOV42 UPD42 INS34 INS27 INS2 INS42 INS27 INS42 INS42 UPD74 INS40 INS34 UPD43 UPD42 DEL42 DEL43 DEL74 DEL42 DEL32 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32