merge trunk into HDFS-4949 branch

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1513658 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.security.authentication.util.KerberosName;
-        KerberosName krbName = new KerberosName(fullName);
-        serverId = krbName.getHostName();
-        if (serverId == null) {
-          serverId = "";
-        }
-        protocol = krbName.getServiceName();
+        // don't use KerberosName because we don't want auth_to_local
+        String[] parts = fullName.split("[/@]", 2);
+        protocol = parts[0];
+        // should verify service host is present here rather than in create()
+        // but lazy tests are using a UGI that isn't a SPN...
+        serverId = (parts.length < 2) ? "" : parts[1];

MOV21 INS5 INS43 INS85 UPD42 INS32 UPD42 INS2 INS16 UPD42 MOV42 INS42 INS42 INS45 INS34 INS42 INS34 INS36 INS45 INS2 INS27 INS42 INS34 INS40 INS34 DEL40 DEL26 DEL43 DEL42 DEL43 DEL42 DEL14 DEL42 DEL42 DEL32 DEL45 DEL42 DEL33 DEL27 DEL8 DEL25 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21