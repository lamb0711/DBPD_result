HDFS-3372. offlineEditsViewer should be able to read a binary edits file with recovery mode. Contributed by Colin Patrick McCabe


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1349628 13f79535-47bb-0310-9956-ffa450edef68

-
+import org.apache.hadoop.hdfs.tools.offlineEditsViewer.OfflineEditsViewer;
-  private boolean fixTxIds;
-  private OfflineEditsVisitor visitor;
-  private FileReader fileReader;
+  private final boolean fixTxIds;
+  private final OfflineEditsVisitor visitor;
+  private final FileReader fileReader;
-        File inputFile) throws FileNotFoundException {
+        File inputFile, OfflineEditsViewer.Flags flags) throws FileNotFoundException {
+    this.fixTxIds = flags.getFixTxIds();
-
-  @Override
-  public void setFixTxIds() {
-    fixTxIds = true;
-  }

INS26 INS40 INS83 INS83 INS83 INS44 INS43 INS42 INS21 INS40 INS7 INS22 INS32 INS52 INS42 INS42 INS42 DEL42 DEL78 DEL83 DEL39 DEL42 DEL42 DEL9 DEL7 DEL21 DEL8 DEL31