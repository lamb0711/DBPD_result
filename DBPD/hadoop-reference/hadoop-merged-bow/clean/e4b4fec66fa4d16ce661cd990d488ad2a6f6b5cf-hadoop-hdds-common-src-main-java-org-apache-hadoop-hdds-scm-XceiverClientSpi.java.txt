HDDS-1224. Restructure code to validate the response from server in the Read path (#806)



-import org.apache.hadoop.hdds.protocol.DatanodeDetails;
+import org.apache.hadoop.hdds.scm.storage.CheckedBiFunction;
-   * @param excludeDns list of servers on which the command won't be sent to.
+   * @param validators functions to validate the response
-  public XceiverClientReply sendCommand(
-      ContainerCommandRequestProto request, List<DatanodeDetails> excludeDns)
+  public ContainerCommandResponseProto sendCommand(
+      ContainerCommandRequestProto request, List<CheckedBiFunction> validators)
-      reply.getResponse().get();
-      return reply;
+      ContainerCommandResponseProto responseProto = reply.getResponse().get();
+      for (CheckedBiFunction function : validators) {
+        function.apply(request, responseProto);
+      }
+      return responseProto;
-   * @param timeout timeout provided for the watch ipeartion to complete
+   * @param timeout timeout provided for the watch operation to complete

MOV26 UPD40 UPD43 UPD42 UPD74 UPD42 UPD42 UPD66 UPD43 UPD66 UPD42 INS60 INS70 INS43 INS59 INS44 INS42 INS8 UPD42 INS42 INS42 MOV32 INS43 INS42 MOV21 INS42 INS32 INS42 INS42 INS42 INS42