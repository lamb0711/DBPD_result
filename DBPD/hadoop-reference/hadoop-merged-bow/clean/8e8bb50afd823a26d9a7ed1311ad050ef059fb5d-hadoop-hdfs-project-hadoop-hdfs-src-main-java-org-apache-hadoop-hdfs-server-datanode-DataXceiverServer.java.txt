HDFS-2454. Move maxXceiverCount check to before starting the thread in dataXceiver. Contributed by Harsh J


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1204124 13f79535-47bb-0310-9956-ffa450edef68

+
+        // Make sure the xceiver count is not exceeded
+        int curXceiverCount = datanode.getXceiverCount();
+        if (curXceiverCount > maxXceiverCount) {
+          throw new IOException("Xceiver count " + curXceiverCount
+              + " exceeds the limit of concurrent xcievers: "
+              + maxXceiverCount);
+        }
+

INS60 INS25 INS39 INS59 INS27 INS8 INS42 INS32 INS42 INS42 INS53 INS42 INS42 INS14 INS43 INS27 INS42 INS45 INS42 INS45 INS42