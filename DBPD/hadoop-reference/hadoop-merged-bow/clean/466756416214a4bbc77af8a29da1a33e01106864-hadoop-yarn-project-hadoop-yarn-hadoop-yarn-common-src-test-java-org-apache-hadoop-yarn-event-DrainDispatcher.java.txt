YARN-5911. DrainDispatcher does not drain all events on stop even if setDrainEventsOnStop is true. Contributed by Varun Saxena.

-  private volatile boolean stopped = false;
-        while (!stopped && !Thread.currentThread().isInterrupted()) {
+        while (!isStopped() && !Thread.currentThread().isInterrupted()) {
-
-  @Override
-  protected void serviceStop() throws Exception {
-    stopped = true;
-    super.serviceStop();
-  }

INS32 INS42 DEL83 DEL83 DEL39 DEL42 DEL9 DEL59 DEL23 DEL42 DEL42 DEL78 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL9 DEL7 DEL21 DEL42 DEL48 DEL21 DEL8 DEL31