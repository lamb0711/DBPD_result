Merging r1523878 through r1524586 from trunk to branch HDFS-2832

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1524590 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.oncrpc.security.Verifier;
- * Abstract class for a NFSv3 response
+ * Base class for a NFSv3 response. This class and its subclasses contain
+ * the response from NFSv3 handlers.
-abstract public class NFS3Response {
+public class NFS3Response {
-  public XDR send(XDR out, int xid) {
-    RpcAcceptedReply.voidReply(out, xid);
+  /**
+   * Write the response, along with the rpc header (including verifier), to the
+   * XDR.
+   */
+  public XDR writeHeaderAndResponse(XDR out, int xid, Verifier verifier) {
+    RpcAcceptedReply reply = RpcAcceptedReply.getAcceptInstance(xid, verifier);
+    reply.write(out);

INS26 INS40 INS29 UPD42 INS44 UPD66 INS66 INS65 INS43 INS42 INS60 INS21 INS66 INS66 INS42 INS43 INS59 INS32 INS42 INS42 INS32 INS42 INS42 INS42 UPD42 MOV42 INS42 MOV42 INS42 DEL83 DEL42 DEL42 DEL32 DEL21