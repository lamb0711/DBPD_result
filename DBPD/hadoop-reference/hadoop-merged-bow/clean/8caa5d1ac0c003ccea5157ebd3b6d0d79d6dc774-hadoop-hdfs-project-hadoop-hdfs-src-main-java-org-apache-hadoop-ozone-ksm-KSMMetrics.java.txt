HDFS-12086. Ozone: Add the unit test for KSMMetrics. Contributed by Yiqun Lin.

+
+import org.apache.hadoop.classification.InterfaceAudience;
+import org.apache.hadoop.metrics2.annotation.Metrics;
+@InterfaceAudience.Private
+@Metrics(about="Key Space Manager Metrics", context="dfs")
+  // KSM request type op metrics
+  private @Metric MutableCounterLong numVolumeOps;
+  private @Metric MutableCounterLong numBucketOps;
+  private @Metric MutableCounterLong numKeyOps;
+
-  private @Metric MutableCounterLong numVolumeModifies;
+  private @Metric MutableCounterLong numVolumeUpdates;
-  private @Metric MutableCounterLong numBucketModifies;
+  private @Metric MutableCounterLong numBucketUpdates;
-  private @Metric MutableCounterLong numVolumeModifyFails;
+  private @Metric MutableCounterLong numVolumeUpdateFails;
-  private @Metric MutableCounterLong numBucketModifyFails;
+  private @Metric MutableCounterLong numBucketUpdateFails;
+    numVolumeOps.incr();
-  public void incNumVolumeModifies() {
-    numVolumeModifies.incr();
+  public void incNumVolumeUpdates() {
+    numVolumeOps.incr();
+    numVolumeUpdates.incr();
+    numVolumeOps.incr();
+    numVolumeOps.incr();
+    numVolumeOps.incr();
+    numBucketOps.incr();
+    numBucketOps.incr();
-  public void incNumBucketModifies() {
-    numBucketModifies.incr();
+  public void incNumBucketUpdates() {
+    numBucketOps.incr();
+    numBucketUpdates.incr();
+    numBucketOps.incr();
+    numBucketOps.incr();
+    numKeyOps.incr();
+    numVolumeOps.incr();
-  public void incNumVolumeModifyFails() {
-    numVolumeModifyFails.incr();
+  public void incNumVolumeUpdateFails() {
+    numVolumeUpdateFails.incr();
-  public void incNumBucketModifyFails() {
-    numBucketModifyFails.incr();
+  public void incNumBucketUpdateFails() {
+    numBucketUpdateFails.incr();
+    numKeyOps.incr();
+    numKeyOps.incr();
+    numKeyOps.incr();
-  public long getNumVolumeModifies() {
-    return numVolumeModifies.value();
+  public long getNumVolumeUpdates() {
+    return numVolumeUpdates.value();
-  public long getNumBucketModifies() {
-    return numBucketModifies.value();
+  public long getNumBucketUpdates() {
+    return numBucketUpdates.value();
-  public long getNumVolumeModifyFails() {
-    return numVolumeModifyFails.value();
+  public long getNumVolumeUpdateFails() {
+    return numVolumeUpdateFails.value();
-  public long getNumBucketModifyFails() {
-    return numBucketModifyFails.value();
+  public long getNumBucketUpdateFails() {
+    return numBucketUpdateFails.value();

INS26 INS26 MOV23 MOV23 MOV23 MOV23 INS40 INS40 INS78 INS77 INS23 INS23 INS23 INS40 INS42 INS80 INS80 INS83 INS78 INS43 INS59 INS83 INS78 INS43 INS59 INS83 INS78 INS43 INS59 UPD42 UPD42 UPD42 UPD42 MOV78 UPD42 MOV78 UPD42 MOV78 UPD42 MOV78 UPD42 INS42 INS45 INS42 INS45 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 INS42 INS42 INS42 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS42 INS42 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 UPD42