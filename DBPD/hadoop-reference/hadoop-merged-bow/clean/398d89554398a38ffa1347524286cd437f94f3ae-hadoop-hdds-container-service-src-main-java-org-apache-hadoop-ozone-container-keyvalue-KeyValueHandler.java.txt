HDDS-339. Add block length and blockId in PutKeyResponse. Contributed by Shashikant Banerjee.

+    long blockLength;
-      commitKey(keyData, kvContainer);
+      blockLength = commitKey(keyData, kvContainer);
-    return KeyUtils.getKeyResponseSuccess(request);
+    return KeyUtils.putKeyResponseSuccess(request, blockLength);
-  private void commitKey(KeyData keyData, KeyValueContainer kvContainer)
+  private long commitKey(KeyData keyData, KeyValueContainer kvContainer)
-    keyManager.putKey(kvContainer, keyData);
+    long length = keyManager.putKey(kvContainer, keyData);
+    return length;
-        // the openContainerBlockMap should be updated only while writing data
-        // not during COMMIT_STAGE of handling write chunk request.
+      }
+
+      if (request.getWriteChunk().getStage() == Stage.COMMIT_DATA
+          || request.getWriteChunk().getStage() == Stage.COMBINED) {
+        // the openContainerBlockMap should be updated only during
+        // COMMIT_STAGE of handling write chunk request.

UPD39 INS60 INS60 INS41 INS39 INS59 INS39 INS59 INS42 INS42 UPD42 INS42 INS42 MOV32 INS25 INS7 INS27 INS8 INS42 MOV32 INS27 INS27 MOV21 INS32 INS40 INS32 INS40 INS32 INS42 INS32 INS42 INS42 INS42 INS42 INS42 DEL21