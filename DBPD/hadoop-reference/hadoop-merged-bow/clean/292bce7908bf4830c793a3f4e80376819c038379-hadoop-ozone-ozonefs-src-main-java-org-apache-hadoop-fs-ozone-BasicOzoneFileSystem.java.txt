HDDS-2114. Rename does not preserve non-explicitly created interim directories. Contributed by Lokesh Jain & Istvan Fajth.

-    return iterator.iterate();
+    boolean result = iterator.iterate();
+    if (result) {
+      createFakeParentDirectory(src);
+    }
+    return result;
-      Path parent = f.getParent();
-      if (parent != null && !parent.isRoot()) {
-        createFakeDirectoryIfNecessary(parent);
-      }
+      createFakeParentDirectory(f);
+  private void createFakeParentDirectory(Path f) throws IOException {
+    Path parent = f.getParent();
+    if (parent != null && !parent.isRoot()) {
+      createFakeDirectoryIfNecessary(parent);
+    }
+  }
+
+  /**
+   * Create a fake directory key if it does not already exist.
+   *
+   * @param f path to the fake directory
+   * @throws IOException
+   */

INS31 MOV29 INS83 INS39 INS42 INS44 INS43 MOV8 INS29 INS60 INS25 INS43 INS42 INS42 INS65 INS65 INS65 INS39 INS59 INS42 INS8 INS42 INS8 INS42 INS66 INS42 INS66 INS42 INS42 MOV32 INS21 INS21 INS32 INS32 INS42 INS42 INS42 INS42