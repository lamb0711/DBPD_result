YARN-3210. Refactored timeline aggregator according to new code organization proposed in YARN-3166. Contributed by Li Lu.

(cherry picked from commit d3ff7f06cbc66d3a23c2551e7d4c752689f46afe)

-public class PerNodeAggregatorWebService {
+public class TimelineAggregatorWebService {
-      LogFactory.getLog(PerNodeAggregatorWebService.class);
+      LogFactory.getLog(TimelineAggregatorWebService.class);
-      AppLevelAggregatorService service = getAggregatorService(req, appId);
+      TimelineAggregator service = getAggregatorService(req, appId);
-  private AppLevelAggregatorService
+  private TimelineAggregator
-    final AppLevelServiceManager serviceManager =
-        (AppLevelServiceManager) context.getAttribute(
-            PerNodeAggregatorServer.AGGREGATOR_COLLECTION_ATTR_KEY);
-    return serviceManager.getService(appIdString);
+    final TimelineAggregatorsCollection aggregatorCollection =
+        (TimelineAggregatorsCollection) context.getAttribute(
+            TimelineAggregatorsCollection.AGGREGATOR_COLLECTION_ATTR_KEY);
+    return aggregatorCollection.get(appIdString);

UPD42 UPD43 UPD42 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 UPD43 UPD42 UPD42 UPD40