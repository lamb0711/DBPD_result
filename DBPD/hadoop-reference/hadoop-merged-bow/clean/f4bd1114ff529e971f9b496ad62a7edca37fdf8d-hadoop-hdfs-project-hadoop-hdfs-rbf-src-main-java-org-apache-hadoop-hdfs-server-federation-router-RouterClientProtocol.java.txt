HDFS-14082. RBF: Add option to fail operations when a subcluster is unavailable. Contributed by Inigo Goiri.

+  /** If it requires response from all subclusters. */
+  private final boolean allowPartialList;
+
+    this.allowPartialList = conf.getBoolean(
+        RBFConfigKeys.DFS_ROUTER_ALLOW_PARTIAL_LIST,
+        RBFConfigKeys.DFS_ROUTER_ALLOW_PARTIAL_LIST_DEFAULT);
+
-        rpcClient.invokeConcurrent(
-            locations, method, false, false, DirectoryListing.class);
+        rpcClient.invokeConcurrent(locations, method,
+            !this.allowPartialList, false, DirectoryListing.class);
-          rpcClient.invokeConcurrent(
-              locations, method, false, false, ContentSummary.class);
+          rpcClient.invokeConcurrent(locations, method,
+              !this.allowPartialList, false, ContentSummary.class);

INS23 INS29 INS83 INS83 INS39 INS59 INS65 INS42 INS21 INS66 INS7 INS22 INS32 INS52 INS42 INS42 INS42 INS40 INS40 INS38 INS22 INS52 INS42 INS38 INS22 INS52 INS42 DEL9 DEL9