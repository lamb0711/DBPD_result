HDFS-3582. Hook daemon process exit for testing. Contributed by Eli Collins


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1360329 13f79535-47bb-0310-9956-ffa450edef68

+
+import static org.apache.hadoop.util.ExitUtil.terminate;
+
-        LOG.error("Throwable Exception in doCheckpoint", e);
+        LOG.fatal("Throwable Exception in doCheckpoint", e);
-        Runtime.getRuntime().exit(-1);
+        terminate(1);
-      exitCode = -1;
+      exitCode = 1;
-      exitCode = -1;
+      exitCode = 1;
-      System.exit(-1);
+      LOG.fatal("Failed to parse options");
+      terminate(1);
-      System.exit(-1);
+      terminate(1);
-    if (opts.getCommand() != null) {
+    if (opts != null && opts.getCommand() != null) {
-      System.exit(ret);
+      terminate(ret);

INS26 INS40 INS27 INS21 INS27 MOV27 INS32 INS42 INS33 INS42 INS42 INS45 UPD42 INS34 UPD42 INS34 INS34 UPD42 INS34 UPD42 UPD42 MOV42 INS34 DEL42 DEL32 DEL42 DEL34 DEL38 DEL34 DEL38 DEL34 DEL38 DEL42 DEL34 DEL38 DEL42 DEL34 DEL38 DEL42