Revert "YARN-3878. AsyncDispatcher can hang while stopping if it is configured for draining events on stop. (Varun Saxena via kasha)"

This reverts commit aa067c6aa47b4c79577096817acc00ad6421180c.

+  // Indicates all the remaining dispatcher's events on stop have been drained
+  // and processed.
+  private volatile boolean drained = true;
+          drained = eventQueue.isEmpty();
-              if (eventQueue.isEmpty()) {
+              if (drained) {
-        while (!eventQueue.isEmpty() && eventHandlingThread.isAlive()) {
+        while (!drained && eventHandlingThread.isAlive()) {
-  @VisibleForTesting
-  protected boolean hasPendingEvents() {
-    return !eventQueue.isEmpty();
-  }
-
-  @VisibleForTesting
-  protected boolean isEventThreadWaiting() {
-    return eventHandlingThread.getState() == Thread.State.WAITING;
-  }
-
+      drained = false;
+
+  @VisibleForTesting
+  protected boolean isDrained() {
+    return this.drained;
+  }

MOV31 INS23 INS83 INS83 INS39 INS59 UPD42 INS42 INS9 INS21 INS22 INS7 INS52 INS42 INS42 INS9 INS21 INS42 INS7 INS42 MOV32 INS42 DEL42 DEL42 DEL32 DEL42 DEL78 DEL83 DEL39 DEL42 DEL42 DEL42 DEL32 DEL38 DEL41 DEL8 DEL31 DEL42 DEL42 DEL32 DEL40 DEL27