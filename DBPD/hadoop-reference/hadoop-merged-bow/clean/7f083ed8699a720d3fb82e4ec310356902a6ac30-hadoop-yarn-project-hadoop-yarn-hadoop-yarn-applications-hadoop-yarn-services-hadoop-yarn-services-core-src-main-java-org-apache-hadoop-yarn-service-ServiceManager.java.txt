YARN-8080.  Add restart policy for YARN services.
            Contributed by Suma Shivaprasad

+import org.apache.hadoop.yarn.service.component.ComponentRestartPolicy;
-        ComponentEvent needUpgradeEvent = new ComponentEvent(
-            component.getName(), ComponentEventType.UPGRADE)
-            .setTargetSpec(component)
-            .setUpgradeVersion(event.getVersion());
-        context.scheduler.getDispatcher().getEventHandler().handle(
-            needUpgradeEvent);
+        org.apache.hadoop.yarn.service.api.records.Component.RestartPolicyEnum
+            restartPolicy = component.getRestartPolicy();
+
+        final ComponentRestartPolicy restartPolicyHandler =
+            Component.getRestartPolicyHandler(restartPolicy);
+        // Do not allow upgrades for components which have NEVER/ON_FAILURE
+        // restart policy
+        if (restartPolicyHandler.allowUpgrades()) {
+          ComponentEvent needUpgradeEvent = new ComponentEvent(
+              component.getName(), ComponentEventType.UPGRADE).setTargetSpec(
+              component).setUpgradeVersion(event.getVersion());
+          context.scheduler.getDispatcher().getEventHandler().handle(
+              needUpgradeEvent);
+        } else {
+          LOG.info("The component {} has a restart "
+              + "policy that doesnt allow upgrades {} ", component.getName(),
+              component.getRestartPolicy().toString());
+        }

INS26 INS40 INS8 INS60 INS60 INS25 INS43 INS59 INS83 INS43 INS59 INS32 MOV8 INS8 INS40 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS21 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS27 INS32 INS32 INS45 INS45 INS42 INS42 INS32 INS42 INS42 INS42