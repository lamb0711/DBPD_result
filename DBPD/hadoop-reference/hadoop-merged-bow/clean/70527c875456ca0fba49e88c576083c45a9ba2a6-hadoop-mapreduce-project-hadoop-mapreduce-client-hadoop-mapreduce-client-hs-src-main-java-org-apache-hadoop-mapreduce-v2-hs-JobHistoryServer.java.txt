merge trunk into HDFS-4949 branch

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1513658 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.util.ExitUtil;
-  public static void main(String[] args) {
-    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());
+  static JobHistoryServer launchJobHistoryServer(String[] args) {
+    Thread.
+        setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());
+    JobHistoryServer jobHistoryServer = null;
-      JobHistoryServer jobHistoryServer = new JobHistoryServer();
+      jobHistoryServer = new JobHistoryServer();
-      System.exit(-1);
+      ExitUtil.terminate(-1, "Error starting JobHistoryServer");
+    return jobHistoryServer;
+  }
+
+  public static void main(String[] args) {
+    launchJobHistoryServer(args);

INS26 INS40 INS31 MOV43 UPD42 INS83 INS83 INS39 INS42 INS44 INS8 INS60 INS41 INS5 INS42 INS21 INS43 INS59 INS42 INS43 INS85 INS32 INS42 INS42 INS33 INS21 INS42 INS42 INS42 INS7 INS42 MOV14 UPD42 UPD42 INS45 DEL83 DEL39 DEL42 DEL59 DEL60