Merge r1360400 through r1399945 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1399950 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.fs.Options.ChecksumOpt;
-import org.apache.hadoop.util.StringUtils;
+  @Override
+    @Override
+    @Override
+    @Override
+    @Override
+    @Override
+    @Override
-      final Progressable progress, final int bytesPerChecksum,
+      final Progressable progress, final ChecksumOpt checksumOpt,
+      // checksumOpt is passed down to the raw fs. Unless it implements
+      // checksum impelemts internally, checksumOpt will be ignored.
+      // If the raw fs does checksum internally, we will end up with
+      // two layers of checksumming. i.e. checksumming checksum file.
-           bytesPerChecksum,  createParent);
+           checksumOpt,  createParent);
-          bytesPerChecksum, createParent);
+          checksumOpt, createParent);
+    @Override
-      int bytesPerChecksum, boolean createParent) throws IOException {
-
+      ChecksumOpt checksumOpt, boolean createParent) throws IOException {
-            bytesPerChecksum,  createParent), null);
+            checksumOpt,  createParent), null);
+  @Override

MOV26 UPD40 INS78 INS78 INS42 INS78 INS78 INS78 INS78 INS78 INS78 INS78 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 DEL39 DEL42 DEL39 DEL42