HDFS-5213. Separate PathBasedCacheEntry and PathBasedCacheDirectiveWithId. Contributed by Colin Patrick McCabe.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1524561 13f79535-47bb-0310-9956-ffa450edef68

-import com.google.common.collect.ComparisonChain;
+import org.apache.commons.lang.builder.EqualsBuilder;
+import org.apache.hadoop.classification.InterfaceAudience;
+import org.apache.hadoop.classification.InterfaceStability;
-public class PathBasedCacheDirective implements Comparable<PathBasedCacheDirective> {
+@InterfaceStability.Evolving
+@InterfaceAudience.Public
+public class PathBasedCacheDirective {
-  public int compareTo(PathBasedCacheDirective rhs) {
-    return ComparisonChain.start().
-        compare(pool, rhs.getPool()).
-        compare(path, rhs.getPath()).
-        result();
+  public boolean equals(Object o) {
+    if (o == null) {
+      return false;
+    }
+    if (getClass() != o.getClass()) {
+      return false;
+    }
+    PathBasedCacheDirective other = (PathBasedCacheDirective)o;
+    return new EqualsBuilder().append(getPath(), other.getPath()).
+        append(getPool(), other.getPool()).
+        isEquals();
-    return new HashCodeBuilder().append(path).append(pool).hashCode();
-  }
-
-  @Override
-  public boolean equals(Object o) {
-    try {
-      PathBasedCacheDirective other = (PathBasedCacheDirective)o;
-      return other.compareTo(this) == 0;
-    } catch (ClassCastException e) {
-      return false;
-    }
+    return new HashCodeBuilder().append(getPath()).
+        append(getPool()).
+        hashCode();

INS26 INS26 UPD40 INS40 INS40 INS78 INS78 INS31 INS40 INS40 MOV78 MOV83 UPD39 MOV39 UPD42 MOV42 MOV44 INS8 INS25 INS25 MOV60 INS41 INS27 INS8 INS27 MOV8 INS32 INS42 INS33 INS41 INS32 INS32 INS32 INS42 INS9 INS42 UPD42 MOV42 UPD42 MOV42 INS32 UPD42 MOV42 INS32 INS32 INS32 INS14 UPD42 MOV42 MOV32 MOV32 INS42 MOV42 UPD42 MOV42 INS32 UPD42 MOV42 INS43 UPD42 UPD42 UPD42 MOV42 INS42 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL42 DEL78 DEL42 DEL43 DEL42 DEL44 DEL32 DEL42 DEL32 DEL42 DEL42 DEL32 DEL32 DEL41 DEL8 DEL31 DEL83 DEL39 DEL42 DEL52 DEL32 DEL34 DEL27 DEL41 DEL8 DEL42 DEL43 DEL42 DEL44 DEL12 DEL54 DEL8 DEL31