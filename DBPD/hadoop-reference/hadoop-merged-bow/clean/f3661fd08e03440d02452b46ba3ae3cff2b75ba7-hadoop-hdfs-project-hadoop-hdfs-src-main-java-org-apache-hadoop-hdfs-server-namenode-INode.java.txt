HDFS-12336. Listing encryption zones still fails when deleted EZ is not a direct child of snapshottable directory. Contributed by Wellington Chevreuil.

+  /**
+   * Verifies if the path informed is a valid absolute path.
+   * @param path the absolute path to validate.
+   * @return true if the path is valid.
+   */
+  static boolean isValidAbsolutePath(final String path){
+    return path != null && path.startsWith(Path.SEPARATOR);
+  }
+
-    if (path == null || !path.startsWith(Path.SEPARATOR)) {
+    if (!isValidAbsolutePath(path)) {

INS31 INS29 INS83 INS39 INS42 INS44 INS8 INS65 INS65 INS65 INS83 INS43 INS42 INS41 INS66 INS42 INS66 INS66 INS42 UPD27 MOV27 INS38 UPD27 MOV32 INS32 INS42 INS42 DEL38