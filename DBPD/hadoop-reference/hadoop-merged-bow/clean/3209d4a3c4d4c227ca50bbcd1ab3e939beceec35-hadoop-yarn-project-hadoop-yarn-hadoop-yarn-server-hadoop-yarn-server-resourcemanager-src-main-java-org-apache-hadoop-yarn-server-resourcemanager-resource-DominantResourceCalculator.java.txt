Merge r1464808 through r1466652 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1466658 13f79535-47bb-0310-9956-ffa450edef68

-  public Resource normalize(Resource r, Resource minimumResource) {
-    return Resources.createResource(
+  public Resource normalize(Resource r, Resource minimumResource,
+      Resource maximumResource) {
+    int normalizedMemory = Math.min(
-            Math.max(r.getMemory(), minimumResource.getMemory()), 
+            Math.max(r.getMemory(), minimumResource.getMemory()),
+            maximumResource.getMemory());
+    int normalizedCores = Math.min(
-            minimumResource.getVirtualCores())
-        );
+            minimumResource.getVirtualCores()),
+            maximumResource.getVirtualCores());
+    return Resources.createResource(normalizedMemory,
+        normalizedCores);

INS44 INS43 INS42 INS60 INS60 INS42 INS39 INS59 INS39 INS59 INS32 INS42 MOV32 INS42 INS32 INS42 INS42 INS42 INS42 UPD42 INS42 INS32 INS42 INS42 MOV32 INS32 UPD42 MOV42 INS42 INS42 INS42