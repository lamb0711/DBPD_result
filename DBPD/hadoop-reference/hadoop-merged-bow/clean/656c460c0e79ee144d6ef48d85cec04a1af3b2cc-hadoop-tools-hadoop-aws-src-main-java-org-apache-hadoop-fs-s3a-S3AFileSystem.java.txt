HADOOP-13237: s3a initialization against public bucket fails if caller lacks any credentials. Contributed by Chris Nauroth

-          new EnvironmentVariableCredentialsProvider(),
-          new AnonymousAWSCredentialsProvider()
-      );
+          new EnvironmentVariableCredentialsProvider());
-        credentials = (AWSCredentialsProvider) Class.forName(className)
-            .getDeclaredConstructor(URI.class, Configuration.class)
-            .newInstance(this.uri, conf);
+        Class<?> credClass = Class.forName(className);
+        try {
+          credentials =
+              (AWSCredentialsProvider)credClass.getDeclaredConstructor(
+                  URI.class, Configuration.class).newInstance(this.uri, conf);
+        } catch (NoSuchMethodException | SecurityException e) {
+          credentials =
+              (AWSCredentialsProvider)credClass.getDeclaredConstructor()
+                  .newInstance();
+        }
-        throw new IOException(className + " constructor exception.", e);
+        throw new IOException(String.format("%s constructor exception.  A "
+            + "class specified in %s must provide an accessible constructor "
+            + "accepting URI and Configuration, or an accessible default "
+            + "constructor.", className, AWS_CREDENTIALS_PROVIDER), e);

INS8 MOV21 INS60 INS54 INS44 INS74 INS59 MOV8 INS12 INS84 INS42 INS43 INS76 INS42 MOV32 MOV44 INS8 INS43 INS43 INS42 INS21 INS42 INS42 INS32 INS7 INS42 INS42 INS27 INS42 INS42 INS42 INS11 UPD45 MOV45 INS45 INS45 INS45 INS43 INS32 INS42 INS42 INS32 INS42 INS42 INS42 DEL42 DEL43 DEL14 DEL42 DEL27