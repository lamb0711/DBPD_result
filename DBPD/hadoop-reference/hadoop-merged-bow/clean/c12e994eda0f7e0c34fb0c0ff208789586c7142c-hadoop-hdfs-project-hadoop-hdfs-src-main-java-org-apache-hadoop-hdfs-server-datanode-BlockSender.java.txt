HDFS-3754. BlockSender doesn't shutdown ReadaheadPool threads. Contributed by Eli Collins


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370495 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.EOFException;
-import org.apache.hadoop.hdfs.server.common.Util;
-  private static ReadaheadPool readaheadPool =
-    ReadaheadPool.getInstance();
-    if (readaheadLength > 0 && readaheadPool != null) {
-      curReadahead = readaheadPool.readaheadStream(
+    if (readaheadLength > 0 && datanode.readaheadPool != null) {
+      curReadahead = datanode.readaheadPool.readaheadStream(

INS40 INS40 DEL40 DEL26 DEL40 DEL26 DEL83 DEL83 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL23 DEL42 DEL42