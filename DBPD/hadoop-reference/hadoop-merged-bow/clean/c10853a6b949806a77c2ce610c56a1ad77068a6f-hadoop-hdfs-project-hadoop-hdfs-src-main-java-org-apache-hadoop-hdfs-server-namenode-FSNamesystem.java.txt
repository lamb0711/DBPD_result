HDFS-2820. Add a simple sanity check for HA config. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1235013 13f79535-47bb-0310-9956-ffa450edef68

+    
+    // Sanity check the HA-related config.
+    if (nameserviceId != null) {
+      LOG.info("Determined nameservice ID: " + nameserviceId);
+    }
+    LOG.info("HA Enabled: " + haEnabled);
+    if (!haEnabled && HAUtil.usesSharedEditsDir(conf)) {
+      LOG.warn("Configured NNs:\n" + DFSUtil.nnAddressesAsString(conf));
+      throw new IOException("Invalid configuration: a shared edits dir " +
+          "must not be specified if HA is not enabled.");
+    }

INS25 INS21 INS25 INS27 INS8 INS32 INS27 INS8 INS42 INS33 INS21 INS42 INS42 INS27 INS38 INS32 INS21 INS53 INS32 INS45 INS42 INS42 INS42 INS42 INS42 INS32 INS14 INS42 INS42 INS27 INS42 INS42 INS27 INS43 INS27 INS45 INS42 INS45 INS32 INS42 INS45 INS45 INS42 INS42 INS42