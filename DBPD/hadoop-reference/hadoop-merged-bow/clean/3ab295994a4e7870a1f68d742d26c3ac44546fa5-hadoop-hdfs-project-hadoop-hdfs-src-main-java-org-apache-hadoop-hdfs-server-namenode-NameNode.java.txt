HDFS-2523. Small NN fixes to include HAServiceProtocol and prevent NPE on shutdown. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1195753 13f79535-47bb-0310-9956-ffa450edef68

-      state.exitState(haContext);
+      if (state != null) {
+        state.exitState(haContext);
+      }

INS8 INS25 INS27 MOV8 INS42 INS33