YARN-7662. [ATSv2] Define new set of configurations for reader and collectors to bind (Rohith Sharma K S via Varun Saxena)

+import org.apache.hadoop.net.NetUtils;
+  private String webAppURLWithoutScheme;
+
-    InetSocketAddress bindAddr = conf.getSocketAddr(
-        YarnConfiguration.TIMELINE_SERVICE_ADDRESS,
-            YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ADDRESS,
-                YarnConfiguration.DEFAULT_TIMELINE_SERVICE_PORT);
+    webAppURLWithoutScheme =
+        WebAppUtils.getTimelineReaderWebAppURLWithoutScheme(conf);
+    InetSocketAddress bindAddr =
+        NetUtils.createSocketAddr(webAppURLWithoutScheme);
-    String bindAddress = WebAppUtils.getWebAppBindURL(conf,
-        YarnConfiguration.TIMELINE_SERVICE_BIND_HOST,
-        WebAppUtils.getTimelineReaderWebAppURL(conf));
+
+    String hostProperty = YarnConfiguration.TIMELINE_SERVICE_READER_BIND_HOST;
+    String host = conf.getTrimmed(hostProperty);
+    if (host == null || host.isEmpty()) {
+      // if reader bind-host is not set, fall back to timeline-service.bind-host
+      // to maintain compatibility
+      hostProperty = YarnConfiguration.TIMELINE_SERVICE_BIND_HOST;
+    }
+    String bindAddress = WebAppUtils
+        .getWebAppBindURL(conf, hostProperty, webAppURLWithoutScheme);
+

INS26 INS40 INS23 INS83 INS43 INS59 INS42 INS42 INS21 INS60 INS60 INS25 INS60 INS7 MOV43 INS59 INS43 INS59 INS27 INS8 INS43 INS59 INS42 INS32 UPD42 MOV42 INS40 INS42 INS42 INS32 INS27 INS32 INS21 INS42 INS42 INS32 INS42 INS42 INS42 UPD42 UPD42 INS42 MOV42 INS42 INS42 INS42 INS33 INS42 INS42 INS7 MOV42 UPD42 MOV42 MOV42 INS42 INS42 INS42 INS40 DEL40 DEL40 DEL40 DEL42 DEL42 DEL40 DEL32 DEL32 DEL59 DEL60