YARN-9833. Race condition when DirectoryCollection.checkDirs() runs during container launch. Contributed by Peter Bacsko.

+import com.google.common.collect.ImmutableList;
-      return Collections.unmodifiableList(localDirs);
+      return ImmutableList.copyOf(localDirs);
-      return Collections.unmodifiableList(
+      return ImmutableList.copyOf(
-      return Collections.unmodifiableList(fullDirs);
+      return ImmutableList.copyOf(fullDirs);

INS26 INS40 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42