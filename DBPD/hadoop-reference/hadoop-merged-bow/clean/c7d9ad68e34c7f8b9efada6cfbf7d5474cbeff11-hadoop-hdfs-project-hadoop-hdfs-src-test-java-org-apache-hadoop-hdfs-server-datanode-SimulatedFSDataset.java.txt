HDFS-8191. Fix byte to integer casting in SimulatedFSDataset#simulatedByte. Contributed by Zhe Zhang.

+  public final static int BYTE_MASK = 0xff;
-    byte firstByte = (byte) (b.getBlockId() % Byte.MAX_VALUE);
-    return (byte) ((firstByte + offsetInBlk) % Byte.MAX_VALUE);
+    byte firstByte = (byte) (b.getBlockId() & BYTE_MASK);
+    return (byte) ((firstByte + offsetInBlk) & BYTE_MASK);
-      if (currentPos >= length)
+      if (currentPos >= length) {
+      }
-        return simulatedByte(theBlock, currentPos++);
+        return simulatedByte(theBlock, currentPos++) & BYTE_MASK;

INS23 INS83 INS83 INS83 INS39 INS59 INS42 INS34 INS8 UPD27 MOV41 UPD27 INS42 INS27 INS42 MOV32 INS42 DEL40 DEL40