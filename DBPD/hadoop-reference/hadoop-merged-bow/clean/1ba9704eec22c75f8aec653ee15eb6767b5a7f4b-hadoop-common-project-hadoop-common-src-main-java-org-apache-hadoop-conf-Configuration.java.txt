HADOOP-14399. Configuration does not correctly XInclude absolute file URIs.
Contributed by Jonathan Eagles

+      String confInclude = null;
-            String confInclude = null;
+            confInclude = null;
-              File href = new File(confInclude);
-              if (!href.isAbsolute()) {
-                // Included resources are relative to the current resource
-                File baseFile = new File(name).getParentFile();
-                href = new File(baseFile, href.getPath());
+              URL url;
+              try {
+                url = new URL(confInclude);
+                url.openConnection().connect();
+              } catch (IOException ioe) {
+                File href = new File(confInclude);
+                if (!href.isAbsolute()) {
+                  // Included resources are relative to the current resource
+                  File baseFile = new File(name).getParentFile();
+                  href = new File(baseFile, href.getPath());
+                }
+                if (!href.exists()) {
+                  // Resource errors are non-fatal iff there is 1 xi:fallback
+                  fallbackAllowed = true;
+                  break;
+                }
+                url = href.toURI().toURL();
-              if (!href.exists()) {
-                // Resource errors are non-fatal iff there is 1 xi:fallback
-                fallbackAllowed = true;
-                break;
-              }
-              Resource uriResource = new Resource(href.toURI().toURL(), name);
+              Resource uriResource = new Resource(url, name);
-              throw new IOException("Fetch fail on include with no "
-                  + "fallback while loading '" + name + "'");
+              throw new IOException("Fetch fail on include for '"
+                  + confInclude + "' with no fallback while loading '"
+                  + name + "'");

MOV60 INS21 INS7 INS8 INS42 INS33 INS60 INS54 INS60 MOV21 INS43 INS59 INS8 INS12 MOV43 INS59 INS42 INS42 INS21 INS21 INS44 MOV8 INS42 INS14 INS7 INS32 INS43 INS42 INS21 MOV43 INS42 INS42 UPD45 MOV45 INS42 UPD45 MOV45 INS42 INS14 INS32 INS42 INS42 INS7 INS43 INS42 INS42 INS42 INS42 MOV32 INS42 DEL42 DEL42 DEL14 DEL59 DEL60 DEL27