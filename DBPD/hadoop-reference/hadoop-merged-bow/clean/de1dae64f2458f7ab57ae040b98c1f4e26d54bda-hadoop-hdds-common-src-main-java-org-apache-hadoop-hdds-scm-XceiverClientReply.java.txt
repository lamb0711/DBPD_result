HDDS-726. Ozone Client should update SCM to move the container out of allocation path in case a write transaction fails. Contributed by Shashikant Banerjee.

+import org.apache.hadoop.hdds.protocol.DatanodeDetails;
-import java.util.UUID;
+import java.util.ArrayList;
+import java.util.List;
- * This class represents the Async reply from XceiverClient.
+ * This class represents the reply from XceiverClient.
-  private UUID dnId;
+
+  /**
+   * List of datanodes where the command got executed and reply is received.
+   * If there is an exception in the reply, these datanodes will inform
+   * about the servers where there is a failure.
+   */
+  private List<DatanodeDetails> datanodes;
-      CompletableFuture<ContainerCommandResponseProto> response, UUID dnId) {
+      CompletableFuture<ContainerCommandResponseProto> response,
+      List<DatanodeDetails> datanodes) {
-    this.dnId = dnId;
+    this.datanodes = datanodes == null ? new ArrayList<>() : datanodes;
-  public UUID getDatanode() {
-    return dnId;
+  public List<DatanodeDetails> getDatanodes() {
+    return datanodes;
-  public void setDatanode(UUID datanodeId) {
-    this.dnId = datanodeId;
+  public void addDatanode(DatanodeDetails dn) {
+    datanodes.add(dn);

INS26 INS26 INS40 INS40 UPD40 INS29 INS74 INS74 UPD42 UPD42 UPD66 INS65 INS43 INS43 UPD42 INS74 UPD42 INS43 INS43 UPD43 UPD42 INS66 INS66 INS66 UPD42 MOV42 INS42 INS43 INS43 UPD42 MOV42 INS42 UPD42 UPD42 INS32 UPD42 MOV42 INS42 INS16 INS42 INS42 INS42 UPD42 INS27 INS14 INS42 INS42 INS33 INS74 INS43 INS42 DEL43 DEL43 DEL42 DEL43 DEL52 DEL42 DEL22 DEL42 DEL7