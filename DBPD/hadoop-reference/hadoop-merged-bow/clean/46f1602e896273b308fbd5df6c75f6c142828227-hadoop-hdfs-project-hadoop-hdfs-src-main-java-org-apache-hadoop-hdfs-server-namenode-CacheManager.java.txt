HDFS-10448. CacheManager#addInternal tracks bytesNeeded incorrectly when dealing with replication factors other than 1 (Yiqun Lin via cmccabe)

-    if (pool.getBytesNeeded() + (stats.getBytesNeeded() * replication) > pool
-        .getLimit()) {
+    if (pool.getBytesNeeded() + stats.getBytesNeeded() > pool.getLimit()) {
-        .setBytesNeeded(requestedBytes)
+        .setBytesNeeded(requestedBytes * replication)

UPD27 MOV27 UPD27 MOV27 MOV32 MOV32 INS27 INS42 INS42 DEL42 DEL36 DEL27 DEL42