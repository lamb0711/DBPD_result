MAPREDUCE-3533. Add a channel between RM and AM to get information on nodes. Contributed by Bikas Saha. 


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1305230 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.server.resourcemanager.NodesListManagerEvent;
+import org.apache.hadoop.yarn.server.resourcemanager.NodesListManagerEventType;
+     .addTransition(RMNodeState.UNHEALTHY, RMNodeState.UNHEALTHY,
+         RMNodeEventType.CLEANUP_APP, new CleanUpAppTransition())
+     .addTransition(RMNodeState.UNHEALTHY, RMNodeState.UNHEALTHY,
+         RMNodeEventType.CLEANUP_CONTAINER, new CleanUpContainerTransition())
+      rmNode.context.getDispatcher().getEventHandler().handle(
+          new NodesListManagerEvent(
+              NodesListManagerEventType.NODE_UNUSABLE, rmNode));
+        rmNode.context.getDispatcher().getEventHandler().handle(
+            new NodesListManagerEvent(
+                NodesListManagerEventType.NODE_UNUSABLE, rmNode));
+        rmNode.context.getDispatcher().getEventHandler().handle(
+                new NodesListManagerEvent(
+                    NodesListManagerEventType.NODE_USABLE, rmNode));
+        // ??? how about updating metrics before notifying to ensure that
+        // notifiers get update metadata because they will very likely query it
+        // upon notification

INS26 INS26 INS40 INS40 INS32 INS32 INS42 INS21 MOV32 INS42 INS40 INS40 INS40 INS14 INS32 UPD42 INS40 INS40 INS40 INS14 INS43 INS32 INS42 INS14 INS21 INS21 INS43 INS42 INS32 INS42 INS43 INS40 INS42 INS32 INS32 INS42 INS40 INS42 INS42 INS32 INS42 INS14 INS32 INS42 INS14 INS32 INS42 INS43 INS40 INS42 INS32 INS42 INS43 INS40 INS42 INS40 INS42 INS42 INS40 INS42 INS42