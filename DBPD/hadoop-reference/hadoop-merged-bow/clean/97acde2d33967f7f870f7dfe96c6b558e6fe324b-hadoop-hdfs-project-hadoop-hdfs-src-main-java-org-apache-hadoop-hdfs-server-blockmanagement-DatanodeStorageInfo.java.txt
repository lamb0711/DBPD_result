HDFS-5542. Fix TODO and clean up the code in HDFS-2832. (Contributed by szetszwo)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1544664 13f79535-47bb-0310-9956-ffa450edef68

-  private State state;
+  private final State state;
-  public DatanodeStorageInfo(DatanodeDescriptor dn, DatanodeStorage s) {
+  DatanodeStorageInfo(DatanodeDescriptor dn, DatanodeStorage s) {
-  public void setUtilization(long capacity, long dfsUsed,
+  public void setUtilizationForTesting(long capacity, long dfsUsed,
-  public void setState(State s) {
-    this.state = s;
-    
-    // TODO: if goes to failed state cleanup the block list
-  }
-  
-  public State getState() {
+  State getState() {
-  public String getStorageID() {
+  String getStorageID() {
-  public StorageType getStorageType() {
+  StorageType getStorageType() {
-  public long getCapacity() {
+  long getCapacity() {
-  public long getDfsUsed() {
+  long getDfsUsed() {
-  public long getRemaining() {
+  long getRemaining() {
-  public long getBlockPoolUsed() {
+  long getBlockPoolUsed() {
-  public boolean addBlock(BlockInfo b) {
+  boolean addBlock(BlockInfo b) {
-  public boolean removeBlock(BlockInfo b) {
+  boolean removeBlock(BlockInfo b) {
-  public int numBlocks() {
+  int numBlocks() {
-  protected BlockInfo getHead(){
+  BlockInfo getBlockListHeadForTesting(){
-  public void updateState(StorageReport r) {
+  void updateState(StorageReport r) {

INS83 UPD42 UPD42 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21 DEL8 DEL31 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83 DEL83