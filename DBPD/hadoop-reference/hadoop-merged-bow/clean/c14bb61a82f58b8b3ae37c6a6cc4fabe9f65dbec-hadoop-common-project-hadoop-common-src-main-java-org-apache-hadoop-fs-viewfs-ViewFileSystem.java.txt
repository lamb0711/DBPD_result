Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1242635 13f79535-47bb-0310-9956-ffa450edef68

-            return new ChRootedFileSystem(FileSystem.get(uri, config), 
-                new Path(uri.getPath()));
+            return new ChRootedFileSystem(uri, config);
-    // This is a file system level operations, however ViewFileSystem 
-    // points to many file systems. Noop for ViewFileSystem.
+    List<InodeTree.MountPoint<FileSystem>> mountPoints = 
+        fsState.getMountPoints();
+    for (InodeTree.MountPoint<FileSystem> mount : mountPoints) {
+      mount.target.targetFileSystem.setVerifyChecksum(verifyChecksum);
+    }
+  @Override
+  public void setWriteChecksum(final boolean writeChecksum) { 
+    List<InodeTree.MountPoint<FileSystem>> mountPoints = 
+        fsState.getMountPoints();
+    for (InodeTree.MountPoint<FileSystem> mount : mountPoints) {
+      mount.target.targetFileSystem.setWriteChecksum(writeChecksum);
+    }
+  }
+

INS31 INS8 INS78 INS83 INS39 INS42 INS44 INS8 INS60 INS70 INS42 INS83 INS39 INS42 INS60 INS70 INS74 INS59 INS44 INS42 INS8 INS74 INS59 INS44 INS42 INS8 INS43 INS74 INS42 INS32 INS74 INS42 INS21 INS43 INS74 INS42 INS32 INS74 INS42 INS21 INS42 INS43 INS43 INS42 INS42 INS43 INS43 INS32 INS42 INS43 INS43 INS42 INS42 INS43 INS43 INS32 INS40 INS42 INS40 INS42 INS40 INS42 INS42 INS40 INS42 INS40 INS42 INS40 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL32 DEL14 DEL8