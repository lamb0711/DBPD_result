YARN-5735. Make the service REST API use the app timeout feature YARN-4205. Contributed by Jian He

+import org.apache.hadoop.yarn.api.records.ApplicationTimeoutType;
-    return startCluster(clustername, createArgs);
+    return startCluster(clustername, createArgs, createArgs.lifetime);
+   * @param lifetime
-  protected int startCluster(String clustername,
-                           LaunchArgsAccessor launchArgs) throws
-                                                          YarnException,
-                                                          IOException {
+  protected int startCluster(String clustername, LaunchArgsAccessor launchArgs,
+      long lifetime) throws YarnException, IOException {
-                        serviceArgs.isDebug());
+                        serviceArgs.isDebug(), lifetime);
-      Path clusterDirectory,
-      AggregateConf instanceDefinition,
-      boolean debugAM)
+      Path clusterDirectory, AggregateConf instanceDefinition, boolean debugAM,
+      long lifetime)
-
+    // set lifetime in submission context;
+    Map<ApplicationTimeoutType, Long> appTimeout = new HashMap<>();
+    appTimeout.put(ApplicationTimeoutType.LIFETIME, lifetime);
+    amLauncher.submissionContext.setApplicationTimeouts(appTimeout);
+   * @param lifetime
-  public LaunchedApplication launchApplication(String clustername,
-                                               Path clusterDirectory,
-                                               AggregateConf instanceDefinition,
-                                               boolean debugAM)
+  public LaunchedApplication launchApplication(String clustername, Path clusterDirectory,
+      AggregateConf instanceDefinition, boolean debugAM, long lifetime)
-        debugAM);
+        debugAM, lifetime);
-    return startCluster(clustername, thaw);
+    return startCluster(clustername, thaw, thaw.lifetime);

INS26 INS40 INS44 INS44 INS44 INS65 INS39 INS42 INS39 INS42 INS60 INS21 INS21 INS65 INS39 INS42 INS42 INS74 INS59 INS32 INS32 INS42 INS40 INS43 INS43 INS43 INS42 INS14 INS42 INS42 INS40 INS42 INS40 INS42 INS42 INS40 INS42 INS42 INS42 INS42 INS74 INS42 INS43 INS42