HDFS-12069. Ozone: Create a general abstraction for metadata store. Contributed by Weiwei Yang.

+import org.apache.hadoop.utils.BatchOperation;
-import java.util.Map;
-  byte[] get(byte[] key);
+  byte[] get(byte[] key) throws IOException;
-  void put(byte[] key, byte[] value);
+  void put(byte[] key, byte[] value) throws IOException;
-  void delete(byte[] key);
+  void delete(byte[] key) throws IOException;
-   * Performs batch Put and Delete to Metadata DB.
-   * Can be used to do multiple puts and deletes atomically.
-   * @param putList - list of Key/Value to put into DB
-   * @param delList - list of Key to delete from DB
+   * Atomic write a batch of operations.
+   * @param batch
+   * @throws IOException
-  void batchPutDelete(List<Map.Entry<byte[], byte[]>> putList,
-                      List<byte[]> delList) throws IOException;
-
-  /**
-   * Performs a batch Put to Metadata DB.
-   * Can be used to do multiple puts atomically.
-   * @param putList - list of Key/Value to put into DB
-   */
-  void batchPut(List<Map.Entry<byte[], byte[]>> putList) throws IOException;
+  void writeBatch(BatchOperation batch) throws IOException;
-  void deleteKey(byte[] key);
+  void deleteKey(byte[] key) throws IOException;

MOV26 UPD40 INS43 MOV43 INS43 UPD42 MOV43 INS43 INS42 INS42 UPD65 INS43 UPD42 INS42 UPD66 UPD42 UPD42 UPD42 MOV42 DEL66 DEL66 DEL66 DEL43 DEL40 DEL43 DEL39 DEL85 DEL5 DEL39 DEL85 DEL5 DEL74 DEL74 DEL42 DEL43 DEL39 DEL85 DEL5 DEL74 DEL42 DEL44 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL39 DEL42 DEL42 DEL43 DEL40 DEL43 DEL39 DEL85 DEL5 DEL39 DEL85 DEL5 DEL74 DEL74 DEL42 DEL44 DEL31