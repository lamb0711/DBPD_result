HDDS-1620. Implement Volume Write Requests to use Cache and DoubleBuffer. (#884)


+
-    OMMetrics omMetrics = ozoneManager.getOmMetrics();
+    OMMetrics omMetrics = ozoneManager.getMetrics();
+    omMetrics.incNumBucketUpdates();
-    // This will never be null, on a real Ozone cluster. For tests this might
-    // be null. using mockito, to set omMetrics object, but still getting
-    // null. For now added this not null check.
-    //TODO: Removed not null check from here, once tests got fixed.
-    if (omMetrics != null) {
-      omMetrics.incNumBucketUpdates();
-    }
-      if (omMetrics != null) {
-        omMetrics.incNumBucketUpdateFails();
-      }
-      auditLog(auditLogger, buildAuditMessage(OMAction.UPDATE_BUCKET,
-              omBucketArgs.toAuditMap(), ex, userInfo));
+      omMetrics.incNumBucketUpdateFails();
+      auditLog(auditLogger, buildAuditMessage(OMAction.UPDATE_BUCKET,
+              omBucketArgs.toAuditMap(), ex, userInfo));
-      if (omMetrics != null) {
-        omMetrics.incNumBucketUpdateFails();
-      }
+      omMetrics.incNumBucketUpdateFails();

MOV21 MOV21 MOV21 UPD42 MOV21 DEL42 DEL33 DEL27 DEL8 DEL25 DEL42 DEL33 DEL27 DEL8 DEL25 DEL42 DEL33 DEL27 DEL8 DEL25