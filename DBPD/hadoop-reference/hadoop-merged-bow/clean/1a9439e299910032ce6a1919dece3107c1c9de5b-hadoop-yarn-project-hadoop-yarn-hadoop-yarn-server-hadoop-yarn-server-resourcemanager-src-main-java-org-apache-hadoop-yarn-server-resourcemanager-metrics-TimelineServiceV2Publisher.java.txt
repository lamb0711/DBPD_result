YARN-6424. TimelineCollector is not stopped when an app finishes in RM. Contributed by Varun Saxena.

-    getDispatcher().getEventHandler().handle(new TimelineV2PublishEvent(
-        SystemMetricsEventType.PUBLISH_ENTITY, entity, app.getApplicationId()));
+    getDispatcher().getEventHandler().handle(
+        new ApplicationFinishPublishEvent(SystemMetricsEventType.
+            PUBLISH_APPLICATION_FINISHED_ENTITY, entity, app));
-    private RMAppImpl app;
+    private RMApp app;
-        TimelineEntity entity, RMAppImpl app) {
+        TimelineEntity entity, RMApp app) {
-      return app;
+      return (RMAppImpl) app;

UPD43 UPD42 INS43 INS42 INS11 UPD43 UPD40 INS42 MOV43 INS42 UPD42 DEL42 DEL42 DEL32 DEL42