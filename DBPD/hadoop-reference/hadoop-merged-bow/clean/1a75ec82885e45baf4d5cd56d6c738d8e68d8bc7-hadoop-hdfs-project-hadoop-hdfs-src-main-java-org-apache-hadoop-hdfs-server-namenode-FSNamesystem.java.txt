HDFS-2731. Add command to bootstrap the Standby Node's name directories from the Active NameNode. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1299807 13f79535-47bb-0310-9956-ffa450edef68

+    return getNamespaceEditsDirs(conf, true);
+  }
+  
+  public static List<URI> getNamespaceEditsDirs(Configuration conf,
+      boolean includeShared)
+      throws IOException {
-    List<URI> sharedDirs = getSharedEditsDirs(conf);
-
-    // Fail until multiple shared edits directories are supported (HDFS-2782)
-    if (sharedDirs.size() > 1) {
-      throw new IOException(
-          "Multiple shared edits directories are not yet supported");
-    }
-
-    // First add the shared edits dirs. It's critical that the shared dirs
-    // are added first, since JournalSet syncs them in the order they are listed,
-    // and we need to make sure all edits are in place in the shared storage
-    // before they are replicated locally. See HDFS-2874.
-    for (URI dir : sharedDirs) {
-      if (!editsDirs.add(dir)) {
-        LOG.warn("Edits URI " + dir + " listed multiple times in " + 
-            DFS_NAMENODE_SHARED_EDITS_DIR_KEY + ". Ignoring duplicates.");
+    if (includeShared) {
+      List<URI> sharedDirs = getSharedEditsDirs(conf);
+  
+      // Fail until multiple shared edits directories are supported (HDFS-2782)
+      if (sharedDirs.size() > 1) {
+        throw new IOException(
+            "Multiple shared edits directories are not yet supported");
-    }
-    
+  
+      // First add the shared edits dirs. It's critical that the shared dirs
+      // are added first, since JournalSet syncs them in the order they are listed,
+      // and we need to make sure all edits are in place in the shared storage
+      // before they are replicated locally. See HDFS-2874.
+      for (URI dir : sharedDirs) {
+        if (!editsDirs.add(dir)) {
+          LOG.warn("Edits URI " + dir + " listed multiple times in " + 
+              DFS_NAMENODE_SHARED_EDITS_DIR_KEY + ". Ignoring duplicates.");
+        }
+      }
+    }    

INS31 MOV29 INS83 INS83 INS74 INS42 INS44 INS43 INS8 INS44 INS43 INS43 INS43 INS42 INS42 INS41 INS39 INS42 INS25 INS42 INS42 INS42 INS32 INS42 INS8 INS42 INS42 INS9 MOV60 MOV25 MOV70