HADOOP-10848. Cleanup calling of sun.security.krb5.Config.

-import java.lang.reflect.Method;
+import javax.security.auth.kerberos.KerberosPrincipal;
-  public static String getDefaultRealm() 
-      throws ClassNotFoundException, NoSuchMethodException, 
-      IllegalArgumentException, IllegalAccessException, 
+  /**
+   * Return the default realm for this JVM.
+   *
+   * @return The default realm
+   * @throws IllegalArgumentException If the default realm does not exist.
+   * @throws ClassNotFoundException Not thrown. Exists for compatibility.
+   * @throws NoSuchMethodException Not thrown. Exists for compatibility.
+   * @throws IllegalAccessException Not thrown. Exists for compatibility.
+   * @throws InvocationTargetException Not thrown. Exists for compatibility.
+   */
+  public static String getDefaultRealm()
+      throws ClassNotFoundException, NoSuchMethodException,
+      IllegalArgumentException, IllegalAccessException,
-    Object kerbConf;
-    Class<?> classRef;
-    Method getInstanceMethod;
-    Method getDefaultRealmMethod;
-    if (IBM_JAVA) {
-      classRef = Class.forName("com.ibm.security.krb5.internal.Config");
-    } else {
-      classRef = Class.forName("sun.security.krb5.Config");
-    }
-    getInstanceMethod = classRef.getMethod("getInstance", new Class[0]);
-    kerbConf = getInstanceMethod.invoke(classRef, new Object[0]);
-    getDefaultRealmMethod = classRef.getDeclaredMethod("getDefaultRealm",
-         new Class[0]);
-    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);
+    // Any name is okay.
+    return new KerberosPrincipal("tmp", 1).getRealm();
+  /**
+   * Return the default realm for this JVM.
+   * If the default realm does not exist, this method returns null.
+   *
+   * @return The default realm
+   */
-    String realmString = null;
-      realmString = getDefaultRealm();
-    } catch (RuntimeException rte) {
-      //silently catch everything
+      return getDefaultRealm();
-      //silently return null
+      //silently catch everything
+      return null;
-    return realmString;

MOV26 UPD40 INS29 INS83 INS83 INS42 INS8 INS29 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS41 INS65 INS65 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS32 INS66 INS66 INS66 INS14 UPD42 MOV42 INS41 INS43 INS45 INS34 MOV32 INS41 UPD42 MOV42 INS33 DEL83 DEL83 DEL42 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL43 DEL76 DEL74 DEL42 DEL59 DEL60 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL45 DEL32 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL45 DEL32 DEL7 DEL21 DEL8 DEL25 DEL42 DEL42 DEL42 DEL45 DEL43 DEL85 DEL5 DEL34 DEL3 DEL32 DEL7 DEL21 DEL42 DEL42 DEL42 DEL42 DEL42 DEL43 DEL85 DEL5 DEL34 DEL3 DEL32 DEL7 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL43 DEL85 DEL5 DEL34 DEL3 DEL32 DEL7 DEL21 DEL42 DEL43 DEL42 DEL42 DEL42 DEL43 DEL85 DEL5 DEL34 DEL3 DEL32 DEL11 DEL41 DEL8 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL42 DEL7 DEL21 DEL42 DEL43 DEL42 DEL44 DEL8 DEL12 DEL42 DEL41