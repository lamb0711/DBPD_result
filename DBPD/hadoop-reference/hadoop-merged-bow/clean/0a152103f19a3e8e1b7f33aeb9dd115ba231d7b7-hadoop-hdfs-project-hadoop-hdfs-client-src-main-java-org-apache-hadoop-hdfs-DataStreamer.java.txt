HDFS-3702. Add an option for NOT writing the blocks locally if there is a datanode on the same box as the client. (Contributed by Lei (Eddy) Xu)

+import java.util.EnumSet;
+  private final EnumSet<AddBlockFlag> addBlockFlags;
-                       boolean isAppend, String[] favoredNodes) {
+                       boolean isAppend, String[] favoredNodes,
+                       EnumSet<AddBlockFlag> flags) {
-
+    this.addBlockFlags = flags;
-               ByteArrayManager byteArrayManage, String[] favoredNodes) {
+               ByteArrayManager byteArrayManage, String[] favoredNodes,
+               EnumSet<AddBlockFlag> flags) {
-        byteArrayManage, false, favoredNodes);
+        byteArrayManage, false, favoredNodes, flags);
-        byteArrayManage, true, null);
+        byteArrayManage, true, null, null);
-        stat.getFileId(), favoredNodes);
+        stat.getFileId(), favoredNodes, addBlockFlags);

INS26 INS40 INS23 INS83 INS83 INS74 INS59 INS44 INS44 INS43 INS43 INS42 INS74 INS42 INS21 INS74 INS42 INS42 INS42 INS43 INS43 INS7 INS43 INS43 INS42 INS33 INS42 INS42 INS22 INS42 INS42 INS42 INS42 INS52 INS42