HDFS-6474. Namenode needs to get the actual keys and iv from the KeyProvider. (wang)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/fs-encryption@1609833 13f79535-47bb-0310-9956-ffa450edef68

-  private final byte[] key;
+  private final byte[] edek;
+  private final String ezKeyVersionName;
-  public FileEncryptionInfo(CipherSuite suite, byte[] key, byte[] iv) {
+  /**
+   * Create a FileEncryptionInfo.
+   *
+   * @param suite CipherSuite used to encrypt the file
+   * @param edek encrypted data encryption key (EDEK) of the file
+   * @param iv initialization vector (IV) used to encrypt the file
+   * @param ezKeyVersionName name of the KeyVersion used to encrypt the
+   *                         encrypted data encryption key.
+   */
+  public FileEncryptionInfo(final CipherSuite suite, final byte[] edek,
+      final byte[] iv, final String ezKeyVersionName) {
-    checkNotNull(key);
+    checkNotNull(edek);
-    checkArgument(key.length == suite.getAlgorithmBlockSize(),
+    checkNotNull(ezKeyVersionName);
+    checkArgument(edek.length == suite.getAlgorithmBlockSize(),
-    this.key = key;
+    this.edek = edek;
+    this.ezKeyVersionName = ezKeyVersionName;
-   * @return encrypted data encryption key for the file
+   * @return encrypted data encryption key (EDEK) for the file
-    return key;
+    return edek;
-   * @return initialization vector for the cipher used to encrypt the file
+   * @return initialization vector (IV) for the cipher used to encrypt the file
+  /**
+   * @return name of the encryption zone KeyVersion used to encrypt the
+   * encrypted data encryption key (EDEK).
+   */
+  public String getEzKeyVersionName() { return ezKeyVersionName; }
+
-    builder.append(", key: " + Hex.encodeHexString(key));
+    builder.append(", edek: " + Hex.encodeHexString(edek));
+    builder.append(", ezKeyVersionName: " + ezKeyVersionName);

INS23 MOV44 INS31 INS83 INS83 INS43 INS59 INS29 INS44 INS29 INS83 INS43 INS42 INS8 UPD42 INS42 INS42 INS65 INS65 INS65 INS65 INS65 INS83 INS83 UPD42 INS83 UPD42 INS83 INS43 INS42 INS21 INS21 INS65 INS42 INS41 INS21 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS32 INS7 UPD66 UPD42 UPD66 INS66 INS66 INS42 INS32 UPD42 INS42 INS42 UPD42 INS22 INS42 INS42 INS42 INS27 UPD40 UPD42 INS52 INS42 UPD45 INS45 INS42 UPD42