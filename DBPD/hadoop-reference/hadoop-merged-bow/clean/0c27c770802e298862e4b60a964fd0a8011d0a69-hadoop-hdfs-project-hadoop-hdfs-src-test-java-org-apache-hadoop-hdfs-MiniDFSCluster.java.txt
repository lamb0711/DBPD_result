HDFS-3658. Fix bugs in TestDFSClientRetries and add more tests.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1372707 13f79535-47bb-0310-9956-ffa450edef68

+  public static final String  DFS_NAMENODE_SAFEMODE_EXTENSION_TESTING_KEY
+      = DFS_NAMENODE_SAFEMODE_EXTENSION_KEY + ".testing";
-    conf.setInt(DFS_NAMENODE_SAFEMODE_EXTENSION_KEY, 0);
+    int safemodeExtension = conf.getInt(
+        DFS_NAMENODE_SAFEMODE_EXTENSION_TESTING_KEY, 0);
+    conf.setInt(DFS_NAMENODE_SAFEMODE_EXTENSION_KEY, safemodeExtension);

INS23 INS83 INS83 INS83 INS43 INS59 INS42 INS42 INS27 INS60 INS21 INS42 INS45 INS39 INS59 INS32 INS42 INS32 INS42 INS42 INS42 INS42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV34 DEL32 DEL21