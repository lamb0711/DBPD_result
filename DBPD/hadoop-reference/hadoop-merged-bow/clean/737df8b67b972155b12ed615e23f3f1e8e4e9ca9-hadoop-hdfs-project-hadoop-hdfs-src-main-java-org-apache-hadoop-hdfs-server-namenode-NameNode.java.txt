HDFS-2716. Configuration needs to allow different dfs.http.addresses for each HA NN. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1226020 13f79535-47bb-0310-9956-ffa450edef68

+    String namenodeId = HAUtil.getNameNodeId(conf, nsId);
-      initializeGenericKeys(conf, nsId);
+      initializeGenericKeys(conf, nsId, namenodeId);
-   * @param nameserviceId name service Id
+   * @param nameserviceId name service Id (to distinguish federated NNs)
+   * @param namenodeId the namenode ID (to distinguish HA NNs)
-  public static void initializeGenericKeys(Configuration conf, String
-      nameserviceId) {
-    String namenodeId = HAUtil.getNameNodeId(conf, nameserviceId);
+  public static void initializeGenericKeys(Configuration conf,
+      String nameserviceId, String namenodeId) {
+    if (nameserviceId != null) {
+      conf.set(DFS_FEDERATION_NAMESERVICE_ID, nameserviceId);
+    }
+    if (namenodeId != null) {
+      conf.set(DFS_HA_NAMENODE_ID_KEY, namenodeId);
+    }
+    

INS44 INS60 INS65 MOV43 INS42 INS25 INS25 INS43 INS59 UPD66 INS42 INS66 INS27 INS8 INS27 INS8 INS42 INS42 INS32 INS42 INS33 INS21 INS42 INS33 INS21 INS42 INS42 INS42 INS42 INS32 INS32 INS42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV42 INS42 INS42 INS42 INS42 DEL42 DEL32 DEL59 DEL60