Revert HDFS-2922 via svn merge -c -1242572

The patch broke a lot of unit tests in the nightly build. Will recommit after it is fixed.



git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1242874 13f79535-47bb-0310-9956-ffa450edef68

-    namesystem.checkOperation(OperationCategory.READ);
+    // TODO(HA): decide on OperationCategory for this
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this
-  public long getTransactionID()  throws IOException {
-    namesystem.checkOperation(OperationCategory.READ);
+  public long getTransactionID() {
+    // TODO:HA decide on OperationCategory for this
-    namesystem.checkOperation(OperationCategory.READ);
+    // TODO:HA decide on OperationCategory for this
-    namesystem.checkOperation(OperationCategory.WRITE);
+    // TODO:HA decide on OperationCategory for this
-    namesystem.checkOperation(OperationCategory.READ);
+    // TODO:HA decide on OperationCategory for this
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this
-   * @param bandwidth Balancer bandwidth in bytes per second for all datanodes.
+   * @param bandwidth Blanacer bandwidth in bytes per second for all datanodes.
-    // NB: not checking OperationCategory so this works on a standby
+    // TODO:HA decide on OperationCategory for this

UPD66 DEL42 DEL42 DEL40 DEL32 DEL21 DEL42 DEL43 DEL42 DEL42 DEL40 DEL32 DEL21 DEL42 DEL42 DEL40 DEL32 DEL21 DEL42 DEL42 DEL40 DEL32 DEL21 DEL42 DEL42 DEL40 DEL32 DEL21