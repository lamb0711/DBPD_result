HDFS-4563. Update namespace/diskspace usage after deleting snapshots.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1455396 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.protocol.NSQuotaExceededException;
+import org.apache.hadoop.hdfs.protocol.QuotaExceededException;
+import org.apache.hadoop.hdfs.server.namenode.Quota;
-      throws NSQuotaExceededException {
+      throws QuotaExceededException {
-  public int cleanSubtree(final Snapshot snapshot, Snapshot prior, 
+  public Quota.Counts cleanSubtree(final Snapshot snapshot, Snapshot prior,
-          throws NSQuotaExceededException {
+      throws QuotaExceededException {
+      return Quota.Counts.newInstance();
-    return prior == null ? 1 : 0;

INS26 UPD40 INS40 UPD43 INS43 UPD43 UPD42 INS40 UPD42 INS41 INS32 INS40 INS42 DEL39 DEL42 DEL33 DEL27 DEL34 DEL34 DEL16 DEL41