HDFS-15036. Active NameNode should not silently fail the image transfer. Contributed by Chen Liang.

+              // Since the goal of the check below is to prevent overly
+              // frequent upload from Standby, the check should only be done
+              // for the periodical upload from Standby. For the other
+              // scenarios such as rollback image and ckpt file, they skip
+              // this check, see HDFS-15036 for more info.
+                  NameNodeFile.IMAGE.equals(parsedParams.getNameNodeFile()) &&

INS32 INS40 INS42 INS32 INS42 INS42