HDFS-2143. Federation: In cluster web console, add link to namenode page that displays live and dead datanodes. Contributed by Ravi Prakash.



git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1147964 13f79535-47bb-0310-9956-ffa450edef68

-        toXmlItemBlock(doc, "Live Datanode (Decommissioned)",
-            Integer.toString(nn.liveDatanodeCount) + " ("
-                + Integer.toString(nn.liveDecomCount) + ")");
-        toXmlItemBlock(doc, "Dead Datanode (Decommissioned)",
-            Integer.toString(nn.deadDatanodeCount) + " ("
-                + Integer.toString(nn.deadDecomCount) + ")");
+        toXmlItemBlockWithLink(doc, nn.liveDatanodeCount + " (" +
+          nn.liveDecomCount + ")", nn.httpAddress+"/dfsnodelist.jsp?whatNodes=LIVE",
+          "Live Datanode (Decommissioned)");
+        toXmlItemBlockWithLink(doc, nn.deadDatanodeCount + " (" +
+          nn.deadDecomCount + ")", nn.httpAddress+"/dfsnodelist.jsp?whatNodes=DEAD"
+          , "Dead Datanode (Decommissioned)");
-  private static void toXmlItemBlockWithLink(XMLOutputter doc, String host,
-      String url, String nodetag) throws IOException {
+  private static void toXmlItemBlockWithLink(XMLOutputter doc, String value,
+      String url, String label) throws IOException {
-    doc.attribute("label", nodetag);
-    doc.attribute("value", host);
+    doc.attribute("label", label);
+    doc.attribute("value", value);

MOV44 MOV44 UPD42 UPD42 UPD42 UPD42 UPD42 INS27 INS45 UPD42 INS27 INS45 INS40 INS40 INS40 INS45 INS40 INS40 INS40 INS45 DEL45 DEL42 DEL42 DEL40 DEL32 DEL42 DEL42 DEL40 DEL32 DEL45 DEL42 DEL42 DEL40 DEL32 DEL42 DEL42 DEL40 DEL32