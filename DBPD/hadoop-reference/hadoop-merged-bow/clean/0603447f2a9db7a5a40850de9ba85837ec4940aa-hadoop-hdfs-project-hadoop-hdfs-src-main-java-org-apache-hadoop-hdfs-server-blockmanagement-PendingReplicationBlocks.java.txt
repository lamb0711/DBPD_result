HDFS-4072. On file deletion remove corresponding blocks pending replications. Contributed by Jing Zhao.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1399965 13f79535-47bb-0310-9956-ffa450edef68

-  void add(Block block, int numReplicas) {
+  void increment(Block block, int numReplicas) {
-  void remove(Block block) {
+  void decrement(Block block) {
+  /**
+   * Remove the record about the given block from pendingReplications.
+   * @param block The given block whose pending replication requests need to be
+   *              removed
+   */
+  void remove(Block block) {
+    synchronized (pendingReplications) {
+      pendingReplications.remove(block);
+    }
+  }

INS31 UPD42 UPD42 INS29 INS39 INS42 INS44 INS8 INS65 INS65 INS43 INS42 INS51 INS66 INS42 INS66 INS66 INS42 INS42 INS8 INS21 INS32 INS42 INS42 INS42