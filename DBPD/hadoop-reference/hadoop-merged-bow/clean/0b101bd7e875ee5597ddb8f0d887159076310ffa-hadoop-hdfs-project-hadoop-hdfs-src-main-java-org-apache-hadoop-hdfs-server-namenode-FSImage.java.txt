HDFS-4434. Reverting change r1470089 that merges trunk to HDFS-2802.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1470194 13f79535-47bb-0310-9956-ffa450edef68

-      updateCountForQuota(target.dir, target.dir.rootDir);   
+      updateCountForQuota(target.dir.rootDir);   
-  static void updateCountForQuota(FSDirectory fsd, 
-      INodeDirectoryWithQuota root) {
-    updateCountForQuotaRecursively(fsd, root, new Quota.Counts());
+  static void updateCountForQuota(INodeDirectoryWithQuota root) {
+    updateCountForQuotaRecursively(root, new Quota.Counts());
-  private static void updateCountForQuotaRecursively(FSDirectory fsd,
-      INodeDirectory dir, Quota.Counts counts) {
+  private static void updateCountForQuotaRecursively(INodeDirectory dir,
+      Quota.Counts counts) {
-      fsd.addToInodeMapUnprotected(child);
-        updateCountForQuotaRecursively(fsd, child.asDirectory(), counts);
+        updateCountForQuotaRecursively(child.asDirectory(), counts);

DEL40 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL32 DEL21 DEL42