HDDS-290. putKey is failing with KEY_ALLOCATION_ERROR. Contributed by Xiaoyu Yao.

+import static org.apache.hadoop.ozone.OzoneConfigKeys.OZONE_REPLICATION_DEFAULT;
+import static org.apache.hadoop.ozone.OzoneConfigKeys.OZONE_REPLICATION_TYPE_DEFAULT;
-    ReplicationFactor replicationFactor = ReplicationFactor.valueOf(
-        conf.getInt(OZONE_REPLICATION, ReplicationFactor.THREE.getValue()));
-    ReplicationType replicationType = ReplicationType.valueOf(
-        conf.get(OZONE_REPLICATION_TYPE, ReplicationType.RATIS.toString()));
+    ReplicationFactor replicationFactor;
+    if (cmd.hasOption(Shell.REPLICATION_FACTOR)) {
+      replicationFactor = ReplicationFactor.valueOf(Integer.parseInt(cmd
+          .getOptionValue(Shell.REPLICATION_FACTOR)));
+    } else {
+      replicationFactor = ReplicationFactor.valueOf(
+          conf.getInt(OZONE_REPLICATION, OZONE_REPLICATION_DEFAULT));
+    }
+    ReplicationType replicationType = ReplicationType.valueOf(
+        conf.get(OZONE_REPLICATION_TYPE, OZONE_REPLICATION_TYPE_DEFAULT));

INS26 INS26 INS40 INS40 INS60 INS25 MOV43 INS59 INS32 INS8 INS8 MOV42 INS42 INS42 INS40 INS21 INS21 INS7 INS7 INS42 INS32 INS42 INS32 UPD42 MOV42 INS42 INS42 INS32 MOV42 MOV42 MOV32 INS42 INS42 INS32 UPD42 MOV42 INS42 INS42 INS40 DEL40 DEL32 DEL32 DEL59 DEL60 DEL40 DEL32