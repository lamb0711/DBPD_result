YARN-5270. Solve miscellaneous issues caused by YARN-4844. Contributed by Wangda Tan

-    public void setMemory(long memory) {
+    public void setMemorySize(long memory) {
+      throw new RuntimeException("NONE cannot be modified!");
+    }
+
+    @Override
+    @SuppressWarnings("deprecation")
+    public void setMemory(int memory) {
-    public long getVirtualCoresSize() {
-      return 0;
-    }
-
-    @Override
-    public void setVirtualCores(long cores) {
+    public void setVirtualCores(int cores) {
-    public void setMemory(long memory) {
+    @SuppressWarnings("deprecation")
+    public void setMemory(int memory) {
+      throw new RuntimeException("UNBOUNDED cannot be modified!");
+    }
+
+    @Override
+    public void setMemorySize(long memory) {
-    public long getVirtualCoresSize() {
-      return Long.MAX_VALUE;
-    }
-
-    @Override
-    public void setVirtualCores(long cores) {
+    public void setVirtualCores(int cores) {
-        diff = Long.MAX_VALUE - o.getVirtualCoresSize();
+        diff = Integer.MAX_VALUE - o.getVirtualCores();
+  public static Resource createResource(int memory) {
+    return createResource(memory, (memory > 0) ? 1 : 0);
+  }
+
+  public static Resource createResource(int memory, int cores) {
+    Resource resource = Records.newRecord(Resource.class);
+    resource.setMemorySize(memory);
+    resource.setVirtualCores(cores);
+    return resource;
+  }
+
-  public static Resource createResource(long memory, long cores) {
+  public static Resource createResource(long memory, int cores) {
-    resource.setMemory(memory);
+    resource.setMemorySize(memory);
-    lhs.setMemory(lhs.getMemorySize() + rhs.getMemorySize());
+    lhs.setMemorySize(lhs.getMemorySize() + rhs.getMemorySize());
-    lhs.setMemory(lhs.getMemorySize() - rhs.getMemorySize());
+    lhs.setMemorySize(lhs.getMemorySize() - rhs.getMemorySize());
-    lhs.setMemory((int)(lhs.getMemorySize() * by));
+    lhs.setMemorySize((long)(lhs.getMemorySize() * by));
-    lhs.setMemory(lhs.getMemorySize() + (int)(rhs.getMemorySize() * by));
+    lhs.setMemorySize(lhs.getMemorySize() + (long)(rhs.getMemorySize() * by));
-    out.setMemory((int)(lhs.getMemorySize() * by));
+    out.setMemorySize((long)(lhs.getMemorySize() * by));

MOV31 INS31 INS31 INS83 INS83 MOV43 INS42 INS44 INS8 INS43 INS44 INS83 INS83 INS43 INS42 MOV44 INS44 INS8 INS39 INS42 INS41 INS42 INS39 INS42 UPD39 INS42 INS39 INS42 INS60 INS21 INS21 INS41 MOV31 MOV31 INS32 INS43 INS59 INS32 INS32 INS42 INS42 INS42 INS16 UPD42 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 INS79 UPD39 UPD42 INS44 INS79 INS44 INS8 UPD39 UPD42 MOV44 MOV8 MOV8 INS36 INS34 INS34 INS42 INS42 INS57 UPD39 UPD39 INS42 INS45 INS39 INS42 INS53 UPD39 INS42 INS45 INS39 INS42 INS53 UPD39 INS27 INS43 UPD39 INS14 INS14 INS42 INS34 INS42 INS43 INS45 INS43 INS45 INS42 INS42 UPD40 UPD42 DEL34 DEL41 DEL40 DEL41 DEL8