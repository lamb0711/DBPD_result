HDFS-6281. Provide option to use the NFS Gateway without having to use the Hadoop portmapper. Contributed by Aaron T. Myers.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1589914 13f79535-47bb-0310-9956-ffa450edef68

+import java.net.DatagramSocket;
-    super(new RpcProgramNfs3(conf), conf);
-    mountd = new Mountd(conf);
+    this(conf, null);
+  }
+  
+  public Nfs3(Configuration conf, DatagramSocket registrationSocket) throws IOException {
+    super(new RpcProgramNfs3(conf, registrationSocket), conf);
+    mountd = new Mountd(conf, registrationSocket);
-  public static void main(String[] args) throws IOException {
+  static void startService(String[] args,
+      DatagramSocket registrationSocket) throws IOException {
-    final Nfs3 nfsServer = new Nfs3(new Configuration());
+    final Nfs3 nfsServer = new Nfs3(new Configuration(), registrationSocket);
+  
+  public static void main(String[] args) throws IOException {
+    startService(args, null);
+  }

INS26 INS40 INS31 INS31 INS83 INS42 INS44 INS43 INS8 INS44 UPD42 INS44 INS83 INS83 INS39 INS42 INS44 INS43 INS8 INS43 INS42 INS42 INS17 INS43 INS42 INS43 INS42 INS5 INS42 INS42 INS21 INS42 INS42 INS33 INS42 INS42 INS43 INS85 INS32 INS42 INS42 INS42 INS42 INS33 INS42 INS42 DEL83