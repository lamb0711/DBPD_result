MAPREDUCE-4838. Add additional fields like Locality, Avataar to the JobHistory logs. Contributed by Zhijie Shen


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1439714 13f79535-47bb-0310-9956-ffa450edef68

+   * @param locality The locality of the task attempt
+   * @param avataar The avataar of the task attempt
-      int httpPort, int shufflePort, ContainerId containerId) {
+      int httpPort, int shufflePort, ContainerId containerId,
+      String locality, String avataar) {
+    if (locality != null) {
+      datum.locality = new Utf8(locality);
+    }
+    if (avataar != null) {
+      datum.avataar = new Utf8(avataar);
+    }
-      long startTime, String trackerName, int httpPort, int shufflePort) {
+      long startTime, String trackerName, int httpPort, int shufflePort,
+      String locality, String avataar) {
-        ConverterUtils.toContainerId("container_-1_-1_-1_-1"));
+        ConverterUtils.toContainerId("container_-1_-1_-1_-1"), locality, avataar);
+  /** Get the locality */
+  public String getLocality() {
+    if (datum.locality != null) {
+      return datum.locality.toString();
+    }
+    return null;
+  }
+  /** Get the avataar */
+  public String getAvataar() {
+    if (datum.avataar != null) {
+      return datum.avataar.toString();
+    }
+    return null;
+  }
+

INS31 INS31 INS44 INS44 INS44 INS44 INS29 INS83 INS43 INS42 INS8 INS29 INS83 INS43 INS42 INS8 INS65 INS65 INS43 INS42 INS43 INS42 INS25 INS25 INS43 INS42 INS43 INS42 INS65 INS42 INS25 INS41 INS65 INS42 INS25 INS41 INS42 INS66 INS42 INS66 INS42 INS42 INS27 INS8 INS27 INS8 INS42 INS42 INS42 INS42 INS66 INS27 INS8 INS33 INS66 INS27 INS8 INS33 INS42 INS33 INS21 INS42 INS33 INS21 INS40 INS33 INS41 INS40 INS33 INS41 INS7 INS7 INS32 INS32 INS40 INS14 INS40 INS14 INS40 INS42 INS40 INS42 INS43 INS42 INS43 INS42 INS42 INS42