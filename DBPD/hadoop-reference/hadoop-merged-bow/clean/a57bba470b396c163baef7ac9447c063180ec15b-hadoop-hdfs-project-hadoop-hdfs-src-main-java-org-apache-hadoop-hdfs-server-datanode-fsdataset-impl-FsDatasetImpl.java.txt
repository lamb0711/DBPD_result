Merge branch 'trunk' into HADOOP-12756

-  private final AutoCloseableLock datasetLock;
+  @VisibleForTesting
+  final AutoCloseableLock datasetLock;
-    volumeMap = new ReplicaMap(this);
+    volumeMap = new ReplicaMap(datasetLock);
-    ReplicaMap tempVolumeMap = new ReplicaMap(this);
+    ReplicaMap tempVolumeMap = new ReplicaMap(datasetLock);
-    final ReplicaMap tempVolumeMap = new ReplicaMap(fsVolume);
+    final ReplicaMap tempVolumeMap = new ReplicaMap(new AutoCloseableLock());
-        synchronized (map.getMutex()) {
+        try (AutoCloseableLock lock = map.getLock().acquire()) {

INS78 INS42 INS42 INS42 INS14 INS43 INS54 INS42 INS58 MOV8 INS43 INS59 INS42 INS42 INS32 INS32 INS42 MOV42 UPD42 MOV42 DEL83 DEL52 DEL52 DEL42 DEL32 DEL51