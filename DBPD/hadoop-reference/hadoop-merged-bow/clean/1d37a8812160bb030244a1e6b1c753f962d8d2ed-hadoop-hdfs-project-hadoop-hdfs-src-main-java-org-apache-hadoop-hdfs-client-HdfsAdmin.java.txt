HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-   * @param path
-   *          Directory to create the ErasureCoding zone
-   * @param schema
-   *          ECSchema for the zone. If not specified default will be used.
-   * @param cellSize
-   *          Cellsize for the striped ErasureCoding
+   * @param path Directory to create the ErasureCoding zone
+   * @param ecPolicy erasure coding policy for the zone. If null, the default will be used.
-  public void createErasureCodingZone(final Path path, final ECSchema schema,
-      final int cellSize) throws IOException {
-    dfs.createErasureCodingZone(path, schema, cellSize);
+  public void createErasureCodingZone(final Path path,
+      final ErasureCodingPolicy ecPolicy) throws IOException {
+    dfs.createErasureCodingZone(path, ecPolicy);
-   * Get the ErasureCoding schemas supported.
+   * Get the ErasureCoding policies supported.
-   * @return ECSchemas
-  public ECSchema[] getECSchemas() throws IOException {
-    return dfs.getClient().getECSchemas();
+  public ErasureCodingPolicy[] getErasureCodingPolicies() throws IOException {
+    return dfs.getClient().getErasureCodingPolicies();

UPD40 UPD5 UPD42 UPD43 UPD42 UPD43 UPD66 UPD42 UPD66 UPD42 UPD66 UPD42 UPD42 UPD42 DEL42 DEL66 DEL65 DEL83 DEL39 DEL42 DEL44 DEL42 DEL66 DEL65