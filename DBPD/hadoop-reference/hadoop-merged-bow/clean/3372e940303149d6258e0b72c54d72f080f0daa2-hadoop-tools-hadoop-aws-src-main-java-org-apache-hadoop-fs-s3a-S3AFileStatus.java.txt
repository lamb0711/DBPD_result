HADOOP-12774. s3a should use UGI.getCurrentUser.getShortname() for username. Contributed by Steve Loughran.

-  // Directories
-  public S3AFileStatus(boolean isdir, boolean isemptydir, Path path) {
-    super(0, isdir, 1, 0, 0, path);
+  /**
+   * Create a directory status.
+   * @param isemptydir is this an empty directory?
+   * @param path the path
+   * @param owner the owner
+   */
+  public S3AFileStatus(boolean isemptydir,
+      Path path,
+      String owner) {
+    super(0, true, 1, 0, 0, path);
+    setOwner(owner);
+    setGroup(owner);
-  // Files
+  /**
+   * A simple file.
+   * @param length file length
+   * @param modification_time mod time
+   * @param path path
+   * @param blockSize block size
+   * @param owner owner
+   */
-      long blockSize) {
+      long blockSize, String owner) {
+    setOwner(owner);
+    setGroup(owner);
-  @Override
-  public String getOwner() {
-    return System.getProperty("user.name");
-  }
-

INS31 INS29 MOV83 MOV42 MOV44 MOV44 MOV44 INS8 INS29 INS44 INS65 INS65 INS65 INS65 INS43 UPD42 MOV46 MOV21 INS21 INS21 INS65 INS65 INS65 INS65 INS65 INS65 MOV43 INS42 INS21 INS21 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS9 INS32 INS32 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS32 INS32 INS42 INS42 UPD42 MOV42 UPD42 MOV42 INS42 INS42 INS42 INS42 DEL39 DEL42 DEL8 DEL31 DEL42 DEL78 DEL83 DEL42 DEL45 DEL32 DEL41 DEL8 DEL31