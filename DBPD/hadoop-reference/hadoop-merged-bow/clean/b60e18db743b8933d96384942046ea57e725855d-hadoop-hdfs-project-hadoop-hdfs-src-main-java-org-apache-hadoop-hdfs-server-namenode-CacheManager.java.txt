HDFS-5314.  Do not expose CachePool type in AddCachePoolOp (Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1530073 13f79535-47bb-0310-9956-ffa450edef68

-  public synchronized CachePool addCachePool(CachePoolInfo info)
+  public synchronized CachePoolInfo addCachePool(CachePoolInfo info)
-    CachePool cachePool = new CachePool(poolName,
-      info.getOwnerName(), info.getGroupName(), info.getMode(),
-      info.getWeight());
-    unprotectedAddCachePool(cachePool);
-    return cachePool;
+    pool = CachePool.createFromInfoAndDefaults(info);
+    cachePools.put(pool.getPoolName(), pool);
+    return pool.getInfo(true);
-  void unprotectedAddCachePool(CachePool pool) {
+  void unprotectedAddCachePool(CachePoolInfo info) {
+    CachePool pool = CachePool.createFromInfo(info);
-      pool.writeTo(out);
+      pool.getInfo(true).writeTo(out);
-      CachePool pool = CachePool.readFrom(in);
-      unprotectedAddCachePool(pool);
+      CachePoolInfo info = CachePoolInfo.readFrom(in);
+      unprotectedAddCachePool(info);

UPD43 UPD42 INS21 INS21 INS41 UPD43 UPD42 INS60 INS7 INS32 INS32 UPD42 MOV43 INS59 INS42 INS32 UPD42 MOV42 UPD42 MOV42 INS32 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS9 INS42 INS32 INS42 INS42 MOV42 UPD42 MOV42 UPD42 MOV42 INS42 INS42 INS42 UPD43 INS32 UPD42 UPD42 UPD42 MOV42 INS42 INS9 UPD42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL32 DEL32 DEL42 DEL32 DEL14 DEL59 DEL60 DEL32 DEL21 DEL42 DEL41