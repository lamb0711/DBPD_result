YARN-2827. Fixed bugs in "yarn queue" CLI. Contributed by Wangda Tan.

-    int exitCode = -1;
-    if (args.length > 0) {
-      opts.addOption(STATUS_CMD, true,
-          "List queue information about given queue.");
-      opts.addOption(HELP_CMD, false, "Displays help for all commands.");
-      opts.getOption(STATUS_CMD).setArgName("Queue Name");
-    } else {
-      syserr.println("Invalid Command usage. Command must start with 'queue'");
-      return exitCode;
-    }
+
+    opts.addOption(STATUS_CMD, true,
+        "List queue information about given queue.");
+    opts.addOption(HELP_CMD, false, "Displays help for all commands.");
+    opts.getOption(STATUS_CMD).setArgName("Queue Name");
-      return exitCode;
+      return -1;
-      if (args.length != 3) {
+      if (args.length != 2) {
-        return exitCode;
+        return -1;
-      listQueue(cliParser.getOptionValue(STATUS_CMD));
+      return listQueue(cliParser.getOptionValue(STATUS_CMD));
+      return -1;
-    return 0;
-  private void listQueue(String queueName) throws YarnException, IOException {
+  private int listQueue(String queueName) throws YarnException, IOException {
+    int rc;
-    writer.println("Queue Information : ");
-    printQueueInfo(writer, queueInfo);
+    if (queueInfo != null) {
+      writer.println("Queue Information : ");
+      printQueueInfo(writer, queueInfo);
+      rc = 0;
+    } else {
+      writer.println("Cannot get queue from RM by queueName = " + queueName
+          + ", please check.");
+      rc = -1;
+    }
+    return rc;

UPD39 MOV21 MOV21 MOV21 INS60 INS25 INS41 INS39 INS59 INS27 INS8 INS8 INS42 INS41 INS42 INS42 INS33 MOV21 MOV21 INS21 INS21 INS21 MOV32 INS41 INS7 INS32 INS7 INS38 UPD34 INS38 INS42 INS34 INS42 INS42 INS27 INS42 MOV38 INS34 INS38 INS34 INS45 INS42 INS45 INS34 DEL39 DEL42 DEL59 DEL60 DEL40 DEL34 DEL27 DEL8 DEL42 DEL42 DEL45 DEL32 DEL21 DEL42 DEL41 DEL8 DEL25 DEL42 DEL42 DEL21 DEL34 DEL41