Fix issue with NN/DN re-registration.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1358347 13f79535-47bb-0310-9956-ffa450edef68

+import com.google.common.annotations.VisibleForTesting;
+  
+  /*
+   * This is just a wrapper around callGetBlockLocations, but non-static so that
+   * we can stub it out for tests.
+   */
+  @VisibleForTesting
+  public LocatedBlocks getLocatedBlocks(String src, long start, long length)
+      throws IOException {
+    return callGetBlockLocations(namenode, src, start, length);
+  }
-    LocatedBlocks blocks = callGetBlockLocations(namenode, src, start, length);
+    LocatedBlocks blocks = getLocatedBlocks(src, start, length);

INS26 INS40 INS31 INS78 INS83 MOV43 INS42 INS44 INS44 INS44 INS43 MOV8 INS8 INS42 INS43 INS42 INS39 INS42 INS39 INS42 INS42 INS41 INS60 MOV41 INS42 MOV32 INS43 INS59 INS42 INS42 INS32 INS42 INS42 INS42 INS42 DEL42 DEL59 DEL60