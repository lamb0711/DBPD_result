HDFS-6851. Refactor EncryptionZoneWithId and EncryptionZone. (clamb via wang)

-import org.apache.hadoop.fs.RemoteIterator;
+import org.apache.hadoop.fs.BatchedRemoteIterator;
-public class EncryptionZoneIterator implements RemoteIterator<EncryptionZone> {
+public class EncryptionZoneIterator
+    extends BatchedRemoteIterator<Long, EncryptionZone> {
-  private final EncryptionZoneWithIdIterator iterator;
+  private final ClientProtocol namenode;
-    iterator = new EncryptionZoneWithIdIterator(namenode);
+    super(Long.valueOf(0));
+    this.namenode = namenode;
-  public boolean hasNext() throws IOException {
-    return iterator.hasNext();
+  public BatchedEntries<EncryptionZone> makeRequest(Long prevId)
+      throws IOException {
+    return namenode.listEncryptionZones(prevId);
-  public EncryptionZone next() throws IOException {
-    EncryptionZoneWithId ezwi = iterator.next();
-    return ezwi.toEncryptionZone();
+  public Long elementToPrevKey(EncryptionZone entry) {
+    return entry.getId();

UPD40 INS74 INS43 INS43 MOV43 UPD43 UPD74 MOV74 UPD42 INS44 MOV43 INS43 INS42 INS44 INS8 INS42 INS42 UPD42 UPD42 INS46 UPD43 INS43 INS42 INS42 INS43 INS42 MOV41 INS32 UPD42 UPD42 MOV42 UPD42 MOV42 INS42 INS42 INS34 INS22 INS42 UPD42 UPD42 INS42 UPD42 UPD42 INS52 INS42 DEL42 DEL42 DEL43 DEL42 DEL14 DEL39 DEL43 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL8