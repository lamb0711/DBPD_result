YARN-9293. Optimize MockAMLauncher event handling. Contributed by Bibin A Chundatt.

-  Map<String, AMSimulator> amMap;
+  private Map<ApplicationId, AMSimulator> appIdAMSim;
+
-      Map<String, AMSimulator> amMap) {
+      Map<ApplicationId, AMSimulator> appIdAMSim) {
-    this.amMap = amMap;
+    this.appIdAMSim = appIdAMSim;
-      for (AMSimulator ams : amMap.values()) {
-        if (ams.getApplicationId() != null && ams.getApplicationId().equals(
-            appId)) {
-          try {
-            Container amContainer = event.getAppAttempt().getMasterContainer();
+      AMSimulator ams = appIdAMSim.get(appId);
+      if (ams != null) {
+        try {
+          Container amContainer = event.getAppAttempt().getMasterContainer();
-            setupAMRMToken(event.getAppAttempt());
+          setupAMRMToken(event.getAppAttempt());
-            // Notify RMAppAttempt to change state
-            super.context.getDispatcher().getEventHandler().handle(
-                new RMAppAttemptEvent(event.getAppAttempt().getAppAttemptId(),
-                    RMAppAttemptEventType.LAUNCHED));
+          // Notify RMAppAttempt to change state
+          super.context.getDispatcher().getEventHandler().handle(
+              new RMAppAttemptEvent(event.getAppAttempt().getAppAttemptId(),
+                  RMAppAttemptEventType.LAUNCHED));
-            ams.notifyAMContainerLaunched(
-                event.getAppAttempt().getMasterContainer());
-            LOG.info("Notify AM launcher launched:" + amContainer.getId());
+          ams.notifyAMContainerLaunched(
+              event.getAppAttempt().getMasterContainer());
+          LOG.info("Notify AM launcher launched:" + amContainer.getId());
-            se.getNmMap().get(amContainer.getNodeId())
-                .addNewContainer(amContainer, 100000000L);
+          se.getNmMap().get(amContainer.getNodeId())
+              .addNewContainer(amContainer, 100000000L);
-            return;
-          } catch (Exception e) {
-            throw new YarnRuntimeException(e);
-          }
+          return;
+        } catch (Exception e) {
+          throw new YarnRuntimeException(e);
+

INS83 UPD74 MOV8 UPD43 UPD42 UPD74 UPD42 INS25 UPD42 UPD43 MOV27 MOV8 UPD42 UPD42 MOV60 INS60 MOV53 UPD42 MOV43 INS59 INS27 INS42 INS32 INS42 MOV33 INS42 INS42 INS42 DEL42 DEL42 DEL32 DEL27 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL27 DEL42 DEL44 DEL42 DEL42 DEL32 DEL70 DEL25 DEL8