HDFS-6353. Check and make checkpoint before stopping the NameNode. Contributed by Jing Zhao.

-   * 
-   * @throws AccessControlException if superuser privilege is violated.
-   * @throws IOException if 
-  void saveNamespace() throws AccessControlException, IOException {
+  boolean saveNamespace(final long timeWindow, final long txGap)
+      throws IOException {
+    boolean saved = false;
-      getFSImage().saveNamespace(this);
+      saved = getFSImage().saveNamespace(timeWindow, txGap, this);
-    LOG.info("New namespace image has been created");
+    if (saved) {
+      LOG.info("New namespace image has been created");
+    }
+    return saved;

UPD39 INS44 INS44 INS83 INS39 INS42 INS83 INS39 INS42 INS60 INS25 INS41 INS39 INS59 INS42 INS8 INS42 INS42 INS9 MOV21 INS7 INS42 INS32 MOV32 MOV42 INS42 INS42 MOV52 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL43 DEL32