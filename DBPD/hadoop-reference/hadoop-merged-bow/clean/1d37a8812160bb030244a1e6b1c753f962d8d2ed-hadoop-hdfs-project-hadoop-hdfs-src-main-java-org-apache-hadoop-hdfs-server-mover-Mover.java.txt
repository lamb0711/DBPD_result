HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-                   ECSchema ecSchema) {
+                   ErasureCodingPolicy ecPolicy) {
-      db = new DBlockStriped(blk, indices, (short) ecSchema.getNumDataUnits());
+      db = new DBlockStriped(blk, indices, (short) ecPolicy.getNumDataUnits());
-      final ECSchema ecSchema = status.getECSchema();
+      final ErasureCodingPolicy ecPolicy = status.getErasureCodingPolicy();
-          if (scheduleMoves4Block(diff, lb, ecSchema)) {
+          if (scheduleMoves4Block(diff, lb, ecPolicy)) {
-                                ECSchema ecSchema) {
+                                ErasureCodingPolicy ecPolicy) {
-      final DBlock db = newDBlock(lb, locations, ecSchema);
+      final DBlock db = newDBlock(lb, locations, ecPolicy);

UPD40 UPD43 UPD42 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42