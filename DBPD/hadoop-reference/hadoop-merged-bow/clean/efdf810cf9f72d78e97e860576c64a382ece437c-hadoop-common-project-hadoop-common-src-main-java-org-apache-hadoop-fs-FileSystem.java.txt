HADOOP-7352. FileSystem#listStatus should throw IOE upon access error. Contributed by John Zhuge.

+   * <p>
+   * Will not return null. Expect IOException upon access error.
-   * @throws FileNotFoundException when the path does not exist;
-   *         IOException see specific implementation
+   * @throws FileNotFoundException when the path does not exist
+   * @throws IOException see specific implementation
-  public abstract FileStatus[] listStatus(Path f) throws FileNotFoundException, 
-                                                         IOException;
+  public abstract FileStatus[] listStatus(Path f) throws IOException;
-    if (listing == null) {
-      throw new IOException("Error accessing " + f);
-    }
-
+    Preconditions.checkNotNull(listing, "listStatus should not return NULL");

INS65 INS21 INS66 INS66 UPD66 INS42 INS66 INS32 INS42 INS42 INS42 INS45 DEL66 DEL42 DEL43 DEL42 DEL33 DEL27 DEL42 DEL43 DEL45 DEL42 DEL27 DEL14 DEL53 DEL8 DEL25