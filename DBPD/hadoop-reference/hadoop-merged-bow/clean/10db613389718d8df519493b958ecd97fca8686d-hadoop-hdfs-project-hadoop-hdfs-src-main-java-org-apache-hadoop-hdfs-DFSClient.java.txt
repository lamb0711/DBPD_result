HADOOP-10886. CryptoCodec#getCodecclasses throws NPE when configurations not loaded. Contributed by Uma Maheswara Rao G.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/fs-encryption@1615523 13f79535-47bb-0310-9956-ffa450edef68

-    cipherSuites.add(codec.getCipherSuite());
+    if (codec != null) {
+      cipherSuites.add(codec.getCipherSuite());
+    }
+      CryptoCodec codec = CryptoCodec
+          .getInstance(conf, feInfo.getCipherSuite());
+      Preconditions.checkNotNull(codec == null,
+          "No crypto codec classes with cipher suite configured.");
-          new CryptoInputStream(dfsis, CryptoCodec.getInstance(conf, 
-              feInfo.getCipherSuite()), decrypted.getMaterial(),
+          new CryptoInputStream(dfsis, codec, decrypted.getMaterial(),
+      Preconditions.checkNotNull(codec == null,
+          "No crypto codec classes with cipher suite configured.");

INS25 INS27 INS8 INS42 INS33 MOV21 INS60 INS21 INS21 INS43 INS59 INS32 INS32 INS42 INS42 MOV32 INS42 INS42 INS27 INS45 INS42 INS42 INS27 INS45 INS42 INS33 INS42 INS42 INS33