HADOOP-13421. Switch to v2 of the S3 List Objects API in S3A.
Contributed by Aaron Fabbri

-import com.amazonaws.services.s3.model.ListObjectsRequest;
-import com.amazonaws.services.s3.model.ObjectListing;
-      ListObjectsRequest request,
+      S3ListRequest request,
-      ListObjectsRequest request,
+      S3ListRequest request,
-    private boolean buildNextStatusBatch(ObjectListing objects) {
+    private boolean buildNextStatusBatch(S3ListResult objects) {
-  class ObjectListingIterator implements RemoteIterator<ObjectListing> {
+  class ObjectListingIterator implements RemoteIterator<S3ListResult> {
-    private ObjectListing objects;
+    private S3ListResult objects;
+
+    /** The most recent listing request. */
+    private S3ListRequest request;
-        ListObjectsRequest request) {
+        S3ListRequest request) {
+      this.request = request;
-    public ObjectListing next() throws IOException {
+    public S3ListResult next() throws IOException {
-          objects = owner.continueListObjects(objects);
+          objects = owner.continueListObjects(request, objects);

UPD74 INS23 UPD43 UPD43 UPD43 UPD43 INS29 INS83 INS43 INS59 UPD43 UPD42 UPD42 UPD43 UPD42 UPD42 INS65 INS42 INS42 UPD43 INS21 UPD42 UPD42 INS66 UPD42 INS7 INS22 INS42 INS52 INS42 INS42 DEL40 DEL26 DEL40 DEL26