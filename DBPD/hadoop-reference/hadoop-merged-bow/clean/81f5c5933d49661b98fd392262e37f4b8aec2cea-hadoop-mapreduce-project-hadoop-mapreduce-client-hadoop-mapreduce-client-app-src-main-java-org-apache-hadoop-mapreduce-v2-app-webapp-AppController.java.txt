MAPREDUCE-3878. Null user on filtered jobhistory job page (Jonathon Eagles via tgraves)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1292831 13f79535-47bb-0310-9956-ffa450edef68

-    UserGroupInformation callerUgi = UserGroupInformation.createRemoteUser(
-        request().getRemoteUser());
-    return job.checkAccess(callerUgi, JobACL.VIEW_JOB);
+    String remoteUser = request().getRemoteUser();
+    UserGroupInformation callerUGI = null;
+    if (remoteUser != null) {
+      callerUGI = UserGroupInformation.createRemoteUser(remoteUser);
+    }
+    if (callerUGI != null && !job.checkAccess(callerUGI, JobACL.VIEW_JOB)) {
+      return false;
+    }
+    return true;

INS60 INS25 INS25 INS41 INS43 MOV43 INS59 INS27 INS8 INS27 INS8 INS9 INS42 INS42 MOV32 INS42 INS33 INS42 INS33 INS21 INS27 INS38 INS41 INS7 INS42 INS33 INS32 INS9 INS42 INS32 MOV42 MOV42 UPD42 MOV42 MOV40 INS42 INS42 INS42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL41