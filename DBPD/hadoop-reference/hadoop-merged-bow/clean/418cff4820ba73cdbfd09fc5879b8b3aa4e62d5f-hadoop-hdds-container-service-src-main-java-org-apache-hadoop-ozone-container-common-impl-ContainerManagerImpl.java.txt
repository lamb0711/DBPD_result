Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

+import com.google.common.primitives.Longs;
+import org.apache.hadoop.hdfs.DFSUtil;
-import org.apache.hadoop.ozone.container.common.interfaces
-    .ContainerReportManager;
-  private DatanodeDetails datanodeDetails;
-  private ContainerReportManager containerReportManager;
-    this.datanodeDetails = dnDetails;
-
-      this.containerReportManager =
-          new ContainerReportManagerImpl(config);
-      // Initialize pending deletion blocks count in in-memory
-      // container status.
+      // Initialize pending deletion blocks and deleted blocks count in
+      // in-memory containerData.
+      byte[] transactionID = metadata.get(DFSUtil.string2Bytes(
+          OzoneConsts.DELETE_TRANSACTION_KEY_PREFIX + containerID));
+      if (transactionID != null) {
+        containerData
+            .updateDeleteTransactionId(Longs.fromByteArray(transactionID));
+      }
-        LOG.debug("container already exists. {}", containerData.getContainerID());
+        LOG.debug("container already exists. {}",
+            containerData.getContainerID());
-    Preconditions.checkState(containerID >= 0, "Container ID cannot be negative.");
+    Preconditions.checkState(containerID >= 0,
+        "Container ID cannot be negative.");
-   * Returns LifeCycle State of the container
+   * Returns LifeCycle State of the container.
-          .setState(getState(containerId));
+          .setState(getState(containerId))
+          .setDeleteTransactionId(container.getDeleteTransactionId());

MOV26 INS26 INS40 UPD40 UPD66 INS60 INS25 INS5 INS59 INS27 INS8 INS32 INS39 INS85 INS42 INS32 INS42 INS33 INS21 MOV32 INS42 INS32 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS27 INS42 INS42 INS32 INS40 INS42 INS42 INS42 INS42 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21 DEL52 DEL42 DEL22 DEL42 DEL43 DEL42 DEL14 DEL7 DEL21