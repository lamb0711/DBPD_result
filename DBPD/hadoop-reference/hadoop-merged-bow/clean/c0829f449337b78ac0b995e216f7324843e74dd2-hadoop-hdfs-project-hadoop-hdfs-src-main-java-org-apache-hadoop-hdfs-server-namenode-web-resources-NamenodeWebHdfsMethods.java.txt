HDFS-6434. Default permission for creating file should be 644 for WebHdfs/HttpFS. Contributed by Wellington Chevreuil.

-      final boolean b = np.mkdirs(fullpath, permission.getFsPermission(), true);
+      final boolean b = np.mkdirs(fullpath,
+          permission.getDirFsPermission(), true);
-          PermissionParam.getDefaultFsPermission(), createParent.getValue());
+          PermissionParam.getDefaultSymLinkFsPermission(),
+          createParent.getValue());
-      np.setPermission(fullpath, permission.getFsPermission());
+      np.setPermission(fullpath, permission.getDirFsPermission());

UPD42 UPD42 UPD42