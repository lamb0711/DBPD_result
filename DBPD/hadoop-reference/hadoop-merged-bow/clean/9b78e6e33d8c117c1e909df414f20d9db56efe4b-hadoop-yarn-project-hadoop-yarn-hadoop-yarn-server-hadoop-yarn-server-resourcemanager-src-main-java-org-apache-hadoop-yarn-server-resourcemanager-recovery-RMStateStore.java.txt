YARN-4087. Followup fixes after YARN-2019 regarding RM behavior when
state-store error occurs. Contributed by Jian He

+import org.apache.hadoop.yarn.conf.HAUtil;
-    if (failureCause instanceof StoreFencedException) {
+    if (HAUtil.isHAEnabled(getConfig())) {
+      LOG.warn("State-store fenced ! Transitioning RM to standby");
+    } else if (YarnConfiguration.shouldRMFailFast(getConfig())) {
+      LOG.fatal("Fail RM now due to state-store error!");
+      rmDispatcher.getEventHandler().handle(
+          new RMFatalEvent(RMFatalEventType.STATE_STORE_OP_FAILED,
+              failureCause));
-      if (YarnConfiguration.shouldRMFailFast(getConfig())) {
-        rmDispatcher.getEventHandler().handle(
-            new RMFatalEvent(RMFatalEventType.STATE_STORE_OP_FAILED,
-                failureCause));
-      }
+      LOG.warn("Skip the state-store error.");

INS26 INS40 INS32 MOV25 INS42 INS42 INS32 INS21 INS8 INS42 INS32 INS21 INS21 INS42 INS42 INS45 INS32 INS32 INS42 INS42 INS45 INS42 INS42 INS45 DEL42 DEL42 DEL43 DEL62 DEL8