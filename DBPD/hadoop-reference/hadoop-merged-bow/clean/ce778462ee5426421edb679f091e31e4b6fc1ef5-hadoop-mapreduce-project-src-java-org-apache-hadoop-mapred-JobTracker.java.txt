MAPREDUCE-3837. Job tracker is not able to recover jobs after crash. Contributed by Mayank Bansal.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1243695 13f79535-47bb-0310-9956-ffa450edef68

-          JobInfo token = new JobInfo();
+          final JobInfo token = new JobInfo();
-          UserGroupInformation ugi = 
-            UserGroupInformation.createRemoteUser(token.getUser().toString());
-          submitJob(token.getJobID(), restartCount, 
-              ugi, token.getJobSubmitDir().toString(), true, null);
+          final UserGroupInformation ugi = 
+          UserGroupInformation.createRemoteUser(token.getUser().toString());
+          ugi.doAs(new PrivilegedExceptionAction<JobStatus>() {
+            public JobStatus run() throws IOException ,InterruptedException{
+               return submitJob(token.getJobID(), restartCount, 
+                        ugi, token.getJobSubmitDir().toString(), true, null);
+          }});
+          

INS83 INS83 INS32 INS42 INS42 INS14 INS74 INS1 INS43 INS43 INS31 INS42 INS42 INS83 INS43 INS42 INS43 INS43 INS8 INS42 INS42 INS42 INS41 MOV32