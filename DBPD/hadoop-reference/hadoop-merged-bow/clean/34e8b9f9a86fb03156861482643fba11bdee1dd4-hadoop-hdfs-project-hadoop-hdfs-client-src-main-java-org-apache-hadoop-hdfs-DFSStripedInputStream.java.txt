HDFS-13540. DFSStripedInputStream should only allocate new buffers when reading. Contributed by Xiao Chen.

-  void resetCurStripeBuffer() {
-    if (curStripeBuf == null) {
+  private void resetCurStripeBuffer(boolean shouldAllocateBuf) {
+    if (shouldAllocateBuf && curStripeBuf == null) {
-    curStripeBuf.clear();
+    if (curStripeBuf != null) {
+      curStripeBuf.clear();
+    }
-    resetCurStripeBuffer();
+    resetCurStripeBuffer(false);
-    resetCurStripeBuffer();
+    resetCurStripeBuffer(true);

INS83 INS44 INS39 INS42 INS25 INS27 INS27 INS8 INS42 MOV27 INS42 INS33 MOV21 INS9 INS9