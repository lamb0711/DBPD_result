Merge trunk into HA branch.

Resolved some semantic conflicts in TestFileAppendRestart - we now log more OP_ADDs in the HA branch than we did in trunk.
Resolved some conflicts around removal of VersionedProtocol, etc.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1295342 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.commons.httpclient.cookie.CookiePolicy;
+import org.apache.commons.httpclient.params.HttpClientParams;
-    HttpClient client = new HttpClient();
+    HttpClientParams params = new HttpClientParams();
+    params.setCookiePolicy(CookiePolicy.BROWSER_COMPATIBILITY);
+    params.setBooleanParameter(HttpClientParams.ALLOW_CIRCULAR_REDIRECTS, true);
+    HttpClient client = new HttpClient(params);
-      
+      if(applicationReport.getOriginalTrackingUrl().equals("N/A")) {
+        notFound(resp, "The MRAppMaster died before writing anything.");
+        return;
+      }
+

INS26 INS26 INS40 INS40 INS60 INS21 INS21 INS43 INS59 INS32 INS32 MOV43 INS42 INS42 INS14 INS42 INS42 INS40 INS42 INS42 INS40 INS9 INS25 INS43 MOV43 INS42 INS32 INS8 INS42 INS32 INS42 INS45 INS21 INS41 INS42 INS42 INS32 INS42 INS42 INS45