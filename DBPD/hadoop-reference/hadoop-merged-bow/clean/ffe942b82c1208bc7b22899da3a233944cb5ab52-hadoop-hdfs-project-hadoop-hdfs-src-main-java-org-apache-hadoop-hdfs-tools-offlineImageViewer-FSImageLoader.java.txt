HDFS-7384. getfacl command and getAclStatus output should be in sync. Contributed by Vinayakumar B.

+
+import org.apache.hadoop.fs.permission.AclStatus;
+import org.apache.hadoop.hdfs.web.JsonUtil;
-    StringBuilder sb = new StringBuilder();
-    List<AclEntry> aclEntryList = getAclEntryList(path);
-    sb.append("{\"AclStatus\":{\"entries\":[");
-    int i = 0;
-    for (AclEntry aclEntry : aclEntryList) {
-      if (i++ != 0) {
-        sb.append(',');
-      }
-      sb.append('"');
-      sb.append(aclEntry.toString());
-      sb.append('"');
-    }
-    sb.append("],\"group\": \"");
-    sb.append(p.getGroupName());
-    sb.append("\",\"owner\": \"");
-    sb.append(p.getUserName());
-    sb.append("\",\"stickyBit\": ");
-    sb.append(p.getPermission().getStickyBit());
-    sb.append("}}\n");
-    return sb.toString();
+    List<AclEntry> aclEntryList = getAclEntryList(path);
+    FsPermission permission = p.getPermission();
+    AclStatus.Builder builder = new AclStatus.Builder();
+    builder.owner(p.getUserName()).group(p.getGroupName())
+        .addEntries(aclEntryList).setPermission(permission)
+        .stickyBit(permission.getStickyBit());
+    AclStatus aclStatus = builder.build();
+    return JsonUtil.toJsonString(aclStatus);

INS26 INS26 INS40 INS40 MOV60 MOV60 INS21 INS60 UPD43 INS43 INS32 INS43 INS59 UPD42 UPD42 MOV32 INS40 UPD42 INS14 INS32 UPD42 MOV42 INS32 INS42 INS42 INS32 UPD42 UPD42 INS42 INS43 INS32 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS40 INS32 UPD42 MOV42 UPD42 MOV42 MOV32 UPD42 MOV42 MOV32 UPD42 UPD42 DEL42 DEL43 DEL14 DEL42 DEL42 DEL45 DEL32 DEL21 DEL39 DEL34 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL37 DEL34 DEL27 DEL42 DEL13 DEL32 DEL21 DEL8 DEL25 DEL42 DEL13 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL13 DEL32 DEL21 DEL8 DEL70 DEL42 DEL45 DEL32 DEL21 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21 DEL21 DEL45 DEL32 DEL21 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL42 DEL42 DEL45 DEL32 DEL21