HDFS-8576.  Lease recovery should return true if the lease can be released and the file can be closed.  Contributed by J.Andreina

-   * @return true if the file is already closed
+   * @return true if the file is already closed or
+   *         if the lease can be released and the file can be closed.
-      recoverLeaseInternal(RecoverLeaseOp.RECOVER_LEASE,
+      return recoverLeaseInternal(RecoverLeaseOp.RECOVER_LEASE,
-    return false;
-  void recoverLeaseInternal(RecoverLeaseOp op, INodesInPath iip,
+  boolean recoverLeaseInternal(RecoverLeaseOp op, INodesInPath iip,
-    if (file != null && file.isUnderConstruction()) {
+    if (file.isUnderConstruction()) {
-        internalReleaseLease(lease, src, iip, holder);
+        return internalReleaseLease(lease, src, iip, holder);
-          boolean isClosed = internalReleaseLease(lease, src, iip, null);
-          if(!isClosed)
+          if (internalReleaseLease(lease, src, iip, null)) {
+            return true;
+          } else {
+          }
-    }
+    } else {
+      return true;
+     }

UPD39 UPD66 INS66 MOV32 INS8 INS41 INS41 MOV32 INS9 INS41 MOV32 MOV32 INS8 INS8 INS41 MOV53 INS9 DEL21 DEL9 DEL41 DEL42 DEL33 DEL27 DEL27 DEL21 DEL39 DEL42 DEL59 DEL60 DEL42 DEL38