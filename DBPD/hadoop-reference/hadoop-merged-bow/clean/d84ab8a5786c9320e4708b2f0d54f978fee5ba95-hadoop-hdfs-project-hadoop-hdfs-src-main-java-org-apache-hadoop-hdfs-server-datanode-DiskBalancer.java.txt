HDFS-10598. DiskBalancer does not execute multi-steps plan. Contributed by Lei (Eddy) Xu.

-
-        for (Map.Entry<VolumePair, DiskBalancerWorkItem> entry :
-            workMap.entrySet()) {
-          blockMover.copyBlocks(entry.getKey(), entry.getValue());
+        try {
+          for (Map.Entry<VolumePair, DiskBalancerWorkItem> entry :
+              workMap.entrySet()) {
+            blockMover.copyBlocks(entry.getKey(), entry.getValue());
+          }
+        } finally {
+          blockMover.setExitFlag();
-              this.setExitFlag();
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;

INS54 INS8 INS8 MOV70 INS21 INS10 INS10 INS10 INS10 INS10 INS32 INS42 INS42 DEL52 DEL42 DEL32 DEL21 DEL18 DEL52 DEL42 DEL32 DEL21 DEL18 DEL52 DEL42 DEL32 DEL21 DEL18 DEL18 DEL52 DEL42 DEL32 DEL21 DEL18