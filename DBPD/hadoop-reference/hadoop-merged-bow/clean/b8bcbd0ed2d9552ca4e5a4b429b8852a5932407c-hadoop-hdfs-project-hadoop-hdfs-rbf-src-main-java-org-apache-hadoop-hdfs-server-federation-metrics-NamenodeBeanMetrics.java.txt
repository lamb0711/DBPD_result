HDFS-14191. RBF: Remove hard coded router status from FederationMetrics. Contributed by Ranith Sardar.

+import org.apache.hadoop.hdfs.server.federation.router.RouterServiceState;
-    // We assume that the global federated view is never in safe mode
+    try {
+      if (!getRouter().isRouterState(RouterServiceState.SAFEMODE)) {
+        return "Safe mode is ON. " + this.getSafeModeTip();
+      }
+    } catch (IOException e) {
+      return "Failed to get safemode status. Please check router"
+          + "log for more detail.";
+    }
+    return "";
+  }
+
+  private String getSafeModeTip() throws IOException {
+    Router rt = getRouter();
+    String cmd = "Use \"hdfs dfsrouteradmin -safemode leave\" "
+        + "to turn safe mode off.";
+    if (rt.isRouterState(RouterServiceState.INITIALIZING)
+        || rt.isRouterState(RouterServiceState.UNINITIALIZED)) {
+      return "Router is in" + rt.getRouterState()
+          + "mode, the router will immediately return to "
+          + "normal mode after some time. " + cmd;
+    } else if (rt.isRouterState(RouterServiceState.SAFEMODE)) {
+      return "It was turned on manually. " + cmd;
+    }

INS26 INS40 INS31 INS8 INS83 INS43 INS42 INS43 INS8 INS54 MOV41 INS42 INS42 INS60 INS60 INS25 INS41 INS8 INS12 INS43 INS59 INS43 INS59 INS27 INS8 INS25 INS45 INS25 INS44 INS8 INS42 INS42 INS32 INS42 INS42 INS27 INS32 INS32 INS41 INS32 INS8 INS38 INS8 INS43 INS42 INS41 INS42 INS45 INS45 INS42 INS42 INS40 INS42 INS42 INS40 INS27 INS42 INS42 INS40 INS41 INS32 INS41 INS42 INS27 INS45 INS32 INS45 INS45 INS42 INS27 INS32 INS42 INS40 INS27 INS45 INS45 INS42 INS42 INS45 INS42 INS42 INS45 INS32 INS52 INS42 DEL8