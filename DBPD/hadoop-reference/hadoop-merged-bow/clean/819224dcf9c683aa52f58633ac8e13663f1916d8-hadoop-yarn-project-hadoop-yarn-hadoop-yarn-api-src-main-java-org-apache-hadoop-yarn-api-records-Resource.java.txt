YARN-5270. Solve miscellaneous issues caused by YARN-4844. Contributed by Wangda Tan

-import org.apache.hadoop.classification.InterfaceAudience.Private;
+import org.apache.commons.lang.NotImplementedException;
-import org.apache.hadoop.classification.InterfaceStability.Unstable;
+
-  public static Resource newInstance(long memory, long vCores) {
+  public static Resource newInstance(int memory, int vCores) {
-    resource.setMemory(memory);
+    resource.setMemorySize(memory);
+    resource.setVirtualCores(vCores);
+    return resource;
+  }
+
+  @Public
+  @Stable
+  public static Resource newInstance(long memory, int vCores) {
+    Resource resource = Records.newRecord(Resource.class);
+    resource.setMemorySize(memory);
-  @Private
-  @Unstable
-  public abstract long getMemorySize();
-  
+  @Public
+  @Stable
+  public long getMemorySize() {
+    throw new NotImplementedException(
+        "This method is implemented by ResourcePBImpl");
+  }
+
+  /**
+   * Set <em>memory</em> of the resource.
+   * @param memory <em>memory</em> of the resource
+   */
+  @Public
+  @Deprecated
+  public abstract void setMemory(int memory);
+
-  public abstract void setMemory(long memory);
+  public void setMemorySize(long memory) {
+    throw new NotImplementedException(
+        "This method is implemented by ResourcePBImpl");
+  }
-
-  @Public
-  @Unstable
-  public abstract long getVirtualCoresSize();
-  public abstract void setVirtualCores(long vCores);
+  public abstract void setVirtualCores(int vCores);

MOV31 UPD40 INS31 INS31 INS44 MOV78 MOV78 MOV83 UPD83 MOV83 INS43 INS42 MOV44 INS44 INS8 MOV29 MOV78 MOV78 INS83 MOV39 MOV42 INS8 INS78 INS78 INS44 INS29 INS78 UPD39 UPD42 MOV44 INS8 INS39 INS42 UPD39 UPD42 INS42 INS39 INS42 INS60 INS21 INS21 INS41 INS53 INS42 INS42 INS39 INS42 INS65 INS65 INS42 UPD42 INS53 UPD39 INS43 INS59 INS32 INS32 INS42 INS14 INS66 INS42 INS66 INS14 UPD42 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS45 INS43 INS45 INS42 INS42 INS57 INS42 INS42 INS43 INS42 DEL40 DEL26 DEL42 DEL78 DEL31 DEL83