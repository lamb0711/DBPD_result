HDFS-13075. [SPS]: Provide External Context implementation. Contributed by Uma Maheswara Rao G.

+import org.apache.hadoop.fs.StorageType;
- * It's used to get part of the name node state
+ * Also used by external storage policy satisfier. It's used to get part of the
+ * name node state
+
+  /**
+   * Gets the file path for the given file id. This API used by External SPS.
+   *
+   * @param inodeId
+   *          - file inode id.
+   * @return path
+   */
+  @Idempotent
+  String getFilePath(Long inodeId) throws IOException;
+
+  /**
+   * @return Gets the next available sps path id, otherwise null. This API used
+   *         by External SPS.
+   */
+  @AtMostOnce
+  Long getNextSPSPathId() throws IOException;
+
+  /**
+   * Verifies whether the given Datanode has the enough estimated size with
+   * given storage type for scheduling the block. This API used by External SPS.
+   *
+   * @param dn
+   *          - datanode
+   * @param type
+   *          - storage type
+   * @param estimatedSize
+   *          - size
+   */
+  @Idempotent
+  boolean checkDNSpaceForScheduling(DatanodeInfo dn, StorageType type,
+      long estimatedSize) throws IOException;
+
+  /**
+   * Check if any low redundancy blocks for given file id. This API used by
+   * External SPS.
+   *
+   * @param inodeID
+   *          - inode id.
+   */
+  @Idempotent
+  boolean hasLowRedundancyBlocks(long inodeID) throws IOException;

INS26 INS40 INS31 INS31 INS31 INS31 INS29 INS78 INS43 INS42 INS44 INS43 INS29 INS78 INS43 INS42 INS43 INS29 INS78 INS39 INS42 INS44 INS44 INS44 INS43 INS29 INS78 INS39 INS42 INS44 INS43 INS66 UPD66 INS65 INS65 INS65 INS42 INS42 INS43 INS42 INS42 INS65 INS42 INS42 INS42 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS43 INS42 INS39 INS42 INS42 INS65 INS65 INS42 INS39 INS42 INS42 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS42 INS66 INS66 INS42 INS66