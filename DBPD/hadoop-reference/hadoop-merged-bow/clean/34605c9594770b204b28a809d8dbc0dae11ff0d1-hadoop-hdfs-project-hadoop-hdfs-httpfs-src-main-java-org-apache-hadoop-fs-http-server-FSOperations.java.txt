 HDS-3491. HttpFs does not set permissions correctly (tucu)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1355556 13f79535-47bb-0310-9956-ffa450edef68

-  /**
-   * Converts a Unix permission octal
-   * (i.e. 655 or 1777) into a FileSystemAccess permission.
-   *
-   * @param str Unix permission symbolic representation.
-   *
-   * @return the FileSystemAccess permission. If the given string was
-   *         'default', it returns <code>FsPermission.getDefault()</code>.
-   */
-  private static FsPermission getPermission(String str) {
-    FsPermission permission;
-    if (str.equals(HttpFSFileSystem.DEFAULT_PERMISSION)) {
-      permission = FsPermission.getDefault();
-    } else {
-      permission = new FsPermission(Short.parseShort(str, 8));
-    }
-    return permission;
-  }
-
-    private String permission;
+    private short permission;
-    public FSCreate(InputStream is, String path, String perm, boolean override, short repl, long blockSize) {
+    public FSCreate(InputStream is, String path, short perm, boolean override,
+                    short repl, long blockSize) {
-      FsPermission fsPermission = getPermission(permission);
+      FsPermission fsPermission = new FsPermission(permission);
-    private String permission;
+    private short permission;
-    public FSMkdirs(String path, String permission) {
+    public FSMkdirs(String path, short permission) {
-      FsPermission fsPermission = getPermission(permission);
+      FsPermission fsPermission = new FsPermission(permission);
-    private String permission;
+    private short permission;
-    public FSSetPermission(String path, String permission) {
+    public FSSetPermission(String path, short permission) {
-      FsPermission fsPermission = getPermission(permission);
+      FsPermission fsPermission = new FsPermission(permission);

INS39 INS39 INS39 INS39 INS39 INS39 MOV43 MOV43 MOV43 INS14 INS14 INS14 MOV43 INS42 MOV43 INS42 MOV43 INS42 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL66 DEL66 DEL65 DEL29 DEL83 DEL83 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL59 DEL60 DEL42 DEL42 DEL40 DEL32 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL42 DEL34 DEL32 DEL14 DEL7 DEL21 DEL8 DEL25 DEL42 DEL41 DEL8 DEL31 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL43 DEL42 DEL42 DEL32