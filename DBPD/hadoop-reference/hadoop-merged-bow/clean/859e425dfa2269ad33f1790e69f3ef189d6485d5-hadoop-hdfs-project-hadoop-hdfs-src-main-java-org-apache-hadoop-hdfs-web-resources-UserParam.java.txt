Revert HDFS-4983

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1547970 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.conf.Configuration;
-import static org.apache.hadoop.hdfs.web.WebHdfsConfigKeys.USER_PATTERN_KEY;
-import static org.apache.hadoop.hdfs.web.WebHdfsConfigKeys.USER_PATTERN_DEFAULT;
-import com.google.common.annotations.VisibleForTesting;
- 
+
-  private static String userPattern = null;
-  private static Domain domain = null;
-
-  static {
-      setUserPattern(USER_PATTERN_DEFAULT);
-  }
-
-  @VisibleForTesting
-  public static String getUserPattern() {
-    return userPattern;
-  }
-
-  @VisibleForTesting
-  public static void setUserPattern(String pattern) {
-    userPattern = pattern;
-    Pattern pt = Pattern.compile(userPattern);
-    domain = new Domain(NAME, pt);
-  }
-
-  public static void setUserPattern(Configuration conf) {
-    String pattern = conf.get(USER_PATTERN_KEY, USER_PATTERN_DEFAULT);
-    setUserPattern(pattern);
-  }
+  private static final Domain DOMAIN = new Domain(NAME,
+    Pattern.compile("^[A-Za-z_][A-Za-z0-9._-]*[$]?$"));
-    super(domain, str == null || str.equals(DEFAULT)? null : validateLength(str));
+    super(DOMAIN, str == null || str.equals(DEFAULT)? null : validateLength(str));
-}
+}

INS23 MOV83 MOV83 UPD83 MOV83 MOV43 INS59 UPD42 MOV42 INS14 MOV43 INS42 INS32 UPD42 MOV42 MOV42 INS45 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL42 DEL43 DEL42 DEL33 DEL59 DEL23 DEL83 DEL33 DEL59 DEL23 DEL83 DEL42 DEL42 DEL32 DEL21 DEL8 DEL28 DEL42 DEL78 DEL83 DEL83 DEL42 DEL43 DEL42 DEL42 DEL41 DEL8 DEL31 DEL42 DEL78 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL7 DEL21 DEL42 DEL43 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL14 DEL7 DEL21 DEL8 DEL31 DEL83 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL32 DEL21 DEL8 DEL31