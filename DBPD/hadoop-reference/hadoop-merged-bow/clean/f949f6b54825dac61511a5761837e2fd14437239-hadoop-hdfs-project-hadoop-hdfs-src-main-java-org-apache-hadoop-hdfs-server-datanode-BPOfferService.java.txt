HDFS-6981. Fix DN upgrade with layout version change. (Arpit Agarwal)

-  void signalRollingUpgrade(boolean inProgress) {
+  void signalRollingUpgrade(boolean inProgress) throws IOException {
+    String bpid = getBlockPoolId();
-      dn.getFSDataset().enableTrash(getBlockPoolId());
+      dn.getFSDataset().enableTrash(bpid);
+      dn.getFSDataset().setRollingUpgradeMarker(bpid);
-      dn.getFSDataset().restoreTrash(getBlockPoolId());
+      dn.getFSDataset().restoreTrash(bpid);
+      dn.getFSDataset().clearRollingUpgradeMarker(bpid);

INS43 INS42 INS60 INS43 INS59 INS42 INS42 MOV32 INS21 INS21 INS32 INS32 INS32 INS42 INS42 UPD42 INS42 UPD42 MOV42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 DEL32