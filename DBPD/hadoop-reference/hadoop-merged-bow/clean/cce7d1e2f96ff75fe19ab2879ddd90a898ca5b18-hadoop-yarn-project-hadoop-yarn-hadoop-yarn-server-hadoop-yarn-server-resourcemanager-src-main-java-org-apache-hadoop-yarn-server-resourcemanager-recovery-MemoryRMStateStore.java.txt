Merge remote-tracking branch 'origin/trunk' into MR-2841

Conflicts:
	hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/MapTask.java

+import org.apache.hadoop.yarn.server.records.Version;
+import org.apache.hadoop.yarn.server.resourcemanager.recovery.records.AMRMTokenSecretManagerState;
-import org.apache.hadoop.yarn.server.resourcemanager.recovery.records.RMStateVersion;
+    returnState.amrmTokenSecretManagerState =
+        state.amrmTokenSecretManagerState == null ? null
+            : AMRMTokenSecretManagerState
+              .newInstance(state.amrmTokenSecretManagerState);
-  protected RMStateVersion loadVersion() throws Exception {
+  protected Version loadVersion() throws Exception {
-  protected RMStateVersion getCurrentVersion() {
+  protected Version getCurrentVersion() {
+  public void storeOrUpdateAMRMTokenSecretManagerState(
+      AMRMTokenSecretManagerState amrmTokenSecretManagerState,
+      boolean isUpdate) {
+    if (amrmTokenSecretManagerState != null) {
+      state.amrmTokenSecretManagerState = AMRMTokenSecretManagerState
+          .newInstance(amrmTokenSecretManagerState);
+    }
+  }
+
+  @Override

MOV26 INS26 INS40 UPD40 INS31 MOV78 UPD43 MOV78 UPD43 INS78 INS83 INS39 INS42 INS44 INS44 INS8 INS21 UPD42 UPD42 INS42 INS43 INS42 INS39 INS42 INS25 INS7 INS42 INS27 INS8 INS40 INS16 INS42 INS33 INS21 INS27 INS33 INS32 INS7 INS40 INS33 INS42 INS42 INS40 INS40 INS32 INS42 INS42 INS42