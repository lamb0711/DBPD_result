YARN-8545.  Return allocated resource to RM for failed container.
            Contributed by Chandni Singh

+  private static final String FAILED_BEFORE_LAUNCH_DIAG =
+      "failed before launch";
-      ComponentInstance compInstance, ComponentInstanceEvent event) {
+      ComponentInstance compInstance, ComponentInstanceEvent event,
+      boolean failureBeforeLaunch) {
-          event.getContainerId(), event.getStatus().getExitStatus(),
-          event.getStatus().getDiagnostics());
+          event.getContainerId(), failureBeforeLaunch ? null :
+              event.getStatus().getExitStatus(),
+          failureBeforeLaunch ? FAILED_BEFORE_LAUNCH_DIAG :
+              event.getStatus().getDiagnostics());
-          compInstance.getCompInstanceId() + ": " + event.getStatus()
-              .getDiagnostics();
+          compInstance.getCompInstanceId() + ": " + (failedBeforeLaunching ?
+              FAILED_BEFORE_LAUNCH_DIAG : event.getStatus().getDiagnostics());
+      scheduler.getAmRMClient().releaseAssignedContainer(
+          event.getContainerId());
+
-      handleComponentInstanceRelaunch(compInstance, event);
+      handleComponentInstanceRelaunch(compInstance, event,
+          failedBeforeLaunching);

INS23 INS83 INS83 INS83 INS43 INS59 INS44 INS42 INS42 INS45 INS39 INS42 INS21 INS32 INS32 INS42 INS32 INS42 INS16 INS16 INS36 INS42 INS42 INS42 INS42 INS42 INS33 MOV32 INS42 INS42 MOV32 INS16 INS42 INS42 MOV32