YARN-6903. Yarn-native-service framework core rewrite. Contributed by Jian He

+import org.apache.commons.lang.StringUtils;
-import org.apache.slider.server.appmaster.state.RoleInstance;
+import org.apache.hadoop.yarn.api.records.ContainerStatus;
+import org.apache.hadoop.yarn.service.compinstance.ComponentInstance;
+import org.apache.slider.common.tools.SliderUtils;
-  
+
-  public ProbeStatus ping(RoleInstance roleInstance) {
+  public ProbeStatus ping(ComponentInstance instance) {
-    String ip = roleInstance.ip;
-    if (ip == null) {
+    ContainerStatus containerStatus = instance.getContainerStatus();
+    if (containerStatus == null || SliderUtils.isEmpty(containerStatus.getIPs())
+        || StringUtils.isEmpty(containerStatus.getHost())) {
+    String ip = containerStatus.getIPs().get(0);
-                    new IOException(error));
+            new IOException(error));
-                  new IOException(error, e));
+          new IOException(error, e));
-

INS26 INS26 INS26 INS40 INS40 UPD40 INS40 MOV60 UPD43 UPD42 INS60 UPD42 INS43 INS59 INS27 INS42 INS42 INS32 INS27 INS32 INS32 INS42 INS42 INS27 INS32 INS42 INS42 INS32 INS32 INS42 INS34 UPD42 MOV42 MOV33 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 DEL27 DEL40