YARN-8468. Enable the use of queue based maximum container allocation limit and implement it in FairScheduler. Contributed by Antal BÃ¡lint Steinbach.

-  private static final String RESOURCE_OUTSIDE_ALLOWED_RANGE =
+  public static final String RESOURCE_OUTSIDE_ALLOWED_RANGE =
-      Resource maximumResource, String queueName, YarnScheduler scheduler,
+      Resource maximumAllocation, String queueName, YarnScheduler scheduler,
-      SchedulerUtils.normalizeAndvalidateRequest(resReq, maximumResource,
+      SchedulerUtils.normalizeAndValidateRequest(resReq, maximumAllocation,
-    request.setCapability(scheduler.getNormalizedResource(request.getCapability()));
+    request.setCapability(scheduler
+        .getNormalizedResource(request.getCapability(), maximumAllocation));

UPD83 UPD42 INS42 UPD42 UPD42