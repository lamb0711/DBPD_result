HDFS-12579. JournalNodeSyncer should use fromUrl field of EditLogManifestResponse to construct servlet Url. Contributed by Hanisha Koneru.

-            remoteJNproxy.httpServerUrl = getHttpServerURI("http",
-                remoteJNproxy.jnAddr.getHostName(), response.getHttpPort());
+            if (response.hasFromURL()) {
+              remoteJNproxy.httpServerUrl = getHttpServerURI(
+                  response.getFromURL(), remoteJNproxy.jnAddr.getHostName());
+            } else {
+              LOG.error("EditLogManifest response does not have fromUrl " +
+                  "field set. Aborting current sync attempt");
+              break;
+            }
+        } catch (URISyntaxException e) {
+          LOG.error("EditLogManifest's fromUrl field syntax incorrect", e);
-  private URL getHttpServerURI(String scheme, String hostname, int port)
-    throws MalformedURLException {
-    return new URL(scheme, hostname, port, "");
+  private URL getHttpServerURI(String fromUrl, String hostAddr)
+      throws URISyntaxException, MalformedURLException {
+    URI uri = new URI(fromUrl);
+    return new URL(uri.getScheme(), hostAddr, uri.getPort(), "");

MOV44 INS43 UPD42 UPD42 INS42 INS60 INS43 INS59 INS42 INS42 INS14 INS32 UPD42 INS32 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS12 INS25 INS44 INS8 MOV27 INS8 INS43 INS42 INS21 MOV25 INS42 INS32 INS32 INS8 INS42 INS42 INS45 INS42 INS42 INS42 INS21 INS10 INS32 MOV32 INS42 INS42 INS27 INS45 INS45 UPD42 DEL45 DEL39 DEL42 DEL44 DEL42 DEL42