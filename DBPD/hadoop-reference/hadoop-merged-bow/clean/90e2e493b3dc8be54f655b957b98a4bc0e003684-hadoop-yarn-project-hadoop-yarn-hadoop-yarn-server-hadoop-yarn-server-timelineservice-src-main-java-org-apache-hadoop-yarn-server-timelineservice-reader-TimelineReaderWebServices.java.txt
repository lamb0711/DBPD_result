YARN-8270 Adding JMX Metrics for Timeline Collector and Reader. Contributed by Sushil Ks.

+import org.apache.hadoop.yarn.server.timelineservice.metrics.TimelineReaderMetrics;
+  private static final TimelineReaderMetrics METRICS =
+      TimelineReaderMetrics.getInstance();
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntityTypesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info(
+          "Processed URL " + url + " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info(
-        "Processed URL " + url + " (Took " + (endTime - startTime) + " ms.)");
+

INS26 INS40 INS23 INS83 INS83 INS83 INS43 INS59 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 MOV60 INS42 INS42 INS32 INS60 INS42 INS42 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 UPD39 INS8 INS39 INS59 INS8 UPD39 INS8 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 INS60 INS21 INS21 INS42 INS9 INS21 INS60 INS21 INS21 UPD42 INS9 INS21 MOV60 INS21 INS21 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS39 INS59 INS32 INS32 INS7 INS32 INS32 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS9 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS42 INS27 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 MOV32 INS42 INS45 INS42 INS45 INS42 INS45 INS32 INS32 INS32 INS32 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21 DEL42 DEL42 DEL42 DEL45 DEL42 DEL45 DEL42 DEL42 DEL27 DEL36 DEL45 DEL27 DEL32 DEL21