Merge r1360400 through r1399945 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1399950 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Arrays;
+import org.apache.hadoop.util.Time;
+        @Override
+        @Override
-            long expire = System.currentTimeMillis() + timeout;
+            long expire = Time.now() + timeout;
-                left = expire - System.currentTimeMillis();
+                left = expire - Time.now();
-            long expire = System.currentTimeMillis() + timeout;
+            long expire = Time.now() + timeout;
-                left = expire - System.currentTimeMillis();
+                left = expire - Time.now();
-        long start = System.currentTimeMillis();
+        long start = Time.now();
-            if (System.currentTimeMillis() > start + timeout) {
+            if (Time.now() > start + timeout) {
-        long start = System.currentTimeMillis();
+        long start = Time.now();
-            if (System.currentTimeMillis() > start + timeout) {
+            if (Time.now() > start + timeout) {

MOV26 UPD40 INS78 INS78 INS42 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42