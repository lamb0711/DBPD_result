HDFS-2985. Improve logging when replicas are marked as corrupt. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1292609 13f79535-47bb-0310-9956-ffa450edef68

+   * @param reason a textual reason (for logging purposes)
-  public void addToCorruptReplicasMap(Block blk, DatanodeDescriptor dn) {
+  public void addToCorruptReplicasMap(Block blk, DatanodeDescriptor dn,
+      String reason) {
+    
+    String reasonText;
+    if (reason != null) {
+      reasonText = " because " + reason;
+    } else {
+      reasonText = "";
+    }
+    
-                                   " by " + Server.getRemoteIp());
+                                   " by " + Server.getRemoteIp() +
+                                   reasonText);
-                                   " by " + Server.getRemoteIp());
+                                   " by " + Server.getRemoteIp() +
+                                   reasonText);

INS44 INS65 INS43 INS42 INS60 INS25 INS42 INS66 INS42 INS43 INS59 INS27 INS8 INS8 INS42 INS42 INS42 INS33 INS21 INS21 INS7 INS7 INS42 INS27 INS42 INS45 INS45 INS42 INS42 INS42