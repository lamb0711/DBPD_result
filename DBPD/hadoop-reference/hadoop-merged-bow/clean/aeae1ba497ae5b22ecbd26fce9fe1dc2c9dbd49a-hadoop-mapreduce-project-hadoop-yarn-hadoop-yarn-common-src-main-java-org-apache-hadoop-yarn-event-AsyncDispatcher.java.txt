MAPREDUCE-3188. Ensure correct shutdown in services. Contributed by Todd Lipcon.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1186554 13f79535-47bb-0310-9956-ffa450edef68

-    eventHandlingThread.interrupt();
-    try {
-      eventHandlingThread.join();
-    } catch (InterruptedException ie) {
-      LOG.debug("Interruped Exception while stopping", ie);
+    if (eventHandlingThread != null) {
+      eventHandlingThread.interrupt();
+      try {
+        eventHandlingThread.join();
+      } catch (InterruptedException ie) {
+        LOG.debug("Interrupted Exception while stopping", ie);
+      }
-    //stop all the components
+    // stop all the components

INS25 INS27 INS8 INS42 INS33 MOV21 MOV54 UPD45