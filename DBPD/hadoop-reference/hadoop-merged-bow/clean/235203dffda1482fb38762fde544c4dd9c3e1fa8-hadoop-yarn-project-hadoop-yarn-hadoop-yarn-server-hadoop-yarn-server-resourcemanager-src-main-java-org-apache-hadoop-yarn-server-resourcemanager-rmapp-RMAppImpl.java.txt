YARN-6153. KeepContainer does not work when AM retry window is set. Contributed by kyungwan nam

-          submissionContext, conf,
-          // The newly created attempt maybe last attempt if (number of
-          // previously failed attempts(which should not include Preempted,
-          // hardware error and NM resync) + 1) equal to the max-attempt
-          // limit.
-          maxAppAttempts == (getNumFailedAppAttempts() + 1), amReq,
-          currentAMBlacklistManager);
+          submissionContext, conf, amReq, this, currentAMBlacklistManager);
-  private int getNumFailedAppAttempts() {
+  public int getNumFailedAppAttempts() {
-    long endTime = this.systemClock.getTime();
-        if (this.attemptFailuresValidityInterval <= 0
-            || (attempt.getFinishTime() > endTime
-                - this.attemptFailuresValidityInterval)) {
-          completedAttempts++;
-        }
+        completedAttempts++;

UPD83 INS8 MOV25 INS52 MOV32 DEL42 DEL42 DEL32 DEL34 DEL27 DEL36 DEL27 DEL39 DEL42 DEL52 DEL42 DEL22 DEL42 DEL32 DEL59 DEL60 DEL52 DEL42 DEL22 DEL34 DEL27 DEL42 DEL42 DEL32 DEL42 DEL52 DEL42 DEL22 DEL27 DEL27 DEL36 DEL27 DEL8 DEL25 DEL8