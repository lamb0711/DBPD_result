MAPREDUCE-4067. Changed MRClientProtocol api to throw IOException only (Xuan Gong via vinodkv)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1481695 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.ipc.RPCUtil;
-  private MRClientProtocol getProxy() throws YarnRemoteException, IOException {
+  private MRClientProtocol getProxy() throws IOException {
-    ApplicationReport application = rm.getApplicationReport(appId);
+    ApplicationReport application = null;
+    try {
+      application = rm.getApplicationReport(appId);
+    } catch (YarnRemoteException e2) {
+      throw new IOException(e2);
+    }
-        application = rm.getApplicationReport(appId);
+        try {
+          application = rm.getApplicationReport(appId);
+        } catch (YarnRemoteException e1) {
+          throw new IOException(e1);
+        }
+      } catch (YarnRemoteException e) {
+        throw new IOException(e);
-      throw RPCUtil.getRemoteException("User is not set in the application report");
+      throw new IOException("User is not set in the application report");
-      } catch (YarnRemoteException yre) {
-        LOG.warn("Exception thrown by remote end.", yre);
-        throw new IOException(yre);
-        if (e.getTargetException() instanceof YarnRemoteException) {
-          LOG.warn("Error from remote end: " + e
-              .getTargetException().getLocalizedMessage());
-          LOG.debug("Tracing remote error ", e.getTargetException());
-          throw new IOException(e.getTargetException());
-        }
+        // Will not throw out YarnRemoteException anymore
-        lastException = new IOException(e.getMessage());
+        lastException = new IOException(e.getTargetException());
-      throws YarnRemoteException, IOException {
+      throws IOException {

INS60 INS54 MOV43 INS59 INS8 INS12 MOV42 INS33 INS21 INS44 INS8 INS7 MOV43 INS42 INS53 INS12 INS14 INS42 INS32 INS14 INS44 INS8 MOV43 INS45 MOV42 MOV42 MOV42 INS43 INS42 INS54 MOV43 INS42 INS53 INS42 INS8 INS12 INS14 MOV21 INS44 INS8 MOV43 INS42 MOV14 MOV43 INS42 INS53 INS14 INS43 INS42 INS42 DEL40 DEL26 DEL32 DEL59 DEL60 DEL42 DEL42 DEL45 DEL32 DEL42 DEL44 DEL42 DEL42 DEL45 DEL42 DEL32 DEL21 DEL42 DEL14 DEL53 DEL8 DEL12 DEL42 DEL42 DEL32 DEL62 DEL42 DEL42 DEL45 DEL42 DEL42 DEL32 DEL42 DEL32 DEL27 DEL32 DEL21 DEL42 DEL42 DEL45 DEL42 DEL42 DEL32 DEL32 DEL21 DEL53 DEL8 DEL25 DEL42 DEL42 DEL32 DEL14 DEL42 DEL43