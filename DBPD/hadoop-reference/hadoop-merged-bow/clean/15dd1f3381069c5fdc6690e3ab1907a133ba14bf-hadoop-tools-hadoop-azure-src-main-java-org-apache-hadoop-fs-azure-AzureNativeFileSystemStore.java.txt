HADOOP-13675. Bug in return value for delete() calls in WASB. Contributed by Dushyanth

-  private static FileMetadata getDirectoryInList(
+  private static FileMetadata getFileMetadataInList(
-      if (current.isDir() && current.getKey().equals(key)) {
+      if (current.getKey().equals(key)) {
-          FileMetadata existing = getDirectoryInList(fileMetadata, blobKey);
+          FileMetadata existing = getFileMetadataInList(fileMetadata, blobKey);
-          if (getDirectoryInList(fileMetadata, dirKey) == null) {
+          if (getFileMetadataInList(fileMetadata, dirKey) == null) {
-          FileMetadata existing = getDirectoryInList(aFileMetadataList, blobKey);
+          FileMetadata existing = getFileMetadataInList(aFileMetadataList, blobKey);
-            if (getDirectoryInList(aFileMetadataList, dirKey) == null) {
+            if (getFileMetadataInList(aFileMetadataList, dirKey) == null) {
+  /**
+   * API implementation to delete a blob in the back end azure storage.
+   */
-  public void delete(String key, SelfRenewingLease lease) throws IOException {
+  public boolean delete(String key, SelfRenewingLease lease) throws IOException {
-        return;
+        return true;
+        return true;
+      } else {
+        return false;
+  /**
+   * API implementation to delete a blob in the back end azure storage.
+   */
-  public void delete(String key) throws IOException {
+  public boolean delete(String key) throws IOException {
-      delete(key, null);
+      return delete(key, null);
-            delete(key, lease);
+            return delete(key, lease);

UPD42 INS29 UPD39 INS29 UPD39 INS65 INS65 INS66 INS66 INS41 MOV32 INS8 MOV32 INS41 INS41 INS9 INS9 INS9 UPD42 UPD42 INS41 UPD42 MOV32 UPD42 DEL42 DEL42 DEL32 DEL27 DEL21 DEL21