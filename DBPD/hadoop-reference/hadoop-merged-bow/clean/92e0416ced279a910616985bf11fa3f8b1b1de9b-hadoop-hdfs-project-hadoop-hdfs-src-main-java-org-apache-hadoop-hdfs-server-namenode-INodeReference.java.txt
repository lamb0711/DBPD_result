HDFS-4727. Update inodeMap after deleting files/directories/snapshots.  Contributed by Jing Zhao


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1470756 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
-      BlocksMapUpdateInfo collectedBlocks) throws QuotaExceededException {
-    return referred.cleanSubtree(snapshot, prior, collectedBlocks);
+      BlocksMapUpdateInfo collectedBlocks, final List<INode> removedINodes)
+      throws QuotaExceededException {
+    return referred.cleanSubtree(snapshot, prior, collectedBlocks,
+        removedINodes);
-  public final void destroyAndCollectBlocks(BlocksMapUpdateInfo collectedBlocks) {
+  public final void destroyAndCollectBlocks(
+      BlocksMapUpdateInfo collectedBlocks, final List<INode> removedINodes) {
-      referred.destroyAndCollectBlocks(collectedBlocks);
+      referred.destroyAndCollectBlocks(collectedBlocks, removedINodes);

INS26 INS40 INS44 INS44 INS83 INS74 INS42 INS83 INS74 INS42 INS43 INS43 INS43 INS43 INS42 INS42 INS42 INS42 INS42 INS42