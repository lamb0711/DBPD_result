HADOOP-15809. ABFS: better exception handling when making getAccessToken call.
Contributed by Da Zhou

-  private static class HttpException extends IOException {
+
+  /**
+   * This exception class contains the http error code,
+   * requestId and error message, it is thrown when AzureADAuthenticator
+   * failed to get the Azure Active Directory token.
+   */
+  public static class HttpException extends IOException {
+    /**
+     * Gets Http error status code.
+     * @return  http error code.
+     */
+    /**
+     * Gets http request id .
+     * @return  http request id.
+     */
-    String requestId;
-    String httpExceptionMessage = null;
-      requestId = "";
-        requestId = e.requestId;
-        httpExceptionMessage = e.getMessage();
+        ex = e;
-      if (ex != null) {
-        throw ex;
-      }
-      if (httperror != 0) {
-        throw new IOException(httpExceptionMessage);
-      }
+      throw ex;
-        String responseBody = consumeInputStream(conn.getInputStream(), 1024);
+        String responseBody = consumeInputStream(conn.getErrorStream(), 1024);
-                        + " Content-Type: " + responseContentType
+                        + "\nContent-Type: " + responseContentType
-                        + " First 1K of Body: " + responseBody;
+                        + "\nFirst 1K of Body: " + responseBody;

INS29 UPD83 INS65 INS29 INS29 MOV25 INS66 INS66 INS66 INS65 INS65 INS65 INS65 MOV38 INS66 INS66 INS66 INS66 UPD42 INS42 UPD45 UPD45 UPD42 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL43 DEL42 DEL33 DEL59 DEL60 DEL42 DEL45 DEL7 DEL21 DEL42 DEL40 DEL7 DEL21 DEL42 DEL42 DEL32 DEL42 DEL33 DEL27 DEL42 DEL34 DEL27 DEL42 DEL43 DEL42 DEL14 DEL53 DEL8 DEL25 DEL8 DEL25