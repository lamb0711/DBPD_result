HDFS-14508. RBF: Clean-up and refactor UI components. Contributed by Takanobu Asanuma.

-import org.apache.hadoop.hdfs.server.federation.router.RouterServiceState;
-  private FederationMetrics getFederationMetrics() throws IOException {
-    FederationMetrics metrics = getRouter().getMetrics();
+  private RBFMetrics getRBFMetrics() throws IOException {
+    RBFMetrics metrics = getRouter().getMetrics();
-      return getFederationMetrics().getUsedCapacity();
+      return getRBFMetrics().getUsedCapacity();
-      return getFederationMetrics().getRemainingCapacity();
+      return getRBFMetrics().getRemainingCapacity();
-      return getFederationMetrics().getTotalCapacity();
+      return getRBFMetrics().getTotalCapacity();
-      return getFederationMetrics().getProvidedSpace();
+      return getRBFMetrics().getProvidedSpace();
-      if (getRouter().isRouterState(RouterServiceState.SAFEMODE)) {
-        return "Safe mode is ON. " + this.getSafeModeTip();
-      }
+      return getRBFMetrics().getSafemode();
-    return "";
-  }
-
-  private String getSafeModeTip() throws IOException {
-    Router rt = getRouter();
-    String cmd = "Use \"hdfs dfsrouteradmin -safemode leave\" "
-        + "to turn safe mode off.";
-    if (rt.isRouterState(RouterServiceState.INITIALIZING)
-        || rt.isRouterState(RouterServiceState.UNINITIALIZED)) {
-      return "Router is in" + rt.getRouterState()
-          + "mode, the router will immediately return to "
-          + "normal mode after some time. " + cmd;
-    } else if (rt.isRouterState(RouterServiceState.SAFEMODE)) {
-      return "It was turned on manually. " + cmd;
-    }
-    return "";
-      return getFederationMetrics().getNumBlocks();
+      return getRBFMetrics().getNumBlocks();
-      return getFederationMetrics().getNumOfMissingBlocks();
+      return getRBFMetrics().getNumOfMissingBlocks();
-      return getFederationMetrics().getNumOfBlocksPendingReplication();
+      return getRBFMetrics().getNumOfBlocksPendingReplication();
-      return getFederationMetrics().getNumOfBlocksPendingReplication();
+      return getRBFMetrics().getNumOfBlocksPendingReplication();
-      return getFederationMetrics().getNumOfBlocksUnderReplicated();
+      return getRBFMetrics().getNumOfBlocksUnderReplicated();
-      return getFederationMetrics().getNumOfBlocksUnderReplicated();
+      return getRBFMetrics().getNumOfBlocksUnderReplicated();
-      return getFederationMetrics().getNumOfBlocksPendingDeletion();
+      return getRBFMetrics().getNumOfBlocksPendingDeletion();
-      return getFederationMetrics().getNumFiles();
+      return getRBFMetrics().getNumFiles();
-      return getFederationMetrics().getNumLiveNodes();
+      return getRBFMetrics().getNumLiveNodes();
-      return getFederationMetrics().getNumDeadNodes();
+      return getRBFMetrics().getNumDeadNodes();
-      return getFederationMetrics().getNumStaleNodes();
+      return getRBFMetrics().getNumStaleNodes();
-      return getFederationMetrics().getNumDecomLiveNodes();
+      return getRBFMetrics().getNumDecomLiveNodes();
-      return getFederationMetrics().getNumDecomDeadNodes();
+      return getRBFMetrics().getNumDecomDeadNodes();
-      return getFederationMetrics().getNumDecommissioningNodes();
+      return getRBFMetrics().getNumDecommissioningNodes();
-      return getFederationMetrics().getNumInMaintenanceLiveDataNodes();
+      return getRBFMetrics().getNumInMaintenanceLiveDataNodes();
-      return getFederationMetrics().getNumInMaintenanceDeadDataNodes();
+      return getRBFMetrics().getNumInMaintenanceDeadDataNodes();
-      return getFederationMetrics().getNumEnteringMaintenanceDataNodes();
+      return getRBFMetrics().getNumEnteringMaintenanceDataNodes();
+    try {
+      return getRBFMetrics().isSecurityEnabled();
+    } catch (IOException e) {
+      LOG.debug("Failed to get security status.",
+          e.getMessage());
+    }

MOV31 MOV31 MOV31 UPD43 UPD42 MOV78 MOV78 UPD42 MOV78 UPD42 MOV78 MOV78 UPD42 MOV78 UPD42 MOV78 UPD83 INS39 INS42 UPD42 MOV41 MOV41 MOV41 MOV41 INS54 MOV41 UPD43 INS8 INS12 UPD42 INS41 INS41 INS44 INS8 INS32 INS32 MOV43 INS42 INS21 MOV32 UPD42 MOV42 INS32 INS42 INS32 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 INS45 INS32 UPD42 MOV42 UPD42 MOV42 DEL40 DEL26 DEL40 DEL32 DEL45 DEL52 DEL42 DEL32 DEL27 DEL41 DEL8 DEL25 DEL45 DEL41 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL32 DEL59 DEL60 DEL42 DEL43 DEL42 DEL45 DEL45 DEL27 DEL59 DEL60 DEL42 DEL42 DEL40 DEL32 DEL40 DEL32 DEL27 DEL45 DEL32 DEL45 DEL45 DEL42 DEL27 DEL41 DEL8 DEL42 DEL42 DEL40 DEL32 DEL45 DEL42 DEL27 DEL41 DEL8 DEL25 DEL25 DEL45 DEL41 DEL83 DEL39 DEL42 DEL8 DEL31