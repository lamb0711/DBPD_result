HDFS-11960. Successfully closed files can stay under-replicated. Contributed by Kihwal Lee.

-    if (storedBlock != null) {
+    if (storedBlock != null &&
+        block.getGenerationStamp() == storedBlock.getGenerationStamp()) {

INS27 MOV27 INS27 INS32 INS32 INS42 INS42 INS42 INS42