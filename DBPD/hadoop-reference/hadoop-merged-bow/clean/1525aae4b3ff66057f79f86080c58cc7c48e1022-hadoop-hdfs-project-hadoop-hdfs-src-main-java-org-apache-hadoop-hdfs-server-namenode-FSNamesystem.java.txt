HDFS-2826. Add test case for HDFS-1476 (safemode can initialize replication queues before exiting) (todd)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1235067 13f79535-47bb-0310-9956-ffa450edef68

+import com.google.common.annotations.VisibleForTesting;
+
-    private int blockSafe;
+    int blockSafe;
-    private boolean initializedReplQueues = false;
+    boolean initializedReplQueues = false;
-      if (isPopulatingReplQueues()) {
-        LOG.warn("Replication queues already initialized.");
-      }
+      assert !isPopulatingReplQueues() : "Already initialized repl queues";
+
+  @VisibleForTesting
+  public SafeModeInfo getSafeModeInfoForTests() {
+    return safeMode;
+  }

INS26 INS40 INS31 INS78 INS83 INS43 INS42 INS8 INS42 INS42 INS41 INS6 INS42 INS38 INS45 MOV32 DEL83 DEL83 DEL42 DEL42 DEL45 DEL32 DEL21 DEL8 DEL25