YARN-3893. Both RM in active state when Admin#transitionToActive failure from refeshAll() (Bibin A Chundatt via rohithsharmaks)

+  @SuppressWarnings("unchecked")
-      // call all refresh*s for active RM to get the updated configurations.
-      refreshAll();
-      RMAuditLogger.logSuccess(user.getShortUserName(),
-          "transitionToActive", "RMHAProtocolService");
+    try {
+      // call all refresh*s for active RM to get the updated configurations.
+      refreshAll();
+    } catch (Exception e) {
+      LOG.error("RefreshAll failed so firing fatal event", e);
+      rmContext
+          .getDispatcher()
+          .getEventHandler()
+          .handle(
+          new RMFatalEvent(RMFatalEventType.TRANSITION_TO_ACTIVE_FAILED, e));
+      throw new ServiceFailedException(
+          "Error on refreshAll during transistion to Active", e);
+    }
+    RMAuditLogger.logSuccess(user.getShortUserName(), "transitionToActive",
+        "RMHAProtocolService");

INS79 INS42 INS45 INS54 MOV21 INS8 INS12 MOV21 INS44 INS8 INS43 INS42 INS21 INS21 INS53 INS42 INS32 INS32 INS14 INS42 INS42 INS45 INS42 INS32 INS42 INS14 INS43 INS45 INS42 INS32 INS42 INS43 INS40 INS42 INS42 INS42 INS42 INS42