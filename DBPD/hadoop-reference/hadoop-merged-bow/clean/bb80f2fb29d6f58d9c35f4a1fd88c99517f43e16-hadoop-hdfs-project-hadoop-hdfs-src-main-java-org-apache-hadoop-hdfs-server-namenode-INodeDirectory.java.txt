HDFS-4436. Change INode.recordModification(..) to return only the current inode and remove the updateCircularList parameter from some methods in INodeDirectoryWithSnapshot.Diff.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1438203 13f79535-47bb-0310-9956-ffa450edef68

-      s.save2Snapshot(latest, this);
+      s.saveSelf2Snapshot(latest, this);
-    s.save2Snapshot(latest, this);
+    s.saveSelf2Snapshot(latest, this);
-  public Pair<? extends INode, ? extends INode> recordModification(Snapshot latest) {
+  public INodeDirectory recordModification(Snapshot latest) {
-      return null;
+      return this;
-    return replaceSelf4INodeDirectoryWithSnapshot(latest)
-        .save2Snapshot(latest, this);
+    final INodeDirectoryWithSnapshot withSnapshot
+        = replaceSelf4INodeDirectoryWithSnapshot(latest);
+    withSnapshot.saveSelf2Snapshot(latest, this);
+    return withSnapshot;
-   * @return a pair of inodes, where the left inode is the original child and
-   *         the right inode is the snapshot copy of the child; see also
-   *         {@link INode#createSnapshotCopy()}.
+   * @return the child inode, which may be replaced.
-  public Pair<? extends INode, ? extends INode> saveChild2Snapshot(
-      INode child, Snapshot latest) {
+  public INode saveChild2Snapshot(INode child, Snapshot latest) {
-      return null;
+      return child;

INS43 MOV43 UPD42 MOV42 INS60 INS21 INS41 INS83 INS43 INS59 INS32 INS42 UPD66 UPD42 INS42 INS42 MOV32 INS42 UPD42 MOV42 MOV42 MOV52 INS52 INS42 UPD42 DEL42 DEL43 DEL43 DEL76 DEL42 DEL43 DEL76 DEL74 DEL33 DEL32 DEL41 DEL66 DEL42 DEL42 DEL68 DEL65 DEL66 DEL42 DEL43 DEL76 DEL42 DEL43 DEL76 DEL74 DEL33