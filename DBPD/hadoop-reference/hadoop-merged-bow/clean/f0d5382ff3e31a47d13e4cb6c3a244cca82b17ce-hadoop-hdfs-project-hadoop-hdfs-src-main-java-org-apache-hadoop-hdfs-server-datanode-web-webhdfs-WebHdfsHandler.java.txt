HDFS-6962. ACL inheritance conflicts with umaskmode. Contributed by Chris Nauroth.

+import org.apache.hadoop.fs.permission.FsCreateModes;
-    final FsPermission permission = params.permission();
+    final FsPermission unmaskedPermission = params.unmaskedPermission();
+    final FsPermission permission = unmaskedPermission == null ?
+        params.permission() :
+        FsCreateModes.create(params.permission(), unmaskedPermission);

INS26 INS40 INS60 INS83 MOV43 INS59 INS43 INS42 INS32 INS42 INS16 INS42 INS42 INS27 MOV32 INS32 INS42 INS33 INS42 INS42 INS32 INS42 INS42 INS42