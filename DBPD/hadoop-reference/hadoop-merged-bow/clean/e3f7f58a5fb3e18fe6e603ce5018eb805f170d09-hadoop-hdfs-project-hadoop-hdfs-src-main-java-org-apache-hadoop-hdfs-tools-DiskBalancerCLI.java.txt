HDFS-10599. DiskBalancer: Execute CLI via Shell. Contributed by Manoj Govindassamy.

+  private final PrintStream printStream;
+
+    this(conf, System.out);
+  }
+
+  public DiskBalancerCLI(Configuration conf, final PrintStream printStream) {
+    this.printStream = printStream;
-    return run(args, System.out);
-  }
-
-  /**
-   * Execute the command with the given arguments.
-   *
-   * @param args command specific arguments.
-   * @param out  the output stream used for printing
-   * @return exit code.
-   * @throws Exception
-   */
-  public int run(String[] args, final PrintStream out) throws Exception {
-    return dispatch(cmd, opts, out);
+    return dispatch(cmd, opts);
-  private int dispatch(CommandLine cmd, Options opts, final PrintStream out)
+  private int dispatch(CommandLine cmd, Options opts)
-      currentCommand = new ReportCommand(getConf(), out);
+      currentCommand = new ReportCommand(getConf(), this.printStream);

INS23 INS31 INS83 INS83 MOV43 INS59 MOV83 UPD42 MOV42 MOV44 MOV44 MOV8 MOV43 INS42 INS17 INS43 UPD42 UPD42 MOV46 INS21 MOV42 MOV60 MOV60 INS42 INS40 UPD42 MOV42 INS7 INS22 INS42 UPD42 INS42 UPD42 INS52 INS42 INS22 INS52 INS42 DEL43 DEL85 DEL5 DEL42 DEL42 DEL42 DEL42 DEL32 DEL41 DEL40 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL66 DEL65 DEL42 DEL65 DEL29 DEL39 DEL31 DEL83 DEL42 DEL44 DEL42