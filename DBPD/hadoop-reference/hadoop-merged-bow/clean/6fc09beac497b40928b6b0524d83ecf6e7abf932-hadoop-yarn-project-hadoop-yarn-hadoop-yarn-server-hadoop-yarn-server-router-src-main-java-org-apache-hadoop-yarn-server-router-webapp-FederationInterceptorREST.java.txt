YARN-7434. Router getApps REST invocation fails with multiple RMs. Contributed by Inigo Goiri.

+    // HttpServletRequest does not work with ExecutorCompletionService.
+    // Create a duplicate hsr.
+    final HttpServletRequest hsrCopy = clone(hsr);
-      // HttpServletRequest does not work with ExecutorCompletionService.
-      // Create a duplicate hsr.
-      final HttpServletRequest hsrCopy = clone(hsr);
+    @SuppressWarnings("unchecked")
+    final Map<String, String[]> parameterMap =
+        (Map<String, String[]>) hsr.getParameterMap();
+    final String pathInfo = hsr.getPathInfo();
+    final String user = hsr.getRemoteUser();
+    final Principal principal = hsr.getUserPrincipal();
+    final String mediaType =
+        RouterWebServiceUtil.getMediaTypeFromHttpServletRequest(
+            hsr, AppsInfo.class);
-          return hsr.getParameterMap();
+          return parameterMap;
-          return hsr.getPathInfo();
+          return pathInfo;
-          return hsr.getRemoteUser();
+          return user;
-          return hsr.getUserPrincipal();
+          return principal;
-            return RouterWebServiceUtil.getMediaTypeFromHttpServletRequest(
-                hsr, AppsInfo.class);
+            return mediaType;

MOV60 INS60 INS60 INS60 INS60 INS60 INS79 INS83 INS74 INS59 INS83 MOV43 INS59 INS83 MOV43 INS59 INS83 MOV43 INS59 INS83 INS43 INS59 INS42 INS45 INS43 INS43 INS5 INS42 INS11 INS42 MOV32 INS42 MOV32 INS42 MOV32 INS42 INS42 MOV32 INS42 INS42 INS43 INS85 MOV74 MOV32 INS42 INS74 INS43 INS43 INS43 INS43 INS43 INS5 INS42 INS42 INS42 INS42 INS42 INS43 INS85 INS42 INS42 INS42 INS42 INS42 INS42