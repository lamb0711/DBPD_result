YARN-8242. YARN NM: OOM error while reading back the state store on recovery. Contributed by Pradeep Ambati and Kanwaljeet Sachdev

+import java.util.Map.Entry;
-    List<ContainerManagerApplicationProto> applications;
+    RecoveryIterator<ContainerManagerApplicationProto> it = null;
-    public List<ContainerManagerApplicationProto> getApplications() {
-      return applications;
+    public RecoveryIterator<ContainerManagerApplicationProto> getIterator() {
+      return it;
-
+    private final ContainerId containerId;
+
+    RecoveredContainerState(ContainerId containerId){
+      this.containerId = containerId;
+    }
+
+    public ContainerId getContainerId() {
+      return containerId;
+    }
-    Map<String, RecoveredUserResources> userResources =
-        new HashMap<String, RecoveredUserResources>();
+    RecoveryIterator<Entry<String, RecoveredUserResources>> it = null;
-    public Map<String, RecoveredUserResources> getUserResources() {
-      return userResources;
+    public RecoveryIterator<Entry<String, RecoveredUserResources>> getIterator() {
+      return it;
-    List<DeletionServiceDeleteTaskProto> tasks;
+    RecoveryIterator<DeletionServiceDeleteTaskProto> it = null;
-    public List<DeletionServiceDeleteTaskProto> getTasks() {
-      return tasks;
+    public RecoveryIterator<DeletionServiceDeleteTaskProto> getIterator(){
+      return it;
-    Map<ApplicationAttemptId, MasterKey> applicationMasterKeys;
+    RecoveryIterator<Entry<ApplicationAttemptId, MasterKey>> it = null;
+
+    public RecoveryIterator<Entry<ApplicationAttemptId, MasterKey>> getIterator() {
+      return it;
+    }
-    public Map<ApplicationAttemptId, MasterKey> getApplicationMasterKeys() {
-      return applicationMasterKeys;
-    }
-    Map<ContainerId, Long> activeTokens;
+    RecoveryIterator<Entry<ContainerId, Long>> it = null;
+
+    public RecoveryIterator<Entry<ContainerId, Long>> getIterator() {
+      return it;
+    }
-    public Map<ContainerId, Long> getActiveTokens() {
-      return activeTokens;
-    }
-   * Load the state of containers
-   * @return recovered state for containers
-   * @throws IOException
+   * get the Recovered Container State Iterator
+   * @return recovery iterator
-  public abstract List<RecoveredContainerState> loadContainersState()
+  public abstract RecoveryIterator<RecoveredContainerState> getContainerStateIterator()

INS26 MOV55 INS40 MOV31 MOV31 INS23 INS31 INS31 UPD42 UPD42 UPD74 UPD42 UPD74 UPD74 UPD42 INS83 INS83 INS43 INS59 INS42 INS44 INS8 INS83 INS43 INS42 INS8 UPD74 INS74 UPD42 UPD74 MOV74 UPD74 MOV74 UPD42 UPD74 UPD74 UPD42 INS74 INS74 UPD42 UPD43 UPD43 UPD42 INS33 UPD43 INS42 INS42 INS43 INS42 INS21 INS42 INS41 UPD43 UPD74 MOV74 UPD42 INS33 INS43 UPD74 MOV74 UPD43 UPD42 INS33 UPD43 UPD43 UPD74 MOV74 UPD42 INS33 UPD43 UPD74 MOV74 INS43 INS74 UPD42 INS33 INS43 INS74 UPD66 UPD66 UPD42 UPD42 UPD42 UPD42 INS42 INS7 INS42 UPD42 UPD43 INS42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 UPD42 UPD43 UPD42 INS42 INS43 MOV43 MOV43 INS42 INS43 MOV43 MOV43 UPD42 INS22 INS42 UPD42 UPD42 UPD42 UPD42 INS42 INS42 INS52 INS42 DEL42 DEL43 DEL42 DEL43 DEL14 DEL42 DEL65