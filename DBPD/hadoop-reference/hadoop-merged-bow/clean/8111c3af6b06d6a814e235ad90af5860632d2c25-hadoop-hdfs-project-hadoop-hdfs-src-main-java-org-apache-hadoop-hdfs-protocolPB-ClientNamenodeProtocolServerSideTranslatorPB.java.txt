HDFS-5224. Refactor PathBasedCache* methods to use a Path rather than a String. Contributed by Chris Nauroth.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1531406 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.fs.Path;
+import org.apache.hadoop.hdfs.protocol.AddPathBasedCacheDirectiveException.EmptyPathError;
+import org.apache.commons.lang.StringUtils;
+
-      PathBasedCacheDirective directive =
-          new PathBasedCacheDirective(proto.getPath(), proto.getPool());
+      if (StringUtils.isEmpty(proto.getPath())) {
+        throw new EmptyPathError();
+      }
+      PathBasedCacheDirective directive = new PathBasedCacheDirective.Builder().
+          setPath(new Path(proto.getPath())).
+          setPool(proto.getPool()).
+          build();
-              setPath(directive.getPath()).
+              setPath(directive.getPath().toUri().getPath()).

INS26 INS26 INS26 INS40 INS40 INS40 INS25 INS32 INS8 MOV43 INS42 INS42 INS32 INS53 INS32 INS42 INS42 INS14 INS32 INS42 INS43 INS32 INS42 MOV32 INS42 INS14 INS42 MOV14 INS43 INS43 INS32 INS40 INS42 INS32 INS42 MOV32 INS42 DEL42 DEL43