HDFS-6247. Avoid timeouts for replaceBlock() call by sending intermediate responses to Balancer (vinayakumarb)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1617799 13f79535-47bb-0310-9956-ffa450edef68

-            mirrorAddr, null, targets);
+            mirrorAddr, null, targets, false);
-    
+    DataOutputStream replyOut = new DataOutputStream(getOutputStream());
-      blockReceiver.receiveBlock(null, null, null, null, 
-          dataXceiverServer.balanceThrottler, null);
+      blockReceiver.receiveBlock(null, null, replyOut, null, 
+          dataXceiverServer.balanceThrottler, null, true);
+      IOUtils.closeStream(replyOut);

INS60 INS43 INS59 INS42 INS42 INS14 INS21 INS43 INS32 INS32 INS42 INS42 INS42 INS9 INS42 INS42 INS42 INS9 DEL33