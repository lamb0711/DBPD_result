HDFS-12543. Ozone : allow create key without specifying size. Contributed by Chen Liang.

+import org.apache.hadoop.ozone.ksm.helpers.KsmKeyLocationInfo;
+import org.apache.hadoop.ozone.ksm.helpers.OpenKeySession;
-   * Allocate a block to a container, the block is returned to the client.
+   * Open the given key and return an open key session.
-   * @return KsmKeyInfo isntacne that client uses to talk to container.
+   * @return OpenKeySession instance that client uses to talk to container.
-  KsmKeyInfo allocateKey(KsmKeyArgs args) throws IOException;
+  OpenKeySession openKey(KsmKeyArgs args) throws IOException;
+
+  /**
+   * Commit a key. This will make the change from the client visible. The client
+   * is identified by the clientID.
+   *
+   * @param args the key to commit
+   * @param clientID the client identification
+   * @throws IOException
+   */
+  void commitKey(KsmKeyArgs args, int clientID) throws IOException;
+
+  /**
+   * Allocate a new block, it is assumed that the client is having an open key
+   * session going on. This block will be appended to this open key session.
+   *
+   * @param args the key to append
+   * @param clientID the client identification
+   * @return an allocated block
+   * @throws IOException
+   */
+  KsmKeyLocationInfo allocateBlock(KsmKeyArgs args, int clientID)
+      throws IOException;

INS26 INS26 INS40 INS40 INS31 INS31 UPD43 UPD42 INS29 INS39 INS42 INS44 INS44 INS43 INS29 INS43 INS42 INS44 INS44 INS43 UPD42 INS65 INS65 INS65 INS65 INS43 INS42 INS39 INS42 INS42 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS39 INS42 INS42 UPD66 UPD66 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS42 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS42