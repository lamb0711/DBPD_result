HADOOP-7333. Performance improvement in PureJavaCrc32. Contributed by Eric Caspole.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1128425 13f79535-47bb-0310-9956-ffa450edef68

+    int localCrc = crc;
-      int c0 = b[off++] ^ crc;
-      int c1 = b[off++] ^ (crc >>>= 8);
-      int c2 = b[off++] ^ (crc >>>= 8);
-      int c3 = b[off++] ^ (crc >>>= 8);
-      crc = (T8_7[c0 & 0xff] ^ T8_6[c1 & 0xff])
+      int c0 = b[off++] ^ localCrc;
+      int c1 = b[off++] ^ (localCrc >>>= 8);
+      int c2 = b[off++] ^ (localCrc >>>= 8);
+      int c3 = b[off++] ^ (localCrc >>>= 8);
+      localCrc = (T8_7[c0 & 0xff] ^ T8_6[c1 & 0xff])
-      crc ^= (T8_3[b[off++] & 0xff] ^ T8_2[b[off++] & 0xff])
+      localCrc ^= (T8_3[b[off++] & 0xff] ^ T8_2[b[off++] & 0xff])
-      crc = (crc >>> 8) ^ T8_0[(crc ^ b[off++]) & 0xff];
+      localCrc = (localCrc >>> 8) ^ T8_0[(localCrc ^ b[off++]) & 0xff];
+    
+    // Publish crc out to object
+    crc = localCrc;

INS60 INS21 INS39 INS59 INS7 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42