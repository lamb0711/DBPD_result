HDFS-7837. Erasure Coding: allocate and persist striped blocks in NameNode. Contributed by Jing Zhao.

-   * Sets the maximum allocated block ID for this filesystem. This is
+   * Sets the maximum allocated contiguous block ID for this filesystem. This is
-  public void setLastAllocatedBlockId(long blockId) {
+  public void setLastAllocatedContiguousBlockId(long blockId) {
-   * Gets the maximum sequentially allocated block ID for this filesystem
+   * Gets the maximum sequentially allocated contiguous block ID for this
+   * filesystem
-  public long getLastAllocatedBlockId() {
+  public long getLastAllocatedContiguousBlockId() {
+   * Sets the maximum allocated striped block ID for this filesystem. This is
+   * the basis for allocating new block IDs.
+   */
+  public void setLastAllocatedStripedBlockId(long blockId) {
+    blockGroupIdGenerator.skipTo(blockId);
+  }
+
+  /**
+   * Gets the maximum sequentially allocated striped block ID for this
+   * filesystem
+   */
+  public long getLastAllocatedStripedBlockId() {
+    return blockGroupIdGenerator.getCurrentValue();
+  }
+
+  /**
-  public long nextBlockId() {
+  public long nextContiguousBlockId() {
-  public long nextBlockGroupId() {
+  public long nextStripedBlockId() {
-  public static long convertToGroupID(long id) {
+  public static long convertToStripedID(long id) {

INS31 INS31 UPD42 INS29 INS83 INS39 INS42 MOV8 INS29 INS83 INS39 INS42 INS44 INS8 UPD42 INS8 UPD42 UPD42 UPD42 INS65 INS65 INS39 INS42 INS21 INS41 UPD66 INS66 INS66 INS66 INS66 INS32 UPD66 INS66 INS32 INS42 INS42 INS42 INS42 INS42