HDFS-12467. Ozone: SCM: NodeManager should log when it comes out of chill mode. Contributed by Nandakumar.

-import java.util.Optional;
+import java.util.concurrent.atomic.AtomicBoolean;
-  private Optional<Boolean> inManualChillMode;
+  /**
+   * During start up of SCM, it will enter into chill mode and will be there
+   * until number of Datanodes registered reaches {@code chillModeNodeCount}.
+   * This flag is for tracking startup chill mode.
+   */
+  private AtomicBoolean inStartupChillMode;
+  /**
+   * Administrator can put SCM into chill mode manually.
+   * This flag is for tracking manual chill mode.
+   */
+  private AtomicBoolean inManualChillMode;
-    this.inManualChillMode = Optional.empty();
+
+    LOG.info("Entering startup chill mode.");
+    this.inStartupChillMode = new AtomicBoolean(true);
+    this.inManualChillMode = new AtomicBoolean(false);
-    if (inManualChillMode.isPresent()) {
-      return !inManualChillMode.get();
-    }
-
-    return (totalNodes.get() >= getMinimumChillModeNodes());
+    return !inStartupChillMode.get() && !inManualChillMode.get();
-    this.inManualChillMode = Optional.empty();
+    LOG.info("Clearing manual chill mode flag.");
+    this.inManualChillMode.getAndSet(false);
-    if (inManualChillMode.isPresent() && inManualChillMode.get()) {
-      return "Manual chill mode is set to true." +
-          getNodeStatus();
-    }
-
-    if (inManualChillMode.isPresent() && !inManualChillMode.get()) {
-      return "Manual chill mode is set to false." +
-          getNodeStatus();
-    }
-
-    if (isOutOfNodeChillMode()) {
-      return "Out of chill mode." + getNodeStatus();
-    } else {
+    if (inStartupChillMode.get()) {
+    if (inManualChillMode.get()) {
+      return "Out of startup chill mode, but in manual chill mode." +
+          getNodeStatus();
+    }
+    return "Out of chill mode." + getNodeStatus();
-    if (this.inManualChillMode.isPresent()) {
-      return this.inManualChillMode.get();
-    }
-    return false;
+    return inManualChillMode.get();
-   * criteria of exiting the chill mode.
+   * criteria of exiting the chill mode. This will exit from both startup
+   * and manual chill mode.
-    this.inManualChillMode = Optional.of(false);
+    if(inStartupChillMode.get()) {
+      LOG.info("Leaving startup chill mode.");
+      inStartupChillMode.getAndSet(false);
+    }
+    if(inManualChillMode.get()) {
+      LOG.info("Leaving manual chill mode.");
+      inManualChillMode.getAndSet(false);
+    }
-    this.inManualChillMode = Optional.of(true);
+    LOG.info("Entering manual chill mode.");
+    inManualChillMode.getAndSet(true);
+    if(inStartupChillMode.get() &&
+        totalNodes.get() >= getMinimumChillModeNodes()) {
+      inStartupChillMode.getAndSet(false);
+      LOG.info("Leaving startup chill mode.");
+    }
+
