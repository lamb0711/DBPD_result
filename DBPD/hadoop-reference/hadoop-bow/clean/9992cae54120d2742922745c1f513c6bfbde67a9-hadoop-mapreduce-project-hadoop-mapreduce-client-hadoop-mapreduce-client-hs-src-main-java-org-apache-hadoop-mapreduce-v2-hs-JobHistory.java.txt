Reverting the previous trunk merge since it added other unintended changes in addition


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1177127 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Comparator;
+  /*
+   * TODO Get rid of this once JobId has it's own comparator
+   */
+  private static final Comparator<JobId> JOB_ID_COMPARATOR = 
+    new Comparator<JobId>() {
+    @Override
+    public int compare(JobId o1, JobId o2) {
+      if (o1.getAppId().getClusterTimestamp() > 
+          o2.getAppId().getClusterTimestamp()) {
+        return 1;
+      } else if (o1.getAppId().getClusterTimestamp() < 
+          o2.getAppId().getClusterTimestamp()) {
+        return -1;
+      } else {
+        return o1.getId() - o2.getId();
+      }
+    }
+  };
+  
-    new ConcurrentSkipListMap<JobId, MetaInfo>();
+    new ConcurrentSkipListMap<JobId, MetaInfo>(JOB_ID_COMPARATOR);
-    new ConcurrentSkipListMap<JobId, JobHistory.MetaInfo>();
+    new ConcurrentSkipListMap<JobId, JobHistory.MetaInfo>(JOB_ID_COMPARATOR);
-    new ConcurrentSkipListMap<JobId, Job>();
+    new ConcurrentSkipListMap<JobId, Job>(JOB_ID_COMPARATOR);
-    SortedMap<JobId, Job> result = new TreeMap<JobId, Job>();
+    SortedMap<JobId, Job> result = new TreeMap<JobId, Job>(JOB_ID_COMPARATOR);
