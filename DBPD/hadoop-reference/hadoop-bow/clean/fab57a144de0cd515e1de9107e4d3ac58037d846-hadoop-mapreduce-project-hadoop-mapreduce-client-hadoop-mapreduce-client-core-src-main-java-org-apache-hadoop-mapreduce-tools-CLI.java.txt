MAPREDUCE-3792. Fix "bin/mapred job -list" to display all jobs instead of only the jobs owned by the user. Contributed by Jason Lowe.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1296721 13f79535-47bb-0310-9956-ffa450edef68

-  public static String dataPattern   = "%23s\t%10s\t%14d\t%12s\t%12s\t%10s\t%14d\t%14d\t%7dM\t%7sM\t%9dM\t%10s\n";
+  public static String dataPattern   = "%23s\t%10s\t%14d\t%12s\t%12s\t%10s\t%15s\t%15s\t%8s\t%8s\t%10s\t%10s\n";
+  private static String memPattern   = "%dM";
+  private static String UNAVAILABLE  = "N/A";
+      int numUsedSlots = job.getNumUsedSlots();
+      int numReservedSlots = job.getNumReservedSlots();
+      int usedMem = job.getUsedMem();
+      int rsvdMem = job.getReservedMem();
+      int neededMem = job.getNeededMem();
-          job.getNumUsedSlots(),
-          job.getNumReservedSlots(),
-          job.getUsedMem(),
-          job.getReservedMem(),
-          job.getNeededMem(),
+          numUsedSlots < 0 ? UNAVAILABLE : numUsedSlots,
+          numReservedSlots < 0 ? UNAVAILABLE : numReservedSlots,
+          usedMem < 0 ? UNAVAILABLE : String.format(memPattern, usedMem),
+          rsvdMem < 0 ? UNAVAILABLE : String.format(memPattern, rsvdMem),
+          neededMem < 0 ? UNAVAILABLE : String.format(memPattern, neededMem),
