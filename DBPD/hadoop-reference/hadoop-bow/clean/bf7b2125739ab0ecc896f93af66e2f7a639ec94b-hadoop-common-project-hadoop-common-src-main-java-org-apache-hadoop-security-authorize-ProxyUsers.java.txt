HADOOP-10498. Add support for proxy server. (daryn)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1587608 13f79535-47bb-0310-9956-ffa450edef68

+import java.net.InetSocketAddress;
+import java.util.HashSet;
+  public static final String CONF_HADOOP_PROXYSERVERS = "hadoop.proxyservers";
+  
+  private static Collection<String> proxyServers =
+    new HashSet<String>();
-    // remove alle existing stuff
+    // remove all existing stuff
+    proxyServers.clear();
+    // trusted proxy servers such as http proxies
+    for (String host : conf.getTrimmedStrings(CONF_HADOOP_PROXYSERVERS)) {
+      InetSocketAddress addr = new InetSocketAddress(host, 0);
+      if (!addr.isUnresolved()) {
+        proxyServers.add(addr.getAddress().getHostAddress());
+      }
+    }
+  public static synchronized boolean isProxyServer(String remoteAddr) { 
+    if(!init) {
+      refreshSuperUserGroupsConfiguration(); 
+    }
+    return proxyServers.contains(remoteAddr);
+  }
+
