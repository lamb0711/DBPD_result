YARN-9497. Support grouping by diagnostics for query results of scheduler and app activities. Contributed by Tao Yang.

+import org.apache.hadoop.yarn.server.resourcemanager.scheduler.activities.ActivitiesUtils;
+import org.apache.hadoop.yarn.server.resourcemanager.webapp.RMWSConsts;
-import java.util.ArrayList;
-  AppRequestAllocationInfo(List<ActivityNode> activityNodes) {
-    this.allocationAttempt = new ArrayList<>();
+  AppRequestAllocationInfo(List<ActivityNode> activityNodes,
+      RMWSConsts.ActivitiesGroupBy groupBy) {
-    for (ActivityNode attempt : activityNodes) {
-      ActivityNodeInfo containerInfo =
-          new ActivityNodeInfo(attempt.getName(), attempt.getState(),
-              attempt.getDiagnostic(), attempt.getNodeId());
-      this.allocationAttempt.add(containerInfo);
-    }
+    this.allocationAttempt = ActivitiesUtils
+        .getRequestActivityNodeInfos(activityNodes, groupBy);
