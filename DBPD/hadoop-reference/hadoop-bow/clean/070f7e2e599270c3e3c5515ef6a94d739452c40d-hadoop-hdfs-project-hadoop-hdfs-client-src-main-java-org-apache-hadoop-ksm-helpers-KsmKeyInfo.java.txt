HDFS-11920. Ozone : add key partition. Contributed by Chen Liang.

-
+import java.util.List;
+import java.util.stream.Collectors;
+
-  private final String containerName;
-  // name of the block id SCM assigned for the key
-  private final String blockID;
-  private final boolean shouldCreateContainer;
+  private List<KsmKeyLocationInfo> keyLocationList;
-      long dataSize, String blockID, String containerName,
-      boolean shouldCreateContainer, long creationTime,
+      List<KsmKeyLocationInfo> locationInfos, long dataSize, long creationTime,
-    this.containerName = containerName;
-    this.blockID = blockID;
-    this.shouldCreateContainer = shouldCreateContainer;
+    this.keyLocationList = locationInfos;
-  public String getBlockID() {
-    return blockID;
-  }
-
-  public String getContainerName() {
-    return containerName;
-  }
-
-  public boolean getShouldCreateContainer() {
-    return shouldCreateContainer;
+  public List<KsmKeyLocationInfo> getKeyLocationList() {
+    return keyLocationList;
-    private String containerName;
-    private String blockID;
-    private boolean shouldCreateContainer;
+    private List<KsmKeyLocationInfo> ksmKeyLocationInfos;
-    public Builder setBlockID(String block) {
-      this.blockID = block;
-      return this;
-    }
-
-    public Builder setContainerName(String container) {
-      this.containerName = container;
+    public Builder setKsmKeyLocationInfos(
+        List<KsmKeyLocationInfo> ksmKeyLocationInfoList) {
+      this.ksmKeyLocationInfos = ksmKeyLocationInfoList;
-    public Builder setShouldCreateContainer(boolean create) {
-      this.shouldCreateContainer = create;
-      return this;
-    }
-
-          volumeName, bucketName, keyName, dataSize, blockID, containerName,
-          shouldCreateContainer, creationTime, modificationTime);
+          volumeName, bucketName, keyName, ksmKeyLocationInfos,
+          dataSize, creationTime, modificationTime);
-        .setBlockKey(blockID)
-        .setContainerName(containerName)
-        .setShouldCreateContainer(shouldCreateContainer)
+        .addAllKeyLocationList(keyLocationList.stream()
+            .map(KsmKeyLocationInfo::getProtobuf).collect(Collectors.toList()))
+        keyInfo.getKeyLocationListList().stream()
+            .map(KsmKeyLocationInfo::getFromProtobuf)
+            .collect(Collectors.toList()),
-        keyInfo.getBlockKey(),
-        keyInfo.getContainerName(),
-        keyInfo.getShouldCreateContainer(),
