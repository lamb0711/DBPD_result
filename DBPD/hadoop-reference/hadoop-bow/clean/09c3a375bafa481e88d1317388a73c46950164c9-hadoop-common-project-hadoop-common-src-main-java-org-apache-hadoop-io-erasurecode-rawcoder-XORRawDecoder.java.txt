HADOOP-11920. Refactor some codes for erasure coders. Contributed by Kai Zheng.

-    assert(erasedIndexes.length == outputs.length);
-    assert(erasedIndexes.length <= 1);
+    resetBuffer(outputs[0]);
-    int bufSize = inputs[0].remaining();
+    int bufSize = getChunkSize();
-    // Set the output to zeros.
-    for (int j = 0; j < bufSize; j++) {
-      outputs[0].put(j, (byte) 0);
-    }
-
-  protected void doDecode(byte[][] inputs, int[] erasedIndexes,
-                          byte[][] outputs) {
-    assert(erasedIndexes.length == outputs.length);
-    assert(erasedIndexes.length <= 1);
+  protected void doDecode(byte[][] inputs,
+                          int[] erasedIndexes, byte[][] outputs) {
+    resetBuffer(outputs[0]);
-    int bufSize = inputs[0].length;
+    int bufSize = getChunkSize();
-    // Set the output to zeros.
-    for (int j = 0; j < bufSize; j++) {
-      outputs[0][j] = 0;
-    }
-
