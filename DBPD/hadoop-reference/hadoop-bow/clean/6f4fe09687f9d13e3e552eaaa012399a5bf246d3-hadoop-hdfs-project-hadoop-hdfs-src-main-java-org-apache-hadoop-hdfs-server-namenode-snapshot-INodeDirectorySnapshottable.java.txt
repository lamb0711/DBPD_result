HDFS-4447. Refactor INodeDirectoryWithSnapshot for supporting general INode diff lists.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1440216 13f79535-47bb-0310-9956-ffa450edef68

-        ((INodeDirectoryWithSnapshot) dir).getSnapshotDiffs() : null);
+        ((INodeDirectoryWithSnapshot) dir).getDiffs(): null);
-    addSnapshotDiff(s, this, true);
+    getDiffs().addSnapshotDiff(s, this, true);
-   * and delete all the corresponding SnapshotDiff.
+   * and delete all the corresponding DirectoryDiff.
-   * Recursively delete SnapshotDiff associated with the given snapshot under a
+   * Recursively delete DirectoryDiff associated with the given snapshot under a
-      sdir.deleteSnapshotDiff(snapshot, collectedBlocks);
+      sdir.getDiffs().deleteSnapshotDiff(snapshot, collectedBlocks);
-      for(SnapshotDiff diff : getSnapshotDiffs()) {
+      for(DirectoryDiff diff : getDiffs()) {
-            final Iterator<SnapshotDiff> i = getSnapshotDiffs().iterator();
-            private SnapshotDiff next = findNext();
+            final Iterator<DirectoryDiff> i = getDiffs().iterator();
+            private DirectoryDiff next = findNext();
-            private SnapshotDiff findNext() {
+            private DirectoryDiff findNext() {
-                final SnapshotDiff diff = i.next();
+                final DirectoryDiff diff = i.next();
