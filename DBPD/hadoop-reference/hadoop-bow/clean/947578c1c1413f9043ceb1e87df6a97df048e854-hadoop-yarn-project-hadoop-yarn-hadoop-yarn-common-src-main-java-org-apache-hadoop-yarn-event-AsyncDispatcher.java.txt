YARN-2991. Fixed DrainDispatcher to reuse the draining code path in AsyncDispatcher. Contributed by Rohith Sharmaks.

+import com.google.common.annotations.VisibleForTesting;
+
+
+  @VisibleForTesting
+  protected boolean isDrained() {
+    return this.drained;
+  }
