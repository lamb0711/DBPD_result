HADOOP-12563. Updated utility (dtutil) to create/modify token files. Contributed by Matthew Paduano

+import com.google.protobuf.ByteString;
+import org.apache.hadoop.security.proto.SecurityProtos.TokenProto;
-  
+
-  
+
-  
+
- 
+
-   * Default constructor
+   * Default constructor.
+  public Token<T> copyToken() {
+    return new Token<T>(this);
+  }
+
-   * Get the token identifier's byte representation
+   * Construct a Token from a TokenProto.
+   * @param tokenPB the TokenProto object
+   */
+  public Token(TokenProto tokenPB) {
+    this.identifier = tokenPB.getIdentifier().toByteArray();
+    this.password = tokenPB.getPassword().toByteArray();
+    this.kind = new Text(tokenPB.getKindBytes().toByteArray());
+    this.service = new Text(tokenPB.getServiceBytes().toByteArray());
+  }
+
+  /**
+   * Construct a TokenProto from this Token instance.
+   * @return a new TokenProto object holding copies of data in this instance
+   */
+  public TokenProto toTokenProto() {
+    return TokenProto.newBuilder().
+        setIdentifier(ByteString.copyFrom(this.getIdentifier())).
+        setPassword(ByteString.copyFrom(this.getPassword())).
+        setKindBytes(ByteString.copyFrom(
+            this.getKind().getBytes(), 0, this.getKind().getLength())).
+        setServiceBytes(ByteString.copyFrom(
+            this.getService().getBytes(), 0, this.getService().getLength())).
+        build();
+  }
+
+  /**
+   * Get the token identifier's byte representation.
-  
+
-  
+
-   * @throws IOException 
+   * @throws IOException
-    DataInputStream in = new DataInputStream(buf);  
+    DataInputStream in = new DataInputStream(buf);
-  
+
-   * Get the token password/secret
+   * Get the token password/secret.
-  
+
-   * Get the token kind
+   * Get the token kind.
-   * Get the service on which the token is supposed to be used
+   * Get the service on which the token is supposed to be used.
-  
+
-   * Set the service on which the token is supposed to be used
+   * Set the service on which the token is supposed to be used.
-  
+
-   * Modify the writable to the value from the newValue
+   * Modify the writable to the value from the newValue.
-  private static void decodeWritable(Writable obj, 
+  private static void decodeWritable(Writable obj,
-   * Encode this token as a url safe string
+   * Encode this token as a url safe string.
-  
+
-  
+
-  
+
-  
+
-  
+
-   * Renew this delegation token
+   * Renew this delegation token.
-  
+
-   * Cancel this delegation token
+   * Cancel this delegation token.
-  
+
-    
+
