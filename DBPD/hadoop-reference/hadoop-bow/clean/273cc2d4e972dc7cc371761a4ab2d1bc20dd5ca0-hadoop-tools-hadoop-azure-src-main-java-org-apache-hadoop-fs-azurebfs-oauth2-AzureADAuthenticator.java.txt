HADOOP-15809. ABFS: better exception handling when making getAccessToken call.
Contributed by Da Zhou

-  private static class HttpException extends IOException {
+
+  /**
+   * This exception class contains the http error code,
+   * requestId and error message, it is thrown when AzureADAuthenticator
+   * failed to get the Azure Active Directory token.
+   */
+  public static class HttpException extends IOException {
+    /**
+     * Gets Http error status code.
+     * @return  http error code.
+     */
+    /**
+     * Gets http request id .
+     * @return  http request id.
+     */
-    String requestId;
-    String httpExceptionMessage = null;
-      requestId = "";
-        requestId = e.requestId;
-        httpExceptionMessage = e.getMessage();
+        ex = e;
-      if (ex != null) {
-        throw ex;
-      }
-      if (httperror != 0) {
-        throw new IOException(httpExceptionMessage);
-      }
+      throw ex;
-        String responseBody = consumeInputStream(conn.getInputStream(), 1024);
+        String responseBody = consumeInputStream(conn.getErrorStream(), 1024);
-                        + " Content-Type: " + responseContentType
+                        + "\nContent-Type: " + responseContentType
-                        + " First 1K of Body: " + responseBody;
+                        + "\nFirst 1K of Body: " + responseBody;
