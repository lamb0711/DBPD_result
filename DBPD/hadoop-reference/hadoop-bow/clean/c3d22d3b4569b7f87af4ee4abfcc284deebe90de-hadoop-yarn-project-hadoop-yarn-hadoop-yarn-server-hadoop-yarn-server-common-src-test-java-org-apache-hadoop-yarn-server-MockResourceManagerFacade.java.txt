YARN-7652. Handle AM register requests asynchronously in FederationInterceptor. Contributed by Botong Huang.

-  private static Object syncObj = new Object();
+  private static Object registerSyncObj = new Object();
+  private static Object allocateSyncObj = new Object();
-  public static Object getSyncObj() {
-    return syncObj;
+  public static Object getRegisterSyncObj() {
+    return registerSyncObj;
+  }
+
+  public static Object getAllocateSyncObj() {
+    return allocateSyncObj;
-    synchronized (syncObj) {
-      syncObj.notifyAll();
+    synchronized (registerSyncObj) {
+      registerSyncObj.notifyAll();
-          syncObj.wait();
+          registerSyncObj.wait();
-    synchronized (syncObj) {
+    synchronized (allocateSyncObj) {
-          syncObj.wait();
+          allocateSyncObj.wait();
-              + " being released is not valid for application: "
-              + conf.get("AMRMTOKEN"), found);
+              + " being released is not valid for application: " + attemptId,
+              found);
-        + " for application attempt: " + conf.get("AMRMTOKEN"));
+        + " for application attempt: " + attemptId);
-    synchronized (syncObj) {
+    synchronized (allocateSyncObj) {
