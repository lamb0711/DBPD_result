MAPREDUCE-2649. Handling of finished applications in RM. Contributed by Thomas Graves.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1160521 13f79535-47bb-0310-9956-ffa450edef68

+  private RMAppManager rmAppManager;
+
+    this.rmAppManager = createRMAppManager();
+    // Register event handler for RMAppManagerEvents
+    this.rmDispatcher.register(RMAppManagerEventType.class,
+        this.rmAppManager);
+  protected RMAppManager createRMAppManager() {
+    return new RMAppManager(this.rmContext, this.clientToAMSecretManager,
+        this.scheduler, this.masterService, this.conf);
+  }
+
-    return new ClientRMService(this.rmContext, this.clientToAMSecretManager,
-        scheduler, masterService);
+    return new ClientRMService(this.rmContext, scheduler);
