Merge remote-tracking branch 'apache/trunk' into HDFS-7285

-    this.diagnostics.append(appState.getDiagnostics());
+    this.diagnostics.append(null == appState.getDiagnostics() ? "" : appState
+        .getDiagnostics());
