HDFS-10391. Always enable NameNode service RPC port. Contributed by Gergely Novak.

-   * based on the value of fallback returns null if the special
-   * address is not specified or returns the default namenode address
-   * to be used by both clients and services.
-  public static InetSocketAddress getServiceAddress(Configuration conf,
-                                                        boolean fallback) {
-    String addr = conf.getTrimmed(DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY);
-    if (addr == null || addr.isEmpty()) {
-      return fallback ? DFSUtilClient.getNNAddress(conf) : null;
+  public static InetSocketAddress getServiceAddress(Configuration conf) {
+    String address = conf.getTrimmed(DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY);
+    if (address == null || address.isEmpty()) {
+      InetSocketAddress rpcAddress = DFSUtilClient.getNNAddress(conf);
+      return NetUtils.createSocketAddr(rpcAddress.getHostName(),
+          HdfsClientConfigKeys.DFS_NAMENODE_SERVICE_RPC_PORT_DEFAULT);
-    return DFSUtilClient.getNNAddress(addr);
+    return NetUtils.createSocketAddr(address,
+        HdfsClientConfigKeys.DFS_NAMENODE_SERVICE_RPC_PORT_DEFAULT);
-    return NameNode.getServiceAddress(conf, false);
+    return NameNode.getServiceAddress(conf);
-   * Modifies the configuration passed to contain the service rpc address setting
+   * Modifies the configuration passed to contain the service rpc address
+   * setting.
+   * @return NameNode service RPC address in "host:port" string form
+   */
+  public String getServiceRpcAddressHostPortString() {
+    return NetUtils.getHostPortString(getServiceRpcAddress());
+  }
+
+  /**
