YARN-4773. Log aggregation performs extraneous filesystem operations when rolling log aggregation is disabled. Contributed by Jun Gong

-  // This variable is only for testing
-  private final AtomicBoolean waiting = new AtomicBoolean(false);
-  // This variable is only for testing
+  // These variables are only for testing
+  private final AtomicBoolean waiting = new AtomicBoolean(false);
+  private int cleanupOldLogTimes = 0;
-      if (uploadedLogsInThisCycle) {
+      if (uploadedLogsInThisCycle && logAggregationInRolling) {
+        cleanupOldLogTimes++;
+
+  @VisibleForTesting
+  int getCleanupOldLogTimes() {
+    return this.cleanupOldLogTimes;
+  }
