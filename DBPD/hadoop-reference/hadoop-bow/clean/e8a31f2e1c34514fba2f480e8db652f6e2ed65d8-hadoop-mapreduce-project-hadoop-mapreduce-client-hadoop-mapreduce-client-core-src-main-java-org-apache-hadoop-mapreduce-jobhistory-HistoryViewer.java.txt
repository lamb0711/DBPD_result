MAPREDUCE-5875. Make Counter limits consistent across JobClient, MRAppMaster, and YarnChild. (Gera Shegalov via kasha)

+import java.io.FileNotFoundException;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+import org.apache.hadoop.mapreduce.counters.Limits;
-  private static SimpleDateFormat dateFormat = 
+  private static final Log LOG = LogFactory.getLog(HistoryViewer.class);
+  private static final SimpleDateFormat dateFormat =
+      final Path jobConfPath = new Path(jobFile.getParent(),  jobDetails[0]
+          + "_" + jobDetails[1] + "_" + jobDetails[2] + "_conf.xml");
+      final Configuration jobConf = new Configuration(conf);
+      try {
+        jobConf.addResource(fs.open(jobConfPath), jobConfPath.toString());
+        Limits.reset(conf);
+      } catch (FileNotFoundException fnf) {
+        if (LOG.isWarnEnabled()) {
+          LOG.warn("Missing job conf in history", fnf);
+        }
+      }
