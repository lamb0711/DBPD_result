HDDS-1713. ReplicationManager fail to find proper node topology basedâ€¦ (#1112)



+import java.util.concurrent.ConcurrentHashMap;
+  private ConcurrentHashMap<String, String> dnsToUuidMap;
+    this.dnsToUuidMap = new ConcurrentHashMap();
+      dnsToUuidMap.put(datanodeDetails.getIpAddress(),
+          datanodeDetails.getUuidString());
+        datanodeDetails.setNetworkName(datanodeDetails.getUuidString());
-  public DatanodeDetails getNode(String address) {
-    Node node = clusterMap.getNode(NetConstants.DEFAULT_RACK + "/" + address);
+  public DatanodeDetails getNodeByUuid(String uuid) {
+    Node node = clusterMap.getNode(NetConstants.DEFAULT_RACK + "/" + uuid);
+  @Override
+  public DatanodeDetails getNodeByAddress(String address) {
+    return getNodeByUuid(dnsToUuidMap.get(address));
+  }
+
