HDFS-11504. Ozone: SCM: Add Block APIs. Contributed by Xiaoyu Yao.

+import org.apache.hadoop.ozone.scm.block.BlockManager;
+import org.apache.hadoop.ozone.scm.block.BlockManagerImpl;
+import org.apache.hadoop.scm.container.common.helpers.AllocatedBlock;
+import org.apache.hadoop.scm.protocol.ScmBlockLocationProtocol;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Map;
-import java.util.Map;
-import java.util.HashMap;
-    StorageContainerLocationProtocol, SCMMXBean {
+    StorageContainerLocationProtocol, ScmBlockLocationProtocol, SCMMXBean{
+  private final BlockManager scmBlockManager;
+    scmBlockManager = new BlockManagerImpl(conf, scmNodeManager,
+        scmContainerManager, cacheSize);
-                    this));
+                    this, this));
+    IOUtils.closeQuietly(scmBlockManager);
+  /**
+   * Get block locations.
+   * @param keys batch of block keys to retrieve.
+   * @return set of allocated blocks.
+   * @throws IOException
+   */
+  @Override
+  public Set<AllocatedBlock> getBlockLocations(final Set<String> keys)
+      throws IOException {
+    Set<AllocatedBlock> locatedBlocks = new HashSet<>();
+    for (String key: keys) {
+      Pipeline pipeline = scmBlockManager.getBlock(key);
+      AllocatedBlock block = new AllocatedBlock.Builder()
+          .setKey(key)
+          .setPipeline(pipeline).build();
+      locatedBlocks.add(block);
+    }
+    return locatedBlocks;
+  }
+
+  /**
+   * Asks SCM where a block should be allocated. SCM responds with the set
+   * of datanodes and leader that should be used creating this block.
+   *
+   * @param size - size of the block.
+   * @return - allocated block accessing info (key, pipeline and leader).
+   * @throws IOException
+   */
+  @Override
+  public AllocatedBlock allocateBlock(final long size) throws IOException {
+    return scmBlockManager.allocateBlock(size);
+  }
