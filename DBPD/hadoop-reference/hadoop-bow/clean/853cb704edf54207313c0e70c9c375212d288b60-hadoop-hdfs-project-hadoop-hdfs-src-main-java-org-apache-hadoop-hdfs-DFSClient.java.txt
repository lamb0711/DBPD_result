HDFS-7203. Concurrent appending to the same file can cause data
corruption. Contributed by Kihwal Lee.

-      return callAppend(stat, src, buffersize, progress);
+      return callAppend(src, buffersize, progress);
-  private DFSOutputStream callAppend(HdfsFileStatus stat, String src,
+  private DFSOutputStream callAppend(String src,
+    HdfsFileStatus newStat = getFileInfo(src);
-        lastBlock, stat, dfsClientConf.createChecksum());
+        lastBlock, newStat, dfsClientConf.createChecksum());
-    HdfsFileStatus stat = getFileInfo(src);
-    if (stat == null) { // No file found
-      throw new FileNotFoundException("failed to append to non-existent file "
-          + src + " on client " + clientName);
-    }
-    final DFSOutputStream result = callAppend(stat, src, buffersize, progress);
+    final DFSOutputStream result = callAppend(src, buffersize, progress);
