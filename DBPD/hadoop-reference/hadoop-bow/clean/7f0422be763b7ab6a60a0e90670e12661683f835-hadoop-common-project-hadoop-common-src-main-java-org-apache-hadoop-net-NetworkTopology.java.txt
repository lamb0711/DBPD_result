Merge branch 'trunk' into HDFS-6581

-  private static final ThreadLocal<Random> r = new ThreadLocal<Random>();
-
-  /**
-   * Getter for thread-local Random, which provides better performance than
-   * a shared Random (even though Random is thread-safe).
-   *
-   * @return Thread-local Random.
-   */
-  protected Random getRandom() {
-    Random rand = r.get();
-    if (rand == null) {
-      rand = new Random();
-      r.set(rand);
-    }
-    return rand;
-  }
+  private static final Random r = new Random();
-    Random rand = getRandom();
-    rand.setSeed(seed);
+    r.setSeed(seed);
-    int leaveIndex = getRandom().nextInt(numOfDatanodes);
+    int leaveIndex = r.nextInt(numOfDatanodes);
-    Random rand = getRandom();
-        Collections.shuffle(list, rand);
+        Collections.shuffle(list, r);
