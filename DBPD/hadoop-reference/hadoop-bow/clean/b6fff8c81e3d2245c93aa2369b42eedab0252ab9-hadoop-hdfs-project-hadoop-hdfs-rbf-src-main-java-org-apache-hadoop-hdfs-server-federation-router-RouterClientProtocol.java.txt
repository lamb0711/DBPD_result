HDFS-13787. RBF: Add Snapshot related ClientProtocol APIs. Contributed by Inigo Goiri.

+  /** Snapshot calls. */
+  private final RouterSnapshot snapshotProto;
+    this.snapshotProto = new RouterSnapshot(rpcServer);
-  @Override // Client Protocol
+  @Override
-    rpcServer.checkOperation(NameNode.OperationCategory.WRITE, false);
+    snapshotProto.allowSnapshot(snapshotRoot);
-  @Override // Client Protocol
+  @Override
-    rpcServer.checkOperation(NameNode.OperationCategory.WRITE, false);
+    snapshotProto.disallowSnapshot(snapshot);
-    rpcServer.checkOperation(NameNode.OperationCategory.WRITE, false);
+    snapshotProto.renameSnapshot(
+        snapshotRoot, snapshotOldName, snapshotNewName);
-    rpcServer.checkOperation(NameNode.OperationCategory.READ, false);
-    return null;
+    return snapshotProto.getSnapshottableDirListing();
-    rpcServer.checkOperation(NameNode.OperationCategory.READ, false);
-    return null;
+    return snapshotProto.getSnapshotDiffReport(
+        snapshotRoot, earlierSnapshotName, laterSnapshotName);
-    rpcServer.checkOperation(NameNode.OperationCategory.READ, false);
-    return null;
+    return snapshotProto.getSnapshotDiffReportListing(
+        snapshotRoot, earlierSnapshotName, laterSnapshotName, startPath, index);
-    rpcServer.checkOperation(NameNode.OperationCategory.WRITE);
-    return null;
+    return snapshotProto.createSnapshot(snapshotRoot, snapshotName);
-    rpcServer.checkOperation(NameNode.OperationCategory.WRITE, false);
+    snapshotProto.deleteSnapshot(snapshotRoot, snapshotName);
