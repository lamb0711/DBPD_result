HDFS-7280. Use netty 4 in WebImageViewer. Contributed by Haohui Mai.

-  public static void main(String[] args) throws IOException {
+  public static void main(String[] args) throws Exception {
-  public static int run(String[] args) throws IOException {
+  public static int run(String[] args) throws Exception {
-        new WebImageViewer(NetUtils.createSocketAddr(addr))
-            .initServerAndWait(inputFile);
+        WebImageViewer viewer = new WebImageViewer(NetUtils.createSocketAddr
+                (addr));
+        try {
+          viewer.start(inputFile);
+        } finally {
+          viewer.close();
+        }
