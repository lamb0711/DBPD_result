YARN-1303. Reverted the wrong patch committed earlier and committing the correct patch now. In one go.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1544029 13f79535-47bb-0310-9956-ffa450edef68

-  private final String shellCommandPath = "shellCommands";
+  private final String shellCommandPath = "shellCommands";
-      LocalResource scRsrc = Records.newRecord(LocalResource.class);
-      scRsrc.setType(LocalResourceType.FILE);
-      scRsrc.setVisibility(LocalResourceVisibility.APPLICATION);
-      scRsrc.setResource(ConverterUtils.getYarnUrlFromURI(shellCommandDst
-          .toUri()));
-      scRsrc.setTimestamp(scFileStatus.getModificationTime());
-      scRsrc.setSize(scFileStatus.getLen());
-      localResources.put("shellCommands", scRsrc);
+      LocalResource scRsrc =
+          LocalResource.newInstance(
+              ConverterUtils.getYarnUrlFromURI(shellCommandDst.toUri()),
+              LocalResourceType.FILE, LocalResourceVisibility.APPLICATION,
+              scFileStatus.getLen(), scFileStatus.getModificationTime());
+      localResources.put(shellCommandPath, scRsrc);
-    if (!shellCommand.isEmpty()) {
-      vargs.add("--shell_command " + shellCommandPath + "");
-    }
