HDFS-13286. [SBN read] Add haadmin commands to transition between standby and observer. Contributed by Chao Sun.

-      // TODO: we may need to remove this when enabling failover for observer
-          "Cannot transition from Observer to Active");
+          "Cannot transition from '" + OBSERVER_STATE + "' to '" +
+              ACTIVE_STATE + "'");
-  
-  synchronized void transitionToStandby() 
+
+  synchronized void transitionToStandby()
-    if (state == OBSERVER_STATE) {
-      // TODO: we may need to remove this when enabling failover for observer
-      throw new ServiceFailedException(
-          "Cannot transition from Observer to Standby");
-    }
+  synchronized void transitionToObserver()
+      throws ServiceFailedException, AccessControlException {
+    namesystem.checkSuperuserPrivilege();
+    if (!haEnabled) {
+      throw new ServiceFailedException("HA for namenode is not enabled");
+    }
+    // Transition from ACTIVE to OBSERVER is forbidden.
+    if (state == ACTIVE_STATE) {
+      throw new ServiceFailedException(
+          "Cannot transition from '" + ACTIVE_STATE + "' to '" +
+              OBSERVER_STATE + "'");
+    }
+    state.setState(haContext, OBSERVER_STATE);
+  }
+
-    // TODO: maybe we should return a different result for observer namenode?
