YARN-7540 and YARN-7605. Convert yarn app cli to call yarn api services and implement doAs for Api Service REST API. Contributed by Eric Yang and Jian He

+      public Map<String, String> params;
-    
+
+    public Builder<T> withServlet(String name, String pathSpec,
+        Class<? extends HttpServlet> servlet,
+        Map<String, String> params) {
+      ServletStruct struct = new ServletStruct();
+      struct.clazz = servlet;
+      struct.name = name;
+      struct.spec = pathSpec;
+      struct.params = params;
+      servlets.add(struct);
+      return this;
+    }
+
+      for (ServletStruct s : servlets) {
+        if (!pathList.contains(s.spec)) {
+          pathList.add(s.spec);
+        }
+      }
-          server.addServlet(struct.name, struct.spec, struct.clazz);
+          if (struct.params != null) {
+            server.addInternalServlet(struct.name, struct.spec,
+                struct.clazz, struct.params);
+          } else {
+            server.addServlet(struct.name, struct.spec, struct.clazz);
+          }
-      return start(webapp, null, null);
+      return start(webapp, null);
-    public WebApp start(WebApp webapp, WebAppContext ui2Context,
-        Map<String, String> services) {
+    public WebApp start(WebApp webapp, WebAppContext ui2Context) {
-      if (services!=null) {
-        String packageName = services.get("PackageName");
-        String pathSpec = services.get("PathSpec");
-        httpServer.addJerseyResourcePackage(packageName, pathSpec);
-      }
