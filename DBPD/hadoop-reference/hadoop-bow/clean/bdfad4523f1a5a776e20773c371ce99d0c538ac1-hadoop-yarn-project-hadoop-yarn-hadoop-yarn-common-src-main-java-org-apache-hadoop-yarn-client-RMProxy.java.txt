YARN-3673. Create a FailoverProxy for Federation services. Contributed by Subru Krishnan

(cherry picked from commit 3307564a5f8c8abc5fe84efcd05ee0f7dfdd921c)

-  protected void checkAllowedProtocols(Class<?> protocol) {}
+  public void checkAllowedProtocols(Class<?> protocol) {}
-  protected InetSocketAddress getRMAddress(
+  public InetSocketAddress getRMAddress(
-    RetryPolicy retryPolicy = createRetryPolicy(conf, HAUtil.isHAEnabled(conf));
+    RetryPolicy retryPolicy = createRetryPolicy(conf,
+        (HAUtil.isHAEnabled(conf) || HAUtil.isFederationFailoverEnabled(conf)));
-    if (HAUtil.isHAEnabled(conf)) {
+    if (HAUtil.isHAEnabled(conf) || HAUtil.isFederationEnabled(conf)) {
-  <T> T getProxy(final Configuration conf,
+  public <T> T getProxy(final Configuration conf,
