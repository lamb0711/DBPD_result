Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1242635 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.server.resourcemanager.rmapp.RMAppState;
+import org.apache.hadoop.yarn.util.Times;
-  void toDataTableArrays(PrintWriter out) {
+  void toDataTableArrays(String requiredAppState, PrintWriter out) {
-      AppInfo appInfo = new AppInfo(app, false);
+      if (requiredAppState != null && !requiredAppState.isEmpty()
+          && app.getState() != RMAppState.valueOf(requiredAppState)) {
+        continue;
+      }
+      AppInfo appInfo = new AppInfo(app, true);
+      String startTime = Times.format(appInfo.getStartTime());
+      String finishTime = Times.format(appInfo.getFinishTime());
-          append(escapeHtml(appInfo.getQueue())).append(_SEP).
+          append(escapeHtml(appInfo.getQueue())).append(_SEP);
+      appendSortable(out, startTime).append(startTime).append(_SEP);
+      appendSortable(out, finishTime).append(finishTime).append(_SEP).
-          append(_SEP).append(escapeJavaScript(escapeHtml(
-                              appInfo.getNote()))).
-    toDataTableArrays(out);
+    toDataTableArrays(null, out);
