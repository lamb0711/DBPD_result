YARN-8901. Fixed restart policy NEVER/ON_FAILURE with component dependency.
           Contributed by Suma Shivaprasad

-  @Override public boolean isReadyForDownStream(Component component) {
-    if (hasCompleted(component)) {
-      return true;
+  @Override public boolean isReadyForDownStream(Component dependentComponent) {
+    if (dependentComponent.getNumReadyInstances()
+        + dependentComponent.getNumSucceededInstances()
+        + dependentComponent.getNumFailedInstances()
+        < dependentComponent.getNumDesiredInstances()) {
+      return false;
-    return false;
+    return true;
