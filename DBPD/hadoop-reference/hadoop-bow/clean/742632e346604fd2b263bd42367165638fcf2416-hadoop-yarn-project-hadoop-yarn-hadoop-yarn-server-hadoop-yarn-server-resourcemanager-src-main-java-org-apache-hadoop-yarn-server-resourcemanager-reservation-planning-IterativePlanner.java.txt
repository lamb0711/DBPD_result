YARN-4358. Reservation System: Improve relationship between SharingPolicy and ReservationAgent. (Carlo Curino via asuresh)

+import org.apache.hadoop.yarn.server.resourcemanager.reservation.exceptions.PlanningException;
-      ReservationId reservationId, ReservationDefinition reservation)
-      throws ContractValidationException {
+      ReservationId reservationId, ReservationDefinition reservation,
+      String user) throws PlanningException {
-              stageArrivalTime, stageDeadline);
+              stageArrivalTime, stageDeadline, user, reservationId);
-      Long stageStartTime = findEarliestTime(curAlloc.keySet());
-      Long stageEndTime = findLatestTime(curAlloc.keySet());
+      Long stageStartTime = findEarliestTime(curAlloc);
+      Long stageEndTime = findLatestTime(curAlloc);
-      long stageDeadline) {
+      long stageDeadline, String user, ReservationId oldId)
+      throws PlanningException {
-        planModifications, rr, stageArrivalTime, stageDeadline);
+        planModifications, rr, stageArrivalTime, stageDeadline, user, oldId);
