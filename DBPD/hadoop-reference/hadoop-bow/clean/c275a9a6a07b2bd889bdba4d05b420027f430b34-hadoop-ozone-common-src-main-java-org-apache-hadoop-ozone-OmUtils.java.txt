Merge trunk into HDDS-48

-import static org.apache.hadoop.ozone.ksm.KSMConfigKeys.OZONE_KSM_ADDRESS_KEY;
-import static org.apache.hadoop.ozone.ksm.KSMConfigKeys
-    .OZONE_KSM_BIND_HOST_DEFAULT;
-import static org.apache.hadoop.ozone.ksm.KSMConfigKeys.OZONE_KSM_PORT_DEFAULT;
+import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_ADDRESS_KEY;
+import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_BIND_HOST_DEFAULT;
+import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_HTTP_ADDRESS_KEY;
+import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_HTTP_BIND_PORT_DEFAULT;
+import static org.apache.hadoop.ozone.om.OMConfigKeys.OZONE_OM_PORT_DEFAULT;
- * Stateless helper functions for the server and client side of KSM
+ * Stateless helper functions for the server and client side of OM
-public final class KsmUtils {
+public final class OmUtils {
-  private KsmUtils() {
+  private OmUtils() {
-   * Retrieve the socket address that is used by KSM.
+   * Retrieve the socket address that is used by OM.
-  public static InetSocketAddress getKsmAddress(
+  public static InetSocketAddress getOmAddress(
-        OZONE_KSM_ADDRESS_KEY);
-
-    // If no port number is specified then we'll just try the defaultBindPort.
-    final Optional<Integer> port = getPortNumberFromConfigKeys(conf,
-        OZONE_KSM_ADDRESS_KEY);
+        OZONE_OM_ADDRESS_KEY);
-        host.or(OZONE_KSM_BIND_HOST_DEFAULT) + ":" +
-            port.or(OZONE_KSM_PORT_DEFAULT));
+        host.or(OZONE_OM_BIND_HOST_DEFAULT) + ":" +
+            getOmRpcPort(conf));
-   * to KSM.
+   * to OM.
-   * @return Target InetSocketAddress for the KSM service endpoint.
+   * @return Target InetSocketAddress for the OM service endpoint.
-  public static InetSocketAddress getKsmAddressForClients(
+  public static InetSocketAddress getOmAddressForClients(
-        OZONE_KSM_ADDRESS_KEY);
+        OZONE_OM_ADDRESS_KEY);
-          OZONE_KSM_ADDRESS_KEY + " must be defined. See" +
+          OZONE_OM_ADDRESS_KEY + " must be defined. See" +
-    // If no port number is specified then we'll just try the defaultBindPort.
-    final Optional<Integer> port = getPortNumberFromConfigKeys(conf,
-        OZONE_KSM_ADDRESS_KEY);
-
-        host.get() + ":" + port.or(OZONE_KSM_PORT_DEFAULT));
+        host.get() + ":" + getOmRpcPort(conf));
+  public static int getOmRpcPort(Configuration conf) {
+    // If no port number is specified then we'll just try the defaultBindPort.
+    final Optional<Integer> port = getPortNumberFromConfigKeys(conf,
+        OZONE_OM_ADDRESS_KEY);
+    return port.or(OZONE_OM_PORT_DEFAULT);
+  }
+
+  public static int getOmRestPort(Configuration conf) {
+    // If no port number is specified then we'll just try the default
+    // HTTP BindPort.
+    final Optional<Integer> port =
+        getPortNumberFromConfigKeys(conf, OZONE_OM_HTTP_ADDRESS_KEY);
+    return port.or(OZONE_OM_HTTP_BIND_PORT_DEFAULT);
+  }
