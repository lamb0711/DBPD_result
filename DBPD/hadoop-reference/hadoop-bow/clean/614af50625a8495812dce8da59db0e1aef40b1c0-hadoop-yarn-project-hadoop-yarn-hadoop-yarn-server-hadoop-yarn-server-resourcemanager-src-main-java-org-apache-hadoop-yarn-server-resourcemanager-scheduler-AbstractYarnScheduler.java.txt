YARN-9179. Fix NPE in AbstractYarnScheduler#updateNewContainerInfo.

-      String strExposedPorts = c.getValue().getExposedPorts();
-      Map<String, List<Map<String, String>>> exposedPorts = null;
-      if (null != strExposedPorts && !strExposedPorts.isEmpty()) {
-        Gson gson = new Gson();
-        exposedPorts = gson.fromJson(strExposedPorts,
-            new TypeToken<Map<String, List<Map<String, String>>>>()
-            {}.getType());
+      if (app == null || app.getCurrentAppAttempt() == null) {
+        continue;
-
-      if (null != rmContainer &&
-          (null == rmContainer.getExposedPorts()
-              || rmContainer.getExposedPorts().size() == 0)) {
+      if (rmContainer == null) {
+        continue;
+      }
+      // exposed ports are already set for the container, skip
+      if (rmContainer.getExposedPorts() != null &&
+          rmContainer.getExposedPorts().size() > 0) {
+        continue;
+      }
+
+      String strExposedPorts = c.getValue().getExposedPorts();
+      if (null != strExposedPorts && !strExposedPorts.isEmpty()) {
+        Gson gson = new Gson();
+        Map<String, List<Map<String, String>>> exposedPorts =
+            gson.fromJson(strExposedPorts,
+            new TypeToken<Map<String, List<Map<String, String>>>>()
+                {}.getType());
