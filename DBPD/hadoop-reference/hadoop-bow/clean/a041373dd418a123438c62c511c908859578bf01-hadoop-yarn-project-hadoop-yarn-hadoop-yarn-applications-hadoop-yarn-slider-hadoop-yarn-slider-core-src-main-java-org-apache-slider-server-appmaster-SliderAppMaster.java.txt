YARN-6533. Race condition in writing service record to registry in yarn native services. Contributed by Billie Rinaldi

-    String cid = RegistryPathUtils.encodeYarnID(id.toString());
-    ServiceRecord record = new ServiceRecord();
-    record.set(YarnRegistryAttributes.YARN_ID, cid);
-
-    record.description = roleInstance.getCompInstanceName();
-    record.set(YarnRegistryAttributes.YARN_PERSISTENCE,
-        PersistencePolicies.CONTAINER);
-    setUserProvidedServiceRecordAttributes(
-        instance.providerRole.component.getConfiguration(), record);
-    try {
-      yarnRegistryOperations.putComponent(cid, record);
-    } catch (IOException e) {
-      log.warn("Failed to register container {}/{}: {}",
-          id, roleInstance.role, e, e);
-      return false;
-    }
