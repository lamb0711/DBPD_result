YARN-5375. invoke MockRM#drainEvents implicitly in MockRM methods to reduce test failures. Contributed by sandflee.

+import org.apache.hadoop.conf.Configuration;
+
+  @Override
+  public void serviceInit(Configuration conf)
+      throws Exception {
+    conf.setBoolean(Dispatcher.DISPATCHER_EXIT_ON_ERROR_KEY, false);
+    super.serviceInit(conf);
+  }
+
-    while (!drained) {
+    while (!isDrained()) {
-    return drained;
+    synchronized (mutex) {
+      return drained;
+    }
