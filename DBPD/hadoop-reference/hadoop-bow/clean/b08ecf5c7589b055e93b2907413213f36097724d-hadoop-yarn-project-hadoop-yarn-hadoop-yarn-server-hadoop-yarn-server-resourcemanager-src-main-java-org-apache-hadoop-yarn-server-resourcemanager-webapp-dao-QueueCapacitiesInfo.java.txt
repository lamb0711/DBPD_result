YARN-4304. AM max resource configuration per partition to be displayed/updated correctly in UI and in various partition related metrics. (Sunil G via wangda)

-  public QueueCapacitiesInfo(QueueCapacities capacities) {
+  public QueueCapacitiesInfo(QueueCapacities capacities,
+      boolean considerAMUsage) {
+    Float maxAMLimitPercentage;
+      maxAMLimitPercentage = capacities
+          .getMaxAMResourcePercentage(partitionName) * 100;
-      queueCapacitiesByPartition.add(
-          new PartitionQueueCapacitiesInfo(partitionName, capacity, usedCapacity,
-              maxCapacity, absCapacity, absUsedCapacity, absMaxCapacity));
+      queueCapacitiesByPartition.add(new PartitionQueueCapacitiesInfo(
+          partitionName, capacity, usedCapacity, maxCapacity, absCapacity,
+          absUsedCapacity, absMaxCapacity,
+          considerAMUsage ? maxAMLimitPercentage : null));
+  public QueueCapacitiesInfo(QueueCapacities capacities) {
+    this(capacities, true);
+  }
+
