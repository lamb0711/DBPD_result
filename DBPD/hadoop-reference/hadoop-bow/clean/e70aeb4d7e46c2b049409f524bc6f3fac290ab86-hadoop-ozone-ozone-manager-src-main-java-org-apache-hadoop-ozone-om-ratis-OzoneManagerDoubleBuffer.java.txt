HDDS-1601. Implement updating lastAppliedIndex after buffer flush to OM DB. (#972)


+  private final OzoneManagerRatisSnapshot ozoneManagerRatisSnapShot;
-  public OzoneManagerDoubleBuffer(OMMetadataManager omMetadataManager) {
+  public OzoneManagerDoubleBuffer(OMMetadataManager omMetadataManager,
+      OzoneManagerRatisSnapshot ozoneManagerRatisSnapShot) {
+    this.ozoneManagerRatisSnapShot = ozoneManagerRatisSnapShot;
+
+
-          // TODO: update the last updated index in OzoneManagerStateMachine.
+
+          // TODO: Need to revisit this logic, once we have multiple
+          //  executors for volume/bucket request handling. As for now
+          //  transactions are serialized this should be fine.
+          // update the last updated index in OzoneManagerStateMachine.
+          ozoneManagerRatisSnapShot.updateLastAppliedIndex(
+              lastRatisTransactionIndex);
