YARN-6072. RM unable to start in secure mode. Contributed by Ajith S.

-
-      // If the RM is configured to use an embedded leader elector,
-      // initialize the leader elector.
-      if (HAUtil.isAutomaticFailoverEnabled(conf) &&
-          HAUtil.isAutomaticFailoverEmbedded(conf)) {
-        EmbeddedElector elector = createEmbeddedElector();
-        addIfService(elector);
-        rmContext.setLeaderElectorService(elector);
-      }
+    // The order of services below should not be changed as services will be
+    // started in same order
+    // As elector service needs admin service to be initialized and started,
+    // first we add admin service then elector service
+
+    // elector must be added post adminservice
+    if (this.rmContext.isHAEnabled()) {
+      // If the RM is configured to use an embedded leader elector,
+      // initialize the leader elector.
+      if (HAUtil.isAutomaticFailoverEnabled(conf)
+          && HAUtil.isAutomaticFailoverEmbedded(conf)) {
+        EmbeddedElector elector = createEmbeddedElector();
+        addIfService(elector);
+        rmContext.setLeaderElectorService(elector);
+      }
+    }
+
