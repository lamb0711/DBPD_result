Merge remote-tracking branch 'apache/trunk' into HDFS-7285

+import org.apache.hadoop.yarn.server.api.protocolrecords.RefreshClusterMaxPriorityRequest;
+import org.apache.hadoop.yarn.server.api.protocolrecords.RefreshClusterMaxPriorityResponse;
+      refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());
+
+  @Override
+  public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(
+      RefreshClusterMaxPriorityRequest request) throws YarnException,
+      IOException {
+    String argName = "refreshClusterMaxPriority";
+    String msg = "refresh cluster max priority";
+    UserGroupInformation user = checkAcls(argName);
+
+    checkRMStatus(user.getShortUserName(), argName, msg);
+    try {
+      Configuration conf =
+          getConfiguration(new Configuration(false),
+              YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);
+
+      rmContext.getScheduler().setClusterMaxPriority(conf);
+
+      RMAuditLogger
+          .logSuccess(user.getShortUserName(), argName, "AdminService");
+      return recordFactory
+          .newRecordInstance(RefreshClusterMaxPriorityResponse.class);
+    } catch (YarnException e) {
+      throw logAndWrapException(e, user.getShortUserName(), argName, msg);
+    }
+  }
