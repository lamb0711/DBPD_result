Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1196458 13f79535-47bb-0310-9956-ffa450edef68

+    eventHandlingThread.setName("AsyncDispatcher event handler");
-    eventHandlingThread.interrupt();
-    try {
-      eventHandlingThread.join();
-    } catch (InterruptedException ie) {
-      LOG.debug("Interruped Exception while stopping", ie);
+    if (eventHandlingThread != null) {
+      eventHandlingThread.interrupt();
+      try {
+        eventHandlingThread.join();
+      } catch (InterruptedException ie) {
+        LOG.debug("Interrupted Exception while stopping", ie);
+      }
-    //stop all the components
+    // stop all the components
