HADOOP-13702. Add instrumented ReadWriteLock. Contributed by Jingcheng Du

-package org.apache.hadoop.hdfs;
+package org.apache.hadoop.util;
-import org.apache.hadoop.util.StringUtils;
-import org.apache.hadoop.util.Timer;
- * whether a specifc lock is being held for too long and periodically
+ * whether a specific lock is being held for too long and periodically
-    lockAcquireTimestamp = clock.monotonicNow();
+    startLockTiming();
-    lockAcquireTimestamp = clock.monotonicNow();
+    startLockTiming();
-      lockAcquireTimestamp = clock.monotonicNow();
+      startLockTiming();
-      lockAcquireTimestamp = clock.monotonicNow();
+      startLockTiming();
+   * Starts timing for the instrumented lock.
+   */
+  protected void startLockTiming() {
+    lockAcquireTimestamp = clock.monotonicNow();
+  }
+
+  /**
-  private void check(long acquireTime, long releaseTime) {
+  protected void check(long acquireTime, long releaseTime) {
+  protected Lock getLock() {
+    return lock;
+  }
+
+  protected Timer getTimer() {
+    return clock;
+  }
