YARN-9930. Support max running app logic for CapacityScheduler. Contributed by Peter Bacsko

+  private CSMaxRunningAppsEnforcer maxRunningEnforcer;
+
+    this.maxRunningEnforcer = new CSMaxRunningAppsEnforcer(this);
+      maxRunningEnforcer.updateRunnabilityOnReload();
+      maxRunningEnforcer.checkRunnabilityWithUpdate(attempt);
+      maxRunningEnforcer.trackApp(attempt);
+
-      } else{
+      } else {
+
+        maxRunningEnforcer.untrackApp(attempt);
+        if (attempt.isRunnable()) {
+          maxRunningEnforcer.updateRunnabilityOnAppRemoval(attempt);
+        }
+
+  @VisibleForTesting
+  public void setMaxRunningAppsEnforcer(CSMaxRunningAppsEnforcer enforcer) {
+    this.maxRunningEnforcer = enforcer;
+  }
