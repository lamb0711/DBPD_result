HDFS-6019. Standby NN might not checkpoint when processing the rolling upgrade marker. Contributed by Haohui Mai.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1572182 13f79535-47bb-0310-9956-ffa450edef68

-    thread.setNeedRollbackCheckpoint(true);
-    // Indicate that a rollback checkpoint is required immediately. It will be
-    // reset to false after the checkpoint is done
-    private volatile boolean needRollbackCheckpoint = false;
-    private void setNeedRollbackCheckpoint(boolean need) {
-      this.needRollbackCheckpoint = need;
-    }
-
+        boolean needRollbackCheckpoint = namesystem.isNeedRollbackFsImage();
-              needRollbackCheckpoint = false;
+              namesystem.setNeedRollbackFsImage(false);
