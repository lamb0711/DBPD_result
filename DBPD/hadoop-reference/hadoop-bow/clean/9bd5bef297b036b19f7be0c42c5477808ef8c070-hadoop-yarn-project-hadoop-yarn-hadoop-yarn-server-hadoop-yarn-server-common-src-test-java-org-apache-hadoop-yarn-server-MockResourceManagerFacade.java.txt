Merge remote-tracking branch 'apache/trunk' into HDDS-48

-    shouldReRegisterNext = false;
-
-        } else {
+        } else if (!shouldReRegisterNext) {
+    shouldReRegisterNext = false;
+
-    if (request.getAskList() != null && request.getAskList().size() > 0
-        && request.getReleaseList() != null
-        && request.getReleaseList().size() > 0) {
-      Assert.fail("The mock RM implementation does not support receiving "
-          + "askList and releaseList in the same heartbeat");
-    }
-
