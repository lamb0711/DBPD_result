HDFS-5645. Support upgrade marker in editlog streams.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1557038 13f79535-47bb-0310-9956-ffa450edef68

+import static org.apache.hadoop.hdfs.server.namenode.FSEditLogOpCodes.OP_UPGRADE_MARKER;
+
+      inst.put(OP_UPGRADE_MARKER, new UpgradeMarkerOp());
+  /**
+   * Operation corresponding to upgrade
+   */
+  static class UpgradeMarkerOp extends FSEditLogOp { // @Idempotent
+    public UpgradeMarkerOp() {
+      super(OP_UPGRADE_MARKER);
+    }
+
+    static UpgradeMarkerOp getInstance(OpInstanceCache cache) {
+      return (UpgradeMarkerOp) cache.get(OP_UPGRADE_MARKER);
+    }
+
+    @Override
+    void readFields(DataInputStream in, int logVersion) throws IOException {
+    }
+
+    @Override
+    public void writeFields(DataOutputStream out) throws IOException {
+    }
+
+    @Override
+    protected void toXml(ContentHandler contentHandler) throws SAXException {
+    }
+
+    @Override
+    void fromXml(Stanza st) throws InvalidXmlException {
+    }
+
+    @Override
+    public String toString() {
+      StringBuilder builder = new StringBuilder();
+      builder.append("UpgradeMarkerOp");
+      return builder.toString();
+    }
+    
+    static class UpgradeMarkerException extends IOException {
+      private static final long serialVersionUID = 1L;
+    }
+  }
