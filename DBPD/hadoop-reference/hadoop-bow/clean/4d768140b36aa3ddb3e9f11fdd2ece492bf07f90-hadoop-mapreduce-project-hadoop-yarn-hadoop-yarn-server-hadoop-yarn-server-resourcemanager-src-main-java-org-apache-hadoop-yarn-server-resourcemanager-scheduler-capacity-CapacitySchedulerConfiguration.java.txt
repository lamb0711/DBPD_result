Merge trunk into HA branch.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1225900 13f79535-47bb-0310-9956-ffa450edef68

-  
+
-  public static final String DEFAULT_ACL = "*";
+  public static final String ALL_ACL = "*";
+
+  @Private
+  public static final String NONE_ACL = " ";
+  @Private
+  public static final String ROOT = "root";
+
-    LOG.info("CSConf - setCapacity: queuePrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("CSConf - setCapacity: queuePrefix=" + getQueuePrefix(queue) + 
-    LOG.info("CSConf - setCapacity: queuePrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("CSConf - setCapacity: queuePrefix=" + getQueuePrefix(queue) + 
-    LOG.info("CSConf - setMaxCapacity: queuePrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("CSConf - setMaxCapacity: queuePrefix=" + getQueuePrefix(queue) + 
-    LOG.info("here setUserLimit: queuePrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("here setUserLimit: queuePrefix=" + getQueuePrefix(queue) + 
-    String aclString = get(queuePrefix + getAclKey(acl), DEFAULT_ACL);
+    // The root queue defaults to all access if not defined
+    // Sub queues inherit access if not defined
+    String defaultAcl = queue.equals(ROOT) ? ALL_ACL : NONE_ACL;
+    String aclString = get(queuePrefix + getAclKey(acl), defaultAcl);
-    LOG.info("CSConf - getQueues called for: queuePrefix=" + getQueuePrefix(queue));
+    LOG.debug("CSConf - getQueues called for: queuePrefix=" + getQueuePrefix(queue));
-    LOG.info("CSConf - getQueues: queuePrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("CSConf - getQueues: queuePrefix=" + getQueuePrefix(queue) + 
-    LOG.info("CSConf - setQueues: qPrefix=" + getQueuePrefix(queue) + 
+    LOG.debug("CSConf - setQueues: qPrefix=" + getQueuePrefix(queue) + 
