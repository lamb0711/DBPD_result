HDFS-14316. RBF: Support unavailable subclusters for mount points with multiple destinations. Contributed by Inigo Goiri.

-          + "[-readonly] [-order HASH|LOCAL|RANDOM|HASH_ALL] "
+          + "[-readonly] [-faulttolerant] [-order HASH|LOCAL|RANDOM|HASH_ALL] "
-          + "[-readonly] [-order HASH|LOCAL|RANDOM|HASH_ALL] "
+          + "[-readonly] [-faulttolerant] [-order HASH|LOCAL|RANDOM|HASH_ALL] "
+    boolean faultTolerant = false;
+      } else if (parameters[i].equals("-faulttolerant")) {
+        faultTolerant = true;
-    return addMount(mount, nss, dest, readOnly, order,
+    return addMount(mount, nss, dest, readOnly, faultTolerant, order,
-      boolean readonly, DestinationOrder order, ACLEntity aclInfo)
+      boolean readonly, boolean faultTolerant, DestinationOrder order,
+      ACLEntity aclInfo)
+      if (faultTolerant) {
+        newEntry.setFaultTolerant(true);
+      }
+      newEntry.validate();
+
+      if (faultTolerant) {
+        existingEntry.setFaultTolerant(true);
+      }
+      existingEntry.validate();
+
+    boolean faultTolerant = false;
+      } else if (parameters[i].equals("-faulttolerant")) {
+        faultTolerant = true;
-    return updateMount(mount, nss, dest, readOnly, order,
+    return updateMount(mount, nss, dest, readOnly, faultTolerant, order,
-      boolean readonly, DestinationOrder order, ACLEntity aclInfo)
+      boolean readonly, boolean faultTolerant,
+      DestinationOrder order, ACLEntity aclInfo)
+    newEntry.setFaultTolerant(faultTolerant);
