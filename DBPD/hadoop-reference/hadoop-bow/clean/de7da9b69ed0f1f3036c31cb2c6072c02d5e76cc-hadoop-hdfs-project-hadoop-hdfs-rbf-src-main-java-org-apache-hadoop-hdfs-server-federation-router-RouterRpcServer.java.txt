HDFS-14422. RBF: Router shouldn't allow READ operations in safe mode. Contributed by Inigo Goiri.

+import org.apache.hadoop.hdfs.server.federation.store.StateStoreUnavailableException;
-    // We allow unchecked and read operations
+    // We allow unchecked and read operations to try, fail later
+    checkSafeMode();
+  }
+  /**
+   * Check if the Router is in safe mode.
+   * @throws StandbyException If the Router is in safe mode and cannot serve
+   *                          client requests.
+   */
+  private void checkSafeMode() throws StandbyException {
+      OperationCategory op = opCategory.get();
+      if (ioe instanceof StateStoreUnavailableException) {
+        checkSafeMode();
+      }
