YARN-6255. Refactor yarn-native-services framework. Contributed by Jian He

-import org.apache.slider.api.ClusterDescription;
-import org.apache.slider.api.StatusKeys;
-import org.apache.slider.providers.MonitorDetail;
-import org.apache.slider.providers.ProviderService;
+import org.apache.slider.server.appmaster.metrics.SliderMetrics;
-import java.util.Map;
-    ClusterDescription clusterStatus = appState.getClusterStatus();
-    String name = clusterStatus.name;
+    String name = appState.getApplicationName();
-          .td(getInfoAvoidingNulls(StatusKeys.INFO_CREATE_TIME_HUMAN))
+          .td("N/A")
-          .td(getInfoAvoidingNulls(StatusKeys.INFO_LIVE_TIME_HUMAN))
+          .td("N/A")
-          .td(getInfoAvoidingNulls(StatusKeys.INFO_FLEX_TIME_HUMAN))
+          .td("N/A")
-          .td(clusterStatus.dataPath)
+          .td("N/A")
-          .td(clusterStatus.originConfigurationPath)
+          .td("N/A")
-    List<RoleStatus> roleStatuses = appState.cloneRoleStatusList();
+    List<RoleStatus> roleStatuses =
+        new ArrayList<>(appState.getRoleStatusMap().values());
-        int pending = (int)status.getPendingAntiAffineRequests();
+        int pending = (int)status.getAAPending();
-        if (status.getRequested() > 0) {
+        if (status.getPending() > 0) {
+      SliderMetrics metrics = status.getComponentMetrics();
-        .td(String.format("%d", status.getDesired()))
-        .td(String.format("%d", status.getActual()))
-        .td(String.format("%d", status.getRequested()))
-        .td(String.format("%d", status.getFailed()))
-        .td(String.format("%d", status.getStartFailed()))
+        .td(String.format("%d", metrics.containersDesired.value()))
+        .td(String.format("%d", metrics.containersRunning.value()))
+        .td(String.format("%d", metrics.containersPending.value()))
+        .td(String.format("%d", metrics.containersFailed.value()))
-    addProviderServiceOptions(providerService, ul, clusterStatus);
+    //TODO render app/cluster status
-    return providerService.getHumanName();
+    return "docker";
-  private String getInfoAvoidingNulls(String key) {
-    String createTime = appState.getClusterStatus().getInfo(key);
-
-    return null == createTime ? "N/A" : createTime;
-  }
-
-  protected void addProviderServiceOptions(ProviderService provider,
-      UL ul, ClusterDescription clusterStatus) {
-    Map<String, MonitorDetail> details = provider.buildMonitorDetails(
-        clusterStatus);
-    if (null == details) {
-      return;
-    }
-    // Loop over each entry, placing the text in the UL, adding an anchor when the URL is non-null/empty
-    for (Entry<String, MonitorDetail> entry : details.entrySet()) {
-      MonitorDetail detail = entry.getValue();
-      if (SliderUtils.isSet(detail.getValue()) ) {
-        LI item = ul.li();
-        item.span().$class("bold")._(entry.getKey())._();
-        item._(" - ");
-        if (detail.isUrl()) {
-          // Render an anchor if the value is a URL
-          item.a(detail.getValue(), detail.getValue())._();
-        } else {
-          item._(detail.getValue())._();
-        }
-      } else {
-        ul.li(entry.getKey());
-      }
-    }
-  }
