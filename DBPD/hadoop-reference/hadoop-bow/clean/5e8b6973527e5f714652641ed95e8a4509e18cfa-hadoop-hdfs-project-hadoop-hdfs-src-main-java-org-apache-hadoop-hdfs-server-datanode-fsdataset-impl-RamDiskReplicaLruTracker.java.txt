HDFS-7129. Metrics to track usage of memory for writes. (Contributed by Xiaoyu Yao)

+import org.apache.hadoop.util.Time;
+    ramDiskReplicaLru.numReads.getAndIncrement();
+
-      ramDiskReplicaLru.lastUsedTime = System.currentTimeMillis();
+      ramDiskReplicaLru.lastUsedTime = Time.monotonicNow();
-    ramDiskReplicaLru.lastUsedTime = System.currentTimeMillis();
+    ramDiskReplicaLru.lastUsedTime = Time.monotonicNow();
+    ramDiskReplicaLru.isPersisted = true;
+
+  @Override
+  synchronized RamDiskReplica getReplica(
+    final String bpid, final long blockId) {
+    Map<Long, RamDiskReplicaLru> map = replicaMaps.get(bpid);
+
+    if (map == null) {
+      return null;
+    }
+
+    return map.get(blockId);
+  }
