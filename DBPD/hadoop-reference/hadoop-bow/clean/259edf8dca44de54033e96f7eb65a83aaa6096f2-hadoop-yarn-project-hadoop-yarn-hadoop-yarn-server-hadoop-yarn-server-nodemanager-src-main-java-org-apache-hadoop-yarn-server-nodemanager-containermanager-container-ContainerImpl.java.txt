YARN-571. Remove user from ContainerLaunchContext. Contributed by Omkar Vinit Joshi.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1485928 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import org.apache.hadoop.yarn.security.ContainerTokenIdentifier;
+  private final String user;
-  public ContainerImpl(Configuration conf,
-      Dispatcher dispatcher, ContainerLaunchContext launchContext,
+  public ContainerImpl(Configuration conf, Dispatcher dispatcher,
+      ContainerLaunchContext launchContext,
-      Credentials creds, NodeManagerMetrics metrics) {
+      Credentials creds, NodeManagerMetrics metrics,
+      ContainerTokenIdentifier identifier) throws IOException {
-
+    user = identifier.getApplicationSubmitter();
-      return this.launchContext.getUser();
+      return this.user;
-    String user = this.launchContext.getUser();
-                  ctxt.getUser(), container.container.getId()
+                  container.user, container.container.getId()
