HDFS-4798. Update computeContentSummary() for the reference nodes in snapshots.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1479671 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.server.namenode.Content.CountsMap.Key;
-    final Content.Counts current = computeContentSummary(
-        new Content.CountsMap()).getCounts(Key.CURRENT);
-    return new ContentSummary(current.get(Content.LENGTH),
-        current.get(Content.FILE) + current.get(Content.SYMLINK),
-        current.get(Content.DIRECTORY), getNsQuota(),
-        current.get(Content.DISKSPACE), getDsQuota());
+    final Content.Counts counts = computeContentSummary(
+        Content.Counts.newInstance());
+    return new ContentSummary(counts.get(Content.LENGTH),
+        counts.get(Content.FILE) + counts.get(Content.SYMLINK),
+        counts.get(Content.DIRECTORY), getNsQuota(),
+        counts.get(Content.DISKSPACE), getDsQuota());
-   * Count subtree content summary with a {@link Content.CountsMap}.
-   *
-   * @param countsMap The subtree counts for returning.
-   * @return The same objects as the counts parameter.
-   */
-  public abstract Content.CountsMap computeContentSummary(
-      Content.CountsMap countsMap);
-
-  /**
