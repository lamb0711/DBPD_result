HDFS-6051. HDFS cannot run on Windows since short-circuit memory segment changes (cmccabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1574246 13f79535-47bb-0310-9956-ffa450edef68

-      if (!NativeIO.isAvailable()) {
-        LOG.debug("Disabling ShortCircuitRegistry because NativeIO is " +
-            "not available.");
+      String loadingFailureReason =
+          SharedFileDescriptorFactory.getLoadingFailureReason();
+      if (loadingFailureReason != null) {
+        if (LOG.isDebugEnabled()) {
+          LOG.debug("Disabling ShortCircuitRegistry because " +
+                    loadingFailureReason);
+        }
-        LOG.info("Disabling ShortCircuitRegistry because shmPath was not set.");
+        LOG.debug("Disabling ShortCircuitRegistry because shmPath was not set.");
-        LOG.info("Disabling ShortCircuitRegistry because interruptCheckMs " +
-            "was set to " + interruptCheck);
+        if (LOG.isDebugEnabled()) {
+          LOG.debug("Disabling ShortCircuitRegistry because " +
+                    "interruptCheckMs was set to " + interruptCheck);
+        }
-          interruptCheck + ", shmPath=" + shmPath);
+                  interruptCheck + ", shmPath=" + shmPath);
