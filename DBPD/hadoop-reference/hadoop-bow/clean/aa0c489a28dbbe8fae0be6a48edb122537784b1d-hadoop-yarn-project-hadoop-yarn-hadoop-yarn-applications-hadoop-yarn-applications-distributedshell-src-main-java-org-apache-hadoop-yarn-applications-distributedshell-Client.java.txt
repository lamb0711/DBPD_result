YARN-1566. Changed Distributed Shell to retain containers across application attempts. Contributed by Jian He.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1557322 13f79535-47bb-0310-9956-ffa450edef68

+  // flag to indicate whether to keep containers across application attempts.
+  private boolean keepContainers = false;
+
+    opts.addOption("keep_containers_across_application_attempts", false,
+      "Flag to indicate whether to keep containers across application attempts." +
+      " If the flag is true, running containers will not be killed when" +
+      " application attempt fails and these containers will be retrieved by" +
+      " the new application attempt ");
+    if (cliParser.hasOption("keep_containers_across_application_attempts")) {
+      LOG.info("keep_containers_across_application_attempts");
+      keepContainers = true;
+    }
+
-    
+
+
+    appContext.setKeepContainersAcrossApplicationAttempts(keepContainers);
