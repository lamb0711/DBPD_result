YARN-6903. Yarn-native-service framework core rewrite. Contributed by Jian He

+import org.apache.hadoop.yarn.service.compinstance.ComponentInstance;
+import org.apache.slider.common.tools.SliderUtils;
-   * @param roleInstance role instance
+   * @param instance role instance
-  public ProbeStatus ping(RoleInstance roleInstance) {
+  public ProbeStatus ping(ComponentInstance instance) {
-    String ip = roleInstance.ip;
-    if (ip == null) {
-      status.fail(this, new IOException("IP is not available yet"));
+    if (instance.getContainerStatus() == null || SliderUtils
+        .isEmpty(instance.getContainerStatus().getIPs())) {
+      status.fail(this, new IOException(
+          instance.getCompInstanceName() + ": IP is not available yet"));
+    String ip = instance.getContainerStatus().getIPs().get(0);
-        log.debug("Connecting to " + sockAddr.toString() + "timeout=" +
-            MonitorUtils.millisToHumanTime(timeout));
+        log.debug(instance.getCompInstanceName() + ": Connecting " + sockAddr
+            .toString() + ", timeout=" + MonitorUtils
+            .millisToHumanTime(timeout));
-      String error = "Probe " + sockAddr + " failed: " + e;
+      String error =
+          instance.getCompInstanceName() + ": Probe " + sockAddr + " failed";
