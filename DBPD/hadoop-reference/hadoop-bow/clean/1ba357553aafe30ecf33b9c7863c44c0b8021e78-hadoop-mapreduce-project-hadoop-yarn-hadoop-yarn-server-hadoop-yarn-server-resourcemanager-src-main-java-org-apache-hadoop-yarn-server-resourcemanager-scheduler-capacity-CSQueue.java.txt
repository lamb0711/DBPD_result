Merge trunk into HA branch.

Resolved some semantic conflicts in TestFileAppendRestart - we now log more OP_ADDs in the HA branch than we did in trunk.
Resolved some conflicts around removal of VersionedProtocol, etc.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1295342 13f79535-47bb-0310-9956-ffa450edef68

-   * Get the currently utilized capacity of the queue 
-   * relative to it's parent queue.
-   * @return the currently utilized capacity of the queue 
-   *         relative to it's parent queue
+   * Get the current absolute used capacity of the queue
+   * relative to the entire cluster.
+   * @return queue absolute used capacity
+   */
+  public float getAbsoluteUsedCapacity();
+
+  /**
+   * Get the current used capacity of the queue
+   * and it's children (if any).
+   * @return queue used capacity
+   * Set absolute used capacity of the queue.
+   * @param absUsedCapacity absolute used capacity of the queue
+   */
+  public void setAbsoluteUsedCapacity(float absUsedCapacity);
+
+  /**
-   * Get the current <em>utilization</em> of the queue 
-   * and it's children (if any).
-   * Utilization is defined as the ratio of 
-   * <em>used-capacity over configured-capacity</em> of the queue.
-   * @return queue utilization
-   */
-  public float getUtilization();
-  
-  /**
-   * Get the current <em>utilization</em> of the queue.
-   * @param utilization queue utilization
-   */
-  public void setUtilization(float utilization);
-  
-  /**
