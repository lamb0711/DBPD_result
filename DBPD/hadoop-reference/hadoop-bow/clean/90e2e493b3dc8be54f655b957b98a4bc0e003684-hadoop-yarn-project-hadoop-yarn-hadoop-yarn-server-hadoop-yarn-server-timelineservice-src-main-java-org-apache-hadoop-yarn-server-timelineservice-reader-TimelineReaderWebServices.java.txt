YARN-8270 Adding JMX Metrics for Timeline Collector and Reader. Contributed by Sushil Ks.

+import org.apache.hadoop.yarn.server.timelineservice.metrics.TimelineReaderMetrics;
+  private static final TimelineReaderMetrics METRICS =
+      TimelineReaderMetrics.getInstance();
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-          (endTime - startTime) + " ms.)");
+          (Time.monotonicNow() - startTime) + " ms.)");
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntityTypesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info("Processed URL " + url +
+          " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info("Processed URL " + url +
-        " (Took " + (endTime - startTime) + " ms.)");
+    boolean succeeded = false;
+      succeeded = true;
+    } finally {
+      long latency = Time.monotonicNow() - startTime;
+      METRICS.addGetEntitiesLatency(latency, succeeded);
+      LOG.info(
+          "Processed URL " + url + " (Took " + latency + " ms.)");
-    long endTime = Time.monotonicNow();
-    LOG.info(
-        "Processed URL " + url + " (Took " + (endTime - startTime) + " ms.)");
+
