HADOOP-7210. Chown command is not working from FSShell. Contributed by Uma Maheswara Rao G

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1087159 13f79535-47bb-0310-9956-ffa450edef68

-    protected ChownHandler(String cmd) { //for chgrp
-      super(cmd);
-    }
-
-    ChownHandler(String cmd, String ownerStr) throws IOException {
-      super(cmd);
-      if(!cmd.equals("chown"))
-        return;
+    ChownHandler(String ownerStr) throws IOException {
+      super("chown");
-  private static class ChgrpHandler extends ChownHandler {
+  private static class ChgrpHandler extends CmdHandler {
+    protected String group = null;
+    
+    @Override
+    public void run(FileStatus file, FileSystem srcFs) throws IOException {
+
+      String newGroup = (group.equals(file.getGroup())) ?
+                        null : group;
+
+      if (newGroup != null) {
+        try {
+          srcFs.setOwner(file.getPath(), null, newGroup);
+        } catch (IOException e) {
+          LOG.debug("Error changing ownership of " + file.getPath(), e);
+          System.err.println(getName() + ": changing ownership of '" + 
+                             file.getPath() + "':" + e.getMessage());
+
+        }
+      }
+    }
+    
