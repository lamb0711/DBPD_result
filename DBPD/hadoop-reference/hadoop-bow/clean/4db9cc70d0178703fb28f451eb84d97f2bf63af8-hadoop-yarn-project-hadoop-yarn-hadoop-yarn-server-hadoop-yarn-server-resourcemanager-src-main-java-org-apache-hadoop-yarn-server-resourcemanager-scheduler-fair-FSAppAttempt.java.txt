YARN-6042. Dump scheduler and queue state information into FairScheduler DEBUG log. (Yufei Gu via rchiang)

+    if (LOG.isDebugEnabled()) {
+      LOG.debug("Resource request: " + capability + " exceeds the available"
+          + " resources of the node.");
+    }
+
-      if (isWaitingForAMContainer()) {
-        updateAMDiagnosticMsg(capability,
-            " exceed the available resources of the node and the request is"
-                + " reserved");
+      updateAMDiagnosticMsg(capability, " exceeds the available resources of "
+          + "the node and the request is reserved)");
+      if (LOG.isDebugEnabled()) {
+        LOG.debug(getName() + "'s resource request is reserved.");
-      if (isWaitingForAMContainer()) {
-        updateAMDiagnosticMsg(capability,
-            " exceed the available resources of the node and the request cannot"
-                + " be reserved");
-      }
+      updateAMDiagnosticMsg(capability, " exceeds the available resources of "
+          + "the node and the request cannot be reserved)");
-        LOG.debug("Couldn't creating reservation for " +
-            getName() + ",at priority " +  schedulerKey.getPriority());
+        LOG.debug("Couldn't create reservation for app:  " + getName()
+            + ", at priority " +  schedulerKey.getPriority());
-      if (isWaitingForAMContainer()) {
-        updateAMDiagnosticMsg(resource,
-            " exceeds current queue or its parents maximum resource allowed).");
-      }
+      updateAMDiagnosticMsg(resource,
+          " exceeds current queue or its parents maximum resource allowed).");
+
-      if (isWaitingForAMContainer()) {
-        PendingAsk amAsk = appSchedulingInfo.getNextPendingAsk();
-        updateAMDiagnosticMsg(amAsk.getPerAllocationResource(),
-            " exceeds maximum AM resource allowed).");
-      }
-
+      PendingAsk amAsk = appSchedulingInfo.getNextPendingAsk();
+      updateAMDiagnosticMsg(amAsk.getPerAllocationResource(),
+          " exceeds maximum AM resource allowed).");
-        LOG.debug("Skipping allocation because maxAMShare limit would " +
-            "be exceeded");
+        LOG.debug("AM resource request: " + amAsk.getPerAllocationResource()
+            + " exceeds maximum AM resource allowed, "
+            + getQueue().dumpState());
+    if (!isWaitingForAMContainer()) {
+      return;
+    }
+
