MAPREDUCE-3944. Change the history jobs/ webservice to return partial job info for a significant performance improvement. (Contributed by Robert Joseph Evans)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1297672 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.mapreduce.v2.api.records.JobReport;
-      // getAllJobs only gives you a partial we want a full
-      Job fullJob = appCtx.getJob(job.getID());
-      if (fullJob == null) {
-        continue;
-      }
-
-      JobInfo jobInfo = new JobInfo(fullJob);
-        if (!jobInfo.getQueueName().equals(queueQuery)) {
+        if (!job.getQueueName().equals(queueQuery)) {
-        if (!jobInfo.getUserName().equals(userQuery)) {
+        if (!job.getUserName().equals(userQuery)) {
+      JobReport report = job.getReport();
+      
-          && (jobInfo.getStartTime() < sBegin || jobInfo.getStartTime() > sEnd)) {
+          && (report.getStartTime() < sBegin || report.getStartTime() > sEnd)) {
-          && (jobInfo.getFinishTime() < fBegin || jobInfo.getFinishTime() > fEnd)) {
+          && (report.getFinishTime() < fBegin || report.getFinishTime() > fEnd)) {
-
+      
+      JobInfo jobInfo = new JobInfo(job);
+      
