YARN-6456.  Added config to set default container runtimes.
            Contributed by Craig Condit

+  private String defaultImageName;
+   * @param daemonConf the NodeManager daemon configuration
-  public static boolean isDockerContainerRequested(
+  public static boolean isDockerContainerRequested(Configuration daemonConf,
-    if (env == null) {
-      return false;
+    String type = (env == null)
+        ? null : env.get(ContainerRuntimeConstants.ENV_CONTAINER_TYPE);
+    if (type == null) {
+      type = daemonConf.get(YarnConfiguration.LINUX_CONTAINER_RUNTIME_TYPE);
-
-    String type = env.get(ContainerRuntimeConstants.ENV_CONTAINER_TYPE);
-
+    defaultImageName = conf.getTrimmed(
+        YarnConfiguration.NM_DOCKER_IMAGE_NAME, "");
-        LOG.warn(message + ". Please check "
-            + "configuration");
+        LOG.warn(message + ". Please check configuration");
-    return isDockerContainerRequested(env);
+    return isDockerContainerRequested(conf, env);
+    if (imageName == null || imageName.isEmpty()) {
+      imageName = defaultImageName;
+    }
