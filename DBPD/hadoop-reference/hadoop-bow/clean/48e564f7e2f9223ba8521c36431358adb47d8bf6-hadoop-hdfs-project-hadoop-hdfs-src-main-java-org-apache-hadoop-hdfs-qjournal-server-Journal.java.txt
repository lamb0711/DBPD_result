HDFS-14537. Journaled Edits Cache is not cleared when formatting the JN. Contributed by Ranith Sardar.

-  private final JournaledEditsCache cache;
+  private JournaledEditsCache cache;
+  private Configuration conf = null;
+
+    this.conf = conf;
-    if (conf.getBoolean(DFSConfigKeys.DFS_HA_TAILEDITS_INPROGRESS_KEY,
-        DFSConfigKeys.DFS_HA_TAILEDITS_INPROGRESS_DEFAULT)) {
-      this.cache = new JournaledEditsCache(conf);
-    } else {
-      this.cache = null;
-    }
-    
+    this.cache = createCache();
+
+  private JournaledEditsCache createCache() {
+    if (conf.getBoolean(DFSConfigKeys.DFS_HA_TAILEDITS_INPROGRESS_KEY,
+        DFSConfigKeys.DFS_HA_TAILEDITS_INPROGRESS_DEFAULT)) {
+      return new JournaledEditsCache(conf);
+    } else {
+      return null;
+    }
+  }
+
+    this.cache = createCache();
