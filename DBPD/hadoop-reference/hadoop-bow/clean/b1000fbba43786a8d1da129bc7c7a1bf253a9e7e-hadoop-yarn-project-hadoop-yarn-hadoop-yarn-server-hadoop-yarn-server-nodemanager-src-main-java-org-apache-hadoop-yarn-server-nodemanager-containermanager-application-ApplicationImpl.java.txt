Merge branch 'trunk' into HDFS-6581

Conflicts:
	hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java
	hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/INodeFile.java

+import org.apache.hadoop.yarn.api.records.LogAggregationContext;
+import com.google.common.annotations.VisibleForTesting;
+
+  private LogAggregationContext logAggregationContext;
+
+      app.logAggregationContext = initEvent.getLogAggregationContext();
-              app.applicationACLs)); 
+              app.applicationACLs, app.logAggregationContext)); 
+
+  @VisibleForTesting
+  public LogAggregationContext getLogAggregationContext() {
+    try {
+      this.readLock.lock();
+      return this.logAggregationContext;
+    } finally {
+      this.readLock.unlock();
+    }
+  }
