HADOOP-12587. Hadoop AuthToken refuses to work without a maxinactive attribute in issued token. (Benoy Antony)

-    new HashSet<String>(Arrays.asList(USER_NAME, PRINCIPAL,
-        MAX_INACTIVES, EXPIRES, TYPE));
+      new HashSet<>(Arrays.asList(USER_NAME, PRINCIPAL, EXPIRES, TYPE));
-    sb.append(MAX_INACTIVES).append("=")
+    if (getMaxInactives() != -1) {
+      sb.append(MAX_INACTIVES).append("=")
+    }
-    if (!map.keySet().equals(ATTRIBUTES)) {
+    if (!map.keySet().containsAll(ATTRIBUTES)) {
-    long maxInactives = Long.parseLong(map.get(MAX_INACTIVES));
-    token.setMaxInactives(maxInactives);
+    //process optional attributes
+    if (map.containsKey(MAX_INACTIVES)) {
+      long maxInactives = Long.parseLong(map.get(MAX_INACTIVES));
+      token.setMaxInactives(maxInactives);
+    }
