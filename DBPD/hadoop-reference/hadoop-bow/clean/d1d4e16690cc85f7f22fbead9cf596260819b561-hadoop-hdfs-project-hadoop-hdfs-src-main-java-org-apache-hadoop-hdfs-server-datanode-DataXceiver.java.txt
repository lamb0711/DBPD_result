HDFS-9710. DN can be configured to send block receipt IBRs in batches.

+    final boolean isOnTransientStorage;
+      final Replica replica;
-
-        storageUuid = blockReceiver.getStorageUuid();
+        replica = blockReceiver.getReplica();
-        storageUuid = datanode.data.recoverClose(
+        replica = datanode.data.recoverClose(
+      storageUuid = replica.getStorageUuid();
+      isOnTransientStorage = replica.isOnTransientStorage();
-        datanode.closeBlock(block, DataNode.EMPTY_DEL_HINT, storageUuid);
+        datanode.closeBlock(block, null, storageUuid, isOnTransientStorage);
+        final Replica r = blockReceiver.getReplica();
-            block, delHint, blockReceiver.getStorageUuid());
+            block, delHint, r.getStorageUuid(), r.isOnTransientStorage());
