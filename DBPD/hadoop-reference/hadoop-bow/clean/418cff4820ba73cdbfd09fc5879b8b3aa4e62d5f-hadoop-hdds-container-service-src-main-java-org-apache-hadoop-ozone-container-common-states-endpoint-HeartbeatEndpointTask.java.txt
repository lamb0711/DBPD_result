Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

+import com.google.protobuf.Descriptors;
+import com.google.protobuf.GeneratedMessage;
-      SCMHeartbeatRequestProto request = SCMHeartbeatRequestProto.newBuilder()
-          .setDatanodeDetails(datanodeDetailsProto)
-          .setNodeReport(context.getNodeReport())
-          .build();
+      SCMHeartbeatRequestProto.Builder requestBuilder =
+          SCMHeartbeatRequestProto.newBuilder()
+              .setDatanodeDetails(datanodeDetailsProto);
+      addReports(requestBuilder);
-          .sendHeartbeat(request);
+          .sendHeartbeat(requestBuilder.build());
+   * Adds all the available reports to heartbeat.
+   *
+   * @param requestBuilder builder to which the report has to be added.
+   */
+  private void addReports(SCMHeartbeatRequestProto.Builder requestBuilder) {
+    for (GeneratedMessage report : context.getAllAvailableReports()) {
+      String reportName = report.getDescriptorForType().getFullName();
+      for (Descriptors.FieldDescriptor descriptor :
+          SCMHeartbeatRequestProto.getDescriptor().getFields()) {
+        String heartbeatFieldName = descriptor.getMessageType().getFullName();
+        if (heartbeatFieldName.equals(reportName)) {
+          requestBuilder.setField(descriptor, report);
+        }
+      }
+    }
+  }
+
+  /**
