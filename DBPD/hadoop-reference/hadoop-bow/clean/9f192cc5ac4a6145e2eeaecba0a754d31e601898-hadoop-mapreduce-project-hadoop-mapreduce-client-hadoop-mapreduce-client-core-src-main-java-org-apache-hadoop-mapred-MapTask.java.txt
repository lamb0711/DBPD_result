MAPREDUCE-6628. Potential memory leak in CryptoOutputStream. Contributed by Mariappan Asokan

+      FSDataOutputStream partitionOut = null;
-            FSDataOutputStream partitionOut = CryptoUtils.wrapIfNecessary(job, out);
+            partitionOut = CryptoUtils.wrapIfNecessary(job, out, false);
+            if (partitionOut != out) {
+              partitionOut.close();
+              partitionOut = null;
+            }
+        if (partitionOut != null) {
+          partitionOut.close();
+        }
+      FSDataOutputStream partitionOut = null;
-            FSDataOutputStream partitionOut = CryptoUtils.wrapIfNecessary(job, out);
+            partitionOut = CryptoUtils.wrapIfNecessary(job, out, false);
+            if (partitionOut != out) {
+              partitionOut.close();
+              partitionOut = null;
+            }
+        if (partitionOut != null) {
+          partitionOut.close();
+        }
+      FSDataOutputStream finalPartitionOut = null;
-            FSDataOutputStream finalPartitionOut = CryptoUtils.wrapIfNecessary(job, finalOut);
+            finalPartitionOut = CryptoUtils.wrapIfNecessary(job, finalOut,
+                false);
+            if (finalPartitionOut != finalOut) {
+              finalPartitionOut.close();
+              finalPartitionOut = null;
+            }
+          if (finalPartitionOut != null) {
+            finalPartitionOut.close();
+          }
-          FSDataOutputStream finalPartitionOut = CryptoUtils.wrapIfNecessary(job, finalOut);
+          finalPartitionOut = CryptoUtils.wrapIfNecessary(job, finalOut, false);
+          if (finalPartitionOut != finalOut) {
+            finalPartitionOut.close();
+            finalPartitionOut = null;
+          }
+        if (finalPartitionOut != null) {
+          finalPartitionOut.close();
+        }
