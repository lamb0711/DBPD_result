HDFS-5398. NameNode changes to process storage reports per storage directory.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1534847 13f79535-47bb-0310-9956-ffa450edef68

+import com.google.common.annotations.VisibleForTesting;
+  private long blockPoolUsed;
-  void receivedHeartbeat(final long lastUpdate) {
+  void receivedHeartbeat(StorageReport report, final long lastUpdate) {
+    updateState(report);
-  void setUtilization(long capacity, long dfsUsed, long remaining) {
+  @VisibleForTesting
+  public void setUtilization(long capacity, long dfsUsed,
+                      long remaining, long blockPoolUsed) {
+    this.blockPoolUsed = blockPoolUsed;
+  public long getBlockPoolUsed() {
+    return blockPoolUsed;
+  }
+
+    blockPoolUsed = r.getBlockPoolUsed();
