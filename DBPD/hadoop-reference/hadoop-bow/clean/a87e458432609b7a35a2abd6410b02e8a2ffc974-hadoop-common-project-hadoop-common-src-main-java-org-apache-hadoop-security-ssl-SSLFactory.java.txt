HADOOP-15813. Enable more reliable SSL connection reuse. Contributed by Daryn Sharp.

Signed-off-by: Wei-Chiu Chuang <weichiu@apache.org>

+  // the java keep-alive cache relies on instance equivalence of the SSL socket
+  // factory.  in many java versions, SSLContext#getSocketFactory always
+  // returns a new instance which completely breaks the cache...
+  private SSLSocketFactory socketFactory;
+    if (mode == Mode.CLIENT) {
+      socketFactory = context.getSocketFactory();
+    }
-    return context.getSocketFactory();
+    return socketFactory;
