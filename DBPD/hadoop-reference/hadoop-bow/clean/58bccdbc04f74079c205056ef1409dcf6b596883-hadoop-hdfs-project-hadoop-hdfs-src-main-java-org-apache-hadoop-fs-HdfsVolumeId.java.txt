Merge r1569890 through r1572417 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1572418 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.commons.codec.binary.Base64;
+import org.apache.hadoop.util.StringUtils;
+
+import com.google.common.base.Preconditions;
- * 
- * Note that invalid IDs are represented by {@link VolumeId#INVALID_VOLUME_ID}.
-    if (id == null) {
-      throw new NullPointerException("A valid Id can only be constructed " +
-      		"with a non-null byte array.");
-    }
+    Preconditions.checkNotNull(id, "id cannot be null");
-  public final boolean isValid() {
-    return true;
-  }
-
-  @Override
-    if (!arg0.isValid()) {
-      // any valid ID is greater 
-      // than any invalid ID: 
-      return 1;
-    }
-    // NB: if (!obj.isValid()) { return false; } check is not necessary
-    // because we have class identity checking above, and for this class
-    // isValid() is always true.
-    return Base64.encodeBase64String(id);
+    return StringUtils.byteToHexString(id);
