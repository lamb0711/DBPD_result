HADOOP-9287. Parallel-testing hadoop-common. Contributed by Andrey Klochkov


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1488040 13f79535-47bb-0310-9956-ffa450edef68

-  protected static FileContext fc;
+  protected FileContextTestHelper fileContextTestHelper;
+  protected FileContext fc;
+  protected FileContextTestHelper getFileContextHelper() {
+      return new FileContextTestHelper(); 
+  }
+  
+  protected abstract FileContext getFileContext() throws Exception;
+  
-    fc.mkdir(getTestRootPath(fc), FileContext.DEFAULT_PERM, true);
+    fileContextTestHelper = getFileContextHelper();
+    fc = getFileContext();
+    fc.mkdir(fileContextTestHelper.getTestRootPath(fc), FileContext.DEFAULT_PERM, true);
-    fc.delete(getTestRootPath(fc), true);
+    fc.delete(fileContextTestHelper.getTestRootPath(fc), true);
-    Path f = getTestRootPath(fc, filename);
-    createFile(fc, filename);
+    Path f = fileContextTestHelper.getTestRootPath(fc, filename);
+    fileContextTestHelper.createFile(fc, filename);
-    Path f = getTestRootPath(fc, filename);
+    Path f = fileContextTestHelper.getTestRootPath(fc, filename);
-    Path f = getTestRootPath(fc, filename);
+    Path f = fileContextTestHelper.getTestRootPath(fc, filename);
