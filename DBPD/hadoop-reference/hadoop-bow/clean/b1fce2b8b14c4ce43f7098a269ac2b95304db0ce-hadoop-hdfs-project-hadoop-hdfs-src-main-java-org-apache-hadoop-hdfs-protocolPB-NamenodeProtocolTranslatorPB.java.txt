HDFS-11209. SNN can't checkpoint when rolling upgrade is not finalized. Contributed by Xiaoyu Yao.

+import org.apache.hadoop.hdfs.protocol.proto.NamenodeProtocolProtos.IsRollingUpgradeRequestProto;
+import org.apache.hadoop.hdfs.protocol.proto.NamenodeProtocolProtos.IsRollingUpgradeResponseProto;
+
+  @Override
+  public boolean isRollingUpgrade() throws IOException {
+    IsRollingUpgradeRequestProto req = IsRollingUpgradeRequestProto
+        .newBuilder().build();
+    try {
+      IsRollingUpgradeResponseProto response = rpcProxy.isRollingUpgrade(
+          NULL_CONTROLLER, req);
+      return response.getIsRollingUpgrade();
+    } catch (ServiceException e) {
+      throw ProtobufHelper.getRemoteException(e);
+    }
+  }
