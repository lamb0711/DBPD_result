Merge r1408927 through r1410997 from trunk


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1411007 13f79535-47bb-0310-9956-ffa450edef68

-import com.google.inject.Inject;
-import java.util.Locale;
-import javax.servlet.http.Cookie;
-  public static final String THEMESWITCHER = "ui.themeswitcher";
-  public static final String THEMESWITCHER_ID = THEMESWITCHER +".id";
-  public static final String THEME_KEY = "theme";
-  public static final String COOKIE_THEME = "jquery-ui-theme";
+
-      link(root_url(join("static/jquery/themes-1.8.16/",
-        getTheme(), "/jquery-ui.css"))).
-      link(root_url("static/dt-1.7.5/css/jui-dt.css")).
-      script(root_url("static/jquery/jquery.min-1.6.4.js")).
-      script(root_url("static/jquery/jquery-ui.min-1.8.16.js")).
-      script(root_url("static/dt-1.7.5/js/jquery.dataTables.min.js")).
+      link(root_url("static/jquery/themes-1.9.1/base/jquery-ui.css")).
+      link(root_url("static/dt-1.9.4/css/jui-dt.css")).
+      script(root_url("static/jquery/jquery-1.8.2.min.js")).
+      script(root_url("static/jquery/jquery-ui-1.9.1.custom.min.js")).
+      script(root_url("static/dt-1.9.4/js/jquery.dataTables.min.js")).
-      script(root_url("static/themeswitcher.js")).
-    initThemeSwitcher(list);
-  protected void initThemeSwitcher(List<String> list) {
-    for (String id : split($(THEMESWITCHER_ID))) {
-      if (Html.isValidId(id)) {
-        list.add(join("  $('#", id,
-                      "').themeswitcher({expires:888, path:'/'});"));
-        break; // one is enough
-      }
-    }
-  }
-
-  protected String getTheme() {
-    String theme = $(THEME_KEY);
-    if (!theme.isEmpty()) {
-      return theme;
-    }
-    Cookie c = cookies().get(COOKIE_THEME);
-    if (c != null) {
-      return c.getValue().toLowerCase(Locale.US).replace("%20", "-");
-    }
-    return "base";
-  }
-
