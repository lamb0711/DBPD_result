Merging trunk to HDFS-1623 branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1177130 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.util.BuilderUtils;
-    pri.setPriority(1);
+    pri.setPriority(priority);
-    AllocateRequest req = Records.newRecord(AllocateRequest.class);
-    req.setResponseId(++responseId);
-    req.setApplicationAttemptId(attemptId);
-    req.addAllAsks(resourceRequest);
-    req.addAllReleases(releases);
+    AllocateRequest req = BuilderUtils.newAllocateRequest(attemptId,
+        ++responseId, 0F, resourceRequest, releases);
