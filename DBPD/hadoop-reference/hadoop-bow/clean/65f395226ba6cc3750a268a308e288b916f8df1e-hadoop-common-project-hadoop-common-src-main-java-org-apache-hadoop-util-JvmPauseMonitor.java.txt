HADOOP-12321. Make JvmPauseMonitor an AbstractService. (Sunil G via Stevel) [includes HDFS-8947 MAPREDUCE-6462 and YARN-4072]

+import org.apache.hadoop.service.AbstractService;
-public class JvmPauseMonitor {
+public class JvmPauseMonitor extends AbstractService {
-  
+
-  private final long warnThresholdMs;
+  private long warnThresholdMs;
-  
+
-  private final long infoThresholdMs;
+  private long infoThresholdMs;
-   
+
-  public JvmPauseMonitor(Configuration conf) {
+  public JvmPauseMonitor() {
+    super(JvmPauseMonitor.class.getName());
+  }
+
+  @Override
+  protected void serviceInit(Configuration conf) throws Exception {
+    super.serviceInit(conf);
-  
-  public void start() {
-    Preconditions.checkState(monitorThread == null,
-        "Already started");
+
+  @Override
+  protected void serviceStart() throws Exception {
-    if (shouldRun) {
-      monitorThread.start();
-    } else {
-      LOG.warn("stop() was called before start() completed");
-    }
+    monitorThread.start();
+    super.serviceStart();
-  
-  public void stop() {
+
+  @Override
+  protected void serviceStop() throws Exception {
-    if (isStarted()) {
+    if (monitorThread != null) {
+    super.serviceStop();
-  
+
+  @SuppressWarnings("resource")
-    new JvmPauseMonitor(new Configuration()).start();
+    JvmPauseMonitor monitor = new JvmPauseMonitor();
+    monitor.init(new Configuration());
+    monitor.start();
