HDFS-7722. DataNode#checkDiskError should also remove Storage when error is found. (Lei Xu via Colin P. McCabe)

+import java.util.Set;
-  public void checkDataDir() throws DiskErrorException {
+  public Set<File> checkDataDir() {
+    return null;
-  public synchronized void removeVolumes(Collection<StorageLocation> volumes) {
+  public synchronized void removeVolumes(Set<File> volumes, boolean clearFailure) {
