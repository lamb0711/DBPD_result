HDDS-20. Ozone: Add support for rename key within a bucket for rpc client. Contributed by Lokesh Jain.

-      rename(key, newKeyName);
+      bucket.renameKey(key, newKeyName);
-
-    // TODO: currently rename work by copying the streams, with changes in KSM,
-    // this operation can be improved by renaming the keys in KSM directly.
-    private void rename(String src, String dst) throws IOException {
-      try (OzoneInputStream inputStream = bucket.readKey(src);
-          OzoneOutputStream outputStream = bucket
-              .createKey(dst, 0, replicationType, replicationFactor)) {
-        IOUtils.copyBytes(inputStream, outputStream, getConf());
-      }
-    }
-   * rename by copying the data from source path to destination path.
+   * rename from source path to destination path.
-   * The rename operation is performed by copying data from source key
-   * to destination key. This is done by reading the source key data into a
-   * temporary file and then writing this temporary file to destination key.
-   * The temporary file is deleted after the rename operation.
-   * TODO: Optimize the operation by renaming keys in KSM.
+   * The rename operation is performed by renaming the keys with src as prefix.
+   * For such keys the prefix is changed from src to dst.
-    LOG.trace("rename() from:{} to:{}", src, dst);
+    if (src.equals(dst)) {
+      return true;
+    }
+    LOG.trace("rename() from:{} to:{}", src, dst);
-    iterator.iterate();
-    return src.equals(dst) || delete(src, true);
+    return iterator.iterate();
