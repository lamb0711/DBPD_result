HADOOP-6486. fix common classes to work with Avro 1.3 reflection. Contributed by cutting.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@921577 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collection;
+import java.util.AbstractCollection;
-public class EnumSetWritable<E extends Enum<E>> implements Writable,
-    Configurable {
+public class EnumSetWritable<E extends Enum<E>> extends AbstractCollection<E>
+  implements Writable, Configurable  {
-  private Class<E> elementType;
+  private transient Class<E> elementType;
-  private Configuration conf;
-
+  private transient Configuration conf;
+  
+  public Iterator<E> iterator() { return value.iterator(); }
+  public int size() { return value.size(); }
+  public boolean add(E e) {
+    if (value == null) {
+      value = EnumSet.of(e);
+      set(value, null);
+    }
+    return value.add(e);
+  }
+
