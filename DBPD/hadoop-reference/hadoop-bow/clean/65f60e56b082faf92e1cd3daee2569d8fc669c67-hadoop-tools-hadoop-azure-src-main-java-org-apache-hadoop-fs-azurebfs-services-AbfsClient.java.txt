HADOOP-16068. ABFS Authentication and Delegation Token plugins to optionally be bound to specific URI of the store.

Contributed by Steve Loughran.

+import java.io.Closeable;
+import org.apache.hadoop.fs.azurebfs.extensions.ExtensionHelper;
+import org.apache.hadoop.io.IOUtils;
-public class AbfsClient {
+public class AbfsClient implements Closeable {
+  @Override
+  public void close() throws IOException {
+    if (tokenProvider instanceof Closeable) {
+      IOUtils.cleanupWithLogger(LOG, (Closeable) tokenProvider);
+    }
+  }
+
+    String tokenProviderField =
+        ExtensionHelper.getUserAgentSuffix(tokenProvider, "");
+    if (!tokenProviderField.isEmpty()) {
+      sb.append("; ").append(tokenProviderField);
+    }
-    return String.format(CLIENT_VERSION + " %s", userAgentComment);
+    return String.format(Locale.ROOT, CLIENT_VERSION + " %s", userAgentComment);
