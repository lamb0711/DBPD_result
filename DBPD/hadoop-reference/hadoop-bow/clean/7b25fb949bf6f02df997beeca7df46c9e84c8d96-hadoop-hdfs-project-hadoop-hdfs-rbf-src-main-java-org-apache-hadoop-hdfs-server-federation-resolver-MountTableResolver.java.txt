HDFS-13743. RBF: Router throws NullPointerException due to the invalid initialization of MountTableResolver. Contributed by Takanobu Asanuma.

+import static org.apache.hadoop.hdfs.client.HdfsClientConfigKeys.DFS_NAMESERVICES;
+import static org.apache.hadoop.hdfs.client.HdfsClientConfigKeys.DeprecatedKeys.DFS_NAMESERVICE_ID;
-import org.apache.hadoop.HadoopIllegalArgumentException;
-    try {
-      this.defaultNameService = conf.get(
-          DFS_ROUTER_DEFAULT_NAMESERVICE,
-          DFSUtil.getNamenodeNameServiceId(conf));
-    } catch (HadoopIllegalArgumentException e) {
-      LOG.error("Cannot find default name service, setting it to the first");
+    this.defaultNameService = conf.get(
+        DFS_ROUTER_DEFAULT_NAMESERVICE,
+        DFSUtil.getNamenodeNameServiceId(conf));
+
+    if (defaultNameService == null) {
+      LOG.warn(
+          "{} and {} is not set. Fallback to {} as the default name service.",
+          DFS_ROUTER_DEFAULT_NAMESERVICE, DFS_NAMESERVICE_ID, DFS_NAMESERVICES);
-      this.defaultNameService = nsIds.iterator().next();
+      if (nsIds.isEmpty()) {
+        this.defaultNameService = "";
+      } else {
+        this.defaultNameService = nsIds.iterator().next();
+      }
+    }
+
+    if (this.defaultNameService.equals("")) {
+      LOG.warn("Default name service is not set.");
+    } else {
