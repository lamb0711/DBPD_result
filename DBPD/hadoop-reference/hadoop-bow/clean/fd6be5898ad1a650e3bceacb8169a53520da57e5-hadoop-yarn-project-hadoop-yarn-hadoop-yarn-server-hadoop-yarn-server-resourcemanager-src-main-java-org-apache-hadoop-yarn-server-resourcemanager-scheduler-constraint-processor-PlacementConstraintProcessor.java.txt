YARN-8468. Enable the use of queue based maximum container allocation limit and implement it in FairScheduler. Contributed by Antal BÃ¡lint Steinbach.

+      SchedulerApplicationAttempt appAttempt =
+          scheduler.getApplicationAttempt(appAttemptId);
+      String queueName = null;
+      if(appAttempt != null) {
+        queueName = appAttempt.getQueueName();
+      }
+      Resource maxAllocation =
+          scheduler.getMaximumResourceCapability(queueName);
-        req.getResourceSizing()
-            .setResources(this.scheduler.getNormalizedResource(reqResource));
+        req.getResourceSizing().setResources(
+            this.scheduler.getNormalizedResource(reqResource, maxAllocation));
