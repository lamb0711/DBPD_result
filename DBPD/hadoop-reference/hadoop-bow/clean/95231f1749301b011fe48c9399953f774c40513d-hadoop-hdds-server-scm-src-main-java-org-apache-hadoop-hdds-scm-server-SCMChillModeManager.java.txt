HDDS-362. Modify functions impacted by SCM chill mode in ScmBlockLocationProtocol. Contributed by Ajay Kumar.

+import java.util.EnumSet;
+import org.apache.hadoop.hdds.protocol.proto.HddsProtos.ScmOps;
+import org.apache.hadoop.hdds.server.events.EventQueue;
+  private final EventQueue eventPublisher;
-      EventPublisher eventQueue) {
+      EventQueue eventQueue) {
+    this.eventPublisher = eventQueue;
+    emitChillModeStatus();
+  }
+
+  /**
+   * Emit Chill mode status.
+   */
+  @VisibleForTesting
+  public void emitChillModeStatus() {
+    eventPublisher.fireEvent(SCMEvents.CHILL_MODE_STATUS, inChillMode.get());
-  private void exitChillMode(EventPublisher eventQueue) {
+  /**
+   * Exit chill mode. It does following actions:
+   * 1. Set chill mode status to fale.
+   * 2. Emits START_REPLICATION for ReplicationManager.
+   * 3. Cleanup resources.
+   * 4. Emit chill mode status.
+   * @param eventQueue
+   */
+  @VisibleForTesting
+  public void exitChillMode(EventPublisher eventQueue) {
-    // Emit event to ReplicationManager to start replication.
-    eventQueue.fireEvent(SCMEvents.START_REPLICATION, true);
+    emitChillModeStatus();
+  /**
+   * Set chill mode status.
+   */
+
+  /**
+   * Operations restricted in SCM chill mode.
+   */
+  public static class ChillModeRestrictedOps {
+    private static EnumSet restrictedOps =  EnumSet.noneOf(ScmOps.class);
+
+    static {
+      restrictedOps.add(ScmOps.allocateBlock);
+    }
+
+    public static boolean isRestrictedInChillMode(ScmOps opName) {
+      return restrictedOps.contains(opName);
+    }
+  }
+
