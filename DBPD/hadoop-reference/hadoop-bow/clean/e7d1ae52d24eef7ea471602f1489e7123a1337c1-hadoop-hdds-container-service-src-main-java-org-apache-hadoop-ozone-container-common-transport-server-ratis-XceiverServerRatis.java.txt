HDDS-1017. Use distributed tracing to indentify performance problems in Ozone. Contributed by Elek, Marton.

+import org.apache.hadoop.hdds.tracing.TracingUtil;
+
+import io.opentracing.Scope;
+
-    RaftClientRequest raftClientRequest =
-        createRaftClientRequest(request, pipelineID,
-            RaftClientRequest.writeRequestType());
-    try {
-      reply = server.submitClientRequestAsync(raftClientRequest).get();
-    } catch (Exception e) {
-      throw new IOException(e.getMessage(), e);
+    try (Scope scope = TracingUtil
+        .importAndCreateScope(request.getCmdType().name(),
+            request.getTraceID())) {
+
+      RaftClientRequest raftClientRequest =
+          createRaftClientRequest(request, pipelineID,
+              RaftClientRequest.writeRequestType());
+      try {
+        reply = server.submitClientRequestAsync(raftClientRequest).get();
+      } catch (Exception e) {
+        throw new IOException(e.getMessage(), e);
+      }
+      processReply(reply);
-    processReply(reply);
