Merge branch 'trunk' into HDFS-6581

-          && service.equals(token.getService())) {
+          && checkService(service, token)) {
+  private boolean checkService(Text service,
+      Token<? extends TokenIdentifier> token) {
+    if (service == null || token.getService() == null) {
+      return false;
+    }
+    return token.getService().toString().contains(service.toString());
+  }
