HADOOP-10848. Cleanup calling of sun.security.krb5.Config.

-import java.lang.reflect.Method;
+import javax.security.auth.kerberos.KerberosPrincipal;
-  public static String getDefaultRealm() 
-      throws ClassNotFoundException, NoSuchMethodException, 
-      IllegalArgumentException, IllegalAccessException, 
+  /**
+   * Return the default realm for this JVM.
+   *
+   * @return The default realm
+   * @throws IllegalArgumentException If the default realm does not exist.
+   * @throws ClassNotFoundException Not thrown. Exists for compatibility.
+   * @throws NoSuchMethodException Not thrown. Exists for compatibility.
+   * @throws IllegalAccessException Not thrown. Exists for compatibility.
+   * @throws InvocationTargetException Not thrown. Exists for compatibility.
+   */
+  public static String getDefaultRealm()
+      throws ClassNotFoundException, NoSuchMethodException,
+      IllegalArgumentException, IllegalAccessException,
-    Object kerbConf;
-    Class<?> classRef;
-    Method getInstanceMethod;
-    Method getDefaultRealmMethod;
-    if (IBM_JAVA) {
-      classRef = Class.forName("com.ibm.security.krb5.internal.Config");
-    } else {
-      classRef = Class.forName("sun.security.krb5.Config");
-    }
-    getInstanceMethod = classRef.getMethod("getInstance", new Class[0]);
-    kerbConf = getInstanceMethod.invoke(classRef, new Object[0]);
-    getDefaultRealmMethod = classRef.getDeclaredMethod("getDefaultRealm",
-         new Class[0]);
-    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);
+    // Any name is okay.
+    return new KerberosPrincipal("tmp", 1).getRealm();
+  /**
+   * Return the default realm for this JVM.
+   * If the default realm does not exist, this method returns null.
+   *
+   * @return The default realm
+   */
-    String realmString = null;
-      realmString = getDefaultRealm();
-    } catch (RuntimeException rte) {
-      //silently catch everything
+      return getDefaultRealm();
-      //silently return null
+      //silently catch everything
+      return null;
-    return realmString;
