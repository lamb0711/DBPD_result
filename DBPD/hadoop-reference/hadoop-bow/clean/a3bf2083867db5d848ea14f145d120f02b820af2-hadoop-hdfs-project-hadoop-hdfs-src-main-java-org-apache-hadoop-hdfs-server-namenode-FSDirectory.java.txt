HDFS-4441. Move INodeDirectoryWithSnapshot.Diff and the related classes to a package.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1438782 13f79535-47bb-0310-9956-ffa450edef68

-  private void unprotectedReplaceINode(String path, INode oldnode,
-      INode newnode, Snapshot latest) throws IOException {    
+  void unprotectedReplaceINodeFile(final String path, final INodeFile oldnode,
+      final INodeFile newnode, final Snapshot latest) {
-    INodeDirectory parent = oldnode.getParent();
-    // Remove the node from the namespace 
-    if (parent == null) {
-      final String mess
-          = "FSDirectory.unprotectedReplaceINode: failed to remove " + path;
-      NameNode.stateChangeLog.warn("DIR* " + mess);
-      throw new IOException(mess);
-    }
-    
+    final INodeDirectory parent = oldnode.getParent();
-    parent = oldnode.getParent();
-  }
-  void unprotectedReplaceINodeFile(String path, INodeFile oldnode,
-      INodeFile newnode, Snapshot latest
-      ) throws IOException, UnresolvedLinkException {
-    unprotectedReplaceINode(path, oldnode, newnode, latest);
-    newnode.setLocalName(oldnode.getLocalNameBytes());
-    
