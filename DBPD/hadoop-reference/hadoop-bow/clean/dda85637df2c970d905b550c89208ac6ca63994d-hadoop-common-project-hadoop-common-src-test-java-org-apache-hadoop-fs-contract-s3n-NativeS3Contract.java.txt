Merge trunk to branch.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/fs-encryption@1608603 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.hadoop.fs.swift.exceptions;
+package org.apache.hadoop.fs.contract.s3n;
+
+import org.apache.hadoop.conf.Configuration;
+import org.apache.hadoop.fs.contract.AbstractBondedFSContract;
- * Exception raised when trying to create a file that already exists
- * and the overwrite flag is set to false.
+ * The contract of S3N: only enabled if the test bucket is provided
-public class SwiftPathExistsException extends SwiftException {
-  public SwiftPathExistsException(String message) {
-    super(message);
+public class NativeS3Contract extends AbstractBondedFSContract {
+
+  public static final String CONTRACT_XML = "contract/s3n.xml";
+
+
+  public NativeS3Contract(Configuration conf) {
+    super(conf);
+    //insert the base features
+    addConfResource(CONTRACT_XML);
-  public SwiftPathExistsException(String message, Throwable cause) {
-    super(message, cause);
+  @Override
+  public String getScheme() {
+    return "s3n";
+
