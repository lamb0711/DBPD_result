HDFS-15332. Quota Space consumed was wrong in truncate with Snapshots. Contributed by hemanthboyina.

+      for (FileDiff diff : diffs) {
+        BlockInfo[] diffBlocks = diff.getBlocks();
+        if (diffBlocks != null) {
+          allBlocks.addAll(Arrays.asList(diffBlocks));
+        }
+      }
