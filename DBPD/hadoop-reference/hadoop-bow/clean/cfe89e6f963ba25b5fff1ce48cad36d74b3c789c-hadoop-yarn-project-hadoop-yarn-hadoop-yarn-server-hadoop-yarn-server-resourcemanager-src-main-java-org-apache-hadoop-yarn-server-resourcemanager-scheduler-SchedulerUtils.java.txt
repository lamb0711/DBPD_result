YARN-9164. Shutdown NM may cause NPE when opportunistic container scheduling is enabled. Contributed by lujie.

+    SchedulerNode node = ((AbstractYarnScheduler) rmContext.getScheduler())
+        .getNode(container.getNodeId());
+    if (node == null) {
+      return null;
+    }
-    ((AbstractYarnScheduler) rmContext.getScheduler()).getNode(
-        container.getNodeId()).allocateContainer(rmContainer);
+    node.allocateContainer(rmContainer);
