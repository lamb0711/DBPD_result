YARN-708. Moved RecordFactory classes to hadoop-yarn-api, and put some miscellaneous fixes to the interfaces. Contributed by Siddharth Seth.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1485478 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.factories.impl.pb.RecordFactoryPBImpl;
-    String recordFactoryClassName = conf.get(YarnConfiguration.IPC_RECORD_FACTORY);
-    if (recordFactoryClassName == null) {
-      String serializer = conf.get(YarnConfiguration.IPC_SERIALIZER_TYPE, YarnConfiguration.DEFAULT_IPC_SERIALIZER_TYPE);
-      if (serializer.equals(YarnConfiguration.DEFAULT_IPC_SERIALIZER_TYPE)) {
-        return RecordFactoryPBImpl.get();
-      } else {
-        throw new YarnException("Unknown serializer: [" + conf.get(YarnConfiguration.IPC_SERIALIZER_TYPE) + "]. Use keys: [" + YarnConfiguration.IPC_RECORD_FACTORY + "] to specify Record factory");
-      }
-    } else {
-      return (RecordFactory) getFactoryClassInstance(recordFactoryClassName);
-    }
+    String recordFactoryClassName = conf.get(
+        YarnConfiguration.IPC_RECORD_FACTORY_CLASS,
+        YarnConfiguration.DEFAULT_IPC_RECORD_FACTORY_CLASS);
+    return (RecordFactory) getFactoryClassInstance(recordFactoryClassName);
