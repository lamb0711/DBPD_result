HDFS-13348. Ozone: Update IP and hostname in Datanode from SCM's response to the register call. Contributed by Shashikant Banerjee.

+    String hostname = null;
+    String ip = null;
-      String hostname = dnAddress.getHostName();
-      String ip = dnAddress.getHostAddress();
+      hostname = dnAddress.getHostName();
+      ip = dnAddress.getHostAddress();
-    return RegisteredCommand.newBuilder()
-        .setErrorCode(ErrorCode.success)
-        .setDatanodeUUID(datanodeDetails.getUuidString())
-        .setClusterID(this.clusterID)
-        .build();
+    RegisteredCommand.Builder builder =
+        RegisteredCommand.newBuilder().setErrorCode(ErrorCode.success)
+            .setDatanodeUUID(datanodeDetails.getUuidString())
+            .setClusterID(this.clusterID);
+    if (hostname != null && ip != null) {
+      builder.setHostname(hostname).setIpAddress(ip);
+    }
+    return builder.build();
