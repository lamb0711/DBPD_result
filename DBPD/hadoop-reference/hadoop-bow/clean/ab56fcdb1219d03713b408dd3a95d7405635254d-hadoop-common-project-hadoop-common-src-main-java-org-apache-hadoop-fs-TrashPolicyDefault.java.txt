Merge remote-tracking branch 'apache/trunk' into HDFS-7285

+    createCheckpoint(new Date());
+  }
+
+  @SuppressWarnings("deprecation")
+  public void createCheckpoint(Date date) throws IOException {
+
-      checkpointBase = new Path(trash, CHECKPOINT.format(new Date()));
+      checkpointBase = new Path(trash, CHECKPOINT.format(date));
+
-                trash.createCheckpoint();
+                trash.createCheckpoint(new Date(now));
