HADOOP-10075. addendum to fix compilation on Windows

+import java.io.IOException;
+import java.util.regex.Matcher;
-            .replaceFirst(inputDir.getCanonicalPath(), "") + ".gz");
-        outFile.getParentFile().mkdirs();
-        try (
-            GZIPOutputStream os = new GZIPOutputStream(
-                new FileOutputStream(outFile));
-            BufferedReader is = Files.newBufferedReader(path)
-        ) {
-          getLog().info("Compressing " + path + " to " + outFile);
-          IOUtils.copy(is, os);
-        } catch (Throwable t) {
-          this.throwable = t;
+            .replaceFirst(Matcher.quoteReplacement(
+                inputDir.getCanonicalPath()), "") + ".gz");
+        if (outFile.getParentFile().isDirectory() ||
+            outFile.getParentFile().mkdirs()) {
+          try (
+              GZIPOutputStream os = new GZIPOutputStream(
+                  new FileOutputStream(outFile));
+              BufferedReader is = Files.newBufferedReader(path)
+          ) {
+            getLog().info("Compressing " + path + " to " + outFile);
+            IOUtils.copy(is, os);
+          }
+        } else {
+          throw new IOException("Directory " + outFile.getParent()
+              + " does not exist or was unable to be created");
