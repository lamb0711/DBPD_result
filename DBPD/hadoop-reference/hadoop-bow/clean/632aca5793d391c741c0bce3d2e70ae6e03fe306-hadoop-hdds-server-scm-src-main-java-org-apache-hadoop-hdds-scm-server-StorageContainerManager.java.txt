HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event
and corresponding event handlers in SCM.
Contributed by Nanda Kumar.

Recommitting after making sure that patch is clean.

+import org.apache.hadoop.hdds.scm.container.CloseContainerEventHandler;
+import org.apache.hadoop.hdds.scm.container.ContainerReportHandler;
+import org.apache.hadoop.hdds.scm.events.SCMEvents;
+import org.apache.hadoop.hdds.scm.node.DeadNodeHandler;
+import org.apache.hadoop.hdds.scm.node.NewNodeHandler;
+import org.apache.hadoop.hdds.scm.node.NodeReportHandler;
+import org.apache.hadoop.hdds.scm.node.StaleNodeHandler;
+import org.apache.hadoop.hdds.scm.node.states.Node2ContainerMap;
-import static org.apache.hadoop.hdds.scm.events.SCMEvents.DATANODE_COMMAND;
+
+  private final EventQueue eventQueue;
-    EventQueue eventQueue = new EventQueue();
-    SCMNodeManager nm =
-        new SCMNodeManager(conf, scmStorage.getClusterID(), this);
-    scmNodeManager = nm;
-    eventQueue.addHandler(DATANODE_COMMAND, nm);
+    eventQueue = new EventQueue();
-    scmContainerManager = new ContainerMapping(conf, getScmNodeManager(),
-        cacheSize);
+    scmNodeManager = new SCMNodeManager(
+        conf, scmStorage.getClusterID(), this, eventQueue);
+    scmContainerManager = new ContainerMapping(
+        conf, getScmNodeManager(), cacheSize);
+    scmBlockManager = new BlockManagerImpl(
+        conf, getScmNodeManager(), scmContainerManager);
-    scmBlockManager =
-        new BlockManagerImpl(conf, getScmNodeManager(), scmContainerManager);
+    Node2ContainerMap node2ContainerMap = new Node2ContainerMap();
+
+    CloseContainerEventHandler closeContainerHandler =
+        new CloseContainerEventHandler(scmContainerManager);
+    NodeReportHandler nodeReportHandler =
+        new NodeReportHandler(scmNodeManager);
+    ContainerReportHandler containerReportHandler =
+        new ContainerReportHandler(scmContainerManager, node2ContainerMap);
+    NewNodeHandler newNodeHandler = new NewNodeHandler(node2ContainerMap);
+    StaleNodeHandler staleNodeHandler = new StaleNodeHandler(node2ContainerMap);
+    DeadNodeHandler deadNodeHandler = new DeadNodeHandler(node2ContainerMap);
+
+    eventQueue.addHandler(SCMEvents.DATANODE_COMMAND, scmNodeManager);
+    eventQueue.addHandler(SCMEvents.NODE_REPORT, nodeReportHandler);
+    eventQueue.addHandler(SCMEvents.CONTAINER_REPORT, containerReportHandler);
+    eventQueue.addHandler(SCMEvents.CLOSE_CONTAINER, closeContainerHandler);
+    eventQueue.addHandler(SCMEvents.NEW_NODE, newNodeHandler);
+    eventQueue.addHandler(SCMEvents.STALE_NODE, staleNodeHandler);
+    eventQueue.addHandler(SCMEvents.DEAD_NODE, deadNodeHandler);
-
