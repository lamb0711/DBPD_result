HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.GetECSchemasRequestProto;
-import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.GetECSchemasResponseProto;
+import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.GetErasureCodingPoliciesRequestProto;
+import org.apache.hadoop.hdfs.protocol.proto.ErasureCodingProtos.GetErasureCodingPoliciesResponseProto;
-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-      ECSchema schema = req.hasSchema() ? PBHelper.convertECSchema(req
-          .getSchema()) : null;
-      int cellSize = req.hasCellSize() ? req.getCellSize() : 0;
-      server.createErasureCodingZone(req.getSrc(), schema, cellSize);
+      ErasureCodingPolicy ecPolicy = req.hasEcPolicy() ? PBHelper.convertErasureCodingPolicy(req
+          .getEcPolicy()) : null;
+      server.createErasureCodingZone(req.getSrc(), ecPolicy);
-  public GetECSchemasResponseProto getECSchemas(RpcController controller,
-      GetECSchemasRequestProto request) throws ServiceException {
+  public GetErasureCodingPoliciesResponseProto getErasureCodingPolicies(RpcController controller,
+      GetErasureCodingPoliciesRequestProto request) throws ServiceException {
-      ECSchema[] ecSchemas = server.getECSchemas();
-      GetECSchemasResponseProto.Builder resBuilder = GetECSchemasResponseProto
+      ErasureCodingPolicy[] ecPolicies = server.getErasureCodingPolicies();
+      GetErasureCodingPoliciesResponseProto.Builder resBuilder = GetErasureCodingPoliciesResponseProto
-      for (ECSchema ecSchema : ecSchemas) {
-        resBuilder.addSchemas(PBHelper.convertECSchema(ecSchema));
+      for (ErasureCodingPolicy ecPolicy : ecPolicies) {
+        resBuilder.addEcPolicies(PBHelper.convertErasureCodingPolicy(ecPolicy));
