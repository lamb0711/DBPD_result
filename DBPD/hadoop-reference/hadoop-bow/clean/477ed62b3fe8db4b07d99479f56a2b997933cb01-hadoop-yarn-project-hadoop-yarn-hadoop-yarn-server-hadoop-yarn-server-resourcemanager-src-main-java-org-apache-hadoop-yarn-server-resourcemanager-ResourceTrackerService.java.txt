YARN-1821. NPE on registerNodeManager if the request has containers for UnmanagedAMs (kasha)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1576525 13f79535-47bb-0310-9956-ffa450edef68

-          if (rmAppAttempt.getMasterContainer().getId()
-              .equals(containerStatus.getContainerId())
-              && containerStatus.getState() == ContainerState.COMPLETE) {
-            // sending master container finished event.
-            RMAppAttemptContainerFinishedEvent evt =
-                new RMAppAttemptContainerFinishedEvent(appAttemptId,
-                    containerStatus);
-            rmContext.getDispatcher().getEventHandler().handle(evt);
+          if (rmAppAttempt != null) {
+            if (rmAppAttempt.getMasterContainer().getId()
+                .equals(containerStatus.getContainerId())
+                && containerStatus.getState() == ContainerState.COMPLETE) {
+              // sending master container finished event.
+              RMAppAttemptContainerFinishedEvent evt =
+                  new RMAppAttemptContainerFinishedEvent(appAttemptId,
+                      containerStatus);
+              rmContext.getDispatcher().getEventHandler().handle(evt);
+            }
