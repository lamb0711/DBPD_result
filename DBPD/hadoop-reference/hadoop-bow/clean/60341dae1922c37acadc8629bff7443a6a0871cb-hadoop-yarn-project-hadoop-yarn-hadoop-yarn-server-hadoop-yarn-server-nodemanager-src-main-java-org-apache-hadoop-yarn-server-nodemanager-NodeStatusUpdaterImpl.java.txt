Merge r1476010 through r1476452 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1476453 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.server.api.ResourceManagerConstants;
+import org.apache.hadoop.yarn.server.nodemanager.containermanager.ContainerManagerImpl;
+  private long rmIdentifier = ResourceManagerConstants.RM_INVALID_IDENTIFIER;
+        this.rmIdentifier = regNMResponse.getRMIdentifier();
-
+    LOG.info("Notifying ContainerManager to unblock new container-requests");
+    ((ContainerManagerImpl) this.context.getContainerManager())
+      .setBlockNewContainerRequests(false);
+  @Override
+  @Override
+  public long getRMIdentifier() {
+    return this.rmIdentifier;
+  }
+
+              // Invalidate the RMIdentifier while resync
+              NodeStatusUpdaterImpl.this.rmIdentifier =
+                  ResourceManagerConstants.RM_INVALID_IDENTIFIER;
