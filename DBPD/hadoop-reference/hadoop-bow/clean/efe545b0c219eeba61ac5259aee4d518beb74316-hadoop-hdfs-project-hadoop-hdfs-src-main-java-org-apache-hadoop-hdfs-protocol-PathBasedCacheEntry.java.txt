HDFS-5358. Add replication field to PathBasedCacheDirective. (Contributed by Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1532124 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.commons.lang.builder.HashCodeBuilder;
+  private final short replication;
-  public PathBasedCacheEntry(long entryId, String path, CachePool pool) {
+  public PathBasedCacheEntry(long entryId, String path,
+      short replication, CachePool pool) {
-    Preconditions.checkNotNull(path);
+    Preconditions.checkArgument(replication > 0);
+    this.replication = replication;
+    Preconditions.checkNotNull(path);
+  public short getReplication() {
+    return replication;
+  }
+
+      append(", replication:").append(replication).
-    return new PathBasedCacheDescriptor(entryId, new Path(path),
+    return new PathBasedCacheDescriptor(entryId, new Path(path), replication,
+  
+  @Override
+  public boolean equals(Object o) {
+    if (o.getClass() != this.getClass()) {
+      return false;
+    }
+    PathBasedCacheEntry other = (PathBasedCacheEntry)o;
+    return entryId == other.entryId;
+  }
+
+  @Override
+  public int hashCode() {
+    return new HashCodeBuilder().append(entryId).toHashCode();
+  }
