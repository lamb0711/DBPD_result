Merge trunk into auto-HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3042@1337645 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.server.namenode.INodeFile;
- * block's metadata currently includes INode it belongs to and
+ * block's metadata currently includes blockCollection it belongs to and
-  INodeFile getINode(Block b) {
+  BlockCollection getBlockCollection(Block b) {
-    return (info != null) ? info.getINode() : null;
+    return (info != null) ? info.getBlockCollection() : null;
-   * Add block b belonging to the specified file inode to the map.
+   * Add block b belonging to the specified block collection to the map.
-  BlockInfo addINode(BlockInfo b, INodeFile iNode) {
+  BlockInfo addBlockCollection(BlockInfo b, BlockCollection bc) {
-    info.setINode(iNode);
+    info.setBlockCollection(bc);
-    blockInfo.setINode(null);
+    blockInfo.setBlockCollection(null);
-              && info.getINode() == null) {  // does not belong to a file
+              && info.getBlockCollection() == null) {  // does not belong to a file
