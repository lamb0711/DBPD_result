YARN-4545. Allow YARN distributed shell to use ATS v1.5 APIs. Li Lu via junping_du

-import org.apache.hadoop.service.ServiceStateException;
+import org.apache.hadoop.yarn.util.timeline.TimelineUtils;
-      conf.setClass(YarnConfiguration.TIMELINE_SERVICE_STORE,
-          MemoryTimelineStore.class, TimelineStore.class);
+      // Only set memory timeline store if timeline v1.5 is not enabled.
+      // Otherwise, caller has the freedom to choose storage impl.
+      if (!TimelineUtils.timelineServiceV1_5Enabled(conf)) {
+        conf.setClass(YarnConfiguration.TIMELINE_SERVICE_STORE,
+            MemoryTimelineStore.class, TimelineStore.class);
+      }
