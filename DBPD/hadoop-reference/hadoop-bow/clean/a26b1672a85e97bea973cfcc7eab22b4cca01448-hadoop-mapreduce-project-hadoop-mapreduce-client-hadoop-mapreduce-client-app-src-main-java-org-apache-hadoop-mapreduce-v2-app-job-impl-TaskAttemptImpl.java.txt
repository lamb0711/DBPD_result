MAPREDUCE-3032. Fixed TaskAttemptImpl so that JobHistory can have error information about failed tasks. Contributed by Devaraj K.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1185247 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.util.StringUtils;
+
+  
+  private static final String LINE_SEPARATOR = System
+      .getProperty("line.separator");
-      result.setDiagnosticInfo(reportedStatus.diagnosticInfo);
+      result.setDiagnosticInfo(StringUtils.join(LINE_SEPARATOR, getDiagnostics()));
-        taskAttempt.reportedStatus.diagnosticInfo.toString(),
+        StringUtils.join(LINE_SEPARATOR, taskAttempt.getDiagnostics()),
-      //add to diagnostic
-      taskAttempt.addDiagnosticInfo(newReportedStatus.diagnosticInfo);
-    result.diagnosticInfo = "";
