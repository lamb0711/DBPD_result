HDFS-8854. Erasure coding: add ECPolicy to replace schema+cellSize in hadoop-hdfs. Contributed by Walter Su.

-import org.apache.hadoop.io.erasurecode.ECSchema;
+import org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy;
-  private final ECSchema schema;
-  private final int cellSize;
+  private final ErasureCodingPolicy ecPolicy;
-  public BlockInfoStriped(Block blk, ECSchema schema, int cellSize) {
-    super(blk, (short) (schema.getNumDataUnits() + schema.getNumParityUnits()));
-    indices = new byte[schema.getNumDataUnits() + schema.getNumParityUnits()];
+  public BlockInfoStriped(Block blk, ErasureCodingPolicy ecPolicy) {
+    super(blk, (short) (ecPolicy.getNumDataUnits() + ecPolicy.getNumParityUnits()));
+    indices = new byte[ecPolicy.getNumDataUnits() + ecPolicy.getNumParityUnits()];
-    this.schema = schema;
-    this.cellSize = cellSize;
+    this.ecPolicy = ecPolicy;
-    this(b, b.getSchema(), b.getCellSize());
+    this(b, b.getErasureCodingPolicy());
-    return (short) (this.schema.getNumDataUnits()
-        + this.schema.getNumParityUnits());
+    return (short) (ecPolicy.getNumDataUnits() + ecPolicy.getNumParityUnits());
-    return (short) this.schema.getNumDataUnits();
+    return (short) ecPolicy.getNumDataUnits();
-    return (short) this.schema.getNumParityUnits();
+    return (short) ecPolicy.getNumParityUnits();
-   * Otherwise it returns the number of data units specified by schema.
+   * Otherwise it returns the number of data units specified by erasure coding policy.
-  public ECSchema getSchema() {
-    return schema;
-  }
-
-  public int getCellSize() {
-    return cellSize;
+  public ErasureCodingPolicy getErasureCodingPolicy() {
+    return ecPolicy;
-        this.schema.getNumDataUnits(), this.schema.getNumParityUnits(),
+        ecPolicy.getNumDataUnits(), ecPolicy.getNumParityUnits(),
-      ucBlock = new BlockInfoUnderConstructionStriped(this, schema, cellSize,
+      ucBlock = new BlockInfoUnderConstructionStriped(this, ecPolicy,
