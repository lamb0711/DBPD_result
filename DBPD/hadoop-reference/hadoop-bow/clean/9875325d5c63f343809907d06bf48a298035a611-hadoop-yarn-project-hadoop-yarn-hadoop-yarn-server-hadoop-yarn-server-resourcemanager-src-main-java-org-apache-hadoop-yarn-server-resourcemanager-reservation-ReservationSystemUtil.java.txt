YARN-4340. Add list API to reservation system. (Sean Po via wangda)

+import org.apache.hadoop.yarn.api.records.ReservationAllocationState;
+import org.apache.hadoop.yarn.api.records.ResourceAllocationRequest;
+import org.apache.hadoop.yarn.proto.YarnProtos.ReservationAllocationStateProto;
+import org.apache.hadoop.yarn.proto.YarnProtos.ResourceAllocationRequestProto;
-import org.apache.hadoop.yarn.proto.YarnServerResourceManagerRecoveryProtos.ReservationAllocationStateProto;
-import org.apache.hadoop.yarn.proto.YarnServerResourceManagerRecoveryProtos.ResourceAllocationRequestProto;
+
+import java.util.ArrayList;
+import java.util.Set;
-    builder.setAcceptanceTimestamp(allocation.getAcceptanceTime());
+    builder.setAcceptanceTime(allocation.getAcceptanceTime());
-      String planName, ReservationId reservationId,
-      ReservationAllocationStateProto allocationState, Resource minAlloc,
-      ResourceCalculator planResourceCalculator) {
+          String planName, ReservationId reservationId,
+          ReservationAllocationStateProto allocationState, Resource minAlloc,
+          ResourceCalculator planResourceCalculator) {
+
+  public static List<ReservationAllocationState>
+        convertAllocationsToReservationInfo(Set<ReservationAllocation> res,
+                        boolean includeResourceAllocations) {
+    List<ReservationAllocationState> reservationInfo = new ArrayList<>();
+
+    Map<ReservationInterval, Resource> requests;
+    for (ReservationAllocation allocation : res) {
+      List<ResourceAllocationRequest> allocations = new ArrayList<>();
+      if (includeResourceAllocations) {
+        requests = allocation.getAllocationRequests();
+
+        for (Map.Entry<ReservationInterval, Resource> request :
+                requests.entrySet()) {
+          ReservationInterval interval = request.getKey();
+          allocations.add(ResourceAllocationRequest.newInstance(
+                  interval.getStartTime(), interval.getEndTime(),
+                  request.getValue()));
+        }
+      }
+
+      reservationInfo.add(ReservationAllocationState.newInstance(
+              allocation.getAcceptanceTime(), allocation.getUser(),
+              allocations, allocation.getReservationId(),
+              allocation.getReservationDefinition()));
+    }
+    return reservationInfo;
+  }
