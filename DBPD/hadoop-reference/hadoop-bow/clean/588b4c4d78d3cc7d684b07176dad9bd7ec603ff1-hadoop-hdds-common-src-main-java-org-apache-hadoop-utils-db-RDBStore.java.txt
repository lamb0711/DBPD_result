HDDS-1085. Create an OM API to serve snapshots to Recon server.
Contributed by Aravindan Vijayan.

+import static org.apache.hadoop.ozone.OzoneConsts.OM_DB_CHECKPOINTS_DIR_NAME;
+
+import java.nio.file.Paths;
+import org.rocksdb.FlushOptions;
+  private RDBCheckpointManager checkPointManager;
+  private final String checkpointsParentDir;
+      //create checkpoints directory if not exists.
+      checkpointsParentDir = Paths.get(dbLocation.getParent(),
+          OM_DB_CHECKPOINTS_DIR_NAME).toString();
+      File checkpointsDir = new File(checkpointsParentDir);
+      if (!checkpointsDir.exists()) {
+        checkpointsDir.mkdir();
+      }
+
+      //Initialize checkpoint manager
+      checkPointManager = new RDBCheckpointManager(db, "om");
+
+
+  @Override
+  public DBCheckpointSnapshot getCheckpointSnapshot(boolean flush)
+      throws IOException {
+    if (flush) {
+      final FlushOptions flushOptions =
+          new FlushOptions().setWaitForFlush(true);
+      try {
+        db.flush(flushOptions);
+      } catch (RocksDBException e) {
+        LOG.error("Unable to Flush RocksDB data before creating snapshot", e);
+      }
+    }
+    return checkPointManager.createCheckpointSnapshot(checkpointsParentDir);
+  }
+
