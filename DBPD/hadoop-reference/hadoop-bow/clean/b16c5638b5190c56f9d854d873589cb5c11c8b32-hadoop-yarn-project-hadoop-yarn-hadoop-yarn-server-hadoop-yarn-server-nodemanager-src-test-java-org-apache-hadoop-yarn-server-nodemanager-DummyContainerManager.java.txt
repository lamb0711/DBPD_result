YARN-719. Move RMIdentifier from Container to ContainerTokenIdentifier. Contributed by Vinod Kumar Vavilapalli.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1487741 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import org.apache.hadoop.yarn.util.BuilderUtils;
-    return new ContainerTokenIdentifier(container.getId(),
-      container.getNodeHttpAddress(), remoteUgi.getUserName(),
-      container.getResource(), System.currentTimeMillis(), 123);
+    try {
+      return new ContainerTokenIdentifier(container.getId(),
+        container.getNodeHttpAddress(), remoteUgi.getUserName(),
+        container.getResource(), System.currentTimeMillis() + 100000l, 123,
+        BuilderUtils.newContainerTokenIdentifier(
+          container.getContainerToken()).getRMIdentifer());
+    } catch (IOException e) {
+      throw new YarnRemoteException(e);
+    }
