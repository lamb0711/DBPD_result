YARN-1493. Changed ResourceManager and Scheduler interfacing to recognize app-attempts separately from apps. Contributed by Jian He.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1554896 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.api.records.ApplicationId;
-import org.apache.hadoop.yarn.server.resourcemanager.scheduler.SchedulerApplication;
-  public void submitApplication(FiCaSchedulerApp application, String user,
+  public void submitApplication(ApplicationId applicationId, String user,
-            application.getApplicationId());
+            applicationId);
-      addApplication(application, user);
+      addApplication(applicationId, user);
-        parent.submitApplication(application, user, queue);
+        parent.submitApplication(applicationId, user, queue);
-        removeApplication(application, user);
+        removeApplication(applicationId, user);
-  private synchronized void addApplication(FiCaSchedulerApp application, 
+
+  @Override
+  public void submitApplicationAttempt(FiCaSchedulerApp application,
+      String userName) {
+    // submit attempt logic.
+  }
+
+  @Override
+  public void finishApplicationAttempt(FiCaSchedulerApp application,
+      String queue) {
+    // finish attempt logic.
+  }
+
+  private synchronized void addApplication(ApplicationId applicationId,
-  
+
-        " appId: " + application.getApplicationId() + 
+        " appId: " + applicationId + 
-  public void finishApplication(FiCaSchedulerApp application, String queue) {
+  public void finishApplication(ApplicationId application, String user) {
-      removeApplication(application, application.getUser());
+      removeApplication(application, user);
-      parent.finishApplication(application, queue);
+      parent.finishApplication(application, user);
-  public synchronized void removeApplication(FiCaSchedulerApp application, 
+  public synchronized void removeApplication(ApplicationId applicationId, 
-        " appId: " + application.getApplicationId() + 
+        " appId: " + applicationId + 
