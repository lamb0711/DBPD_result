YARN-6533. Race condition in writing service record to registry in yarn native services. Contributed by Billie Rinaldi

-    providerUtils.updateServiceRecord(amState, yarnRegistry,
-        containerId.toString(), instance.role, status.getIPs(), status.getHost());
+    try {
+      providerUtils.updateServiceRecord(amState, yarnRegistry,
+          containerId.toString(), instance.role, status.getIPs(), status.getHost());
+    } catch (IOException e) {
+      // could not write service record to ZK, log and retry
+      log.warn("Error updating container {} service record in registry, " +
+          "retrying", containerId, e);
+      return true;
+    }
