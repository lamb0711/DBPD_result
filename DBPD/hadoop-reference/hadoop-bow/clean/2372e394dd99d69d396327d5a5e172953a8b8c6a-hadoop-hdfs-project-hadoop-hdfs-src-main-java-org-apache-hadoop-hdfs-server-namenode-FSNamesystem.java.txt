HDFS-4189. Renames the getMutableXxx methods to getXxx4Write and fix a bug that some getExistingPathINodes calls should be getINodesInPath4Write.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441193 13f79535-47bb-0310-9956-ffa450edef68

-        final INodesInPath iip = dir.getINodesInPath(src);
+        final INodesInPath iip = dir.getLastINodeInPath(src);
-    final INodeFile trgInode = INodeFile.valueOf(dir.getMutableINode(target),
+    final INodeFile trgInode = INodeFile.valueOf(dir.getINode4Write(target),
-      final INodeFile srcInode = INodeFile.valueOf(dir.getMutableINode(src), src);
+      final INodeFile srcInode = INodeFile.valueOf(dir.getINode4Write(src), src);
-      final INodesInPath iip = dir.getMutableINodesInPath(src);
+      final INodesInPath iip = dir.getINodesInPath4Write(src);
-    boolean pathExists = dir.existsMutable(src);
-    if (pathExists && dir.isDir(src)) {
+    final INodesInPath iip = dir.getINodesInPath4Write(src);
+    final INode myFile = iip.getLastINode();
+    if (myFile != null && myFile.isDirectory()) {
-      if (append || (overwrite && pathExists)) {
+      if (append || (overwrite && myFile != null)) {
-      final INodesInPath iip = dir.getINodesInPath(src);
-      final INode myFile = iip.getINode(0);
-      final INodesInPath iip = dir.rootDir.getExistingPathINodes(src, true);
+      final INodesInPath iip = dir.getINodesInPath4Write(src);
-    final INodesInPath iip = dir.getINodesInPath(src);
+    final INodesInPath iip = dir.getLastINodeInPath(src);
-    final INodesInPath iip = dir.getINodesInPath(src);
+    final INodesInPath iip = dir.getLastINodeInPath(src);
