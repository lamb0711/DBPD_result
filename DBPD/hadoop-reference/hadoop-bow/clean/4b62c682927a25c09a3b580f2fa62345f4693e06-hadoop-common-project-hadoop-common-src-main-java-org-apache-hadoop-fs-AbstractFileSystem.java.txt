HADOOP-8310. FileContext#checkPath should handle URIs with no port. Contributed by Aaron T. Myers.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1331007 13f79535-47bb-0310-9956-ffa450edef68

-    String thisAuthority = this.getUri().getAuthority();
+    String thisHost = this.getUri().getHost();
+    String thatHost = uri.getHost();
-    // Schemes and authorities must match.
+    // Schemes and hosts must match.
-       (thisAuthority != null && 
-            !thisAuthority.equalsIgnoreCase(thatAuthority)) ||
-       (thisAuthority == null && thatAuthority != null)) {
+       (thisHost != null && 
+            !thisHost.equalsIgnoreCase(thatHost)) ||
+       (thisHost == null && thatHost != null)) {
+    // Ports must match, unless this FS instance is using the default port, in
+    // which case the port may be omitted from the given URI
-    int thatPort = path.toUri().getPort();
+    int thatPort = uri.getPort();
