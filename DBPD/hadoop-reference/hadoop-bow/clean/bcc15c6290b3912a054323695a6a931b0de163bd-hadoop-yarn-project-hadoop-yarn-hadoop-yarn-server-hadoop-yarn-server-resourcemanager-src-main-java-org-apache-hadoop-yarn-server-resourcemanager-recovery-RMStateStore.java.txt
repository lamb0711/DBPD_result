YARN-5611. Provide an API to update lifetime of an application. Contributed by Rohith Sharma K S

+import com.google.common.util.concurrent.SettableFuture;
+
-import org.apache.hadoop.ipc.CallerContext;
+import org.apache.hadoop.yarn.exceptions.YarnException;
+      SettableFuture<Object> result =
+          ((RMStateUpdateAppEvent) event).getResult();
+
+        if (result != null) {
+          result.set(null);
+        }
+
-        LOG.error("Error updating app: " + appId, e);
+        String msg = "Error updating app: " + appId;
+        LOG.error(msg, e);
+        if (result != null) {
+          result.setException(new YarnException(msg, e));
+        }
+    appState.setApplicationTimeouts(app.getApplicationTimeouts());
-  public void updateApplicationState(
-      ApplicationStateData appState) {
+  public void updateApplicationState(ApplicationStateData appState) {
-  public void updateApplicationStateSynchronously(
-      ApplicationStateData appState, boolean notifyApp) {
-    handleStoreEvent(new RMStateUpdateAppEvent(appState, notifyApp));
+  public void updateApplicationStateSynchronously(ApplicationStateData appState,
+      boolean notifyApp, SettableFuture<Object> resultFuture) {
+    handleStoreEvent(
+        new RMStateUpdateAppEvent(appState, notifyApp, resultFuture));
