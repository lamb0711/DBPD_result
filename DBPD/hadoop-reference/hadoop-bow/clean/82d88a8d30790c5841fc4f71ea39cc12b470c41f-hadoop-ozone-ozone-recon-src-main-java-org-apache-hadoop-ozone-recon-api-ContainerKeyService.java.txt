HDDS-1705. Recon: Add estimatedTotalCount to the response of containers and containers/{id} endpoints. Contributed by Vivek Ratnavel Subramanian.



+import org.apache.hadoop.ozone.recon.api.types.ContainersResponse;
+import org.apache.hadoop.ozone.recon.api.types.KeysResponse;
+import static org.apache.hadoop.ozone.recon.ReconConstants.PREV_CONTAINER_ID_DEFAULT_VALUE;
-      @DefaultValue("0") @QueryParam(RECON_QUERY_PREVKEY) long prevKey) {
+      @DefaultValue(PREV_CONTAINER_ID_DEFAULT_VALUE)
+      @QueryParam(RECON_QUERY_PREVKEY) long prevKey) {
+    long containersCount;
+      containersCount = containerDBServiceProvider.getCountForContainers();
-    return Response.ok(containersMap.values()).build();
+    ContainersResponse containersResponse =
+        new ContainersResponse(containersCount, containersMap.values());
+    return Response.ok(containersResponse).build();
-  @Path("/{id}")
+  @Path("/{id}/keys")
+    long totalCount;
+
+      totalCount =
+          containerDBServiceProvider.getKeyCountForContainer(containerID);
-    return Response.ok(keyMetadataMap.values()).build();
+    KeysResponse keysResponse =
+        new KeysResponse(totalCount, keyMetadataMap.values());
+    return Response.ok(keysResponse).build();
