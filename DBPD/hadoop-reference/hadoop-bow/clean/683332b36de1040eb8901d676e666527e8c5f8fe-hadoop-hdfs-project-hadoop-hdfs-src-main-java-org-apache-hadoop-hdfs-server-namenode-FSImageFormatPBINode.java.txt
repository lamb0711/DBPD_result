HDFS-8585. Erasure Coding: Remove dataBlockNum and parityBlockNum from StripedBlockProto. Contributed by Yi Liu.

-import java.util.Map;
-import org.apache.hadoop.hdfs.protocol.proto.HdfsProtos.StripedBlockProto;
-      BlockInfoContiguous[] blocks = new BlockInfoContiguous[bp.size()];
-      for (int i = 0, e = bp.size(); i < e; ++i) {
-        blocks[i] = new BlockInfoContiguous(PBHelper.convert(bp.get(i)), replication);
+      BlockInfoContiguous[] blocks = null;
+      if (!f.hasStripedBlocks()) {
+        blocks = new BlockInfoContiguous[bp.size()];
+        for (int i = 0, e = bp.size(); i < e; ++i) {
+          blocks[i] = new BlockInfoContiguous(PBHelper.convert(bp.get(i)), replication);
+        }
+
-        StripedBlocksFeature sb = f.getStripedBlocks();
-        for (StripedBlockProto sp : sb.getBlocksList()) {
-          stripeFeature.addBlock(PBHelper.convert(sp, schema));
+        for (BlockProto b : bp) {
+          stripeFeature.addBlock(new BlockInfoStriped(PBHelper.convert(b), schema));
-        StripedBlocksFeature.Builder builder =
-            StripedBlocksFeature.newBuilder();
-            builder.addBlocks(PBHelper.convert(sblk));
+            b.addBlocks(PBHelper.convert(sblk));
+        StripedBlocksFeature.Builder builder =
+            StripedBlocksFeature.newBuilder();
