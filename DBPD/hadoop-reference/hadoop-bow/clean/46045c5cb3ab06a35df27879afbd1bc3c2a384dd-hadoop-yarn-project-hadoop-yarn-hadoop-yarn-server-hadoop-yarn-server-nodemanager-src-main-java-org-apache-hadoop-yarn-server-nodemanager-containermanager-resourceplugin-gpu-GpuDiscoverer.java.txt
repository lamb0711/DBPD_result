YARN-9138. Improve test coverage for nvidia-smi binary execution of GpuDiscoverer. Contributed by Szilard Nemeth.

+
+  private String getErrorMessageOfScriptExecution(String msg) {
+    return getFailedToExecuteScriptMessage() +
+        "! Exception message: " + msg;
+  }
+
+  private String getErrorMessageOfScriptExecutionThresholdReached() {
+    return getFailedToExecuteScriptMessage() + " for " +
+        MAX_REPEATED_ERROR_ALLOWED + " times, " +
+        "skipping following executions!";
+  }
+
+  private String getFailedToExecuteScriptMessage() {
+    return "Failed to execute " +
+        GpuDeviceInformationParser.GPU_SCRIPT_REFERENCE +
+        " (" + pathOfGpuBinary + ")";
+  }
+
+  private String getFailedToParseErrorMessage(String msg) {
+    return "Failed to parse XML output of " +
+        GpuDeviceInformationParser.GPU_SCRIPT_REFERENCE
+        + "( " + pathOfGpuBinary + ")" + msg;
+  }
+
-      String msg =
-          "Failed to execute GPU device information detection script for "
-              + MAX_REPEATED_ERROR_ALLOWED
-              + " times, skip following executions.";
+      String msg = getErrorMessageOfScriptExecutionThresholdReached();
-      String msg =
-          "Failed to execute " + pathOfGpuBinary + " exception message:" + e
-              .getMessage() + ", continue ...";
+      String msg = getErrorMessageOfScriptExecution(e.getMessage());
-      throw new YarnException(e);
+      throw new YarnException(msg, e);
-      String msg = "Failed to parse xml output" + e.getMessage();
+      String msg = getFailedToParseErrorMessage(e.getMessage());
