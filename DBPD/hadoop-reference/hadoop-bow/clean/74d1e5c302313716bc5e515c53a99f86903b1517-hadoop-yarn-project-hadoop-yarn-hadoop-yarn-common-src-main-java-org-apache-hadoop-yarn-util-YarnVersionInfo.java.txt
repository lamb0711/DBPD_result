Merge r1432789 through r1437840 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1437843 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.YarnVersionAnnotation;
+import org.apache.hadoop.util.VersionInfo;
-public class YarnVersionInfo {
+public class YarnVersionInfo extends VersionInfo {
-  private static Package myPackage;
-  private static YarnVersionAnnotation version;
-  
-  static {
-    myPackage = YarnVersionAnnotation.class.getPackage();
-    version = myPackage.getAnnotation(YarnVersionAnnotation.class);
-  }
+  private static YarnVersionInfo YARN_VERSION_INFO = new YarnVersionInfo();
-  /**
-   * Get the meta-data for the Yarn package.
-   * @return
-   */
-  static Package getPackage() {
-    return myPackage;
+  protected YarnVersionInfo() {
+    super("yarn");
-  
-    return version != null ? version.version() : "Unknown";
+    return YARN_VERSION_INFO._getVersion();
-    return version != null ? version.revision() : "Unknown";
+    return YARN_VERSION_INFO._getRevision();
-    return version != null ? version.branch() : "Unknown";
+    return YARN_VERSION_INFO._getBranch();
-    return version != null ? version.date() : "Unknown";
+    return YARN_VERSION_INFO._getDate();
-    return version != null ? version.user() : "Unknown";
+    return YARN_VERSION_INFO._getUser();
-    return version != null ? version.url() : "Unknown";
+    return YARN_VERSION_INFO._getUrl();
-    return version != null ? version.srcChecksum() : "Unknown";
+    return YARN_VERSION_INFO._getSrcChecksum();
-    return YarnVersionInfo.getVersion() + 
-    " from " + YarnVersionInfo.getRevision() +
-    " by " + YarnVersionInfo.getUser() + 
-    " source checksum " + YarnVersionInfo.getSrcChecksum();
+    return YARN_VERSION_INFO._getBuildVersion();
-    LOG.debug("version: "+ version);
+    LOG.debug("version: "+ getVersion());
