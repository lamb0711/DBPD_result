HDFS-5974. Fix compilation error, NameNodeLayoutVersion and DataNodeLayoutVersion after merge from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1569931 13f79535-47bb-0310-9956-ffa450edef68

- 
-  public static int getCurrentLayoutVersion(
-      Map<Integer, SortedSet<LayoutFeature>> map, LayoutFeature[] values) {
-    for (int i = values.length -1; i >= 0; i--) {
-      final FeatureInfo info = values[i].getInfo();
+  public static int getCurrentLayoutVersion(LayoutFeature[] features) {
+    return getLastNonReservedFeature(features).getInfo().getLayoutVersion();
+  }
+
+  static LayoutFeature getLastNonReservedFeature(LayoutFeature[] features) {
+    for (int i = features.length -1; i >= 0; i--) {
+      final FeatureInfo info = features[i].getInfo();
-        return info.getLayoutVersion();
+        return features[i];
