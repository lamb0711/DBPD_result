YARN-5018. Online aggregation logic should not run immediately after collectors got started (Li Lu via sjlee)

+  private volatile boolean readyToAggregate = false;
+
+  protected void setReadyToAggregate() {
+    readyToAggregate = true;
+  }
+
+  protected boolean isReadyToAggregate() {
+    return readyToAggregate;
+  }
+
-  private static class AggregationStatusTable {
+  protected static class AggregationStatusTable {
