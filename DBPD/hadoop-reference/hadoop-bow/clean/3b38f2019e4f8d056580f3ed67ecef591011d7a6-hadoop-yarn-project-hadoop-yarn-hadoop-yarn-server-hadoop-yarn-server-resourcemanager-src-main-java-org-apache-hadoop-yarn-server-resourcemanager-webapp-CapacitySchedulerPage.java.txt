YARN-9685: NPE when rendering the info table of leaf queue in non-accessible partitions. Contributed by Tao Yang.

-              appendPercent(resourceUsages.getUsed().toString(),
+              appendPercent(resourceUsages.getUsed(),
-              capacities.getConfiguredMinResource().toString())
+              capacities.getConfiguredMinResource() == null ?
+                  Resources.none().toString() :
+                  capacities.getConfiguredMinResource().toString())
-              appendPercent(capacities.getEffectiveMinResource().toString(),
+              appendPercent(capacities.getEffectiveMinResource(),
-              appendPercent(capacities.getEffectiveMaxResource().toString(),
+              appendPercent(capacities.getEffectiveMaxResource(),
+        float capPercent = absMaxCap == 0 ? 0 : absCap/absMaxCap;
+        float usedCapPercent = absMaxCap == 0 ? 0 : absUsedCap/absMaxCap;
-              span().$style(join(Q_GIVEN, ";font-size:1px;", width(absCap/absMaxCap))).
+              span().$style(join(Q_GIVEN, ";font-size:1px;", width(capPercent))).
-              span().$style(join(width(absUsedCap/absMaxCap),
+              span().$style(join(width(usedCapPercent),
-  static String appendPercent(String message, float f) {
-    return message + " (" + StringUtils.formatPercent(f, 1) + ")";
+  static String appendPercent(ResourceInfo resourceInfo, float f) {
+    if (resourceInfo == null) {
+      return "";
+    }
+    return resourceInfo.toString() + " ("
+        + StringUtils.formatPercent(f, 1) + ")";
