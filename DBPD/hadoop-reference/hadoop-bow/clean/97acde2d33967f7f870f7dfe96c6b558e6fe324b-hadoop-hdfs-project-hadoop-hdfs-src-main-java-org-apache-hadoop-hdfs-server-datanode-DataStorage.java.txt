HDFS-5542. Fix TODO and clean up the code in HDFS-2832. (Contributed by szetszwo)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1544664 13f79535-47bb-0310-9956-ffa450edef68

-      sd.setStorageUuid(DatanodeStorage.newStorageID());
+      sd.setStorageUuid(DatanodeStorage.generateUuid());
-    for(Iterator<StorageLocation> it = dataDirs.iterator(); it.hasNext();) {
-      File dnRoot = it.next().getFile();
+    for(StorageLocation dir : dataDirs) {
+      File dnRoot = dir.getFile();
-      sd.setStorageUuid(UUID.randomUUID().toString());
+      sd.setStorageUuid(DatanodeStorage.generateUuid());
-   * Always called just after reading the properties from the VERSION
-   * file.
+   * Always called just after reading the properties from the VERSION file.
