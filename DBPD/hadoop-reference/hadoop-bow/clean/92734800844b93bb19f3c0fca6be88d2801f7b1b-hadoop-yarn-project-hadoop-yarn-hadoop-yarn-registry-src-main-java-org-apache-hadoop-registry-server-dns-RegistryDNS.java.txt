YARN-7198. Add jsvc support for RegistryDNS. Contributed by Billie Rinaldi

+import java.util.Map;
+  private boolean channelsInitialized = false;
+
+  public void initializeChannels(Configuration conf) throws Exception {
+    if (channelsInitialized) {
+      return;
+    }
+    channelsInitialized = true;
+    int port = conf.getInt(KEY_DNS_PORT, DEFAULT_DNS_PORT);
+    InetAddress addr = InetAddress.getLocalHost();
+
+    String bindAddress = conf.get(KEY_DNS_BIND_ADDRESS);
+    if (bindAddress != null) {
+      addr = InetAddress.getByName(bindAddress);
+    }
+
+    LOG.info("Opening TCP and UDP channels on {} port {}", addr, port);
+    addNIOUDP(addr, port);
+    addNIOTCP(addr, port);
+  }
+
-      int port = initializeZones(conf);
+      initializeZones(conf);
-      InetAddress addr = InetAddress.getLocalHost();
-
-      String bindAddress = conf.get(KEY_DNS_BIND_ADDRESS);
-      if (bindAddress != null) {
-        addr = InetAddress.getByName(bindAddress);
-      }
-      addNIOUDP(addr, port);
-      addNIOTCP(addr, port);
-
+      initializeChannels(conf);
-  int initializeZones(Configuration conf) throws IOException {
-    int port = conf.getInt(KEY_DNS_PORT, DEFAULT_DNS_PORT);
+  void initializeZones(Configuration conf) throws IOException {
-    return port;
+    StringBuilder builder = new StringBuilder();
+    builder.append("DNS zones: ").append(System.lineSeparator());
+    for (Map.Entry<Name, Zone> entry : zones.entrySet()) {
+      builder.append(System.lineSeparator()).append(entry.getValue());
+    }
+    LOG.info(builder.toString());
-        LOG.warn("Yarn Resgistry record {} does not contain {} attribute ",
+        LOG.warn("Yarn Registry record {} does not contain {} attribute ",
