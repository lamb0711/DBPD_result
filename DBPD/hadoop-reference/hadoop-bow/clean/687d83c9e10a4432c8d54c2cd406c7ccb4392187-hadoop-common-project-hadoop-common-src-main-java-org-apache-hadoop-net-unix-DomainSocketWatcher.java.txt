HADOOP-10404.  Commit correct version of patch (cmccabe)

-      lock.lock();
+      assert(lock.isHeldByCurrentThread());
-      } finally {
-        lock.unlock();
-    lock.lock();
+    assert(lock.isHeldByCurrentThread());
-    } finally {
-      lock.unlock();
-        kick(); // allow the handler for notificationSockets[0] to read a byte
-        for (Entry entry : entries.values()) {
-          sendCallback("close", entries, fdSet, entry.getDomainSocket().fd);
+        lock.lock();
+        try {
+          kick(); // allow the handler for notificationSockets[0] to read a byte
+          for (Entry entry : entries.values()) {
+            sendCallback("close", entries, fdSet, entry.getDomainSocket().fd);
+          }
+          entries.clear();
+          fdSet.close();
+        } finally {
+          lock.unlock();
-        entries.clear();
-        fdSet.close();
