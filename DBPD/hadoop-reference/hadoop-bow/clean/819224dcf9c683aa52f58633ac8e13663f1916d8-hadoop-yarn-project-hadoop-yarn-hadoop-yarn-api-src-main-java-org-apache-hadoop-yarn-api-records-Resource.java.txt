YARN-5270. Solve miscellaneous issues caused by YARN-4844. Contributed by Wangda Tan

-import org.apache.hadoop.classification.InterfaceAudience.Private;
+import org.apache.commons.lang.NotImplementedException;
-import org.apache.hadoop.classification.InterfaceStability.Unstable;
+
-  public static Resource newInstance(long memory, long vCores) {
+  public static Resource newInstance(int memory, int vCores) {
-    resource.setMemory(memory);
+    resource.setMemorySize(memory);
+    resource.setVirtualCores(vCores);
+    return resource;
+  }
+
+  @Public
+  @Stable
+  public static Resource newInstance(long memory, int vCores) {
+    Resource resource = Records.newRecord(Resource.class);
+    resource.setMemorySize(memory);
-  @Private
-  @Unstable
-  public abstract long getMemorySize();
-  
+  @Public
+  @Stable
+  public long getMemorySize() {
+    throw new NotImplementedException(
+        "This method is implemented by ResourcePBImpl");
+  }
+
+  /**
+   * Set <em>memory</em> of the resource.
+   * @param memory <em>memory</em> of the resource
+   */
+  @Public
+  @Deprecated
+  public abstract void setMemory(int memory);
+
-  public abstract void setMemory(long memory);
+  public void setMemorySize(long memory) {
+    throw new NotImplementedException(
+        "This method is implemented by ResourcePBImpl");
+  }
-
-  @Public
-  @Unstable
-  public abstract long getVirtualCoresSize();
-  public abstract void setVirtualCores(long vCores);
+  public abstract void setVirtualCores(int vCores);
