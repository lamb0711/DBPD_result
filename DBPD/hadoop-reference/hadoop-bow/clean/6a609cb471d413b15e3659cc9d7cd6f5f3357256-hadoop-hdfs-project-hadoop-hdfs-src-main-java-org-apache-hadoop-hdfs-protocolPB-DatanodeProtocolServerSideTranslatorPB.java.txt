Reverting the patch r1213981


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1213984 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.protocol.proto.DatanodeProtocolProtos.DatanodeCommandProto;
-        if (cmds[i] != null) {
-          builder.addCmds(PBHelper.convert(cmds[i]));
-        }
+        builder.addCmds(i, PBHelper.convert(cmds[i]));
-    BlockReportResponseProto.Builder builder = 
-        BlockReportResponseProto.newBuilder();
-    if (cmd != null) {
-      builder.setCmd(PBHelper.convert(cmd));
-    }
-    return builder.build();
+    return BlockReportResponseProto.newBuilder().setCmd(PBHelper.convert(cmd))
+        .build();
-    UpgradeCommand ret;
+    UpgradeCommand cmd;
-      UpgradeCommand cmd = request.hasCmd() ? PBHelper
-          .convert(request.getCmd()) : null;
-      ret = impl.processUpgradeCommand(cmd);
+      cmd = impl.processUpgradeCommand(PBHelper.convert(request.getCmd()));
-    ProcessUpgradeResponseProto.Builder builder = 
-        ProcessUpgradeResponseProto.newBuilder();
-    if (ret != null) {
-      builder.setCmd(PBHelper.convert(ret));
-    }
-    return builder.build();
+    return ProcessUpgradeResponseProto.newBuilder()
+        .setCmd(PBHelper.convert(cmd)).build();
