HDFS-3086. Change Datanode not to send storage list in registration.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1303318 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.server.protocol.DatanodeStorage;
-    DatanodeStorage[] storages = new DatanodeStorage[request.getStoragesCount()];
-    for (int i = 0; i < request.getStoragesCount(); i++) {
-      storages[i] = PBHelper.convert(request.getStorages(i));
-    }
-      registrationResp = impl.registerDatanode(registration, storages);
+      registrationResp = impl.registerDatanode(registration);
-      report[index++] = new StorageBlockReport(s.getStorageID(), blocks);
+      report[index++] = new StorageBlockReport(PBHelper.convert(s.getStorage()),
+          blocks);
