YARN-3103. AMRMClientImpl does not update AMRM token properly. Contributed by Jason Lowe

-    amrmToken.setService(ClientRMProxy.getAMRMTokenService(getConfig()));
+    // Preserve the token service sent by the RM when adding the token
+    // to ensure we replace the previous token setup by the RM.
+    // Afterwards we can update the service address for the RPC layer.
-    if (UserGroupInformation.isSecurityEnabled()) {
-      currentUGI = UserGroupInformation.getLoginUser();
-    }
+    amrmToken.setService(ClientRMProxy.getAMRMTokenService(getConfig()));
