MAPREDUCE-5280. Bring back removed constructor and a method in mapreduce ClusterMetrics for binary compatibility with 1.x APIs. Contributed by Mayank Bansal.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1488458 13f79535-47bb-0310-9956-ffa450edef68

+  private int grayListedTrackers;
-  ClusterStatus(int trackers, int blacklists, long ttExpiryInterval, 
-                int maps, int reduces, int maxMaps, int maxReduces, 
-                JobTrackerStatus status, int numDecommissionedNodes) {
+  ClusterStatus(int trackers, int blacklists, long ttExpiryInterval, int maps,
+      int reduces, int maxMaps, int maxReduces, JobTrackerStatus status,
+      int numDecommissionedNodes) {
+    this(trackers, blacklists, ttExpiryInterval, maps, reduces, maxMaps,
+      maxReduces, status, numDecommissionedNodes, 0);
+  }
+
+  /**
+   * Construct a new cluster status.
+   * 
+   * @param trackers no. of tasktrackers in the cluster
+   * @param blacklists no of blacklisted task trackers in the cluster
+   * @param ttExpiryInterval the tasktracker expiry interval
+   * @param maps no. of currently running map-tasks in the cluster
+   * @param reduces no. of currently running reduce-tasks in the cluster
+   * @param maxMaps the maximum no. of map tasks in the cluster
+   * @param maxReduces the maximum no. of reduce tasks in the cluster
+   * @param status the {@link JobTrackerStatus} of the <code>JobTracker</code>
+   * @param numDecommissionedNodes number of decommission trackers
+   * @param numGrayListedTrackers number of graylisted trackers
+   */
+  ClusterStatus(int trackers, int blacklists, long ttExpiryInterval, int maps,
+      int reduces, int maxMaps, int maxReduces, JobTrackerStatus status,
+      int numDecommissionedNodes, int numGrayListedTrackers) {
+    this.grayListedTrackers = numGrayListedTrackers;
-    return 0;
+    return grayListedTrackers;
+    out.writeInt(grayListedTrackers);
+    grayListedTrackers = in.readInt();
