HDFS-1739.  Add available volume size to the error message when datanode throws DiskOutOfSpaceException.  Contributed by Uma Maheswara Rao G


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1150067 13f79535-47bb-0310-9956-ffa450edef68

+    long maxAvailable = 0;
-      if (volume.getAvailable() > blockSize) { return volume; }
+      long availableVolumeSize = volume.getAvailable();
+      if (availableVolumeSize > blockSize) { return volume; }
+      
+      if (availableVolumeSize > maxAvailable) {
+        maxAvailable = availableVolumeSize;
+      }
+      
-        throw new DiskOutOfSpaceException("Insufficient space for an additional block");
+        throw new DiskOutOfSpaceException(
+            "Insufficient space for an additional block. Volume with the most available space has "
+                + maxAvailable
+                + " bytes free, configured block size is "
+                + blockSize);
