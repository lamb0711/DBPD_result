YARN-945. Removed setting of AMRMToken's service from ResourceManager and changed client libraries do it all the time and correctly. Contributed by Vinod Kumar Vavilapalli.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1508232 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.classification.InterfaceAudience.Private;
+import org.apache.hadoop.security.SecurityUtil;
+import org.apache.hadoop.security.token.Token;
+import org.apache.hadoop.security.token.TokenIdentifier;
+import org.apache.hadoop.yarn.security.AMRMTokenIdentifier;
+
+import com.google.common.annotations.VisibleForTesting;
+@SuppressWarnings("unchecked")
-  @SuppressWarnings("unchecked")
-  @SuppressWarnings("unchecked")
-  protected static <T> T getProxy(final Configuration conf,
+  private static <T> T getProxy(final Configuration conf,
-    return (T) UserGroupInformation.getCurrentUser().doAs(
-      new PrivilegedAction<Object>() {
+    return UserGroupInformation.getCurrentUser().doAs(
+      new PrivilegedAction<T>() {
+  @Private
+  @VisibleForTesting
