HDFS-12159. Ozone: SCM: Add create replication pipeline RPC. Contributed by Anu Engineer.

-import org.apache.hadoop.ozone.container.ContainerTestHelper;
-import org.apache.hadoop.ozone.scm.ratis.RatisManager;
-  private final RatisManager ratisManager;
-
-
-    final boolean useRatis = conf.getBoolean(
-        OzoneConfigKeys.DFS_CONTAINER_RATIS_ENABLED_KEY,
-        OzoneConfigKeys.DFS_CONTAINER_RATIS_ENABLED_DEFAULT);
-    this.ratisManager = useRatis? RatisManager.newRatisManager(conf): null;
-  public RatisManager getRatisManager() {
-    return ratisManager;
-  }
-
-    final boolean useRatis = dnConf.getBoolean(
-        OzoneConfigKeys.DFS_CONTAINER_RATIS_ENABLED_KEY,
-        OzoneConfigKeys.DFS_CONTAINER_RATIS_ENABLED_DEFAULT);
-    if (!useRatis) {
-      return;
-    }
-    final String address = ContainerTestHelper.createLocalAddress();
-    setConf(i, dnConf, OzoneConfigKeys.DFS_CONTAINER_RATIS_SERVER_ID,
-        address);
-    setConf(i, dnConf, OzoneConfigKeys.DFS_CONTAINER_IPC_PORT,
-        String.valueOf(NetUtils.createSocketAddr(address).getPort()));
+      // Mini Ozone cluster will not come up if the port is not true, since
+      // Ratis will exit if the server port cannot be bound. We can remove this
+      // hard coding once we fix the Ratis default behaviour.
+      conf.setBoolean(OzoneConfigKeys.DFS_CONTAINER_RATIS_IPC_RANDOM_PORT,
+          true);
-
