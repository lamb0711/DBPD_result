Merge branch 'YARN-6592' into trunk

-import java.util.List;
+import java.util.Set;
-import org.apache.hadoop.yarn.api.records.ResourceRequest;
+  private volatile Set<String> allocationTags = null;
+
+    if (this.container != null) {
+      this.allocationTags = this.container.getAllocationTags();
+    }
+  @Override
+  public Set<String> getAllocationTags() {
+    return allocationTags;
+  }
+
+  public void setAllocationTags(Set<String> tags) {
+    this.allocationTags = tags;
+  }
+
+      // Set the allocation tags from the NMContainerStatus
+      container.setAllocationTags(report.getAllocationTags());
+      // Notify AllocationTagsManager
+      container.rmContext.getAllocationTagsManager().addContainer(
+          container.getNodeId(), container.getContainerId(),
+          container.getAllocationTags());
+
-
+      // Notify AllocationTagsManager
+      container.rmContext.getAllocationTagsManager().addContainer(
+          container.getNodeId(), container.getContainerId(),
+          container.getAllocationTags());
+
-            + " rm-size-resource:" + rmContainerResource + " nm-size-reosurce:"
+            + " rm-size-resource:" + rmContainerResource + " nm-size-resource:"
+      // Notify AllocationTagsManager
+      container.rmContext.getAllocationTagsManager().removeContainer(
+          container.getNodeId(), container.getContainerId(),
+          container.getAllocationTags());
+
