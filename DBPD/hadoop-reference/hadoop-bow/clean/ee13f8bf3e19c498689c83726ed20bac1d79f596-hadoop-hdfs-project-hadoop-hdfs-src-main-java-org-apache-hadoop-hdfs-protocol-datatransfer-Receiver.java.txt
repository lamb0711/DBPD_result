Merge r1609845 through r1612502 from trunk.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-6584@1612505 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.protocol.DatanodeInfo;
+    final DatanodeInfo[] targets = PBHelper.convert(proto.getTargetsList());
+        PBHelper.convertStorageType(proto.getStorageType()),
-        PBHelper.convert(proto.getTargetsList()),
+        targets,
+        PBHelper.convertStorageTypes(proto.getTargetStorageTypesList(), targets.length),
+    final DatanodeInfo[] targets = PBHelper.convert(proto.getTargetsList());
-        PBHelper.convert(proto.getTargetsList()));
+        targets,
+        PBHelper.convertStorageTypes(proto.getTargetStorageTypesList(), targets.length));
+        PBHelper.convertStorageType(proto.getStorageType()),
