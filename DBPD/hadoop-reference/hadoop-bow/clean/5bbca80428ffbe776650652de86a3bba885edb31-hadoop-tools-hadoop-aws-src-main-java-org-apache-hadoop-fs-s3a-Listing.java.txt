HADOOP-13421. Switch to v2 of the S3 List Objects API in S3A.
Contributed by Aaron Fabbri

-import com.amazonaws.services.s3.model.ListObjectsRequest;
-import com.amazonaws.services.s3.model.ObjectListing;
-      ListObjectsRequest request,
+      S3ListRequest request,
-      ListObjectsRequest request,
+      S3ListRequest request,
-    private boolean buildNextStatusBatch(ObjectListing objects) {
+    private boolean buildNextStatusBatch(S3ListResult objects) {
-  class ObjectListingIterator implements RemoteIterator<ObjectListing> {
+  class ObjectListingIterator implements RemoteIterator<S3ListResult> {
-    private ObjectListing objects;
+    private S3ListResult objects;
+
+    /** The most recent listing request. */
+    private S3ListRequest request;
-        ListObjectsRequest request) {
+        S3ListRequest request) {
+      this.request = request;
-    public ObjectListing next() throws IOException {
+    public S3ListResult next() throws IOException {
-          objects = owner.continueListObjects(objects);
+          objects = owner.continueListObjects(request, objects);
