MAPREDUCE-5815. Fixed test-failure of TestMRAppMaster by making MRAppMaster gracefully handle empty-queue names. Contributed by Akira Ajisaka.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1586559 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.mapred.JobConf;
+    String queueName = JobConf.DEFAULT_QUEUE_NAME;
+    if (conf != null) {
+      queueName = conf.get(MRJobConfig.QUEUE_NAME, JobConf.DEFAULT_QUEUE_NAME);
+    }
+
-        user, jobName, jobId, forcedJobStateOnShutDown);
+        user, jobName, jobId, forcedJobStateOnShutDown, queueName);
-        String jobName, JobId jobId, String forcedJobStateOnShutDown) {
+        String jobName, JobId jobId, String forcedJobStateOnShutDown,
+        String queueName) {
-          new JobIndexInfo(-1, -1, user, jobName, jobId, -1, -1, null);
+          new JobIndexInfo(-1, -1, user, jobName, jobId, -1, -1, null,
+                           queueName);
