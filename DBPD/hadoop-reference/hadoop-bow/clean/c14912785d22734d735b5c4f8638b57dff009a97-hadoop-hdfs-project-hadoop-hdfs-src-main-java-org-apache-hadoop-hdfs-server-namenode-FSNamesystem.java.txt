HDFS-2929. Stress test and fixes for block synchronization. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1292494 13f79535-47bb-0310-9956-ffa450edef68

-      if (haContext.getState().equals(NameNode.STANDBY_STATE)) {
-        // TODO(HA) we'll never get here, since we check for WRITE operation above!
-        // Need to implement tests, etc, for this - block recovery spanning
-        // failover.
-      }
-
+      // If a DN tries to commit to the standby, the recovery will
+      // fail, and the next retry will succeed on the new NN.
+  
