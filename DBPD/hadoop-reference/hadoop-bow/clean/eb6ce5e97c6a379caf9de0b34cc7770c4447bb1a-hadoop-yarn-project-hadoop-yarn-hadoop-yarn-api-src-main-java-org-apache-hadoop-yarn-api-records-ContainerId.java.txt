YARN-2562. Changed ContainerId#toString() to be more readable. Contributed by Tsuyoshi OZAWA

+  private static final String EPOCH_PREFIX = "e";
+  /**
+   * @return A string representation of containerId. The format is
+   * container_e*epoch*_*clusterTimestamp*_*appId*_*attemptId*_*containerId*
+   * when epoch is larger than 0
+   * (e.g. container_e17_1410901177871_0001_01_000005).
+   * *epoch* is increased when RM restarts or fails over.
+   * When epoch is 0, epoch is omitted
+   * (e.g. container_1410901177871_0001_01_000005).
+   */
-    sb.append("container_");
+    sb.append(CONTAINER_PREFIX + "_");
+    long epoch = getContainerId() >> 40;
+    if (epoch > 0) {
+      sb.append(EPOCH_PREFIX)
+          .append(appAttemptIdAndEpochFormat.get().format(epoch)).append("_");;
+    }
-    long epoch = getContainerId() >> 40;
-    if (epoch > 0) {
-      sb.append("_").append(appAttemptIdAndEpochFormat.get().format(epoch));
-    }
-      ApplicationAttemptId appAttemptID = toApplicationAttemptId(it);
-      long id = Long.parseLong(it.next());
+      String epochOrClusterTimestampStr = it.next();
-      if (it.hasNext()) {
-        epoch = Integer.parseInt(it.next());
+      ApplicationAttemptId appAttemptID = null;
+      if (epochOrClusterTimestampStr.startsWith(EPOCH_PREFIX)) {
+        String epochStr = epochOrClusterTimestampStr;
+        epoch = Integer.parseInt(epochStr.substring(EPOCH_PREFIX.length()));
+        appAttemptID = toApplicationAttemptId(it);
+      } else {
+        String clusterTimestampStr = epochOrClusterTimestampStr;
+        long clusterTimestamp = Long.parseLong(clusterTimestampStr);
+        appAttemptID = toApplicationAttemptId(clusterTimestamp, it);
+      long id = Long.parseLong(it.next());
-    ApplicationId appId = ApplicationId.newInstance(Long.parseLong(it.next()),
+    return toApplicationAttemptId(Long.parseLong(it.next()), it);
+  }
+
+  private static ApplicationAttemptId toApplicationAttemptId(
+      long clusterTimestamp, Iterator<String> it) throws NumberFormatException {
+    ApplicationId appId = ApplicationId.newInstance(clusterTimestamp,
