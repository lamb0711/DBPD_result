HDDS-2200 : Recon does not handle the NULL snapshot from OM DB cleanly.

Signed-off-by: Anu Engineer <aengineer@apache.org>

+import static org.apache.hadoop.ozone.recon.ReconConstants.RECON_OM_SNAPSHOT_DB;
+import static org.apache.hadoop.ozone.recon.ReconServerConfigKeys.OZONE_RECON_OM_SNAPSHOT_DB_DIR;
+
+import org.apache.hadoop.ozone.recon.ReconUtils;
-  @Inject
+  private ReconUtils reconUtils;
-  public ReconOmMetadataManagerImpl(OzoneConfiguration configuration) {
+  public ReconOmMetadataManagerImpl(OzoneConfiguration configuration,
+                                    ReconUtils reconUtils) {
+    this.reconUtils = reconUtils;
+    File reconDbDir =
+        reconUtils.getReconDbDir(configuration, OZONE_RECON_OM_SNAPSHOT_DB_DIR);
+    File lastKnownOMSnapshot =
+        reconUtils.getLastKnownDB(reconDbDir, RECON_OM_SNAPSHOT_DB);
+    if (lastKnownOMSnapshot != null) {
+      LOG.info("Last known snapshot for OM : {}",
+          lastKnownOMSnapshot.getAbsolutePath());
+      initializeNewRdbStore(lastKnownOMSnapshot);
+    }
-      LOG.info("Created new OM DB snapshot at {}.",
+      LOG.info("Created OM DB snapshot at {}.",
