MAPREDUCE-5693. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1560148 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.concurrent.ScheduledExecutorService;
-import org.apache.log4j.LogManager;
+    ScheduledExecutorService logSyncer = null;
+      logSyncer = TaskLog.createLogSyncer();
+
-      // Shutting down log4j of the child-vm...
-      // This assumes that on return from Task.run()
-      // there is no more logging done.
-      LogManager.shutdown();
+      TaskLog.syncLogsShutdown(logSyncer);
