YARN-2180. [YARN-1492] In-memory backing store for cache manager. (Chris Trezzo via kasha)

+import org.apache.hadoop.util.ReflectionUtils;
+import org.apache.hadoop.yarn.exceptions.YarnRuntimeException;
+import org.apache.hadoop.yarn.server.sharedcachemanager.store.SCMStore;
+
+import com.google.common.annotations.VisibleForTesting;
+  private SCMStore store;
+
+
+    this.store = createSCMStoreService(conf);
+    addService(store);
+
+  @SuppressWarnings("unchecked")
+  private static SCMStore createSCMStoreService(Configuration conf) {
+    Class<? extends SCMStore> defaultStoreClass;
+    try {
+      defaultStoreClass =
+          (Class<? extends SCMStore>) Class
+              .forName(YarnConfiguration.DEFAULT_SCM_STORE_CLASS);
+    } catch (Exception e) {
+      throw new YarnRuntimeException("Invalid default scm store class"
+          + YarnConfiguration.DEFAULT_SCM_STORE_CLASS, e);
+    }
+
+    SCMStore store =
+        ReflectionUtils.newInstance(conf.getClass(
+            YarnConfiguration.SCM_STORE_CLASS,
+            defaultStoreClass, SCMStore.class), conf);
+    return store;
+  }
+
+  /**
+   * For testing purposes only.
+   */
+  @VisibleForTesting
+  SCMStore getSCMStore() {
+    return this.store;
+  }
+
+
+  @Private
+  @SuppressWarnings("unchecked")
+  public static AppChecker createAppCheckerService(Configuration conf) {
+    Class<? extends AppChecker> defaultCheckerClass;
+    try {
+      defaultCheckerClass =
+          (Class<? extends AppChecker>) Class
+              .forName(YarnConfiguration.DEFAULT_SCM_APP_CHECKER_CLASS);
+    } catch (Exception e) {
+      throw new YarnRuntimeException("Invalid default scm app checker class"
+          + YarnConfiguration.DEFAULT_SCM_APP_CHECKER_CLASS, e);
+    }
+
+    AppChecker checker =
+        ReflectionUtils.newInstance(conf.getClass(
+            YarnConfiguration.SCM_APP_CHECKER_CLASS, defaultCheckerClass,
+            AppChecker.class), conf);
+    return checker;
+  }
