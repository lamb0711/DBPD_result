HDFS-6962. ACL inheritance conflicts with umaskmode. Contributed by Chris Nauroth.

+import org.apache.hadoop.fs.permission.FsCreateModes;
-    final FsPermission permission = params.permission();
+    final FsPermission unmaskedPermission = params.unmaskedPermission();
+    final FsPermission permission = unmaskedPermission == null ?
+        params.permission() :
+        FsCreateModes.create(params.permission(), unmaskedPermission);
