YARN-8397. Potential thread leak in ActivitiesManager. Contributed by Rohith Sharma K S.

+  private volatile boolean stopped;
-        while (true) {
+        while (!stopped && !Thread.currentThread().isInterrupted()) {
-          } catch (Exception e) {
-            // ignore
+          } catch (InterruptedException e) {
+            LOG.info(getName() + " thread interrupted");
+            break;
-
+    cleanUpThread.setName("ActivitiesManager thread.");
-    cleanUpThread.interrupt();
+    stopped = true;
+    if (cleanUpThread != null) {
+      cleanUpThread.interrupt();
+      try {
+        cleanUpThread.join();
+      } catch (InterruptedException ie) {
+        LOG.warn("Interrupted Exception while stopping", ie);
+      }
+    }
