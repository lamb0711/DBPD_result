Merge remote-tracking branch 'apache/trunk' into HDFS-7285

+import org.apache.hadoop.hdfs.server.namenode.INodeId;
-  BlockCollection getBlockCollection(Block b) {
-    BlockInfo info = blocks.get(b);
-    return (info != null) ? info.getBlockCollection() : null;
-  }
-
-    info.setBlockCollection(bc);
+    info.setBlockCollectionId(bc.getId());
-    blockInfo.setBlockCollection(null);
-    final int size = blockInfo instanceof BlockInfoContiguous ?
-        blockInfo.numNodes() : blockInfo.getCapacity();
+    blockInfo.setBlockCollectionId(INodeId.INVALID_INODE_ID);
+    final int size = blockInfo.isStriped() ?
+        blockInfo.getCapacity() : blockInfo.numNodes();
