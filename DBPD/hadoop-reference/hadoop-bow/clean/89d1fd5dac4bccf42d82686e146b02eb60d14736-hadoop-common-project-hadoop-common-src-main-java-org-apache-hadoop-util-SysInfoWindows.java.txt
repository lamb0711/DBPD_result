HADOOP-12356. Fix computing CPU usage statistics on Windows. (Inigo Goiri via wangda)

+              /**
+               * This number will be the aggregated usage across all cores in
+               * [0.0, 100.0]. For example, it will be 400.0 if there are 8
+               * cores and each of them is running at 50% utilization.
+               */
-                  / (refreshInterval * 1.0f);
+                  * 100F / refreshInterval;
-  public float getCpuUsage() {
+  public float getCpuUsagePercentage() {
-    return cpuUsage;
+    float ret = cpuUsage;
+    if (ret != -1) {
+      ret = ret / numProcessors;
+    }
+    return ret;
+  }
+
+  /** {@inheritDoc} */
+  @Override
+  public float getNumVCoresUsed() {
+    refreshIfNeeded();
+    float ret = cpuUsage;
+    if (ret != -1) {
+      ret = ret / 100F;
+    }
+    return ret;
