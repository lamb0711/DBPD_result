HDDS-1496. Support partial chunk reads and checksum verification (#804)


-   * matches with that of the input checksumData.
+   * matches with that of the input checksumData, starting from index
+   * startIndex.
+   * @param startIndex index of first checksum in checksumData to match with
+   *                   data's computed checksum.
-  public static boolean verifyChecksum(
-      ByteString byteString, ChecksumData checksumData)
-      throws OzoneChecksumException {
-    return verifyChecksum(byteString.toByteArray(), checksumData);
+  public static boolean verifyChecksum(ByteString byteString,
+      ChecksumData checksumData, int startIndex) throws OzoneChecksumException {
+    return verifyChecksum(byteString.toByteArray(), checksumData, startIndex);
+    return verifyChecksum(data, checksumData, 0);
+  }
+
+  /**
+   * Computes the ChecksumData for the input data and verifies that it
+   * matches with that of the input checksumData.
+   * @param data input data
+   * @param checksumData checksumData to match with
+   * @param startIndex index of first checksum in checksumData to match with
+   *                   data's computed checksum.
+   * @throws OzoneChecksumException is thrown if checksums do not match
+   */
+  public static boolean verifyChecksum(byte[] data, ChecksumData checksumData,
+      int startIndex) throws OzoneChecksumException {
-    return checksumData.verifyChecksumDataMatches(computedChecksumData);
+    return checksumData.verifyChecksumDataMatches(computedChecksumData,
+        startIndex);
