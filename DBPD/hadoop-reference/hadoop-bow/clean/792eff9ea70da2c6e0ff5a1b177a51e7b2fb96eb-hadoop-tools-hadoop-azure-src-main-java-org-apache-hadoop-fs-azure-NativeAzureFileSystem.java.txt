HADOOP-14820 Wasb mkdirs security checks inconsistent with HDFS.
Contributed by Sivaguru Sankaridurg

-    for (Path current = f.getParent(), parent = current.getParent();
+    for (Path current = f, parent = current.getParent();
-      if (currentMetadata != null) {
+      if (currentMetadata != null && currentMetadata.isDir()) {
-
+    if (absolutePath.equals(ancestor)) {
+      return true;
+    }
+
