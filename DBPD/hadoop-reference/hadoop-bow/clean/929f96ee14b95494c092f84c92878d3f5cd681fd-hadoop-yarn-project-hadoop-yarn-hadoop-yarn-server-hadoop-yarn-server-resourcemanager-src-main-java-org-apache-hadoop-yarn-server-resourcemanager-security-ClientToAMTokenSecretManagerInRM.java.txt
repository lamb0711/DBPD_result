YARN-1214. Register ClientToken MasterKey in SecretManager after it is saved (Jian He via bikas)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1526078 13f79535-47bb-0310-9956-ffa450edef68

-  public synchronized SecretKey registerApplication(
+  public synchronized SecretKey createMasterKey(
-    SecretKey key = generateSecret();
-    this.masterKeys.put(applicationAttemptID, key);
-    return key;
+    return generateSecret();
+  public synchronized void registerApplication(
+      ApplicationAttemptId applicationAttemptID, SecretKey key) {
+    this.masterKeys.put(applicationAttemptID, key);
+  }
+
+  // Only for RM recovery
-    this.masterKeys.put(applicationAttemptID, key);
+    registerApplication(applicationAttemptID, key);
