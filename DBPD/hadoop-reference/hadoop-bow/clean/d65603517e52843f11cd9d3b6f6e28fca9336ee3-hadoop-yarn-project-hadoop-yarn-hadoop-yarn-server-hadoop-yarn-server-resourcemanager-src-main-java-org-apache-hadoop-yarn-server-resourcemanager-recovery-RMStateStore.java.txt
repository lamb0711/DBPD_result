YARN-5375. invoke MockRM#drainEvents implicitly in MockRM methods to reduce test failures. Contributed by sandflee.

+  @SuppressWarnings("rawtypes")
+  @VisibleForTesting
+  protected EventHandler rmStateStoreEventHandler;
+    rmStateStoreEventHandler = new ForwardingEventHandler();
-                        new ForwardingEventHandler());
+                        rmStateStoreEventHandler);
-    dispatcher.getEventHandler().handle(new RMStateStoreAppEvent(appState));
+    getRMStateStoreEventHandler().handle(new RMStateStoreAppEvent(appState));
-    dispatcher.getEventHandler().handle(new RMStateUpdateAppEvent(appState));
+    getRMStateStoreEventHandler().handle(new RMStateUpdateAppEvent(appState));
-    dispatcher.getEventHandler().handle(
+    getRMStateStoreEventHandler().handle(
-    dispatcher.getEventHandler().handle(
+    getRMStateStoreEventHandler().handle(
-    dispatcher.getEventHandler().handle(new RMStateStoreRemoveAppEvent(appState));
+    getRMStateStoreEventHandler().handle(
+        new RMStateStoreRemoveAppEvent(appState));
-    dispatcher.getEventHandler().handle(
+    getRMStateStoreEventHandler().handle(
+
+  @SuppressWarnings("rawtypes")
+  protected EventHandler getRMStateStoreEventHandler() {
+    return dispatcher.getEventHandler();
+  }
