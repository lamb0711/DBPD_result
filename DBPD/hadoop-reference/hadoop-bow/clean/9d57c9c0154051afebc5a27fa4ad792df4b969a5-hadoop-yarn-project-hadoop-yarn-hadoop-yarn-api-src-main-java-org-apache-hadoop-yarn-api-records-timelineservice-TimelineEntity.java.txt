YARN-3087. Made the REST server of per-node aggregator work alone in NM daemon. Conntributed by Li Lu.

(cherry picked from commit 41a08ad404d4278fe598d6c222b2ae0e84bae0df)

-  private Map<String, Object> info = new HashMap<>();
-  private Map<String, Object> configs = new HashMap<>();
+  private HashMap<String, Object> info = new HashMap<>();
+  private HashMap<String, Object> configs = new HashMap<>();
-  private Map<String, Set<String>> isRelatedToEntities = new HashMap<>();
-  private Map<String, Set<String>> relatesToEntities = new HashMap<>();
+  private HashMap<String, Set<String>> isRelatedToEntities = new HashMap<>();
+  private HashMap<String, Set<String>> relatesToEntities = new HashMap<>();
+  // required by JAXB
+  @InterfaceAudience.Private
+  public HashMap<String, Object> getInfoJAXB() {
+    return info;
+  }
+
-    this.info = info;
+    if (info != null && !(info instanceof HashMap)) {
+      this.info = new HashMap<String, Object>(info);
+    } else {
+      this.info = (HashMap<String, Object>) info;
+    }
+  // required by JAXB
+  @InterfaceAudience.Private
+  public HashMap<String, Object> getConfigsJAXB() {
+    return configs;
+  }
+
-    this.configs = configs;
+    if (configs != null && !(configs instanceof HashMap)) {
+      this.configs = new HashMap<String, Object>(configs);
+    } else {
+      this.configs = (HashMap<String, Object>) configs;
+    }
-  @XmlElement(name = "isrelatedto")
+  // required by JAXB
+  @InterfaceAudience.Private
+  @XmlElement(name = "isrelatedto")
+  public HashMap<String, Set<String>> getIsRelatedToEntitiesJAXB() {
+    return isRelatedToEntities;
+  }
+
-    this.isRelatedToEntities = isRelatedToEntities;
+    if (isRelatedToEntities != null && !(isRelatedToEntities instanceof HashMap)) {
+      this.isRelatedToEntities = new HashMap<String, Set<String>>(isRelatedToEntities);
+    } else {
+      this.isRelatedToEntities = (HashMap<String, Set<String>>) isRelatedToEntities;
+    }
+  // required by JAXB
+  @InterfaceAudience.Private
+  public HashMap<String, Set<String>> getRelatesToEntitiesJAXB() {
+    return relatesToEntities;
+  }
+
-    this.relatesToEntities = relatesToEntities;
+    if (relatesToEntities != null && !(relatesToEntities instanceof HashMap)) {
+      this.relatesToEntities = new HashMap<String, Set<String>>(relatesToEntities);
+    } else {
+      this.relatesToEntities = (HashMap<String, Set<String>>) relatesToEntities;
+    }
