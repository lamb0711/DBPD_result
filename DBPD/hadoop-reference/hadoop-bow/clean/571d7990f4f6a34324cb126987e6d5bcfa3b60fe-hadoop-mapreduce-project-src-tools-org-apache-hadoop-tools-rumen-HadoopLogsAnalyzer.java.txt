Merge trunk into HA branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1196458 13f79535-47bb-0310-9956-ffa450edef68

-        attempt.setHostName(hostName);
-        ParsedHost host = null;
-
-        host = getAndRecordParsedHost(hostName);
+        ParsedHost host = getAndRecordParsedHost(hostName);
+          attempt.setHostName(host.getNodeName(), host.getRackName());
-      if (hostName != null) {
-        attempt.setHostName(hostName);
+
+      ParsedHost host = getAndRecordParsedHost(hostName);
+      if (host != null) {
+        attempt.setHostName(host.getNodeName(), host.getRackName());
