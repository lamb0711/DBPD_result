HDFS-6294. Use INode IDs to avoid conflicts when a file open for write is renamed (cmccabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1593634 13f79535-47bb-0310-9956-ffa450edef68

-          src, block, nodes, storageIDs,
+          src, fileId, block, nodes, storageIDs,
-          dfsClient.namenode.abandonBlock(block, src, dfsClient.clientName);
+          dfsClient.namenode.abandonBlock(block, fileId, src,
+              dfsClient.clientName);
-          dfsClient.namenode.fsync(src, dfsClient.clientName, lastBlockLength);
+          dfsClient.namenode.fsync(src, fileId,
+              dfsClient.clientName, lastBlockLength);
-    dfsClient.endFileLease(src);
+    dfsClient.endFileLease(fileId);
-      dfsClient.endFileLease(src);
+      dfsClient.endFileLease(fileId);
-  long getFileId() {
+  public long getFileId() {
