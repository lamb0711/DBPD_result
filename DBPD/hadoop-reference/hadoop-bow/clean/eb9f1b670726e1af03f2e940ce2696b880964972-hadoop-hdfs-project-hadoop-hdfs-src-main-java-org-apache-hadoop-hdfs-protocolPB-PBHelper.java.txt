HDFS-5232. Protocol changes to transmit StorageUuid.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1525153 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.hdfs.protocol.proto.HdfsProtos.StorageIDsProto;
+import org.apache.hadoop.hdfs.protocol.proto.HdfsProtos.StorageUuidsProto;
-    return new DatanodeID(dn.getIpAddr(), dn.getHostName(), dn.getStorageID(),
+    return new DatanodeID(dn.getIpAddr(), dn.getHostName(), dn.getDatanodeUuid(),
-        .setStorageID(dn.getStorageID())
+        .setDatanodeUuid(dn.getStorageID())
-        .addAllStorageIDs(Arrays.asList(blk.getStorageIDs())).build();
+        .addAllStorageUuids(Arrays.asList(blk.getStorageIDs())).build();
-    return new BlockWithLocations(convert(b.getBlock()), b.getStorageIDsList()
+    return new BlockWithLocations(convert(b.getBlock()), b.getStorageUuidsList()
-           .addAllTargetStorageIDs(convert(cmd.getTargetStorageIDs()));
+           .addAllTargetStorageUuids(convert(cmd.getTargetStorageIDs()));
-  private static List<StorageIDsProto> convert(String[][] targetStorageIDs) {
-    StorageIDsProto[] ret = new StorageIDsProto[targetStorageIDs.length];
-    for (int i = 0; i < targetStorageIDs.length; i++) {
-      ret[i] = StorageIDsProto.newBuilder()
-          .addAllStorageIDs(Arrays.asList(targetStorageIDs[i])).build();
+  private static List<StorageUuidsProto> convert(String[][] targetStorageUuids) {
+    StorageUuidsProto[] ret = new StorageUuidsProto[targetStorageUuids.length];
+    for (int i = 0; i < targetStorageUuids.length; i++) {
+      ret[i] = StorageUuidsProto.newBuilder()
+          .addAllStorageUuids(Arrays.asList(targetStorageUuids[i])).build();
-    List<StorageIDsProto> targetStorageIDsList = blkCmd.getTargetStorageIDsList();
-    String[][] targetStorageIDs = new String[targetStorageIDsList.size()][];
+    List<StorageUuidsProto> targetStorageUuidsList = blkCmd.getTargetStorageUuidsList();
+    String[][] targetStorageIDs = new String[targetStorageUuidsList.size()][];
-      List<String> storageIDs = targetStorageIDsList.get(i).getStorageIDsList();
+      List<String> storageIDs = targetStorageUuidsList.get(i).getStorageUuidsList();
-        .setStorageID(s.getStorageID()).build();
+        .setStorageUuid(s.getStorageID()).build();
-      return new DatanodeStorage(s.getStorageID(),
+      return new DatanodeStorage(s.getStorageUuid(),
-      return new DatanodeStorage(s.getStorageID(),
+      return new DatanodeStorage(s.getStorageUuid(),
-        .setStorageID(r.getStorageID()).build();
+        .setStorageUuid(r.getStorageID()).build();
