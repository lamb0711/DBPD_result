YARN-9385.  Fixed ApiServiceClient to use current UGI.
            Contributed by Eric Yang

-  private String getServicePath(String appName) throws IOException {
+  protected String getServicePath(String appName) throws IOException {
-  private void appendUserNameIfRequired(StringBuilder builder) {
+  private void appendUserNameIfRequired(StringBuilder builder)
+      throws IOException {
-    if (conf.get("hadoop.http.authentication.type").equalsIgnoreCase(
-        "simple")) {
+    if (conf.get("hadoop.http.authentication.type")
+        .equalsIgnoreCase("simple")) {
+      String username = UserGroupInformation.getCurrentUser()
+            .getShortUserName();
-          .encodeString(System.getProperty("user.name")));
+          .encodeString(username));
