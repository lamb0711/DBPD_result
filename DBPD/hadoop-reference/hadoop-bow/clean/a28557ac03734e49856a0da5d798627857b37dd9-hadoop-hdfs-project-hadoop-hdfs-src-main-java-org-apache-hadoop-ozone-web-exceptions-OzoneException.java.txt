HDFS-11712. Ozone: Reuse ObjectMapper instance to improve the performance. Contributed by Yiqun Lin.

-import org.apache.hadoop.classification.InterfaceAudience;
-import org.codehaus.jackson.annotate.JsonAutoDetect;
-import org.codehaus.jackson.annotate.JsonProperty;
-import org.codehaus.jackson.map.ObjectMapper;
-
+import org.apache.hadoop.classification.InterfaceAudience;
+
+import com.fasterxml.jackson.annotation.JsonAutoDetect;
+import com.fasterxml.jackson.annotation.JsonProperty;
+import com.fasterxml.jackson.databind.ObjectMapper;
+import com.fasterxml.jackson.databind.ObjectReader;
+
+  private static final ObjectReader READER =
+      new ObjectMapper().readerFor(OzoneException.class);
+  private static final ObjectMapper MAPPER;
+
+  static {
+    MAPPER = new ObjectMapper();
+    MAPPER.setVisibility(
+        MAPPER.getSerializationConfig().getDefaultVisibilityChecker()
+            .withCreatorVisibility(JsonAutoDetect.Visibility.NONE)
+            .withFieldVisibility(JsonAutoDetect.Visibility.NONE)
+            .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
+            .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)
+            .withSetterVisibility(JsonAutoDetect.Visibility.NONE));
+  }
-      ObjectMapper mapper = new ObjectMapper();
-      mapper.setVisibilityChecker(
-          mapper.getSerializationConfig().getDefaultVisibilityChecker()
-              .withCreatorVisibility(JsonAutoDetect.Visibility.NONE)
-              .withFieldVisibility(JsonAutoDetect.Visibility.NONE)
-              .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
-              .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)
-              .withSetterVisibility(JsonAutoDetect.Visibility.NONE));
-      return mapper.writeValueAsString(this);
+      return MAPPER.writeValueAsString(this);
-    ObjectMapper mapper = new ObjectMapper();
-    return mapper.readValue(jsonString, OzoneException.class);
+    return READER.readValue(jsonString);
