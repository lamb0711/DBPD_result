HDFS-8418. Fix the isNeededReplication calculation for Striped block in NN. Contributed by Yi Liu.

-import org.apache.hadoop.hdfs.protocol.Block;
-    final int numExpected = bc.getPreferredBlockReplication();
+    final int numExpected = blockManager.getExpectedReplicaNum(bc, block);
-  private static void logBlockReplicationInfo(Block block, BlockCollection bc,
+  private void logBlockReplicationInfo(BlockInfo block, BlockCollection bc,
-    int curExpectedReplicas = bc.getPreferredBlockReplication();
+    int curExpectedReplicas = blockManager.getExpectedReplicaNum(bc, block);
-            bc.getPreferredBlockReplication(), liveReplicas)) {
+            blockManager.getExpectedReplicaNum(bc, block), liveReplicas)) {
-                bc.getPreferredBlockReplication());
+                blockManager.getExpectedReplicaNum(bc, block));
