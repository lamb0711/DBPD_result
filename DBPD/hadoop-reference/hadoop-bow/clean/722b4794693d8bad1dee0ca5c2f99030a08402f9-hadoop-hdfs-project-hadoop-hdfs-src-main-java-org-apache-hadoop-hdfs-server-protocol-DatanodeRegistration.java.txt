HDFS-7434. DatanodeID hashCode should not be mutable. Contributed by Daryn Sharp.

+import com.google.common.annotations.VisibleForTesting;
+
+  @VisibleForTesting
+  public DatanodeRegistration(String uuid, DatanodeRegistration dnr) {
+    this(new DatanodeID(uuid, dnr),
+         dnr.getStorageInfo(),
+         dnr.getExportedKeys(),
+         dnr.getSoftwareVersion());
+  }
+
