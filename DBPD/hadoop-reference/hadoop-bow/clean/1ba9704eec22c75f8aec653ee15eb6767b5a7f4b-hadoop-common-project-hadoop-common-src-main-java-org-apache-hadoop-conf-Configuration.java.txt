HADOOP-14399. Configuration does not correctly XInclude absolute file URIs.
Contributed by Jonathan Eagles

+      String confInclude = null;
-            String confInclude = null;
+            confInclude = null;
-              File href = new File(confInclude);
-              if (!href.isAbsolute()) {
-                // Included resources are relative to the current resource
-                File baseFile = new File(name).getParentFile();
-                href = new File(baseFile, href.getPath());
+              URL url;
+              try {
+                url = new URL(confInclude);
+                url.openConnection().connect();
+              } catch (IOException ioe) {
+                File href = new File(confInclude);
+                if (!href.isAbsolute()) {
+                  // Included resources are relative to the current resource
+                  File baseFile = new File(name).getParentFile();
+                  href = new File(baseFile, href.getPath());
+                }
+                if (!href.exists()) {
+                  // Resource errors are non-fatal iff there is 1 xi:fallback
+                  fallbackAllowed = true;
+                  break;
+                }
+                url = href.toURI().toURL();
-              if (!href.exists()) {
-                // Resource errors are non-fatal iff there is 1 xi:fallback
-                fallbackAllowed = true;
-                break;
-              }
-              Resource uriResource = new Resource(href.toURI().toURL(), name);
+              Resource uriResource = new Resource(url, name);
-              throw new IOException("Fetch fail on include with no "
-                  + "fallback while loading '" + name + "'");
+              throw new IOException("Fetch fail on include for '"
+                  + confInclude + "' with no fallback while loading '"
+                  + name + "'");
