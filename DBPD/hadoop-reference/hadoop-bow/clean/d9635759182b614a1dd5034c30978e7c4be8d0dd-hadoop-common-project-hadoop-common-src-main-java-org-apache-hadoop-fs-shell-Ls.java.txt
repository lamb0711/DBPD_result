HDFS-13661. Ls command with e option fails when the filesystem is not HDFS.

+import com.google.common.annotations.VisibleForTesting;
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
-  @InterfaceAudience.Private
+  @VisibleForTesting
+  /**
+   * Should EC policies be displayed.
+   * @return true display EC policies, false doesn't display EC policies
+   */
+  @VisibleForTesting
+  boolean isDisplayECPolicy() {
+    return this.displayECPolicy;
+  }
+
+    if (isDisplayECPolicy() && item.fs.getContentSummary(item.path)
+        .getErasureCodingPolicy() == null) {
+      throw new UnsupportedOperationException("FileSystem "
+          + item.fs.getUri() + " does not support Erasure Coding");
+    }
+
+    fmt.append((maxOwner > 0) ? "%-" + maxOwner + "s " : "%s");
+    fmt.append((maxGroup > 0) ? "%-" + maxGroup + "s " : "%s");
-      int maxEC=0;
+      int maxEC = 0;
-      fmt.append(" %"+maxEC+"s ");
+      fmt.append((maxEC > 0) ? "%-" + maxEC + "s " : "%s");
-    fmt.append((maxOwner > 0) ? "%-" + maxOwner + "s " : "%s");
-    fmt.append((maxGroup > 0) ? "%-" + maxGroup + "s " : "%s");
