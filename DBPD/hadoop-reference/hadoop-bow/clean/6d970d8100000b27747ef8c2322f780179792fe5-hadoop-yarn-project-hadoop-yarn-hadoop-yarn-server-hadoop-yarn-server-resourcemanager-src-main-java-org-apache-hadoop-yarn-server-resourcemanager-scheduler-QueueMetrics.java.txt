YARN-10012. Guaranteed and max capacity queue metrics for custom resources. Contributed by Manikandan R

-    if (ResourceUtils.getNumberOfKnownResourceTypes() > 2) {
-      this.queueMetricsForCustomResources =
-          new QueueMetricsForCustomResources();
-      registerCustomResources();
-    }
+    createQueueMetricsForCustomResources();
+  protected Map<String, Long> initAndGetCustomResources() {
+    Map<String, Long> customResources = new HashMap<String, Long>();
+    ResourceInformation[] resources = ResourceUtils.getResourceTypesArray();
+
+    for (int i = 2; i < resources.length; i++) {
+      ResourceInformation resource = resources[i];
+      customResources.put(resource.getName(), Long.valueOf(0));
+    }
+    return customResources;
+  }
+
+  protected void createQueueMetricsForCustomResources() {
+    if (ResourceUtils.getNumberOfKnownResourceTypes() > 2) {
+      this.queueMetricsForCustomResources =
+          new QueueMetricsForCustomResources();
+      registerCustomResources();
+    }
+  }
+
-  private void registerCustomResources() {
-    Map<String, Long> customResources =
-      new HashMap<String, Long>();
-    ResourceInformation[] resources =
-      ResourceUtils.getResourceTypesArray();
-
-    for (int i =
-      2; i < resources.length; i++) {
-      ResourceInformation resource =
-        resources[i];
-      customResources.put(resource.getName(), Long.valueOf(0));
-    }
-
+  protected void registerCustomResources() {
+    Map<String, Long> customResources = initAndGetCustomResources();
-  private void registerCustomResources(Map<String, Long> customResources,
+  protected void registerCustomResources(Map<String, Long> customResources,
+
+  @VisibleForTesting
+  public QueueMetricsForCustomResources getQueueMetricsForCustomResources() {
+    return this.queueMetricsForCustomResources;
+  }
+
+  public void setQueueMetricsForCustomResources(
+      QueueMetricsForCustomResources metrics) {
+    this.queueMetricsForCustomResources = metrics;
+  }
