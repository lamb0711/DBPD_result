HDFS-12151. Hadoop 2 clients cannot writeBlock to Hadoop 3 DataNodes.

+          String targetStorageId = null;
+          if (targetStorageIds.length > 0) {
+            // Older clients may not have provided any targetStorageIds
+            targetStorageId = targetStorageIds[0];
+          }
-                targetStorageIds[0], targetStorageIds);
+                targetStorageId, targetStorageIds);
-                targetStorageIds[0], targetStorageIds);
+                targetStorageId, targetStorageIds);
