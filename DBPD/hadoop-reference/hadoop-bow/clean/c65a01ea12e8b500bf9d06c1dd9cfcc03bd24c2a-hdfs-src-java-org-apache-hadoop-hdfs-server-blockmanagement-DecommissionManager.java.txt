Merge trunk into HDFS-1623 branch.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1158072 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.util.CyclicIteration;
-  private final BlockManager blockManager;
-  DecommissionManager(FSNamesystem namesystem) {
+  DecommissionManager(final FSNamesystem namesystem) {
-    this.blockManager = fsnamesystem.getBlockManager();
+      final DatanodeManager dm = fsnamesystem.getBlockManager().getDatanodeManager();
-          : blockManager.getDatanodeManager().getDatanodeCyclicIteration(
-              firstkey)) {
+          : dm.getDatanodeCyclicIteration(firstkey)) {
-            blockManager.checkDecommissionStateInternal(d);
+            dm.checkDecommissionState(d);
