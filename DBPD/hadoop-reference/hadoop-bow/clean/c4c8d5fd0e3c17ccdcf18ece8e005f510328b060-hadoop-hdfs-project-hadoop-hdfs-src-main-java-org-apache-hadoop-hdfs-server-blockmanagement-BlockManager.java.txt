HDFS-14849. Erasure Coding: the internal block is replicated many times when datanode is decommissioning. Contributed by HuangTao.

-        if (!bitSet.get(blockIndex)) {
-          bitSet.set(blockIndex);
-        } else if (state == StoredReplicaState.LIVE) {
-          numReplicas.subtract(StoredReplicaState.LIVE, 1);
-          numReplicas.add(StoredReplicaState.REDUNDANT, 1);
+        if (state == StoredReplicaState.LIVE) {
+          if (!bitSet.get(blockIndex)) {
+            bitSet.set(blockIndex);
+          } else {
+            numReplicas.subtract(StoredReplicaState.LIVE, 1);
+            numReplicas.add(StoredReplicaState.REDUNDANT, 1);
+          }
