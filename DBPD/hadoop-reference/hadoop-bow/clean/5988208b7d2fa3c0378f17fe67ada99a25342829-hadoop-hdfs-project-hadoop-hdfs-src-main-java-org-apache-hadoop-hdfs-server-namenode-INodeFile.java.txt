HDFS-4432. Support INodeFileUnderConstructionWithSnapshot in FSImage saving/loading. Contributed by Jing Zhao.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1439682 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Arrays;
+  /**
+   * Check the first block to see if two INodes are about the same file
+   */
+  public static boolean isOfSameFile(INodeFile file1, INodeFile file2) {
+    BlockInfo[] blk1 = file1.getBlocks();
+    BlockInfo[] blk2 = file2.getBlocks();
+    return blk1 != null && blk2 != null && blk1[0] == blk2[0];
+  }
-    out.print(", blocks=" + (blocks == null? null: Arrays.asList(blocks)));
+    // only compare the first block
+    out.print(", blocks=" + (blocks == null? null: blocks[0]));
