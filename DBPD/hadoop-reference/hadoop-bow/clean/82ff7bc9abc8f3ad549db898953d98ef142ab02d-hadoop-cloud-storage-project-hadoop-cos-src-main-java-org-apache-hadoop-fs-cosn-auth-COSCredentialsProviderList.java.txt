HADOOP-16959. Resolve hadoop-cos dependency conflict. Contributed by Yang Yu.

-import com.qcloud.cos.exception.CosClientException;
-public class COSCredentialProviderList implements
+public class COSCredentialsProviderList implements
-      LoggerFactory.getLogger(COSCredentialProviderList.class);
+      LoggerFactory.getLogger(COSCredentialsProviderList.class);
-      new ArrayList<>(1);
+      new ArrayList<COSCredentialsProvider>(1);
-  public COSCredentialProviderList() {
+  public COSCredentialsProviderList() {
-  public COSCredentialProviderList(
+  public COSCredentialsProviderList(
-  public COSCredentialProviderList share() {
+  public COSCredentialsProviderList share() {
-      try {
-        COSCredentials credentials = provider.getCredentials();
-        if (!StringUtils.isNullOrEmpty(credentials.getCOSAccessKeyId())
-            && !StringUtils.isNullOrEmpty(credentials.getCOSSecretKey())
-            || credentials instanceof AnonymousCOSCredentials) {
-          this.lastProvider = provider;
-          return credentials;
-        }
-      } catch (CosClientException e) {
-        LOG.warn("No credentials provided by {}: {}", provider, e.toString());
+      COSCredentials credentials = provider.getCredentials();
+      if (null != credentials
+           && !StringUtils.isNullOrEmpty(credentials.getCOSAccessKeyId())
+           && !StringUtils.isNullOrEmpty(credentials.getCOSSecretKey())
+           || credentials instanceof AnonymousCOSCredentials) {
+        this.lastProvider = provider;
+        return credentials;
+  public void refresh() {
+    if (this.closed()) {
+      return;
+    }
+
+    for (COSCredentialsProvider cosCredentialsProvider : this.providers) {
+      cosCredentialsProvider.refresh();
+    }
+  }
+
+  @Override
-
