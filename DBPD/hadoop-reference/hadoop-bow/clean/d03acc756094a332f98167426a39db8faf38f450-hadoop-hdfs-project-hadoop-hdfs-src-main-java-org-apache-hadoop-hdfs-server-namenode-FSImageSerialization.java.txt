HDFS-5914. Incorporate ACLs with the changes from HDFS-5698. Contributed by Haohui Mai.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4685@1566991 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.OutputStream;
-import org.apache.hadoop.hdfs.protocol.proto.AclProtos.AclFsImageProto;
-import org.apache.hadoop.hdfs.protocolPB.PBHelper;
-    writeAclFeature(file, out);
-    writeAclFeature(file, out);
-    writeAclFeature(node, out);
-    writeAclFeature(a, out);
-  private static void writeAclFeature(INodeAttributes node, DataOutput out)
-      throws IOException {
-    if (node.getFsPermission().getAclBit()) {
-      AclFsImageProto.Builder b = AclFsImageProto.newBuilder();
-      OutputStream os = (OutputStream) out;
-
-      AclFeature feature = node.getAclFeature();
-      if (feature != null)
-        b.addAllEntries(PBHelper.convertAclEntryProto(feature.getEntries()));
-
-      b.build().writeDelimitedTo(os);
-    }
-  }
-
