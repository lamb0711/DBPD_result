HDDS-642. Add chill mode exit condition for pipeline availability. Contributed by Yiqun Lin.

+import org.apache.hadoop.hdds.scm.pipeline.PipelineManager;
+
+  private static final String PIPELINE_EXIT_RULE = "PipelineChillModeRule";
+
-      List<ContainerInfo> allContainers, EventQueue eventQueue) {
+      List<ContainerInfo> allContainers, PipelineManager pipelineManager,
+      EventQueue eventQueue) {
+
+      if (conf.getBoolean(
+          HddsConfigKeys.HDDS_SCM_CHILLMODE_PIPELINE_AVAILABILITY_CHECK,
+          HddsConfigKeys.HDDS_SCM_CHILLMODE_PIPELINE_AVAILABILITY_CHECK_DEFAULT)
+          && pipelineManager != null) {
+        PipelineChillModeRule rule = new PipelineChillModeRule(pipelineManager,
+            this);
+        exitRules.put(PIPELINE_EXIT_RULE, rule);
+        eventPublisher.addHandler(SCMEvents.PIPELINE_REPORT, rule);
+      }
-  private void validateChillModeExitRules(EventPublisher eventQueue) {
+  public void validateChillModeExitRules(EventPublisher eventQueue) {
