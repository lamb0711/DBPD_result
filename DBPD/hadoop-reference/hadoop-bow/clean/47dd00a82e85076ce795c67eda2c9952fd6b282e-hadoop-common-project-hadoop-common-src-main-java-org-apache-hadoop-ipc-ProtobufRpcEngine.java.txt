Merge branch 'HDFS-12943' into trunk

-      rpcTimeout, connectionRetryPolicy, null);
+      rpcTimeout, connectionRetryPolicy, null, null);
-      AtomicBoolean fallbackToSimpleAuth) throws IOException {
+      AtomicBoolean fallbackToSimpleAuth, AlignmentContext alignmentContext)
+      throws IOException {
-        rpcTimeout, connectionRetryPolicy, fallbackToSimpleAuth);
+        rpcTimeout, connectionRetryPolicy, fallbackToSimpleAuth,
+        alignmentContext);
+    private AlignmentContext alignmentContext;
-        AtomicBoolean fallbackToSimpleAuth) throws IOException {
+        AtomicBoolean fallbackToSimpleAuth, AlignmentContext alignmentContext)
+        throws IOException {
+      this.alignmentContext = alignmentContext;
-            fallbackToSimpleAuth);
+            fallbackToSimpleAuth, alignmentContext);
-      String portRangeConfig)
+      String portRangeConfig, AlignmentContext alignmentContext)
-        portRangeConfig);
+        portRangeConfig, alignmentContext);
-     * the range of ports used when port is 0 (an ephemeral port)
+     * @param alignmentContext provides server state info on client responses
-        String portRangeConfig)
+        String portRangeConfig, AlignmentContext alignmentContext)
+      setAlignmentContext(alignmentContext);
