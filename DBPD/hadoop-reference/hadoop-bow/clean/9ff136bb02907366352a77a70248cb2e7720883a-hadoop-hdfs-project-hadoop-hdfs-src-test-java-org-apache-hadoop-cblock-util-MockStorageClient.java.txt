HDFS-12210. Block Storage: volume creation times out while creating 3TB volume because of too many containers. Contributed by Mukul Kumar Singh.

+import java.util.concurrent.atomic.AtomicInteger;
-  private static long currentContainerId = -1;
+  private static AtomicInteger currentContainerId =
+      new AtomicInteger(0);
-    currentContainerId += 1;
-    ContainerLookUpService.addContainer(Long.toString(currentContainerId));
-    return ContainerLookUpService.lookUp(Long.toString(currentContainerId))
+    int contId = currentContainerId.getAndIncrement();
+    ContainerLookUpService.addContainer(Long.toString(contId));
+    return ContainerLookUpService.lookUp(Long.toString(contId))
-    currentContainerId += 1;
-    ContainerLookUpService.addContainer(Long.toString(currentContainerId));
-    return ContainerLookUpService.lookUp(Long.toString(currentContainerId))
-        .getPipeline();  }
+    int contId = currentContainerId.getAndIncrement();
+    ContainerLookUpService.addContainer(Long.toString(contId));
+    return ContainerLookUpService.lookUp(Long.toString(contId))
+        .getPipeline();
+  }
