YARN-7632. Effective min and max resource need to be set for auto created leaf queues upon creation and capacity management. Contributed by Suma Shivaprasad.

+
+import org.apache.hadoop.yarn.util.resource.Resources;
-      this.queueCapacities.setCapacity(nodeLabel,
+      queueCapacities.setCapacity(nodeLabel,
-      this.queueCapacities.setAbsoluteCapacity(nodeLabel, capacities
+      queueCapacities.setAbsoluteCapacity(nodeLabel, capacities
-      this.queueCapacities.setMaximumCapacity(nodeLabel, capacities
+      queueCapacities.setMaximumCapacity(nodeLabel, capacities
-      this.queueCapacities.setAbsoluteMaximumCapacity(nodeLabel, capacities
+      queueCapacities.setAbsoluteMaximumCapacity(nodeLabel, capacities
+
+      Resource resourceByLabel = labelManager.getResourceByLabel(nodeLabel,
+          csContext.getClusterResource());
+      getQueueResourceQuotas().setEffectiveMinResource(nodeLabel,
+          Resources.multiply(resourceByLabel,
+              queueCapacities.getAbsoluteCapacity(nodeLabel)));
+      getQueueResourceQuotas().setEffectiveMaxResource(nodeLabel,
+          Resources.multiply(resourceByLabel, queueCapacities
+              .getAbsoluteMaximumCapacity(nodeLabel)));
