YARN-5298. Mount usercache and NM filecache directories into Docker container. Contributed by  Sidharta Seethana.

+      List<String> filecacheDirs = getNMFilecacheDirs(localDirs);
+      List<String> userLocalDirs = getUserLocalDirs(localDirs);
+
-        sanitizeEnv(environment, containerWorkDir, appDirs, containerLogDirs,
+        sanitizeEnv(environment, containerWorkDir, appDirs, userLocalDirs,
+            containerLogDirs,
+          .setFilecacheDirs(filecacheDirs)
+          .setUserLocalDirs(userLocalDirs)
+  protected List<String> getUserLocalDirs(List<String> localDirs) {
+    List<String> userLocalDirs = new ArrayList<>(localDirs.size());
+    String user = container.getUser();
+
+    for (String localDir : localDirs) {
+      String userLocalDir = localDir + Path.SEPARATOR +
+          ContainerLocalizer.USERCACHE + Path.SEPARATOR + user
+          + Path.SEPARATOR;
+
+      userLocalDirs.add(userLocalDir);
+    }
+
+    return userLocalDirs;
+  }
+
+  protected List<String> getNMFilecacheDirs(List<String> localDirs) {
+    List<String> filecacheDirs = new ArrayList<>(localDirs.size());
+
+    for (String localDir : localDirs) {
+      String filecacheDir = localDir + Path.SEPARATOR +
+          ContainerLocalizer.FILECACHE;
+
+      filecacheDirs.add(filecacheDir);
+    }
+
+    return filecacheDirs;
+  }
+
+
-      List<Path> appDirs, List<String> containerLogDirs,
+      List<Path> appDirs, List<String> userLocalDirs, List<String>
+      containerLogDirs,
+    environment.put(Environment.LOCAL_USER_DIRS.name(), StringUtils.join(",",
+        userLocalDirs));
+
