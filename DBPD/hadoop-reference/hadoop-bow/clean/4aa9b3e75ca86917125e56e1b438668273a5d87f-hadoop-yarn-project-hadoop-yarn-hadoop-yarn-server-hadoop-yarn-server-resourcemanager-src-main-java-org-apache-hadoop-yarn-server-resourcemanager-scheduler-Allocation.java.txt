MAPREDUCE-6302. Incorrect headroom can lead to a deadlock between map and reduce allocations. (kasha)

+import com.google.common.annotations.VisibleForTesting;
-  final Resource resourceLimit;
+  private Resource resourceLimit;
+
+  @VisibleForTesting
+  public void setResourceLimit(Resource resource) {
+    this.resourceLimit = resource;
+  }
