HDFS-12553. Add nameServiceId to QJournalProtocol. Contributed by Bharat Viswanadham

+  private final String nameServiceId;
-  
+
+  @VisibleForTesting
-      URI uri, NamespaceInfo nsInfo) throws IOException {
-    this(conf, uri, nsInfo, IPCLoggerChannel.FACTORY);
+                              URI uri,
+                              NamespaceInfo nsInfo) throws IOException {
+    this(conf, uri, nsInfo, null, IPCLoggerChannel.FACTORY);
+  public QuorumJournalManager(Configuration conf,
+      URI uri, NamespaceInfo nsInfo, String nameServiceId) throws IOException {
+    this(conf, uri, nsInfo, nameServiceId, IPCLoggerChannel.FACTORY);
+  }
+
+  @VisibleForTesting
-      URI uri, NamespaceInfo nsInfo,
+                       URI uri, NamespaceInfo nsInfo,
+                       AsyncLogger.Factory loggerFactory) throws IOException {
+    this(conf, uri, nsInfo, null, loggerFactory);
+
+  }
+
+  
+  QuorumJournalManager(Configuration conf,
+      URI uri, NamespaceInfo nsInfo, String nameServiceId,
+    this.nameServiceId = nameServiceId;
-    return createLoggers(conf, uri, nsInfo, factory);
+    return createLoggers(conf, uri, nsInfo, factory, nameServiceId);
-      URI uri, NamespaceInfo nsInfo, AsyncLogger.Factory factory)
-          throws IOException {
+                                         URI uri,
+                                         NamespaceInfo nsInfo,
+                                         AsyncLogger.Factory factory,
+                                         String nameServiceId)
+      throws IOException {
-      ret.add(factory.createLogger(conf, nsInfo, jid, addr));
+      ret.add(factory.createLogger(conf, nsInfo, jid, nameServiceId, addr));
