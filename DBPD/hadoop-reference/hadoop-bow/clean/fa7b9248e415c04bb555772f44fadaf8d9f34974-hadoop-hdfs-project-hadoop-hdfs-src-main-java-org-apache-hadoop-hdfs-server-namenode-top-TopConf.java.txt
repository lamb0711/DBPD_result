HDFS-7426. Change nntop JMX format to be a JSON blob.

+import java.util.concurrent.TimeUnit;
+
+import com.google.common.primitives.Ints;
+  /**
+   * Whether TopMetrics are enabled
+   */
+  public final boolean isEnabled;
-  public static final String TOP_METRICS_REGISTRATION_NAME = "topusers";
-  public static final String TOP_METRICS_RECORD_NAME = "topparam";
-   * A meta command representing the total number of commands
+   * A meta command representing the total number of calls to all commands
-  public static final String CMD_TOTAL = "total";
-  /**
-   * A meta user representing all users
-   */
-  public static String ALL_USERS = "ALL";
+  public static final String ALL_CMDS = "*";
-  public final long[] nntopReportingPeriodsMs;
+  public final int[] nntopReportingPeriodsMs;
+    isEnabled = conf.getBoolean(DFSConfigKeys.NNTOP_ENABLED_KEY,
+        DFSConfigKeys.NNTOP_ENABLED_DEFAULT);
-    nntopReportingPeriodsMs = new long[periodsStr.length];
+    nntopReportingPeriodsMs = new int[periodsStr.length];
-      nntopReportingPeriodsMs[i] = Integer.parseInt(periodsStr[i]) *
-          60L * 1000L; //min to ms
+      nntopReportingPeriodsMs[i] = Ints.checkedCast(
+          TimeUnit.MINUTES.toMillis(Integer.parseInt(periodsStr[i])));
-    for (long aPeriodMs: nntopReportingPeriodsMs) {
-      Preconditions.checkArgument(aPeriodMs >= 60L * 1000L,
+    for (int aPeriodMs: nntopReportingPeriodsMs) {
+      Preconditions.checkArgument(aPeriodMs >= TimeUnit.MINUTES.toMillis(1),
