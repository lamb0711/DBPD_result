YARN-1591. Fixed AsyncDispatcher to handle interrupts on shutdown in a sane manner and thus fix failure of TestResourceTrackerService. Contributed by Tsuyoshi Ozawa.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1578628 13f79535-47bb-0310-9956-ffa450edef68

-    }
-    catch (Throwable t) {
+    } catch (Throwable t) {
+      // If serviceStop is called, we should exit this thread gracefully.
-          && (ShutdownHookManager.get().isShutdownInProgress()) == false) {
+          && (ShutdownHookManager.get().isShutdownInProgress()) == false
+          && stopped == false) {
