HDFS-7457. DatanodeID generates excessive garbage. Contributed by Daryn Sharp.

+  private String xferAddr;
+  private int hashCode = -1;
+    updateXferAddrAndInvalidateHashCode();
+    updateXferAddrAndInvalidateHashCode();
+    updateXferAddrAndInvalidateHashCode();
-    return ipAddr + ":" + xferPort;
+    return xferAddr;
-    return getXferAddr().hashCode()^ datanodeUuid.hashCode();
+    if (hashCode == -1) {
+      int newHashCode = xferAddr.hashCode() ^ datanodeUuid.hashCode();
+      hashCode = newHashCode & Integer.MAX_VALUE;
+    }
+    return hashCode;
+    updateXferAddrAndInvalidateHashCode();
+
+  // NOTE: mutable hash codes are dangerous, however this class chooses to
+  // use them.  this method must be called when a value mutates that is used
+  // to compute the hash, equality, or comparison of instances.
+  private void updateXferAddrAndInvalidateHashCode() {
+    xferAddr = ipAddr + ":" + xferPort;
+    // can't compute new hash yet because uuid might still null...
+    hashCode = -1;
+  }
