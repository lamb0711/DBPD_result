HDFS-5484. StorageType and State in DatanodeStorageInfo in NameNode is not accurate. (Contributed by Eric Sirianni)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1547462 13f79535-47bb-0310-9956-ffa450edef68

-      Map<String, BlockListAsLongs> perVolumeBlockLists =
+      Map<DatanodeStorage, BlockListAsLongs> perVolumeBlockLists =
-      for(Map.Entry<String, BlockListAsLongs> kvPair : perVolumeBlockLists.entrySet()) {
-        String storageID = kvPair.getKey();
+      for(Map.Entry<DatanodeStorage, BlockListAsLongs> kvPair : perVolumeBlockLists.entrySet()) {
+        DatanodeStorage dnStorage = kvPair.getKey();
-        // Dummy DatanodeStorage object just for sending the block report.
-        DatanodeStorage dnStorage = new DatanodeStorage(storageID);
