HADOOP-11614. Remove httpclient dependency from hadoop-openstack. Contributed by Akira Ajisaka, Brahma Reddy Battula, and Steve Loughran.

-import org.apache.commons.httpclient.HttpMethod;
+import org.apache.http.HttpResponse;
+import org.apache.http.client.methods.HttpRequestBase;
-  private HttpMethod method;
+  private HttpRequestBase req;
+  private HttpResponse resp;
-  public HttpInputStreamWithRelease(URI uri, HttpMethod method) throws
-                                                                IOException {
+  public HttpInputStreamWithRelease(URI uri, HttpRequestBase req,
+      HttpResponse resp) throws IOException {
-    this.method = method;
+    this.req = req;
+    this.resp = resp;
-    if (method == null) {
-      throw new IllegalArgumentException("Null 'method' parameter ");
+    if (req == null) {
+      throw new IllegalArgumentException("Null 'request' parameter ");
-      inStream = method.getResponseBodyAsStream();
+      inStream = resp.getEntity().getContent();
-        if (method != null) {
+        if (req != null) {
-            method.abort();
+            req.abort();
-          method.releaseConnection();
+          req.releaseConnection();
