YARN-6666. Fix unit test failure in TestRouterClientRMService. (Botong Huang via Subru).

(cherry picked from commit e750907d0a7e2fb4b33a7c876eaa4d9122a1deea)

+import java.util.HashSet;
-import java.util.Map.Entry;
+import org.apache.hadoop.yarn.exceptions.ApplicationNotFoundException;
+  private HashSet<ApplicationId> applicationMap = new HashSet<>();
+    ApplicationId appId = null;
+    if (request.getApplicationSubmissionContext() != null) {
+      appId = request.getApplicationSubmissionContext().getApplicationId();
+    }
+    LOG.info("Application submitted: " + appId);
+    applicationMap.add(appId);
-    String appId = "";
-    boolean foundApp = false;
+    ApplicationId appId = null;
-      appId = request.getApplicationId().toString();
-      synchronized (applicationContainerIdMap) {
-        for (Entry<String, List<ContainerId>> entry : applicationContainerIdMap
-            .entrySet()) {
-          ApplicationAttemptId attemptId =
-              ApplicationAttemptId.fromString(entry.getKey());
-          if (attemptId.getApplicationId().equals(request.getApplicationId())) {
-            // Remove the apptempt and the containers that were being tracked
-            List<ContainerId> ids =
-                applicationContainerIdMap.remove(entry.getKey());
-            if (ids != null) {
-              for (ContainerId c : ids) {
-                allocatedContainerMap.remove(c);
-              }
-            }
-            foundApp = true;
-          }
-        }
+      appId = request.getApplicationId();
+      if (!applicationMap.remove(appId)) {
+        throw new ApplicationNotFoundException(
+            "Trying to kill an absent application: " + appId);
-    if (!foundApp) {
-      throw new YarnException("The application id is NOT registered: " + appId);
-    }
