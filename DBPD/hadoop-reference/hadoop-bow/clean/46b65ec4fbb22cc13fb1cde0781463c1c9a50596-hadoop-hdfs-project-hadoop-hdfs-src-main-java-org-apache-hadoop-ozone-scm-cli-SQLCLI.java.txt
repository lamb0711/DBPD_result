HDFS-12503. Ozone: some UX improvements to oz_debug. Contributed by Weiwei Yang.

+import org.apache.commons.cli.HelpFormatter;
- * This is the CLI that can be use to convert a levelDB into a sqlite DB file.
+ * This is the CLI that can be use to convert an ozone metadata DB into
+ * a sqlite DB file.
- * be used to convert a levelDB that is currently being used by Ozone. Instead,
- * this should be used to debug and diagnosis closed levelDB instances.
+ * be used to convert a DB that is currently being used by Ozone. Instead,
+ * this should be used to debug and diagnosis closed DB instances.
+    Option helpOpt = OptionBuilder
+        .hasArg(false)
+        .withLongOpt("help")
+        .withDescription("display help message")
+        .create("h");
+    allOptions.addOption(helpOpt);
+
-        .withArgName("levelDB path")
+        .withArgName("DB path")
-        .withDescription("specify levelDB path")
+        .withDescription("specify DB path")
-        .withDescription("specify output path")
+        .withDescription("specify output DB file path")
+  public void displayHelp() {
+    HelpFormatter helpFormatter = new HelpFormatter();
+    Options allOpts = getOptions();
+    helpFormatter.printHelp("hdfs oz_debug -p <DB path>"
+        + " -o <Output DB file path>", allOpts);
+  }
+
+    if (commandLine.hasOption("help")) {
+      displayHelp();
+      return 0;
+    }
-      LOG.error("Require dbPath option(-p) AND outPath option (-o)");
+      displayHelp();
-    LOG.info("levelDB path {}", value);
+    LOG.info("DB path {}", value);
+    if (outPath.toFile().isDirectory()) {
+      LOG.error("The db output path should be a file instead of a directory");
+      return -1;
+    }
+
+      if (LOG.isDebugEnabled()) {
+        LOG.debug("Command execution failed", ex);
+      }
