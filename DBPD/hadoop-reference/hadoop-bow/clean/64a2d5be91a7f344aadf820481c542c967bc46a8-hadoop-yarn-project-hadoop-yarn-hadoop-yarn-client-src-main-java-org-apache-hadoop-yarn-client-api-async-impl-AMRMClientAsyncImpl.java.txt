YARN-5999. AMRMClientAsync will stop if any exceptions thrown on allocate call. Contributed by Jian He

-  private final BlockingQueue<AllocateResponse> responseQueue;
+  private final BlockingQueue<Object> responseQueue;
-  private volatile Throwable savedException;
-
-    savedException = null;
-    responseQueue = new LinkedBlockingQueue<AllocateResponse>();
+    responseQueue = new LinkedBlockingQueue<Object>();
-    savedException = null;
-        AllocateResponse response = null;
+        Object response = null;
-            savedException = ex;
-            // interrupt handler thread in case it waiting on the queue
-            handlerThread.interrupt();
-            return;
+            response = ex;
-          AllocateResponse response;
-          if(savedException != null) {
-            LOG.error("Stopping callback due to: ", savedException);
-            handler.onError(savedException);
-            return;
-          }
+          Object object;
-            response = responseQueue.take();
+            object = responseQueue.take();
+          if (object instanceof Throwable) {
+            progress = handler.getProgress();
+            handler.onError((Throwable) object);
+            continue;
+          }
+          AllocateResponse response = (AllocateResponse) object;
