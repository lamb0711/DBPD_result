YARN-857. Localization failures should be available in container diagnostics. Contributed by  Vinod Kumar Vavilapalli.

-import com.google.common.base.Optional;
-
+import org.apache.hadoop.classification.InterfaceAudience.Private;
-import org.apache.hadoop.util.Shell.ExitCodeException;
+import org.apache.hadoop.util.Shell.ExitCodeException;
+import com.google.common.base.Optional;
+
-        new ContainerLocalizer(localizerFc, user, appId, locId, 
-            getPaths(localDirs), RecordFactoryProvider.getRecordFactory(getConf()));
+        createContainerLocalizer(user, appId, locId, localDirs, localizerFc);
+  @Private
+  @VisibleForTesting
+  protected ContainerLocalizer createContainerLocalizer(String user,
+      String appId, String locId, List<String> localDirs,
+      FileContext localizerFc) throws IOException {
+    ContainerLocalizer localizer =
+        new ContainerLocalizer(localizerFc, user, appId, locId,
+            getPaths(localDirs),
+            RecordFactoryProvider.getRecordFactory(getConf()));
+    return localizer;
+  }
+
