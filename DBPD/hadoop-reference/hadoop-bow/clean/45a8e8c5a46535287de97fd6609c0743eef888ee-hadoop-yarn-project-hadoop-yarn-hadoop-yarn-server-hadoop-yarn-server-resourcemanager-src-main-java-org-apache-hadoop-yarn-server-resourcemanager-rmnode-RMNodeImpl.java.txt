YARN-60. Fixed a bug in ResourceManager which causes all NMs to get NPEs and thus causes all containers to be rejected. Contributed by Vinod Kumar Vavilapalli.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1379550 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.hadoop.yarn.server.api.records.MasterKey;
-  private MasterKey currentMasterKey;
-
-      int cmPort, int httpPort, Node node, Resource capability,
-      MasterKey masterKey) {
+      int cmPort, int httpPort, Node node, Resource capability) {
-    this.currentMasterKey = masterKey;
-  
-  @Override
-  public MasterKey getCurrentMasterKey() {
-    this.readLock.lock();
-    try {
-      return this.currentMasterKey;
-    } finally {
-      this.readLock.unlock();
-    }
-  }
-  
-      rmNode.currentMasterKey = statusEvent.getCurrentMasterKey();
-      rmNode.currentMasterKey = statusEvent.getCurrentMasterKey();
