HDFS-4719. Remove AbstractINodeDiff.Factory and move its methods to AbstractINodeDiffList.  Contributed by Arpit Agarwal


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1470759 13f79535-47bb-0310-9956-ffa450edef68

-  static class DirectoryDiffFactory
-      extends AbstractINodeDiff.Factory<INodeDirectory, DirectoryDiff> {
-    static final DirectoryDiffFactory INSTANCE = new DirectoryDiffFactory();
+  /** A list of directory diffs. */
+  static class DirectoryDiffList
+      extends AbstractINodeDiffList<INodeDirectory, DirectoryDiff> {
-  }
-  /** A list of directory diffs. */
-  static class DirectoryDiffList
-      extends AbstractINodeDiffList<INodeDirectory, DirectoryDiff> {
-    DirectoryDiffList() {
-      setFactory(DirectoryDiffFactory.INSTANCE);
-    }
-    
-
-  @Override
-  public boolean removeChildAndAllSnapshotCopies(INode child) {
-    if (!removeChild(child)) {
-      return false;
-    }
-
-    // remove same child from the created list, if there is any.
-    final List<DirectoryDiff> diffList = diffs.asList();
-    for(int i = diffList.size() - 1; i >= 0; i--) {
-      final ChildrenDiff diff = diffList.get(i).diff;
-      if (diff.removeChild(ListType.CREATED, child)) {
-        return true;
-      }
-    }
-    return true;
-  }
