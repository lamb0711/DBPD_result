HDDS-682. Unified o3 address parsing for ozonen sh. Contributed by Elek, Marton.

-import java.net.URI;
-import java.nio.file.Path;
-import java.nio.file.Paths;
-
-import org.apache.hadoop.ozone.OzoneConsts;
-import org.apache.hadoop.ozone.client.OzoneClientException;
+import org.apache.hadoop.ozone.client.OzoneClient;
+import org.apache.hadoop.ozone.web.ozShell.OzoneAddress;
-    URI ozoneURI = verifyURI(uri);
-    Path path = Paths.get(ozoneURI.getPath());
-    if (path.getNameCount() < 3) {
-      throw new OzoneClientException(
-          "volume/bucket/key name required in infoKey");
-    }
-    String volumeName = path.getName(0).toString();
-    String bucketName = path.getName(1).toString();
+    OzoneAddress address = new OzoneAddress(uri);
+    address.ensureKeyAddress();
+    OzoneClient client = address.createClient(createOzoneConfiguration());
-    String searchString = volumeName + OzoneConsts.OZONE_URI_DELIMITER +
-        bucketName + OzoneConsts.OZONE_URI_DELIMITER;
-
-    String keyName =
-        uri.substring(uri.indexOf(searchString) +
-                searchString.length());
+    String volumeName = address.getVolumeName();
+    String bucketName = address.getBucketName();
+    String keyName = address.getKeyName();
