Reverting the previous merge r1416603 which committed some extra changes

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1416712 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.concurrent.*;
-  private final long oobPutTimeout;
-    oobPutTimeout = (long)
-        (firstRetryDelay * Math.pow(retryBackoff, retryCount) * 1000);
-  
-  public boolean putMetricsImmediate(MetricsBuffer buffer) {
-    WaitableMetricsBuffer waitableBuffer =
-        new WaitableMetricsBuffer(buffer);
-    if (!queue.enqueue(waitableBuffer)) {
-      LOG.warn(name + " has a full queue and can't consume the given metrics.");
-      dropped.incr();
-      return false;
-    }
-    if (!waitableBuffer.waitTillNotified(oobPutTimeout)) {
-      LOG.warn(name +
-          " couldn't fulfill an immediate putMetrics request in time." +
-          " Abandoning.");
-      return false;
-    }
-    return true;
-  }
-    if (buffer instanceof WaitableMetricsBuffer) {
-      ((WaitableMetricsBuffer)buffer).notifyAnyWaiters();
-    }
-
-  static class WaitableMetricsBuffer extends MetricsBuffer {
-    private final Semaphore notificationSemaphore =
-        new Semaphore(0);
-
-    public WaitableMetricsBuffer(MetricsBuffer metricsBuffer) {
-      super(metricsBuffer);
-    }
-
-    public boolean waitTillNotified(long millisecondsToWait) {
-      try {
-        return notificationSemaphore.tryAcquire(millisecondsToWait,
-            TimeUnit.MILLISECONDS);
-      } catch (InterruptedException e) {
-        return false;
-      }
-    }
-
-    public void notifyAnyWaiters() {
-      notificationSemaphore.release();
-    }
-  }
