HDFS-5848. Add rolling upgrade status to heartbeat response.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1563384 13f79535-47bb-0310-9956-ffa450edef68

-public class RollingUpgradeInfo {
-  public static final RollingUpgradeInfo EMPTY_INFO = new RollingUpgradeInfo(0); 
+public class RollingUpgradeInfo extends RollingUpgradeStatus {
+  public static final RollingUpgradeInfo EMPTY_INFO = new RollingUpgradeInfo(
+      null, 0); 
-  public RollingUpgradeInfo(long startTime) {
-    this(startTime, 0L);
+  public RollingUpgradeInfo(String blockPoolId, long startTime) {
+    this(blockPoolId, startTime, 0L);
-  public RollingUpgradeInfo(long startTime, long finalizeTime) {
+  public RollingUpgradeInfo(String blockPoolId, long startTime, long finalizeTime) {
+    super(blockPoolId);
-    return (int)startTime ^ (int)finalizeTime;
+    return super.hashCode() ^ (int)startTime ^ (int)finalizeTime;
-    return this.startTime == that.startTime
+    return super.equals(that)
+        && this.startTime == that.startTime
-    return "     Start Time: " + (startTime == 0? "<NOT STARTED>": timestamp2String(startTime))
+    return super.toString()
+      +  "\n     Start Time: " + (startTime == 0? "<NOT STARTED>": timestamp2String(startTime))
