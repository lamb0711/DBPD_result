HDFS-4647. Rename should call setLocalName after an inode is removed from snapshots.  Contributed by Arpit Agarwal


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1464795 13f79535-47bb-0310-9956-ffa450edef68

+    replaceRemovedChild(oldChild, ref);
+    return ref;
+  }
-    diffs.replaceChild(ListType.CREATED, oldChild, ref);
+  /** The child just has been removed, replace it with a reference. */
+  public void replaceRemovedChild(INode oldChild, INode newChild) {
-        diffs.replaceChild(ListType.DELETED, oldChild, ref));
-    return ref;
+        diffs.replaceChild(ListType.DELETED, oldChild, newChild));
