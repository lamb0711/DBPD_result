YARN-2980. Move health check script related functionality to hadoop-common (Varun Saxena via aw)

-package org.apache.hadoop.yarn.server.nodemanager;
+package org.apache.hadoop.util;
-import org.apache.hadoop.yarn.conf.YarnConfiguration;
-  /** Configuration used by the checker */
-  private Configuration conf;
-
-  static final String NODE_HEALTH_SCRIPT_TIMED_OUT_MSG = "Node health script timed out";
+  public static final String NODE_HEALTH_SCRIPT_TIMED_OUT_MSG = "Node health script timed out";
-  public NodeHealthScriptRunner() {
+  public NodeHealthScriptRunner(String scriptName, long chkInterval, long timeout,
+      String[] scriptArgs) {
-    this.healthReport = "";    
+    this.healthReport = "";
+    this.nodeHealthScript = scriptName;
+    this.intervalTime = chkInterval;
+    this.scriptTimeout = timeout;
+    this.timer = new NodeHealthMonitorExecutor(scriptArgs);
-    this.conf = conf;
-    this.nodeHealthScript = 
-        conf.get(YarnConfiguration.NM_HEALTH_CHECK_SCRIPT_PATH);
-    this.intervalTime = conf.getLong(YarnConfiguration.NM_HEALTH_CHECK_INTERVAL_MS,
-        YarnConfiguration.DEFAULT_NM_HEALTH_CHECK_INTERVAL_MS);
-    this.scriptTimeout = conf.getLong(
-        YarnConfiguration.NM_HEALTH_CHECK_SCRIPT_TIMEOUT_MS,
-        YarnConfiguration.DEFAULT_NM_HEALTH_CHECK_SCRIPT_TIMEOUT_MS);
-    String[] args = conf.getStrings(YarnConfiguration.NM_HEALTH_CHECK_SCRIPT_OPTS,
-        new String[] {});
-    timer = new NodeHealthMonitorExecutor(args);
-    if (!shouldRun(conf)) {
+    if (!shouldRun(nodeHealthScript)) {
-    if (!shouldRun(conf)) {
+    if (!shouldRun(nodeHealthScript)) {
-   * @param conf
-  public static boolean shouldRun(Configuration conf) {
-    String nodeHealthScript = 
-      conf.get(YarnConfiguration.NM_HEALTH_CHECK_SCRIPT_PATH);
-    if (nodeHealthScript == null || nodeHealthScript.trim().isEmpty()) {
+  public static boolean shouldRun(String healthScript) {
+    if (healthScript == null || healthScript.trim().isEmpty()) {
-    File f = new File(nodeHealthScript);
+    File f = new File(healthScript);
+		LOG.info("health status being set as " + output);
+	LOG.info("health status being set as " + output);
-  TimerTask getTimerTask() {
+  public TimerTask getTimerTask() {
