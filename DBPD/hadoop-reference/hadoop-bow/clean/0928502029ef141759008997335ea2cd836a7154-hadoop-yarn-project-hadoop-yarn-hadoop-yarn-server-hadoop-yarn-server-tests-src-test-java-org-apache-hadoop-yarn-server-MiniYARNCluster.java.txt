YARN-530. Defined Service model strictly, implemented AbstractService for robust subclassing and migrated yarn-common services. Contributed by Steve Loughran.
YARN-117. Migrated rest of YARN to the new service model. Contributed by Steve Louhran.
MAPREDUCE-5298. Moved MapReduce services to YARN-530 stricter lifecycle. Contributed by Steve Loughran.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492718 13f79535-47bb-0310-9956-ffa450edef68

-      throw new YarnRuntimeException("could not cleanup test dir", e);
+      throw new YarnRuntimeException("could not cleanup test dir: "+ e, e);
-  public void init(Configuration conf) {
-    super.init(conf instanceof YarnConfiguration ? conf
-        : new YarnConfiguration(conf));
+  public void serviceInit(Configuration conf) throws Exception {
+    super.serviceInit(conf instanceof YarnConfiguration ? conf
+                                                        : new YarnConfiguration(
+                                                          conf));
-    public synchronized void start() {
+    public synchronized void serviceStart() throws Exception {
+          String hostname = MiniYARNCluster.getHostname();
-              MiniYARNCluster.getHostname() + ":0");
+              hostname + ":0");
-              MiniYARNCluster.getHostname() + ":0");
+              hostname + ":0");
-              MiniYARNCluster.getHostname() + ":0");
+              hostname + ":0");
-              MiniYARNCluster.getHostname() + ":0");
+              hostname + ":0");
-              MiniYARNCluster.getHostname() + ":0");
+              hostname + ":0");
-        super.start();
+        super.serviceStart();
-    public synchronized void stop() {
+    public synchronized void serviceStop() throws Exception {
-      super.stop();
+      super.serviceStop();
-    public synchronized void init(Configuration conf) {                          
-      Configuration config = new YarnConfiguration(conf);                            
-      super.init(config);                                                        
-    }                                                                            
+    public synchronized void serviceInit(Configuration conf) throws Exception {
+      Configuration config = new YarnConfiguration(conf);
+      super.serviceInit(config);
+    }
-    public synchronized void start() {
+    public synchronized void serviceStart() throws Exception {
-        super.start();
+        super.serviceStart();
-    public synchronized void stop() {
+    public synchronized void serviceStop() throws Exception {
-      super.stop();
+      super.serviceStop();
