MAPREDUCE-7192. JobHistoryServer attempts page support jump to containers log page in NM when logAggregation is disable. Contributed by Jiandan Yang.

+import org.apache.hadoop.conf.Configuration;
+import org.apache.hadoop.yarn.conf.YarnConfiguration;
+    final Configuration conf;
-    AttemptsBlock(App ctx) {
+    AttemptsBlock(App ctx, Configuration conf) {
+      this.conf = conf;
-        .append(nodeRackName + "/" + nodeHttpAddr + "</a>\",\"")
+        .append(nodeRackName + "/" + nodeHttpAddr + "</a>\",\"");
-        .append("<a class='logslink' href='").append(url("logs", nodeIdString
-          , containerIdString, taid, app.getJob().getUserName()))
-          .append("'>logs</a>\",\"")
+         String logsUrl = url("logs", nodeIdString, containerIdString, taid,
+             app.getJob().getUserName());
+         if (!conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,
+             YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {
+           logsUrl =
+               url(MRWebAppUtil.getYARNWebappScheme(), nodeHttpAddr, "node",
+                   "containerlogs", containerIdString,
+                   app.getJob().getUserName());
+         }
+         attemptsTableData.append("<a class='logslink' href='").append(logsUrl)
+             .append("'>logs</a>\",\"");
-          .append(attemptStartTime).append("\",\"");
+        attemptsTableData.append(attemptStartTime).append("\",\"");
