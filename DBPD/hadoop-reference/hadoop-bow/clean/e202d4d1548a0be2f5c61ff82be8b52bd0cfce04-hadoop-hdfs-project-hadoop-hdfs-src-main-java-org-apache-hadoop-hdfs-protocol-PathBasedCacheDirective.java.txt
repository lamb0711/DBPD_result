HDFS-5213. Separate PathBasedCacheEntry and PathBasedCacheDirectiveWithId. Contributed by Colin Patrick McCabe.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1524561 13f79535-47bb-0310-9956-ffa450edef68

-import com.google.common.collect.ComparisonChain;
+import org.apache.commons.lang.builder.EqualsBuilder;
+import org.apache.hadoop.classification.InterfaceAudience;
+import org.apache.hadoop.classification.InterfaceStability;
-public class PathBasedCacheDirective implements Comparable<PathBasedCacheDirective> {
+@InterfaceStability.Evolving
+@InterfaceAudience.Public
+public class PathBasedCacheDirective {
-  public int compareTo(PathBasedCacheDirective rhs) {
-    return ComparisonChain.start().
-        compare(pool, rhs.getPool()).
-        compare(path, rhs.getPath()).
-        result();
+  public boolean equals(Object o) {
+    if (o == null) {
+      return false;
+    }
+    if (getClass() != o.getClass()) {
+      return false;
+    }
+    PathBasedCacheDirective other = (PathBasedCacheDirective)o;
+    return new EqualsBuilder().append(getPath(), other.getPath()).
+        append(getPool(), other.getPool()).
+        isEquals();
-    return new HashCodeBuilder().append(path).append(pool).hashCode();
-  }
-
-  @Override
-  public boolean equals(Object o) {
-    try {
-      PathBasedCacheDirective other = (PathBasedCacheDirective)o;
-      return other.compareTo(this) == 0;
-    } catch (ClassCastException e) {
-      return false;
-    }
+    return new HashCodeBuilder().append(getPath()).
+        append(getPool()).
+        hashCode();
