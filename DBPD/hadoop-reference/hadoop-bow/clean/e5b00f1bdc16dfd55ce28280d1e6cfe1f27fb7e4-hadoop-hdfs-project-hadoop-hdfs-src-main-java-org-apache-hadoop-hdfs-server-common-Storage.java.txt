HDFS-2988. Improve error message when storage directory lock fails. Contributed by Miomir Boljanovic. (harsh)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1358683 13f79535-47bb-0310-9956-ffa450edef68

+import java.lang.management.ManagementFactory;
+      String jvmName = ManagementFactory.getRuntimeMXBean().getName();
+        file.write(jvmName.getBytes());
+        LOG.info("Lock on " + lockF + " acquired by nodename " + jvmName);
+        LOG.error("It appears that another namenode " + file.readLine() 
+            + " has already locked the storage directory");
-        LOG.error("Cannot create lock on " + lockF, e);
+        LOG.error("Failed to acquire lock on " + lockF + ". If this storage directory is mounted via NFS, " 
+            + "ensure that the appropriate nfs lock services are running.", e);
