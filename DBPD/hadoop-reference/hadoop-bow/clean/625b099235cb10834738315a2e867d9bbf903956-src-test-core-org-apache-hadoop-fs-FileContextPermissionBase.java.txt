HADOOP-7171. Support UGI in FileContext API. Contributed by jitendra.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1092832 13f79535-47bb-0310-9956-ffa450edef68

+import java.security.PrivilegedExceptionAction;
+import org.apache.hadoop.security.UserGroupInformation;
+import static org.junit.Assert.assertEquals;
+  
+  @Test
+  public void testUgi() throws IOException, InterruptedException {
+    
+    UserGroupInformation otherUser = UserGroupInformation
+        .createRemoteUser("otherUser");
+    FileContext newFc = otherUser.doAs(new PrivilegedExceptionAction<FileContext>() {
+
+      public FileContext run() throws Exception {
+        FileContext newFc = FileContext.getFileContext();
+        return newFc;
+      }
+      
+    });
+    assertEquals("otherUser",newFc.getUgi().getUserName());
+  }
