HDDS-733. Create container if not exist, as part of chunk write.
Contributed by Lokesh Jain.

-import org.apache.hadoop.hdds.scm.container.ContainerInfo;
-import org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos.ObjectStageChangeRequestProto;
-              .setShouldCreateContainer(false)
-        checkKeyLocationInfo(subKeyInfo);
+        addKeyLocationInfo(subKeyInfo);
-  private void checkKeyLocationInfo(OmKeyLocationInfo subKeyInfo)
+  private void addKeyLocationInfo(OmKeyLocationInfo subKeyInfo)
-    ContainerInfo container = containerWithPipeline.getContainerInfo();
-
-    // create container if needed
-    if (subKeyInfo.getShouldCreateContainer()) {
-      try {
-        ContainerProtocolCalls.createContainer(xceiverClient,
-            container.getContainerID(), requestID);
-        scmClient.notifyObjectStageChange(
-            ObjectStageChangeRequestProto.Type.container,
-            subKeyInfo.getContainerID(),
-            ObjectStageChangeRequestProto.Op.create,
-            ObjectStageChangeRequestProto.Stage.complete);
-      } catch (StorageContainerException ex) {
-        if (ex.getResult().equals(Result.CONTAINER_EXISTS)) {
-          //container already exist, this should never happen
-          LOG.debug("Container {} already exists.",
-              container.getContainerID());
-        } else {
-          LOG.error("Container creation failed for {}.",
-              container.getContainerID(), ex);
-          throw ex;
-        }
-      }
-    }
-    checkKeyLocationInfo(subKeyInfo);
+    addKeyLocationInfo(subKeyInfo);
