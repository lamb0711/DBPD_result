HDDS-1285. Implement actions need to be taken after chill mode exit wait time. (#612)



+import org.apache.hadoop.hdds.scm.pipeline.Pipeline;
+import org.apache.hadoop.hdds.scm.pipeline.PipelineManager;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+import java.io.IOException;
+import java.util.List;
+  private static final Logger LOG =
+      LoggerFactory.getLogger(ChillModeHandler.class);
+
+  private final PipelineManager scmPipelineManager;
-      ReplicationManager replicationManager) {
+      ReplicationManager replicationManager, PipelineManager pipelineManager) {
+    Objects.requireNonNull(pipelineManager, "PipelineManager object cannot " +
+        "be" + "null");
+    this.scmPipelineManager = pipelineManager;
+
+
+        cleanupPipelines();
+  private void cleanupPipelines() {
+    List<Pipeline> pipelineList = scmPipelineManager.getPipelines();
+    pipelineList.forEach((pipeline) -> {
+      try {
+        if (pipeline.getPipelineState() == Pipeline.PipelineState.ALLOCATED) {
+          scmPipelineManager.finalizeAndDestroyPipeline(pipeline, false);
+        }
+      } catch (IOException ex) {
+        LOG.error("Finalize and destroy pipeline failed for pipeline "
+            + pipeline.toString(), ex);
+      }
+    });
+  }
+
