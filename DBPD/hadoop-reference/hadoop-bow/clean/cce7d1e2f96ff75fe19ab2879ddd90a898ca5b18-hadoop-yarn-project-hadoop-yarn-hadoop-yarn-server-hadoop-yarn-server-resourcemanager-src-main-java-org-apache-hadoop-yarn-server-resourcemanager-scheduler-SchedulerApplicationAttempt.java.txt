Merge remote-tracking branch 'origin/trunk' into MR-2841

Conflicts:
	hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/MapTask.java

-import com.google.common.base.Preconditions;
+import java.util.HashSet;
+import java.util.Set;
-import org.apache.hadoop.yarn.exceptions.YarnRuntimeException;
+import com.google.common.base.Preconditions;
+  // This pendingRelease is used in work-preserving recovery scenario to keep
+  // track of the AM's outstanding release requests. RM on recovery could
+  // receive the release request form AM before it receives the container status
+  // from NM for recovery. In this case, the to-be-recovered containers reported
+  // by NM should not be recovered.
+  private Set<ContainerId> pendingRelease = null;
+
-    
+    this.pendingRelease = new HashSet<ContainerId>();
+  public Set<ContainerId> getPendingRelease() {
+    return this.pendingRelease;
+  }
+
