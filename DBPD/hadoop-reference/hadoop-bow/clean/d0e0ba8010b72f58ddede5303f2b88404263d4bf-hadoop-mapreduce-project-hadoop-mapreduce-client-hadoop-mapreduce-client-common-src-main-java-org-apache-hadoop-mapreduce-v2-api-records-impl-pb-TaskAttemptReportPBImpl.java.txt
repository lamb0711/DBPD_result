MAPREDUCE-6394. Speed up Task processing loop in HsTasksBlock#render(). Contributed by Ray Chiang

-
+import org.apache.hadoop.mapreduce.TypeConverter;
-  
+
+  private org.apache.hadoop.mapreduce.Counters rawCounters = null;
-  
-  
+
+    convertRawCountersToCounters();
-    
-  
+
+
+    convertRawCountersToCounters();
-    if (counters == null) 
+    if (counters == null) {
+    }
+    this.rawCounters = null;
+
+  @Override
+  public org.apache.hadoop.mapreduce.Counters
+        getRawCounters() {
+    return this.rawCounters;
+  }
+
+  @Override
+  public void setRawCounters(org.apache.hadoop.mapreduce.Counters rCounters) {
+    setCounters(null);
+    this.rawCounters = rCounters;
+  }
+
+  private void convertRawCountersToCounters() {
+    if (this.counters == null && this.rawCounters != null) {
+      this.counters = TypeConverter.toYarn(rawCounters);
+      this.rawCounters = null;
+    }
+  }
+
