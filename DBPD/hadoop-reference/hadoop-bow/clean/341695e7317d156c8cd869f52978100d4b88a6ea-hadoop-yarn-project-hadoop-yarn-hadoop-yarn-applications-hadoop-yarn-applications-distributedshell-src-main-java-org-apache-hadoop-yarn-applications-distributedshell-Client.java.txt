Merge trunk into branch


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/MR-2841@1612742 13f79535-47bb-0310-9956-ffa450edef68

-    // Set up the container launch context for the application master
-    ContainerLaunchContext amContainer = Records.newRecord(ContainerLaunchContext.class);
-
-    // Set local resource info into app master container launch context
-    amContainer.setLocalResources(localResources);
-    amContainer.setEnvironment(env);
-
-    amContainer.setCommands(commands);
+
+    // Set up the container launch context for the application master
+    ContainerLaunchContext amContainer = ContainerLaunchContext.newInstance(
+      localResources, env, commands, null, null, null);
-    Resource capability = Records.newRecord(Resource.class);
-    capability.setMemory(amMemory);
-    capability.setVirtualCores(amVCores);
+    Resource capability = Resource.newInstance(amMemory, amVCores);
+      // Note: Credentials class is marked as LimitedPrivate for HDFS and MapReduce
-    Priority pri = Records.newRecord(Priority.class);
-    pri.setPriority(amPriority);
+    Priority pri = Priority.newInstance(amPriority);
