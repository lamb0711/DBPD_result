Merge trunk into HDFS-1623 branch

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1204794 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.hdfs.protocol.BlockLocalPathInfo;
-import org.apache.hadoop.hdfs.protocol.HdfsConstants;
-                                    "dfs.datanode.simulateddatastorage";
+      DFSConfigKeys.DFS_DATANODE_SIMULATEDDATASTORAGE_KEY;
-                            "dfs.datanode.simulateddatastorage.capacity";
+      DFSConfigKeys.DFS_DATANODE_SIMULATEDDATASTORAGE_CAPACITY_KEY;
-    synchronized SimulatedInputStream getIStream() throws IOException {
+    synchronized SimulatedInputStream getIStream() {
-  public SimulatedFSDataset(Configuration conf) throws IOException {
+  public SimulatedFSDataset(Configuration conf) {
+
+  @Override
+  public BlockLocalPathInfo getBlockLocalPathInfo(ExtendedBlock b)
+      throws IOException {
+    throw new IOException("getBlockLocalPathInfo not supported.");
+  }
