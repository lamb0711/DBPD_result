HADOOP-9652.  RawLocalFs#getFileLinkStatus does not fill in the link owner and mode.  (Andrew Wang via Colin Patrick McCabe)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1507506 13f79535-47bb-0310-9956-ffa450edef68

+      if (!Shell.WINDOWS) {
+        return new FileStatus[] { getFileStatus(f) };
+      }
+    if (!Shell.WINDOWS) {
+      return getFileLinkStatusInternal(f, true);
+    }
+
+  @Deprecated
+  @Deprecated
-    FileStatus fi = getFileLinkStatusInternal(f);
+    FileStatus fi;
+    if (!Shell.WINDOWS) {
+      fi = getFileLinkStatusInternal(f, false);
+    } else {
+      fi = getFileLinkStatusInternal(f);
+    }
+  /**
+   * Deprecated. Remains for windows support. Should be removed in favor of
+   * {@link #getFileLinkStatusInternal(Path, boolean)} when {@link Stat} gains
+   * support for windows.
+   */
+  @Deprecated
+  private FileStatus getFileLinkStatusInternal(final Path f,
+      boolean dereference) throws IOException {
+    checkPath(f);
+    Stat stat = new Stat(f, getDefaultBlockSize(f), dereference, this);
+    FileStatus status = stat.getFileStatus();
+    return status;
+  }
+
-    FileStatus fi = getFileLinkStatusInternal(f);
+    FileStatus fi = getFileLinkStatusInternal(f, false);
