HDFS-10598. DiskBalancer does not execute multi-steps plan. Contributed by Lei (Eddy) Xu.

-
-        for (Map.Entry<VolumePair, DiskBalancerWorkItem> entry :
-            workMap.entrySet()) {
-          blockMover.copyBlocks(entry.getKey(), entry.getValue());
+        try {
+          for (Map.Entry<VolumePair, DiskBalancerWorkItem> entry :
+              workMap.entrySet()) {
+            blockMover.copyBlocks(entry.getKey(), entry.getValue());
+          }
+        } finally {
+          blockMover.setExitFlag();
-              this.setExitFlag();
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;
-              continue;
+              break;
-              this.setExitFlag();
-              continue;
+              break;
