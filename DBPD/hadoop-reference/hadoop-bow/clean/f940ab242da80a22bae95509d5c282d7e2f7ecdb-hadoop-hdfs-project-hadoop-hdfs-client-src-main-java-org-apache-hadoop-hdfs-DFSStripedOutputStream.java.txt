HDFS-7663. Erasure Coding: Append on striped file. Contributed by Ayush Saxena.

+  private ExtendedBlock prevBlockGroup4Append;
+  /** Construct a new output stream for appending to a file. */
+  DFSStripedOutputStream(DFSClient dfsClient, String src,
+      EnumSet<CreateFlag> flags, Progressable progress, LocatedBlock lastBlock,
+      HdfsFileStatus stat, DataChecksum checksum, String[] favoredNodes)
+      throws IOException {
+    this(dfsClient, src, stat, flags, progress, checksum, favoredNodes);
+    initialFileSize = stat.getLen(); // length of file when opened
+    prevBlockGroup4Append = lastBlock != null ? lastBlock.getBlock() : null;
+  }
+
+    ExtendedBlock prevBlockGroup = currentBlockGroup;
+    if (prevBlockGroup4Append != null) {
+      prevBlockGroup = prevBlockGroup4Append;
+      prevBlockGroup4Append = null;
+    }
-        + currentBlockGroup);
+        + prevBlockGroup);
-        currentBlockGroup, fileId, favoredNodes, getAddBlockFlags());
+         prevBlockGroup, fileId, favoredNodes, getAddBlockFlags());
