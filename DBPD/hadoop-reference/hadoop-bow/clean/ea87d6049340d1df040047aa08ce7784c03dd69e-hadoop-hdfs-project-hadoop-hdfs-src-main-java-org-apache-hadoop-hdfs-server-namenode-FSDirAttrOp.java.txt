HDFS-13377. The owner of folder can set quota for his sub folder. Contributed by Yang Yun.

-      long nsQuota, long ssQuota, StorageType type) throws IOException {
+      long nsQuota, long ssQuota, StorageType type, boolean allowOwner)
+      throws IOException {
+      if (fsd.isPermissionEnabled() && !pc.isSuperUser() && allowOwner) {
+        INodeDirectory parentDir= iip.getLastINode().getParent();
+        if (parentDir == null ||
+            !parentDir.getUserName().equals(pc.getUser())) {
+          throw new AccessControlException(
+              "Access denied for user " + pc.getUser() +
+              ". Superuser or owner of parent folder privilege is required");
+        }
+      }
