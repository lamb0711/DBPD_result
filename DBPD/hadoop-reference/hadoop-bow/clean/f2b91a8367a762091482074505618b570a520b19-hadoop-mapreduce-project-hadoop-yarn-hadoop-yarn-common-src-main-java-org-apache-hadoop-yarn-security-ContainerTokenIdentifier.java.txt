 MAPREDUCE-2807. Fix AM restart and client redirection. Contributed by Sharad Agarwal.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161408 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.api.records.ApplicationAttemptId;
+    out.writeInt(this.containerId.getAppAttemptId().getAttemptId());
+    this.containerId.setAppAttemptId(RecordFactoryProvider.getRecordFactory(null).newRecordInstance(ApplicationAttemptId.class));
+    this.containerId.getAppAttemptId().setApplicationId(this.containerId.getAppId());
+    this.containerId.getAppAttemptId().setAttemptId(in.readInt());
