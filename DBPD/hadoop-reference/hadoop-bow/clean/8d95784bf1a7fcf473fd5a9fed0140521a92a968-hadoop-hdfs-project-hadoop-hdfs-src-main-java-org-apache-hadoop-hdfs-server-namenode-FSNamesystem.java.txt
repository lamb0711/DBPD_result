HDFS-4557. Fix FSDirectory#delete when INode#cleanSubtree returns 0.  Contributed by Jing Zhao


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1454138 13f79535-47bb-0310-9956-ffa450edef68

-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-          "allowSnapshot", path, null, null);
+      logAuditEvent(true, "allowSnapshot", path, null, null);
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-          "disallowSnapshot", path, null, null);
+      logAuditEvent(true, "disallowSnapshot", path, null, null);
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-          "createSnapshot", snapshotRoot, rootPath.toString(), null);
+      logAuditEvent(true, "createSnapshot", snapshotRoot, rootPath.toString(),
+          null);
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-          "renameSnapshot", oldSnapshotRoot.toString(),
+      logAuditEvent(true, "renameSnapshot", oldSnapshotRoot.toString(),
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-            "listSnapshottableDirectory", null, null, null);
+      logAuditEvent(true, "listSnapshottableDirectory", null, null, null);
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-            "computeSnapshotDiff", null, null, null);
+      logAuditEvent(true, "computeSnapshotDiff", null, null, null);
-      logAuditEvent(UserGroupInformation.getCurrentUser(), getRemoteIp(),
-          "deleteSnapshot", rootPath.toString(), null, null);
+      logAuditEvent(true, "deleteSnapshot", rootPath.toString(), null, null);
