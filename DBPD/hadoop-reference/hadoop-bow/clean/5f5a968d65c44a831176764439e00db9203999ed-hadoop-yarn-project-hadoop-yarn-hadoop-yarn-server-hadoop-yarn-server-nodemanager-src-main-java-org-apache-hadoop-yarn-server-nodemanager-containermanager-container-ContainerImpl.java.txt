YARN-3867. ContainerImpl changes to support container resizing. Contributed by Meng Ding

+import org.apache.hadoop.yarn.util.resource.Resources;
-  private final Resource resource;
+  private volatile Resource resource;
-        new KilledExternallyTransition()) 
+        new KilledExternallyTransition())
-        getCurrentState(), diagnostics.toString(), exitCode);
+        getCurrentState(), diagnostics.toString(), exitCode, getResource());
-    return this.resource;
+    return Resources.clone(this.resource);
+  }
+
+  @Override
+  public void setResource(Resource targetResource) {
+    Resource currentResource = getResource();
+    this.resource = Resources.clone(targetResource);
+    this.metrics.changeContainer(currentResource, targetResource);
