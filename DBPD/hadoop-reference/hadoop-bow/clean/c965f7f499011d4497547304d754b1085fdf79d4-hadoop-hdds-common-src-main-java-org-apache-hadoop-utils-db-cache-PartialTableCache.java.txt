HDDS-1551. Implement Bucket Write Requests to use Cache and DoubleBuffer. (#850)



-      CacheValue cacheValue = cache.get(cachekey);
-      if (cacheValue.getEpoch() <= epoch) {
-        cache.remove(cachekey);
-        iterator.remove();
-      } else {
-        // If currentEntry epoch is greater than epoch, we have deleted all
-        // entries less than specified epoch. So, we can break.
+      CacheValue cacheValue = cache.computeIfPresent(cachekey, ((k, v) -> {
+        if (v.getEpoch() <= epoch) {
+          iterator.remove();
+          return null;
+        }
+        return v;
+      }));
+      // If currentEntry epoch is greater than epoch, we have deleted all
+      // entries less than specified epoch. So, we can break.
+      if (cacheValue != null && cacheValue.getEpoch() >= epoch) {
