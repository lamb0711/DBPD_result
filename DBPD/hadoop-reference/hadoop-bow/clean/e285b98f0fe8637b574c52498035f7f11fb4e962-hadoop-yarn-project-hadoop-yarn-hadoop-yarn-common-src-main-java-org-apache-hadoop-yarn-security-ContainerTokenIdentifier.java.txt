YARN-2152. Added missing information into ContainerTokenIdentifier so that NodeManagers can report the same to RM when RM restarts. Contributed Jian He.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1605205 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.hadoop.yarn.api.records.Priority;
+  private Priority priority;
+  private long creationTime;
-  public ContainerTokenIdentifier(ContainerId containerID, String hostName,
-      String appSubmitter, Resource r, long expiryTimeStamp, int masterKeyId,
-      long rmIdentifier) {
+  public ContainerTokenIdentifier(ContainerId containerID,
+      String hostName, String appSubmitter, Resource r, long expiryTimeStamp,
+      int masterKeyId, long rmIdentifier, Priority priority, long creationTime) {
+    this.priority = priority;
+    this.creationTime = creationTime;
+  public Priority getPriority() {
+    return this.priority;
+  }
+
+  public long getCreationTime() {
+    return this.creationTime;
+  }
+    out.writeInt(this.priority.getPriority());
+    out.writeLong(this.creationTime);
+    this.priority = Priority.newInstance(in.readInt());
+    this.creationTime = in.readLong();
