HDFS-2861. checkpointing should verify that the dfs.http.address has been configured to a non-loopback for peer NN. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1239886 13f79535-47bb-0310-9956-ffa450edef68

-    // If we have more than one nameservice, need to enumerate them in the
-    // config.
-    if (federation) {      
-      List<String> allNsIds = Lists.newArrayList();
-      for (MiniDFSNNTopology.NSConf nameservice : nnTopology.getNameservices()) {
+    List<String> allNsIds = Lists.newArrayList();
+    for (MiniDFSNNTopology.NSConf nameservice : nnTopology.getNameservices()) {
+      if (nameservice.getId() != null) {
+    }
+    if (!allNsIds.isEmpty()) {
