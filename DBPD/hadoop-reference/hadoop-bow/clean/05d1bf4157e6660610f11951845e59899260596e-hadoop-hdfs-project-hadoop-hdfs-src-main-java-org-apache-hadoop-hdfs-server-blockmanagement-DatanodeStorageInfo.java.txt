HDFS-6830. Revert accidental checkin

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616884 13f79535-47bb-0310-9956-ffa450edef68

-    // First check whether the block belongs to a different storage
-    // on the same DN.
-    boolean replaced = false;
-    DatanodeStorageInfo otherStorage =
-        b.findStorageInfo(getDatanodeDescriptor());
-
-    if (otherStorage != null) {
-      if (otherStorage != this) {
-        // The block belongs to a different storage. Remove it first.
-        otherStorage.removeBlock(b);
-        replaced = true;
-      } else {
-        // The block is already associated with this storage.
-        return false;
-      }
-    }
-
+    if(!b.addStorage(this))
+      return false;
-    b.addStorage(this);
-    return !replaced;
+    return true;
