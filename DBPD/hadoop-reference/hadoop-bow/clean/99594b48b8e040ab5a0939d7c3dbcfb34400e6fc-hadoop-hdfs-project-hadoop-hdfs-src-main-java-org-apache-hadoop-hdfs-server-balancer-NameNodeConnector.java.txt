HDFS-13075. [SPS]: Provide External Context implementation. Contributed by Uma Maheswara Rao G.

-  
+  private static boolean checkOtherInstanceRunning = true;
+
+  @VisibleForTesting
+  public static void checkOtherInstanceRunning(boolean toCheck) {
+    NameNodeConnector.checkOtherInstanceRunning = toCheck;
+  }
+
-  private final OutputStream out;
+  private OutputStream out;
-    out = checkAndMarkRunning();
-    if (out == null) {
-      // Exit if there is another one running.
-      throw new IOException("Another " + name + " is running.");
+    if (checkOtherInstanceRunning) {
+      out = checkAndMarkRunning();
+      if (out == null) {
+        // Exit if there is another one running.
+        throw new IOException("Another " + name + " is running.");
+      }
-        fs.delete(idPath, true);
+        if (checkOtherInstanceRunning) {
+          fs.delete(idPath, true);
+        }
+  public NamenodeProtocol getNNProtocolConnection() {
+    return this.namenode;
+  }
+
