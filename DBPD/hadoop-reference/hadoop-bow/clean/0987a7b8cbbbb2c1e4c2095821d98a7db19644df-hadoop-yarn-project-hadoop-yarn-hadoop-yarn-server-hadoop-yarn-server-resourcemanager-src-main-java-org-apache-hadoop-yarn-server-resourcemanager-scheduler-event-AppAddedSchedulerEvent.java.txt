YARN-7419. CapacityScheduler: Allow auto leaf queue creation after queue mapping. (Suma Shivaprasad via wangda)

Change-Id: Ia1704bb8cb5070e5b180b5a85787d7b9ca57ebc6

- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
+ * <p>
+ * http://www.apache.org/licenses/LICENSE-2.0
+ * <p>
+import org.apache.hadoop.yarn.server.resourcemanager.placement
+    .ApplicationPlacementContext;
+  private final ApplicationPlacementContext placementContext;
-    this(applicationId, queue, user, false, null, Priority.newInstance(0));
+    this(applicationId, queue, user, false, null, Priority.newInstance(0),
+        null);
+  }
+
+  public AppAddedSchedulerEvent(ApplicationId applicationId, String queue,
+      String user, ApplicationPlacementContext placementContext) {
+    this(applicationId, queue, user, false, null, Priority.newInstance(0),
+        placementContext);
-    this(applicationId, queue, user, false, reservationID, appPriority);
+    this(applicationId, queue, user, false, reservationID, appPriority, null);
-        appPriority);
+        appPriority, null);
+  }
+
+  public AppAddedSchedulerEvent(String user,
+      ApplicationSubmissionContext submissionContext, boolean isAppRecovering,
+      Priority appPriority, ApplicationPlacementContext placementContext) {
+    this(submissionContext.getApplicationId(), submissionContext.getQueue(),
+        user, isAppRecovering, submissionContext.getReservationID(),
+        appPriority, placementContext);
-      Priority appPriority) {
+      Priority appPriority, ApplicationPlacementContext placementContext) {
+    this.placementContext = placementContext;
+
+  public ApplicationPlacementContext getPlacementContext() {
+    return placementContext;
+  }
