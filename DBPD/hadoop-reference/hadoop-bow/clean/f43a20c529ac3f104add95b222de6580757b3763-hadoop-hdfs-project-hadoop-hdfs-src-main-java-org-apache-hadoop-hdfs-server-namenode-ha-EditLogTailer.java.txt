HDFS-7097. Allow block reports to be processed during checkpointing on standby name node. (kihwal via wang)

+          // It is already under the full name system lock and the checkpointer
+          // thread is already stopped. No need to acqure any other lock.
-          doTailEdits();
+          // Prevent reading of name system while being modified. The full
+          // name system lock will be acquired to further block even the block
+          // state updates.
+          namesystem.cpLockInterruptibly();
+          try {
+            doTailEdits();
+          } finally {
+            namesystem.cpUnlock();
+          }
