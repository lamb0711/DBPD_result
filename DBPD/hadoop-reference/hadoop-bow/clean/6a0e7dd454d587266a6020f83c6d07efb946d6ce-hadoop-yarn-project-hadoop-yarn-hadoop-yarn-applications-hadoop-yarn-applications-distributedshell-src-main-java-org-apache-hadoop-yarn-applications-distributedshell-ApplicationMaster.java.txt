YARN-9482. DistributedShell job with localization fails in unsecure cluster. Contributed by Prabhu Joseph.

-    Path dst = null;
-      FileSystem fs = FileSystem.get(conf);
-      dst = new Path(fs.getHomeDirectory(), getRelativePath(appName,
-          appId.toString(), ""));
-      fs.delete(dst, true);
-    } catch(IOException e) {
-      LOG.warn("Failed to remove application staging directory {}", dst);
+      appSubmitterUgi.doAs(new PrivilegedExceptionAction<Void>() {
+        @Override
+        public Void run() throws IOException {
+          FileSystem fs = FileSystem.get(conf);
+          Path dst = new Path(getAppSubmitterHomeDir(),
+              getRelativePath(appName, appId.toString(), ""));
+          fs.delete(dst, true);
+          return null;
+        }
+      });
+    } catch(Exception e) {
+      LOG.warn("Failed to remove application staging directory", e);
+  private Path getAppSubmitterHomeDir() {
+    return new Path("/user/" +
+        System.getenv(ApplicationConstants.Environment.USER.name()));
+  }
+
-                new Path(fs.getHomeDirectory(), relativePath);
+                new Path(getAppSubmitterHomeDir(), relativePath);
