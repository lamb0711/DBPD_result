YARN-5630. NM fails to start after downgrade from 2.8 to 2.7. Contributed by Jason Lowe

+    String idStr = containerId.toString();
-      LOG.debug("storeContainer: containerId= " + containerId
+      LOG.debug("storeContainer: containerId= " + idStr
-    String keyRequest = CONTAINERS_KEY_PREFIX + containerId.toString()
+    String keyRequest = CONTAINERS_KEY_PREFIX + idStr
-    String keyVersion = CONTAINERS_KEY_PREFIX + containerId.toString()
-        + CONTAINER_VERSION_KEY_SUFFIX;
+    String keyVersion = getContainerVersionKey(idStr);
-        batch.put(bytes(keyVersion), bytes(Integer.toString(containerVersion)));
+        if (containerVersion != 0) {
+          batch.put(bytes(keyVersion),
+              bytes(Integer.toString(containerVersion)));
+        }
+  @VisibleForTesting
+  String getContainerVersionKey(String containerId) {
+    return CONTAINERS_KEY_PREFIX + containerId + CONTAINER_VERSION_KEY_SUFFIX;
+  }
+
+  @VisibleForTesting
+  DB getDB() {
+    return db;
+  }
+
