HDFS-12720. Ozone: Ratis options are not passed from KSM Client protobuf helper correctly. Contributed by Mukul Kumar Singh.

-import io.netty.channel.ChannelFuture;
+import io.netty.channel.Channel;
-import java.util.concurrent.TimeUnit;
-  private ChannelFuture channelFuture;
+  private Channel channel;
-    if (channelFuture != null
-        && channelFuture.channel() != null
-        && channelFuture.channel().isActive()) {
+    if (channel != null && channel.isActive()) {
-    channelFuture = b.connect(leader.getHostName(), port).sync();
+    channel = b.connect(leader.getHostName(), port).sync().channel();
-    return channelFuture.channel().isActive();
+    return channel.isActive();
-      group.shutdownGracefully(0, 0, TimeUnit.SECONDS);
-    }
-
-    if (channelFuture != null) {
-      channelFuture.channel().close();
+      group.shutdownGracefully().awaitUninterruptibly();
-      if ((channelFuture == null) || (!channelFuture.channel().isActive())) {
+      if ((channel == null) || (!channel.isActive())) {
-          channelFuture.channel().pipeline().get(XceiverClientHandler.class);
+          channel.pipeline().get(XceiverClientHandler.class);
-    if ((channelFuture == null) || (!channelFuture.channel().isActive())) {
+    if ((channel == null) || (!channel.isActive())) {
-        channelFuture.channel().pipeline().get(XceiverClientHandler.class);
+        channel.pipeline().get(XceiverClientHandler.class);
