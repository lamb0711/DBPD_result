Merge branch 'HDFS-12943' into trunk

+import org.apache.hadoop.ha.HAServiceProtocol;
+import org.apache.hadoop.hdfs.server.namenode.ha.ReadOnly;
+  @ReadOnly(atimeAffected = true, isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly
+  @ReadOnly
+  @ReadOnly
+  @ReadOnly
+  @ReadOnly
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+   *
+   * Note: due to HDFS-6763, standby/observer doesn't keep up-to-date info
+   * about quota usage, and thus even though this is ReadOnly, it can only be
+   * directed to the active namenode.
+   *
+  @ReadOnly(activeOnly = true)
+  @ReadOnly(isCoordinated = true)
+  @ReadOnly(isCoordinated = true)
+   * Get HA service state of the server.
+   *
+   * @return server HA state
+   * @throws IOException
+   */
+  @Idempotent
+  @ReadOnly
+  HAServiceProtocol.HAServiceState getHAServiceState() throws IOException;
+
+  /**
+   * Called by client to wait until the server has reached the state id of the
+   * client. The client and server state id are given by client side and server
+   * side alignment context respectively. This can be a blocking call.
+   *
+   * @throws IOException
+   */
+  @Idempotent
+  @ReadOnly(isCoordinated = true)
+  void msync() throws IOException;
+
+  /**
