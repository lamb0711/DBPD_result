YARN-3087. Made the REST server of per-node aggregator work alone in NM daemon. Conntributed by Li Lu.

(cherry picked from commit 41a08ad404d4278fe598d6c222b2ae0e84bae0df)

-  private Map<String, Object> info = new HashMap<>();
+  private HashMap<String, Object> info = new HashMap<>();
-  private Map<Long, Object> timeSeries = new LinkedHashMap<>();
+  private HashMap<Long, Object> timeSeries = new LinkedHashMap<>();
+  // required by JAXB
+  @InterfaceAudience.Private
+  public HashMap<String, Object> getInfoJAXB() {
+    return info;
+  }
+
-    this.info = info;
+    if (info != null && !(info instanceof HashMap)) {
+      this.info = new HashMap<String, Object>(info);
+    } else {
+      this.info = (HashMap<String, Object>) info;
+    }
+  // required by JAXB
+  @InterfaceAudience.Private
+  public HashMap<Long, Object> getTimeSeriesJAXB() {
+    return timeSeries;
+  }
+
-    this.timeSeries = timeSeries;
+    if (timeSeries != null && !(timeSeries instanceof LinkedHashMap)) {
+      this.timeSeries = new LinkedHashMap<Long, Object>(timeSeries);
+    } else {
+      this.timeSeries = (LinkedHashMap<Long, Object>) timeSeries;
+    }
