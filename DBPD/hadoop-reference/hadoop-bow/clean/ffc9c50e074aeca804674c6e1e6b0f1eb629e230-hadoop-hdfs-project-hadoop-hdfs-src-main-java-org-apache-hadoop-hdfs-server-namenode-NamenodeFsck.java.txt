HDFS-14053. Provide ability for NN to re-replicate based on topology changes. Contributed by Hrishikesh Gadre.

+import java.util.LinkedList;
+  /**
+   * True if the user specified the -replicate option.
+   *
+   * When this option is in effect, we will initiate replication work to make
+   * mis-replicated blocks confirm the block placement policy.
+   */
+  private boolean doReplicate = false;
+
+      } else if (key.equals("replicate")) {
+        this.doReplicate = true;
+    List<BlockInfo> misReplicatedBlocks = new LinkedList<>();
+        if (doReplicate) {
+          misReplicatedBlocks.add(storedBlock);
+        }
+
+    if (doReplicate && !misReplicatedBlocks.isEmpty()) {
+      int processedBlocks = this.blockManager.processMisReplicatedBlocks(
+              misReplicatedBlocks);
+      if (processedBlocks < misReplicatedBlocks.size()) {
+        LOG.warn("Fsck: Block manager is able to process only " +
+                processedBlocks +
+                " mis-replicated blocks (Total count : " +
+                misReplicatedBlocks.size() +
+                " ) for path " + path);
+      }
+      res.numBlocksQueuedForReplication += processedBlocks;
+    }
+    long numBlocksQueuedForReplication = 0L;
+      res.append("\n Blocks queued for replication:\t").append(
+              numBlocksQueuedForReplication);
+      res.append("\n Blocks queued for replication:\t").append(
+              numBlocksQueuedForReplication);
