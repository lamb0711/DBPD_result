YARN-2613. Support retry in NMClient for rolling-upgrades. (Contributed by Jian He)

-import java.security.PrivilegedAction;
+import org.apache.hadoop.yarn.client.NMProxy;
-      ContainerManagementProtocol proxy = user
-          .doAs(new PrivilegedAction<ContainerManagementProtocol>() {
-
-            @Override
-            public ContainerManagementProtocol run() {
-              return (ContainerManagementProtocol) rpc.getProxy(
-                  ContainerManagementProtocol.class, cmAddr, conf);
-            }
-          });
-      return proxy;
+      return NMProxy.createNMProxy(conf, ContainerManagementProtocol.class,
+        user, rpc, cmAddr);
