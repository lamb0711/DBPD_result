HDFS-11641. Reduce cost of audit logging by using FileStatus instead of HdfsFileStatus. Contributed by Daryn Sharp.

-      String dst, HdfsFileStatus stat) throws IOException {
+      String dst, FileStatus stat) throws IOException {
-  private void logAuditEvent(boolean succeeded,
-      UserGroupInformation ugi, InetAddress addr, String cmd, String src,
-      String dst, HdfsFileStatus stat) {
+  private void logAuditEvent(boolean succeeded, String cmd, String src,
+      HdfsFileStatus stat) throws IOException {
+    if (!isAuditEnabled() || !isExternalInvocation()) {
+      return;
+    }
-      Path path = dst != null ? new Path(dst) : new Path(src);
+      Path path = new Path(src);
+    logAuditEvent(succeeded, cmd, src, null, status);
+  }
+
+  private void logAuditEvent(boolean succeeded,
+      UserGroupInformation ugi, InetAddress addr, String cmd, String src,
+      String dst, FileStatus status) {
-    HdfsFileStatus auditStat;
+    FileStatus auditStat;
-    HdfsFileStatus auditStat;
+    FileStatus auditStat;
-    HdfsFileStatus stat = null;
+    FileStatus stat = null;
-    HdfsFileStatus auditStat;
+    FileStatus auditStat;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat;
+    FileStatus auditStat;
-    HdfsFileStatus auditStat;
+    FileStatus auditStat;
-    logAuditEvent(true, "create", src, null, status);
+    logAuditEvent(true, "create", src, status);
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-      final HdfsFileStatus resultingStat;
+      final FileStatus resultingStat;
-    HdfsFileStatus resultingStat = null;
+    FileStatus resultingStat = null;
-      Entry<EncryptionZone, HdfsFileStatus> ezForPath = FSDirEncryptionZoneOp
+      Entry<EncryptionZone, FileStatus> ezForPath = FSDirEncryptionZoneOp
-    HdfsFileStatus resultingStat = null;
+    FileStatus resultingStat = null;
-    HdfsFileStatus resultingStat = null;
+    FileStatus resultingStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
-    HdfsFileStatus auditStat = null;
+    FileStatus auditStat = null;
