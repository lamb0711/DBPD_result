HDFS-14369. RBF: Fix trailing / for webhdfs. Contributed by Akira Ajisaka.

+import java.util.regex.Pattern;
-import org.apache.hadoop.fs.Path;
+  /** Pre-compiled regular expressions to detect duplicated slashes. */
+  private static final Pattern SLASHES = Pattern.compile("/+");
+
-   * @param path Path to normalize.
+   * @param str Path to normalize. The path doesn't have scheme or authority.
-  private static String normalizeFileSystemPath(final String path) {
-    Path normalizedPath = new Path(path);
-    return normalizedPath.toString();
+  public static String normalizeFileSystemPath(final String str) {
+    String path = SLASHES.matcher(str).replaceAll("/");
+    if (path.length() > 1 && path.endsWith("/")) {
+      path = path.substring(0, path.length()-1);
+    }
+    return path;
