HDFS-395.  DFS Scalability: Incremental block reports. Contributed by Tomasz Nykiel.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161992 13f79535-47bb-0310-9956-ffa450edef68

-    asyncDiskService = new FSDatasetAsyncDiskService(roots);
+    asyncDiskService = new FSDatasetAsyncDiskService(this, roots);
-      
+
-      asyncDiskService.deleteAsync(v, bpid, f, metaFile, dfsBytes,
-          invalidBlks[i].toString());
+      asyncDiskService.deleteAsync(v, f, metaFile, dfsBytes,
+          new ExtendedBlock(bpid, invalidBlks[i]));
+  
+  public void notifyNamenodeDeletedBlock(ExtendedBlock block){
+    datanode.notifyNamenodeDeletedBlock(block);
+  }
