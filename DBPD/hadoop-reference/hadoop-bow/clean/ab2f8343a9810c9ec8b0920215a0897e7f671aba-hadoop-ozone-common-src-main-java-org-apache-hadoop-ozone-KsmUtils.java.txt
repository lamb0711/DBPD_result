HDDS-206. Ozone shell command doesn't respect KSM port set in ozone-site.xml. Contributed by Shashikant Banerjee.

+import static org.apache.hadoop.ozone.ksm.KSMConfigKeys.OZONE_KSM_HTTP_ADDRESS_KEY;
+import static org.apache.hadoop.ozone.ksm.KSMConfigKeys.OZONE_KSM_HTTP_BIND_PORT_DEFAULT;
-    // If no port number is specified then we'll just try the defaultBindPort.
-    final Optional<Integer> port = getPortNumberFromConfigKeys(conf,
-        OZONE_KSM_ADDRESS_KEY);
-
-            port.or(OZONE_KSM_PORT_DEFAULT));
+            getKsmRpcPort(conf));
+    return NetUtils.createSocketAddr(
+        host.get() + ":" + getKsmRpcPort(conf));
+  }
+
+  public static int getKsmRpcPort(Configuration conf) {
-
-    return NetUtils.createSocketAddr(
-        host.get() + ":" + port.or(OZONE_KSM_PORT_DEFAULT));
+    return port.or(OZONE_KSM_PORT_DEFAULT);
+  public static int getKsmRestPort(Configuration conf) {
+    // If no port number is specified then we'll just try the default
+    // HTTP BindPort.
+    final Optional<Integer> port =
+        getPortNumberFromConfigKeys(conf, OZONE_KSM_HTTP_ADDRESS_KEY);
+    return port.or(OZONE_KSM_HTTP_BIND_PORT_DEFAULT);
+  }
