Merge trunk r1595301 to branch

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/fs-encryption@1595303 13f79535-47bb-0310-9956-ffa450edef68

-  private synchronized void addApplication(ApplicationId applicationId,
+  @VisibleForTesting
+  public synchronized void addApplication(ApplicationId applicationId,
-  private synchronized void
+  @VisibleForTesting
+  public synchronized void
+      if (application == null) {
+        continue;
+      }
+      if (attempt == null) {
+        continue;
+      }
