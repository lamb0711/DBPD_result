HDDS-363. Faster datanode registration during the first startup. Contributed by Elek, Marton.

+import org.apache.hadoop.ozone.container.common.statemachine.StateContext;
+  private StateContext stateContext;
-      Configuration conf, OzoneContainer ozoneContainer) {
+      Configuration conf, OzoneContainer ozoneContainer,
+      StateContext context) {
+    this.stateContext = context;
+      this.stateContext.configureHeartbeatFrequency();
+    private StateContext context;
+    public Builder setContext(StateContext stateContext) {
+      this.context = stateContext;
+      return this;
+    }
-        throw new IllegalArgumentException("A valid configration is needed to" +
-            " construct RegisterEndpoint task");
+        throw new IllegalArgumentException(
+            "A valid configuration is needed to construct RegisterEndpoint "
+                + "task");
-            "constrict RegisterEndpoint task");
+            "construct RegisterEndpoint task");
+      }
+
+      if (context == null) {
+        LOG.error("StateContext is not specified");
+        throw new IllegalArgumentException("Container is not specified to " +
+            "construct RegisterEndpoint task");
-          .endPointStateMachine, this.conf, this.container);
+          .endPointStateMachine, this.conf, this.container, this.context);
+
