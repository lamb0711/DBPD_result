YARN-7136. Additional Performance Improvement for Resource Profile Feature
(Contributed by Wangda Tan via Daniel Templeton)

+
+
+
+    initializeResourcesFromResourceInformationMap(resourceInformationMap);
+  }
+
+  /**
+   * This method is visible for testing, unit test can construct a
+   * resourceInformationMap and pass it to this method to initialize multiple resources.
+   * @param resourceInformationMap constructed resource information map.
+   */
+  @VisibleForTesting
+  public static void initializeResourcesFromResourceInformationMap(
+      Map<String, ResourceInformation> resourceInformationMap) {
+    initializedResources = true;
-            initializeResourcesMap(conf);
-            initializedResources = true;
-            initializeResourcesMap(conf);
-            initializedResources = true;
+          initializeResourcesMap(conf);
+
-    if (null != ri) {
+    if (ri != null) {
