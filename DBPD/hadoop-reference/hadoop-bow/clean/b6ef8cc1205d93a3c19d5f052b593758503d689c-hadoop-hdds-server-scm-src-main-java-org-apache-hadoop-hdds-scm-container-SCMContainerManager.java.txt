HDD-2193. Adding container related metrics in SCM.

Signed-off-by: Anu Engineer <aengineer@apache.org>

+import org.apache.hadoop.hdds.scm.container.metrics.SCMContainerManagerMetrics;
+  private final SCMContainerManagerMetrics scmContainerManagerMetrics;
+
+
+    scmContainerManagerMetrics = SCMContainerManagerMetrics.create();
+      scmContainerManagerMetrics.incNumListContainersOps();
-    lock.lock();
-      final ContainerInfo containerInfo =
-          containerStateManager.allocateContainer(pipelineManager, type,
+      lock.lock();
+      ContainerInfo containerInfo = null;
+      try {
+        containerInfo =
+            containerStateManager.allocateContainer(pipelineManager, type,
+      } catch (IOException ex) {
+        scmContainerManagerMetrics.incNumFailureCreateContainers();
+        throw ex;
+      }
+      scmContainerManagerMetrics.incNumSuccessfulDeleteContainers();
+      scmContainerManagerMetrics.incNumFailureDeleteContainers();
+      // Incrementing here, as allocateBlock to create a container calls
+      // getMatchingContainer() and finally calls this API to add newly
+      // created container to DB.
+      // Even allocateContainer calls this API to add newly allocated
+      // container to DB. So we need to increment metrics here.
+      scmContainerManagerMetrics.incNumSuccessfulCreateContainers();
+      scmContainerManagerMetrics.incNumFailureCreateContainers();
+
+    if (scmContainerManagerMetrics != null) {
+      this.scmContainerManagerMetrics.unRegister();
+    }
