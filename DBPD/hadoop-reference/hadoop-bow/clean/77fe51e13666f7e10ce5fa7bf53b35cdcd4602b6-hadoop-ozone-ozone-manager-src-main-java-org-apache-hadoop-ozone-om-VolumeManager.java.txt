HDDS-1379. Convert all OM Volume related operations to HA model. (#689)



+import org.apache.hadoop.ozone.om.helpers.OmDeleteVolumeResponse;
+import org.apache.hadoop.ozone.om.helpers.OmVolumeOwnerChangeResponse;
+import org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos
+    .VolumeList;
-  void createVolume(OmVolumeArgs args) throws IOException;
+  VolumeList createVolume(OmVolumeArgs args)
+      throws IOException;
+
+  /**
+   * Apply Create Volume changes to OM DB.
+   * @param omVolumeArgs
+   * @param volumeList
+   * @throws IOException
+   */
+  void applyCreateVolume(OmVolumeArgs omVolumeArgs,
+      VolumeList volumeList) throws IOException;
-  void setOwner(String volume, String owner) throws IOException;
+  OmVolumeOwnerChangeResponse setOwner(String volume, String owner)
+      throws IOException;
+
+  /**
+   * Apply Set Owner changes to OM DB.
+   * @param oldOwner
+   * @param oldOwnerVolumeList
+   * @param newOwnerVolumeList
+   * @param newOwnerVolumeArgs
+   * @throws IOException
+   */
+  void applySetOwner(String oldOwner, VolumeList oldOwnerVolumeList,
+      VolumeList newOwnerVolumeList, OmVolumeArgs newOwnerVolumeArgs)
+      throws IOException;
-  void setQuota(String volume, long quota) throws IOException;
+  OmVolumeArgs setQuota(String volume, long quota) throws IOException;
+
+  /**
+   * Apply Set Quota changes to OM DB.
+   * @param omVolumeArgs
+   * @throws IOException
+   */
+  void applySetQuota(OmVolumeArgs omVolumeArgs) throws IOException;
-  void deleteVolume(String volume) throws IOException;
+  OmDeleteVolumeResponse deleteVolume(String volume) throws IOException;
+
+  /**
+   * Apply Delete Volume changes to OM DB.
+   * @param volume
+   * @param owner
+   * @param newVolumeList
+   * @throws IOException
+   */
+  void applyDeleteVolume(String volume, String owner,
+      VolumeList newVolumeList) throws IOException;
