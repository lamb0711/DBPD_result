MAPREDUCE-3868. Make Raid Compile. (Weiyan Wang via schen)



git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1351548 13f79535-47bb-0310-9956-ffa450edef68

+    if (limit == 0) 
+      return filtered;
-      synchronized(filtered) {
-        if (filtered.size() >= limit) break;
-      }
+        slots.acquire();
+        synchronized(filtered) {
+          if (filtered.size() >= limit) {
+            slots.release();
+            break;
+          }
+        }
+          slots.release();
-        slots.acquire();
+        slots.release();
+        slots.release();
