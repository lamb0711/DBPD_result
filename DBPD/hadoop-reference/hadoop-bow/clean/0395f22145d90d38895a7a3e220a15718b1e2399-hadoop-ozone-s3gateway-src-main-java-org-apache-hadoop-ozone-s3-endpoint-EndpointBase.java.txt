HDDS-1068. Improve the error propagation for ozone sh.
Contributed by Elek, Marton.

+import org.apache.hadoop.ozone.om.exceptions.OMException;
+import org.apache.hadoop.ozone.om.exceptions.OMException.ResultCodes;
-    } catch (IOException ex) {
-      LOG.error("Error occurred is {}", ex);
-      if (ex.getMessage().contains("NOT_FOUND")) {
-        OS3Exception oex =
-            S3ErrorTable.newError(S3ErrorTable.NO_SUCH_BUCKET, bucketName);
-        throw oex;
+    } catch (OMException ex) {
+      if (ex.getResult() == ResultCodes.KEY_NOT_FOUND) {
+        throw S3ErrorTable.newError(S3ErrorTable.NO_SUCH_BUCKET, bucketName);
-    } catch (IOException ex) {
-      LOG.error("Error occurred is {}", ex);
-      if (ex.getMessage().contains("NOT_FOUND")) {
-        OS3Exception oex =
-            S3ErrorTable.newError(S3ErrorTable.NO_SUCH_BUCKET, bucketName);
-        throw oex;
+    } catch (OMException ex) {
+      if (ex.getResult() == ResultCodes.BUCKET_NOT_FOUND
+          || ex.getResult() == ResultCodes.S3_BUCKET_NOT_FOUND) {
+        throw S3ErrorTable.newError(S3ErrorTable.NO_SUCH_BUCKET, bucketName);
-    } catch (Exception ex) {
-      if (ex.getMessage().contains("NOT_FOUND")) {
+    } catch (OMException ex) {
+      if (ex.getResult() == ResultCodes.VOLUME_NOT_FOUND) {
-    } catch (IOException ex) {
-      LOG.error("createS3Bucket error:", ex);
-      if (!ex.getMessage().contains("ALREADY_EXISTS")) {
+    } catch (OMException ex) {
+      if (ex.getResult() != ResultCodes.VOLUME_ALREADY_EXISTS) {
