HDFS-4503. Update computeContentSummary(..), spaceConsumedInTree(..) and diskspaceConsumed(..) in INode for snapshot.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1448373 13f79535-47bb-0310-9956-ffa450edef68

-  static class FileDiff extends AbstractINodeDiff<INodeFile, FileDiff> {
+  public static class FileDiff extends AbstractINodeDiff<INodeFile, FileDiff> {
-    final long fileSize;
+    private final long fileSize;
-      fileSize = file.computeFileSize(true, null);
+      fileSize = file.computeFileSize();
+    /** @return the file size in the snapshot. */
+    public long getFileSize() {
+      return fileSize;
+    }
+
-  static class Util {
+  public static class Util {
-    static short getBlockReplication(final FileWithSnapshot file) {
+    public static short getBlockReplication(final FileWithSnapshot file) {
-      for(FileDiff d : file.getDiffs().asList()) {
+      for(FileDiff d : file.getDiffs()) {
-        max = file.asINodeFile().computeFileSize(true, null);
+        max = file.asINodeFile().computeFileSize();
