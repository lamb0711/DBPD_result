HDFS-12840. Creating a file with non-default EC policy in a EC zone is not correctly serialized in the editlog. Contributed by Lei (Eddy) Xu.

+import org.apache.hadoop.io.erasurecode.ErasureCodeConstants;
+    byte erasureCodingPolicyId;
+      erasureCodingPolicyId = ErasureCodeConstants.REPLICATION_POLICY_ID;
+      erasureCodingPolicyId = ErasureCodeConstants.REPLICATION_POLICY_ID;
+    <T extends AddCloseOp> T setErasureCodingPolicyId(byte ecPolicyId) {
+      this.erasureCodingPolicyId = ecPolicyId;
+      return (T)this;
+    }
+
+        FSImageSerialization.writeByte(erasureCodingPolicyId, out);
+
+        if (NameNodeLayoutVersion.supports(
+            NameNodeLayoutVersion.Feature.ERASURE_CODING, logVersion)) {
+          this.erasureCodingPolicyId = FSImageSerialization.readByte(in);
+        } else {
+          this.erasureCodingPolicyId =
+              ErasureCodeConstants.REPLICATION_POLICY_ID;
+        }
+      builder.append(", erasureCodingPolicyId=");
+      builder.append(erasureCodingPolicyId);
+        XMLUtils.addSaxString(contentHandler, "ERASURE_CODING_POLICY_ID",
+            Byte.toString(erasureCodingPolicyId));
+      if (st.hasChildren("ERASURE_CODING_POLICY_ID")) {
+        this.erasureCodingPolicyId = Byte.parseByte(st.getValue(
+            "ERASURE_CODING_POLICY_ID"));
+      }
