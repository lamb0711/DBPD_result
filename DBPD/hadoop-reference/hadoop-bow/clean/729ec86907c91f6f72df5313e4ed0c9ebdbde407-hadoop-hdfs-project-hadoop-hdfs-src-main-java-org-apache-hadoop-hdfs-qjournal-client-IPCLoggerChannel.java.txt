HDFS-3899. Add client side metrics for QJM. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3077@1383139 13f79535-47bb-0310-9956-ffa450edef68

+  private final IPCLoggerChannelMetrics metrics;
+  
+    
+    metrics = IPCLoggerChannelMetrics.create(this);
+  
+  public InetSocketAddress getRemoteAddress() {
+    return addr;
+  }
+          long rpcSendTimeNanos = System.nanoTime();
+          } finally {
+            long now = System.nanoTime();
+            long rpcTime = TimeUnit.MICROSECONDS.convert(
+                now - rpcSendTimeNanos, TimeUnit.NANOSECONDS);
+            long endToEndTime = TimeUnit.MICROSECONDS.convert(
+                now - submitNanos, TimeUnit.NANOSECONDS);
+            metrics.addWriteEndToEndLatency(endToEndTime);
+            metrics.addWriteRpcLatency(rpcTime);
-  private long getLagTxns() {
+  public synchronized long getLagTxns() {
-  private long getLagTimeMillis() {
+  public synchronized long getLagTimeMillis() {
