HDDS-1551. Implement Bucket Write Requests to use Cache and DoubleBuffer. (#850)



-import org.apache.hadoop.ozone.om.protocol.OzoneManagerServerProtocol;
-  private final OzoneManagerServerProtocol ozoneManager;
+  private final OzoneManager ozoneManager;
+  private final OzoneManagerDoubleBuffer ozoneManagerDoubleBuffer;
-    this.handler = new OzoneManagerHARequestHandlerImpl(ozoneManager);
+    this.ozoneManagerDoubleBuffer =
+        new OzoneManagerDoubleBuffer(ozoneManager.getMetadataManager());
+    this.handler = new OzoneManagerHARequestHandlerImpl(ozoneManager,
+        ozoneManagerDoubleBuffer);
-      case CreateBucket:
-      case SetBucketProperty:
-      case DeleteBucket:
-    OMResponse response = handler.handleApplyTransaction(request);
+    OMResponse response = handler.handleApplyTransaction(request, trxLogIndex);
+
+  public void stop() {
+    ozoneManagerDoubleBuffer.stop();
+  }
+
