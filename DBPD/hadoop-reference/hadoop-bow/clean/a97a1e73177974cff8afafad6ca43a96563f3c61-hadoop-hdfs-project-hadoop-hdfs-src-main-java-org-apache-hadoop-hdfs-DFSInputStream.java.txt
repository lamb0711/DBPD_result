HDFS-7494. Checking of closed in DFSInputStream#pread() should be protected by synchronization (Ted Yu via Colin P. McCabe)

+import java.util.concurrent.atomic.AtomicBoolean;
-  private boolean closed = false;
+  private AtomicBoolean closed = new AtomicBoolean(false);
-    if (closed) {
+    if (!closed.compareAndSet(false, true)) {
+      DFSClient.LOG.warn("DFSInputStream has been closed already");
-    closed = true;
-    if (closed) {
+    if (closed.get()) {
-    if (closed) {
+    if (closed.get()) {
-    if (closed) {
+    if (closed.get()) {
-    if (closed) {
+    if (closed.get()) {
