HADOOP-6764. Add number of reader threads and queue length as configuration parameters in RPC.getServer. Contributed by Dmytro Molkov.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1038918 13f79535-47bb-0310-9956-ffa450edef68

-      .getServer(protocol, instance, bindAddress, port, numHandlers, verbose,
-                 conf, secretManager);
+      .getServer(protocol, instance, bindAddress, port, numHandlers, -1, -1,
+                 verbose, conf, secretManager);
+  }
+
+  /** Construct a server for a protocol implementation instance. */
+  public static Server getServer(Class<?> protocol,
+                                 Object instance, String bindAddress, int port,
+                                 int numHandlers, int numReaders, int queueSizePerHandler,
+                                 boolean verbose, Configuration conf,
+                                 SecretManager<? extends TokenIdentifier> secretManager) 
+    throws IOException {
+    
+    return getProtocolEngine(protocol, conf)
+      .getServer(protocol, instance, bindAddress, port, numHandlers,
+                 numReaders, queueSizePerHandler, verbose, conf, secretManager);
-                     Class<? extends Writable> paramClass, int handlerCount, 
+                     Class<? extends Writable> paramClass, int handlerCount,
+                     int numReaders, int queueSizePerHandler,
-      super(bindAddress, port, paramClass, handlerCount, conf, serverName, secretManager);
+      super(bindAddress, port, paramClass, handlerCount, numReaders, queueSizePerHandler,
+            conf, serverName, secretManager);
