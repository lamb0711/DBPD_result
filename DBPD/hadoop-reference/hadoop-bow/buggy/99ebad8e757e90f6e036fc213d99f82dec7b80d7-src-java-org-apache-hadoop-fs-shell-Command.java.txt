HADOOP-7233. Refactor ls to conform to new FsCommand class.  Contributed by Daryn Sharp


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1095761 13f79535-47bb-0310-9956-ffa450edef68

+  protected void setRecursive(boolean flag) {
+    recursive = flag;
+  }
+  
+  protected boolean isRecursive() {
+    return recursive;
+  }
+
-    return (numErrors == 0) ? exitCode : 1;
+    // TODO: -1 should be reserved for syntax error, 1 should be failure
+    return (numErrors == 0) ? exitCode : -1;
-    throw new FileNotFoundException("Can not find listing for " + item);
+    throw new FileNotFoundException(getFnfText(item.path));
+  }
+
+  /**
+   *  TODO: A crutch until the text is standardized across commands...
+   *  Eventually an exception that takes the path as an argument will
+   *  replace custom text
+   *  @param path the thing that doesn't exist
+   *  @returns String in printf format
+   */
+  protected String getFnfText(Path path) {
+    throw new RuntimeException(path + ": No such file or directory");
-      throw new FileNotFoundException("Can not find listing for " + pattern);
+      throw new FileNotFoundException(getFnfText(path));
-    return getCommandField("USAGE");
+    String cmd = "-" + getCommandName();
+    String usage = getCommandField("USAGE");
+    return usage.isEmpty() ? cmd : cmd + " " + usage; 
