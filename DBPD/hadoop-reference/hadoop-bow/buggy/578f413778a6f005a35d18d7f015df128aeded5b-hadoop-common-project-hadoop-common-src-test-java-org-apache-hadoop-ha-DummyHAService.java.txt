HADOOP-8206. Common portion of a ZK-based failover controller. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1305673 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import com.google.common.collect.Lists;
+
+  boolean failToBecomeActive;
+  
+  static ArrayList<DummyHAService> instances = Lists.newArrayList();
+  int index;
+    synchronized (instances) {
+      instances.add(this);
+      this.index = instances.size();
+    }
+        if (failToBecomeActive) {
+          throw new ServiceFailedException("injected failure");
+        }
+
-
+  
-}
+  
+  @Override
+  public String toString() {
+    return "DummyHAService #" + index;
+  }
+
+  public static HAServiceTarget getInstance(int serial) {
+    return instances.get(serial - 1);
+  }
+}
