HADOOP-7788. Add simple HealthMonitor class to watch an HAService. Contributed by Todd Lipcon.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1303208 13f79535-47bb-0310-9956-ffa450edef68

+import javax.net.SocketFactory;
+
+import org.apache.hadoop.ipc.ProtocolTranslator;
+import org.apache.hadoop.security.UserGroupInformation;
-    HAServiceProtocol, Closeable {
+    HAServiceProtocol, Closeable, ProtocolTranslator {
+  public HAServiceProtocolClientSideTranslatorPB(
+      InetSocketAddress addr, Configuration conf,
+      SocketFactory socketFactory, int timeout) throws IOException {
+    RPC.setProtocolEngine(conf, HAServiceProtocolPB.class,
+        ProtobufRpcEngine.class);
+    rpcProxy = RPC.getProxy(HAServiceProtocolPB.class,
+        RPC.getProtocolVersion(HAServiceProtocolPB.class), addr,
+        UserGroupInformation.getCurrentUser(), conf, socketFactory, timeout);
+  }
+
+
+  @Override
+  public Object getUnderlyingProxyObject() {
+    return rpcProxy;
+  }
