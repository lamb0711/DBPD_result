MAPREDUCE-3144. Augmented JobHistory with the information needed for serving aggregated logs. Contributed by Siddharth Seth.


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1185976 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
-import java.util.List;
-import org.apache.hadoop.security.SecurityInfo;
-import org.apache.hadoop.yarn.security.ContainerManagerSecurityInfo;
+  private final RMContext rmContext;
+    this.rmContext = rmContext;
-    // Set the AppAttemptId to be consumable by the AM.
-    environment.put(ApplicationConstants.APPLICATION_ATTEMPT_ID_ENV,
-        application.getAppAttemptId().toString());
+    // Set the AppAttemptId, containerId, NMHTTPAdress, AppSubmitTime to be
+    // consumable by the AM.
+    environment.put(ApplicationConstants.AM_CONTAINER_ID_ENV, container
+        .getContainerId().toString());
+    environment.put(ApplicationConstants.NM_HTTP_ADDRESS_ENV, application
+        .getMasterContainer().getNodeHttpAddress());
+    environment.put(
+        ApplicationConstants.APP_SUBMIT_TIME_ENV,
+        String.valueOf(rmContext.getRMApps()
+            .get(application.getAppAttemptId().getApplicationId())
+            .getSubmitTime()));
+    
