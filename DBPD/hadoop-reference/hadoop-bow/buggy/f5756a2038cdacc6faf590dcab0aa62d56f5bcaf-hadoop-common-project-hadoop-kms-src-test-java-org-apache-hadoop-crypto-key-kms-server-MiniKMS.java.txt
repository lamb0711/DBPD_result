HADOOP-12615. Fix NPE in MiniKMS.start(). Contributed by Wei-Chiu Chuang.

Change-Id: Ie3e148bd1401618b1737a577957298bf622891f4

+import org.apache.hadoop.util.ThreadUtil;
+import java.io.IOException;
+  private void copyResource(String inputResourceName, File outputFile) throws
+      IOException {
+    InputStream is = null;
+    OutputStream os = null;
+    try {
+      is = ThreadUtil.getResourceAsStream(inputResourceName);
+      os = new FileOutputStream(outputFile);
+      IOUtils.copy(is, os);
+    } finally {
+      IOUtils.closeQuietly(is);
+      IOUtils.closeQuietly(os);
+    }
+  }
+
-      InputStream is = cl.getResourceAsStream("mini-kms-acls-default.xml");
-      OutputStream os = new FileOutputStream(aclsFile);
-      IOUtils.copy(is, os);
-      is.close();
-      os.close();
+      copyResource("mini-kms-acls-default.xml", aclsFile);
-      InputStream is = cl.getResourceAsStream("kms-webapp/WEB-INF/web.xml");
-      OutputStream os = new FileOutputStream(new File(webInf, "web.xml"));
-      IOUtils.copy(is, os);
-      is.close();
-      os.close();
+      copyResource("kms-webapp/WEB-INF/web.xml", new File(webInf, "web.xml"));
