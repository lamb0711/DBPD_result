HADOOP-11113. Namenode not able to reconnect to KMS after KMS restart. (Arun Suresh via wang)

-  private static Server createJettyServer(String keyStore, String password) {
+  private static Server createJettyServer(String keyStore, String password, int inPort) {
-      ServerSocket ss = new ServerSocket(0, 50, localhost);
+      ServerSocket ss = new ServerSocket((inPort < 0) ? 0 : inPort, 50, localhost);
+    private int inPort = -1;
+    public Builder setPort(int port) {
+      Preconditions.checkArgument(port > 0, "input port must be greater than 0");
+      this.inPort = port;
+      return this;
+    }
+
-          keyStorePassword);
+          keyStorePassword, inPort);
+  private int inPort;
-      String password) {
+      String password, int inPort) {
+    this.inPort = inPort;
-    jetty = createJettyServer(keyStore, keyStorePassword);
+    jetty = createJettyServer(keyStore, keyStorePassword, inPort);
