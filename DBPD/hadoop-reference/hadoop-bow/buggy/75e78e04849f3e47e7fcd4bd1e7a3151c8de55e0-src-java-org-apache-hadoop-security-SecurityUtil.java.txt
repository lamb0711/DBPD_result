HADOOP-6805. add buildDTServiceName method to SecurityUtil (as part of MAPREDUCE-1718)

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@965556 13f79535-47bb-0310-9956-ffa450edef68

+import java.net.URI;
-import org.apache.hadoop.security.UserGroupInformation;
+import org.apache.hadoop.net.NetUtils;
+
+  /**
+   * create service name for Delegation token ip:port
+   * @param uri
+   * @param defPort
+   * @return "ip:port"
+   */
+  public static String buildDTServiceName(URI uri, int defPort) {
+    int port = uri.getPort();
+    if(port == -1) 
+      port = defPort;
+
+    // build the service name string "/ip:port"
+    // for whatever reason using NetUtils.createSocketAddr(target).toString()
+    // returns "localhost/ip:port"
+    StringBuffer sb = new StringBuffer();
+    sb.append(NetUtils.normalizeHostName(uri.getHost())).append(":").append(port);
+    return sb.toString();
+  }
