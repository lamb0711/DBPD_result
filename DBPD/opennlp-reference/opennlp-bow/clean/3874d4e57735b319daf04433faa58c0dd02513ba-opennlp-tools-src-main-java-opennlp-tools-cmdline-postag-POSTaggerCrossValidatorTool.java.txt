OPENNLP-221 Refactored POS Tagger cross validator to use Parameters

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1145723 13f79535-47bb-0310-9956-ffa450edef68

+import opennlp.tools.cmdline.ArgumentParser;
+import opennlp.tools.cmdline.BasicCrossValidatorParameters;
+import opennlp.tools.util.model.ModelType;
+  
+  interface Parameters extends BasicCrossValidatorParameters, TrainingParametersI {
+    
+  }
-        + TrainingParameters.getParameterUsage() + " -data trainData\n"
-        + TrainingParameters.getDescription();
+        + ArgumentParser.createUsage(Parameters.class);
-    if (args.length < 5) {
-      System.out.println(getHelp());
+    if (!ArgumentParser.validateArguments(args, Parameters.class)) {
+      System.err.println(getHelp());
-
-    TrainingParameters parameters = new TrainingParameters(args);
-
-    if (!parameters.isValid()) {
-      System.out.println(getHelp());
-      throw new TerminateToolException(1);
-    }
+    
+    Parameters params = ArgumentParser.parse(args, Parameters.class);
-        .loadTrainingParameters(CmdLineUtil.getParameter("-params", args),
-            false);
+        .loadTrainingParameters(params.getParams(), false);
-    File trainingDataInFile = new File(CmdLineUtil.getParameter("-data", args));
+    File trainingDataInFile = params.getData();
-        "Training Data", trainingDataInFile, parameters.getEncoding());
+        "Training Data", trainingDataInFile, params.getEncoding());
-      if (parameters.getDictionaryPath() != null) {
-        tagdict = POSDictionary.create(new FileInputStream(parameters
-            .getDictionaryPath()));
+      if (params.getDict() != null) {
+        tagdict = POSDictionary.create(new FileInputStream(params.getDict()));
-        validator = new POSTaggerCrossValidator(parameters.getLanguage(),
-            parameters.getModel(), tagdict, null, parameters.getCutoff(),
-            parameters.getNumberOfIterations());
+        validator = new POSTaggerCrossValidator(params.getLang(),
+            getModelType(params.getType()), tagdict, null, params.getCutoff(),
+            params.getIterations());
-        validator = new POSTaggerCrossValidator(parameters.getLanguage(),
+        validator = new POSTaggerCrossValidator(params.getLang(),
+
+  private ModelType getModelType(String modelString) {
+    ModelType model;
+    if (modelString == null)
+      modelString = "maxent";
+    
+    if (modelString.equals("maxent")) {
+      model = ModelType.MAXENT; 
+    }
+    else if (modelString.equals("perceptron")) {
+      model = ModelType.PERCEPTRON; 
+    }
+    else if (modelString.equals("perceptron_sequence")) {
+      model = ModelType.PERCEPTRON_SEQUENCE; 
+    }
+    else {
+      model = null;
+    }
+    return model;
+  }
