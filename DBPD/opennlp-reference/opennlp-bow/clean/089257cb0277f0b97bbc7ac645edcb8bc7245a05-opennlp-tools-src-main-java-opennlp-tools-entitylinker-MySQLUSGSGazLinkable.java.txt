OPENNLP-579
GeoEntityLinkerImpl: Implemented better scoring using Dice coefficient of bigram, as well as highly improved scoring based on country context. Created an NgramGenerator class and a FuzzyStringMatching class, assuming they would be useful for other linker impls. Implemented Regex based discovery of countrycontext, which enabled proximity based analysis of doctext
Multiple other small efficiencies in the GeoEntityLinker

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1533959 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
- *
- * @author opennlp
+ * Links names to the USGS gazateer
-  public ArrayList<BaseLink> find(String locationText, Span span, List<CountryContextHit> countryHits, EntityLinkerProperties properties) {
+  public ArrayList<BaseLink> find(String locationText, Span span, Map<String, Set<Integer>> countryHits, EntityLinkerProperties properties) {
-      if (getCountryCodes(countryHits).contains("us") || !filterCountryContext) {
+      if (countryHits.keySet().contains("us") || !filterCountryContext) {
-        returnlocs.addAll(this.searchGaz(locationText, threshhold, getCountryCodes(countryHits), properties));
+        returnlocs.addAll(this.searchGaz(locationText, threshhold, countryHits.keySet(), properties));
-    ArrayList<MySQLUSGSGazEntry> retUrls = new ArrayList<MySQLUSGSGazEntry>();
+    ArrayList<MySQLUSGSGazEntry> toponyms = new ArrayList<MySQLUSGSGazEntry>();
-        return retUrls;
+        return toponyms;
+
-        if (countryCodes.contains("us")) {
-          s.setRank(s.getRank() + (s.getRank() * .5));
-         // System.out.println(searchString +"USGS qualified on: " + s.getFeaturename());
-        } else {
-          s.setRank(s.getRank() * .5);
-          if(filterCountryContext){
-            continue;
-          }
-        }
-        retUrls.add(s);
+
+        //set the base link data
+        s.setItemName(s.getFeaturename().toLowerCase().trim());
+        s.setItemID(s.getFeatureid());
+        s.setItemType(s.getFeatureclass());
+        s.setItemParentID("us");
+
+        toponyms.add(s);
-    return retUrls;
+    return toponyms;
