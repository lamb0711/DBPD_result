OPENNLP-59 New strategy to compute Precision, Recall and FM

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1055519 13f79535-47bb-0310-9956-ffa450edef68

-  /**
-   * The mean of all calculated precision scores.
-   */
-  private Mean precisionScore = new Mean();
-  
-  /**
-   * The mean of all calculated recall scores.
-   */
-  private Mean recallScore = new Mean();
+	/** |selected| = tp + fp */
+	private long selected;
+	
+	/** |target| = tp + fp */
+	private long target;
+	
+	private long truePositive;
-    return precisionScore.mean();
+    return selected > 0 ? (double)truePositive / (double)selected : 0;
-    return recallScore.mean();
+    return target > 0 ? (double)truePositive / (double)target : 0;
-    
-    double precision = FMeasure.precision(references, predictions);
-    if (!Double.isNaN(precision))
-        precisionScore.add(precision, references.length);
-    
-    double recall = FMeasure.recall(references, predictions);
-    if (!Double.isNaN(recall))
-        recallScore.add(FMeasure.recall(references, predictions), references.length);
+	  
+	  truePositive += countTruePositives(references, predictions);
+	  selected += predictions.length;
+	  target += references.length;
-    precisionScore.add(measure.getPrecisionScore(), measure.precisionScore.count());
-    recallScore.add(measure.getRecallScore(), measure.recallScore.count());
+    this.selected += measure.selected;
+    this.target += measure.target;
+    this.truePositive += measure.truePositive;
