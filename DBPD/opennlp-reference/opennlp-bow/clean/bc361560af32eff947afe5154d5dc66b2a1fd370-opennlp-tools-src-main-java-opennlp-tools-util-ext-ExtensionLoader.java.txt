OPENNLP-500 Added proper implementation for OSGi extension loading.

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1329578 13f79535-47bb-0310-9956-ffa450edef68

+/**
+ * The {@link ExtensionLoader} is responsible to load extensions to the OpenNLP library.
+ * <p>
+ * <b>Note:</b> Do not use this class, internal use only!
+ */
+  private static boolean isOsgiAvailable = false;
+  
+  static boolean isOSGiAvailable() {
+    return isOsgiAvailable;
+  }
+  
+  static void setOSGiAvailable() {
+    isOsgiAvailable = true;
+  }
+  
-          throw new ExtensionNotLoadedError(e);
+          throw new ExtensionNotLoadedException(e);
-          throw new ExtensionNotLoadedError(e);
+          throw new ExtensionNotLoadedException(e);
-        // throw exception ... class is not compatible ...
+        throw new ExtensionNotLoadedException("Extension class needs to have type: " + clazz.getName());
-      throw new ExtensionNotLoadedError(e);
+      // Class is not on classpath
-    boolean isOsgiAvailable;
-    
-    try {
-      Class.forName("org.osgi.framework.ServiceReference");
-      isOsgiAvailable = true;
-    } catch (ClassNotFoundException e) {
-      isOsgiAvailable = false;
-    }
-    
-      return extLoader.findExtension(clazz, extensionClassName);
+      return extLoader.getExtension(clazz, extensionClassName);
-    throw new ExtensionNotLoadedError("Unable to find implementation for " + 
+    throw new ExtensionNotLoadedException("Unable to find implementation for " + 
