OPENNLP-127 Now checks when model is loaded that tag dictionary is compatible

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1129054 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
+import java.util.HashSet;
+import java.util.Set;
-    if (tagdictEntry != null && !(tagdictEntry instanceof POSDictionary)) {
-      throw new InvalidFormatException("Abbreviations dictionary has wrong type!");
+    if (tagdictEntry != null) {
+      if (tagdictEntry instanceof POSDictionary) {
+        POSDictionary posDict = (POSDictionary) tagdictEntry;
+        
+        Set<String> dictTags = new HashSet<String>();
+        
+        for (String word : posDict) {
+          Collections.addAll(dictTags, posDict.getTags(word)); 
+        }
+        
+        Set<String> modelTags = new HashSet<String>();
+        
+        AbstractModel posModel = getPosModel();
+        
+        for  (int i = 0; i < posModel.getNumOutcomes(); i++) {
+          modelTags.add(posModel.getOutcome(i));
+        }
+        
+        if (!modelTags.containsAll(dictTags)) {
+          throw new InvalidFormatException("Tag dictioinary contains tags " +
+          		"which are unkown by the model!");
+        }
+      }
+      else {
+        throw new InvalidFormatException("Abbreviations dictionary has wrong type!");
+      }
