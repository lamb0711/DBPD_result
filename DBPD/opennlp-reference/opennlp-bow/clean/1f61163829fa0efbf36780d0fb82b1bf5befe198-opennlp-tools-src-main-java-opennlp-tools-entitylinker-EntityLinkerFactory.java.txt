OPENNLP-631 Replaced Class.forName with ExtensionLoader

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1570608 13f79535-47bb-0310-9956-ffa450edef68

+import opennlp.tools.util.ext.ExtensionLoader;
+
-  public static synchronized EntityLinker getLinker(String entityType, EntityLinkerProperties properties)throws Exception {
+  public static synchronized EntityLinker<?> getLinker(String entityType, EntityLinkerProperties properties) throws Exception {
-    EntityLinker linker = null;
-    try {
-      String linkerImplFullName = properties.getProperty("linker." + entityType, "");
-      Class theClass = Class.forName(linkerImplFullName);
-      linker = (EntityLinker) theClass.newInstance();
-      System.out.println("EntityLinker factory instantiated: " + linker.getClass().getName());
-      linker.init(properties);
-
-    } catch (Exception ex) {
-      throw new Exception("Error in EntityLinker factory. Check the entity linker properties file. The entry must be formatted as linker.<type>=<fullclassname>, i.e linker.person=org.my.company.MyPersonLinker",ex);
+    
+    String linkerImplFullName = properties.getProperty("linker." + entityType, "");
+    
+    if (linkerImplFullName == null) {
+      throw new IllegalArgumentException("linker." + entityType + "  property must be set!");
+    
+    EntityLinker<?> linker = ExtensionLoader.instantiateExtension(EntityLinker.class, linkerImplFullName);
+    linker.init(properties);
