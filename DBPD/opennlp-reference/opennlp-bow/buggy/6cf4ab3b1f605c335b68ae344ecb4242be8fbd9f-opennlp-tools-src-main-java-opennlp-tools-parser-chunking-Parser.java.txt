OPENNLP-175 Updated to let train util directly report training parameters

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1124854 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.FileInputStream;
-import java.io.FileOutputStream;
-import java.io.FileReader;
-import java.io.OutputStream;
-import opennlp.tools.chunker.ChunkSample;
-import opennlp.tools.parser.ParseSampleStream;
-import opennlp.tools.postag.POSSample;
-import opennlp.tools.util.InvalidFormatException;
-import opennlp.tools.util.PlainTextByLineStream;
+  public static void mergeReportIntoManifest(Map<String, String> manifest, 
+      Map<String, String> report, String namespace) {
+    
+    for (Map.Entry<String, String> entry : report.entrySet()) {
+      manifest.put(namespace + "." + entry.getKey(), entry.getValue());
+    }
+  }
+  
-    // TODO: Fix this, find a way to include train params in manifest ...
-//    ModelUtil.addCutoffAndIterations(manifestInfoEntries, cut, iterations);
-    HashSumEventStream hsbes = new HashSumEventStream(bes);
-    AbstractModel buildModel = TrainUtil.train(hsbes, mlParams.getSettings("build"));
-    manifestInfoEntries.put("Training-Builder-Eventhash", 
-        hsbes.calculateHashSum().toString(16));
+    Map<String, String> buildReportMap = new HashMap<String, String>();
+    AbstractModel buildModel = TrainUtil.train(bes, mlParams.getSettings("build"), buildReportMap);
+    mergeReportIntoManifest(manifestInfoEntries, buildReportMap, "build");
-    HashSumEventStream hskes = new HashSumEventStream(kes);
-    AbstractModel checkModel = TrainUtil.train(hskes, mlParams.getSettings("check"));
-    manifestInfoEntries.put("Training-Checker-Eventhash", 
-        hskes.calculateHashSum().toString(16));
+    Map<String, String> checkReportMap = new HashMap<String, String>();
+    AbstractModel checkModel = TrainUtil.train(kes, mlParams.getSettings("check"), checkReportMap);
+    mergeReportIntoManifest(manifestInfoEntries, checkReportMap, "check");
