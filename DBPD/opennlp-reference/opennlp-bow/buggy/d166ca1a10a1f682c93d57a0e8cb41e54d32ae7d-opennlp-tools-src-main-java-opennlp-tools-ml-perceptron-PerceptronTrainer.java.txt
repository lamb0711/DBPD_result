OPENNLP-581 Added Trainer, EventTrainer and SequenceTrainer interfaces and some abstract implementations. Modified existing trainers to extend the abstract classes

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1489970 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import java.util.Collections;
+import java.util.Map;
+
+import opennlp.tools.ml.AbstractEventTrainer;
-public class PerceptronTrainer {
+public class PerceptronTrainer extends AbstractEventTrainer {
+  public static final String PERCEPTRON_VALUE = "PERCEPTRON";
+  // >> members related to AbstractSequenceTrainer
+  public PerceptronTrainer(Map<String, String> trainParams,
+      Map<String, String> reportMap) {
+    super(trainParams, reportMap);
+  }
+
+  public PerceptronTrainer() {
+    super(Collections.<String, String> emptyMap(), Collections
+        .<String, String> emptyMap());
+  }
+
+  public boolean isValid() {
+
+    if (!super.isValid()) {
+      return false;
+    }
+
+    String algorithmName = getAlgorithm();
+
+    if (algorithmName != null && !(PERCEPTRON_VALUE.equals(algorithmName))) {
+      return false;
+    }
+
+    return true;
+  }
+
+  public boolean isSortAndMerge() {
+    return false;
+  }
+
+  public AbstractModel doTrain(DataIndexer indexer) throws IOException {
+    if (!isValid()) {
+      throw new IllegalArgumentException("trainParams are not valid!");
+    }
+
+    int iterations = getIterations();
+    int cutoff = getCutoff();
+
+    AbstractModel model;
+
+    boolean useAverage = getBooleanParam("UseAverage", true);
+
+    boolean useSkippedAveraging = getBooleanParam("UseSkippedAveraging", false);
+
+    // overwrite otherwise it might not work
+    if (useSkippedAveraging)
+      useAverage = true;
+
+    double stepSizeDecrease = getDoubleParam("StepSizeDecrease", 0);
+
+    double tolerance = getDoubleParam("Tolerance",
+        PerceptronTrainer.TOLERANCE_DEFAULT);
+
+    this.setSkippedAveraging(useSkippedAveraging);
+
+    if (stepSizeDecrease > 0)
+      this.setStepSizeDecrease(stepSizeDecrease);
+
+    this.setTolerance(tolerance);
+
+    model = this.trainModel(iterations, indexer, cutoff, useAverage);
+
+    return model;
+  }
+
+  // << members related to AbstractSequenceTrainer
+
