OPENNLP-778 Added compatibility code path to deal with 1.5.x models

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1680541 13f79535-47bb-0310-9956-ffa450edef68

+import opennlp.tools.ml.BeamSearch;
+import opennlp.tools.util.Version;
-      return new POSModel(new UncloseableInputStream(in));
+      POSModel posModel = new POSModel(new UncloseableInputStream(in));
+
+      // The 1.6.x models write the non-default beam size into the model itself.
+      // In 1.5.x the parser configured the beam size when the model was loaded,
+      // this is not possible anymore with the new APIs
+      Version version = posModel.getVersion();
+      if (version.getMajor() == 1 && version.getMinor() == 5) {
+        if (posModel.getManifestProperty(BeamSearch.BEAM_SIZE_PARAMETER) == null) {
+          posModel = new POSModel(posModel.getLanguage(), posModel.getPosModel(), 10,
+              null, posModel.getFactory());
+        }
+      }
+
+      return posModel;
-      return new ChunkerModel(new UncloseableInputStream(in));
+
+      ChunkerModel model = new ChunkerModel(new UncloseableInputStream(in));
+
+      Version version = model.getVersion();
+      if (version.getMajor() == 1 && version.getMinor() == 5) {
+
+        model = new ChunkerModel(model.getLanguage(), model.getChunkerModel(), new ParserChunkerFactory());
+
+      }
+
+      return model;
