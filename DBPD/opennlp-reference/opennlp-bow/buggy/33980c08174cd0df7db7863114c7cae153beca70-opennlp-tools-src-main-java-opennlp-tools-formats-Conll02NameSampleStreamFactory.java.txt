OPENNLP-402 Added formats support to trainer and evaluator tools. Refactoring of various things. Thanks to Aliaksandr Autayeu for providing a patch.

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1209220 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.File;
-
-import opennlp.tools.cmdline.ObjectStreamFactory;
+import opennlp.tools.cmdline.StreamFactoryRegistry;
+import opennlp.tools.cmdline.params.BasicFormatParams;
-public class Conll02NameSampleStreamFactory implements ObjectStreamFactory<NameSample> {
+public class Conll02NameSampleStreamFactory extends LanguageSampleStreamFactory<NameSample> {
-  interface Parameters {
+  interface Parameters extends BasicFormatParams {
-    @ParameterDescription(valueName = "sampleData")
-    String getData();
-    
-  
-  public String getUsage() {
-    return ArgumentParser.createUsage(Parameters.class);
+
+  public static void registerFactory() {
+    StreamFactoryRegistry.registerFactory(NameSample.class,
+        "conll02", new Conll02NameSampleStreamFactory(Parameters.class));
-  
-  public String validateArguments(String[] args) {
-    return ArgumentParser.validateArgumentsLoudly(args, Parameters.class);
+
+  protected <P> Conll02NameSampleStreamFactory(Class<P> params) {
+    super(params);
-  
+
+      language = params.getLang();
+      language = params.getLang();
-      System.err.println("Unsupported language: " + params.getLang());
-      throw new TerminateToolException(-1);
+      throw new TerminateToolException(1, "Unsupported language: " + params.getLang());
-        CmdLineUtil.openInFile(new File(params.getData())), typesToGenerate);
+        CmdLineUtil.openInFile(params.getData()), typesToGenerate);
