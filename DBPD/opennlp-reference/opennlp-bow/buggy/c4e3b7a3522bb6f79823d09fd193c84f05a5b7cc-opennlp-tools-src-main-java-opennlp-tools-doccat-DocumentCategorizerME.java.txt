OPENNLP-674 Added factory to Doccat

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1587944 13f79535-47bb-0310-9956-ffa450edef68

-import opennlp.tools.tokenize.SimpleTokenizer;
-  
-  private MaxentModel model;
+
+  private DoccatModel model;
-   * Initializes a the current instance with a doccat model and custom feature generation.
-   * The feature generation must be identical to the configuration at training time.
-   * 
+   * Initializes a the current instance with a doccat model and custom feature
+   * generation. The feature generation must be identical to the configuration
+   * at training time.
+   *
+   *
+   * @deprecated train a {@link DoccatModel} with a specific
+   *             {@link DoccatFactory} to customize the {@link FeatureGenerator}s
-    this.model = model.getChunkerModel();
+    this.model = model;
-  
+
-   * 
+   *
-    this(model, defaultFeatureGenerator);
+    this.model = model;
+    this.mContextGenerator = new DocumentCategorizerContextGenerator(this.model
+        .getFactory().getFeatureGenerators());
-    return model.eval(mContextGenerator.getContext(text));
+    return model.getMaxentModel().eval(mContextGenerator.getContext(text));
-    Tokenizer tokenizer = SimpleTokenizer.INSTANCE;
+    Tokenizer tokenizer = model.getFactory().getTokenizer();
-    return model.getBestOutcome(outcome);
+    return model.getMaxentModel().getBestOutcome(outcome);
-    return model.getIndex(category);
+    return model.getMaxentModel().getIndex(category);
-    return model.getOutcome(index);
+    return model.getMaxentModel().getOutcome(index);
-    return model.getNumOutcomes();
+    return model.getMaxentModel().getNumOutcomes();
-    return model.getAllOutcomes(results);
+    return model.getMaxentModel().getAllOutcomes(results);
+   /**
+   * @deprecated Use
+   *             {@link #train(String, ObjectStream, TrainingParameters, DoccatFactory)}
+   *             instead.
+   */
-     
+
-     
+
-     
+
-       
+
-  
+
+   public static DoccatModel train(String languageCode, ObjectStream<DocumentSample> samples,
+       TrainingParameters mlParams, DoccatFactory factory)
+   throws IOException {
+
+     Map<String, String> manifestInfoEntries = new HashMap<String, String>();
+
+     MaxentModel model = TrainUtil.train(
+         new DocumentCategorizerEventStream(samples, factory.getFeatureGenerators()),
+         mlParams.getSettings(), manifestInfoEntries);
+
+     return new DoccatModel(languageCode, model, manifestInfoEntries, factory);
+   }
+
-   * 
+   *
-   * 
+   *
-   * 
+   *
-   * @throws ObjectStreamException 
+   * @throws ObjectStreamException
+   *
+   * @deprecated Use
+   *             {@link #train(String, ObjectStream, TrainingParameters, DoccatFactory)}
+   *             instead.
