OPENNLP-603 A few bug fixes to get the w2v classes dictionary loaded after training a model with it

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1533194 13f79535-47bb-0310-9956-ffa450edef68

-            
-          factory = ExtensionLoader.instantiateExtension(ArtifactSerializer.class, artifactSerializerClazzName);
+
+          if (artifactSerializerClazzName != null) {
+            factory = ExtensionLoader.instantiateExtension(ArtifactSerializer.class, artifactSerializerClazzName);
+          }
+
+    for (String name : artifactMap.keySet()) {
+      Object artifact = artifactMap.get(name);
+      if (artifact instanceof SerializableArtifact) {
+
+        SerializableArtifact serializableArtifact = (SerializableArtifact) artifact;
+
+        String artifactSerializerName = serializableArtifact
+            .getArtifactSerializerClass().getName();
+
+        setManifestProperty(SERIALIZER_CLASS_NAME_PREFIX + name,
+            artifactSerializerName);
+      }
+    }
-        SerializableArtifact serializableArtifact = (SerializableArtifact) artifact;
+        SerializableArtifact serializableArtifact = (SerializableArtifact) artifact;
+
-        setManifestProperty(SERIALIZER_CLASS_NAME_PREFIX + name, artifactSerializerName);
