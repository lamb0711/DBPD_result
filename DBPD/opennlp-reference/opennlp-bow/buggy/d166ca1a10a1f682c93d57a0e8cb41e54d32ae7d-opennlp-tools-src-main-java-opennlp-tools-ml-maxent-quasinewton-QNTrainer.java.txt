OPENNLP-581 Added Trainer, EventTrainer and SequenceTrainer interfaces and some abstract implementations. Modified existing trainers to extend the abstract classes

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1489970 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import java.util.Collections;
+import java.util.Map;
+import opennlp.tools.ml.AbstractEventTrainer;
+import opennlp.tools.ml.model.AbstractModel;
-public class QNTrainer {
+public class QNTrainer extends AbstractEventTrainer {
+
+  public static final String MAXENT_QN_VALUE = "MAXENT_QN_EXPERIMENTAL";
+
+    super(Collections.<String, String> emptyMap(), Collections
+        .<String, String> emptyMap());
+
+  // >> members related to AbstractEventTrainer
+  public QNTrainer(Map<String, String> trainParams,
+      Map<String, String> reportMap) {
+    super(trainParams, reportMap);
+
+    int m = getIntParam("numOfUpdates", DEFAULT_M);
+    int maxFctEval = getIntParam("maxFctEval", DEFAULT_MAX_FCT_EVAL);
+
+    this.verbose = true;
+    if (m > MAX_M) {
+      this.m = MAX_M;
+    } else {
+      this.m = m;
+    }
+    if (maxFctEval < 0) {
+      this.maxFctEval = DEFAULT_MAX_FCT_EVAL;
+    } else if (maxFctEval > MAX_FCT_EVAL) {
+      this.maxFctEval = MAX_FCT_EVAL;
+    } else {
+      this.maxFctEval = maxFctEval;
+    }
+  }
+
+  public boolean isValid() {
+
+    if (!super.isValid()) {
+      return false;
+    }
+
+    String algorithmName = getAlgorithm();
+
+    if (algorithmName != null && !(MAXENT_QN_VALUE.equals(algorithmName))) {
+      return false;
+    }
+
+    return true;
+  }
+
+  public boolean isSortAndMerge() {
+    return true;
+  }
+
+  public AbstractModel doTrain(DataIndexer indexer) throws IOException {
+    if (!isValid()) {
+      throw new IllegalArgumentException("trainParams are not valid!");
+    }
+
+    AbstractModel model;
+
+    model = trainModel(indexer);
+
+    return model;
+  }
+
+  // << members related to AbstractEventTrainer
+
