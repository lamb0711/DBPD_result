OPENNLP-581 Deprecated TrainUtil methods and removed duplicated references to constants. Moved the isValid method to TrainerFactory, updated it to work with class names and created a junit test to validate it.

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1521519 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
-import java.util.List;
+  
+  public static boolean isValid(Map<String, String> trainParams) {
+
+    // TODO: Need to validate all parameters correctly ... error prone?!
+    
+    String algorithmName = trainParams.get(AbstractTrainer.ALGORITHM_PARAM);
+    
+    // to check the algorithm we verify if it is a built in trainer, or if we can instantiate
+    // one if it is a class name
+    
+    if (algorithmName != null && 
+        !(BUILTIN_TRAINERS.containsKey(algorithmName) || canLoadTrainer(algorithmName))) {
+      return false;
+    }
+
+    try {
+      String cutoffString = trainParams.get(AbstractTrainer.CUTOFF_PARAM);
+      if (cutoffString != null) Integer.parseInt(cutoffString);
+      
+      String iterationsString = trainParams.get(AbstractTrainer.ITERATIONS_PARAM);
+      if (iterationsString != null) Integer.parseInt(iterationsString);
+    }
+    catch (NumberFormatException e) {
+      return false;
+    }
+    
+    String dataIndexer = trainParams.get(AbstractEventTrainer.DATA_INDEXER_PARAM);
+    
+    if (dataIndexer != null) {
+      if (!(AbstractEventTrainer.DATA_INDEXER_ONE_PASS_VALUE.equals(dataIndexer) 
+          || AbstractEventTrainer.DATA_INDEXER_TWO_PASS_VALUE.equals(dataIndexer))) {
+        return false;
+      }
+    }
+    
+    // TODO: Check data indexing ... 
+     
+    return true;
+  }
+
+  private static boolean canLoadTrainer(String className) {
+    try {
+      Class<?> trainerClass = Class.forName(className);
+      if(trainerClass != null &&
+          (EventTrainer.class.isAssignableFrom(trainerClass)
+              || SequenceTrainer.class.isAssignableFrom(trainerClass))) {
+        return true;
+      }
+    } catch (ClassNotFoundException e) {
+      // fail
+    }
+    return false;
+  }
+      

INS31 INS31 INS83 INS83 INS39 INS42 INS44 INS8 INS83 INS83 INS39 INS42 INS44 INS8 INS74 INS42 INS60 INS25 INS54 INS60 INS25 INS41 INS43 INS42 INS54 INS41 INS43 INS43 INS43 INS43 INS59 INS27 INS8 INS8 INS12 INS43 INS59 INS27 INS8 INS9 INS42 INS8 INS12 INS9 INS42 INS42 INS42 INS42 INS42 INS32 INS27 INS38 INS41 INS60 INS25 INS60 INS25 INS44 INS8 INS42 INS42 INS32 INS42 INS33 INS25 INS60 INS25 INS44 INS8 INS42 INS42 INS40 INS42 INS33 INS36 INS9 INS43 INS59 INS27 INS21 INS43 INS59 INS27 INS21 INS43 INS42 INS41 INS42 INS42 INS40 INS38 INS8 INS74 INS59 INS27 INS8 INS43 INS42 INS27 INS42 INS42 INS32 INS42 INS33 INS32 INS42 INS42 INS32 INS42 INS33 INS32 INS42 INS9 INS36 INS41 INS43 INS76 INS42 INS32 INS27 INS36 INS41 INS42 INS32 INS32 INS42 INS42 INS40 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS42 INS42 INS27 INS9 INS42 INS42 INS42 INS42 INS42 INS33 INS27 INS9 INS42 INS42 INS42 INS42 INS42 INS32 INS32 INS32 INS32 INS40 INS42 INS42 INS40 INS42 INS42 INS57 INS42 INS42 INS57 INS42 INS42 INS43 INS43 INS42 INS42 DEL40 DEL26 DEL40 DEL26