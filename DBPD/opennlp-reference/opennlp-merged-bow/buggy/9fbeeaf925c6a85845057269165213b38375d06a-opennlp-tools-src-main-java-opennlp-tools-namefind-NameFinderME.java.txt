OPENNLP-228 Moved sequence validator out of the name finder, and made it interchangeable

git-svn-id: https://svn.apache.org/repos/asf/incubator/opennlp/trunk@1148230 13f79535-47bb-0310-9956-ffa450edef68

-  private static class NameFinderSequenceValidator implements
-      SequenceValidator<String> {
-    
-    public boolean validSequence(int i, String[] inputSequence,
-        String[] outcomesSequence, String outcome) {
-      
-      // outcome is formatted like "cont" or "sometype-cont", so we
-      // can check if it ends with "cont".
-      if (outcome.endsWith(CONTINUE)) {
-        
-        int li = outcomesSequence.length - 1;
-        
-        if (li == -1) {
-          return false;
-        } else if (outcomesSequence[li].endsWith(OTHER)) {
-          return false;
-        } else if (outcomesSequence[li].endsWith(CONTINUE)) {
-          // if it is continue, we have to check if previous match was of the same type 
-          String previousNameType = extractNameType(outcomesSequence[li]);
-          String nameType = extractNameType(outcome);
-          if( previousNameType != null || nameType != null ) {
-            if( nameType != null ) {
-              if( nameType.equals(previousNameType) ){
-                return true;
-              }
-            }
-            return false; // outcomes types are not equal
-          }
-        }
-      }
-      return true;
-    }
-  }
+
-  public NameFinderME(TokenNameFinderModel model, AdaptiveFeatureGenerator generator, int beamSize) {
+  public NameFinderME(TokenNameFinderModel model, AdaptiveFeatureGenerator generator, int beamSize,
+      SequenceValidator<String> sequenceValidator) {
+    if (sequenceValidator == null)
+      sequenceValidator = new NameFinderSequenceValidator();
+    
-        new NameFinderSequenceValidator(), beamSize);
+        sequenceValidator, beamSize);
+  public NameFinderME(TokenNameFinderModel model, AdaptiveFeatureGenerator generator, int beamSize) {
+    this(model, generator, beamSize, null);
+  }
+  
-  private static final String extractNameType(String outcome) {
+  static final String extractNameType(String outcome) {

MOV31 INS44 UPD42 INS44 INS8 MOV74 INS42 INS25 INS43 UPD42 INS43 UPD42 INS39 INS42 INS17 INS27 INS21 UPD42 MOV42 UPD42 MOV42 INS42 INS42 INS42 INS33 INS42 INS33 INS7 INS42 MOV14 INS42 DEL83 DEL83 DEL42 DEL55 DEL39 DEL39 DEL42 DEL44 DEL43 DEL85 DEL5 DEL43 DEL85 DEL5 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL32 DEL39 DEL42 DEL40 DEL34 DEL27 DEL59 DEL60 DEL42 DEL34 DEL38 DEL27 DEL9 DEL41 DEL8 DEL42 DEL42 DEL2 DEL42 DEL42 DEL32 DEL9 DEL41 DEL8 DEL42 DEL42 DEL2 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL2 DEL32 DEL59 DEL60 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL33 DEL27 DEL42 DEL33 DEL27 DEL27 DEL42 DEL33 DEL27 DEL42 DEL42 DEL42 DEL32 DEL9 DEL41 DEL8 DEL25 DEL8 DEL25 DEL9 DEL41 DEL8 DEL25 DEL8 DEL25 DEL25 DEL25 DEL8 DEL25 DEL9 DEL41 DEL8 DEL83