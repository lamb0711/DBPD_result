OPENNLP-844 ngram feature range in doccat now as parameter

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1741643 13f79535-47bb-0310-9956-ffa450edef68

+import opennlp.tools.util.InvalidFormatException;
+
+ * Generates ngram features for a document.
+  //default values for bigrams
+  private int minGram = 2;
+  private int maxGram = 2;
+
+  /**
+   * Constructor for ngrams.
+   *
+   * @param minGram minGram value - which means minimum words in ngram features
+   * @param maxGram maxGram value - which means maximum words in ngram features
+   * @throws InvalidFormatException
+   */
+  public NGramFeatureGenerator(int minGram, int maxGram) throws InvalidFormatException {
+    if (minGram > 0 && maxGram > 0) {
+      if (minGram <= maxGram) {
+        this.minGram = minGram;
+        this.maxGram = maxGram;
+      } else {
+        throw new InvalidFormatException("Minimum range value (minGram) should be less than or equal to maximum range value (maxGram)!");
+      }
+    } else {
+      throw new InvalidFormatException("Both minimum range value (minGram) & maximum range value (maxGram) should be greater than or equal to 1!");
+    }
+  }
+
+  /**
+   * Default constructor for Bi grams
+   */
+  public NGramFeatureGenerator() {
+  }
+
+  /**
+   * Extract ngram features from given text fragments
+   *
+   * @param text      the text fragments to extract features from
+   * @param extraInfo optional extra information
+   * @return a collection of n gram features
+   */
-    for (int i = 0; i < text.length - 1; i++) {
-      features.add("ng=" + text[i] + ":" + text[i + 1]);
+    for (int i = 0; i <= text.length - minGram; i++) {
+      String feature = "ng=";
+      for (int y = 0; y < maxGram && i + y < text.length; y++) {
+        feature = feature + ":" + text[i + y];
+        int gramCount = y + 1;
+        if (maxGram >= gramCount && gramCount >= minGram) {
+          features.add(feature);
+        }
+      }

INS26 INS40 INS23 INS23 INS31 INS31 INS83 INS39 INS59 INS83 INS39 INS59 INS29 INS83 INS42 INS44 INS44 INS43 INS8 INS29 INS83 INS42 INS8 INS29 INS66 INS42 INS34 INS42 INS34 INS65 INS65 INS65 INS65 INS39 INS42 INS39 INS42 INS42 INS25 INS65 INS65 INS65 INS65 INS65 INS66 INS42 INS66 INS42 INS66 INS42 INS27 INS8 INS8 INS66 INS66 INS42 INS66 INS42 INS66 INS66 UPD27 INS27 INS27 INS25 INS53 INS60 INS24 INS42 INS34 INS42 INS34 INS27 INS8 INS8 INS14 INS42 INS43 INS59 INS58 INS27 INS37 INS8 INS42 INS42 INS21 INS21 INS53 INS43 INS45 INS42 INS42 INS45 INS39 INS59 INS27 INS27 INS42 INS21 INS60 INS25 INS7 INS7 INS14 INS42 INS42 INS34 INS42 INS42 INS27 INS40 INS7 INS39 INS59 INS27 INS8 INS22 INS42 INS22 INS42 INS43 INS45 INS42 INS42 INS42 INS27 INS42 INS27 INS27 INS27 INS21 INS52 INS42 INS52 INS42 INS42 INS42 MOV45 INS2 UPD42 MOV42 MOV34 INS42 INS42 INS42 INS42 INS32 MOV42 INS27 INS42 INS42 INS42 INS42 INS42 DEL34 DEL42 DEL42 DEL45 DEL42 DEL42 DEL2 DEL27 DEL2 DEL27 DEL32 DEL21