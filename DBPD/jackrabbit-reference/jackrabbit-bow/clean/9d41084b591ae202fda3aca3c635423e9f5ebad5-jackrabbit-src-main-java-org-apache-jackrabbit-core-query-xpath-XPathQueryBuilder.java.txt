JCR-247: Child axis support for XPath predicates
- limit predicates to location deref steps

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@477611 13f79535-47bb-0310-9956-ffa450edef68

+            case JJTPREDICATE:
+                if (queryNode.getType() == QueryNode.TYPE_LOCATION
+                        || queryNode.getType() == QueryNode.TYPE_DEREF) {
+                    node.childrenAccept(this, queryNode);
+                } else {
+                    // predicate not allowed here
+                    exceptions.add(new InvalidQueryException("Unsupported location for predicate"));
+                }
+                break;
