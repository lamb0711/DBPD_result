JCR-1947: JSR 283: Node Type Attribute Subtyping Rules

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@784824 13f79535-47bb-0310-9956-ffa450edef68

+                // check whether specified node type definition overrides
+                // a supertypes's primaryItem -> illegal (JCR-1947)
+                if (ntd.getPrimaryItemName() != null
+                        && est.getPrimaryItemName() != null) {
+                    String msg = "[" + name + "] primaryItemName is already specified by a supertype and must therefore not be overridden.";
+                    log.debug(msg);
+                    throw new InvalidNodeTypeDefException(msg);
+
+                }
