- rearranging structure of versioning (will corrupt versioned data)
- adding observation of version storage (work in progress)


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159366 13f79535-47bb-0310-9956-ffa450edef68

-     * the id of this version
-     */
-    private String versionId;
-
-    /**
-    InternalVersionImpl(InternalVersionHistoryImpl vh, PersistentNode node) {
+    InternalVersionImpl(InternalVersionHistoryImpl vh, PersistentNode node, QName name) {
-
-        // get id
-        versionId = (String) node.getPropertyValue(NativePVM.PROPNAME_VERSION_ID).internalValue();
+        this.name = name;
-        values = node.getPropertyValues(NativePVM.PROPNAME_VERSION_NAME);
-        if (values != null) {
-            name = (QName) values[0].internalValue();
-        } else {
-            name = null; // ????
-        }
-        return versionId;
-    }
-
-    protected String getPersistentId() {
-            return (InternalFrozenNode) getVersionManager().getItemByInternal(entry.getUUID());
+            return (InternalFrozenNode) getVersionManager().getItem(entry.getUUID());
