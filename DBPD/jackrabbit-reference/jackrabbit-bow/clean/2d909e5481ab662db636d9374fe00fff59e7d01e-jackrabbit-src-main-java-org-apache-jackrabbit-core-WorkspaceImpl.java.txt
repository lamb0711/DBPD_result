JCR-565: Renamed ObservationManagerFactory to ObservationDispatcher and inlined the factory method

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@446866 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.observation.ObservationManagerFactory;
+import org.apache.jackrabbit.core.observation.ObservationDispatcher;
-     * {@inheritDoc}
+     * Returns the observation manager of this session. The observation manager
+     * is lazily created if it does not exist yet.
+     *
+     * @return the observation manager of this session
+     * @throws RepositoryException if a repository error occurs
-            throws UnsupportedRepositoryOperationException, RepositoryException {
+            throws RepositoryException {
-                ObservationManagerFactory factory =
-                        rep.getObservationManagerFactory(wspConfig.getName());
-                obsMgr = factory.createObservationManager(session, session.getItemManager());
+                obsMgr = new ObservationManagerImpl(
+                        rep.getObservationDispatcher(wspConfig.getName()),
+                        session, session.getItemManager());
