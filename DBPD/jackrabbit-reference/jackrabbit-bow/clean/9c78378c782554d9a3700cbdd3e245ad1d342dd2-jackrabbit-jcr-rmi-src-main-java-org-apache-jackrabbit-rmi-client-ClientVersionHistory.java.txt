JCR-3206 JSR-283 support for RMI / Implementation of the missing versioning parts

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1377571 13f79535-47bb-0310-9956-ffa450edef68

-            String versionUUID = version.getUUID();
-            return remote.hasVersionLabel(versionUUID, label);
+            String versionIdentifier = version.getIdentifier();
+            return remote.hasVersionLabel(versionIdentifier, label);
-            String versionUUID = version.getUUID();
-            return remote.getVersionLabels(versionUUID);
+            String versionIdentifier = version.getIdentifier();
+            return remote.getVersionLabels(versionIdentifier);
-    /** {@inheritDoc} */
+    /** {@inheritDoc}
+     * @deprecated As of JCR 2.0, {@link #getVersionableIdentifier} should be
+     *             used instead.
+     */
+    /** {@inheritDoc} */
-        throw new UnsupportedRepositoryOperationException("TODO: JCR-3206");
+        try {
+            return getFactory().getNodeIterator(getSession(), remote.getAllFrozenNodes());
+        } catch (RemoteException ex) {
+            throw new RemoteRepositoryException(ex);
+        }
+    /** {@inheritDoc} */
-        throw new UnsupportedRepositoryOperationException("TODO: JCR-3206");
+        try {
+            return getFactory().getNodeIterator(getSession(), remote.getAllLinearFrozenNodes());
+        } catch (RemoteException ex) {
+            throw new RemoteRepositoryException(ex);
+        }
+    /** {@inheritDoc} */
-        throw new UnsupportedRepositoryOperationException("TODO: JCR-3206");
+        try {
+            return getFactory().getVersionIterator(getSession(), remote.getAllLinearVersions());
+        } catch (RemoteException ex) {
+            throw new RemoteRepositoryException(ex);
+        }
+    /** {@inheritDoc} */
-        throw new UnsupportedRepositoryOperationException("TODO: JCR-3206");
+        try {
+            return remote.getVersionableIdentifier();
+        } catch (RemoteException ex) {
+            throw new RemoteRepositoryException(ex);
+        }
