JCR-2744: Avoid element arrays in PathImpl

Use new path construction mechanisms in PathBuilder and PathFactoryImpl

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@995787 13f79535-47bb-0310-9956-ffa450edef68

-            PathBuilder builder = new PathBuilder();
-            Name name = decode(resolver.getQName(propName));
-            Path relPath = getRelativePath();
-            if (relPath != null) {
-                builder.addAll(relPath.getElements());
+            Path.Element element = PathFactoryImpl.getInstance().createElement(
+                    decode(resolver.getQName(propName)));
+            Path path = getRelativePath();
+            if (path != null) {
+                path = path.resolve(element);
+            } else {
+                path = PathFactoryImpl.getInstance().create(element);
-            builder.addLast(name);
-            spec = new OrderQueryNode.OrderSpec(builder.getPath(), true);
+            spec = new OrderQueryNode.OrderSpec(path, true);
