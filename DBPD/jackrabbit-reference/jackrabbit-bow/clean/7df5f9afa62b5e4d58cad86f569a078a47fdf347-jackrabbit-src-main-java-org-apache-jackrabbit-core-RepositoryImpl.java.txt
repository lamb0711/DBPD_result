enabling override of versionmanager implementation

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368777 13f79535-47bb-0310-9956-ffa450edef68

-        VersioningConfig vConfig = repConfig.getVersioningConfig();
-        PersistenceManager pm = createPersistenceManager(vConfig.getHomeDir(),
-                vConfig.getFileSystem(),
-                vConfig.getPersistenceManagerConfig(),
-                rootNodeUUID,
-                nsReg,
-                ntReg);
-        vMgr = new VersionManagerImpl(pm, ntReg, delegatingDispatcher,
-                VERSION_STORAGE_NODE_UUID, SYSTEM_ROOT_NODE_UUID);
+        vMgr = createVersionManager(repConfig.getVersioningConfig());
+     * Creates the version manager.
+     *
+     * @param vConfig the versioning config
+     * @return the newly created version manager
+     * @throws RepositoryException if an error occurrs
+     */
+    protected VersionManager createVersionManager(VersioningConfig vConfig)
+            throws RepositoryException {
+        PersistenceManager pm = createPersistenceManager(vConfig.getHomeDir(),
+                vConfig.getFileSystem(),
+                vConfig.getPersistenceManagerConfig(),
+                rootNodeUUID,
+                nsReg,
+                ntReg);
+        return new VersionManagerImpl(pm, ntReg, delegatingDispatcher, VERSION_STORAGE_NODE_UUID, SYSTEM_ROOT_NODE_UUID);
+    }
+
+    /**
