[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

-                s = (ItemState) nodes.get(id);
+                s = nodes.get(id);
-        throw new NoSuchItemStateException(id.getUUID());
+        throw new NoSuchItemStateException(id.toString());
-     * @return
+     * @return <code>true</code> if it has the node state
-     * @return
+     * @return <code>true</code> if it has the property state
-            NodeState parent = (NodeState) getItemState(new NodeId(id.getParentUUID()));
+            NodeState parent = (NodeState) getItemState(id.getParentId());
-        NodeState parent = (NodeState) getItemState(new NodeId(id.getParentUUID()));
+        NodeState parent = (NodeState) getItemState(id.getParentId());
-        VirtualPropertyState prop = new VirtualPropertyState(name, parent.getUUID());
+        PropertyId id = new PropertyId(parent.getNodeId(), name);
+        VirtualPropertyState prop = new VirtualPropertyState(id);
-                                            String uuid, QName nodeTypeName)
+                                            NodeId id, QName nodeTypeName)
-        if (uuid == null) {
-            uuid = UUID.randomUUID().toString();    // version 4 uuid
+        if (id == null) {
+            id = new NodeId(UUID.randomUUID());
-        state = new VirtualNodeState(this, parent.getUUID(), uuid, nodeTypeName, new QName[0]);
+        state = new VirtualNodeState(this, parent.getNodeId(), id, nodeTypeName, new QName[0]);
-     * @return
+     * @return the node type manager
-                    invalidateItem(new NodeId(pe.getUUID()), true);
+                    invalidateItem(pe.getId(), true);
-            String msg = "internal error: failed to build effective node type for node " + parent.getUUID();
+            String msg = "internal error: failed to build effective node type for node " + parent.getNodeId();
