JCR-2250: Base64 bug - last buffer not flushed


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@802691 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.BufferedWriter;
-        Writer writer = new OutputStreamWriter(out, CHARSET);
-        encode(in, writer);
+        Writer writer = new BufferedWriter(new OutputStreamWriter(out, CHARSET));
+        try {
+            encode(in, writer);
+        } finally {
+            try {
+                writer.flush();
+            } catch (IOException ignore) {
+            }
+        }
