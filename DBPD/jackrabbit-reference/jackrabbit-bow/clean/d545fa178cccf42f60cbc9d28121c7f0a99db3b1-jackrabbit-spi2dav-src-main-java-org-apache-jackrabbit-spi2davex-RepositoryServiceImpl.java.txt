JCR-4536: spi2dav: allow disabling cert and host name checks for TLS connections (also adds test coverage for proxy config)

patch by Konrad Windszus (kwin)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1879988 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi2dav.ConnectionOptions;
-     * as size for the item cache and {@link #MAX_CONNECTIONS_DEFAULT} for the
-     * maximum number of connections on the client.
+     * as size for the item cache, {@link #MAX_CONNECTIONS_DEFAULT} for the
+     * maximum number of connections on the client and {@link ConnectionOptions.DEFAULT}.
-        this(jcrServerURI, null, batchReadConfig, ItemInfoCacheImpl.DEFAULT_CACHE_SIZE);
+        this(jcrServerURI, null, batchReadConfig, ItemInfoCacheImpl.DEFAULT_CACHE_SIZE, ConnectionOptions.DEFAULT);
-    /**
-     * Same as {@link #RepositoryServiceImpl(String, String, BatchReadConfig, int, int)}
-     * using {@link #MAX_CONNECTIONS_DEFAULT} for the maximum number of
-     * connections on the client.
-     *
-     * @param jcrServerURI The server uri.
-     * @param defaultWorkspaceName The default workspace name.
-     * @param batchReadConfig The batch read configuration.
-     * @param itemInfoCacheSize The size of the item info cache.
-     * @throws RepositoryException If an exception occurs.
-     */
-    public RepositoryServiceImpl(String jcrServerURI, String defaultWorkspaceName,
-                                 BatchReadConfig batchReadConfig, int itemInfoCacheSize) throws RepositoryException {
-        this(jcrServerURI, defaultWorkspaceName, batchReadConfig, itemInfoCacheSize, MAX_CONNECTIONS_DEFAULT);
-    }
+     * @param ConnectionOptions advanced connection options.
-                                 BatchReadConfig batchReadConfig, int itemInfoCacheSize,
-                                 int maximumHttpConnections) throws RepositoryException {
+                                 BatchReadConfig batchReadConfig, int itemInfoCacheSize, ConnectionOptions connectionOptions) throws RepositoryException {
-                PathFactoryImpl.getInstance(), new QValueFactoryImpl(), itemInfoCacheSize, maximumHttpConnections);
+                PathFactoryImpl.getInstance(), new QValueFactoryImpl(), itemInfoCacheSize, connectionOptions);
