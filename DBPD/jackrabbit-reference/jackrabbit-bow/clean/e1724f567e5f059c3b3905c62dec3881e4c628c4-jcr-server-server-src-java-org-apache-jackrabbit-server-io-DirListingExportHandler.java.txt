Webdav Simple: Delegate PROPPATCH to (extended) IOHandlers

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@431546 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
-public class DirListingExportHandler implements IOHandler {
+public class DirListingExportHandler implements IOHandler, PropertyHandler {
+     */
+    public DirListingExportHandler() {
+    }
+
+    /**
+     * Creates a new <code>DirListingExportHandler</code>
-    
+
+
+    //----------------------------------------------------< PropertyHandler >---
+
+    public boolean canExport(PropertyExportContext context, boolean isCollection) {
+        return canExport((ExportContext)context, isCollection);
+    }
+
+    /**
+     * @see PropertyHandler#exportProperties(PropertyExportContext, boolean)
+     */
+    public boolean exportProperties(PropertyExportContext exportContext, boolean isCollection) throws RepositoryException {
+        if (!canExport(exportContext, isCollection)) {
+            throw new RepositoryException(getName() + ": Cannot export properties for context " + exportContext);
+        }
+        exportContext.setModificationTime(new Date().getTime());
+        exportContext.setContentType("text/html", "UTF-8");
+        exportContext.setETag("");
+        return true;
+    }
+
+    public boolean canImport(PropertyImportContext context, boolean isCollection) {
+        return false;
+    }
+
+    /**
+     * @see PropertyHandler#importProperties(PropertyImportContext, boolean)
+     */
+    public Map importProperties(PropertyImportContext importContext, boolean isCollection) throws RepositoryException {
+        // export facilities only -> throw
+        throw new RepositoryException(getName() + ": Cannot import properties.");
+    }
