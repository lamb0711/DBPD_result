JCR-1902: avoid warning when parent-set property is computed on root node

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@723784 13f79535-47bb-0310-9956-ffa450edef68

-            //TODO remove this check once jcr2 is out
-            if (!(this.node instanceof org.apache.jackrabbit.api.jsr283.Node)) {
-                DavResourceLocator loc = this.locator.getFactory().createResourceLocator(
-                        this.locator.getPrefix(), this.locator.getWorkspacePath(), this.node.getParent().getPath(), false);
-                return Collections.singleton(new ParentElement(loc.getHref(true), this.node.getName()));
+            if (this.node.getDepth() > 0) {
+                //TODO remove this check once jcr2 is out
+                if (!(this.node instanceof org.apache.jackrabbit.api.jsr283.Node)) {
+                    DavResourceLocator loc = this.locator.getFactory().createResourceLocator(
+                            this.locator.getPrefix(), this.locator.getWorkspacePath(), this.node.getParent().getPath(), false);
+                    return Collections.singleton(new ParentElement(loc.getHref(true), this.node.getName()));
+                }
+                Set ps = new HashSet();
+                NodeIterator sharedSetIterator = ((org.apache.jackrabbit.api.jsr283.Node) this.node).getSharedSet();
+                while (sharedSetIterator.hasNext()) {
+                    Node sharednode = sharedSetIterator.nextNode();
+                    DavResourceLocator loc = this.locator.getFactory().createResourceLocator(
+                            this.locator.getPrefix(), this.locator.getWorkspacePath(), sharednode.getParent().getPath(), false);
+                    ps.add(new ParentElement(loc.getHref(true), sharednode.getName()));
+                }
+                return ps;
-            Set ps = new HashSet();
-            NodeIterator sharedSetIterator = ((org.apache.jackrabbit.api.jsr283.Node) this.node).getSharedSet();
-            while (sharedSetIterator.hasNext()) {
-                Node sharednode = sharedSetIterator.nextNode();
-                DavResourceLocator loc = this.locator.getFactory().createResourceLocator(
-                        this.locator.getPrefix(), this.locator.getWorkspacePath(), sharednode.getParent().getPath(), false);
-                ps.add(new ParentElement(loc.getHref(true), sharednode.getName()));
-            }
-            return ps;
-            return Collections.EMPTY_SET; 
+        return Collections.EMPTY_SET;
