JCR-2887 : Split PrivilegeRegistry in a per-session manager instance and a repository level registry [work in progress]

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1092723 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.commons.conversion.NamePathResolver;
-    protected NamePathResolver resolver;
+    protected PrivilegeManagerImpl privilegeManager;
-        return (PrivilegeManagerImpl) ((JackrabbitWorkspace) session.getWorkspace()).getPrivilegeManager();
+        return privilegeManager;
-                return getPrivilegeManagerImpl().getBits(getAllPrivilege());
+                return PrivilegeRegistry.getBits(new Privilege[] {getAllPrivilege()});
-                    return getPrivilegeManagerImpl().getBits(getReadPrivilege());
+                    return PrivilegeRegistry.getBits(new Privilege[] {getReadPrivilege()});
-        resolver = (NamePathResolver) systemSession;
+        privilegeManager = (PrivilegeManagerImpl) ((JackrabbitWorkspace) session.getWorkspace()).getPrivilegeManager();
