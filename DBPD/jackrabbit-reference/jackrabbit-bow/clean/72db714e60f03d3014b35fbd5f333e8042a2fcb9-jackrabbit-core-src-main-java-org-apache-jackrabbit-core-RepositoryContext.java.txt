JCR-2640: Internal repository context

Use the RepositoryContext to track the JackrabbitSecurityManager instance.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948866 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.JackrabbitSecurityManager;
+     * Security manager of this repository;
+     */
+    private JackrabbitSecurityManager securityManager;
+
+    /**
-    public void setFileSystem(FileSystem fileSystem) {
+    void setFileSystem(FileSystem fileSystem) {
-    public void setDataStore(DataStore dataStore) {
+    void setDataStore(DataStore dataStore) {
-    public void setClusterNode(ClusterNode clusterNode) {
+    void setClusterNode(ClusterNode clusterNode) {
-    public void setWorkspaceManager(WorkspaceManager workspaceManager) {
+    void setWorkspaceManager(WorkspaceManager workspaceManager) {
+    /**
+     * Returns the security manager of this repository.
+     *
+     * @return security manager
+     */
+    public JackrabbitSecurityManager getSecurityManager() {
+        assert securityManager != null;
+        return securityManager;
+    }
+
+    /**
+     * Sets the security manager of this repository.
+     *
+     * @param securityManager security manager
+     */
+    void setSecurityManager(JackrabbitSecurityManager securityManager) {
+        assert securityManager != null;
+        this.securityManager = securityManager;
+    }
+
