JCR-3565: AbstractLocatorFactory.createResourceLocator needs to be called with an absolute URI as prefix

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1466060 13f79535-47bb-0310-9956-ffa450edef68

+    private final String uriPrefix;
-        if (createAbsoluteURI)  {
-            String host = getHeader("Host");
-            String scheme = getScheme();
-            hrefPrefix = scheme + "://" + host + getContextPath();
-        } else {
-            hrefPrefix = getContextPath();
-        }
+        String host = getHeader("Host");
+        String scheme = getScheme();
+        this.uriPrefix = scheme + "://" + host + getContextPath();
+        this.hrefPrefix = createAbsoluteURI ? this.uriPrefix : getContextPath();
-        return factory.createResourceLocator(hrefPrefix, path);
+        return factory.createResourceLocator(uriPrefix, path);
