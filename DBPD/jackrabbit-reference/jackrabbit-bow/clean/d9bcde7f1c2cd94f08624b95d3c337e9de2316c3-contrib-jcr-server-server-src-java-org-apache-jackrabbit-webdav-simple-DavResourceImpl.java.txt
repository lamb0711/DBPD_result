1) JCR-185 - filter jcr properties in jcr-server
2) move helper-methods from ResourceFactoryImpl to DavMethod
3) do no rely on HttpServletRequest.getContentLength() for reading the request body (rev. 354815)
4) no hardcoded check for root-path in ResourceConfig (rev. 354818)	 
5) mark private methods in DavResourceImpl 'private' (rev. 354820)


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@355130 13f79535-47bb-0310-9956-ffa450edef68

-    private ResourceFilter filter;
+    private ItemFilter filter;
-        this.filter = config.getResourceFilter();
+        this.filter = config.getItemFilter();
-            // todo: should filter be respected for properties as well?
-                if (def.isMultiple()) {
-                    log.debug("Multivalue property '" + pName + "' not added to webdav property set.");
+                if (def.isMultiple() || isFilteredItem(p)) {
+                    log.debug("Property '" + pName + "' not added to webdav property set (either multivalue or filtered).");
-
-                    if (!isFilteredNode(n)) {
+                    if (!isFilteredItem(n)) {
-    protected boolean isJsrLockable() {
+    private boolean isJsrLockable() {
-    protected boolean isLocked(DavResource res) {
+    private boolean isLocked(DavResource res) {
-    protected DavPropertyName getDavName(String jcrName, Session session) throws RepositoryException {
+    private DavPropertyName getDavName(String jcrName, Session session) throws RepositoryException {
-    protected String getJcrName(DavPropertyName propName) throws RepositoryException {
+    private String getJcrName(DavPropertyName propName) throws RepositoryException {
-    protected void setJcrProperty(DavProperty property) throws RepositoryException {
+    private void setJcrProperty(DavProperty property) throws RepositoryException {
-    protected void removeJcrProperty(DavPropertyName propertyName) throws RepositoryException {
+    private void removeJcrProperty(DavPropertyName propertyName) throws RepositoryException {
-    protected boolean isFilteredResource(DavResource resource) {
+    private boolean isFilteredResource(DavResource resource) {
-        return filter != null && filter.isFilteredResource(resource.getDisplayName(), session.getRepositorySession());
+        return filter != null && filter.isFilteredItem(resource.getDisplayName(), session.getRepositorySession());
-    protected boolean isFilteredNode(Node n) {
-        return filter != null && filter.isFilteredItem(n);
+    private boolean isFilteredItem(Item item) {
+        return filter != null && filter.isFilteredItem(item);
