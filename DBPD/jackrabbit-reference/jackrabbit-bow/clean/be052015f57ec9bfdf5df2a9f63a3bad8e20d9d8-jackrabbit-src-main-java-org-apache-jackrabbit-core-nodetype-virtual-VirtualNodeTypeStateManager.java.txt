JCR-257: Use separate index for jcr:system tree

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@388123 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.Path;
+import org.apache.jackrabbit.name.MalformedPathException;
+    /**
+     * Path: /jcr:system/jcr:nodeTypes
+     */
+    private static final Path NODE_TYPES_PATH;
+
+    static {
+        try {
+            Path.PathBuilder builder = new Path.PathBuilder();
+            builder.addRoot();
+            builder.addLast(QName.JCR_SYSTEM);
+            builder.addLast(QName.JCR_NODETYPES);
+            NODE_TYPES_PATH = builder.getPath();
+        } catch (MalformedPathException e) {
+            // will not happen. path is always valid
+            throw new InternalError("Cannot initialize path");
+        }
+    }
-                obsDispatcher.dispatch(events, systemSession);
+                obsDispatcher.dispatch(events, systemSession, NODE_TYPES_PATH);
-                obsDispatcher.dispatch(events, systemSession);
+                obsDispatcher.dispatch(events, systemSession, NODE_TYPES_PATH);
