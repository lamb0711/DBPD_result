JCR-3886 [jackrabbit-aws-ext] Support IAM role to connect to S3 bucket

Fixed. If accesskey & secret key are not passed it tries to create AmazonS3Client from environment. 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1687897 13f79535-47bb-0310-9956-ffa450edef68

+import com.amazonaws.util.StringUtils;
-        AWSCredentials credentials = new BasicAWSCredentials(
-            prop.getProperty(S3Constants.ACCESS_KEY),
-            prop.getProperty(S3Constants.SECRET_KEY));
-        AmazonS3Client s3service =  new AmazonS3Client(credentials, getClientConfiguration(prop));
+        String accessKey = prop.getProperty(S3Constants.ACCESS_KEY);
+        String secretKey = prop.getProperty(S3Constants.SECRET_KEY);
+        AmazonS3Client s3service = null;
+        if (StringUtils.isNullOrEmpty(accessKey)
+            || StringUtils.isNullOrEmpty(secretKey)) {
+            LOG.info("Configuring Amazon Client from environment");
+            s3service = new AmazonS3Client(getClientConfiguration(prop));
+        } else {
+            LOG.info("Configuring Amazon Client from property file.");
+            AWSCredentials credentials = new BasicAWSCredentials(accessKey,
+                secretKey);
+            s3service = new AmazonS3Client(credentials,
+                getClientConfiguration(prop));
+        }
