JCR-3115: Versioning fixup leaves persistence in a state where the node can't be made versionable again

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1185691 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.id.NodeId;
+
+    private final NodeId versionHistoryNodeId;
+    
+        this.versionHistoryNodeId = null;
-     * message and root cause.
+     * message.
-     * @param message   the detail message. The detail message is saved for
-     *                  later retrieval by the {@link #getMessage()} method.
-     * @param rootCause root failure cause
+     * @param message the detail message. The detail message is saved for
+     *                later retrieval by the {@link #getMessage()} method.
+     * @param rootCause root cause (or otherwise <code>null</code>)
+     * @param versionHistoryNodeId NodeId of the version history that has problems (or otherwise <code>null</code>
-    public InconsistentVersioningState(String message, Throwable rootCause) {
+    public InconsistentVersioningState(String message, NodeId versionHistoryNodeId, Throwable rootCause) {
+        this.versionHistoryNodeId = versionHistoryNodeId;
+    /**
+     * @return the NodeId of the version history having problems or <code>null</code>
+     * when unknown.
+     */
+    public NodeId getVersionHistoryNodeId() {
+        return this.versionHistoryNodeId;
+    }
