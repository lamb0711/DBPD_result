- fixing some versioning persistence problems

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@124539 13f79535-47bb-0310-9956-ffa450edef68

-            throw new RepositoryException("Unable to initialize PersistentVersionManager: " + e.toString());
+            throw new RepositoryException("Unable to initialize PersistentVersionManager: " + e.toString(), e);
+        // check if version history for that node already exists
+        InternalVersionHistoryImpl hist = (InternalVersionHistoryImpl) getVersionHistory(node.internalGetUUID());
+        if (hist!=null) {
+            return hist;
+        }
+
-        InternalVersionHistoryImpl hist = InternalVersionHistoryImpl.create(this, root, uuid, historyNodeName, node);
+        hist = InternalVersionHistoryImpl.create(this, root, uuid, historyNodeName, node);
