JCR-2715: Improved join query performance

Extend LuceneQueryFactory to handle more QOM constraints.
Simplify handling of bind variables.
Improve OperandEvaluator, including its javadocs.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1026361 13f79535-47bb-0310-9956-ffa450edef68

-                                    Map<Name, Value> bindVariableValues,
+                                    Map<String, Value> bindVariableValues,
-        private final Map<Name, Value> bindVariableValues;
+        private final Map<String, Value> bindVariableValues;
-        Visitor(Map<Name, Value> bindVariableValues,
+        Visitor(Map<String, Value> bindVariableValues,
-            return bindVariableValues.get(node.getBindVariableQName());
+            String name = node.getBindVariableName();
+            Value value = bindVariableValues.get(name);
+            if (value != null) {
+                return value;
+            } else {
+                throw new RepositoryException(
+                        "No value specified for bind variable " + name);
+            }
