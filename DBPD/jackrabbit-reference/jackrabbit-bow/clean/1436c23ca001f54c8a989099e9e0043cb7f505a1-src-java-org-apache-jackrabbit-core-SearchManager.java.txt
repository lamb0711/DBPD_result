- Removed JCRQL implementation
- Added proper QName support to search
- redesigned parsing and formating of queries (better separation of abstract query tree and concrete syntax)
- Some improvements in SQL: colon is now supported in identifier without having to use double quotes, LIKE now supports escaping

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@125778 13f79535-47bb-0310-9956-ffa450edef68

+ *
+ * @todo The SearchManager currently uses the system session to obtain an
+ * ItemStateManager from where it reads persistent ItemStates. This is kind
+ * of nasty, because the system session it is possible to change content through
+ * the system session as well.
+ * After switch to version 0.16 there is a shared ItemStateManager which
+ * represents the persistent view of item states.
+    /** Namespace URI for JCR functions */
+    // @todo check if consistent with spec
+    private static final String NS_JCRFN_PREFIX = "jcrfn";
+    public static final String NS_JCRFN_URI = "http://www.jcp.org/jcr/xpath-functions/1.0";
+
+        try {
+            nsReg.getPrefix(NS_JCRFN_URI);
+        } catch (RepositoryException e) {
+            // not yet known
+            nsReg.registerNamespace(NS_JCRFN_PREFIX, NS_JCRFN_URI);
+        }
