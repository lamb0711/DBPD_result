avoid to keep hard references to ItemImpl & ItemState instances

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@332056 13f79535-47bb-0310-9956-ffa450edef68

-    private NodeImpl root;
-
-     * Returns the root node instance of the repository.
-     *
-     * @return the root node.
-     * @throws RepositoryException
-     */
-    private synchronized NodeImpl getRoot() throws RepositoryException {
-        // lazy instantiation of root node
-        // to avoid chicken & egg kind of problems
-        if (root == null) {
-            try {
-                NodeState rootState = (NodeState) itemStateProvider.getItemState(rootNodeId);
-                // keep a hard reference to root node
-                root = createNodeInstance(rootState, rootNodeDef);
-            } catch (ItemStateException ise) {
-                String msg = "failed to retrieve state of root node";
-                log.debug(msg);
-                throw new RepositoryException(msg, ise);
-            }
-        }
-        return root;
-    }
-
-    /**
-        return getRoot();
+        return (NodeImpl) getItem(rootNodeId);
-            // shortcut
-            if (id.denotesNode() && id.equals(rootNodeId)) {
-                item = getRoot();
-            } else {
-                // create instance of item using its state object
-                item = createItemInstance(id);
-            }
+            // create instance of item
+            item = createItemInstance(id);
-        if (state.isNode()) {
+        if (id.equals(rootNodeId)) {
+            // special handling required for root node
+            item = createNodeInstance((NodeState) state, rootNodeDef);
+        } else if (state.isNode()) {
