- Upgrade to spec revision 0.16.4, fix test cases.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@161879 13f79535-47bb-0310-9956-ffa450edef68

+import junit.framework.Assert;
+
-    private void checkCondition(String str, boolean bool) throws SAXException {
-        if (!bool)
-            throw new SAXException(new ConditionException(str));
+    private void checkCondition(String str, boolean bool) {
+        Assert.assertTrue(str, bool);
-            for (int i = 0; i < propElems.size() -1; i++) {
+            for (int i = 0; i < propElems.size(); i++) {
-                                str = escapeString(str);
-                                for (int j = 0; j < size -1; j++) {
+                                for (int j = 0; j < size; j++) {
-                                    String val = (String)propElem.values.get(i);
+                                    String val = (String)propElem.values.get(j);
-                                    str = escapeString(str);
-     * Escapes the predefined entity references in XML.
-     * @param str
-     * @return  the escaped string
-     */
-    private String escapeString (String str) {
-        String orig = str;
-        String amp = "&";
-        String less = "<";
-        String great = ">";
-        String apo = "'";
-        String quot = "\"";
-
-        String r_amp = "&amp;";
-        String r_less = "&lt;";
-        String r_great = "&gt;";
-        String r_apo = "&apos;";
-        String r_quot = "&quot;";
-
-        String repl = orig.replaceAll(amp, r_amp);
-        repl =  repl.replaceAll(less, r_less);
-        repl =  repl.replaceAll(great, r_great);
-        repl =  repl.replaceAll(apo, r_apo);
-        repl =  repl.replaceAll(quot, r_quot);
-        return repl;
-    }
-
-    /**
