Refactoring step 3 (JCR-53)
 - Moved workspace.xml parsing to ConfigurationParser
 - Replaced createFileSystem with BeanConfig code
 - Added a TestAll suite for the config package

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@156058 13f79535-47bb-0310-9956-ffa450edef68

-abstract class AbstractConfig implements EntityResolver {
+abstract class AbstractConfig {
+    /**
+     * public id
+     */
+    public static final String PUBLIC_ID = "-//The Apache Software Foundation//DTD Workspace//EN";
+
-    protected final String configId;
-        configId = is.getSystemId() == null ? "[???]" : is.getSystemId();
-            parser.setEntityResolver(this);
+            parser.setEntityResolver(new EntityResolver() {
+                public InputSource resolveEntity(String publicId, String systemId)
+                        throws SAXException, IOException {
+                    if (publicId.equals(PUBLIC_ID)) {
+                        // load dtd resource
+                        return new InputSource(getClass().getClassLoader().getResourceAsStream(CONFIG_DTD_RESOURCE_PATH));
+                    } else {
+                        // use the default behaviour
+                        return null;
+                    }
+                }
+            });
-    //-------------------------------------------------------< EntityResolver >
-    /**
-     * @see EntityResolver#resolveEntity(String, String)
-     */
-    public abstract InputSource resolveEntity(String publicId, String systemId)
-            throws SAXException, IOException;
