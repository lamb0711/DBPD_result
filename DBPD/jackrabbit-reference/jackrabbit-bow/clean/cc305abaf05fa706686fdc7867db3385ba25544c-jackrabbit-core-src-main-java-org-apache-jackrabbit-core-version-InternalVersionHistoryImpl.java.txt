JCR-1592 - JSR 283: Activities


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@784261 13f79535-47bb-0310-9956-ffa450edef68

+        // check if referenced by an activity
+        InternalActivityImpl activity = v.getActivity();
+        if (activity != null) {
+            activity.removeVersion(v);
+        }
+
+        // check for jcr:activity
+        if (src.hasProperty(NameConstants.JCR_ACTIVITY)) {
+            InternalValue act = src.getProperty(NameConstants.JCR_ACTIVITY).internalGetValue();
+            vNode.setPropertyValue(NameConstants.JCR_ACTIVITY, act);
+        }
+
