JCR-1401 Removing-nodes with unexpected nodetype


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@682481 13f79535-47bb-0310-9956-ffa450edef68

+        long length = IOUtil.UNDEFINED_LENGTH;
-            return inputCtx.getContentLength();
-        } else if (inputFile != null) {
-            return inputFile.length();
-        } else {
-            log.debug("Unable to determine content length -> default value = " + IOUtil.UNDEFINED_LENGTH);
-            return IOUtil.UNDEFINED_LENGTH;
+            length =  inputCtx.getContentLength();
+        if (length < 0 && inputFile != null) {
+            length = inputFile.length();
+        }
+        if (length < 0) {
+            log.debug("Unable to determine content length -> default value = " + IOUtil.UNDEFINED_LENGTH);
+        }
+        return length;
