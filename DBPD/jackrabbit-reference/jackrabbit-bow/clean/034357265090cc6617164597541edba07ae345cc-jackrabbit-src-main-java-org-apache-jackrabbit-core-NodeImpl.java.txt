JCR-437 Restoring a node which has OPV=Version children fails if they are not versionable


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@408873 13f79535-47bb-0310-9956-ffa450edef68

-                // only remove, if node to be restored does not contain child
-                UUID vhUUID = new UUID(n.getProperty(QName.JCR_VERSIONHISTORY).getString());
-                if (!freeze.hasFrozenHistory(vhUUID)) {
+                // only remove, if node to be restored does not contain child,
+                // or if restored child is not versionable
+                UUID vhUUID = n.hasProperty(QName.JCR_VERSIONHISTORY)
+                        ? new UUID(n.getProperty(QName.JCR_VERSIONHISTORY).getString())
+                        : null;
+                if (vhUUID == null || !freeze.hasFrozenHistory(vhUUID)) {
