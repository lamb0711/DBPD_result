JCR-258 - remove JDOM dependency from jcr-server contribution
JCR-295 - usage of Cache-Control header 
JCR-297 - log output while parsing xml
minor consistency issues and improvements

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368683 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.webdav.util.XmlUtil;
-import org.jdom.Element;
+import org.apache.jackrabbit.webdav.xml.DomUtil;
+import org.w3c.dom.Element;
+import org.w3c.dom.Document;
+     * @param document
-    public Element toXml() {
-        Element activeLock = new Element(XML_ACTIVELOCK, NAMESPACE);
-
-        // locktype property
-        Element property = new Element(XML_LOCKTYPE, NAMESPACE);
-        property.addContent(getType().toXml());
-        activeLock.addContent(property);
+    public Element toXml(Document document) {
+        Element activeLock = DomUtil.createElement(document, XML_ACTIVELOCK, NAMESPACE);
-        property = new Element(XML_LOCKSCOPE, NAMESPACE);
-        property.addContent(getScope().toXml());
-        activeLock.addContent(property);
-
+        activeLock.appendChild(getScope().toXml(document));
+        // locktype property
+        activeLock.appendChild(getType().toXml(document));
-        activeLock.addContent(XmlUtil.depthToXml(isDeep()));
+        activeLock.appendChild(DomUtil.depthToXml(isDeep(), document));
-            activeLock.addContent(XmlUtil.timeoutToXml(timeout));
+            activeLock.appendChild(DomUtil.timeoutToXml(timeout, document));
-            property = new Element(XML_OWNER, NAMESPACE);
-            property.setText(getOwner());
-            activeLock.addContent(property);
+            DomUtil.addChildElement(activeLock, XML_OWNER, NAMESPACE, getOwner());
-            property = new Element(XML_LOCKTOKEN, NAMESPACE);
-            Element href = new Element(XML_HREF, NAMESPACE);
-            href.setText(getToken());
-            property.addContent(href);
-            activeLock.addContent(property);
+            Element lToken = DomUtil.addChildElement(activeLock, XML_LOCKTOKEN, NAMESPACE);
+            lToken.appendChild(DomUtil.hrefToXml(getToken(), document));
+
