porting jackrabbit to v0.16.2 of jsr170 spec 
(work in progress...)

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@148894 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.QName;
+import org.apache.jackrabbit.core.NoPrefixDeclaredException;
+import org.apache.jackrabbit.core.QName;
-import javax.jcr.PropertyIterator;
+import javax.jcr.query.RowIterator;
-     * @see QueryResult#getProperties()  
+     * @see QueryResult#getPropertyNames()
-    public PropertyIterator getProperties() throws RepositoryException {
-        return new PropertyIteratorImpl(selectProps,
-                new NodeIteratorImpl(itemMgr, uuids),
-                resolver);
+    public String[] getPropertyNames() throws RepositoryException {
+        try {
+            String[] propNames = new String[selectProps.length];
+            for (int i = 0; i < selectProps.length; i++) {
+                propNames[i] = selectProps[i].toJCRName(resolver);
+            }
+            return propNames;
+        } catch (NoPrefixDeclaredException npde) {
+            String msg = "encountered invalid property name";
+            log.error(msg, npde);
+            throw new RepositoryException(msg, npde);
+
+        }
+
+
+    /**
+     * @see QueryResult#getRows()
+     */
+    public RowIterator getRows() throws RepositoryException {
+        // @todo implement QueryResult#getRows()
+        throw new RepositoryException("not yet implemented");
+    }
