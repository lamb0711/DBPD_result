avoid to keep hard references to ItemImpl & ItemState instances

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@332056 13f79535-47bb-0310-9956-ffa450edef68

-     * Keep a hard reference to the root node state
+     * uuid of root node
-    private NodeState root;
+    private final String rootNodeUUID;
-
-        try {
-            root = (NodeState) getNonVirtualItemState(new NodeId(rootNodeUUID));
-        } catch (NoSuchItemStateException e) {
-            // create root node
-            root = createRootNodeState(rootNodeUUID, ntReg);
+        this.rootNodeUUID = rootNodeUUID;
+        // create root node state if it doesn't yet exist
+        if (!hasNonVirtualItemState(new NodeId(rootNodeUUID))) {
+            createRootNodeState(rootNodeUUID, ntReg);
-                    events.createEventStates(root.getUUID(), local, this);
+                    events.createEventStates(rootNodeUUID, local, this);
