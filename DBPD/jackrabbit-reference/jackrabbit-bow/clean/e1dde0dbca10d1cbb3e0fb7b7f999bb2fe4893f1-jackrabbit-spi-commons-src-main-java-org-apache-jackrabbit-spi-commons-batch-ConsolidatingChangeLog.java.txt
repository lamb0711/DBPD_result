JCR-2087: Upgrade to Java 5 as the base platform - use generics, annotations 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@807632 13f79535-47bb-0310-9956-ffa450edef68

-public class ConsolidatingChangeLog extends ChangeLogImpl {
+public class ConsolidatingChangeLog extends AbstractChangeLog<ConsolidatingChangeLog.CancelableOperation> {
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    @Override
-    protected void addOperation(Operation op) throws RepositoryException {
-        if (!(op instanceof CancelableOperation)) {
-            throw new IllegalArgumentException("Operation not instance of "
-                    + CancelableOperation.class.getName());
-        }
-
-        CancelableOperation otherOp = (CancelableOperation) op;
-        for (Iterator<Operation> it = new OperationsBackwardWithSentinel(); it.hasNext(); ) {
-            CancelableOperation thisOp = (CancelableOperation) it.next();
+    public void addOperation(CancelableOperation op) throws RepositoryException {
+        CancelableOperation otherOp = op;
+        for (OperationsBackwardWithSentinel it = new OperationsBackwardWithSentinel(); it.hasNext(); ) {
+            CancelableOperation thisOp = it.next();
-    private class OperationsBackwardWithSentinel implements Iterator<Operation> {
-        private final ListIterator<Operation> it = operations.listIterator(operations.size());
+    private class OperationsBackwardWithSentinel implements Iterator<CancelableOperation> {
+        private final ListIterator<CancelableOperation> it = operations.listIterator(operations.size());
-        public Operation next() {
+        public CancelableOperation next() {
-                Operation o = it.previous();
+                CancelableOperation o = it.previous();
