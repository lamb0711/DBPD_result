JCR-2093: Implement QueryObjectModelFactory.fullTextSearch() in QueryManagerImpl

Fix broken full text search tests

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@770738 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.ValueFactory;
+
-    public QueryObjectModelFactoryImpl(NamePathResolver resolver) {
+    /**
+     * Value factory of the current session.
+     */
+    private final ValueFactory factory;
+
+    public QueryObjectModelFactoryImpl(
+            NamePathResolver resolver, ValueFactory factory) {
+        this.factory = factory;
-                                         StaticOperand fullTextSearchExpression)
+                                         String fullTextSearchExpression)
+        if (fullTextSearchExpression == null) {
+            throw new IllegalArgumentException(
+                    "Full text search expression is null");
+        }
+        Literal literal =
+            literal(factory.createValue(fullTextSearchExpression));
-                checkFullTextSearchExpression(fullTextSearchExpression));
+                checkFullTextSearchExpression(literal));
