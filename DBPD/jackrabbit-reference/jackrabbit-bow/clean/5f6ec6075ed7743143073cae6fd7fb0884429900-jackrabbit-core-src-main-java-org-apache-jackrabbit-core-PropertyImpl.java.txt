JCR-1538: [patch] add toString for NodeImpl and PropertyImpl

Type-specific toString() on all ItemImpl descendants

Use the toString() method instead of safeGetPath() in diagnostics.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@698402 13f79535-47bb-0310-9956-ffa450edef68

-            log.debug(safeGetJCRPath() + " (" + id + "): there's no transient state to persist");
+            log.debug(this + " (" + id + "): there's no transient state to persist");
-                String msg = safeGetJCRPath()
-                        + ": the property cannot be saved because it has been modified externally.";
+                String msg =
+                    this + ": the property cannot be saved because it has"
+                    + " been modified externally.";
-            throw new VersionException("cannot set the value of a property of a checked-in node "
-                    + safeGetJCRPath());
+            throw new VersionException(
+                    "Cannot set a property of a checked-in node: " + this);
-            throw new ConstraintViolationException("cannot set the value of a protected property "
-                    + safeGetJCRPath());
+            throw new ConstraintViolationException(
+                    "Cannot set the value of a protected property: " + this);
-                throw new ValueFormatException(safeGetJCRPath()
-                        + " is not multi-valued");
+                throw new ValueFormatException(
+                        "Single-valued property can not be set to"
+                        + " an array of values: " + this);
-                throw new ValueFormatException(safeGetJCRPath()
-                        + " is multi-valued and can therefore only be set to an array of values");
+                throw new ValueFormatException(
+                        "Multivalued property can not be set to a single"
+                        + " value (an array of lenght one is OK): " + this);
+    //--------------------------------------------------------------< Object >
+
+    /**
+     * Return a string representation of this property for diagnostic purposes.
+     *
+     * @return "property /path/to/item"
+     */
+    public String toString() {
+        return "property " + super.toString();
+    }
+
