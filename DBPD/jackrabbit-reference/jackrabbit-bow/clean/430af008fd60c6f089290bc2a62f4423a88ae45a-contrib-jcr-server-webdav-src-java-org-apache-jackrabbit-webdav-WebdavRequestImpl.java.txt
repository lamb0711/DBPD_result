- refactoring of DavSession acquisition in jcr-server (JCR-66)
- some cleanup

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@157746 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.webdav.header.DepthHeader;
-	String dHeader = httpRequest.getHeader(DavConstants.HEADER_DEPTH);
-	int depth = depthToInt(dHeader, defaultValue);
-	return depth;
+	return DepthHeader.parse(httpRequest.getHeader(DavConstants.HEADER_DEPTH), defaultValue).getDepth();
-            SAXBuilder builder = new SAXBuilder(false);
+		SAXBuilder builder = new SAXBuilder(false);
-
-    /**
-     * Convert the String depth value to an integer.
-     *
-     * @param depth
-     * @param defaultValue
-     * @return integer representation of the given depth String or the given
-     * defaultValue if depth is <code>null</code> or invalid.
-     */
-    private static int depthToInt(String depth, int defaultValue) {
-        int d = defaultValue;
-        if (depth != null) {
-            if (depth.equalsIgnoreCase("infinity")) {
-                d = DavConstants.DEPTH_INFINITY;
-            } else if (depth.equals("0")) {
-                d = DavConstants.DEPTH_0;
-            } else if (depth.equals("1")) {
-                d = DavConstants.DEPTH_1;
-            }
-        }
-        return d;
-    }
-
-        //-----------------------------< TransactionDavServletRequest Interface >---
+    
+    //-----------------------------< TransactionDavServletRequest Interface >---
