JCR-2113 : WIP (Contribution by Alfusainey Jallow)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1640892 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.config.CacheBehaviour;
+import org.apache.jackrabbit.jcr2spi.security.authorization.AccessControlProvider;
-import org.apache.jackrabbit.spi.RepositoryService;
-        wspManager = createManager(
-                config.getRepositoryService(),
-                sessionInfo,
-                session.getCacheBehaviour(),
-                session.getPollTimeout());
+        wspManager = createManager(config, sessionInfo);
+    /**
+     * @see ManagerProvider#getAccessControlProvider() ()
+     */
+    public AccessControlProvider getAccessControlProvider() throws RepositoryException {
+        return wspManager.getAccessControlProvider();
+    }
+
-     * @param service the RepositoryService
+     * @param config the RepositoryConfiguration
-     * @param cacheBehaviour the desired cache behavior
-     * @param pollTimeout the desired pollTimeout.
-     * @return state manager
+     * @return workspace manager
-    protected WorkspaceManager createManager(RepositoryService service,
-                                             SessionInfo sessionInfo,
-                                             CacheBehaviour cacheBehaviour,
-                                             int pollTimeout) throws RepositoryException {
-        return new WorkspaceManager(service, sessionInfo, cacheBehaviour,
-                pollTimeout, session.isSupportedOption(Repository.OPTION_OBSERVATION_SUPPORTED));
+    protected WorkspaceManager createManager(RepositoryConfig config,
+                                             SessionInfo sessionInfo) throws RepositoryException {
+        return new WorkspaceManager(config, sessionInfo, session.isSupportedOption(Repository.OPTION_OBSERVATION_SUPPORTED));
