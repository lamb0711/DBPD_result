JCR-900: Lucene queries are not properly rewritten

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@536145 13f79535-47bb-0310-9956-ffa450edef68

+     * Indicates whether the query is already rewritten.
+     */
+    private boolean rewritten = false;
+
+    /**
+            if (!rewritten) {
+                query = query.rewrite(reader);
+                rewritten = true;
+            }
