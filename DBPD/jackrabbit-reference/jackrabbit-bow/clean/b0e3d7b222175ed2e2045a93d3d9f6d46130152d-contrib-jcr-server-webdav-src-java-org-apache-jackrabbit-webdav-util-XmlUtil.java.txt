JCR-193, JCR-216, JCR-203, JCR 184 + various minor fixes

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@293331 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.util.Text;
-     * Builds a 'href' Xml element from the given String
+     * Builds a 'DAV:href' Xml element from the given href. Please note, that
+     * the path present in the given String should be properly
+     * {@link Text#escapePath(String) escaped} in order to prevent problems with
+     * WebDAV clients.
+
+    /**
+     * Verifies that the given element is a DAV:href element, retrieves the
+     * element text.
+     *
+     * @param hrefElement a DAV:href element
+     * @return the URL decoded element text or empty String if the given element is empty.
+     */
+    public static String hrefFromXml(Element hrefElement) {
+        if (hrefElement == null || !XML_HREF.equals(hrefElement.getName()) || !NAMESPACE.equals(hrefElement.getNamespace())) {
+            throw new IllegalArgumentException("DAV:href element expected.");
+        }
+        return hrefElement.getText();
+    }
