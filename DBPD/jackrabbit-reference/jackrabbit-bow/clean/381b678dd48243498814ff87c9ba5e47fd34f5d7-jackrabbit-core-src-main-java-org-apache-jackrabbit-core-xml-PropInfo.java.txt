JCR-2627 System-view export/import of multi-value property does not respect JCR 2.0

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@944294 13f79535-47bb-0310-9956-ffa450edef68

-    public enum MultipleStatus { UNKNOWN, SINGLE, MULTIPLE };
+    public enum MultipleStatus { UNKNOWN, SINGLE, MULTIPLE }
-            // could be single- or multi-valued
-            return ent.getApplicablePropertyDef(name, type);
+            // multipleStatus == MultipleStatus.UNKNOWN
+            if (values.length == 1) {
+                // one value => could be single- or multi-valued
+                return ent.getApplicablePropertyDef(name, type);
+            } else {
+                // zero or more than one values => must be multi-valued
+                return ent.getApplicablePropertyDef(name, type, true);
+            }
-    public MultipleStatus getMultipleStatus() {
-        return multipleStatus;
-    }
-
