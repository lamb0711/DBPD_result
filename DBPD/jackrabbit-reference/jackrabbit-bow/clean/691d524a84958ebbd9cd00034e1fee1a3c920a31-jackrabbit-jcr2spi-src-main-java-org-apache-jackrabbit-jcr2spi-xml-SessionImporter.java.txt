JCR-1245: JCR2SPI: Use namespace decl. present in imported xml to resolve Name/Path values

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@599366 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.namespace.NamespaceResolver;
+import org.apache.jackrabbit.conversion.NamePathResolver;
-    public void startNode(NodeInfo nodeInfo, List propInfos, NamespaceResolver nsContext)
+    public void startNode(NodeInfo nodeInfo, List propInfos, NamePathResolver resolver)
-               importProperty(pi, nodeState, nsContext);
+               importProperty(pi, nodeState, resolver);
-    private void importProperty(PropInfo pi, NodeState parentState, org.apache.jackrabbit.namespace.NamespaceResolver nsResolver) throws RepositoryException, ConstraintViolationException {
+    private void importProperty(PropInfo pi, NodeState parentState, NamePathResolver resolver) throws RepositoryException, ConstraintViolationException {
-        QValue[] values = getPropertyValues(pi, targetType, def.isMultiple(), nsResolver);
+        QValue[] values = getPropertyValues(pi, targetType, def.isMultiple(), resolver);
-    private QValue[] getPropertyValues(PropInfo propertyInfo, int targetType, boolean isMultiple, org.apache.jackrabbit.namespace.NamespaceResolver nsResolver) throws RepositoryException {
+    private QValue[] getPropertyValues(PropInfo propertyInfo, int targetType, boolean isMultiple, NamePathResolver resolver) throws RepositoryException {
-            iva[i] = buildQValue(tva[i], targetType, nsResolver);
+            iva[i] = buildQValue(tva[i], targetType, resolver);
-    private QValue buildQValue(TextValue tv, int targetType, org.apache.jackrabbit.namespace.NamespaceResolver nsResolver) throws RepositoryException {
+    private QValue buildQValue(TextValue tv, int targetType, NamePathResolver resolver) throws RepositoryException {
-                    iv = ValueFormat.getQValue(v, session.getNamePathResolver(), session.getQValueFactory());
+                    iv = ValueFormat.getQValue(v, resolver, session.getQValueFactory());
