JCR-2111: JSR 283 Node Identifier

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@774702 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.UnsupportedRepositoryOperationException;
-        String uniqueId = null;
-        while (uniqueId == null) {
-            try {
-                uniqueId = node.getUUID();
-            } catch (UnsupportedRepositoryOperationException e) {
-                // not referenceable
-                pathElements++;
-                String jcrName = node.getName();
-                if (jcrName.equals("")) {
-                    // root node
-                    builder.addRoot();
-                    break;
-                } else {
-                    Name name;
-                    try {
-                        name = resolver.getQName(node.getName());
-                    } catch (NameException ex) {
-                       throw new RepositoryException(ex.getMessage(), ex);
-                    }
-                    if (node.getIndex() == 1) {
-                        builder.addFirst(name);
-                    } else {
-                        builder.addFirst(name, node.getIndex());
-                    }
-                }
-                node = node.getParent();
-            }
-        }
-        if (pathElements > 0) {
-            return createNodeId(uniqueId, builder.getPath());
-        } else {
-            return createNodeId(uniqueId);
-        }
+        String uniqueId = node.getIdentifier();
+        return createNodeId(uniqueId);
