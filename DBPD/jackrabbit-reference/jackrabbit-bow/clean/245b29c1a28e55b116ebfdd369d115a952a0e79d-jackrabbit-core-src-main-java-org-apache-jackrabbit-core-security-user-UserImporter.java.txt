JCR-2313 - Improvements to user management (2) [work in progress] 

- improve log output during user import
- fix issue with replacing/removing existing user upon import
- add test for the issue

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@831055 13f79535-47bb-0310-9956-ffa450edef68

-            log.warn("Cannot handle protected PropInfo " + protectedPropInfo + ". Node " + parent + " doesn't represent a valid Authorizable.");
+            log.debug("Cannot handle protected PropInfo " + protectedPropInfo + ". Node " + parent + " doesn't represent a valid Authorizable.");
-                            handleFailure("Ignoring new member of " + gr + ". No such authorizable (NodeID = " + id + ")");
+                            handleFailure("New member of " + gr + ": No such authorizable (NodeID = " + id + ")");
+                                log.info("ImportBehavior.BESTEFFORT: Remember non-existing member for processing.");
-                        log.warn("Found " + nonExisting.size() + " entries of rep:members pointing to non-existing authorizables. Best-effort approach configured -> add to rep:members.");
+                        log.info("ImportBehavior.BESTEFFORT: Found " + nonExisting.size() + " entries of rep:members pointing to non-existing authorizables. Adding to rep:members.");
-                        userManager.setProtectedProperty(groupNode, UserConstants.P_MEMBERS, memberValues.toArray(new Value[memberValues.size()]));
+                        userManager.setProtectedProperty(groupNode,
+                                UserConstants.P_MEMBERS,
+                                memberValues.toArray(new Value[memberValues.size()]),
+                                PropertyType.WEAKREFERENCE);
