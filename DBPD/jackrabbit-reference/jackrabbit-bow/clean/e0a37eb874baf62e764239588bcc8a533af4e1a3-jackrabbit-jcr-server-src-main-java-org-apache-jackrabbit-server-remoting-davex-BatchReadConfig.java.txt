- JCR-1958: Enhanced JCR remoting (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@741206 13f79535-47bb-0310-9956-ffa450edef68

+    private static final String NAME_DEFAULT = "default";
-    private int defaultDepth = DEPTH_INFINITE;
+    private int defaultDepth = DEPTH_DEFAULT;
-    public BatchReadConfig() {
-
-    }
+    BatchReadConfig() {}
+    /**
+     * Add the configuration entries present in the given properties.
+     *
+     * @param props
+     */
-            String depth = props.getProperty(name);
+            String depthStr = props.getProperty(name);
-                Integer intg = new Integer(depth);
-                depthMap.put(name, intg);
+                int depth = Integer.parseInt(depthStr);
+                if (depth < DEPTH_INFINITE) {
+                    log.warn("invalid depth " + depthStr + " -> ignoring.");
+                    continue;
+                }
+                if (NAME_DEFAULT.equals(name)) {
+                    setDefaultDepth(depth);
+                } else {
+                    setDepth(name, depth);
+                }
-                log.warn("Invalid depth value for name " + name + ". " + depth + " cannot be parsed into an integer.");
+                log.warn("Invalid depth value for name " + name + ". " + depthStr + " cannot be parsed into an integer.");
-            return DEPTH_DEFAULT;
+            return defaultDepth;
-     * Return the depth for the given node or the
-     * {@link #DEPTH_DEFAULT default value} if the config does not provide
-     * an specific entry for the given node..
+     * Return the depth for the given node or the default depth if the config
+     * does not provide an specific entry for the given node.
-        int depth = DEPTH_DEFAULT;
+        int depth = defaultDepth;
