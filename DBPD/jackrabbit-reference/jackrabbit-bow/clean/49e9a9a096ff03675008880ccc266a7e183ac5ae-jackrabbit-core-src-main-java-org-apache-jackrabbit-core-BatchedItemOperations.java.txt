JCR-890: concurrent read-only access to a session

Turn Session.move() into a SessionOperation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957589 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.retention.RetentionRegistry;
+    private final HierarchyManager hierMgr;
+
+        this.hierMgr = sessionContext.getHierarchyManager();
+        RetentionRegistry retentionReg =
+            sessionContext.getSessionImpl().getRetentionRegistry();
+        RetentionRegistry retentionReg =
+            sessionContext.getSessionImpl().getRetentionRegistry();
+        RetentionRegistry retentionReg =
+            sessionContext.getSessionImpl().getRetentionRegistry();
-        lockMgr.checkLock(nodePath, session);
+        sessionContext.getSessionImpl().getLockManager().checkLock(nodePath, session);
