JCR-2714: Selective disabling of checks in ItemValidator

Remove the public SessionImpl.getValidator() method to prevent client code from using the ItemValidator.performRelaxed() method.

Renamed s/sessionContext/context/ in a few cases where there's no ambiguity

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@985218 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.session.SessionContext;
+     * Component context of the current session
+     */
+    protected final SessionContext context;
+
+    /**
-     * @param session workspace sesion
+     *
+     * @param context component context of the current session
-    protected VersionManagerImplBase(SessionImpl session,
-                                        UpdatableItemStateManager stateMgr,
-                                        HierarchyManager hierMgr) {
-        this.session = session;
+    protected VersionManagerImplBase(
+            SessionContext context, UpdatableItemStateManager stateMgr,
+            HierarchyManager hierMgr) {
+        this.context = context;
+        this.session = context.getSessionImpl();
-        session.getValidator().checkModify(node, options, permissions);
+        context.getItemValidator().checkModify(node, options, permissions);
-        session.getValidator().checkModify(node, options, permissions);
+        context.getItemValidator().checkModify(node, options, permissions);
