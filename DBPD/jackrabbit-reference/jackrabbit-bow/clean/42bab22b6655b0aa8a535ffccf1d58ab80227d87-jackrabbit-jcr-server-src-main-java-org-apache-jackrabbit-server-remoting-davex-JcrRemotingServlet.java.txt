JCR-4027: proper handling of missing content type, proper parsing of parameters

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1763558 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Locale;
-                return ct.startsWith("multipart/form-data") ||
-                       ct.startsWith("application/x-www-form-urlencoded");
+                if (ct == null) {
+                    return false;
+                } else {
+                    int semicolon = ct.indexOf(';');
+                    if (semicolon >= 0) {
+                        ct = ct.substring(0, semicolon);
+                    }
+                    ct = ct.trim().toLowerCase(Locale.ENGLISH);
+                    return "multipart/form-data".equals(ct) || "application/x-www-form-urlencoded".equals(ct);
+                }
