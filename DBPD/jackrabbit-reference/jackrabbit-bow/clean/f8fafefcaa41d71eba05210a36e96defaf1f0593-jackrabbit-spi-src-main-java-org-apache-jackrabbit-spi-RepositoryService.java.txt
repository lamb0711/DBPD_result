JCR-2104: JSR 283 Versioning
   - VersionHistory.getAllFrozenNodes()  (move iteratoradaptor from core to jcr-commons), VersionHistory.getVersionableIdentifier()
   - Version.getFrozenNode, Version.getLinearPredecessor()
   - VersionManager (work in progress): 170-methods, shallow merge, checkpoint
      -> extend SPI interfaces accordingly

JCR-2003: JCR2SPI / SPI: Add support for JCR 2.0
   - Session.hasPermission()
   - Node.getProperties/getNodes with glob
   - Node.getIdentifier()

JCR-2004: Update SPI locking to match JCR 2.0
   - separate JCR LockManager from the internal lock manager

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@773828 13f79535-47bb-0310-9956-ffa450edef68

+     * Performs a checkpoint for the <code>Node</code> identified by the given
+     * <code>NodeId</code>.
+     *
+     * @param sessionInfo
+     * @param nodeId
+     * @throws javax.jcr.UnsupportedRepositoryOperationException
+     * @throws javax.jcr.lock.LockException
+     * @throws javax.jcr.RepositoryException
+     * @see javax.jcr.version.VersionManager#checkpoint(String)
+     */
+    public NodeId checkpoint(SessionInfo sessionInfo, NodeId nodeId) throws UnsupportedRepositoryOperationException, RepositoryException;
+
+    /**
+      * Merge the node identified by the given <code>NodeId</code> and its subtree
+      * with the corresponding node present in the workspace with the name of
+      * <code>srcWorkspaceName</code>.
+      *
+      * @param sessionInfo
+      * @param nodeId
+      * @param srcWorkspaceName
+      * @param bestEffort
+      * @return an <code>Iterator</code> over the {@link NodeId}s of all nodes that
+      * received a merge result of "fail" in the course of this operation.
+      * @throws javax.jcr.NoSuchWorkspaceException
+      * @throws javax.jcr.AccessDeniedException
+      * @throws javax.jcr.MergeException
+      * @throws javax.jcr.lock.LockException
+      * @throws javax.jcr.InvalidItemStateException
+      * @throws javax.jcr.RepositoryException
+      * @see javax.jcr.version.VersionManager#merge(String, String, boolean, boolean)
+      */
+     public Iterator merge(SessionInfo sessionInfo, NodeId nodeId, String srcWorkspaceName, boolean bestEffort, boolean isShallow) throws NoSuchWorkspaceException, AccessDeniedException, MergeException, LockException, InvalidItemStateException, RepositoryException;
+
+    /**
