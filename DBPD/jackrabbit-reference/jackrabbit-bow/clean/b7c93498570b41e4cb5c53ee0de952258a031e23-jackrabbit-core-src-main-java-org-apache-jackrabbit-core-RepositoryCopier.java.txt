JCR-442: Implement a backup tool

Support for binary values and the data store in RepositoryCopier.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@800807 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.data.DataStore;
-import org.apache.jackrabbit.core.state.ItemStateException;
-                        target.getVersionManagerImpl());
+                        target.getVersionManagerImpl(),
+                        target.getDataStore());
-            } catch (InvalidNodeTypeDefException e) {
-                throw new RepositoryException("Failed to copy node types", e);
-            } catch (ItemStateException e) {
-                throw new RepositoryException("Failed to copy item states", e);
+            } catch (Exception e) {
+                throw new RepositoryException("Failed to copy content", e);
-            InternalVersionManagerImpl source, InternalVersionManagerImpl target)
-            throws RepositoryException, ItemStateException {
+            InternalVersionManagerImpl source,
+            InternalVersionManagerImpl target, DataStore store)
+            throws Exception {
-                target.getPersistenceManager());
+                target.getPersistenceManager(), store);
-            throws RepositoryException, ItemStateException {
+            throws Exception {
-                    target.getWorkspaceInfo(name).getPersistenceManager());
+                    target.getWorkspaceInfo(name).getPersistenceManager(),
+                    target.getDataStore());
