JCR-1159 SPI: improve description of locking methods on RepositoryService

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@582815 13f79535-47bb-0310-9956-ffa450edef68

-        LockInfo lockInfo;
-        try {
-            lockInfo = wspManager.getLockInfo(nId);
-        } catch (LockException e) {
+        LockInfo lockInfo = wspManager.getLockInfo(nId);
+        if (lockInfo == null) {
-     * @throws LockException
-    private void notifyTokenAdded(String lt) throws LockException, RepositoryException {
+    private void notifyTokenAdded(String lt) throws RepositoryException {
-     * @throws LockException
-    private void notifyTokenRemoved(String lt) throws LockException, RepositoryException {
+    private void notifyTokenRemoved(String lt) throws RepositoryException {
-         * @throws LockException
-        private void reloadLockInfo() throws LockException, RepositoryException {
+        private void reloadLockInfo() throws RepositoryException {
+            if (lockInfo == null) {
+                // lock has been released on the server
+                unlocked();
+            }
-         * @throws LockException
-        public void lockTokenAdded(String lockToken) throws LockException, RepositoryException {
+        public void lockTokenAdded(String lockToken) throws RepositoryException {
-         * @throws RepositoryException
-        public void lockTokenRemoved(String lockToken) throws LockException, RepositoryException {
+        public void lockTokenRemoved(String lockToken) throws RepositoryException {
-                } catch (LockException e) {
-                    lockState.unlocked();
-        void lockTokenAdded(String lockToken) throws LockException, RepositoryException;
+        void lockTokenAdded(String lockToken) throws RepositoryException;
-        void lockTokenRemoved(String lockToken) throws LockException, RepositoryException;
+        void lockTokenRemoved(String lockToken) throws RepositoryException;
