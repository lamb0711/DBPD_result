JCR-314: Fine grained locking in SharedItemStateManager

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@605173 13f79535-47bb-0310-9956-ffa450edef68

+     * ISM locking configuration
+     */
+    private final ISMLockingConfig ismLockingConfig;
+    
+    /**
-     * @param home home directory
-     * @param fsc file system configuration
-     * @param pmc persistence manager configuration
+     * @param home             home directory
+     * @param fsc              file system configuration
+     * @param pmc              persistence manager configuration
+     * @param ismLockingConfig the item state manager locking configuration, if
+     *                         <code>null</code> is passed a default
+     *                         configuration is used.
-    public VersioningConfig(
-            String home, FileSystemConfig fsc, PersistenceManagerConfig pmc) {
+    public VersioningConfig(String home,
+                            FileSystemConfig fsc,
+                            PersistenceManagerConfig pmc,
+                            ISMLockingConfig ismLockingConfig) {
+        if (ismLockingConfig != null) {
+            this.ismLockingConfig = ismLockingConfig;
+        } else {
+            this.ismLockingConfig = ISMLockingConfig.createDefaultConfig();
+        }
+    /**
+     * @return name of the ISM locking configuration
+     */
+    public ISMLockingConfig getISMLockingConfig() {
+    	return ismLockingConfig;
+    }
