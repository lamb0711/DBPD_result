- ignoring empty jndi init-params
- forcing http-date to Locale.en

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@354477 13f79535-47bb-0310-9956-ffa450edef68

-    /** default logger */
+    /**
+     * default logger
+     */
-    /** the 'repository-name' init parameter */
+    /**
+     * the 'repository-name' init parameter
+     */
-    /** the 'rmi-uri' init parameter */
+    /**
+     * the 'rmi-uri' init parameter
+     */
-    /** the 'missing-auth-mapping' init parameter */
+    /**
+     * the 'missing-auth-mapping' init parameter
+     */
-        if (repositoryName==null) {
-            repositoryName="default";
+        if (repositoryName == null) {
+            repositoryName = "default";
-		    env.put(name, getServletConfig().getInitParameter(name));
-		    log.info("  adding property to JNDI environment: " + name + "=" + env.getProperty(name));
+                    String initParam = getServletConfig().getInitParameter(name);
+                    if (initParam.equals("")) {
+                        log.info("  ignoring empty JNDI init param: " + name);
+                    } else {
+                        env.put(name, initParam);
+                        log.info("  adding property to JNDI environment: " + name + "=" + initParam);
+                    }
-            log.error("Error while retrieving repository using JNDI (name=" + repositoryName +"): " + e);
+            log.error("Error while retrieving repository using JNDI (name=" + repositoryName + "): " + e);
