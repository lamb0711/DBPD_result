JCR-2028: JSR 283 JCR Path

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@772659 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.ValueFactory;
+import org.apache.jackrabbit.spi.commons.value.ValueFormat;
+    private final ValueFactory valueFactory;
+
+     * @param valueFactory
-                           NamePathResolver resolver) {
+                           NamePathResolver resolver, ValueFactory valueFactory) {
+        this.valueFactory = valueFactory;
-                values[i] = defVals[i].toJCRValue(resolver);
+                values[i] = ValueFormat.getJCRValue(defVals[i], resolver, valueFactory);
