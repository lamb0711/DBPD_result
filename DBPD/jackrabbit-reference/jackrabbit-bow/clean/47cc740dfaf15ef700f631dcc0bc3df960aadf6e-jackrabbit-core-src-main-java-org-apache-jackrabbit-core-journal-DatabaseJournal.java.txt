JCR-1849: EventJournal

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@713964 13f79535-47bb-0310-9956-ffa450edef68

-    protected RecordIterator getRecords(long startRevision)
+    public RecordIterator getRecords(long startRevision)
+     */
+    public RecordIterator getRecords() throws JournalException {
+        try {
+            checkConnection();
+
+            selectRevisionsStmt.clearParameters();
+            selectRevisionsStmt.clearWarnings();
+            selectRevisionsStmt.setLong(1, Long.MIN_VALUE);
+            selectRevisionsStmt.execute();
+
+            return new DatabaseRecordIterator(
+                    selectRevisionsStmt.getResultSet(), getResolver(), getNamePathResolver());
+        } catch (SQLException e) {
+            close(true);
+
+            String msg = "Unable to return record iterator.";
+            throw new JournalException(msg, e);
+        }
+    }
+
+    /**
+     * {@inheritDoc}
