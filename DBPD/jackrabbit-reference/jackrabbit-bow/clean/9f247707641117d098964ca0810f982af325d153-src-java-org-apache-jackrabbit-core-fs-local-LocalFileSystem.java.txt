- Implemented a lucene Directory which works on top of the jackrabbit FileSystem abstraction.
- Changed location of lucene locks to index directory, instead of user temp dir.
- Changed order of module shutdown in RepositryImpl. shutdown sequence is now: observation, search, filesystem.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@53863 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.fs.RandomAccessOutputStream;
-import java.io.*;
+import java.io.File;
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.OutputStream;
+import java.io.FileOutputStream;
+import java.io.FileFilter;
+import java.io.RandomAccessFile;
-            log.error(msg);
-            log.error(msg, ioe);
+     * @see FileSystem#getRandomAccessOutputStream(String)
+     */
+    public RandomAccessOutputStream getRandomAccessOutputStream(String filePath)
+            throws FileSystemException {
+        File f = new File(root, osPath(filePath));
+        try {
+            return new RAFOutputStream(new RandomAccessFile(f, "rw"));
+        } catch (IOException e) {
+            String msg = "failed to get output stream for " + f.getPath();
+            log.error(msg, e);
+            throw new FileSystemException(msg, e);
+        }
+    }
+
+    /**
