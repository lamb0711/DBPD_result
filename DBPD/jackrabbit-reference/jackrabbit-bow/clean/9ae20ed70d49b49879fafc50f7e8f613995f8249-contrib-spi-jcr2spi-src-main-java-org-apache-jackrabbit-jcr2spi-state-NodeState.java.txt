- implement an ItemStateFactory (ISF) for transient space
- extends ISF with transient specific methods to create new item states
- remove ItemStateManager interface from ChangeLog again

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429615 13f79535-47bb-0310-9956-ffa450edef68

-     * Constructs a new <code>NodeState</code> that is initially connected to
-     * an overlayed state.
+     * Constructs a new <code>NodeState</code> that is initially connected to an
+     * overlayed state.
+     * @param parent         the parent of this NodeState
-     * @param isTransient    flag indicating whether this state is transient or not
+     * @param isTransient    flag indicating whether this state is transient or
+     *                       not
-    public NodeState(NodeState overlayedState, int initialStatus,
-                     boolean isTransient) {
+    public NodeState(NodeState overlayedState, NodeState parent, int initialStatus,
+                     boolean isTransient, ItemStateFactory isf) {
-        idFactory = overlayedState.idFactory;
-        // TODO: remove this constructor
-        this.isf = null;
+        this.parent = parent;
+        idFactory = parent.idFactory;
+        this.isf = isf;
