JCR-257: Use separate index for jcr:system tree

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@357961 13f79535-47bb-0310-9956-ffa450edef68

-            CachingMultiReader index = (CachingMultiReader) reader;
-            return new DescendantSelfAxisScorer(searcher.getSimilarity(), index);
+            HierarchyResolver resolver = (HierarchyResolver) reader;
+            return new DescendantSelfAxisScorer(searcher.getSimilarity(), reader, resolver);
-         * An <code>IndexReader</code> to access the index.
+         * The <code>HierarchyResolver</code> of the index.
-        private final CachingMultiReader reader;
+        private final HierarchyResolver hResolver;
+         * @param hResolver  the hierarchy resolver of <code>reader</code>.
-        protected DescendantSelfAxisScorer(Similarity similarity, CachingMultiReader reader) {
+        protected DescendantSelfAxisScorer(Similarity similarity,
+                                           IndexReader reader,
+                                           HierarchyResolver hResolver) {
-            this.reader = reader;
+            this.hResolver = hResolver;
-                int parentDoc = reader.getParent(nextDoc);
+                int parentDoc = hResolver.getParent(nextDoc);
-                    parentDoc = reader.getParent(parentDoc);
+                    parentDoc = hResolver.getParent(parentDoc);
