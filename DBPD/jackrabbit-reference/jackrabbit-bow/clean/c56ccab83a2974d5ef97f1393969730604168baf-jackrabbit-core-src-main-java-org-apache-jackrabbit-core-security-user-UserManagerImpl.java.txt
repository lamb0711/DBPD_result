minor improvement

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@950439 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.Item;
-     * @throws RepositoryException If an error occurs.
-     * @throws RepositoryException If an error occurs.
-        // shortcut that avoids executing a query.
-        if (principal instanceof ItemBasedPrincipal) {
+        // shortcuts that avoids executing a query.
+        if (principal instanceof AuthorizableImpl.NodeBasedPrincipal) {
+            NodeId nodeId = ((AuthorizableImpl.NodeBasedPrincipal) principal).getNodeId();
+            try {
+                n = session.getNodeById(nodeId);
+            } catch (ItemNotFoundException e) {
+                // no such authorizable -> null
+            }
+        } else if (principal instanceof ItemBasedPrincipal) {
-            if (session.itemExists(authPath)) {
-                Item authItem = session.getItem(authPath);
-                if (authItem.isNode()) {
-                    n = (NodeImpl) authItem;
-                }
+            if (session.nodeExists(authPath)) {
+                n = (NodeImpl) session.getNode(authPath);
-            // shortcut didn't work -> search.
+            // authorizable whose ID matched the principal name -> search.
-     * @throws RepositoryException
+     * @throws RepositoryException If an error occurs.
