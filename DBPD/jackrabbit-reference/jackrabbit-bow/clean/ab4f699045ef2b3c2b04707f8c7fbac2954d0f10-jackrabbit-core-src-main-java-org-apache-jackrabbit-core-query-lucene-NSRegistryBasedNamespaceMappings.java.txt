JCR-1612: Reintroduce NamespaceStorage and namespace-caching

Make NamespaceRegistryImpl implement StringIndex and simplify the downstream classes accordingly.

To make this happen I modified the StringIndex contract a bit, allowing (and, for indexToString, requiring) implementations to throw exceptions if an unknown index is requested. Modified implementing classes accordingly.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@681121 13f79535-47bb-0310-9956-ffa450edef68

-            return nsReg.getURI(index);
-        } catch (NumberFormatException e) {
-            throw new NamespaceException("Unknown prefix: " + prefix);
+            return nsReg.indexToString(index);
+        } catch (IllegalArgumentException e) {
+            throw new NamespaceException(
+                    "Unknown namespace prefix: " + prefix, e);
-        return String.valueOf(nsReg.getURIIndex(uri));
+        try {
+            return String.valueOf(nsReg.stringToIndex(uri));
+        } catch (IllegalArgumentException e) {
+            throw new NamespaceException(
+                    "Unknown namespace URI: " + uri, e);
+        }
