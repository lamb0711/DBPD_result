JCR-1184: Introduce spellchecker functionality based on content in the workspace

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@587866 13f79535-47bb-0310-9956-ffa450edef68

+     * QName for rep:spellcheck
+     */
+    static final QName REP_SPELLCHECK = new QName(QName.NS_REP_URI, "spellcheck");
+
+    /**
+            } else if (NameFormat.format(REP_SPELLCHECK, resolver).equals(fName)
+                    && queryNode.getType() != QueryNode.TYPE_PATH) {
+                if (node.jjtGetNumChildren() == 2) {
+                    if (queryNode instanceof NAryQueryNode) {
+                        NAryQueryNode parent = (NAryQueryNode) queryNode;
+                        RelationQueryNode rel = factory.createRelationQueryNode(
+                                parent, RelationQueryNode.OPERATION_SPELLCHECK);
+                        parent.addOperand(rel);
+
+                        // get string to check
+                        node.jjtGetChild(1).jjtAccept(this, rel);
+                        // check if string is set
+                        if (rel.getStringValue() == null) {
+                            exceptions.add(new InvalidQueryException(
+                                    "Argument for rep:spellcheck() must be of type string"));
+                        }
+
+                        // set a dummy property name
+                        rel.addPathElement(Path.PathElement.create(QName.JCR_PRIMARYTYPE));
+                    } else {
+                        exceptions.add(new InvalidQueryException(
+                                "Unsupported location for rep:spellcheck()"));
+                    }
+                } else {
+                    exceptions.add(new InvalidQueryException(
+                            "Wrong number of arguments for rep:spellcheck()"));
+                }
