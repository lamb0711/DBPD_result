JCR-2744: Avoid element arrays in PathImpl

Use the new path element classes to replace the inner classes in PathFactoryImpl.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@995483 13f79535-47bb-0310-9956-ffa450edef68

+    /** Static cache of instances of this class. */
+    private static final HashCache cache = new HashCache();
+
+    /**
+     * Creates and returns a named path element. A cache of path elements
+     * with an unspecified index is used to avoid having too many instances
+     * of this class in memory.
+     *
+     * @param element the element to return from the cache
+     * @return the given element or a previously cached copy
+     */
+    public static NameElement create(Name name, int index) {
+        NameElement element = new NameElement(name, index);
+        if (index == Path.INDEX_UNDEFINED) {
+            return (NameElement) cache.get(element);
+        } else {
+            return element;
+        }
+    }
+
-    public NameElement(Name name, int index) {
+    private NameElement(Name name, int index) {
