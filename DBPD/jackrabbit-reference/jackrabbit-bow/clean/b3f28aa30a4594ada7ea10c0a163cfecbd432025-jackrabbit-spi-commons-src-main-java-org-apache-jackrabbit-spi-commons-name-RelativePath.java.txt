JCR-2744: Avoid element arrays in PathImpl

Get rid of separate Path.Element objects by making AbstractPath implement both Path and Path.Element

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997384 13f79535-47bb-0310-9956-ffa450edef68

+    protected abstract String getElementString();
+
-            return parent.subPath(from, to - 1).resolve(getLastElement());
+            return parent.subPath(from, to - 1).resolve(getNameElement());
-        if (parent != null) {
-            System.arraycopy(parent.getElements(), 0, elements, 0, length - 1);
+        Path path = this;
+        for (int i = 1; i <= length; i++) {
+            elements[length - i] = path.getNameElement();
+            path = path.getFirstElements();
-        elements[length - 1] = getNameElement();
+    public String getString() {
+        if (parent != null) {
+            return parent.getString() + Path.DELIMITER + getElementString();
+        } else {
+            return getElementString();
+        }
+    }
+
