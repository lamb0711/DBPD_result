JCR-3118 : Configurable actions upon authorizable creation and removal

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1187257 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.user.action.AuthorizableAction;
-     * @param workspaceName
+     * @param workspaceName The name of the target workspace.
+     * @throws javax.jcr.RepositoryException If an error occurs.
-     * @param session
-     * @return
-     * @throws RepositoryException
+     * @param session The session for which to retrieve the membership cache.
+     * @return The membership cache.
+     * @throws RepositoryException If an error occurs.
-                    paramTypes, (SessionImpl) session, adminId, params,
-                    getMembershipCache(session));
+                    paramTypes, session, adminId, params, getMembershipCache(session));
+
+        if (umc != null && !(session instanceof SystemSession)) {
+            AuthorizableAction[] actions = umc.getAuthorizableActions();
+            um.setAuthorizableActions(actions);
+        }
-     * @param session
+     * @param session The editing session.
-        Authorizable admin = null;
+        Authorizable admin;
-                admin = userManager.createUser(adminId, adminId);
+                userManager.createUser(adminId, adminId);
