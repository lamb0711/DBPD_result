JCR-824 Problems with File Copy using WebDAV

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@523640 13f79535-47bb-0310-9956-ffa450edef68

+        // make sure, that src and destination belong to the same workspace
+        checkSameWorkspace(destination.getLocator());
+        // make sure, that src and destination belong to the same workspace
+        checkSameWorkspace(destination.getLocator());
+    private void checkSameWorkspace(DavResourceLocator otherLoc) throws DavException {
+        String wspname = getJcrSession().getWorkspace().getName();
+        if (!wspname.equals(otherLoc.getWorkspaceName())) {
+            throw new DavException(DavServletResponse.SC_FORBIDDEN, "Workspace mismatch: expected '" + wspname + "'; found: '" + otherLoc.getWorkspaceName() + "'");
+        }
+    }
+
