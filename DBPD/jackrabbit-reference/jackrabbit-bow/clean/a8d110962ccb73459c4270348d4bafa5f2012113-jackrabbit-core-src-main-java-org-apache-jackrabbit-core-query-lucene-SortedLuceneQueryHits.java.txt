JCR-2375: Create ScoreNode on demand in SortedLuceneQueryHits

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@831851 13f79535-47bb-0310-9956-ffa450edef68

-     * The score nodes.
+     * The score docs.
-    private final List<ScoreNode> scoreNodes = new ArrayList<ScoreNode>();
+    private final List<ScoreDoc> scoreDocs = new ArrayList<ScoreDoc>();
-        } else if (hitIndex >= scoreNodes.size()) {
+        } else if (hitIndex >= scoreDocs.size()) {
-        return scoreNodes.get(hitIndex);
+        ScoreDoc doc = scoreDocs.get(hitIndex);
+        String uuid = reader.document(doc.doc,
+                FieldSelectors.UUID).get(FieldNames.UUID);
+        NodeId id = new NodeId(uuid);
+        return new ScoreNode(id, doc.score, doc.doc);
-        for (int i = scoreNodes.size(); i < docs.length; i++) {
-            String uuid = reader.document(docs[i].doc,
-                    FieldSelectors.UUID).get(FieldNames.UUID);
-            NodeId id = new NodeId(uuid);
-            scoreNodes.add(new ScoreNode(id, docs[i].score, docs[i].doc));
+        for (int i = scoreDocs.size(); i < docs.length; i++) {
+            scoreDocs.add(docs[i]);
-        log.debug("getHits() {}/{}", scoreNodes.size(), numHits);
+        log.debug("getHits() {}/{}", scoreDocs.size(), numHits);
