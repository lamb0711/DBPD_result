JCR-2640: Internal repository context

Use the RepositoryContext to track the ClusterNode instance, if one is configured.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948833 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.fs.BasedFileSystem;
-     * Clustered node used, <code>null</code> if clustering is not configured.
-     */
-    private ClusterNode clusterNode;
-
-    /**
+            ClusterNode clusterNode = null;
+                context.setClusterNode(clusterNode);
-     * Get the cluster node. Returns <code>null</code> if this repository
-     * is not running clustered.
-     *
-     * @return cluster node
-     */
-    public ClusterNode getClusterNode() {
-        return clusterNode;
-    }
-
-    /**
-            StringBuffer workspaceConfigContent = clusterNode != null ? new StringBuffer() : null;
+            StringBuffer workspaceConfigContent = null;
+            if (context.getClusterNode() != null) {
+                workspaceConfigContent = new StringBuffer();
+            }
+        ClusterNode clusterNode = context.getClusterNode();
+                    ClusterNode clusterNode = context.getClusterNode();
+                ClusterNode clusterNode = context.getClusterNode();
