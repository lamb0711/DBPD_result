JCR-2851 - Authentication Mechanism Based on Login Token

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1073299 13f79535-47bb-0310-9956-ffa450edef68

-                    session.setAttribute(name, sc.getAttribute(name));
+                    if (!TokenBasedAuthentication.isMandatoryAttribute(name)) {
+                        session.setAttribute(name, sc.getAttribute(name));
+                    }
-                session.setAttribute(TokenBasedAuthentication.TOKEN_ATTRIBUTE, tc.getToken());
-                    session.setAttribute(name, tc.getAttribute(name));
+                    if (!TokenBasedAuthentication.isMandatoryAttribute(name)) {
+                        session.setAttribute(name, tc.getAttribute(name));
+                    }
