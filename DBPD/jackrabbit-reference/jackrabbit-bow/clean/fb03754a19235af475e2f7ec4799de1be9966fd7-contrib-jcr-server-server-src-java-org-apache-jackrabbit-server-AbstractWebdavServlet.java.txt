[JCR-181] jcr-server should honor a webdav request's Content-Type and Content-Language headers
[JCR-200] move log4j initialization out of RepositoryStartupServlet

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@240176 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.webdav.io.InputContext;
-import org.apache.jackrabbit.webdav.property.DavPropertyIterator;
-            response.setHeader("Last-Modified", String.valueOf(lastMod.getValue()));
+            response.setHeader(HEADER_LAST_MODIFIED, String.valueOf(lastMod.getValue()));
-            response.setHeader("ETag", String.valueOf(etag.getValue()));
+            response.setHeader(HEADER_ETAG, String.valueOf(etag.getValue()));
-            response.setHeader("Content-Type", String.valueOf(contentType.getValue()));
+            response.setHeader(HEADER_CONTENT_TYPE, String.valueOf(contentType.getValue()));
-                    response.setIntHeader("Content-Length", length);
+                    response.setIntHeader(HEADER_CONTENT_LENGTH, length);
+        DavProperty contentLanguage = resource.getProperty(DavPropertyName.GETCONTENTLANGUAGE);
+        if (contentLanguage != null) {
+            response.setHeader(HEADER_CONTENT_LANGUAGE, contentLanguage.getValue().toString());
+        }
+
-        parentResource.addMember(resource, request.getInputStream());
+        parentResource.addMember(resource, getInputContext(request));
-            parentResource.addMember(resource, request.getInputStream());
+            parentResource.addMember(resource, getInputContext(request));
+     * Build an InputContext for the given request
+     * 
+     * @param request
+     * @return
+     * @throws IOException
+     */
+    protected InputContext getInputContext(WebdavRequest request) throws IOException {
+        InputContext cxt = new InputContext();
+        cxt.setContentType(request.getHeader(DavConstants.HEADER_CONTENT_TYPE));
+        cxt.setContentLanguage(request.getHeader(DavConstants.HEADER_CONTENT_LANGUAGE));
+        cxt.setInputStream(request.getInputStream());
+        return cxt;
+    }
+
+    /**
