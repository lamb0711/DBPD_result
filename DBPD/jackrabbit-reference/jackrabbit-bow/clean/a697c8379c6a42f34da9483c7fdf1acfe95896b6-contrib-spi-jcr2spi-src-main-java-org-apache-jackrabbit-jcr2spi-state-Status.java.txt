work in progress

- version always protected
- versionHistory always protected
- fix Node.getReferences && reference properties
- mixinTypes are 'active' upon save only (and not before). therefore
  cleanup after removeMixin is done only after save.
  adding new states defined by a new mixin are only added after the
  node has been saved.
- nodestates identified by a uuid only were created a second time upon
  ChildNodeEntry.resolve => fix needs to be improved
- Events/ChangeLog are processed by the save-target state
- ChangeLog.persisted not used any more

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@467956 13f79535-47bb-0310-9956-ffa450edef68

-    
-    public static boolean isTerminalStatus(int status) {
+    /**
+     * Returns <code>true</code> if the given status is a terminal status, i.e.
+     * the given status one of:
+     * <ul>
+     * <li>{@link #REMOVED}</li>
+     * <li>{@link #STALE_DESTROYED}</li>
+     * </ul>
+     *
+     * @param status
+     * @return
+     */
+    public static boolean isTerminal(int status) {
+    /**
+     * Returns <code>true</code> if this item state is valid, that is its status
+     * is one of:
+     * <ul>
+     * <li>{@link #EXISTING}</li>
+     * <li>{@link #EXISTING_MODIFIED}</li>
+     * <li>{@link #NEW}</li>
+     * </ul>
+     *
+     * @param status
+     * @return
+     */
+    public static boolean isValid(int status) {
+        return status == EXISTING || status == EXISTING_MODIFIED || status == NEW;
+    }
+
+    public static boolean isStale(int status) {
+        return status == STALE_DESTROYED || status == STALE_MODIFIED;
+    }
+
-               /* default:
-                  NEW cannot change state to NEW -> false
-                  MODIFIED never applicable to session state -> false */
-
+                /* default:
+                   NEW cannot change state to NEW -> false
+                   MODIFIED never applicable to session state -> false */
