optimized Item.getDepth()

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@160563 13f79535-47bb-0310-9956-ffa450edef68

+    public int getDepth(ItemId id)
+            throws ItemNotFoundException, RepositoryException {
+        try {
+            int depth = 0;
+            ItemState state = getItemState(id);
+            for (String parentUUID = state.getParentUUID(); parentUUID != null;) {
+                state = (NodeState) getItemState(new NodeId(parentUUID));
+                parentUUID = state.getParentUUID();
+                depth++;
+            }
+            return depth;
+        } catch (NoSuchItemStateException nsise) {
+            String msg = "failed to determine depth of " + id;
+            log.debug(msg);
+            throw new ItemNotFoundException(msg, nsise);
+        } catch (ItemStateException ise) {
+            String msg = "failed to determine depth of " + id;
+            log.debug(msg);
+            throw new RepositoryException(msg, ise);
+        }
+    }
+
+    /**
+     * {@inheritDoc}
+     */
