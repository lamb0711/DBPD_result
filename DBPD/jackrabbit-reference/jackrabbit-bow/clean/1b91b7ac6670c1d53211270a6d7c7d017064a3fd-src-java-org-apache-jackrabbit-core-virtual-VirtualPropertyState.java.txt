- fixing some versioning issues. all versioning tests now pass.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@164980 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.InternalValue;
+     * a virtual value provider, if needed.
+     */
+    private VirtualValueProvider valueProvider;
+
+    /**
+
+    /**
+     * Returns the virtual value provider, if registered.
+     * @return
+     */
+    public VirtualValueProvider getValueProvider() {
+        return valueProvider;
+    }
+
+    /**
+     * Sets a virtual value provider for this property
+     * @param valueProvider
+     */
+    public void setValueProvider(VirtualValueProvider valueProvider) {
+        this.valueProvider = valueProvider;
+    }
+
+    /**
+     * Returns the value of this state evt. by using the registered virtual
+     * value provider.
+     * @return
+     */
+    public InternalValue[] getValues() {
+        InternalValue[] values = null;
+        if (valueProvider != null) {
+            values = valueProvider.getVirtualValues(name);
+        }
+        return valueProvider == null ? super.getValues() : values;
+    }
