JCR-2004: Update SPI locking to match JCR 2.0

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@781017 13f79535-47bb-0310-9956-ffa450edef68

-        String[] locktokens = sInfo.getLockTokens();
-        if (locktokens != null && locktokens.length > 0) {
-            IfHeader ifH = new IfHeader(locktokens);
-            method.setRequestHeader(ifH.getHeaderName(), ifH.getHeaderValue());
+        try {
+            String[] locktokens = sInfo.getLockTokens();
+            if (locktokens != null && locktokens.length > 0) {
+                IfHeader ifH = new IfHeader(locktokens);
+                method.setRequestHeader(ifH.getHeaderName(), ifH.getHeaderValue());
+            }
+        } catch (RepositoryException e) {
+            // should never get here
+            log.error("Unable to retrieve lock tokens: omitted from request header.");
