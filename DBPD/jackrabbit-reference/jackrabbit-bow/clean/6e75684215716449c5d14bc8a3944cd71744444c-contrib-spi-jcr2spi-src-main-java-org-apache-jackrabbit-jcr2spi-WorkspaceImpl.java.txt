assert that versionState used for restore/merge is obtained from the hierarchy belonging to 'this' session.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@515161 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.version.VersionImpl;
-            if (versions[i] instanceof VersionImpl) {
-                ItemState vState = ((NodeImpl)versions[i]).getItemState();
-                versionStates[i] = (NodeState) vState;
-            } else {
-                throw new RepositoryException("Unexpected error: Failed to retrieve a valid ID for the given version " + versions[i].getPath());
-            }
+            versionStates[i] = session.getVersionState(versions[i]);
