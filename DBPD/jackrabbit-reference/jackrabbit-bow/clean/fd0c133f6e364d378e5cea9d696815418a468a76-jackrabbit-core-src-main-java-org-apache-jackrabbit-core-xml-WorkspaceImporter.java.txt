JCR-890: concurrent read-only access to a session

Leverage SessionContext in more places.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957229 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.NodeTypeRegistry;
+import org.apache.jackrabbit.core.session.SessionContext;
-                             NodeTypeRegistry ntReg,
+                             SessionContext sessionContext,
-        this(parentPath, wsp, ntReg, uuidBehavior, null);
+        this(parentPath, wsp, sessionContext, uuidBehavior, null);
-    public WorkspaceImporter(Path parentPath,
-                             WorkspaceImpl wsp,
-                             NodeTypeRegistry ntReg,
-                             int uuidBehavior,
-                             ImportConfig config)
+    public WorkspaceImporter(
+            Path parentPath, WorkspaceImpl wsp, SessionContext sessionContext,
+            int uuidBehavior, ImportConfig config)
-        this.session = (SessionImpl) wsp.getSession();
+        this.session = sessionContext.getSessionImpl();
-                wsp.getItemStateManager(), ntReg, session.getLockManager(),
-                session, wsp.getHierarchyManager());
+                wsp.getItemStateManager(), sessionContext);
