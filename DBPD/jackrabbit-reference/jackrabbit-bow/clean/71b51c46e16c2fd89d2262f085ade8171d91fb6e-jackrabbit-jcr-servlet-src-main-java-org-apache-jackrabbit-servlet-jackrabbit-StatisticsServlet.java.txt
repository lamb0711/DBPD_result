JCR-3040 JMX Stats for the Session

Adjust StatisticsServlet to match the previous commit

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1182469 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.api.stats.RepositoryStatistics;
+import org.apache.jackrabbit.api.stats.TimeSeries;
-import org.apache.jackrabbit.core.stats.RepositoryStatistics;
-import org.apache.jackrabbit.core.stats.TimeSeries;
-            boolean first = true;
-            for (Map.Entry<String, TimeSeries> entry : statistics) {
-                if (first) {
-                    first = false;
-                } else {
-                    writer.write(',');
-                }
-                write(writer, entry.getKey(), entry.getValue());
-            }
+            write(writer, "read", statistics.getTimeSeries(
+                    RepositoryStatistics.Type.SESSION_READ_COUNTER));
+            writer.write(',');
+            write(writer, "write", statistics.getTimeSeries(
+                    RepositoryStatistics.Type.SESSION_WRITE_COUNTER));
+            writer.write(',');
+            write(writer, "login", statistics.getTimeSeries(
+                    RepositoryStatistics.Type.SESSION_LOGIN_COUNTER));
-        write(writer, "second", series.getEventsPerSecond());
+        write(writer, "second", series.getValuePerSecond());
-        write(writer, "minute", series.getEventsPerMinute());
+        write(writer, "minute", series.getValuePerMinute());
-        write(writer, "hour", series.getEventsPerHour());
+        write(writer, "hour", series.getValuePerHour());
-        write(writer, "week", series.getEventsPerWeek());
+        write(writer, "week", series.getValuePerWeek());
