- fixing some versioning issues. all versioning tests now pass.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@164980 13f79535-47bb-0310-9956-ffa450edef68

-                VersionLabelsNodeState vlns = new VersionLabelsNodeState(this, vh, state.getUUID(), uuid);
-                vlns.setDefinitionId(NDEF_VERSION_LABELS);
-                // need to add as hard reference to version history, so that it does not get fluhed.
-                state.addStateReference(vlns);
-                cache(vlns);
-                // load parent, that must be a version history
-                getItemState(new NodeId(vi.getParent().getId()));
-                // this is a bit dangerous
-                state = (VirtualNodeState) getItemState(id);
+                InternalVersionLabels vl = (InternalVersionLabels) vi;
+                state = new VersionLabelsNodeState(this, (InternalVersionHistory) vl.getParent(), vl.getParent().getId(), vi.getId());
+                state.setDefinitionId(NDEF_VERSION_LABELS);
