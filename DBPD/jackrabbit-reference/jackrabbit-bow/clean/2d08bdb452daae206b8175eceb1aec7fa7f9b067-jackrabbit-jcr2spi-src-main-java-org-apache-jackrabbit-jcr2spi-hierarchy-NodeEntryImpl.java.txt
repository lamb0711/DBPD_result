JCR-1798: Avoid individual Item reloading upon Session/Item.refresh(true)
JCR-1809: Avoid extra round trip to the SPI upon Node.getNode and Session.getItem

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@704933 13f79535-47bb-0310-9956-ffa450edef68

-     * @see HierarchyEntry#reload(boolean, boolean)
+     * @see HierarchyEntry#reload(boolean)
-    public void reload(boolean keepChanges, boolean recursive) {
+    public void reload(boolean recursive) {
-        super.reload(keepChanges, recursive);
+        super.reload(recursive);
-                ce.reload(keepChanges, recursive);
+                ce.reload(recursive);
+                // -> if cnes are complete -> assume that it doesn't exist.
+                //    refresh will bring up new entries added in the mean time
+                //    on the persistent layer.
+                if (entry.childNodeEntries.isComplete()) {
+                    throw new PathNotFoundException(path.toString());
+                }
-                && Status.NEW != getStatus()) {
+                && !childNodeEntries.isComplete()) {
