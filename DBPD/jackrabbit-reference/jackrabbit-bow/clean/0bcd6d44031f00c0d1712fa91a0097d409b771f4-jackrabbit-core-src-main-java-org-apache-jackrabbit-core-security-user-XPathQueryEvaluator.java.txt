JCR-2800: Implement search facility for users and groups
enhanced selector mechanism
work in progress

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1033947 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.api.security.user.QueryBuilder.Selector;
+import org.apache.jackrabbit.api.security.user.User;
-import javax.jcr.*;
+import javax.jcr.Node;
+import javax.jcr.PropertyType;
+import javax.jcr.RepositoryException;
+import javax.jcr.Value;
-    private String getNtName(Selector selector) throws RepositoryException {
-        switch (selector) {
-            case AUTHORIZABLE:
-                return session.getJCRName(UserConstants.NT_REP_AUTHORIZABLE);
-
-            case USER:
-                return session.getJCRName(UserConstants.NT_REP_USER);
-
-            case GROUP:
-                return session.getJCRName(UserConstants.NT_REP_GROUP);
-
-            default:
-                throw new RepositoryException("Invalid selector: " + selector);
+    private String getNtName(Class<? extends Authorizable> selector) throws RepositoryException {
+        if (User.class.isAssignableFrom(selector)) {
+            return session.getJCRName(UserConstants.NT_REP_USER);
+        }
+        else if (Group.class.isAssignableFrom(selector)) {
+            return session.getJCRName(UserConstants.NT_REP_GROUP);
+        }
+        else {
+            return session.getJCRName(UserConstants.NT_REP_AUTHORIZABLE);
