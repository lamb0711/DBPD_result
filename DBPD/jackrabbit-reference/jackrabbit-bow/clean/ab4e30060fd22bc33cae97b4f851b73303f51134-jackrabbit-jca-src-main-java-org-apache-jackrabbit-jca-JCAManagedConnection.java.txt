JCR-2901 the transaction handling in container managed environment is broken

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1074140 13f79535-47bb-0310-9956-ffa450edef68

-    private final XAResource xaResource;
+    private XAResource xaResource;
-        cleanup();
-        session.logout();
+        this.session.logout();
+        this.handles.clear();
+            if (this.mcf.getBindSessionToTransaction().booleanValue() && (this.xaResource instanceof TransactionBoundXAResource)) {
+            	((TransactionBoundXAResource) this.xaResource).rebind((XAResource) session);
+            } else {
+            	this.xaResource = (XAResource) session;
+            }
