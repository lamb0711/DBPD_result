(JCR-70) Expose registered node types below /jcr:system/jcr:nodeTypes

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@157939 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.nodetype.virtual.VirtualNodeTypeStateProvider;
+    private static final String NODETYPES_NODE_UUID = "deadbeef-cafe-cafe-cafe-babecafebabe";
+            // add nodetypes
+            nt = sysSession.getNodeTypeManager().getNodeType(REP_NODETYPES);
+            sysRoot.internalAddChildNode(JCR_NODETYPES, nt, NODETYPES_NODE_UUID);
+                        itemStateMgr.addVirtualItemStateProvider(
+                                new VirtualNodeTypeStateProvider(ntReg, NODETYPES_NODE_UUID, SYSTEM_ROOT_NODE_UUID)
+                        );
