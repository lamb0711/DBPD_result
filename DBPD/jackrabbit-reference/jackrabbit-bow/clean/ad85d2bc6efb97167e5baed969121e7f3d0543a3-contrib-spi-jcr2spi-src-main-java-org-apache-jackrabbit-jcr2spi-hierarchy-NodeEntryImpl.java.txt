JCR-1099 jcr2spi NodeEntryImpl.getPath() blows stack due to getIndex() calling itself

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@587011 13f79535-47bb-0310-9956-ffa450edef68

-            if (state == null || state.getDefinition().allowsSameNameSiblings()) {
+            if (state == null || !state.hasDefinition() || state.getDefinition().allowsSameNameSiblings()) {
