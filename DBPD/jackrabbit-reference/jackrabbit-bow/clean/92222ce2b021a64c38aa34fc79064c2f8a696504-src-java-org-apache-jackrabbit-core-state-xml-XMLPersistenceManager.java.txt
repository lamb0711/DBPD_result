changed configuration layout and bootstrapping of repository:
- added jndi support
- workspace configuration is now separated from repository config
  

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@54857 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.config.WorkspaceConfig;
+import org.apache.jackrabbit.core.fs.*;
-import org.apache.jackrabbit.core.fs.FileSystemException;
-import org.apache.jackrabbit.core.fs.FileSystemPathUtil;
-import org.apache.jackrabbit.core.fs.FileSystemResource;
+import org.apache.jackrabbit.core.fs.local.LocalFileSystem;
-    public void init(WorkspaceDef wspDef) throws Exception {
-        itemStateStore = wspDef.getWorkspaceStore();
-        if (wspDef.getBlobStore() != null) {
-            blobStore = wspDef.getBlobStore();
-        } else {
-            blobStore = itemStateStore;
-        }
+    public void init(WorkspaceConfig wspConfig) throws Exception {
+        FileSystem wspFS = wspConfig.getFileSystem();
+        itemStateStore = new BasedFileSystem(wspFS, "/data");
+
+        //blobStore = new BasedFileSystem(wspFS, "/blobs");
+        /**
+         * store blob's in local file system in a sub directory
+         * of the workspace home directory
+         * todo make blob store configurable
+         */
+        LocalFileSystem blobFS = new LocalFileSystem();
+        blobFS.setPath(wspConfig.getHomeDir() + "/blobs");
+        blobFS.init();
+        blobStore = blobFS;
+
