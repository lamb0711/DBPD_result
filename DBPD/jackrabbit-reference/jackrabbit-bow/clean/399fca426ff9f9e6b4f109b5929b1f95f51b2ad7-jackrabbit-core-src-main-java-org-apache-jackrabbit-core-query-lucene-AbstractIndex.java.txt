JCR-415: Enhance indexing of binary content
- Remove workaround with TextExtractorReader. Binary content is now indexed (text extracted) when really needed.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@489112 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.lucene.document.Document;
+import javax.jcr.RepositoryException;
-     * Adds a document to this index and invalidates the shared reader.
+     * Adds a node to this index and invalidates the shared reader.
-     * @param doc the document to add.
+     * @param nodeIndexer the node indexer of the node to add.
-    void addDocument(Document doc) throws IOException {
-        getIndexWriter().addDocument(doc);
+    void addNode(NodeIndexer nodeIndexer) throws IOException {
+        try {
+            getIndexWriter().addDocument(nodeIndexer.createDoc());
+        } catch (RepositoryException e) {
+            IOException iex = new IOException(e.getMessage());
+            iex.initCause(e);
+            throw iex;
+        }
