webapp: adding some better error reporting  (tobi)
webapp: adding support for late repository retrieval (tobi)
server: workspace not passed to Repository.login in webdav/simple/DavSessionProviderImpl
JCR-280 - IllegalArgumentException when retrieving DateHeader 
JCR-282 - respect maximal value for timeout
JCR-276 - SimpleWebdavServlet: avoid 404 on the root collection after successful connection to it.


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@349905 13f79535-47bb-0310-9956-ffa450edef68

+            // retrieve the workspace name
+            String workspaceName = request.getRequestLocator().getWorkspaceName();
+            // empty workspaceName rather means default -> must be 'null'
+            if (workspaceName != null && "".equals(workspaceName)) {
+                workspaceName = null;
+            }
-            Session repSession = sesProvider.getSession(request, repository, null);
+            Session repSession = sesProvider.getSession(request, repository, workspaceName);
-        } catch (LoginException e) {
-	    throw new JcrDavException(e);
+        } catch (NoSuchWorkspaceException e) {
+            // the default error-code for NoSuchWorkspaceException is 409 conflict
+            // which seems not appropriate here
+            throw new JcrDavException(e, DavServletResponse.SC_NOT_FOUND);
