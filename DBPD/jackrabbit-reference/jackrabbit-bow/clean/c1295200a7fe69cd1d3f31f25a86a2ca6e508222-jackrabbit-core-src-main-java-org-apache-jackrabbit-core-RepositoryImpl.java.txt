JCR-1932: Session.getAttributes( ) call always returns an empty array

Added a protected SessionImpl.setAttribute() method to set the attributes of a session.

Use the method in RepositoryImpl.login() when a SimpleCredentials instance has been passed.

Added a test case for this.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@744954 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.SimpleCredentials;
-            // create session
-            return createSession(authCtx, workspaceName);
+            // create session, and add SimpleCredentials attributes (JCR-1932)
+            SessionImpl session = createSession(authCtx, workspaceName);
+            if (credentials instanceof SimpleCredentials) {
+                SimpleCredentials sc = (SimpleCredentials) credentials;
+                String[] names = sc.getAttributeNames();
+                for (int i = 0; i < names.length; i++) {
+                    session.setAttribute(names[i], sc.getAttribute(names[i]));
+                }
+            }
+            return session;
