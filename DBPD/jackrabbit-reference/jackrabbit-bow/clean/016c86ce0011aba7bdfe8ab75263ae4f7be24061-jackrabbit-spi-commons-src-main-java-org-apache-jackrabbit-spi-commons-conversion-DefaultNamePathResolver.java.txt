JCR-1612: Reintroduce NamespaceStorage and namespace-caching

Continuing to simplify NamespaceRegistryImpl: No need for it to implement NamePathResolver.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@681132 13f79535-47bb-0310-9956-ffa450edef68

-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
+import javax.jcr.NamespaceException;
+import javax.jcr.NamespaceRegistry;
+import javax.jcr.Session;
+
-import org.apache.jackrabbit.spi.commons.namespace.NamespaceResolver;
-
-import javax.jcr.NamespaceException;
+import org.apache.jackrabbit.spi.commons.namespace.NamespaceResolver;
+import org.apache.jackrabbit.spi.commons.namespace.RegistryNamespaceResolver;
+import org.apache.jackrabbit.spi.commons.namespace.SessionNamespaceResolver;
-    private static Logger log = LoggerFactory.getLogger(DefaultNamePathResolver.class);
-
+
+    public DefaultNamePathResolver(Session session) {
+        this(new SessionNamespaceResolver(session));
+    }
+
+    public DefaultNamePathResolver(NamespaceRegistry registry) {
+        this(new RegistryNamespaceResolver(registry));
+    }
+
