work in progress

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@425737 13f79535-47bb-0310-9956-ffa450edef68

-        // TODO: find better solution...
-        NodeId childId = AddNode.getLastCreated(getNodeState(), nodeName);
+        // retrieve id of state that has been created during execution of AddNode        
+        NodeId childId;
+        List cne = getNodeState().getChildNodeEntries(nodeName);
+        if (definition.allowsSameNameSiblings()) {
+            // TODO: find proper solution. problem with same-name-siblings
+            childId = ((NodeState.ChildNodeEntry)cne.get(cne.size()-1)).getId();
+        } else {
+            childId = ((NodeState.ChildNodeEntry)cne.get(0)).getId();
+        }
