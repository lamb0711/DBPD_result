JCR-1169 Distribution of commons classes - avoid re-formatting Name constants inside query parser


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@590131 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.conversion.IllegalNameException;
-        String fName = ((SimpleNode) node.jjtGetChild(0)).getValue();
-        fName = fName.substring(0, fName.length() - 1);
+        String tmp = ((SimpleNode) node.jjtGetChild(0)).getValue();
+        String fName = tmp.substring(0, tmp.length() - 1);
-            if (resolver.getJCRName(FN_NOT).equals(fName)
-                    || resolver.getJCRName(FN_NOT_10).equals(fName)) {
+            Name funName = resolver.getQName(fName);
+            
+            if (FN_NOT.equals(funName) || FN_NOT_10.equals(funName)) {
-            } else if (resolver.getJCRName(XS_DATETIME).equals(fName)) {
+            } else if (XS_DATETIME.equals(funName)) {
-            } else if (resolver.getJCRName(JCR_CONTAINS).equals(fName)) {
+            } else if (JCR_CONTAINS.equals(funName)) {
-            } else if (resolver.getJCRName(JCR_LIKE).equals(fName)) {
+            } else if (JCR_LIKE.equals(funName)) {
-            } else if (resolver.getJCRName(FN_TRUE).equals(fName)) {
+            } else if (FN_TRUE.equals(funName)) {
-            } else if (resolver.getJCRName(FN_FALSE).equals(fName)) {
+            } else if (FN_FALSE.equals(funName)) {
-            } else if (resolver.getJCRName(FN_POSITION).equals(fName)) {
+            } else if (FN_POSITION.equals(funName)) {
-            } else if (resolver.getJCRName(FN_FIRST).equals(fName)) {
+            } else if (FN_FIRST.equals(funName)) {
-            } else if (resolver.getJCRName(FN_LAST).equals(fName)) {
+            } else if (FN_LAST.equals(funName)) {
-            } else if (resolver.getJCRName(JCR_DEREF).equals(fName)) {
+            } else if (JCR_DEREF.equals(funName)) {
-            } else if (resolver.getJCRName(JCR_SCORE).equals(fName)) {
+            } else if (JCR_SCORE.equals(funName)) {
-            } else if (resolver.getJCRName(FN_LOWER_CASE).equals(fName)) {
+            } else if (FN_LOWER_CASE.equals(funName)) {
-            } else if (resolver.getJCRName(FN_UPPER_CASE).equals(fName)) {
+            } else if (FN_UPPER_CASE.equals(funName)) {
-            } else if (resolver.getJCRName(REP_SIMILAR).equals(fName)) {
+            } else if (REP_SIMILAR.equals(funName)) {
-            } else if (resolver.getJCRName(REP_SPELLCHECK).equals(fName)
+            } else if (REP_SPELLCHECK.equals(funName)
+        } catch (IllegalNameException e) {
+            exceptions.add(e);
