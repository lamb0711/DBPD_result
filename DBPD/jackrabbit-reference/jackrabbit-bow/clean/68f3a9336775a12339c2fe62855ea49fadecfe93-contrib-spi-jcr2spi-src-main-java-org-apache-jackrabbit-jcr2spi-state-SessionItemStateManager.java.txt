Move method SessionItemStateManager.collectOperations() to ChangeLog.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@433611 13f79535-47bb-0310-9956-ffa450edef68

+        changeLog.collectOperations(transientStateMgr.getOperations());
-        collectOperations(affectedItemStates, changeLog);
-
-        collectOperations(affectedStates, changeLog);
+        changeLog.collectOperations(transientStateMgr.getOperations());
-    /**
-     * Retuns a list of operations that are in the scope the the change set
-     * defined by the affected <code>ItemState</code>s.
-     *
-     * @param affectedStates
-     * @param changeLog
-     */
-    private void collectOperations(Set affectedStates, ChangeLog changeLog) {
-        Iterator opsIter = transientStateMgr.getOperations();
-        while (opsIter.hasNext()) {
-            Operation op = (Operation) opsIter.next();
-            Iterator states = op.getAffectedItemStates().iterator();
-            while (states.hasNext()) {
-                ItemState state = (ItemState) states.next();
-                if (affectedStates.contains(state)) {
-                    changeLog.addOperation(op);
-                    break;
-                }
-            }
-        }
-    }
-
