JCR-415: Enhance indexing of binary content
- Remove workaround with TextExtractorReader. Binary content is now indexed (text extracted) when really needed.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@489112 13f79535-47bb-0310-9956-ffa450edef68

-                Document doc = null;
-                try {
-                    doc = createDocument(state, getNamespaceMappings());
-                } catch (RepositoryException e) {
-                    log.error("Exception while creating document for node: "
-                            + state.getNodeId() + ": " + e.toString());
-                }
-                return doc;
+                return createNodeIndexer(state, getNamespaceMappings());
-     * Creates a lucene <code>Document</code> from a node state using the
-     * namespace mappings <code>nsMappings</code>.
-     * @param node the node state to index.
+     * Creates a <code>NodeIndexer</code> for a node state using the namespace
+     * mappings <code>nsMappings</code>.
+     *
+     * @param node       the node state to index.
-     * @return a lucene <code>Document</code> that contains all properties
-     *  of <code>node</code>.
-     * @throws RepositoryException if an error occurs while indexing the
-     *  <code>node</code>.
+     * @return a <code>NodeIndexer</code> for the given <code>node</code>.
-    protected Document createDocument(NodeState node, NamespaceMappings nsMappings)
-            throws RepositoryException {
-        return NodeIndexer.createDocument(node, getContext().getItemStateManager(),
+    protected NodeIndexer createNodeIndexer(NodeState node, NamespaceMappings nsMappings) {
+        return new NodeIndexer(node, getContext().getItemStateManager(),
