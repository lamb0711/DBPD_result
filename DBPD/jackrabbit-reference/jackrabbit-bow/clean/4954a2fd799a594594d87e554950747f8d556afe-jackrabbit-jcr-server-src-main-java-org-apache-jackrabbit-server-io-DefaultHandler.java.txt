JCR-2385: webdav: nullpointer exception while getting the tikka detector

The IOManager instance is not available when a DefaultHandler is used as a PropertyHandler implementation. In such cases we can simply return application/octet-stream as the content type.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@880743 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.tika.config.TikaConfig;
-import org.apache.tika.detect.Detector;
-import org.apache.tika.exception.TikaException;
-            return ioManager.getDetector().detect(null, metadata).toString();
+            if (ioManager != null && ioManager.getDetector() != null) {
+                return ioManager.getDetector().detect(null, metadata).toString();
+            } else {
+                return "application/octet-stream";
+            }
