JCR-1765: Config: make all elements in the security configuration optional

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@704324 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.simple.SimpleSecurityManager;
-
-            String workspaceName = smc.getWorkspaceName();
-            if (workspaceName == null) {
-                workspaceName = getConfig().getDefaultWorkspaceName();
+            String workspaceName = getConfig().getDefaultWorkspaceName();
+            if (smc != null && smc.getWorkspaceName() != null) {
+                workspaceName = smc.getWorkspaceName();
-            securityMgr = (JackrabbitSecurityManager) smc.newInstance();
-            securityMgr.init(this, securitySession);
+            if (smc == null) {
+                log.debug("No configuration entry for SecurityManager. Using org.apache.jackrabbit.core.security.simple.SimpleSecurityManager");
+                securityMgr = new SimpleSecurityManager();
+            } else {
+                securityMgr = (JackrabbitSecurityManager) smc.newInstance();
+            }
+            securityMgr.init(this, securitySession);
-        String secWspName = repConfig.getSecurityConfig().getSecurityManagerConfig().getWorkspaceName();
+        String secWspName = null;
+        SecurityManagerConfig smc = repConfig.getSecurityConfig().getSecurityManagerConfig();
+        if (smc != null) {
+           secWspName = smc.getWorkspaceName();
+        }
-            if(secWspName != null && !wspInfos.containsKey(secWspName)) {
+            if (secWspName != null && !wspInfos.containsKey(secWspName)) {
