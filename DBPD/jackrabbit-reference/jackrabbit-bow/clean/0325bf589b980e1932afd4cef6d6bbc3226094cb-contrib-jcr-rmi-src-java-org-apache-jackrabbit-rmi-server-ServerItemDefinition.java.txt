- fixing serialization problems when defaultPrimaryType or declaring (for root node) is NULL

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@178638 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.nodetype.NodeType;
-        return getFactory().getRemoteNodeType(def.getDeclaringNodeType());
+        NodeType nt = def.getDeclaringNodeType();
+        if (nt == null) {
+            return null;
+        } else {
+            return getFactory().getRemoteNodeType(nt);
+        }
