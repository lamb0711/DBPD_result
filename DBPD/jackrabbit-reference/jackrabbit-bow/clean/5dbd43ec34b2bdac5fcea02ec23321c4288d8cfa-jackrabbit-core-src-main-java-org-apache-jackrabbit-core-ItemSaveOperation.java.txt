JCR-3289: Fix data inconsistency when remove operation is performed after move operation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1311861 13f79535-47bb-0310-9956-ffa450edef68

-            SessionItemStateManager sism, Iterable<ItemState> states) {
+            SessionItemStateManager sism, Iterable<ItemState> states) throws StaleItemStateException {
+            if (transientState.getModCount() != persistentState.getModCount()) {
+                throw new StaleItemStateException(transientState.getId() + " has been modified externally");
+            }
