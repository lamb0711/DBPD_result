- enhancing versioning to work with all workspaces

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@56758 13f79535-47bb-0310-9956-ffa450edef68

-        SessionImpl sysSession = getSystemSession(repConfig.getDefaultWorkspaceName());
-        NodeImpl rootNode = (NodeImpl) sysSession.getRootNode();
-        if (!rootNode.hasNode(SYSTEM_ROOT_NAME)) {
-            rootNode.addNode(SYSTEM_ROOT_NAME, NodeTypeRegistry.NT_UNSTRUCTURED);
-            rootNode.save();
+        // (by now, we just create a system root node in all workspaces)
+        Iterator wspNames = wspConfigs.keySet().iterator();
+        while (wspNames.hasNext()) {
+            String wspName = (String) wspNames.next();
+            NodeImpl rootNode = (NodeImpl) getSystemSession(wspName).getRootNode();
+            if (!rootNode.hasNode(SYSTEM_ROOT_NAME)) {
+                rootNode.addNode(SYSTEM_ROOT_NAME, NodeTypeRegistry.NT_UNSTRUCTURED);
+                rootNode.save();
+            }
