- adding versioning configuratuin
- adapting versioning to new persistence manager api

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@126386 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.state.UpdateOperation;
-    private void storePredecessors() throws RepositoryException {
+    private void storePredecessors(UpdateOperation upd) throws RepositoryException {
-        node.setPropertyValues(VersionManager.PROPNAME_PREDECESSORS, PropertyType.STRING, values);
+        node.setPropertyValues(upd, VersionManager.PROPNAME_PREDECESSORS, PropertyType.STRING, values);
-    void internalDetach() throws RepositoryException {
+    void internalDetach(UpdateOperation upd) throws RepositoryException {
-            succ[i].internalDetachPredecessor(this);
+            succ[i].internalDetachPredecessor(upd, this);
-        storePredecessors();
+        storePredecessors(upd);
-    private void internalDetachPredecessor(InternalVersion v) throws RepositoryException {
+    private void internalDetachPredecessor(UpdateOperation upd, InternalVersion v) throws RepositoryException {
-        storePredecessors();
+        storePredecessors(upd);
