JCR-1106 Add simple query method to ObjectContentManager and adapt to new ObjectIterator constructor

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@572348 13f79535-47bb-0310-9956-ffa450edef68

-                                      query.getFilter().getFilterClass(),
+    *
+    * @see org.apache.jackrabbit.ocm.manager.ObjectContentManager#getObjectIterator(String, String)
+    */
+    public Iterator getObjectIterator(String query, String language) {
+        try {
+            log.debug("Get Object with expression : " + query);
+
+            javax.jcr.query.Query jcrQuery = session.getWorkspace().getQueryManager().createQuery(query, language);
+            QueryResult queryResult = jcrQuery.execute();
+            NodeIterator nodeIterator = queryResult.getNodes();
+
+            return new ObjectIterator(nodeIterator,
+                                      this.objectConverter,
+                                      this.session);
+
+        } catch (InvalidQueryException iqe) {
+            throw new org.apache.jackrabbit.ocm.exception.InvalidQueryException(iqe);
+        } catch (RepositoryException re) {
+            throw new ObjectContentManagerException(re.getMessage(), re);
+        }
+    }
+    
+    /**
