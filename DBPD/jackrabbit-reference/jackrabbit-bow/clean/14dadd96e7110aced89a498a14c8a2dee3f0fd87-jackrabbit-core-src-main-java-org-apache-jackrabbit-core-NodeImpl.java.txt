JCR-2272: Errors during concurrent session import of nodes with same UUIDs

Avoid the check for an existing id in NodeImpl.makePersistent().
Also fix a problem with cases where a node with a specific UUID
is both removed and added within the same transient space.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/branches/JCR-2272@1174017 13f79535-47bb-0310-9956-ffa450edef68

+        NodeState localState = stateMgr.makePersistent(transientState);
-        NodeState localState = (NodeState) transientState.getOverlayedState();
-        if (localState == null) {
-            // this node is 'new'
-            try {
-                localState = stateMgr.createNew(
-                        transientState.getNodeId(),
-                        transientState.getNodeTypeName(),
-                        transientState.getParentId());
-                transientState.connect(localState);
-            } catch (ItemStateException e) {
-                throw new RepositoryException(e);
-            }
-        }
-
-        synchronized (localState) {
-            // copy state from transient state:
-            localState.copy(transientState, true);
-            // make state persistent
-            stateMgr.store(localState);
-        }
-
-        // tell state manager to disconnect item state
-        stateMgr.disconnectTransientItemState(transientState);
