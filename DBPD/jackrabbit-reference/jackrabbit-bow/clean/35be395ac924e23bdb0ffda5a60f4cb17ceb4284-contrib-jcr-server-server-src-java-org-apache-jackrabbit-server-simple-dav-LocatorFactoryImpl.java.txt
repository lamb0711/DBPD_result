- [JCR-84] WebDAV LocatorFactoryImpl$Locator.getHref() constructs root resource URLs incorrectly
- adapting for jcr-locking support
- adding nodetype reports

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159607 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.log4j.Logger;
+ *
+ * @todo improve special handling of root item....
+    /** the default logger */
+    private static final Logger log = Logger.getLogger(LocatorFactoryImpl.class);
+
+	// remove the configured repository prefix from the path
+	// special treatment for root item, that has no name but '/' path.
+	    // remove trailing '/' that is not part of the itemPath except for the root item.
-            return prefix + itemPath + (isCollection ? "/" : "");
+	    // avoid doubled trainling '/' for the root item
+	    String suffix = (isCollection && !isRootLocation()) ? "/" : "";
+            return prefix + itemPath + suffix;
