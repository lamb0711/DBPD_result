JCR-3512 DelayedDelete in MultiDatastore does not work correctly

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1461524 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * {@inheritDoc}
+     */
-                            new DeleteDelayedIdentifiersTask(),
+                            //Start immediately ...
+                            new DeleteDelayedIdentifiersTask(0L),
+    /**
+     * {@inheritDoc}
+     */
+    /**
+     * {@inheritDoc}
+     */
-                                    new DeleteDelayedIdentifiersTask(),
+                                    new DeleteDelayedIdentifiersTask(delayedDeleteSleep),
+        private long sleepTime = 0L;
+        
+        /**
+         * Constructor
+         * @param sleep how long this DeleteDelayedIdentifiersTask should sleep in seconds.
+         */
+        public DeleteDelayedIdentifiersTask(long sleep) {
+            this.sleepTime = (sleep * 1000L);
+        }
+                if (sleepTime > 0) {
+                    try {
+                        Thread.sleep(sleepTime);
+                    } catch (InterruptedException e) {
+                        Thread.currentThread().interrupt();
+                    }
+                }
+                log.info("Start to delete DataRecords from the primary data store.");
