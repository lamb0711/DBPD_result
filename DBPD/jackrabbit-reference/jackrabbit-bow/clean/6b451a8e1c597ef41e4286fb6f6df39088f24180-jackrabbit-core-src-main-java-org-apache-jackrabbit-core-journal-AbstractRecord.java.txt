JCR-1483: Move common node type functionality to jackrabbit-spi-commons
- replaced NodeTypeDef (jackrabbit-core) with QNodeTypeDefinition
- QNodeTypeDefinitionImpl is not immutable, hence no cloning needed anymore
- introduced QNodeTypeDefinitionBuilder
- moved constructors of Q*DefinitionImpl classes in spi2jcr to spi-commons
- fixed a bug in RepositoryServiceImpl in spi2jcr

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816551 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.NodeTypeDef;
-    public void writeNodeTypeDef(NodeTypeDef ntd) throws JournalException {
+    public void writeNodeTypeDef(QNodeTypeDefinition ntd) throws JournalException {
-            writer.write(ntd.getQNodeTypeDefinition());
+            writer.write(ntd);
-    public NodeTypeDef readNodeTypeDef() throws JournalException {
+    public QNodeTypeDefinition readNodeTypeDef() throws JournalException {
-            return new NodeTypeDef(ntds.iterator().next());
+            return ntds.iterator().next();
