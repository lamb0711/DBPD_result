- Removed interface EventDispatcher. not used anymore.
- Adapted implementation of path handling in search to use regular term queries instead of a filter -> scales better.
- Changed notion of TEST_ROOT in test classes to also include the root slash.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@51875 13f79535-47bb-0310-9956-ffa450edef68

-    public void addNode(NodeState node, String path) throws IOException {
+    public void addNode(NodeState node, Path path) throws IOException {
-    public void updateNode(NodeState node, String path) throws IOException {
+    public void updateNode(NodeState node, Path path) throws IOException {
-    public void deleteNode(String path, String uuid) throws IOException {
-        log.debug("remove node from index: " + path);
+    public void deleteNode(Path path, String uuid) throws IOException {
+        if (log.isDebugEnabled()) {
+            log.debug("remove node from index: " + path.toString());
+        }
-                    addNode((NodeState) stateProvider.getItemState(id),
-                            path.toJCRPath(nsMappings));
+                    addNode((NodeState) stateProvider.getItemState(id), path);
+
-                    deleteNode(path.toJCRPath(nsMappings), e.getChildUUID());
+                    deleteNode(path, e.getChildUUID());
-            } catch (NoPrefixDeclaredException e) {
-                log.error("error indexing node.", e);
-                updateNode((NodeState) stateProvider.getItemState(id),
-                        path.toJCRPath(nsMappings));
-            } catch (NoPrefixDeclaredException e) {
-                log.error("error indexing node.", e);
+                updateNode((NodeState) stateProvider.getItemState(id), path);
-     * Returns a <code>Path</code>, which contains the same sequence of
-     * path elements as <code>p</code>, but has cut off any existing indexes
-     * on the path elements.
+     * Returns a <code>Path</code>, which contains the same sequence of path
+     * elements as <code>p</code>, but has cut off any existing indexes on the
+     * path elements.
