JCR-2325: rep:similar in xpath does not work

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@818532 13f79535-47bb-0310-9956-ffa450edef68

-        Name propertyName = steps[steps.length - 1].getNameTest();
-        
+        Name propertyName;
+        if (node.getOperation() == QueryConstants.OPERATION_SIMILAR) {
+            // this is a bit ugly:
+            // use the name of a dummy property because relPath actually
+            // references a property. whereas the relPath of the similar
+            // operation references a node
+            propertyName = NameConstants.JCR_PRIMARYTYPE;
+        } else {
+            propertyName = steps[steps.length - 1].getNameTest();
+        }
+
-        if (node.getOperation() == QueryConstants.OPERATION_SIMILAR) {
-            // this is a bit ugly:
-            // use the name of a dummy property because relPath actually
-            // references a property. whereas the relPath of the similar
-            // operation references a node
-            propertyName = NameConstants.JCR_PRIMARYTYPE;
-        }
