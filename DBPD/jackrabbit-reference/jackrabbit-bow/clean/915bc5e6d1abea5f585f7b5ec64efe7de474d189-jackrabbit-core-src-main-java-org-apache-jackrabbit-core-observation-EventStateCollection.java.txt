JCR-1728: Observation logs error when a node is moved in place

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@691181 13f79535-47bb-0310-9956-ffa450edef68

-                        if (!oldPath.equals(newPath)) {
-                            events.add(EventState.childNodeRemoved(oldParentId,
-                                    getParent(oldPath),
-                                    n.getNodeId(),
-                                    oldPath.getNameElement(),
-                                    oldParentNodeType.getQName(),
-                                    mixins,
-                                    session));
+                        events.add(EventState.childNodeRemoved(oldParentId,
+                                getParent(oldPath),
+                                n.getNodeId(),
+                                oldPath.getNameElement(),
+                                oldParentNodeType.getQName(),
+                                mixins,
+                                session));
-                            NodeState newParent = (NodeState) changes.get(newParentId);
-                            NodeTypeImpl newParentNodeType = getNodeType(newParent, session);
-                            mixins = newParent.getMixinTypeNames();
-                            events.add(EventState.childNodeAdded(newParentId,
-                                    getParent(newPath),
-                                    n.getNodeId(),
-                                    newPath.getNameElement(),
-                                    newParentNodeType.getQName(),
-                                    mixins,
-                                    session));
-                        } else {
-                            log.error("Unable to calculate old path of moved node");
-                        }
+                        NodeState newParent = (NodeState) changes.get(newParentId);
+                        NodeTypeImpl newParentNodeType = getNodeType(newParent, session);
+                        mixins = newParent.getMixinTypeNames();
+                        events.add(EventState.childNodeAdded(newParentId,
+                                getParent(newPath),
+                                n.getNodeId(),
+                                newPath.getNameElement(),
+                                newParentNodeType.getQName(),
+                                mixins,
+                                session));
