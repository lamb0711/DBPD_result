JCR-3263: Consistency checker performance improvements

Add a default implementation of getAllNodeInfos() in AbstractBundlePersistenceManager to avoid having to reimplement the logic in all PMs.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1352849 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.LinkedHashMap;
+import java.util.Map;
+import org.apache.jackrabbit.core.persistence.util.NodeInfo;
+    //------------------------------------------< IterablePersistenceManager >--
+
+    @Override
+    public Map<NodeId, NodeInfo> getAllNodeInfos(NodeId after, int maxCount)
+            throws ItemStateException, RepositoryException {
+        Map<NodeId, NodeInfo> infos = new LinkedHashMap<NodeId, NodeInfo>();
+        for (NodeId nodeId : getAllNodeIds(after, maxCount)) {
+            infos.put(nodeId, new NodeInfo(loadBundle(nodeId)));
+        }
+        return infos;
+    }
+
