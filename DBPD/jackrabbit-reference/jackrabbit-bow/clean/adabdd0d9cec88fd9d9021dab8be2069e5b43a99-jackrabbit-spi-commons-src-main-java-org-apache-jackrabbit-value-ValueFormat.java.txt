JCR-1169 Distribution of commons classes
JCR-996 Name and Path interfaces in SPI

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@586058 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.NameException;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.Path;
-import org.apache.jackrabbit.name.PathFormat;
-import org.apache.jackrabbit.name.NameFormat;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import org.apache.jackrabbit.conversion.NameException;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.Path;
-     * @param nsResolver
+     * @param resolver
-    public static QValue getQValue(Value jcrValue, NamespaceResolver nsResolver,
+    public static QValue getQValue(Value jcrValue, NamePathResolver resolver,
-            return getQValue(jcrValue.getString(), jcrValue.getType(), nsResolver, factory);
+            return getQValue(jcrValue.getString(), jcrValue.getType(), resolver, factory);
-     * @param nsResolver
+     * @param resolver
-                                      NamespaceResolver nsResolver,
+                                      NamePathResolver resolver,
-                qValues.add(getQValue(jcrValues[i], nsResolver, factory));
+                qValues.add(getQValue(jcrValues[i], resolver, factory));
-     * @param nsResolver
+     * @param resolver
-                                   NamespaceResolver nsResolver,
+                                   NamePathResolver resolver,
-                    QName qName = NameFormat.parse(jcrValue, nsResolver);
+                    Name qName = resolver.getQName(jcrValue);
-                    Path qPath = PathFormat.parse(jcrValue, nsResolver).getNormalizedPath();
+                    Path qPath = resolver.getQPath(jcrValue).getNormalizedPath();
-     * @param nsResolver
+     * @param qualifiedValue
+     * @param resolver
-                                    NamespaceResolver nsResolver,
+                                    NamePathResolver resolver,
-                try {
-                    Path qPath = qualifiedValue.getPath();
-                    jcrValue = factory.createValue(PathFormat.format(qPath, nsResolver), propertyType);
-                } catch (NoPrefixDeclaredException npde) {
-                    // should never get here...
-                    throw new RepositoryException("internal error: encountered unregistered namespace", npde);
-                }
+                Path qPath = qualifiedValue.getPath();
+                jcrValue = factory.createValue(resolver.getJCRPath(qPath), propertyType);
-                try {
-                    QName qName = qualifiedValue.getQName();
-                    jcrValue = factory.createValue(NameFormat.format(qName, nsResolver), propertyType);
-                } catch (NoPrefixDeclaredException npde) {
-                    // should never get here...
-                    throw new RepositoryException("internal error: encountered unregistered namespace", npde);
-                }
+                Name qName = qualifiedValue.getName();
+                jcrValue = factory.createValue(resolver.getJCRName(qName), propertyType);
