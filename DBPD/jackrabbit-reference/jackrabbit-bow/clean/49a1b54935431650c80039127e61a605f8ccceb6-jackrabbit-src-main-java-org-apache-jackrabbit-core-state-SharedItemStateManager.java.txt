Check for referential integrity too strict: if a node is deleted
and then again added with same UUID it is still referenceable.


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368779 13f79535-47bb-0310-9956-ffa450edef68

-                    if (refs.hasReferences()) {
+                    // in some versioning operations (such as restore) a node
+                    // may actually be deleted and then again added with the
+                    // same UUID, i.e. the node is still referenceable.  
+                    if (refs.hasReferences() && !changes.has(node.getId())) {
