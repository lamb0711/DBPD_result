Jira issue JCR-14: {XML|Object}PersistenceManager.destroy(*) may fail 

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@55854 13f79535-47bb-0310-9956-ffa450edef68

+     * Same as <code>{@link #delete(false)}</code>.
+        delete(false);
+    }
+
+    /**
+     * Deletes the file backing this <code>BLOBFileValue</code>.
+     *
+     * @param pruneEmptyParentDirs if <code>true</code>, empty parent directories will
+     *                             automatically be deleted
+     */
+    public void delete(boolean pruneEmptyParentDirs) {
+            if (pruneEmptyParentDirs) {
+                // prune empty parent directories
+                File parent = file.getParentFile();
+                while (parent != null && parent.delete()) {
+                    parent = parent.getParentFile();
+                }
+            }
-                fsResource.delete();
+                fsResource.delete(pruneEmptyParentDirs);
