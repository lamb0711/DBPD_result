JCR-1457: Restart of RMI-component fails (because it's not released while shutdown)

Explicitly unexport both the RMI repository and the RMI registry

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957151 13f79535-47bb-0310-9956-ffa450edef68

+import java.rmi.NoSuchObjectException;
+import java.rmi.server.UnicastRemoteObject;
+import java.util.NoSuchElementException;
+    private Registry rmiRegistry = null;
+
-
+                rmiRegistry = reg;
-            // drop strong referenece to remote repository
+            // Forcibly unexport the repository;
+            try {
+                UnicastRemoteObject.unexportObject(rmiRepository, true);
+            } catch (NoSuchObjectException e) {
+                log.warn("Odd, the RMI repository was not exported", e);
+            }
+            // drop strong reference to remote repository
+
+        if (rmiRegistry != null) {
+            try {
+                UnicastRemoteObject.unexportObject(rmiRegistry, true);
+            } catch (NoSuchObjectException e) {
+                log.warn("Odd, the RMI registry was not exported", e);
+            }
+            rmiRegistry = null;
+        }
