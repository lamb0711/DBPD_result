JCR-327: Mixins as supertypes do not appear to be queryable
- also search for mixins that extend the mixin of the element test

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@381292 13f79535-47bb-0310-9956-ffa450edef68

-                // only interested in types that can be used to create nodes
-                if (nt.isMixin()) {
-                    continue;
-                }
-                    Term t = new Term(FieldNames.PROPERTIES,
-                            FieldNames.createNamedValue(primaryTypeField, ntName));
+                    Term t;
+                    if (nt.isMixin()) {
+                        // search on jcr:mixinTypes
+                        t = new Term(FieldNames.PROPERTIES,
+                                FieldNames.createNamedValue(mixinTypesField, ntName));
+                    } else {
+                        // search on jcr:primaryType
+                        t = new Term(FieldNames.PROPERTIES,
+                                FieldNames.createNamedValue(primaryTypeField, ntName));
+                    }
