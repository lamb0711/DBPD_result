Work in progress
- Add checkQueryStatement() to RepositoryService
- Add Map of locally remapped namespaces to RepositoryService.executeQuery()
- Added test case for query statement with locally remapped namespace prefix

TODO: implement query statement check in spi2dav

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@483370 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.webdav.search.SearchInfo;
+import javax.jcr.query.InvalidQueryException;
+    public void checkQueryStatement(SessionInfo sessionInfo,
+                                    String statement,
+                                    String language,
+                                    Map namespaces)
+            throws InvalidQueryException, RepositoryException {
+        // TODO implement
+    }
+
-     * @see RepositoryService#executeQuery(SessionInfo, String, String)
+     * @see RepositoryService#executeQuery(SessionInfo, String, String, Map)
-    public QueryInfo executeQuery(SessionInfo sessionInfo, String statement, String language) throws RepositoryException {
+    public QueryInfo executeQuery(SessionInfo sessionInfo, String statement, String language, Map namespaces) throws RepositoryException {
-            method = new SearchMethod(uri, statement, language);
+            SearchInfo sInfo = new SearchInfo(language,
+                    Namespace.EMPTY_NAMESPACE, statement, namespaces);
+            method = new SearchMethod(uri, sInfo);
