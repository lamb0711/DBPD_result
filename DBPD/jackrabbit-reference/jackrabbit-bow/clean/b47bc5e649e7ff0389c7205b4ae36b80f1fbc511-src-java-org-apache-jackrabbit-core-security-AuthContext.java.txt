Moved LoginModule instantiation up to RepositoryImpl to break the AuthContext -> o.a.j.core.config dependency.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@294806 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.config.ConfigurationException;
-import org.apache.jackrabbit.core.config.LoginModuleConfig;
-
- *   <li>{@link AuthCotnext.Local} which implements authentication using a locally-defined
+ *   <li>{@link AuthContext.Local} which implements authentication using a locally-defined
-         * Creates an authentication context given a login module configuration and some credentials.
+         * Creates an authentication context given a login module and some credentials.
+         * @param module the login module
+         * @param options login module options
-         * @throws ConfigurationException if the login module couldn't be created
-        public Local(LoginModuleConfig config, Credentials creds) throws ConfigurationException {
-            this.module = config.getLoginModule();
-            this.options = config.getParameters();
+        public Local(LoginModule module, Map options, Credentials creds) {
+            this.module = module;
+            this.options = options;
