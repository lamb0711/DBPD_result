Added guard to disconnect item states from their overlaid shared state
in case of some failure. 


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@160150 13f79535-47bb-0310-9956-ffa450edef68

+        ObservationManagerImpl obsMgr = null;
+
-            sharedStateMgr.store(changeLog,
-                    (wspImpl != null) ? (ObservationManagerImpl) wspImpl.getObservationManager() : null);
+            if (wspImpl != null) {
+                obsMgr = (ObservationManagerImpl) wspImpl.getObservationManager();
+            }
+        sharedStateMgr.store(changeLog, obsMgr);
