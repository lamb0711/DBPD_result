minor changes needed for spi2dav (see spi contrib)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@506936 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.webdav.DavConstants;
+import java.util.HashSet;
+    /** the lock tokens of this session */
+    private final HashSet lockTokens = new HashSet();
+
+    /**
+     *
+     * @param session
+     */
-        session.addLockToken(token);
+        session.addLockToken(getJCRLockToken(token));
+        lockTokens.add(token);
-        return session.getLockTokens();
+        return (String[]) lockTokens.toArray(new String[lockTokens.size()]);
-        session.removeLockToken(token);
+        session.removeLockToken(getJCRLockToken(token));
+        lockTokens.remove(token);
+    }
+
+    //------------------------------------------------------------< private >---
+    private static String getJCRLockToken(String token) {
+        if (token.startsWith(DavConstants.OPAQUE_LOCK_TOKEN_PREFIX)) {
+            return token.substring(DavConstants.OPAQUE_LOCK_TOKEN_PREFIX.length());
+        } else {
+            return token;
+        }
