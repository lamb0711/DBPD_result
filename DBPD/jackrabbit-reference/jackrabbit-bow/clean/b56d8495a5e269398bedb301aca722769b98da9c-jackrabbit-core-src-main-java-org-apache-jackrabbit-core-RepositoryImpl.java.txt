JCR-1823: Repository.login throws IllegalStateException

Make sanityCheck() throw a RepositoryException.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@733080 13f79535-47bb-0310-9956-ffa450edef68

-     * @throws IllegalStateException if this repository has been rendered
-     *                               invalid for some reason (e.g. if it has
-     *                               been shut down)
+     * @throws RepositoryException if this repository has been rendered
+     *             invalid for some reason (e.g. if it has been shut down)
-    protected void sanityCheck() throws IllegalStateException {
+    protected void sanityCheck() throws RepositoryException {
-            throw new IllegalStateException("repository instance has been shut down");
+            throw new RepositoryException(
+                    "This repository instance has been shut down.");
-        // check sanity of this instance
-        sanityCheck();
-
-        // check sanity of this instance
-        sanityCheck();
-
-        // check sanity of this instance
-        sanityCheck();
-
-        // check sanity of this instance
-        sanityCheck();
-
-     * @throws IllegalStateException    If this repository has already been
-     *                                  shut down.
+     * @throws RepositoryException If this repository has been shut down.
-            throws IllegalStateException, NoSuchWorkspaceException {
+            throws NoSuchWorkspaceException, RepositoryException {
-            throws NoSuchWorkspaceException {
+            throws NoSuchWorkspaceException, RepositoryException {
