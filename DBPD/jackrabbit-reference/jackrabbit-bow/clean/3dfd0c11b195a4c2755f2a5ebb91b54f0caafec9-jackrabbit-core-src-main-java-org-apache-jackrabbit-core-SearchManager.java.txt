JCR-3162 Index update overhead on cluster slave due to JCR-905

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1214329 13f79535-47bb-0310-9956-ffa450edef68

-     * @param config         the search configuration.
-     * @param nsReg          the namespace registry.
-     * @param ntReg          the node type registry.
-     * @param itemMgr        the shared item state manager.
-     * @param pm             the underlying persistence manager.
-     * @param rootNodeId     the id of the root node.
-     * @param parentMgr      the parent search manager or <code>null</code> if
-     *                       there is no parent search manager.
-     * @param excludedNodeId id of the node that should be excluded from
-     *                       indexing. Any descendant of that node will also be
-     *                       excluded from indexing.
+     * @param workspace          the workspace name
+     * @param repositoryContext  the repository context        
+     * @param qhf                the query handler factory
+     * @param itemMgr            the shared item state manager.
+     * @param pm                 the underlying persistence manager.
+     * @param rootNodeId         the id of the root node.
+     * @param parentMgr          the parent search manager or <code>null</code> if
+     *                           there is no parent search manager.
+     * @param excludedNodeId     id of the node that should be excluded from
+     *                           indexing. Any descendant of that node will also be
+     *                           excluded from indexing.
+            String workspace,
-        this.handler = qhf.getQueryHandler(new QueryHandlerContext(
-                repositoryContext,
-                itemMgr, pm, rootNodeId,
-                parentHandler, excludedNodeId));
+        this.handler = qhf.getQueryHandler(new QueryHandlerContext(workspace,
+                repositoryContext, itemMgr, pm, rootNodeId, parentHandler,
+                excludedNodeId));
-                    // quick'n dirty fix for JCR-905
-                    if (e.isExternal()) {
-                        removedNodes.add(e.getChildId());
-                    }
