JCR-3243: RepositoryStatistics should be more flexible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1299655 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.api.stats.RepositoryStatistics.Type;
-        Iterable<Map.Entry<Type, TimeSeries>>, RepositoryStatistics {
+        Iterable<Map.Entry<String, TimeSeries>>, RepositoryStatistics {
-    private final Map<Type, TimeSeriesRecorder> recorders =
-            new HashMap<Type, TimeSeriesRecorder>();
+    private final Map<String, TimeSeriesRecorder> recorders =
+            new HashMap<String, TimeSeriesRecorder>();
-    private final Map<Type, TimeSeriesAverage> avg =
-            new HashMap<Type, TimeSeriesAverage>();
+    private final Map<String, TimeSeriesAverage> avg =
+            new HashMap<String, TimeSeriesAverage>();
-        avg.put(avgTs, new TimeSeriesAverage(getOrCreateRecorder(duration),
+        avg.put(avgTs.name(), new TimeSeriesAverage(getOrCreateRecorder(duration),
-    public synchronized Iterator<Entry<Type, TimeSeries>> iterator() {
-        Map<Type, TimeSeries> map = new TreeMap<Type, TimeSeries>();
+    public synchronized Iterator<Entry<String, TimeSeries>> iterator() {
+        Map<String, TimeSeries> map = new TreeMap<String, TimeSeries>();
+    public AtomicLong getCounter(String type, boolean resetValueEachSecond) {
+        return getOrCreateRecorder(type, resetValueEachSecond).getCounter();
+    }
+
+        return getTimeSeries(type.name(), type.isResetValueEachSecond());
+    }
+
+    public TimeSeries getTimeSeries(String type, boolean resetValueEachSecond) {
-        } else {
-            return getOrCreateRecorder(type);
+        return getOrCreateRecorder(type, resetValueEachSecond);
+        return getOrCreateRecorder(type.name(), type.isResetValueEachSecond());
+    }
+
+    private synchronized TimeSeriesRecorder getOrCreateRecorder(String type, boolean resetValueEachSecond) {
-            recorder = new TimeSeriesRecorder(type);
+            recorder = new TimeSeriesRecorder(resetValueEachSecond);
-
