work in progress

- replace ItemState.getParentId by ItemState.getParentState

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429288 13f79535-47bb-0310-9956-ffa450edef68

-                    NodeId oldParentId = nodeState.getOverlayedState().getParentId();
-                    NodeId newParentId = nodeState.getParentId();
+                    // TODO: review usage of NodeId
+                    NodeId oldParentId = nodeState.getOverlayedState().getParentState().getNodeId();
+                    NodeId newParentId = nodeState.getParentState().getNodeId();
-            srcState.setParentId(destParent.getNodeId());
+            srcState.setParent(destParent);
-        PropertyState propState = createNew(propertyName, parentState.getNodeId());
+        PropertyState propState = createNew(propertyName, parentState);
-        NodeState nodeState = createNew(newId, nodeTypeName, parentState.getNodeId());
+        NodeState nodeState = createNew(newId, nodeTypeName, parentState);
-            NodeState parent = create(validator.getNodeState(itemState.getParentId()));
+            NodeState parent = create(itemState.getParentState());
-        targetState.setParentId(null);
+        targetState.setParent(null);
-     * @param parentId     parent node's id
+     * @param parent     parent node's id
-    private NodeState createNew(NodeId id, QName nodeTypeName, NodeId parentId)
+    private NodeState createNew(NodeId id, QName nodeTypeName, NodeState parent)
-        return transientStateMgr.createNodeState(id, nodeTypeName, parentId);
+        return transientStateMgr.createNodeState(id, nodeTypeName, parent);
-     * @param parentId   parent node Id
+     * @param parent   parent node state
-    private PropertyState createNew(QName propName, NodeId parentId) {
+    private PropertyState createNew(QName propName, NodeState parent) {
-        return transientStateMgr.createPropertyState(parentId, propName);
+        return transientStateMgr.createPropertyState(parent, propName);
