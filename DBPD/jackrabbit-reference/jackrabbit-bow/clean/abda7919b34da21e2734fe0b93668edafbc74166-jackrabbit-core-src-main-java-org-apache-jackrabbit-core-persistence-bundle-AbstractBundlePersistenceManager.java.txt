JCR-3117 Stats for the PersistenceManager
 - rounding up some leftover stats

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1189728 13f79535-47bb-0310-9956-ffa450edef68

-    /** Duration of read operations. */
-    private AtomicLong readDuration;
-
-    private AtomicLong cacheCounter;
+    private AtomicLong cacheAccessCounter;
+
+    /** Counter of bundle read operations. */
+    private AtomicLong cacheMissCounter;
+
+    /** Duration of bundle read operations. */
+    private AtomicLong cacheMissDuration;
+
+    
+    /** Counter of bundle cache size. */
+    private AtomicLong cacheSizeCounter;
-        cacheCounter = stats.getCounter(
-                RepositoryStatistics.Type.BUNDLE_CACHE_COUNTER);
-        readDuration = stats.getCounter(
-                RepositoryStatistics.Type.BUNDLE_READ_DURATION);
+        cacheAccessCounter = stats.getCounter(
+                RepositoryStatistics.Type.BUNDLE_CACHE_ACCESS_COUNTER);
+        cacheSizeCounter = stats.getCounter(
+                RepositoryStatistics.Type.BUNDLE_CACHE_SIZE_COUNTER);
+        cacheMissCounter = stats.getCounter(
+                RepositoryStatistics.Type.BUNDLE_CACHE_MISS_COUNTER);
+        cacheMissDuration = stats.getCounter(
+                RepositoryStatistics.Type.BUNDLE_CACHE_MISS_DURATION);
+        readCounter.incrementAndGet();
-        readDuration.addAndGet(System.nanoTime() - time);
-        readCounter.incrementAndGet();
-
+        cacheMissDuration.addAndGet(System.nanoTime() - time);
+        cacheMissCounter.incrementAndGet();
-        cacheCounter.addAndGet(accessCount);
+        cacheAccessCounter.addAndGet(accessCount);
+        cacheSizeCounter.set(bundles.getMemoryUsed());
