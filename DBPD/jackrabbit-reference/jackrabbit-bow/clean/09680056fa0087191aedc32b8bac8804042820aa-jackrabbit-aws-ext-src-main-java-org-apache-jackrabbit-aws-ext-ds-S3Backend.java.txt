JCR-3914 Support default aws region

Fix: S3Backend can now derive aws region from ec2 instance. 
However aws region specified in property file takes precedence over derived aws region. 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1710969 13f79535-47bb-0310-9956-ffa450edef68

+import com.amazonaws.regions.Regions;
+import com.amazonaws.util.StringUtils;
-            if (Utils.DEFAULT_AWS_BUCKET_REGION.equals(region)) {
-                s3Region =  Region.US_Standard;
-            } else if (Region.EU_Ireland.toString().equals(region)) {
-                s3Region = Region.EU_Ireland;
+            if (StringUtils.isNullOrEmpty(region)) {
+                com.amazonaws.regions.Region ec2Region = Regions.getCurrentRegion();
+                if (ec2Region != null) {
+                    s3Region = Region.fromValue(ec2Region.getName());
+                } else {
+                    throw new AmazonClientException(
+                        "parameter ["
+                            + S3Constants.S3_REGION
+                            + "] not configured and cannot be derived from environment");
+                }
-                s3Region = Region.fromValue(region);
+                if (Utils.DEFAULT_AWS_BUCKET_REGION.equals(region)) {
+                    s3Region = Region.US_Standard;
+                } else if (Region.EU_Ireland.toString().equals(region)) {
+                    s3Region = Region.EU_Ireland;
+                } else {
+                    s3Region = Region.fromValue(region);
+                }
