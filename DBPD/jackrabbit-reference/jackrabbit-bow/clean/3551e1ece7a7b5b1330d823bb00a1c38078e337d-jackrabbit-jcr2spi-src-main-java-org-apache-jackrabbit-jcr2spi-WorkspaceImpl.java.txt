JCR-1181: Use common base classes in jcr2spi

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@599171 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.operation.WorkspaceImport;
+import org.apache.jackrabbit.commons.AbstractWorkspace;
-import javax.jcr.Workspace;
-import javax.jcr.InvalidSerializedDataException;
-import java.io.InputStream;
-import java.io.IOException;
-public class WorkspaceImpl implements Workspace, ManagerProvider {
+public class WorkspaceImpl extends AbstractWorkspace implements ManagerProvider {
-    /**
-     * @see javax.jcr.Workspace#importXML(String, InputStream, int)
-     */
-    public void importXML(String parentAbsPath, InputStream in, int uuidBehavior)
-        throws IOException, PathNotFoundException, ItemExistsException,
-        ConstraintViolationException, InvalidSerializedDataException,
-        LockException, RepositoryException {
-
-        session.checkSupportedOption(Repository.LEVEL_2_SUPPORTED);
-        session.checkIsAlive();
-
-        Path parentPath = session.getQPath(parentAbsPath);
-        ItemState itemState = getHierarchyManager().getItemState(parentPath);
-        if (itemState.isNode()) {
-            // make sure the given import target is accessible, not locked and checked out.
-            NodeState parentState = (NodeState) itemState;
-            int options = ItemStateValidator.CHECK_ACCESS | ItemStateValidator.CHECK_LOCK | ItemStateValidator.CHECK_VERSIONING;
-            getValidator().checkIsWritable(parentState, options);
-
-            // run the import
-            wspManager.execute(WorkspaceImport.create(parentState, in, uuidBehavior));
-        } else {
-            throw new PathNotFoundException("No node at path " + parentAbsPath);
-        }
-    }
-
