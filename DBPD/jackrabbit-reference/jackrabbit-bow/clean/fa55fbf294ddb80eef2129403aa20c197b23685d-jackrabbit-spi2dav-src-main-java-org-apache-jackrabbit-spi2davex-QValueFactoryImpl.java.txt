JCR-2582 spi2dav: temp files are not clean up after batch submit


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@927406 13f79535-47bb-0310-9956-ffa450edef68

+            } else if (buffer != null) {
+                // this instance is backed by an in-memory buffer
+                buffer = EMPTY_BYTE_ARRAY;
+            }
+        }
+
+        /**
+         * Resets the state of this value. a subsequent call to init() can be
+         * used to load the binary again.
+         *
+         * If this <code>BinaryQValue</code> is backed by a persistent resource
+         * calling this method will have no effect.
+         * @see QValue#discard()
+         */
+        public void reset() {
+            if (!temp) {
+                // do nothing if this instance is not backed by temporarily
+                // allocated resource/buffer
+                return;
+            }
+            if (file != null) {
+                // this instance is backed by a temp file
+                file.delete();
+            initialized = false;
