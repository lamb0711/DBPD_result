JCR-3275: Audit log
- add log on external update

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1329195 13f79535-47bb-0310-9956-ffa450edef68

-        String common = null;
-        try {
-            for (int i = 0; i < events.size(); i++) {
-                EventState state = events.get(i);
-                String s = session.getJCRPath(state.getParentPath());
-                if (common == null) {
-                    common = s;
-                } else if (!common.equals(s)) {
-
-                    // Assign the shorter path to common.
-                    if (s.length() < common.length()) {
-                        String temp = common;
-                        common = s;
-                        s = temp;
-                    }
-
-                    // Find the real common.
-                    while (!s.startsWith(common)) {
-                        int idx = s.lastIndexOf('/');
-                        if (idx < 0) {
-                            break;
-                        }
-                        common = s.substring(0, idx + 1);
-                    }
-                }
-            }
-        } catch (NamespaceException e) {
-            // ignore
-        }
-        return common;
+        return EventState.getCommonPath(events, session);
