JCR-713: ConcurrentModificationException during registration of nodetypes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@497809 13f79535-47bb-0310-9956-ffa450edef68

-
-                new NodeTypeRegistryListener[listeners.size()];
-        Iterator iter = listeners.values().iterator();
-        int cnt = 0;
-        while (iter.hasNext()) {
-            la[cnt++] = (NodeTypeRegistryListener) iter.next();
-        }
+                (NodeTypeRegistryListener[]) listeners.values().toArray(
+                        new NodeTypeRegistryListener[listeners.size()]); 
-                new NodeTypeRegistryListener[listeners.size()];
-        Iterator iter = listeners.values().iterator();
-        int cnt = 0;
-        while (iter.hasNext()) {
-            la[cnt++] = (NodeTypeRegistryListener) iter.next();
-        }
+                (NodeTypeRegistryListener[]) listeners.values().toArray(
+                        new NodeTypeRegistryListener[listeners.size()]);
-                new NodeTypeRegistryListener[listeners.size()];
-        Iterator iter = listeners.values().iterator();
-        int cnt = 0;
-        while (iter.hasNext()) {
-            la[cnt++] = (NodeTypeRegistryListener) iter.next();
-        }
+                (NodeTypeRegistryListener[]) listeners.values().toArray(
+                        new NodeTypeRegistryListener[listeners.size()]);
