JCR-1184: Introduce spellchecker functionality based on content in the workspace

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@587866 13f79535-47bb-0310-9956-ffa450edef68

-        Path relPath = node.getRelativePath();
-        if (relPath.getLength() > 1) {
-            exceptions.add(new InvalidQueryException("Child axis not supported in SQL"));
-            return data;
-        }
-            appendName(relPath.getNameElement().getName(), resolver, propName);
+            Path relPath = node.getRelativePath();
+            if (relPath == null) {
+                propName.append(".");
+            } else if (relPath.getLength() > 1) {
+                exceptions.add(new InvalidQueryException("Child axis not supported in SQL"));
+                return data;
+            } else {
+                appendName(relPath.getNameElement().getName(), resolver, propName);
+            }
-            sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+                sb.append(propName);
+            } else if (node.getOperation() == OPERATION_SIMILAR) {
+                sb.append("SIMILAR(");
+                sb.append(propName);
+                sb.append(", ");
+                appendValue(node, sb);
+                sb.append(")");
+            } else if (node.getOperation() == OPERATION_SPELLCHECK) {
+                sb.append("SPELLCHECK(");
+                appendValue(node, sb);
+                sb.append(")");
