JCR-515: Enhance test data

Use the FilteredRangeIterator class to implement FilteredEventIterator so that getSize() will return a good value and we can run more tests.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1000867 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.ItemManager;
-import org.apache.jackrabbit.spi.commons.conversion.MalformedPathException;
-     * The ItemManager of the session
-     */
-    private final ItemManager itemMgr;
-
-    /**
-     * @param itemMgr    the <code>ItemManager</code> of the <code>session</code>.
-    EventFilter(ItemManager itemMgr,
-                SessionImpl session,
+    EventFilter(SessionImpl session,
-
-        this.itemMgr = itemMgr;
-     * Returns the <code>Session</code> associated with this
-     * <code>EventFilter</code>.
-     *
-     * @return the <code>Session</code> associated with this
-     *         <code>EventFilter</code>.
-     */
-    SessionImpl getSession() {
-        return session;
-    }
-
-    /**
-     * TODO: remove this unused method.
-     * Returns the <code>ItemManager</code> associated with this
-     * <code>EventFilter</code>.
-     *
-     * @return the <code>ItemManager</code> associated with this
-     *         <code>EventFilter</code>.
-     */
-    ItemManager getItemManager() {
-        return itemMgr;
-    }
-
-    /**
-        try {
-            Path eventPath = eventState.getParentPath();
-            boolean match = eventPath.equals(path);
-            if (!match && isDeep) {
-                match = eventPath.isDescendantOf(path);
-            }
-
-            return !match;
-        } catch (MalformedPathException mpe) {
-            // should never get here...
-            throw new RepositoryException("internal error: failed to check path filter", mpe);
+        Path eventPath = eventState.getParentPath();
+        boolean match = eventPath.equals(path);
+        if (!match && isDeep) {
+            match = eventPath.isDescendantOf(path);
+
+        return !match;
-            super(null, null, 0, null, true, null, null, true);
+            super(null, 0, null, true, null, null, true);
