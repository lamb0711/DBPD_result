JCR-1644: make NamespaceContext#getPrefix(java.lang.String) iterative instead of recursive

Applied patch by Fabrizio Giustina.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@680135 13f79535-47bb-0310-9956-ffa450edef68

-        String uri = (String) prefixToURI.get(prefix);
-        if (uri != null) {
-            return uri;
-        } else if (parent != null) {
-            return parent.getURI(prefix);
-        } else {
-            throw new NamespaceException("Unknown prefix: " + prefix);
+        NamespaceContext current = this;
+        while (current != null) {
+            String uri = (String) current.prefixToURI.get(prefix);
+            if (uri != null) {
+                return uri;
+            }
+            current = current.parent;
+        throw new NamespaceException("Unknown prefix: " + prefix);
-        String prefix = (String) uriToPrefix.get(uri);
-        if (prefix != null) {
-            return prefix;
-        } else if (parent != null) {
-            return parent.getPrefix(uri);
-        } else {
-            throw new NamespaceException("Unknown URI: " + uri);
+        NamespaceContext current = this;
+        while (current != null) {
+            String prefix = (String) current.uriToPrefix.get(uri);
+            if (prefix != null) {
+                return prefix;
+            }
+            current = current.parent;
+        throw new NamespaceException("Unknown URI: " + uri);
