JCR-2569: Implement jcr-jackrabbit://... repository URIs

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@923660 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
-                return getOrCreateRepository(null, null, parameters);
-            } else if (parameters.containsKey(REPOSITORY_CONF)
-                    && parameters.containsKey(REPOSITORY_HOME)) {
-                String conf = parameters.get(REPOSITORY_CONF).toString();
+                return getOrCreateRepository(null, Collections.emptyMap());
+            } else if (parameters.containsKey(REPOSITORY_HOME)) {
-                return getOrCreateRepository(conf, home, parameters);
+                return getOrCreateRepository(home, parameters);
-                    if ("file".equalsIgnoreCase(uri.getScheme())) {
-                        File file = new File(uri);
-                        String home, conf;
+                    String scheme = uri.getScheme();
+                    if (("file".equalsIgnoreCase(scheme)
+                            || "jcr-jackrabbit".equalsIgnoreCase(scheme))
+                            && uri.getAuthority() == null) {
+                        File file = new File(uri.getPath());
-                            home = file.getParentFile().getPath();
-                            conf = file.getPath();
+                            return null; // Not a (possibly missing) directory
-                            home = file.getPath();
-                            conf = new File(file, "repository.xml").getPath();
+                            return getOrCreateRepository(
+                                    file.getPath(), parameters);
-                        return getOrCreateRepository(conf, home, parameters);
-                        return null; // not a file: URI
+                        return null; // not a file: or jcr-jackrabbit: URI
-     * @param conf path to the repository configuration file.
-            String conf, String home, Map<?, ?> parameters)
-            throws RepositoryException {
+            String home, Map<?, ?> parameters) throws RepositoryException {
-                    RepositoryConfigurationParser.REPOSITORY_CONF_VARIABLE,
-                    conf);
-            properties.put(
