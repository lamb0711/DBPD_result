JCR-890: concurrent read-only access to a session

Simplify things by making SessionContext implement NamePathResolver

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@983900 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Workspace;
-                statement, language, sessionContext.getSessionImpl(), factory);
+                statement, language, sessionContext, factory);
-        QueryObjectModelFactory qomFactory = session.getWorkspace().getQueryManager().getQOMFactory();
+        QueryObjectModelFactory qomFactory =
+            session.getWorkspace().getQueryManager().getQOMFactory();
-            String pn = session.getJCRName(name);
+            String pn = sessionContext.getJCRName(name);
-                    session.getJCRName(DEFAULT_SELECTOR_NAME), pn, pn);
+                    sessionContext.getJCRName(DEFAULT_SELECTOR_NAME), pn, pn);
-        SessionImpl session = sessionContext.getSessionImpl();
+        Workspace workspace = sessionContext.getSessionImpl().getWorkspace();
-            session.getWorkspace().getQueryManager().getQOMFactory();
-        String name = session.getJCRName(propertyName);
+            workspace.getQueryManager().getQOMFactory();
+        String name = sessionContext.getJCRName(propertyName);
-                session.getJCRName(DEFAULT_SELECTOR_NAME), name, name);
+                sessionContext.getJCRName(DEFAULT_SELECTOR_NAME), name, name);
