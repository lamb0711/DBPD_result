JCR-4246 java.security.acl deprecated in Java 10, marked for removal in Java 11



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1827242 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
+import org.apache.jackrabbit.api.security.principal.GroupPrincipal;
+    public ServerGroup(final Principal principal, final RemoteAdapterFactory factory)
+            throws RemoteException {
+        super(principal, factory);
+    }
+
-        return isMember(member, (Group) getPrincipal());
+        return isMember(member, getPrincipal());
-            final Enumeration<? extends Principal> base = ((Group) getPrincipal()).members();
+            final Enumeration<? extends Principal> base =  members(getPrincipal());
-    private static boolean isMember(final String memberName, final Group group) {
-        Enumeration<? extends Principal> pe = group.members();
+    private static boolean isMember(final String memberName, final Principal group) {
+        Enumeration<? extends Principal> pe = members(group);
-            if ((p instanceof Group) && isMember(memberName, (Group) p)) {
+            if (isGroup(p) && isMember(memberName, p)) {
-
+
+    public static boolean isGroup(Principal principal) {
+        return principal instanceof Group || principal instanceof GroupPrincipal;
+    }
+
+    private static Enumeration<? extends Principal> members(Principal principal) {
+        if (principal instanceof Group) {
+            return ((Group) principal).members();
+        }
+        if (principal instanceof GroupPrincipal) {
+            return ((GroupPrincipal) principal).members();
+        }
+        return Collections.emptyEnumeration();
+    }
