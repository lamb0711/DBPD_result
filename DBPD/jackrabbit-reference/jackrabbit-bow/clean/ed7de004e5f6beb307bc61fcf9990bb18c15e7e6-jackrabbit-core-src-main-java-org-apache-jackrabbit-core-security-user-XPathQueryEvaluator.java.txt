JCR-2800: Implement search facility for users and groups
improved conditions, added like condition
work in progress

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1033998 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.api.security.user.QueryBuilder.RelationOp;
+import org.apache.jackrabbit.core.security.user.XPathQueryBuilder.RelationOp;
-                Condition boundCondition = builder.property(sortCol, sortDir.getCollation(), bound);
+                Condition boundCondition = builder.property(sortCol, getCollation(sortDir), bound);
+        else if (relOp == RelationOp.LIKE) {
+            xPath.append("jcr:like(")
+                 .append(condition.getRelPath())
+                 .append(",'")
+                 .append(condition.getPattern())
+                 .append("')");
+        }
+    private static RelationOp getCollation(Direction direction) throws RepositoryException {
+        switch (direction) {
+            case ASCENDING:
+                return RelationOp.GT;
+
+            case DESCENDING:
+                return RelationOp.LT;
+
+            default:
+                throw new RepositoryException("Unknown sort order " + direction);
+        }
+    }
+
