- fixing VersionHistory.removeVersion()

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@157348 13f79535-47bb-0310-9956-ffa450edef68

-
-        // check if any references exist on this version
-        VersionImpl v = (VersionImpl) getVersion(versionName);
-        PropertyIterator iter = v.getReferences();
-        if (iter.hasNext()) {
-            throw new VersionException("Unable to remove version. At least once referenced: " + ((PropertyImpl) iter.nextProperty()).safeGetJCRPath());
+        try {
+            QName name = QName.fromJCRName(versionName, session.getNamespaceResolver());
+            history.removeVersion(name);
+        } catch (IllegalNameException e) {
+            throw new RepositoryException(e);
+        } catch (UnknownPrefixException e) {
+            throw new RepositoryException(e);
-        history.removeVersion(v.getQName());
