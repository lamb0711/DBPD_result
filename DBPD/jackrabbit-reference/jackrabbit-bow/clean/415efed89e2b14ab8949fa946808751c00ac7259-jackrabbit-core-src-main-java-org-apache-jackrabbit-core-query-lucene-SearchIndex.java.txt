JCR-3858 NodeIterator.getSize(): compatibility with Jackrabbit 2.5

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1667317 13f79535-47bb-0310-9956-ffa450edef68

+    
+    /**
+     * If enabled, NodeIterator.getSize() may report a larger value than the
+     * actual result. This value may shrink when the query result encounters
+     * non-existing nodes or the session does not have access to a node. This
+     * might be a security problem.
+     */
+    private boolean sizeEstimate = false;
+    
+    /**
+     * If enabled, NodeIterator.getSize() may report a larger value than the
+     * actual result. This value may shrink when the query result encounters
+     * non-existing nodes or the session does not have access to a node. This
+     * might be a security problem.
+     * 
+     * @param b <code>true</code> to enable
+     */
+    public void setSizeEstimate(boolean b) {
+        if (b) {
+            log.info("Size estimation is enabled");
+        }
+        this.sizeEstimate = b;
+    }
+    
+    /**
+     * Get the size estimate setting.
+     * 
+     * @return the setting
+     */
+    public boolean getSizeEstimate() {
+        return sizeEstimate;
+    }
