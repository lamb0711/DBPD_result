JCR-193, JCR-216, JCR-203, JCR 184 + various minor fixes

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@293331 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Item;
+import javax.jcr.PathNotFoundException;
-                DavSession session = resource.getSession();
-                session.getRepositorySession().getItem(getResourcePath()).save();
+                getItem(resource).save();
-                DavSession session = resource.getSession();
-                session.getRepositorySession().getItem(getResourcePath()).refresh(false);
+                getItem(resource).refresh(false);
+        private Item getItem(TransactionResource resource) throws PathNotFoundException, RepositoryException {
+            DavSession session = resource.getSession();
+            String itemPath = resource.getLocator().getJcrPath();
+            return session.getRepositorySession().getItem(itemPath);
+        }
+
