JCR-4240: IndexingQueueTest relies on Tika behavior that is changed in Tika 1.17

Changed test to use an actual payload (and parse that), adding tika config to detect the custom type. (Thanks to tallison@apache.org for the proposed fix!)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1819849 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import javax.xml.parsers.DocumentBuilderFactory;
+import javax.xml.parsers.ParserConfigurationException;
+
+import org.w3c.dom.Document;
+import org.xml.sax.InputSource;
-        XHTMLContentHandler xhtml = new XHTMLContentHandler(handler, metadata);
-        xhtml.startDocument();
-        xhtml.element("p", "The quick brown fox jumped over the lazy dog.");
-        xhtml.endDocument();
+        try {
+            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
+            Document doc = dbf.newDocumentBuilder().parse(new InputSource(stream));
+            String contents = doc.getDocumentElement().getTextContent();
+            XHTMLContentHandler xhtml = new XHTMLContentHandler(handler, metadata);
+            xhtml.startDocument();
+            xhtml.element("p", contents);
+            xhtml.endDocument();
+        } catch (ParserConfigurationException ex) {
+            throw new SAXException(ex);
+        } catch (IOException ex) {
+            throw new SAXException(ex);
+        }
