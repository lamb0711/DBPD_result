JSR-328: Removed the TransientRepository(RepositoryConfig) constructor to avoid problems with reusing the config instance.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@382213 13f79535-47bb-0310-9956-ffa450edef68

-     * configuration to initialize the underlying repository instances.
-     * 
-     * @param config repository configuration
-     * @throws IOException if the static repository descriptors cannot be loaded
-     */
-    public TransientRepository(final RepositoryConfig config)
-            throws IOException {
-        this(new RepositoryFactory() {
-            public RepositoryImpl getRepository() throws RepositoryException {
-                return RepositoryImpl.create(config);
-            }
-        });
-    }
-
-    /**
-     * Creates a transient repository proxy that will use the given repository
-     * repository instances.
+     * repository instances. The repository configuration file will be reloaded
+     * whenever 
-     * @throws ConfigurationException if the configuration file is invalid
-    public TransientRepository(String config, String home)
+    public TransientRepository(final String config, final String home)
-        this(RepositoryConfig.create(config, home));
+        this(new RepositoryFactory() {
+            public RepositoryImpl getRepository() throws RepositoryException {
+                try {
+                    RepositoryConfig rc = RepositoryConfig.create(config, home);
+                    return RepositoryImpl.create(rc);
+                } catch (ConfigurationException e) {
+                    throw new RepositoryException(
+                            "Invalid repository configuration: " + config, e);
+                }
+            }
+        });
