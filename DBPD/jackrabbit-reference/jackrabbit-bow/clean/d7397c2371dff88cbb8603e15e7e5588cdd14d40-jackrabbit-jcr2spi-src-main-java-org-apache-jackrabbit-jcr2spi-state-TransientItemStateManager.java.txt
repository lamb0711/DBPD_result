JCR-1819 : Add specific deep loading of Nodes and Properties
JCR-1843 : wrong status change upon conflicting removal (CacheBehaviour.OBSERVATION)
JCR-1293 : ReorderReferenceableSNSTest failure
JCR-1811 : ExportSysViewTest#testExportSysView_handler_session_saveBinary_occasionally failing


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@709211 13f79535-47bb-0310-9956-ffa450edef68

-   /**
+    /**
-       HierarchyEntry pHe = parent.getHierarchyEntry();
-       // short cuts first
-       if (he == pHe || he.getParent() == pHe) {
-           return true;
-       }
-       if (!parent.isNode() || he == pHe.getParent()) {
-           return false;
-       }
-       // none of the simple cases: walk up hierarchy
-       HierarchyEntry pe = he.getParent();
-       while (pe != null) {
-           if (pe == pHe) {
-               return true;
-           }
-           pe = pe.getParent();
-       }
+        HierarchyEntry pHe = parent.getHierarchyEntry();
+        // short cuts first
+        if (he == pHe || he.getParent() == pHe) {
+            return true;
+        }
+        if (!parent.isNode() || he == pHe.getParent()) {
+            return false;
+        }
+        // none of the simple cases: walk up hierarchy
+        HierarchyEntry pe = he.getParent();
+        while (pe != null) {
+            if (pe == pHe) {
+                return true;
+            }
+            pe = pe.getParent();
+        }
-       // state isn't descendant of 'parent'
-       return false;
-   }
+        // state isn't descendant of 'parent'
+        return false;
+    }
+                // in any case: stop listening to status changes
+                state.removeListener(this);
-                state is stale due to external modification -> move it to
-                the collection of stale item states.
-                validation omitted for only 'existing_modified' states can
-                become stale see {@link Status#isValidStatusChange(int, int)}
+                 state is stale due to external modification -> move it to
+                 the collection of stale item states.
+                 validation omitted for only 'existing_modified' states can
+                 become stale see {@link Status#isValidStatusChange(int, int)}
