- add commons-codec dependency to client project.xml
- add concurrent dependency to jcr2spi project.xml
- remove events again from operation methods on RepositoryService.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@472888 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.EventFilter;
+import org.apache.jackrabbit.name.NamespaceResolver;
-import javax.jcr.RepositoryException;
+     * The namespace resolver of the session that created this event iterator.
+     */
+    private final NamespaceResolver nsResolver;
+
+    /**
-     * @param events the {@link org.apache.jackrabbit.spi.Event}s as a bundle.
-     * @param filter only event that pass the filter will be dispatched to the
-     *               event listener.
+     * @param events     the {@link org.apache.jackrabbit.spi.Event}s as a
+     *                   bundle.
+     * @param filter     only event that pass the filter will be dispatched to
+     *                   the event listener.
+     * @param nsResolver the namespace resolver of the session that created this
+     *                   <code>FilteredEventIterator</code>.
-                                 EventFilter filter) {
-        actualEvents = events.getEvents();
+                                 EventFilter filter,
+                                 NamespaceResolver nsResolver) {
+        this.actualEvents = events.getEvents();
+        this.nsResolver = nsResolver;
-            try {
-                next = filter.blocks(event, isLocal) ? null : new EventImpl(filter.getNamespaceResolver(), event);
-            } catch (RepositoryException e) {
-                log.error("Exception while applying filter.", e);
-            }
+            next = filter.accept(event, isLocal) ? new EventImpl(nsResolver, event) : null;
