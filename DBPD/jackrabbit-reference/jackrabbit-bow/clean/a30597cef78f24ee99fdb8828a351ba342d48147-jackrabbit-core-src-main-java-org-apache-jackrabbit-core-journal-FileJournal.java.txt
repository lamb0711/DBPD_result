JCR-884 - DatabaseJournal assigns same revision id to different revisions


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@533019 13f79535-47bb-0310-9956-ffa450edef68

-    protected long append(String producerId, InputStream in, int length)
+    protected void append(AppendRecord record, InputStream in, int length)
-            long revision = recordLog.append(getId(), producerId, in, length);
+            long revision = recordLog.append(getId(),
+                    record.getProducerId(), in, length);
-            return revision;
+            record.setRevision(revision);
