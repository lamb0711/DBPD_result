Patch for issues JCR-1381 and JCR-1385 : refresh path and uuid field. 
Path has to be refreshed in the case of the SNS is used.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@636118 13f79535-47bb-0310-9956-ffa450edef68

+	public Object refreshUuidPath(Session session, ClassDescriptor classDescriptor, Node node, Object object)
+	{
+		Object initializedBean = object;
+		try {
+			if (initializedBean == null)
+			{
+				return null;
+			}
+			
+			FieldDescriptor pathField = classDescriptor.getPathFieldDescriptor();
+			if (pathField != null)
+			{
+			    ReflectionUtils.setNestedProperty(initializedBean, pathField.getFieldName(), node.getPath());
+			}
+			
+			FieldDescriptor uuidField = classDescriptor.getUuidFieldDescriptor();
+			if (uuidField != null)
+			{
+				ReflectionUtils.setNestedProperty(initializedBean, uuidField.getFieldName(), node.getUUID());
+			}
+			
+		} catch (ValueFormatException vfe) {
+			throw new ObjectContentManagerException(
+					"Cannot retrieve properties of object " + object + " from node " + node, vfe);
+		} catch (RepositoryException re) {
+			throw new org.apache.jackrabbit.ocm.exception.RepositoryException( "Cannot retrieve properties of object " + object
+							+ " from node " + node, re);
+		}
+
+		return initializedBean;
+	}
