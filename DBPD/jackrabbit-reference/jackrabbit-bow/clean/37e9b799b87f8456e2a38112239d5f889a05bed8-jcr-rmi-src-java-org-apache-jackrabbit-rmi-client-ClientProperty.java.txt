JCR-420: Avoid NullPointerExceptions when removing property values using calls like Property.setValue(null).

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@399638 13f79535-47bb-0310-9956-ffa450edef68

-        setValue(getSession().getValueFactory().createValue(value));
+        if (value == null) {
+            setValue((Value) null);
+        } else {
+            setValue(getSession().getValueFactory().createValue(value));
+        }
-        setValue(getSession().getValueFactory().createValue(value));
+        if (value == null) {
+            setValue((Value) null);
+        } else {
+            setValue(getSession().getValueFactory().createValue(value));
+        }
-        setValue(getSession().getValueFactory().createValue(value));
+        if (value == null) {
+            setValue((Value) null);
+        } else {
+            setValue(getSession().getValueFactory().createValue(value));
+        }
-        setValue(getSession().getValueFactory().createValue(value));
+        if (value == null) {
+            setValue((Value) null);
+        } else {
+            setValue(getSession().getValueFactory().createValue(value));
+        }
-        Value[] values = new Value[strings.length];
-        for (int i = 0; i < strings.length; i++) {
-            values[i] = getSession().getValueFactory().createValue(strings[i]);
+        if (strings == null) {
+            setValue((Value[]) null);
+        } else {
+            Value[] values = new Value[strings.length];
+            for (int i = 0; i < strings.length; i++) {
+                values[i] = getSession().getValueFactory().createValue(strings[i]);
+            }
+            setValue(values);
-        setValue(values);
-            remote.setValue(SerialValueFactory.makeSerialValue(value));
+            if (value == null) {
+                remote.setValue((Value) null);
+            } else {
+                remote.setValue(SerialValueFactory.makeSerialValue(value));
+            }
-            remote.setValue(SerialValueFactory.makeSerialValueArray(values));
+            if (values == null) {
+                remote.setValue((Value[]) null);
+            } else {
+                remote.setValue(SerialValueFactory.makeSerialValueArray(values));
+            }
