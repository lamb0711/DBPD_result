JCR-2105: JSR 283 NodeType Management (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@772992 13f79535-47bb-0310-9956-ffa450edef68

+     * Indicates whether this is an abstract node type definition.
+     */
+    private final boolean isAbstract;
+
+    /**
+     * Indicates whether this is a queryable node type definition.
+     */
+    private final boolean isQueryable;
+
+    /**
-        this(nt.getName(), nt.getSupertypes(), nt.isMixin(),
+        this(nt.getName(), nt.getSupertypes(), nt.getSupportedMixinTypes(),
+                nt.isMixin(), nt.isAbstract(), nt.isQueryable(),
-        this.name = name;
-        this.supertypes = supertypes;
-        this.supportedMixins = null;
-        this.isMixin = isMixin;
-        this.hasOrderableChildNodes = hasOrderableChildNodes;
-        this.primaryItemName = primaryItemName;
-        this.propertyDefs = getSerializablePropertyDefs(declaredPropDefs);
-        this.childNodeDefs = getSerializableNodeDefs(declaredNodeDefs);
+        this(name, supertypes, null, isMixin, false, false,
+                hasOrderableChildNodes, primaryItemName,
+                getSerializablePropertyDefs(declaredPropDefs),
+                getSerializableNodeDefs(declaredNodeDefs));
-     * Creates a new serializable qualified node type definition.
+     * Creates a new serializable qualified node type definition. Same as
+     * {@link #QNodeTypeDefinitionImpl(Name, Name[], Name[], boolean, boolean, boolean, boolean, Name, QPropertyDefinition[], QNodeDefinition[])}
+     * but using <code>false</code> for both {@link #isAbstract()} and {@link #isQueryable)}.
+     *
+        this(name, supertypes, supportedMixins, isMixin, false, false,
+                hasOrderableChildNodes, primaryItemName,
+                getSerializablePropertyDefs(declaredPropDefs),
+                getSerializableNodeDefs(declaredNodeDefs));
+    }
+
+    /**
+     * Creates a new serializable qualified node type definition.
+     *
+     * @param name                   the name of the node type
+     * @param supertypes             the names of the supertypes
+     * @param supportedMixins        the names of supported mixins (or <code>null</code>)
+     * @param isMixin                if this is a mixin node type
+     * @param isAbstract             if this is an abstract node type definition.
+     * @param isQueryable            if this is a queryable node type definition.
+     * @param hasOrderableChildNodes if this node type has orderable child
+     *                               nodes.
+     * @param primaryItemName        the name of the primary item, or
+     *                               <code>null</code>.
+     * @param declaredPropDefs       the declared property definitions.
+     * @param declaredNodeDefs       the declared child node definitions.
+     */
+    public QNodeTypeDefinitionImpl(Name name,
+                                   Name[] supertypes,
+                                   Name[] supportedMixins,
+                                   boolean isMixin,
+                                   boolean isAbstract,
+                                   boolean isQueryable,
+                                   boolean hasOrderableChildNodes,
+                                   Name primaryItemName,
+                                   QPropertyDefinition[] declaredPropDefs,
+                                   QNodeDefinition[] declaredNodeDefs) {
+        this.isAbstract = isAbstract;
+        this.isQueryable = isQueryable;
+    public boolean isAbstract() {
+        return isAbstract;
+    }
+
+    /**
+     * {@inheritDoc}
+     */
+    public boolean isQueryable() {
+        return isQueryable;
+    }
+
+    /**
+     * {@inheritDoc}
+     */
