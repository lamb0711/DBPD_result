fixing another concurrency issue that could lead to inconsistent repository content

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@264785 13f79535-47bb-0310-9956-ffa450edef68

-     * Determines whether this item state has become stale.
-     * @return true if this item state has become stale, false otherwise.
-     */
-    boolean isStale() {
-        return overlayedState != null && modCount != overlayedState.getModCount();
-    }
-
-    /**
+     * Determines whether this item state has become stale.
+     * @return true if this item state has become stale, false otherwise.
+     */
+    public boolean isStale() {
+        if (isTransient) {
+            return status == STATUS_STALE_MODIFIED
+                    || status == STATUS_STALE_DESTROYED;
+        } else {
+            return overlayedState != null
+                    && modCount != overlayedState.getModCount();
+        }
+    }
+
+    /**
