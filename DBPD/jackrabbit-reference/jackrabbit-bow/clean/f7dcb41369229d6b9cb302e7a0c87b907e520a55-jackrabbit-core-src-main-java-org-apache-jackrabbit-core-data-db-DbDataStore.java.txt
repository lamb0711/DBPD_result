JCR-1366 DbDataStore: new setting schemaObjectPrefix (compatible with bundle PM)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@727376 13f79535-47bb-0310-9956-ffa450edef68

- *     &lt;param name="{@link #setTablePrefix(int) tablePrefix}" value=""/>
+ *     &lt;param name="{@link #setTablePrefix(String) tablePrefix}" value=""/>
+ *     &lt;param name="{@link #setSchemaObjectPrefix(String) schemaObjectPrefix}" value=""/>
+     * The prefix of the table names. By default it is empty.
+     */
+    protected String schemaObjectPrefix = "";
+
+    /**
-
+    
-            ResultSet rs = meta.getTables(null, null, tableSQL, null);
+            ResultSet rs = meta.getTables(null, null, schemaObjectPrefix + tableSQL, null);
-                    " tableSQL=" + tableSQL + " createTableSQL=" + createTableSQL, e);
+                    " schemaObjectPrefix=" + schemaObjectPrefix + " tableSQL=" + tableSQL + " createTableSQL=" + createTableSQL, e);
-     * ${tablePrefix}: the prefix as set in the configuration (empty by default).
+     * ${tablePrefix}: tablePrefix plus schemaObjectPrefix as set in the configuration 
-        sql = Text.replace(sql, "${tablePrefix}", tablePrefix).trim();
+        sql = Text.replace(sql, "${tablePrefix}", tablePrefix + schemaObjectPrefix).trim();
-     * Get the table prefix. The default is empty.
+     * Get the table prefix. 
-     * Set the new table prefix.
+     * Set the new table prefix. The default is empty.
+     * The table name is constructed like this:
+     * ${tablePrefix}${schemaObjectPrefix}${tableName}
+    
+    /**
+     * Get the schema prefix.
+     * 
+     * @return the schema object prefix
+     */
+    public String getSchemaObjectPrefix() {
+        return schemaObjectPrefix;
+    }
+
+    /**
+     * Set the schema object prefix. The default is empty.
+     * The table name is constructed like this:
+     * ${tablePrefix}${schemaObjectPrefix}${tableName}
+     * 
+     * @param schemaObjectPrefix the new prefix
+     */
+    public void setSchemaObjectPrefix(String schemaObjectPrefix) {
+        this.schemaObjectPrefix = schemaObjectPrefix;
+    }    
