JCR-890: concurrent read-only access to a session

Move SessionItemStateManager and HierarchyManager into SessionContext.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957133 13f79535-47bb-0310-9956-ffa450edef68

-     * @throws AccessDeniedException is never thrown
-     * @throws RepositoryException   is never thrown
-    protected AccessManager createAccessManager(Subject subject,
-                                                HierarchyManager hierMgr)
-            throws AccessDeniedException, RepositoryException {
-        /**
-         * use own AccessManager implementation rather than relying on
-         * configurable AccessManager to handle SystemPrincipal privileges
-         * correctly
-         */
+    @Override
+    protected AccessManager createAccessManager(Subject subject) {
+        // use own AccessManager implementation rather than relying on
+        // configurable AccessManager to handle SystemPrincipal privileges
+        // correctly
-            if (hierMgr.resolveNodePath(p) == null) {
+            if (context.getHierarchyManager().resolveNodePath(p) == null) {
