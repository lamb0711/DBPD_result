JCR-247: Child axis support for XPath predicates

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@477599 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.Path;
-        buffer.append(" Prop=").append(node.getPropertyName());
+        buffer.append(" Path=");
+        Path relPath = node.getRelativePath();
+        if (relPath == null) {
+            buffer.append(".");
+        } else {
+            Path.PathElement[] elements = relPath.getElements();
+            String slash = "";
+            for (int i = 0; i < elements.length; i++) {
+                buffer.append(slash);
+                slash = "/";
+                if (node.getReferencesProperty() && i == elements.length - 1) {
+                    buffer.append("@");
+                }
+                buffer.append(elements[i]);
+            }
+        }
-        buffer.append(" Prop=" + node.getProperty());
+        buffer.append(" Prop=");
+        Path relPath = node.getRelativePath();
+        if (relPath == null) {
+            buffer.append(relPath);
+        } else {
+            Path.PathElement[] elements = relPath.getElements();
+            String slash = "";
+            for (int i = 0; i < elements.length; i++) {
+                buffer.append(slash);
+                slash = "/";
+                if (i == elements.length - 1) {
+                    buffer.append("@");
+                }
+                buffer.append(elements[i]);
+            }
+        }
