JCR-1104 - JSR 283 support
- shareble nodes (work in progress)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@638398 13f79535-47bb-0310-9956-ffa450edef68

-            NodeState parentState;
-                parentState = (NodeState) getItemState(parentId);
+                return getName(nodeId, parentId);
-
-            NodeState.ChildNodeEntry entry =
-                    getChildNodeEntry(parentState, nodeId);
-            if (entry == null) {
-                String msg = "failed to resolve name of " + nodeId;
-                log.debug(msg);
-                throw new RepositoryException(msg);
-            }
-            return entry.getName();
+    public Name getName(NodeId id, NodeId parentId)
+            throws ItemNotFoundException, RepositoryException {
+
+        NodeState parentState;
+        
+        try {
+            parentState = (NodeState) getItemState(parentId);
+        } catch (NoSuchItemStateException nsis) {
+            String msg = "failed to resolve name of " + id;
+            log.debug(msg);
+            throw new ItemNotFoundException(id.toString());
+        } catch (ItemStateException ise) {
+            String msg = "failed to resolve name of " + id;
+            log.debug(msg);
+            throw new RepositoryException(msg, ise);
+        }
+
+        NodeState.ChildNodeEntry entry =
+                getChildNodeEntry(parentState, id);
+        if (entry == null) {
+            String msg = "failed to resolve name of " + id;
+            log.debug(msg);
+            throw new RepositoryException(msg);
+        }
+        return entry.getName();
+    }
+    
+    /**
+     * {@inheritDoc}
+     */
