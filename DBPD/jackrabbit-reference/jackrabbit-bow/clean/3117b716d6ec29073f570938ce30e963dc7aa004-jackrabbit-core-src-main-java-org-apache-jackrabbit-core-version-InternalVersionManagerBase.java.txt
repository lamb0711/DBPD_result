JCR-3105 - fix potential NPE on concurrent versioning operations

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1181712 13f79535-47bb-0310-9956-ffa450edef68

-            if (n.hasNode(name)) {
-                n = n.getNode(name, 1);
+            NodeStateEx childn = n.getNode(name, 1);
+            if (childn != null) {
+                n = childn;
-                n.addNode(name, interNT, null, false);
+                childn = n.addNode(name, interNT, null, false);
-                n = n.getNode(name, 1);
+                n = childn;
