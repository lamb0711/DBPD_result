JCR-2887 - Split PrivilegeRegistry in a per-session manager instance and a repository level registry  (WIP)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1181645 13f79535-47bb-0310-9956-ffa450edef68

-     * @see CompiledPermissions#hasPrivileges(org.apache.jackrabbit.spi.Path,javax.jcr.security.Privilege...)
+     * @see CompiledPermissions#hasPrivileges(org.apache.jackrabbit.spi.Path, javax.jcr.security.Privilege[])
-            this.allowPrivileges = allowPrivileges;
-            this.denyPrivileges = denyPrivileges;
+            // make sure privilegebits are unmodifiable -> proper hashcode generation
+            this.allowPrivileges = allowPrivileges.unmodifiable();
+            this.denyPrivileges = denyPrivileges.unmodifiable();
