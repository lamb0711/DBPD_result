porting to v0.16.4 of the jsr170 specification

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@161260 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.ChildNodeDef;
+import org.apache.jackrabbit.core.nodetype.NodeDef;
-        while (walker.iterateElements(Constants.PROPERTYDEF_ELEMENT)) {
+        while (walker.iterateElements(Constants.PROPERTYDEFINITION_ELEMENT)) {
-        while (walker.iterateElements(Constants.CHILDNODEDEF_ELEMENT)) {
-            ChildNodeDef def = getChildNodeDef();
+        while (walker.iterateElements(Constants.CHILDNODEDEFINITION_ELEMENT)) {
+            NodeDef def = getChildNodeDef();
-        type.setChildNodeDefs((ChildNodeDef[])
-                nodes.toArray(new ChildNodeDef[nodes.size()]));
+        type.setChildNodeDefs((NodeDef[])
+                nodes.toArray(new NodeDef[nodes.size()]));
-        def.setAutoCreate(Boolean.valueOf(
-                walker.getAttribute(Constants.AUTOCREATE_ATTRIBUTE))
+        def.setAutoCreated(Boolean.valueOf(
+                walker.getAttribute(Constants.AUTOCREATED_ATTRIBUTE))
-    private ChildNodeDef getChildNodeDef()
+    private NodeDef getChildNodeDef()
-        ChildNodeDef def = new ChildNodeDef();
+        NodeDef def = new NodeDef();
-        def.setAutoCreate(Boolean.valueOf(
-                walker.getAttribute(Constants.AUTOCREATE_ATTRIBUTE))
+        def.setAutoCreated(Boolean.valueOf(
+                walker.getAttribute(Constants.AUTOCREATED_ATTRIBUTE))
-        def.setAllowSameNameSibs(Boolean.valueOf(
-                walker.getAttribute(Constants.SAMENAMESIBS_ATTRIBUTE))
+        def.setOnParentVersion(OnParentVersionAction.valueFromName(
+                walker.getAttribute(Constants.ONPARENTVERSION_ATTRIBUTE)));
+        def.setAllowsSameNameSiblings(Boolean.valueOf(
+                walker.getAttribute(Constants.SAMENAMESIBLINGS_ATTRIBUTE))
