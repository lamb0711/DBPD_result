JCR-2519: spi2davex: use srcWorkspaceName to build srcPath for clone and copy
JCR-2104: JSR 283 Full Versioning 
- jcr2spi: simplify VersionManager.checkpoint if Node is already checkedin
- spi2dav: implement shallow merge
- spi2dav: fix bug in merge (besteffort <-> DAV:no-auto-merge)
- spi2dav: fix bug in restore (nodeId may point to non-existing node -> extract existing parent + relPath
- jcr-server: implement shallow merge
- jcr-server: fix merge. for 1:1 remoting the MERGE response body should list the failed ids instead of the affected resource [DeltaV specified behaviour that doesn't make sense for remoting over SPI]
- jcr-server: prefer VersionManager over deprecated version methods
- jcr-server: fix restore with relPath



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@916278 13f79535-47bb-0310-9956-ffa450edef68

-        NodeEntry newVersion = session.getVersionStateManager().checkpoint(getNodeState());
-        return (Version) getItemManager().getItem(newVersion);
+        if (!isCheckedOut()) {
+            checkout();
+            return getBaseVersion();
+        } else {
+            NodeEntry newVersion = session.getVersionStateManager().checkpoint(getNodeState());
+            return (Version) getItemManager().getItem(newVersion);
+        }
