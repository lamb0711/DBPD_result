JCR-1438: Replace Config classes with factories

Replaced DataStoreConfig with DataStoreFactory

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@698161 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.data.DataStore;
+import org.apache.jackrabbit.core.data.DataStoreFactory;
-public class RepositoryConfig implements FileSystemFactory {
+public class RepositoryConfig implements FileSystemFactory, DataStoreFactory {
-     * Optional data store configuration
+     * The optional data store factory, returns <code>null</code> if
+     * the data store is not configured.
-    private final DataStoreConfig dataStoreConfig;
+    private final DataStoreFactory dsf;
-     * @param dataStoreConfig configuration for data store
+     * @param dsf data store factory
-            ClusterConfig cc, DataStoreConfig dataStoreConfig, RepositoryConfigurationParser parser) {
+            ClusterConfig cc, DataStoreFactory dsf,
+            RepositoryConfigurationParser parser) {
-        this.dataStoreConfig = dataStoreConfig;
+        this.dsf = dsf;
-     * Returns the data store configuration. Returns <code>null</code> if data store
-     * has not been configured.
+     * Creates and returns the configured data store. Returns
+     * <code>null</code> if a data store has not been configured.
+     *
+     * @return the configured data store, or <code>null</code>
+     * @throws RepositoryException if the data store can not be created
-    public DataStoreConfig getDataStoreConfig() {
-        return dataStoreConfig;
+    public DataStore getDataStore() throws RepositoryException {
+        return dsf.getDataStore();
-}
+}
