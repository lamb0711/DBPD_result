work in progress

- replace usage of UUID by uniqueID unless refering to 'jcr:uuid'
- PropertyImpl.checkValidReference: don't rely on Node-value to be NodeImpl
- spi.Event: getUUID() not used -> remove


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@483477 13f79535-47bb-0310-9956-ffa450edef68

-    private final Map uuid2NodeState;
+    private final Map uniqueId2NodeState;
-        this.uuid2NodeState = new ReferenceMap(ReferenceMap.HARD, ReferenceMap.WEAK);
+        this.uniqueId2NodeState = new ReferenceMap(ReferenceMap.HARD, ReferenceMap.WEAK);
-    public NodeState getNodeState(String uuid) {
-        return (NodeState) uuid2NodeState.get(uuid);
+    public NodeState getNodeState(String uniqueID) {
+        return (NodeState) uniqueId2NodeState.get(uniqueID);
-        String uuid = nodeId.getUUID();
-        if (uuid != null && nodeId.getPath() == null) {
-            return getNodeState(uuid);
+        String uid = nodeId.getUniqueID();
+        if (uid != null && nodeId.getPath() == null) {
+            return getNodeState(uid);
-                String uuid = nodeState.getUUID();
-                if (uuid != null) {
-                    uuid2NodeState.remove(uuid);
+                String uniqueID = nodeState.getUniqueID();
+                if (uniqueID != null) {
+                    uniqueId2NodeState.remove(uniqueID);
-            // NOTE: uuid is retrieved from the state and not from the NodeId.
-            String uuid = nodeState.getUUID();
-            if (uuid != null) {
-                uuid2NodeState.put(uuid, nodeState);
+            // NOTE: uniqueID is retrieved from the state and not from the NodeId.
+            String uniqueID = nodeState.getUniqueID();
+            if (uniqueID != null) {
+                uniqueId2NodeState.put(uniqueID, nodeState);
