migrating to v0.15 of the jsr 170 spec

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@55516 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.version.VersionException;
-     * @see VersionHistory#addVersionLabel(Version, String, boolean)
+     * @see VersionHistory#addVersionLabel(String, String)
-    public void addVersionLabel(Version version, String label, boolean move) throws RepositoryException {
-        history.addVersionLabel(((VersionImpl) version).version, label, move);
+    public void addVersionLabel(String versionName, String label) throws VersionException, RepositoryException {
+        InternalVersion v;
+        try {
+            QName name = QName.fromJCRName(versionName, ((SessionImpl) unwrap().getSession()).getNamespaceResolver());
+            v = history.getVersion(name);
+        } catch (IllegalNameException e) {
+            throw new RepositoryException(e);
+        } catch (UnknownPrefixException e) {
+            throw new RepositoryException(e);
+        }
+        if (v == null) {
+            throw new VersionException("specified version does not exist");
+        }
+        history.addVersionLabel(v, label, false);
-    public void removeVersionLabel(String label) throws RepositoryException {
+    public void removeVersionLabel(String label) throws VersionException, RepositoryException {
