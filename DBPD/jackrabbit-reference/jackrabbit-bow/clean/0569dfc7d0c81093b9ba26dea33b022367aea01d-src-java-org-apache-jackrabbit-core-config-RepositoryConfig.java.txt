- adding better extensibility to configuration parser

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@312844 13f79535-47bb-0310-9956-ffa450edef68

+     * the default parser
+     */
+    private final ConfigurationParser parser;
+
+    /**
+     * @param parser the ConfigurationParser that servers as config factory
-            Element template, VersioningConfig vc) {
+            Element template, VersioningConfig vc, ConfigurationParser parser) {
+        this.parser = parser;
-    private void init() throws ConfigurationException {
+    protected void init() throws ConfigurationException {
-            ConfigurationParser parser = new ConfigurationParser(variables);
-
-            return parser.parseWorkspaceConfig(xml);
+            ConfigurationParser localParser = parser.createSubParser(variables);
+            return localParser.parseWorkspaceConfig(xml);
