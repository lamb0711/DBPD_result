Fixing errors due to JCR-476


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@425017 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.Path;
+import org.apache.jackrabbit.name.PathFormat;
+import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.Path;
-import javax.jcr.query.QueryResult;
+import javax.jcr.query.QueryResult;
-            Path p = resolver.getQPath(absPath).getNormalizedPath();
+            Path p = PathFormat.parse(absPath, resolver).getNormalizedPath();
-            if (!session.itemExists(resolver.getJCRPath(p.getAncestor(1)))) {
-                throw new PathNotFoundException(resolver.getJCRPath(p.getAncestor(1)));
+            String jcrParent = PathFormat.format(p.getAncestor(1), resolver);
+            if (!session.itemExists(jcrParent)) {
+                throw new PathNotFoundException(jcrParent);
-            String relPath = resolver.getJCRPath(p).substring(1);
+            String relPath = PathFormat.format(p, resolver).substring(1);
