work in progress

- delegate cleanup and event-handling to the changelog

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@451955 13f79535-47bb-0310-9956-ffa450edef68

-        // now we need to apply the transient changes in changeLog to
-        // the ItemStates in the workspace layer
-        changeLog.push();
-        changeLog.persisted();
+        // apply the transient changes in changeLog to the ItemStates in the
+        // workspace layer and synchronize the changes recorded in the changelog
+        // with the events sent.
+        changeLog.persist(events);
