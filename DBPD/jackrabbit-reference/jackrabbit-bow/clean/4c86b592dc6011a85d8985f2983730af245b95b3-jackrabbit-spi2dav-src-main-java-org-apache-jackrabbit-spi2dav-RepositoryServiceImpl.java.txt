JCR-2113 : WIP (Contribution by Alfusainey Jallow), fixing issue introduced by angela

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1640897 13f79535-47bb-0310-9956-ffa450edef68

-                fillSupportedPrivilegeMap(new SupportedPrivilegeSetProperty(p).getValue(), spMap, npResolver);
+                fillSupportedPrivilegeMap(new SupportedPrivilegeSetProperty(p).getValue(), spMap, getNameFactory());
-    private static void fillSupportedPrivilegeMap(List<SupportedPrivilege> sps, Map<Name, SupportedPrivilege> spMap, NamePathResolver npResolver) throws NamespaceException, IllegalNameException {
+    private static void fillSupportedPrivilegeMap(List<SupportedPrivilege> sps, Map<Name, SupportedPrivilege> spMap, NameFactory nameFactory) throws NamespaceException, IllegalNameException {
-            spMap.put(npResolver.getQName(sp.getPrivilege().getName()), sp);
+            Privilege p = sp.getPrivilege();
+            Name privName = nameFactory.create(p.getNamespace().getURI(), p.getName());
+            spMap.put(privName, sp);
-                fillSupportedPrivilegeMap(agg, spMap, npResolver);
+                fillSupportedPrivilegeMap(agg, spMap, nameFactory);
