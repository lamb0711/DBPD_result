fixed: move, reorder (work in progress)
fixed: locktoken transfer
fixed: recursive transient removal of invalidated tree fails (restoreTests)
improve: simplify usage of workspace operations
fixed: store original itemId with transient operations in order to properly reflect the changelog upon batch creation
fixed: workspace import doesn't invalidate
fixed: session import uuid handling




git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@513279 13f79535-47bb-0310-9956-ffa450edef68

-    //-----------------------------------------------------< Item interface >---
+    //---------------------------------------------------------------< Item >---
-    //-----------------------------------------------------< Node interface >---
+    //---------------------------------------------------------------< Node >---
-        if (getNodeEntry().hasPropertyEntry(QName.JCR_MIXINTYPES)) {
+        if (hasProperty(QName.JCR_MIXINTYPES)) {
-        return getEffectiveNodeType().includesNodeType(qName);
+        try {
+            EffectiveNodeType effnt = session.getValidator().getEffectiveNodeType(getNodeState().getNodeTypeNames());
+            return effnt.includesNodeType(qName);
+        } catch (NodeTypeConflictException e) {
+            throw new RepositoryException(e);
+        }
-     * Returns the effective (i.e. merged and resolved) node type representation
-     * of this node's primary and mixin node types.
-     *
-     * @return the effective node type
-     * @throws RepositoryException
-     */
-    private EffectiveNodeType getEffectiveNodeType() throws RepositoryException {
-        // build effective node type of mixins & primary type
-        ItemStateValidator validator = session.getValidator();
-        return validator.getEffectiveNodeType(getNodeState());
-    }
-
-    /**
