JCR-2836: Unclosed threads in Jackrabbit

Merge all timers into a single repository-wide timer instance and arrange for it to be cancelled when the repository is shutdown.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1055071 13f79535-47bb-0310-9956-ffa450edef68

-    public SearchManager(QueryHandlerFactory qhf,
-                         final NamespaceRegistryImpl nsReg,
-                         NodeTypeRegistry ntReg,
+    public SearchManager(
+            RepositoryContext repositoryContext,
+            QueryHandlerFactory qhf,
-        this.nsReg = nsReg;
+        this.nsReg = repositoryContext.getNamespaceRegistry();
-                itemMgr, pm, rootNodeId, ntReg, nsReg,
+                repositoryContext,
+                itemMgr, pm, rootNodeId,
