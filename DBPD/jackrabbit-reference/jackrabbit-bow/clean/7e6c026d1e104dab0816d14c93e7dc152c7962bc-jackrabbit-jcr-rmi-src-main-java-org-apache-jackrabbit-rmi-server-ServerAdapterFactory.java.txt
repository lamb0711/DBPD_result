JCR-781: Allow custom socket factories and port number in the RMI server.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@526707 13f79535-47bb-0310-9956-ffa450edef68

+import java.rmi.server.RMIClientSocketFactory;
+import java.rmi.server.RMIServerSocketFactory;
+import java.rmi.server.RMISocketFactory;
-    private int bufferSize;
+    private int bufferSize = DEFAULT_BUFFER_SIZE;
-    /**
-     * Creates a server adapter factory with the default iterator buffer size.
-     */
-    public ServerAdapterFactory() {
-        bufferSize = DEFAULT_BUFFER_SIZE;
-    }
+    private int port = 0;
+
+    private RMIClientSocketFactory clientSocketFactory = null;
+
+    private RMIServerSocketFactory serverSocketFactory = null;
+     * Returns the RMI port to use.
+     *
+     * @return RMI port number
+     * @since 1.3
+     */
+    public int getPort() {
+        return port;
+    }
+
+    /**
+     * Sets the RMI port to use.
+     *
+     * @param port RMI port number
+     * @since 1.3
+     */
+    public void setPort(int port) {
+        this.port = port;
+    }
+
+    /**
+     * Returns the RMI client socket factory to use.
+     *
+     * @return RMI client socket factory
+     * @since 1.3
+     */
+    public RMIClientSocketFactory getClientSocketFactory() {
+        RMIClientSocketFactory factory = clientSocketFactory;
+        if (factory == null) {
+            factory = RMISocketFactory.getSocketFactory();
+        }
+        if (factory == null) {
+            factory = RMISocketFactory.getDefaultSocketFactory();
+        }
+        return factory;
+    }
+
+    /**
+     * Sets the RMI client socket factory to use.
+     *
+     * @param factory RMI client socket factory,
+     *                or <code>null</code> to use the default
+     * @since 1.3
+     */
+    public void setClientSocketFactory(RMIClientSocketFactory factory) {
+        clientSocketFactory = factory;
+    }
+
+    /**
+     * Returns the RMI server socket factory to use.
+     *
+     * @return RMI server socket factory
+     * @since 1.3
+     */
+    public RMIServerSocketFactory getServerSocketFactory() {
+        RMIServerSocketFactory factory = serverSocketFactory;
+        if (factory == null) {
+            factory = RMISocketFactory.getSocketFactory();
+        }
+        if (factory == null) {
+            factory = RMISocketFactory.getDefaultSocketFactory();
+        }
+        return factory;
+    }
+
+    /**
+     * Sets the RMI server socket factory to use.
+     *
+     * @param factory RMI server socket factory,
+     *                or <code>null</code> to use the default
+     * @since 1.3
+     */
+    public void setServerSocketFactory(RMIServerSocketFactory factory) {
+        serverSocketFactory = factory;
+    }
+
+    /**
