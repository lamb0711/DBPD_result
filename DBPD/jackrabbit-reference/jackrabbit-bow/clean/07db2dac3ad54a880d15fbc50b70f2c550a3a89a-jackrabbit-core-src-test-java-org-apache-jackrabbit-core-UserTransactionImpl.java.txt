JCR-2207: XATest error: commit from different thread but same XID must not block

Fixed a problem in the thread timeout code. Thanks, Claus, for the catch!

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816124 13f79535-47bb-0310-9956-ffa450edef68

-                try {
-                    Thread distributedThread = new Thread() {
-                        public void run() {
-                            try {
-                                xares.commit(xid, false);
-                            } catch (Exception e) {
-                                throw new RuntimeException(e.getMessage());
-                            }
+                Thread distributedThread = new Thread() {
+                    public void run() {
+                        try {
+                            xares.commit(xid, false);
+                        } catch (Exception e) {
+                            throw new RuntimeException(e.getMessage());
-                    };
-                    distributedThread.start();
-                    distributedThread.join(1000);
-                } catch (InterruptedException e) {
+                    }
+                };
+                distributedThread.start();
+                distributedThread.join(1000);
+                if (distributedThread.isAlive()) {
+        } catch (InterruptedException e) {
+            throw new SystemException("Thread.join() interrupted");
