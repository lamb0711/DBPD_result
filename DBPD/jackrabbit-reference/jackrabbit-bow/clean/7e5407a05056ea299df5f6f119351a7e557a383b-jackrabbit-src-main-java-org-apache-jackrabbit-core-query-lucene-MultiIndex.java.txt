[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

-     * Set&lt;String> of uuids that should not be indexed.
+     * Set&lt;NodeId> of uuids that should not be indexed.
-    private final Set excludedUUIDs;
+    private final Set excludedIDs;
-     * @param rootUUID uuid of the root node
-     * @param excludedUUIDs Set&lt;String> that contains uuids that should not
+     * @param rootId id of the root node
+     * @param excludedIDs   Set&lt;NodeId> that contains uuids that should not
-               String rootUUID,
-               Set excludedUUIDs) throws IOException {
+               NodeId rootId,
+               Set excludedIDs) throws IOException {
-        this.redoLog = new RedoLog(new File(indexDir, REDO_LOG)); 
-        this.excludedUUIDs = new HashSet(excludedUUIDs);
+        this.redoLog = new RedoLog(new File(indexDir, REDO_LOG));
+        this.excludedIDs = new HashSet(excludedIDs);
-                NodeState rootState = (NodeState) stateMgr.getItemState(new NodeId(rootUUID));
+                NodeState rootState = (NodeState) stateMgr.getItemState(rootId);
-        String uuid = node.getId().toString();
-        if (excludedUUIDs.contains(uuid)) {
+        NodeId id = node.getNodeId();
+        if (excludedIDs.contains(id)) {
-        executeAndLog(new AddNode(getTransactionId(), uuid));
+        executeAndLog(new AddNode(getTransactionId(), id.getUUID().toString()));
-            NodeState childState = (NodeState) stateMgr.getItemState(new NodeId(child.getUUID()));
+            NodeState childState = (NodeState) stateMgr.getItemState(child.getId());
-                    doc = index.createDocument(new NodeId(uuid));
+                    doc = index.createDocument(NodeId.valueOf(uuid));
