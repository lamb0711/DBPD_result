JCR-1104: JSR 283 support
- multiple selectors (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@633843 13f79535-47bb-0310-9956-ffa450edef68

-    protected final ScoreNode[] scoreNodes;
+    protected final ScoreNode[][] scoreNodes;
+
+    /** The index for the default selector withing {@link #scoreNodes} */
+    private final int selectorIndex;
-     * @param itemMgr the <code>ItemManager</code> to turn UUIDs into
-     *   <code>Node</code> instances.
-     * @param scoreNodes the node ids of the matching nodes.
+     *
+     * @param itemMgr       the <code>ItemManager</code> to turn UUIDs into
+     *                      <code>Node</code> instances.
+     * @param scoreNodes    the node ids of the matching nodes.
+     * @param selectorIndex the index for the default selector within
+     *                      <code>scoreNodes</code>.
-                     ScoreNode[] scoreNodes) {
+                     ScoreNode[][] scoreNodes,
+                     int selectorIndex) {
+        this.selectorIndex = selectorIndex;
-        return scoreNodes[pos].getScore();
+        return scoreNodes[pos][selectorIndex].getScore();
+    }
+
+    /**
+     * {@inheritDoc}
+     */
+    public ScoreNode[] getScoreNodes() {
+        return scoreNodes[pos];
-                next = (NodeImpl) itemMgr.getItem(scoreNodes[pos + 1].getNodeId());
+                next = (NodeImpl) itemMgr.getItem(scoreNodes[pos + 1][selectorIndex].getNodeId());
-                        + scoreNodes[pos + 1].getNodeId() + ": " + e.toString());
+                        + scoreNodes[pos + 1][selectorIndex].getNodeId() + ": " + e.toString());
