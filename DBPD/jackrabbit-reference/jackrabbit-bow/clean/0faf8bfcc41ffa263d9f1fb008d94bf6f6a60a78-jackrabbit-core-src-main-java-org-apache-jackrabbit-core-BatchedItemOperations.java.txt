JCR-1510: [PATCH] more verbose exception messages (BatchedItemOperations)
    - Patch by Dave Brosius (plus some line wrapping)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@660496 13f79535-47bb-0310-9956-ffa450edef68

-            String msg = "invalid destination path (subscript in name element is not allowed)";
+            String msg =
+                "invalid destination path: " + safeGetJCRPath(destPath)
+                + " (subscript in name element is not allowed)";
-            String msg = "Cloning inside a workspace is only allowed for shareable nodes.";
+            String msg =
+                "Cloning inside a workspace is only allowed for shareable"
+                + " nodes. Node with type " + srcState.getNodeTypeName()
+                + " is not shareable.";
-            String msg = "Share cycle detected.";
+            String msg =
+                "Cloning Node with id " + srcId.getUUID()
+                + " to parent with id " + destParentId.getUUID()
+                + " would create a share cycle.";
-            String msg = "Adding a shareable node twice to the same parent is not supported.";
+            String msg =
+                "Adding a shareable node with id ("
+                + destParentState.getNodeId().getUUID()
+                + ") twice to the same parent is not supported.";
-            String msg = "invalid destination path (subscript in name element is not allowed)";
+            String msg =
+                "invalid copy destination path: " + safeGetJCRPath(destPath)
+                + " (subscript in name element is not allowed)";
-            String msg = "internal error: failed to check access rights for "
-                    + safeGetJCRPath(srcPath);
+            String msg =
+                "internal error: failed to check access rights for "
+                + safeGetJCRPath(srcPath);
-            throw new IllegalStateException("not in edit mode");
+            throw new IllegalStateException(
+                    "cannot move path " + safeGetJCRPath(srcPath)
+                    + " because manager is not in edit mode");
-                String msg = safeGetJCRPath(destPath)
-                        + ": invalid destination path (cannot be descendant of source path)";
+                String msg =
+                    safeGetJCRPath(destPath) + ": invalid destination path"
+                    + " (cannot be descendant of source path)";
-            String msg = "invalid path: " + safeGetJCRPath(destPath);
+            String msg = "invalid path for move: " + safeGetJCRPath(destPath);
-            String msg = safeGetJCRPath(destPath)
-                    + ": invalid destination path (subscript in name element is not allowed)";
+            String msg =
+                safeGetJCRPath(destPath) + ": invalid destination path"
+                + " (subscript in name element is not allowed)";
-            String msg = safeGetJCRPath(destPath)
-                    + ": invalid destination path (share cycle detected)";
+            String msg =
+                safeGetJCRPath(destPath) + ": invalid destination path"
+                + " (share cycle detected)";
-                String msg = "Moving a shareable node is not supported.";
+                String msg =
+                    "Moving a shareable node (" + safeGetJCRPath(srcPath)
+                    + ") is not supported.";
-            throw new IllegalStateException("not in edit mode");
+            throw new IllegalStateException(
+                    "cannot remove node (" + safeGetJCRPath(nodePath)
+                    + ") because manager is not in edit mode");
-                throw new ConstraintViolationException(safeGetJCRPath(parentState.getNodeId())
+                throw new ConstraintViolationException(
+                        safeGetJCRPath(parentState.getNodeId())
-                    String msg = "internal error: failed to retrieve state of "
-                            + safeGetJCRPath(conflictingId);
+                    String msg =
+                        "internal error: failed to retrieve state of "
+                        + safeGetJCRPath(conflictingId);
-                    throw new ItemExistsException("cannot add child node '"
-                            + nodeName.getLocalName() + "' to "
-                            + safeGetJCRPath(parentState.getNodeId())
+                    throw new ItemExistsException(
+                            "cannot add child node '" + nodeName.getLocalName()
+                            + "' to " + safeGetJCRPath(parentState.getNodeId())
-            throw new IllegalStateException("not in edit mode");
+            throw new IllegalStateException(
+                    "cannot create node state for " + nodeName
+                    + " because manager is not in edit mode");
-                String msg = "an applicable node type could not be determined for "
-                        + nodeName;
+                String msg =
+                    "an applicable node type could not be determined for "
+                    + nodeName;
-            throw new IllegalStateException("not in edit mode");
+            throw new IllegalStateException(
+                    "cannot create property state for " + propName
+                    + " because manager is not in edit mode");
-                            String msg = "cannot remove ancestor node";
+                            String msg =
+                                "cannot remove node " + safeGetJCRPath(srcPath)
+                                + " because it is an ancestor of the destination";
-                    throw new IllegalArgumentException("unknown flag");
+                    throw new IllegalArgumentException(
+                            "unknown flag for copying node state: " + flag);
-                                String msg = "Remapped child is not shareable.";
+                                String msg =
+                                    "Remapped child (" + safeGetJCRPath(srcPath)
+                                    + ") is not shareable.";
