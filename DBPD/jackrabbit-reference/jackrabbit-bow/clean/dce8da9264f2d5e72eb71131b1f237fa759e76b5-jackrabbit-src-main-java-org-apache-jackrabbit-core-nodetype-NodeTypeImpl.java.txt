- decouple InternalValue from ValueHelper
- some javadoc improvements

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@419916 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.value.ValueHelper;
-            // create InternalValue from Value and perform
-            // type conversion as necessary
-            InternalValue internalValue = InternalValue.create(value, targetType,
-                    nsResolver);
+            // perform type conversion as necessary and create InternalValue
+            // from (converted) Value
+            InternalValue internalValue;
+            if (targetType != value.getType()) {
+                // type conversion required
+                Value targetVal = ValueHelper.convert(value, targetType);
+                internalValue = InternalValue.create(targetVal, nsResolver);
+            } else {
+                // no type conversion required
+                internalValue = InternalValue.create(value, nsResolver);
+            }
-                    // create InternalValue from Value and perform
-                    // type conversion as necessary
-                    InternalValue internalValue =
-                            InternalValue.create(values[i], targetType,
-                                    nsResolver);
+                    // perform type conversion as necessary and create InternalValue
+                    // from (converted) Value
+                    InternalValue internalValue;
+                    if (targetType != type) {
+                        // type conversion required
+                        Value targetVal = ValueHelper.convert(values[i], targetType);
+                        internalValue = InternalValue.create(targetVal, nsResolver);
+                    } else {
+                        // no type conversion required
+                        internalValue = InternalValue.create(values[i], nsResolver);
+                    }
