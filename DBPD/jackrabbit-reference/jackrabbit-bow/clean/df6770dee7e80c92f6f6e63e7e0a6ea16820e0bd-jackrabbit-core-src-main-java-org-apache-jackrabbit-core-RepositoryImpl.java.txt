JCR-3525 inform cluster of changes made during consistency repairs
- added a lot more unit test coverage, including verification of cluster update events
- refactored the code to be more modular
- report items now also report whether inconsistency error was fixed

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1448252 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.persistence.check.ConsistencyChecker;
+                    if (persistMgr instanceof ConsistencyChecker) {
+                        ((ConsistencyChecker) persistMgr).setEventChannel(updateChannel);
+                    }
