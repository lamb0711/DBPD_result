JCR-2238: Binary throws NullPointerException

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@802676 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+import org.apache.commons.io.input.AutoCloseInputStream;
-        return getValue().getBinary().getStream();
+        final Binary bin = getValue().getBinary();
+        // make sure binary is disposed after stream had been consumed
+        return new AutoCloseInputStream(bin.getStream()) {
+            public void close() throws IOException {
+                super.close();
+                bin.dispose();
+            }
+        };
