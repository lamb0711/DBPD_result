JCR-1104 : JSR 283 support (security work in progress)

- user API: add changePw method to the User.java
- adjust impl and change password to be a protected property

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@653795 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.security.authentication.CryptedSimpleCredentials;
-import java.io.UnsupportedEncodingException;
-import java.security.NoSuchAlgorithmException;
-            CryptedSimpleCredentials creds = new CryptedSimpleCredentials(userID, password);
-            setSecurityProperty(userNode, P_USERID, getValue(creds.getUserID()));
-            setSecurityProperty(userNode, P_PASSWORD, getValue(creds.getPassword()));
+            setSecurityProperty(userNode, P_USERID, getValue(userID));
+            setSecurityProperty(userNode, P_PASSWORD, getValue(UserImpl.buildPasswordValue(password)));
-        } catch (NoSuchAlgorithmException e) {
-            throw new RepositoryException(e);
-        } catch (UnsupportedEncodingException e) {
-            throw new RepositoryException(e);
+    void setProtectedProperty(NodeImpl node, Name propName, Value value) throws RepositoryException, LockException, ConstraintViolationException, ItemExistsException, VersionException {
+        setSecurityProperty(node, propName, value);
+        node.save();
+    }
+
