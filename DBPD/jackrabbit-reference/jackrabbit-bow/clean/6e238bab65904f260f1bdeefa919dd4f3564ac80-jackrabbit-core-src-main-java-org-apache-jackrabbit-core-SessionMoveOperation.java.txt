JCR-2744: Avoid element arrays in PathImpl

Avoid using Path.getNameElement() where possible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997303 13f79535-47bb-0310-9956-ffa450edef68

-    private final Path.Element srcName;
-
-    private final Path.Element destName;
-
-        this.srcName = srcPath.getNameElement();
-        this.destName = destPath.getNameElement();
-        if (destName.getIndex() > 0) {
+        if (destPath.getIndex() != Path.INDEX_UNDEFINED) {
-            newTargetDef = destParentNode.getApplicableChildNodeDefinition(destName.getName(), nt.getQName());
+            newTargetDef = destParentNode.getApplicableChildNodeDefinition(destPath.getName(), nt.getQName());
-        int index = srcName.getIndex();
-        if (index == 0) {
-            index = 1;
-        }
+        int index = srcPath.getNormalizedIndex();
-            destParentNode.renameChildNode(targetId, destName.getName(), false);
+            destParentNode.renameChildNode(targetId, destPath.getName(), false);
-                destParentState.addChildNodeEntry(destName.getName(), targetId);
+                destParentState.addChildNodeEntry(destPath.getName(), targetId);
