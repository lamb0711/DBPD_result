JCR-2880 : Save fails after setting a binary property twice

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1089032 13f79535-47bb-0310-9956-ffa450edef68

+    private final QValue[] oldValues;
+
+        // remember original values
+        oldValues = propertyState.getValues();
+
-        propertyState.getHierarchyEntry().complete(this);
+        try {
+            propertyState.getHierarchyEntry().complete(this);
+        } finally {
+            // dispose the original values
+            for (QValue v : oldValues) {
+                v.discard();
+            }
+        }
+
+        // NOTE: new values don't need to be disposed as the transient change
+        //       has been reverted with implicit value disposal.
