work in progress

- remove NodeState.getPropertyId and replace by getPropertyState
- use ChildNodeEntry.getNodeState
- consequently remove utility methods getNodeState, getPropertyState on
  ItemStateValidator, that converted ItemStateExceptions to RepositoryExc.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429269 13f79535-47bb-0310-9956-ffa450edef68

-    public synchronized ItemImpl getItem(org.apache.jackrabbit.name.Path path)
+    public synchronized ItemImpl getItem(Path path)
-
-            PropertyId id = nodeState.getPropertyId(propName);
-            // check read access
-            if (session.getAccessManager().canRead(id)) {
-                return true;
+            try {
+                PropertyId id = nodeState.getPropertyState(propName).getPropertyId();
+                // check read access
+                if (session.getAccessManager().canRead(id)) {
+                    return true;
+                }
+            } catch (ItemStateException e) {
+                // should not occur.
+                throw new RepositoryException(e);
-            PropertyId id = nodeState.getPropertyId(propName);
-            // check read access
-            if (session.getAccessManager().canRead(id)) {
-                childIds.add(id);
+            try {
+                PropertyId id = nodeState.getPropertyState(propName).getPropertyId();
+                // check read access
+                if (session.getAccessManager().canRead(id)) {
+                    childIds.add(id);
+                }
+            } catch (ItemStateException e) {
+                // should not occur.
+                throw new RepositoryException(e);
