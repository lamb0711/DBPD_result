JCR-2170: Remove PropDefId and NodeDefId
- merged changes from sandbox branch

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816343 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.PropDefId;
-import org.apache.jackrabbit.core.nodetype.PropertyDefinitionImpl;
+import org.apache.jackrabbit.spi.QPropertyDefinition;
-            persistentState.setDefinitionId(transientState.getDefinitionId());
-        thisState.setDefinitionId(transientState.getDefinitionId());
-    protected void onRedefine(PropDefId defId) throws RepositoryException {
-        PropertyDefinitionImpl newDef =
-                session.getNodeTypeManager().getPropertyDefinition(defId);
-        // modify the state of 'this', i.e. the target property
-        PropertyState thisState = (PropertyState) getOrCreateTransientItemState();
-        // set id of new definition
-        thisState.setDefinitionId(defId);
+    protected void onRedefine(QPropertyDefinition def) throws RepositoryException {
+        org.apache.jackrabbit.spi.commons.nodetype.PropertyDefinitionImpl newDef =
+                session.getNodeTypeManager().getPropertyDefinition(def);
-        final PropertyDefinition definition = data.getPropertyDefinition();
