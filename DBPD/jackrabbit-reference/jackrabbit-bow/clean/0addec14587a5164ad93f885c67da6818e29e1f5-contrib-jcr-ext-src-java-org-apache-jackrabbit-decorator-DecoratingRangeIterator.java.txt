JCR-256: Improve jcr decorator in jcr-ext
- added decoration for all required jcr interfaces
- added more factory methods to DecoratorFactory
- renamed SimpleDecoratorFactory to DefaultDecoratorFactory
- removed ChainedDecoratorFactory and ChainedItemDecorator
- added sample decorator: TrussDecoratorFactory

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@326437 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.version.Version;
+import javax.jcr.version.VersionHistory;
-public class DecoratingRangeIterator implements RangeIterator {
-
-    /** The decorator factory. Used to decorate returned objects. */
-    private final DecoratorFactory factory;
-
-    /** The decorated session to which the returned objects belong. */
-    private final Session session;
+public class DecoratingRangeIterator
+        extends AbstractDecorator implements RangeIterator {
-    private final RangeIterator iterator;
+    protected final RangeIterator iterator;
-        this.factory = factory;
-        this.session = session;
+        super(factory, session);
-        if (object instanceof Node) {
+        if (object instanceof Version) {
+            return factory.getVersionDecorator(session, (Version) object);
+        } else if (object instanceof VersionHistory) {
+            return factory.getVersionHistoryDecorator(session, (VersionHistory) object);
+        } else if (object instanceof Node) {
-            throw new UnsupportedOperationException(
-                    "No decorator available for " + object);
+            throw new UnsupportedOperationException("No decorator available for " + object);
