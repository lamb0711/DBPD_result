JCR-255 Workspace operations (copy/clone) do not handle references correctly

consolidated code that maintains/enforces referential integrity (RI):
SharedItemStateManager.store(ChangeLog) is now the only place where
RI is maintained and enforced

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@326916 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.ReferentialIntegrityException;
-    public void store(NodeReferences refs) throws IllegalStateException {
-        persistentStateMgr.store(refs);
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public void update() throws ItemStateException, IllegalStateException {
+    public void update()
+            throws ReferentialIntegrityException, StaleItemStateException,
+            ItemStateException, IllegalStateException {
