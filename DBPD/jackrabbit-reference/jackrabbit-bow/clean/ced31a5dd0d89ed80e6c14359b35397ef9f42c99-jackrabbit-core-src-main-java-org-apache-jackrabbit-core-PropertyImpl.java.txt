resolve TODO by simplifying Property.getLength(InternalValue)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@781318 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.value.BLOBFileValue;
-        // TODO maybe move method to InternalValue
+        long length;
-            case PropertyType.STRING:
-            case PropertyType.LONG:
-            case PropertyType.DOUBLE:
-            case PropertyType.DATE:
-            case PropertyType.REFERENCE:
-            case PropertyType.BOOLEAN:
-            case PropertyType.DECIMAL:
-            case PropertyType.URI:
-            case PropertyType.WEAKREFERENCE:
-                return value.toString().length();
-
-                Name name = value.getQName();
-                return session.getJCRName(name).length();
-
-                Path path = value.getPath();
-                return session.getJCRPath(path).length();
-
-            case PropertyType.BINARY:
-                BLOBFileValue blob = value.getBLOBFileValue();
-                return blob.getLength();
-
+                Value jcrValue = ValueFormat.getJCRValue(value, session, session.getValueFactory());
+                length = jcrValue.getString().length();
+                break;
-                return -1;
+                length = value.getLength();
+                break;
+        return length;
