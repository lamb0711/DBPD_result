JCR-1104: JSR 283 support (work in progress...)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@572978 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.lock.Lock;
+     * Returns all <code>AbstractLockInfo</code>s associated with the specified
+     * session.
+     * @param session session
+     * @return an array of <code>AbstractLockInfo</code>s
+     * @throws RepositoryException if an error occurs
+     */
+    public AbstractLockInfo[] getLockInfos(SessionImpl session)
+            throws RepositoryException {
+        ArrayList result = new ArrayList();
+
+        // get lock infos from global lock manager first
+        AbstractLockInfo[] infos = lockMgr.getLockInfos(session);
+        for (int i = 0; i < infos.length; i++) {
+            AbstractLockInfo info = infos[i];
+            // check negative set
+            if (!unlockedNodesMap.containsKey(info.getId())) {
+                result.add(info);
+            }
+        }
+
+        // add 'uncommitted' lock infos 
+        result.addAll(lockedNodesMap.values());
+
+        return (AbstractLockInfo[]) result.toArray(new AbstractLockInfo[result.size()]);
+    }
+
+    /**
