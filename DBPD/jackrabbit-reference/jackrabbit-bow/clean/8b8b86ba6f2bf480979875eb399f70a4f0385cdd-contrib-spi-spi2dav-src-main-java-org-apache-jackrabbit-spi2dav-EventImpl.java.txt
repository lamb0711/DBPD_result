work in progress

- avoid usage of JCR event types for SPI events.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@449673 13f79535-47bb-0310-9956-ffa450edef68

-        // TODO: server sends JCR-event types. we expect spi-types
-        type = SubscriptionImpl.getJcrEventType(et[0]);
+        type = getSpiEventType(SubscriptionImpl.getJcrEventType(et[0]));
-        // TODO not available from XML_EVENT element
-        return null;
+        return itemId.getUUID();
+
+    //--------------------------------------------------------------------------
+    private static int getSpiEventType(int jcrEventType) {
+        switch (jcrEventType) {
+            case javax.jcr.observation.Event.NODE_ADDED:
+                return Event.NODE_ADDED;
+            case javax.jcr.observation.Event.NODE_REMOVED:
+                return Event.NODE_REMOVED;
+            case javax.jcr.observation.Event.PROPERTY_ADDED:
+                return Event.PROPERTY_ADDED;
+            case javax.jcr.observation.Event.PROPERTY_CHANGED:
+                return Event.PROPERTY_CHANGED;
+            case javax.jcr.observation.Event.PROPERTY_REMOVED:
+                return Event.PROPERTY_REMOVED;
+            default:
+                throw new IllegalArgumentException("Invalid event type: " + jcrEventType);
+        }
+    }
