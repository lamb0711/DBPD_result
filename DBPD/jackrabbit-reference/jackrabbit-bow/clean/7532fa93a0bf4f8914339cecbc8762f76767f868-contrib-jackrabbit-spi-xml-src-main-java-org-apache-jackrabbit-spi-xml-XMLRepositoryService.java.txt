adjust to latest changes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555537 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+import java.util.ArrayList;
+import javax.jcr.nodetype.NoSuchNodeTypeException;
-    public Iterator getNodeTypeDefinitions(
-            SessionInfo session) {
-        return Arrays.asList(types).iterator();
-    }
-
-    public Batch createBatch(ItemId itemId, SessionInfo sessionInfo)
+    public Batch createBatch(SessionInfo sessionInfo, ItemId itemId)
+     * @see org.apache.jackrabbit.spi.RepositoryService#getQNodeTypeDefinitions(org.apache.jackrabbit.spi.SessionInfo)
+     */
+    public Iterator getQNodeTypeDefinitions(SessionInfo sessionInfo) throws RepositoryException {
+        return Arrays.asList(types).iterator();
+    }
+
+    /* (non-Javadoc)
+     * @see org.apache.jackrabbit.spi.RepositoryService#getQNodeTypeDefinitions(org.apache.jackrabbit.spi.SessionInfo, QName[])
+     */
+    public Iterator getQNodeTypeDefinitions(SessionInfo sessionInfo, QName[] qNames) throws RepositoryException {
+        List l = new ArrayList();
+        List qNameList = Arrays.asList(qNames);
+        for (int i = 0; i < types.length && !qNameList.isEmpty(); i++) {
+            if (qNameList.contains(types[i].getQName())) {
+                l.add(types[i]);
+                qNameList.remove(types[i].getQName());
+            }
+        }
+        if (!qNameList.isEmpty()) {
+            // not for all names nodetypes exist -> throw
+            StringBuffer message = new StringBuffer("No such nodetypes: ");
+            for (Iterator it = qNameList.iterator(); it.hasNext();) {
+                message.append(it.next().toString()).append(", ");
+            }
+            throw new NoSuchNodeTypeException(message.toString());
+        }
+        return l.iterator();
+    }
+
+    /* (non-Javadoc)
-            String srcWorkspaceName) throws NoSuchWorkspaceException,
+                       String srcWorkspaceName) throws NoSuchWorkspaceException,
