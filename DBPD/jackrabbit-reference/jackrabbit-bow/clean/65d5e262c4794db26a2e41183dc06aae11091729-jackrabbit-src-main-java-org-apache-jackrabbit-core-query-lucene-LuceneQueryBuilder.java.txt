JCR-473 Some enhancements to jackrabbit commons (fixed some deprecated calls)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@421219 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.NameFormat;
+import org.apache.jackrabbit.name.PathFormat;
-            field = node.getPropertyName().toJCRName(nsMappings);
-            value = node.getValue().toJCRName(nsMappings);
+            field = NameFormat.format(node.getPropertyName(), nsMappings);
+            value = NameFormat.format(node.getValue(), nsMappings);
-            String mixinTypesField = QName.JCR_MIXINTYPES.toJCRName(nsMappings);
-            String primaryTypeField = QName.JCR_PRIMARYTYPE.toJCRName(nsMappings);
+            String mixinTypesField = NameFormat.format(QName.JCR_MIXINTYPES, nsMappings);
+            String primaryTypeField = NameFormat.format(QName.JCR_PRIMARYTYPE, nsMappings);
-            NodeType base = ntMgr.getNodeType(node.getValue().toJCRName(session.getNamespaceResolver()));
+            NodeType base = ntMgr.getNodeType(NameFormat.format(node.getValue(), session.getNamespaceResolver()));
-                                node.getValue().toJCRName(nsMappings)));
+                                NameFormat.format(node.getValue(), nsMappings)));
-                                node.getValue().toJCRName(nsMappings)));
+                                NameFormat.format(node.getValue(), nsMappings)));
-                        name = nameTest.toJCRName(nsMappings);
+                        name = NameFormat.format(nameTest, nsMappings);
-                String internalName = node.getNameTest().toJCRName(nsMappings);
+                String internalName = NameFormat.format(node.getNameTest(), nsMappings);
-                        subQuery = new MatchAllQuery(QName.JCR_PRIMARYTYPE.toJCRName(nsMappings));
+                        subQuery = new MatchAllQuery(NameFormat.format(QName.JCR_PRIMARYTYPE, nsMappings));
-            String refProperty = node.getRefProperty().toJCRName(nsMappings);
+            String refProperty = NameFormat.format(node.getRefProperty(), nsMappings);
-                nameTest = node.getNameTest().toJCRName(nsMappings);
+                nameTest = NameFormat.format(node.getNameTest(), nsMappings);
-            field = node.getProperty().toJCRName(nsMappings);
+            field = NameFormat.format(node.getProperty(), nsMappings);
-                        Path p = Path.create(literal, session.getNamespaceResolver(), false);
-                        values.add(p.toJCRPath(nsMappings));
+                        Path p = PathFormat.parse(literal, session.getNamespaceResolver());
+                        values.add(PathFormat.format(p, nsMappings));
-                    values.add(Path.create(literal, session.getNamespaceResolver(), false).toJCRPath(nsMappings));
+                    values.add(PathFormat.format(
+                            PathFormat.parse(literal, session.getNamespaceResolver()),
+                            nsMappings));
