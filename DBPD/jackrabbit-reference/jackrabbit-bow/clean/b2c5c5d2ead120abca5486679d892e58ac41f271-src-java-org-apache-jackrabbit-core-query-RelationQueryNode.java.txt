JCR-259: XPath query with negative numbers incorrect

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@328018 13f79535-47bb-0310-9956-ffa450edef68

+     * If <code>true</code> this relation query node contains a value preceded
+     * with an unary minus.
+     */
+    private boolean unaryMinus;
+
+    /**
+     * If <code>b</code> is <code>true</code> then the value in this relation
+     * node contains a receding unary minus.
+     *
+     * @param b <code>true</code> if this relation contains a unary minus.
+     */
+    public void setUnaryMinus(boolean b) {
+        unaryMinus = b;
+    }
+
+    /**
-        valueLong = value;
+        valueLong = unaryMinus ? -value : value;
-        valueDouble = value;
+        valueDouble = unaryMinus ? -value : value;
