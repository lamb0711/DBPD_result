- replace all EventIterator return values in RepositoryService with EventBundle[]
- remove RepositoryService.addEventListener()/removeEventListener() and introduce getEvents() instead
- added quick description of new design: see org/apache/jackrabbit/spi/package.html
- update spi/project.properties with correct links to external javadoc
- fix package in spi/project.xml


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@468388 13f79535-47bb-0310-9956-ffa450edef68

-    private final SubscriptionManager subscrMgr;
-    SessionInfoImpl(CredentialsWrapper creds, String workspaceName, SubscriptionManager subscrMgr) {
+    private String lastEventBundleId;
+
+    /**
+     * The subscriptionId if this session info is subscribed to observation
+     * events.
+     */
+    private String subscriptionId;
+
+    SessionInfoImpl(CredentialsWrapper creds, String workspaceName) {
-        this.subscrMgr = subscrMgr;
-        subscrMgr.setSessionInfo(this);
+    /**
+     * @inheritDoc
+     */
+    public String getLastEventBundleId() {
+        return lastEventBundleId;
+    }
+
+    /**
+     * @inheritDoc
+     */
+    public void setLastEventBundleId(String eventBundleId) {
+        lastEventBundleId = eventBundleId;
+    }
+
+
-    SubscriptionManager getSubscriptionManager() {
-        return subscrMgr;
+    /**
+     * Returns the subscriptionId for this <code>SessionInfo</code> or
+     * <code>null</code> if no subscription is present.
+     *
+     * @return the subscriptionId for this <code>SessionInfo</code>.
+     */
+    String getSubscriptionId() {
+        return subscriptionId;
+    }
+
+    /**
+     * Sets a new subscriptionId for this <code>SessionInfo</code>.
+     *
+     * @param subscriptionId the new subscriptionId.
+     * @return the old subscriptionId or <code>null</code> if there was none.
+     */
+    String setSubscriptionId(String subscriptionId) {
+        String old = this.subscriptionId;
+        this.subscriptionId = subscriptionId;
+        return old;
