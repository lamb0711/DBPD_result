JCR-4591: basic trailer field support

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1879178 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
+import java.util.function.Supplier;
+
+    // Servlet 4.0 API support for trailers, for now using reflection
+
+    public void setTrailerFields(Supplier<Map<String, String>> supplier) {
+        try {
+            java.lang.reflect.Method stf = httpResponse.getClass().getDeclaredMethod("setTrailerFields", Supplier.class);
+            stf.invoke(httpResponse, supplier);
+        } catch (IllegalAccessException | java.lang.reflect.InvocationTargetException | NoSuchMethodException
+                | SecurityException ex) {
+            throw new UnsupportedOperationException("no servlet 4.0 support on: " + httpResponse.getClass(), ex);
+        }
+    }
+
+    @SuppressWarnings("unchecked")
+    public Supplier<Map<String, String>> getTrailerFields() {
+        try {
+            java.lang.reflect.Method stf = httpResponse.getClass().getDeclaredMethod("getTrailerFields");
+            return (Supplier<Map<String, String>>) stf.invoke(httpResponse);
+        } catch (IllegalAccessException | java.lang.reflect.InvocationTargetException | NoSuchMethodException
+                | SecurityException ex) {
+            throw new UnsupportedOperationException("no servlet 4.0 support on: " + httpResponse.getClass(), ex);
+        }
+    }
