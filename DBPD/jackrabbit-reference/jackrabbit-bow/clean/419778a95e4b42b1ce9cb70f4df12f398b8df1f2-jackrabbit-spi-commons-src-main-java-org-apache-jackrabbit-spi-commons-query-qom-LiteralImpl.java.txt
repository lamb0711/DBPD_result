JCR-2721: Add toString() methods to QOM tree classes

Add toString() methods to the rest of the QOM tree classes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@987315 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.PropertyType;
-            String str = value.getString();
-            if (str.indexOf(' ') != -1) {
-                str = "\"" + str + "\"";
+            switch (value.getType()) {
+            case PropertyType.BINARY:
+                return cast("BINARY");
+            case PropertyType.BOOLEAN:
+                return cast("BOOLEAN");
+            case PropertyType.DATE:
+                return cast("DATE");
+            case PropertyType.DECIMAL:
+                return cast("DECIMAL");
+            case PropertyType.DOUBLE:
+            case PropertyType.LONG:
+                return value.getString();
+            case PropertyType.NAME:
+                return cast("NAME");
+            case PropertyType.PATH:
+                return cast("PATH");
+            case PropertyType.REFERENCE:
+                return cast("REFERENCE");
+            case PropertyType.STRING:
+                return escape();
+            case PropertyType.URI:
+                return cast("URI");
+            case PropertyType.WEAKREFERENCE:
+                return cast("WEAKREFERENCE");
+            default:
+                return escape();
-            return str;
+    private String cast(String type) throws RepositoryException {
+        return "CAST(" + escape() + " AS " + type + ")";
+    }
+    private String escape() throws RepositoryException {
+        return "'" + value.getString().replace("'", "''") + "'";
+    }
