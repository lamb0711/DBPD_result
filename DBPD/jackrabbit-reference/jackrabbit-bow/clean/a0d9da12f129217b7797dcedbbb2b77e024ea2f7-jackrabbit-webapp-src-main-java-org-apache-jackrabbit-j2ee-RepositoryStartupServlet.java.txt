JCR-4229: Remove Oak dependency in webapp

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1820753 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.oak.jcr.Jcr;
-import org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore;
-import org.apache.jackrabbit.oak.plugins.segment.SegmentStore;
-import org.apache.jackrabbit.oak.plugins.segment.file.FileStore;
- * When using the first time, the configuraition can miss the relevant
+ * When using the first time, the configuration can miss the relevant
- * <code>bootstrap-config</code> parameter that referrs to a propertiy file.
- * This file must exsit for proper working. If not, the repository is not
+ * <code>bootstrap-config</code> parameter that refers to a property file.
+ * This file must exist for proper working. If not, the repository is not
- * provide a simple wizard for the first time configuration. It propmpts for
+ * provide a simple wizard for the first time configuration. It prompts for
-     * the TarMK segment store
-     */
-    private SegmentStore store;
-
-    /**
-        if (repConfig != null) { // Jackrabbit Classic
+        if (repConfig != null) {
-        } else { // Jackrabbit Oak
-            try {
-                String model = System.getProperty("sun.arch.data.model", "32");
-                store = new FileStore(repHome, 256, "64".equals(model));
-                repository = new Jcr(new SegmentNodeStore(store)).createRepository();
-            } catch (IOException e) {
-                throw new ServletExceptionWithCause("Error while creating repository", e);
-            }
+        } else {
+            throw new ServletException("Missing configuration");
-        if (store != null) {
-            store.close();
-            store = null;
-        } else if (repository instanceof JackrabbitRepository) {
+        if (repository instanceof JackrabbitRepository) {
