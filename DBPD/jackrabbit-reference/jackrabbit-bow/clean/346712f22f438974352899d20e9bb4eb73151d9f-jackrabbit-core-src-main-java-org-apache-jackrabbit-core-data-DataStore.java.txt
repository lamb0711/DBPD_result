JCR-3534: Efficient copying of binaries across repositories with the same data store

Change getIdentifierFromReference() to getRecordFromReference() to avoid problems with a previously valid reference pointing to a record that has already been removed.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1484444 13f79535-47bb-0310-9956-ffa450edef68

+     * @throws DataStoreException if the data store could not be accessed
-    DataRecord getRecordIfStored(DataIdentifier identifier) throws DataStoreException;
+    DataRecord getRecordIfStored(DataIdentifier identifier)
+            throws DataStoreException;
+     * Returns the record that matches the given binary reference.
+     * Returns {@code null} if the reference is invalid, for example if it
+     * points to a record that does not exist.
+     *
+     * @param reference binary reference
+     * @return matching record, or {@code null}
+     * @throws DataStoreException if the data store could not be accessed
+     */
+    DataRecord getRecordFromReference(String reference)
+        throws DataStoreException;
+
+    /**
-     * Returns the identifier that matches the given binary reference.
-     * If the reference is invalid, returns {@code null}.
-     *
-     * @param reference binary reference
-     * @return matching identifier, or {@code null}
-     */
-    DataIdentifier getIdentifierFromReference(String reference);
-
-    /**
