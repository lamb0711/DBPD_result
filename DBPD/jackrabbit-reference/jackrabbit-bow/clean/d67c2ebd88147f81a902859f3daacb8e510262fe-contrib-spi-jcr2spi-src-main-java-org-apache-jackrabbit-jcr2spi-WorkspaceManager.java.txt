JCR-1020: Use repository service wide namespace cache

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555240 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.jcr2spi.name.NamespaceCache;
-        nsRegistry = createNamespaceRegistry(repositoryDescriptors);
+        nsRegistry = createNamespaceRegistry(NamespaceCache.getInstance(service));
-     * @param descriptors
+     * @param nsCache the namespace cache.
-    private NamespaceRegistryImpl createNamespaceRegistry(Map descriptors) {
-        boolean level2 = Boolean.valueOf((String) descriptors.get(Repository.LEVEL_2_SUPPORTED)).booleanValue();
-        return new NamespaceRegistryImpl(this, level2);
+    private NamespaceRegistryImpl createNamespaceRegistry(NamespaceCache nsCache) {
+        return new NamespaceRegistryImpl(this, nsCache);
