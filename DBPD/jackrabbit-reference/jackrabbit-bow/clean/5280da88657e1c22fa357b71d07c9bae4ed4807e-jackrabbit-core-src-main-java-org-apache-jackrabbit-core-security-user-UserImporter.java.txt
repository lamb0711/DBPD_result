JCR-2635 : Disable Users

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@984395 13f79535-47bb-0310-9956-ffa450edef68

+            } else if (UserConstants.P_DISABLED.equals(propName)) {
+                if (a.isGroup()) {
+                    log.warn("Expected parent node of type rep:User.");
+                    return false;
+                }
+                // minimal validation of the passed definition
+                if (def.isMultiple() || !UserConstants.NT_REP_USER.equals(def.getDeclaringNodeType())) {
+                    // some other unexpected property definition -> cannot handle
+                    log.warn("Unexpected definition for property rep:disabled");
+                    return false;
+                }
+
+                Value v = protectedPropInfo.getValues(PropertyType.STRING, resolver)[0];
+                ((User) a).disable(v.getString());
+
+                return true;
+
