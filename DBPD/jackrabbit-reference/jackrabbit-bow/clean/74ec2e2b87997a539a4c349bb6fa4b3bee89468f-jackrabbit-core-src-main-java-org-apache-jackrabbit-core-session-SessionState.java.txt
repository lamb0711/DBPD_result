JCR-3040 JMX Stats for the Session
 - integration work

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1182466 13f79535-47bb-0310-9956-ffa450edef68

+import static org.apache.jackrabbit.api.stats.RepositoryStatistics.Type;
+
-import org.apache.jackrabbit.core.stats.RepositoryStatistics;
+import org.apache.jackrabbit.core.stats.RepositoryStatisticsImpl;
+    
+    /**
+     * Number of open sessions.
+     */
+    private final AtomicLong sessionCount;
-        RepositoryStatistics statistics =
+        RepositoryStatisticsImpl statistics =
-        statistics.getCounter("login").incrementAndGet();
-        this.readCounter = statistics.getCounter("read");
-        this.writeCounter = statistics.getCounter("write");
-        this.readDuration = statistics.getCounter("read.duration");
-        this.writeDuration = statistics.getCounter("write.duration");
+        this.readCounter = statistics.getCounter(Type.SESSION_READ_COUNTER);
+        this.writeCounter = statistics.getCounter(Type.SESSION_WRITE_COUNTER);
+        this.readDuration = statistics.getCounter(Type.SESSION_READ_DURATION);
+        this.writeDuration = statistics.getCounter(Type.SESSION_WRITE_DURATION);
+        this.sessionCount = statistics.getCounter(Type.SESSION_COUNT);
+        statistics.getCounter(Type.SESSION_LOGIN_COUNTER).incrementAndGet();
+        sessionCount.incrementAndGet();
+                sessionCount.decrementAndGet();
