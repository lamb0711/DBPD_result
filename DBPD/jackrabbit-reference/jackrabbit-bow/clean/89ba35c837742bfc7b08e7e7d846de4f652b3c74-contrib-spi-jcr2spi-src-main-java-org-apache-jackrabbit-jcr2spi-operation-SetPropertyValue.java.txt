work in progress

- purge values array

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@464424 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+import java.util.ArrayList;
-        
+
-    public static Operation create(PropertyState propState, QValue[] iva,
+    public static Operation create(PropertyState propState, QValue[] qValues,
-        SetPropertyValue sv = new SetPropertyValue(propState, valueType, iva);
+        // compact array (purge null entries)
+        List list = new ArrayList();
+        for (int i = 0; i < qValues.length; i++) {
+            if (qValues[i] != null) {
+                list.add(qValues[i]);
+            }
+        }
+        QValue[] cleanValues = (QValue[]) list.toArray(new QValue[list.size()]);
+        SetPropertyValue sv = new SetPropertyValue(propState, valueType, cleanValues);
