JCR-1588 - JSR 283: Access Control (work in progress)
JCR-1590 - JSR 283: Locking
JCR-1915 - Node.setPrimaryNodeType should only redefine child-definitions that are not covered by the new effective nt
JCR-1875 - Failing Node.unlock() might leave inconsistent transient state
JCR-538 - Failing Node.checkin() or Node.checkout() might leave inconsistent transient state

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@732693 13f79535-47bb-0310-9956-ffa450edef68

+        // make sure no abstract privileges are passed.
+        for (int i = 0; i < privileges.length; i++) {
+            if (privileges[i].isAbstract()) {
+                throw new AccessControlException("Privilege " + privileges[i] + " is abstract.");
+            }
+        }
-        this.privilegeBits = PrivilegeRegistry.getBits(privileges);;
+        this.privilegeBits = PrivilegeRegistry.getBits(privileges);
+     * @return the int representation of the privileges defined for this entry.
+     */
+    public int getPrivilegeBits() {
+        return privilegeBits;
+    }
+
+    /**
-     * @see JackrabbitAccessControlEntry#getPrivilegeBits()
-     */
-    public int getPrivilegeBits() {
-        return privilegeBits;
-    }
-
-    /**
-     * Returns true if the principal and all privileges are equal / the same.
-     *
-     * @param obj
-     * @return
