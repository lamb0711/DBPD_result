JCR-2741: Improved logging for session operations

Postpone the SessionOperation.toString() calls to as late as possible.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@995034 13f79535-47bb-0310-9956-ffa450edef68

-        LogState logState = new LogState(
-                "jcr.session", context.toString(),
-                "jcr.operation", operation.toString());
+        LogState logState =
+            new LogState("jcr.session", context, "jcr.operation", operation);
-        LogState logState = new LogState(
-                "jcr.session", context.toString(),
-                "jcr.operation", "close()");
+        LogState logState =
+            new LogState("jcr.session", context, "jcr.operation", "close()");
-        private final String[] keyValuePairs;
+        private final Object[] keyValuePairs;
-        public LogState(String... keyValuePairs) {
+        public LogState(Object... keyValuePairs) {
-                if (MDC.get(keyValuePairs[i]) == null) {
-                    MDC.put(keyValuePairs[i], keyValuePairs[i + 1]);
+                String key = keyValuePairs[i].toString();
+                if (MDC.get(key) == null) {
+                    MDC.put(key, keyValuePairs[i + 1].toString());
-                    MDC.remove(keyValuePairs[i]);
+                    MDC.remove(keyValuePairs[i].toString());
