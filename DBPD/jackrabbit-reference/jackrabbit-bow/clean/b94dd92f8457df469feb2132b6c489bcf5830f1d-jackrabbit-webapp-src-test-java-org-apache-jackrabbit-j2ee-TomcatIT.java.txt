JCR-4242: Build failure: unapproved license



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1820133 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.BufferedWriter;
+import java.nio.charset.StandardCharsets;
+import java.util.List;
+import com.google.common.io.Files;
+        rewriteWebXml(war);
-        RepositoryAccessServlet.bootstrapOverride = bootstrap.getPath();
-        RepositoryStartupServlet.bootstrapOverride = bootstrap.getPath();
+    private void rewriteWebXml(File war) throws IOException {
+        File webXml = new File(war, new File("WEB-INF","web.xml").getPath());
+        assertTrue(webXml.exists());
+        List<String> lines = Files.readLines(webXml, StandardCharsets.UTF_8);
+        BufferedWriter writer = Files.newWriter(webXml, StandardCharsets.UTF_8);
+        try {
+            for (String line : lines) {
+                line = line.replace("<param-value>jackrabbit/bootstrap.properties</param-value>",
+                        "<param-value>target/bootstrap.properties</param-value>");
+                writer.write(line);
+                writer.write(System.lineSeparator());
+            }
+        } finally {
+            writer.close();
+        }
+    }
+
