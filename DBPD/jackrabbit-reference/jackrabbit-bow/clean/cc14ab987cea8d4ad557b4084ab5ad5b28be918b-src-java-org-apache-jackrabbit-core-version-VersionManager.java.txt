- fixing problem with virtual overlay
- fixing PersistentNode issue described in JCR-15 [PersistentNode.store() ignores status when storing]

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@56421 13f79535-47bb-0310-9956-ffa450edef68

+     * @param rootId the uuid of the version history root
-                NodeState rootState = (NodeState) base.getItemState(new NodeId(rootId));
-                virtProvider = new DefaultItemStateProvider(vMgr.getNodeTypeManager(), rootState);
-                historyRoot = virtProvider.addNode(virtProvider.getRootState(), VERSION_HISTORY_ROOT_NAME, null, NodeTypeRegistry.NT_UNSTRUCTURED, null);
+                virtProvider = new DefaultItemStateProvider(vMgr.getNodeTypeManager());
+                // create a duplicate of the version history root name
+                NodeState virtRootState = (NodeState) base.getItemState(new NodeId(rootId));
+                historyRoot = virtProvider.addOverlay(virtRootState);
