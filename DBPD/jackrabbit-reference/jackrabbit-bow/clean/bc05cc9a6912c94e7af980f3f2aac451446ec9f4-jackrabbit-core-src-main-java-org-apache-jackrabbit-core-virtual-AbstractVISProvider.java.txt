JCR-1775: Transaction-safe versioning

Modified the NodeTypeRegistry.getEffectiveNodeType method to simplify calling code that always starts with the primary type name and a set of mixin types.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@701127 13f79535-47bb-0310-9956-ffa450edef68

-        // build effective node type of mixins & primary type
-        NodeTypeRegistry ntReg = getNodeTypeRegistry();
-        // existing mixin's
-        HashSet set = new HashSet(parent.getMixinTypeNames());
-        // primary type
-        set.add(parent.getNodeTypeName());
-            return ntReg.getEffectiveNodeType((Name[]) set.toArray(new Name[set.size()]));
+            NodeTypeRegistry ntReg = getNodeTypeRegistry();
+            return ntReg.getEffectiveNodeType(
+                    parent.getNodeTypeName(), parent.getMixinTypeNames());
