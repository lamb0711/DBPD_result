work in progress

- remove NodeState.getPropertyId and replace by getPropertyState
- use ChildNodeEntry.getNodeState
- consequently remove utility methods getNodeState, getPropertyState on
  ItemStateValidator, that converted ItemStateExceptions to RepositoryExc.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429269 13f79535-47bb-0310-9956-ffa450edef68

-                labelNodeState = (NodeState) itemStateMgr.getItemState(lnEntry.getId());
+                labelNodeState = lnEntry.getNodeState();
-            PropertyId pId = labelNodeState.getPropertyId(qLabel);
-            Node version = ((Property) itemMgr.getItem(pId)).getNode();
-            return (NodeId) session.getHierarchyManager().getItemId(version);
+            try {
+                PropertyId pId = labelNodeState.getPropertyState(qLabel).getPropertyId();
+                Node version = ((Property) itemMgr.getItem(pId)).getNode();
+                return (NodeId) session.getHierarchyManager().getItemId(version);
+            } catch (ItemStateException e) {
+                // should not occur. existance of property state has been checked
+                throw new RepositoryException(e);
+            }
