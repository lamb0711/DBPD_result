JCR-256: Improve jcr decorator in jcr-ext
- added decoration for all required jcr interfaces
- added more factory methods to DecoratorFactory
- renamed SimpleDecoratorFactory to DefaultDecoratorFactory
- removed ChainedDecoratorFactory and ChainedItemDecorator
- added sample decorator: TrussDecoratorFactory

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@326437 13f79535-47bb-0310-9956-ffa450edef68

-public class WorkspaceDecorator implements Workspace {
-
-    /** The decorator factory. */
-    private final DecoratorFactory factory;
-
-    /** The session (decorator) instance. */
-    private final Session session;
+public class WorkspaceDecorator extends AbstractDecorator implements Workspace {
-    private final Workspace workspace;
+    protected final Workspace workspace;
-        this.factory = factory;
-        this.session = session;
+        super(factory, session);
-        workspace.restore(versions, removeExisting);
+        Version[] tmp = new Version[versions.length];
+        for (int i = 0; i < versions.length; i++) {
+            tmp[i] = VersionDecorator.unwrap(versions[i]);
+        }
+        workspace.restore(tmp, removeExisting);
-        return workspace.getQueryManager();
+        return factory.getQueryManagerDecorator(session, workspace.getQueryManager());
