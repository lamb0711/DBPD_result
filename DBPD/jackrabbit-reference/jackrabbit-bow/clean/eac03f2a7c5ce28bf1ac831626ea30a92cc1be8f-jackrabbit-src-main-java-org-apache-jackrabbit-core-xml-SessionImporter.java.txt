improved handling of (potentially large) binary data on import

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@345037 13f79535-47bb-0310-9956-ffa450edef68

-                    // deserialize BINARY type using Reader
-                        Reader reader = tv.reader();
-                        va[i] = ValueHelper.deserialize(reader, targetType, false);
+                        if (tv.length() < 0x10000) {
+                            // < 65kb: deserialize BINARY type using String
+                            va[i] = ValueHelper.deserialize(tv.retrieve(), targetType, false);
+                        } else {
+                            // >= 65kb: deserialize BINARY type using Reader
+                            Reader reader = tv.reader();
+                            try {
+                                va[i] = ValueHelper.deserialize(reader, targetType, false);
+                            } finally {
+                                reader.close();
+                            }
+                        }
