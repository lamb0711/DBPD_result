Refactoring step 3 (JCR-53)
 - Moved workspace.xml parsing to ConfigurationParser
 - Replaced createFileSystem with BeanConfig code
 - Added a TestAll suite for the config package

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@156058 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
+import java.util.List;
+import org.apache.commons.collections.BeanMap;
+import org.apache.jackrabbit.core.fs.FileSystem;
+import org.jdom.Element;
+
+    protected BeanConfig(BeanConfig config) {
+        this(config.getClassName(), config.getParameters());
+    }
+
+    public Object newInstance()
+            throws ClassNotFoundException, InstantiationException,
+            IllegalAccessException {
+        Object object = Class.forName(className).newInstance();
+        BeanMap map = new BeanMap(object);
+        Iterator iterator = map.keyIterator();
+        while (iterator.hasNext()) {
+            String name = (String) iterator.next();
+            if (properties.containsKey(name)) {
+                map.put(name, properties.getProperty(name));
+            }
+        }
+        return object;
+    }
+
