JCR-718: NoSuchItemStateException on removing node (no versioning)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@507601 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.NamespaceResolver;
+     * namespace resolver for resolving namesapces in qualified paths
+     */
+    private final NamespaceResolver nsResolver;
+
+    /**
-     * @param homeDir the physical home directory
-     * @param fs      the virtual jackrabbit filesystem
-     * @param subject subject whose access rights should be reflected
-     * @param hierMgr hierarchy manager
-     * @param hierMgr workspace name
+     * @param physicalHomeDir the physical home directory
+     * @param fs              the virtual jackrabbit filesystem
+     * @param subject         subject whose access rights should be reflected
+     * @param hierMgr         hierarchy manager
+     * @param nsResolver      namespace resolver
+     * @param workspaceName   workspace name
-    public AMContext(File homeDir,
+    public AMContext(File physicalHomeDir,
+                     NamespaceResolver nsResolver,
-        this.physicalHomeDir = homeDir;
+        this.physicalHomeDir = physicalHomeDir;
+        this.nsResolver = nsResolver;
+     * Returns the namespace resolver
+     *
+     * @return the namespace resolver
+     */
+    public NamespaceResolver getNamespaceResolver() {
+        return nsResolver;
+    }
+
+    /**
