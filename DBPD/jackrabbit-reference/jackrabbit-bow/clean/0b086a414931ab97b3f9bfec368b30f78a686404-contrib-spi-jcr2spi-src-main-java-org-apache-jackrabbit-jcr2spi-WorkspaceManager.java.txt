SPI: only create event polling thread if observation is supported by repository service.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@498615 13f79535-47bb-0310-9956-ffa450edef68

-        Thread t = new Thread(new ChangePolling(pollingInterval));
-        t.setName("Change Polling");
-        t.setDaemon(true);
-        t.start();
+        Thread t = null;
+        try {
+            String desc = (String) service.getRepositoryDescriptors().get(
+                    Repository.OPTION_OBSERVATION_SUPPORTED);
+            if ("true".equals(desc)) {
+                t = new Thread(new ChangePolling(pollingInterval));
+                t.setName("Change Polling");
+                t.setDaemon(true);
+                t.start();
+            }
+        } catch (RepositoryException e) {
+            log.warn("Unable to get repository descriptors: " + e);
+        }
