JCR-3345: ACL evaluation may return non-fresh results

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1357265 13f79535-47bb-0310-9956-ffa450edef68

-            if (segment.containsKey(id)) {
+            ItemState s = segment.put(id, state);
+            // overwriting the same instance is OK
+            if (s != null && s != state) {
-            segment.put(id, state);
