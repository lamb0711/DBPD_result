Move method SessionItemStateManager.collectOperations() to ChangeLog.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@433611 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Populates this <code>ChangeLog</code> with operations that are within the
+     * scope of this change set.
+     *
+     * @param operations an Iterator of <code>Operation</code>s which are the
+     *                   candidates to be included in this <code>ChangeLog</code>.
+     */
+    public void collectOperations(Iterator operations) {
+        Set affectedStates = new HashSet();
+        affectedStates.addAll(deletedStates);
+        affectedStates.addAll(modifiedStates);
+        while (operations.hasNext()) {
+            Operation op = (Operation) operations.next();
+            Iterator states = op.getAffectedItemStates().iterator();
+            while (states.hasNext()) {
+                ItemState state = (ItemState) states.next();
+                if (affectedStates.contains(state)) {
+                    addOperation(op);
+                    break;
+                }
+            }
+        }
+    }
+
+
