USe java 1.5 and generics where possible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@810703 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Value;
-import java.util.Iterator;
-            for (Iterator it = s.getSubject().getPrincipals().iterator(); it.hasNext();) {
-                Principal princ = (Principal) it.next();
+            for (Principal princ : s.getSubject().getPrincipals()) {
-                    for (int i = 0; i < policies.length; i++) {
-                        if (policies[i] instanceof ACLTemplate) {
+                    for (AccessControlPolicy policy : policies) {
+                        if (policy instanceof ACLTemplate) {
-                    for (int i = 0; i < policies.length; i++) {
-                        if (policies[i] instanceof ACLTemplate) {
+                    for (AccessControlPolicy policy : policies) {
+                        if (policy instanceof ACLTemplate) {
-    static JackrabbitAccessControlList getPolicy(AccessControlManager acM, String path, Principal principal) throws RepositoryException,
-            AccessDeniedException, NotExecutableException {
+    static JackrabbitAccessControlList getPolicy(AccessControlManager acM,
+                                                 String path,
+                                                 Principal principal)
+            throws RepositoryException, AccessDeniedException, NotExecutableException {
-            for (int i = 0; i < policies.length; i++) {
-                if (policies[i] instanceof ACLTemplate) {
-                    ACLTemplate acl = (ACLTemplate) policies[i];
-                    return acl;
+            for (AccessControlPolicy policy : policies) {
+                if (policy instanceof ACLTemplate) {
+                    return (ACLTemplate) policy;
-            for (int i = 0; i < policies.length; i++) {
-                if (policies[i] instanceof ACLTemplate) {
-                    ACLTemplate acl = (ACLTemplate) policies[i];
-                    return acl;
+            for (AccessControlPolicy policy : policies) {
+                if (policy instanceof ACLTemplate) {
+                    return (ACLTemplate) policy;
-    static  Map getRestrictions(Session s, String path) throws RepositoryException, NotExecutableException {
+    static  Map<String, Value> getRestrictions(Session s, String path) throws RepositoryException, NotExecutableException {
-            Map restr = new HashMap();
+            Map<String, Value> restr = new HashMap<String, Value>();
