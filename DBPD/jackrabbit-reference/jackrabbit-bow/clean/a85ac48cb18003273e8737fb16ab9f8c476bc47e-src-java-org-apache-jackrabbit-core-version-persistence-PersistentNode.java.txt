- fixing some versioning persistence problems

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@124540 13f79535-47bb-0310-9956-ffa450edef68

-    protected PropertyState[] getProperties() {
-        try {
-            List list = nodeState.getPropertyEntries();
-            PropertyState[] props = new PropertyState[list.size()];
-            for (int i = 0; i < list.size(); i++) {
-                NodeState.PropertyEntry entry = (NodeState.PropertyEntry) list.get(i);
-                PropertyId propId = new PropertyId(nodeState.getUUID(), entry.getName());
-                props[i] = (PropertyState) stateMgr.getItemState(propId);
-            }
-            return props;
-        } catch (ItemStateException e) {
-            return null;
+    protected PropertyState[] getProperties() throws ItemStateException {
+        List list = nodeState.getPropertyEntries();
+        PropertyState[] props = new PropertyState[list.size()];
+        for (int i = 0; i < list.size(); i++) {
+            NodeState.PropertyEntry entry = (NodeState.PropertyEntry) list.get(i);
+            PropertyId propId = new PropertyId(nodeState.getUUID(), entry.getName());
+            props[i] = (PropertyState) stateMgr.getItemState(propId);
+        return props;
-                propState.setStatus(ItemState.STATUS_EXISTING_MODIFIED);
+                if (propState.getStatus()==ItemState.STATUS_EXISTING) {
+                    propState.setStatus(ItemState.STATUS_EXISTING_MODIFIED);
+                }
