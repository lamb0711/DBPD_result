JCR-2640: Internal repository context

Streamline namespace and node type registry creation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948818 13f79535-47bb-0310-9956-ffa450edef68

-            // setup file systems
-            FileSystem repStore = repConfig.getFileSystem();
-            context.setFileSystem(repStore);
+            context.setFileSystem(repConfig.getFileSystem());
-            context.setNamespaceRegistry(createNamespaceRegistry(
-                    new BasedFileSystem(repStore, "/namespaces")));
-            context.setNodeTypeRegistry(createNodeTypeRegistry(
-                    new BasedFileSystem(repStore, "/nodetypes")));
+            context.setNamespaceRegistry(
+                    new NamespaceRegistryImpl(context.getFileSystem()));
+            context.setNodeTypeRegistry(new NodeTypeRegistry(
+                    context.getNamespaceRegistry(), context.getFileSystem()));
-     * Creates the <code>NamespaceRegistry</code> instance.
-     *
-     * @param fs
-     * @return
-     * @throws RepositoryException
-     */
-    protected NamespaceRegistryImpl createNamespaceRegistry(FileSystem fs)
-            throws RepositoryException {
-        return new NamespaceRegistryImpl(fs);
-    }
-
-    /**
-     * Creates the <code>NodeTypeRegistry</code> instance.
-     *
-     * @param fs
-     * @return
-     * @throws RepositoryException
-     */
-    protected NodeTypeRegistry createNodeTypeRegistry(FileSystem fs)
-            throws RepositoryException {
-        return NodeTypeRegistry.create(context.getNamespaceRegistry(), fs);
-    }
-
-    /**
