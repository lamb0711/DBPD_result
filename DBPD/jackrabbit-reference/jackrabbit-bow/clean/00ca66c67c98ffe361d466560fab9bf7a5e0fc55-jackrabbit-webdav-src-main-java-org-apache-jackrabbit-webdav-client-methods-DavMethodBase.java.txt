JCR-1571: DavMethodBase#getResponseException fails if the body is not (valid) XML

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@656685 13f79535-47bb-0310-9956-ffa450edef68

+import org.xml.sax.helpers.DefaultHandler;
-	super(uri);
+        super(uri);
-        } else {
+        }
+
+        InputStream in = getResponseBodyAsStream();
+        if (in != null) {
-            InputStream in = getResponseBodyAsStream();
-            if (in == null) {
-                return null;
-            }
+                docBuilder.setErrorHandler(new DefaultHandler());
+        // no body or no parseable.
+        return null;
-	checkUsed();
-	if (success) {
+        checkUsed();
+        if (success) {
-	    log.warn(msg);
-	    throw new IllegalStateException(msg);
-	}
+            log.warn(msg);
+            throw new IllegalStateException(msg);
+        }
-        Element responseRoot = getRootElement();
+        Element responseRoot = null;
+        try  {
+            responseRoot = getRootElement();
+        } catch (IOException e) {
+            // unparsable body -> use null element
+        }
-     * @return
+     * @return true if the specified status code corresponds to a successfully
+     * completed request.
-     *
-     * @return
+     * @return true if this method was successfully executed; false otherwise.
