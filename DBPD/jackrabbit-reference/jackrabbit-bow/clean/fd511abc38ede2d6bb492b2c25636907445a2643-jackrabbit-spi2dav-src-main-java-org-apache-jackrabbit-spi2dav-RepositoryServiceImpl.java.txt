JCR-3054: Deprecate RepositoryService.getPropertyInfo method

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1159182 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.commons.iterator.Iterators;
-    public Iterator<? extends ItemInfo> getItemInfos(SessionInfo sessionInfo, NodeId nodeId) throws RepositoryException {
+    public Iterator<? extends ItemInfo> getItemInfos(SessionInfo sessionInfo, ItemId itemId) throws RepositoryException {
-        List<ItemInfo> l = new ArrayList<ItemInfo>();
-        NodeInfo nInfo = getNodeInfo(sessionInfo, nodeId);
-        l.add(nInfo);
-        // at least add propertyInfos for the meta-props already known from the
-        // nodeInfo.
-        l.addAll(buildPropertyInfos(nInfo));
-        return l.iterator();
+        if (itemId.denotesNode()) {
+            List<ItemInfo> l = new ArrayList<ItemInfo>();
+            NodeInfo nInfo = getNodeInfo(sessionInfo, (NodeId) itemId);
+            l.add(nInfo);
+            // at least add propertyInfos for the meta-props already known from the
+            // nodeInfo.
+            l.addAll(buildPropertyInfos(nInfo));
+            return l.iterator();
+        }
+        else {
+            PropertyInfo pInfo = getPropertyInfo(sessionInfo, (PropertyId) itemId);
+            return Iterators.singleton(pInfo);
+        }
