Some performance improvements
- Reuse Matcher instance in a threadlocal
- avoid string creation in QName.compareTo()

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@292691 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Matcher instance as thread-local.
+     */
+    private static final ThreadLocal NAME_MATCHER = new ThreadLocal() {
+        protected Object initialValue() {
+            return NAME_PATTERN.matcher("dummy");
+        }
+    };
+
-        Matcher matcher = NAME_PATTERN.matcher(jcrName);
+
+        Matcher matcher = (Matcher) NAME_MATCHER.get();
+        matcher.reset(jcrName);
-        return toString().compareTo(((QName) o).toString());
+        QName other = (QName) o;
+        int result = namespaceURI.compareTo(other.namespaceURI);
+        return (result != 0) ? result : localName.compareTo(other.localName);
