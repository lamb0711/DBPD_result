JCR-2102 getAllLinearVersions does not return the base version


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@783523 13f79535-47bb-0310-9956-ffa450edef68

-    public VersionIteratorImpl(Session session, InternalVersion rootVersion, InternalVersion baseVersion) {
+    public VersionIteratorImpl(Session session, InternalVersion rootVersion,
+                               InternalVersion baseVersion) {
-            initVersions(rootVersion);
+            collectAllVersions(rootVersion);
-            initVersions(rootVersion, baseVersion);
+            collectLinearVersions(baseVersion);
-    private synchronized void initVersions(InternalVersion root) {
+    private synchronized void collectAllVersions(InternalVersion root) {
-     * Adds all versions of a single line of decent starting from <code>root</code>
-     * and ending at <code>base</code>.
+     * Adds all versions of a single line of decent starting from the root
+     * version to the <code>base</code> version.
-     * @param root the root version
-    private synchronized void initVersions(InternalVersion root, InternalVersion base) {
-        NodeId rootId = root == null ? null : root.getId();
-        while (base != null && !base.getId().equals(rootId)) {
+    private synchronized void collectLinearVersions(InternalVersion base) {
+        while (base != null) {
