JCR-996 Name and Path interfaces in SPI
JCR-1169 Distribution of commons classes


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@586065 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NameException;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.NameFormat;
-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.Path;
-import org.apache.jackrabbit.name.MalformedPathException;
+import org.apache.jackrabbit.conversion.NameException;
+import org.apache.jackrabbit.name.NameConstants;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.Path;
-    private final QName qName;
+    private final Name qName;
-    private final QName primaryNodeTypeName;
-    private final QName[] mixinNodeTypeNames;
+    private final Name primaryNodeTypeName;
+    private final Name[] mixinNodeTypeNames;
-                        NamespaceResolver nsResolver) throws RepositoryException, MalformedPathException {
-        super(parentId, propSet, nsResolver);
+                        NamePathResolver resolver) throws RepositoryException, NameException {
+        super(parentId, propSet, resolver);
-                    qName = NameFormat.parse(jcrName, nsResolver);
+                    qName = resolver.getQName(jcrName);
-                qName = QName.ROOT;
+                qName = NameConstants.ROOT;
-            Path.PathElement el = id.getPath().getNameElement();
-            qName = (Path.ROOT_ELEMENT == el) ? QName.ROOT : el.getName();
+            Path.Element el = id.getPath().getNameElement();
+            qName = (el.denotesRoot()) ? NameConstants.ROOT : el.getName();
-                    primaryNodeTypeName = NameFormat.parse(jcrName, nsResolver);
+                    primaryNodeTypeName = resolver.getQName(jcrName);
-                mixinNodeTypeNames = new QName[mixinNames.size()];
+                mixinNodeTypeNames = new Name[mixinNames.size()];
-                    mixinNodeTypeNames[i] = NameFormat.parse(jcrName, nsResolver);
+                    mixinNodeTypeNames[i] = resolver.getQName(jcrName);
-                mixinNodeTypeNames = QName.EMPTY_ARRAY;
+                mixinNodeTypeNames = Name.EMPTY_ARRAY;
-    public QName getQName() {
+    public Name getName() {
-    public QName getNodetype() {
+    public Name getNodetype() {
-    public QName[] getMixins() {
+    public Name[] getMixins() {
