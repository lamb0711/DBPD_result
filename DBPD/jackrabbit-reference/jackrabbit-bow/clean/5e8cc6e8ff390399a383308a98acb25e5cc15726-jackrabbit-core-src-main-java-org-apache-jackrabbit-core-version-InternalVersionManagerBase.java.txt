JCR-3507 add ability to remove version history objects from the version storage via the internal version management API

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1440917 13f79535-47bb-0310-9956-ffa450edef68

+     * Removes the specified history from the storage
+     *
+     * @param history the version history to remove
+     * @throws VersionException
+     * @throws RepositoryException
+     */
+    public void internalRemoveVersionHistory(InternalVersionHistoryImpl history)
+            throws VersionException, RepositoryException {
+        String versionableUuid = history.getVersionableId().toString();
+        WriteOperation operation = startWriteOperation();
+        try {
+            NodeStateEx parent = getParentNode(getHistoryRoot(), versionableUuid, null);
+            parent.removeNode(history.node.getName());
+            parent.store();
+            operation.save();
+        } catch (ItemStateException e) {
+            log.error("Error while storing: " + e.toString());
+        } finally {
+            operation.close();
+        }
+    }
+
+    /**
