JCR-2029: JCR Remoting: Use DAV:lockroot to expose the lock-holding node

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1497492 13f79535-47bb-0310-9956-ffa450edef68

-        if (activeLock.isDeep() && parentId != null) {
-            // try if lock is inherited
+
+        NodeId holder = null;
+        String lockroot = activeLock.getLockroot();
+        if (activeLock.getLockroot() != null) {
+            holder = uriResolver.getNodeId(lockroot, sessionInfo);
+        }
+
+        if (activeLock.isDeep() && holder == null && parentId != null) {
+            // deep lock, parent known, but holder is not
-        // no deep lock or parentID == null or lock is not present on parent
-        // -> nodeID is lockHolding Id.
-        return new LockInfoImpl(activeLock, nodeId, ((SessionInfoImpl)sessionInfo).getAllLockTokens());
+        return new LockInfoImpl(activeLock, holder == null ? nodeId : holder, ((SessionInfoImpl)sessionInfo).getAllLockTokens());
