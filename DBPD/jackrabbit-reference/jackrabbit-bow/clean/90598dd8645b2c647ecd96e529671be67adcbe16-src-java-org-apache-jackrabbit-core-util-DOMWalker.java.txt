Fix namespace-related issues that appear in some configurations by using DocumentBuilder rather than an identity transform

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@169281 13f79535-47bb-0310-9956-ffa450edef68

+import javax.xml.parsers.DocumentBuilder;
+import javax.xml.parsers.DocumentBuilderFactory;
+import javax.xml.parsers.ParserConfigurationException;
+import org.xml.sax.SAXException;
-    private static final TransformerFactory factory =
-        TransformerFactory.newInstance();
+//    private static final TransformerFactory factory =
+//        TransformerFactory.newInstance();
+    private static final DocumentBuilderFactory factory =
+        DocumentBuilderFactory.newInstance();
-            DOMResult result = new DOMResult();
-            Transformer transformer = factory.newTransformer();
-            transformer.transform(new StreamSource(xml), result);
-            document = (Document) result.getNode();
+            DocumentBuilder builder = factory.newDocumentBuilder();
+            document = builder.parse(xml);
-        } catch (TransformerException e) {
-            throw new IOException(e.getMessage());
+        } catch (IOException e) {
+            throw e;
+        } catch (Exception e) {
+            throw (IOException)new IOException(e.getMessage()).initCause(e);
