JCR-258 - remove JDOM dependency from jcr-server contribution
JCR-295 - usage of Cache-Control header 
JCR-297 - log output while parsing xml
minor consistency issues and improvements

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368683 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.webdav.property.DefaultDavProperty;
-import org.jdom.Element;
+import org.apache.jackrabbit.webdav.property.AbstractDavProperty;
+import org.apache.jackrabbit.webdav.xml.DomUtil;
+import org.w3c.dom.Element;
+import org.w3c.dom.Document;
-public class SupportedMethodSetProperty extends DefaultDavProperty implements DeltaVConstants {
+public class SupportedMethodSetProperty extends AbstractDavProperty implements DeltaVConstants {
+    private final String[] methods;
+
-        super(DeltaVConstants.SUPPORTED_METHOD_SET, new Element[methods.length], true);
-
-        // fill the array with the proper elements
-        Element[] value = (Element[]) getValue();
-        for (int i = 0; i < methods.length; i++) {
-            Element methodElem = new Element(DeltaVConstants.XML_SUPPORTED_METHOD, DeltaVConstants.NAMESPACE);
-            methodElem.setAttribute("name",methods[i], DeltaVConstants.NAMESPACE);
-            value[i] = methodElem;
-        }
+        super(DeltaVConstants.SUPPORTED_METHOD_SET, true);
+        this.methods = methods;
+
+    public Object getValue() {
+        return methods;
+    }
+
+    /**
+     * @see org.apache.jackrabbit.webdav.xml.XmlSerializable#toXml(Document)
+     * @param document
+     */
+    public Element toXml(Document document) {
+        Element elem = getName().toXml(document);
+        for (int i = 0; i < methods.length; i++) {
+            Element methodElem = DomUtil.addChildElement(elem, XML_SUPPORTED_METHOD, DeltaVConstants.NAMESPACE);
+            DomUtil.setAttribute(methodElem, "name", DeltaVConstants.NAMESPACE, methods[i]);
+        }
+        return elem;
+    }
+
