JCR-92 - Change defaultValues format in NodeTypes XML to jcr value

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159678 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
-    protected void write() {
+    protected void write() throws RepositoryException {
-            def.setValueConstraints(
-                    (ValueConstraint[]) vector.toArray(new ValueConstraint[0]));
+            def.setValueConstraints((ValueConstraint[])
+                    vector.toArray(new ValueConstraint[vector.size()]));
-                values.add(constraints[i].getDefinition());
+                values.add(constraints[i].getDefinition(getNamespaceResolver()));
-    private void readDefaultValues() {
+    private void readDefaultValues() throws InvalidNodeTypeDefException {
-                vector.add(InternalValue.valueOf(defaults[i], type));
+                try {
+                    vector.add(InternalValue.create(defaults[i], type, getNamespaceResolver()));
+                } catch (RepositoryException e) {
+                    throw new InvalidNodeTypeDefException(e);
+                }
-            def.setDefaultValues(
-                    (InternalValue[]) vector.toArray(new InternalValue[0]));
+            def.setDefaultValues((InternalValue[])
+                    vector.toArray(new InternalValue[vector.size()]));
-    private void writeDefaultValues() {
+    private void writeDefaultValues() throws RepositoryException {
-                values.add(defaults[i].toString());
+                values.add(defaults[i].toJCRValue(getNamespaceResolver()).getString());
