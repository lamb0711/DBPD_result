SPI:
- remove ItemStateFactory parameter from resolve methods
- add create[Node|Property]State methods to ItemStateFactory which take a parent NodeState
- use PropertyReference in NodeState instead of plain property QNames
- add getNodeState() and getPropertyState() on NodeState for state traversal

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@426582 13f79535-47bb-0310-9956-ffa450edef68

+     * The item state factory to create the the item state.
+     */
+    protected final ItemStateFactory isf;
+
+    /**
-     * @param name      the name of the child item.
+     * @param name   the name of the child item.
+     * @param isf    the item state factory to create the item state.
-    public ChildItemReference(NodeState parent, QName name) {
+    public ChildItemReference(NodeState parent, QName name, ItemStateFactory isf) {
+        this.isf = isf;
-     * @param ism the item state manager to access already created / known
-     *            <code>ItemState</code>s.
-    public ItemState resolve(ItemStateFactory isf, ItemStateManager ism)
+    public ItemState resolve(ItemStateFactory isf)
-        ItemState state = doResolve(isf, ism);
+        ItemState state = doResolve();
-     * @param isf the item state factory responsible for creating node states.
-     * @param ism the item state manager to access already created / known
-     *            <code>ItemState</code>s.
-    protected abstract ItemState doResolve(ItemStateFactory isf,
-                                           ItemStateManager ism)
+    protected abstract ItemState doResolve()
