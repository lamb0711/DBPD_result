JCR-2762: Optimize bundle serialization

Since practically all of the names in the standard JCR namespaces are already included in BundleNames, we can use the namespace index field more efficiently to avoid duplicate serialization of most custom namespace URIs.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1022486 13f79535-47bb-0310-9956-ffa450edef68

+     * The default namespace and the first six other namespaces used in this
+     * bundle. Used by the {@link #readName()} method to keep track of
+     * already seen namespaces.
+     */
+    private final String[] namespaces =
+        // NOTE: The length of this array must be seven
+        { Name.NS_DEFAULT_URI, null, null, null, null, null, null };
+
+    /**
-            if (ns != 0x07) {
-                uri = BundleNames.indexToNamespace(ns);
+            if (ns < namespaces.length && namespaces[ns] != null) {
+                uri = namespaces[ns];
+                if (ns < namespaces.length) {
+                    namespaces[ns] = uri;
+                }
