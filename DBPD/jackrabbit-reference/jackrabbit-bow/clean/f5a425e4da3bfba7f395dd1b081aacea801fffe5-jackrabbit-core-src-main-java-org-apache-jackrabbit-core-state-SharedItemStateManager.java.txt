JCR-2272: Errors during concurrent session import of nodes with same UUIDs

Patch by Julian Reschke

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/branches/JCR-2272@1173166 13f79535-47bb-0310-9956-ffa450edef68

+                    if (state.isNode() && state.getStatus() != ItemState.STATUS_NEW) {
+                        // another node with same id had been created
+                        // in the meantime, probably caused by mid-air collision
+                        // of concurrent versioning operations (JCR-2272)
+                        String msg = state.getId()
+                                + " has been created externally  (status "
+                                + state.getStatus() + ")";
+                        log.debug(msg);
+                        throw new StaleItemStateException(msg);
+                    }
