JCR-676 Participation of a workspace in a cluster should be configurable
+ Allow derived implementations of SharedItemStateManager


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@487178 13f79535-47bb-0310-9956-ffa450edef68

-            sharedStateMgr =
-                    new VersionItemStateManager(pMgr, rootId, ntReg, cacheFactory);
+            sharedStateMgr = createSharedStateManager(pMgr, rootId, ntReg, cacheFactory);
+     * Creates a <code>SharedItemStateManager</code> or derivative.
+     *
+     * @param pMgr          persistence manager
+     * @param rootId        root node id
+     * @param ntReg         node type registry
+     * @param cacheFactory  cache factory
+     * @return item state manager
+     * @throws ItemStateException if an error occurs
+     */
+    protected SharedItemStateManager createSharedStateManager(PersistenceManager pMgr,
+                                                              NodeId rootId,
+                                                              NodeTypeRegistry ntReg,
+                                                              ItemStateCacheFactory cacheFactory)
+            throws ItemStateException {
+
+        return new VersionItemStateManager(pMgr, rootId, ntReg, cacheFactory);
+    }
+
+    /**
