JCR-3445: Make sure setValidationQueryTimeout is not called on non complient jdbc drivers (eg postgresql)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1415574 13f79535-47bb-0310-9956-ffa450edef68

+import java.sql.Driver;
+        	Driver instance = null;
-                driverClass.newInstance();
+                instance = (Driver) driverClass.newInstance();
-
+            if (instance != null) {
+                if (instance.jdbcCompliant()) {
+                	// JCR-3445 At the moment the PostgreSQL isn't compliant because it doesn't implement this method...                	
+                    ds.setValidationQueryTimeout(3);
+                }
+            }
-        try {
-            // JCR-3445 At the moment the PostgreSQL driver doesn't implement this method...
-            ds.setValidationQueryTimeout(3);
-        } catch (Exception e) {
-            log.info("Unable to set the validation query timeout on the datasource: " + e.getMessage());
-        }
