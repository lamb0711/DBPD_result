JCR-1547: JCR2SPI: remove dependency to state-package within nodetype package

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@650514 13f79535-47bb-0310-9956-ffa450edef68

-            definition = definitionProvider.getQPropertyDefinition(this);
+            /*
+            Don't pass 'all-nodetypes from parent':
+            for NEW-states the definition is always set upon creation.
+            for all other states the definion must be retrieved only taking
+            the effective nodetypes present on the parent into account
+            any kind of transiently added mixins must not have an effect
+            on the definition retrieved for an state that has been persisted
+            before. The effective NT must be evaluated as if it had been
+            evaluated upon creating the workspace state.
+            */
+            definition = definitionProvider.getQPropertyDefinition(getParent().getNodeTypeNames(), getName(), getType(), multiValued, ((PropertyEntry) getHierarchyEntry()).getWorkspaceId());
