JCR-4167: signal support for GZIP content coding as per RFC 7694

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1878847 13f79535-47bb-0310-9956-ffa450edef68

-            InputStream in = getDecodedInputStream(httpRequest);
+            InputStream in = getDecodedInputStream();
-    private static InputStream getDecodedInputStream(HttpServletRequest request) throws IOException {
-        List<String> contentCodings = AbstractWebdavServlet.getContentCodings(request);
+    private InputStream getDecodedInputStream() throws IOException {
+        List<String> contentCodings = getRequestContentCodings();
-        InputStream result = request.getInputStream();
+        InputStream result = httpRequest.getInputStream();
+    private List<String> requestContentCodings = null;
+
+    @Override
+    public List<String> getRequestContentCodings() {
+        if (requestContentCodings == null) {
+            requestContentCodings = AbstractWebdavServlet.getContentCodings(httpRequest);
+        }
+
+        return requestContentCodings;
+    }
+
-        return new MyServletInputStream(getDecodedInputStream(httpRequest));
+        return new MyServletInputStream(getDecodedInputStream());
