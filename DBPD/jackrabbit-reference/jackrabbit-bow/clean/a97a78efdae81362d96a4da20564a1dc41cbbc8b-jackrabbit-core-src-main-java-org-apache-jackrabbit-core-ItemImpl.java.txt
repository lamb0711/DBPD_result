JCR-1883 Moved node disappears

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@725292 13f79535-47bb-0310-9956-ffa450edef68

-                case ItemState.STATUS_EXISTING_MODIFIED:
+                case ItemState.STATUS_EXISTING_MODIFIED:
+                    if (!transientState.getParentId().equals(
+                            transientState.getOverlayedState().getParentId())) {
+                        throw new RepositoryException(
+                                "Cannot refresh a moved item: " + this +
+                                " - possible solution: refresh the parent");
+                    }
+                    list.add(transientState);
+                    break;
+
