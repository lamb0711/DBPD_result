JCR-1565: JSR 283 lifecycle management

Added a simple NodeImpl.assignLifecyclePolicy method for assigning a lifecycle policy and an initial lifecycle state to a node.

Added simple TCK tests for lifecycle management.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@795136 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.nodetype.NodeType;
+        addLifecycleTestData(getOrAddNode(data, "lifecycle"));
+    /**
+     * Creates a lifecycle policy node and another node with a lifecycle
+     * referencing that policy.
+     */
+    private void addLifecycleTestData(Node node) throws RepositoryException {
+        Node policy = getOrAddNode(node, "policy");
+        policy.addMixin(NodeType.MIX_REFERENCEABLE);
+        Node transitions = getOrAddNode(policy, "transitions");
+        Node transition = getOrAddNode(transitions, "identity");
+        transition.setProperty("from", "identity");
+        transition.setProperty("to", "identity");
+
+        Node lifecycle = getOrAddNode(node, "node");
+        ((NodeImpl) lifecycle).assignLifecyclePolicy(policy, "identity");
+    }
+
