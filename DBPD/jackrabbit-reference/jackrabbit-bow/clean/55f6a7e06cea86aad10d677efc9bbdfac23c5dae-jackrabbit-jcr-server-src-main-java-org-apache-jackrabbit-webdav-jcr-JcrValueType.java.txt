JCR-2507 : JcrValueType#typeFromContentType throws IllegalArgumentException for type weak-ref and uri

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@914988 13f79535-47bb-0310-9956-ffa450edef68

-        if (contentType != null && TYPE_LOOKUP.containsKey(contentType)) {
-            return TYPE_LOOKUP.get(contentType);
+        if (contentType != null) {
+            // remove charset if present
+            int pos = contentType.indexOf(';');
+            String ct = (pos == -1) ? contentType : contentType.substring(0, pos);
+            if (TYPE_LOOKUP.containsKey(ct)) {
+                return TYPE_LOOKUP.get(ct);
+            }
