JCR-2710 Add support for large number of users in a group
UserImporter copes with node structure for group membership now

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@987181 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.ArrayList;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Stack;
-
-import javax.jcr.ImportUUIDBehavior;
-import javax.jcr.ItemExistsException;
-import javax.jcr.ItemNotFoundException;
-import javax.jcr.PathNotFoundException;
-import javax.jcr.PropertyType;
-import javax.jcr.RepositoryException;
-import javax.jcr.lock.LockException;
-import javax.jcr.nodetype.ConstraintViolationException;
-import javax.jcr.version.VersionException;
-
+import javax.jcr.ImportUUIDBehavior;
+import javax.jcr.ItemExistsException;
+import javax.jcr.ItemNotFoundException;
+import javax.jcr.PathNotFoundException;
+import javax.jcr.PropertyType;
+import javax.jcr.RepositoryException;
+import javax.jcr.lock.LockException;
+import javax.jcr.nodetype.ConstraintViolationException;
+import javax.jcr.version.VersionException;
+
+import java.util.ArrayList;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Stack;
+
-    private Stack<NodeState> parents;
+    private final Stack<NodeState> parents;
-            List<ProtectedNodeImporter> ln = config.getProtectedNodeImporters();
-            for (ProtectedNodeImporter pni : ln) {
-                if (pni.init(session, session, true, uuidBehavior, refTracker)) {
-                    log.warn("Protected node importer configured is not supported by workspace import.");
-                    //throw new UnsupportedOperationException("Workspace-Import of protected nodes: Not yet implement. ");
-                }
-            }
-            List<ProtectedPropertyImporter> lp = config.getProtectedPropertyImporters();
-            for (ProtectedPropertyImporter ppi : lp) {
+            List<? extends ProtectedItemImporter> pi = config.getProtectedItemImporters();
+            for (ProtectedItemImporter ppi : pi) {
-                    log.warn("Protected property importer configured is not supported by workspace import.");
-                    //throw new UnsupportedOperationException("Workspace-Import of protected properties: Not yet implement. ");
+                    log.warn("Protected item importer configured is not supported by workspace import.");
+                    //throw new UnsupportedOperationException("Workspace-Import of protected nodes: Not yet implement. ");
-            
+
-    
+
