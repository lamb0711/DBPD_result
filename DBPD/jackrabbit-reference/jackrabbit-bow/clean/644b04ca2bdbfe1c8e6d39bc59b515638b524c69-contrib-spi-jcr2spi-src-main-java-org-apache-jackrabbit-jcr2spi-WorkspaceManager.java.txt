work in progress

- RepositoryService.lock -> add return value
- Merge-Operation, VersionManager: merge returns failed-Ids
- LockManager: lock returns lockInfo
- javadoc, todos

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@478581 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.IdIterator;
-        // TODO: review
-        // TODO: review
-        // TODO: review retrival of ItemIds for transient modifications 
-
-            // todo service should return ids of failed nodes
-            service.merge(sessionInfo, nId, operation.getSourceWorkspaceName(), operation.bestEffort());
+            IdIterator failed = service.merge(sessionInfo, nId, operation.getSourceWorkspaceName(), operation.bestEffort());
+            operation.setFailedIds(failed);
-            service.lock(sessionInfo, nId, operation.isDeep(), operation.isSessionScoped());
+            LockInfo lInfo = service.lock(sessionInfo, nId, operation.isDeep(), operation.isSessionScoped());
+            operation.setLockInfo(lInfo);
