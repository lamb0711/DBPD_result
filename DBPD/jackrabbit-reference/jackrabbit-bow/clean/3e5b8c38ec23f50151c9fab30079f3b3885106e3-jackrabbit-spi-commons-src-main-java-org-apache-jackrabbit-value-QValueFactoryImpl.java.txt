JCR-1190 : QValueFactory improvements


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@598665 13f79535-47bb-0310-9956-ffa450edef68

-                default:
-                    throw new IllegalArgumentException("illegal type");
+                // default: invalid type specified -> see below.
-        } catch (NumberFormatException ex) {
+        } catch (IllegalArgumentException ex) {
+            // given String value cannot be converted to Long/Double/Path/Name
+
+        // invalid type specified:
+        throw new IllegalArgumentException("illegal type " + type);
-                return NAME_FACTORY.create(getString());
+                try {
+                    return NAME_FACTORY.create(getString());
+                } catch (IllegalArgumentException e) {
+                    throw new ValueFormatException("not a valid Name value: " + getString(), e);
+                }
-                return PATH_FACTORY.create(getString());
+                try {
+                    return PATH_FACTORY.create(getString());
+                } catch (IllegalArgumentException e) {
+                    throw new ValueFormatException("not a valid Path: " + getString(), e);
+                }
