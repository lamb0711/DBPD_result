JCR-3175: InputContextImpl: cannot upload file larger than 2GB

Avoid truncating Content-Length to int by bypassing getIntHeader API

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1213276 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * @return content length or -1 when unknown
+     */
-        return request.getIntHeader(DavConstants.HEADER_CONTENT_LENGTH);
+        String length = request.getHeader(DavConstants.HEADER_CONTENT_LENGTH);
+        if (length == null) {
+            // header not present
+            return -1;
+        } else {
+            try {
+                return Long.parseLong(length);
+            } catch (NumberFormatException ex) {
+                log.error("broken Content-Length header: " + length);
+                return -1;
+            }
+        }
