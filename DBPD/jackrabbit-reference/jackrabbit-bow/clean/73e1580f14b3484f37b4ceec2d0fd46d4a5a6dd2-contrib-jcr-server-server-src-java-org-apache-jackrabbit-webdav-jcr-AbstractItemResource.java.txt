applying patch from angela, fixing:

[JCR-122] cannot PUT changes to a resource in the simple webdav server
[JCR-123] Webdav: Error when accessing Simple-Server
[JCR-126] Jcr-Server Module: Remove Dependency from Jackrabbit-Core


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@180346 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.webdav.util.Text;
+import org.apache.jackrabbit.util.Text;
+
+	// initialize the supported locks and reports
+        initLockSupport();
+        initSupportedReports();
-            getRepositorySession().move(getResourcePath(), destination.getResourcePath());
-            complete();
-
+            if (getTransactionId() == null) {
+                // if not part of a transaction directely import on workspace
+                getRepositorySession().getWorkspace().move(getResourcePath(), destination.getResourcePath());
+            } else {
+                // changes will not be persisted unless the tx is completed.
+                getRepositorySession().move(getResourcePath(), destination.getResourcePath());
+            }
+            // no use in calling 'complete' that would fail for a moved item anyway.
