JCR-2104: JSR 283 Versioning

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@773930 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.version.VersionIterator;
-     *
-     * @return
-     * @throws RepositoryException
-     *
-     * @return
-     * @throws RepositoryException
-     *
-     * @return
-     * @throws RepositoryException
-        // TODO
-        throw new UnsupportedRepositoryOperationException("JCR-1104");
+        // TODO: improve.
+        VersionHistory vh = getContainingHistory();
+        for (VersionIterator it = vh.getAllLinearVersions(); it.hasNext();) {
+            Version v = it.nextVersion();
+            if (isSame(v.getLinearPredecessor())) {
+                return v;
+            }
+        }
+
+        // no linear successor found
+        return null;
-     *
-     * @return
-     * @throws RepositoryException
