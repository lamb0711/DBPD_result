JCR-890: concurrent read-only access to a session

Handle Session.logout() in a way that prevents concurrent session access.

Also move the SessionContext argument from perform() to a member variable of SessionOperation.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957626 13f79535-47bb-0310-9956-ffa450edef68

-public class SessionOperation {
+public abstract class SessionOperation {
-    public SessionOperation(String name) {
+    protected final SessionContext context;
+
+    /**
+     * Creates a new session operation.
+     *
+     * @param name operation name
+     * @param context component context of the session
+     */
+    protected SessionOperation(String name, SessionContext context) {
+        this.context = context;
-     * @param context component context of the session
-    public void perform(SessionContext context) throws RepositoryException {
-    }
+    public abstract void perform() throws RepositoryException;
