JCR-1232: Merge UUID to NodeId

Use NodeIds instead of UUIDs in ReferenceChangeTracker.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@792469 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.uuid.UUID;
+import org.apache.jackrabbit.core.id.NodeId;
+import java.util.Map;
- * Simple helper class that can be used to keep track of uuid mappings
- * (e.g. if the uuid of an imported or copied node is mapped to a new uuid)
+ * Simple helper class that can be used to keep track of node id mappings
+ * (e.g. if the id of an imported or copied node is mapped to a new id)
- * need correcting depending on the uuid mappings.
+ * need correcting depending on the id mappings.
+
-     * mapping <original uuid> to <new uuid> of mix:referenceable nodes
+     * mapping from original id to new id of mix:referenceable nodes
-    private final HashMap<UUID, UUID> uuidMap = new HashMap<UUID, UUID>();
+    private final Map<NodeId, NodeId> idMap = new HashMap<NodeId, NodeId>();
+
-     * Creates a new instance.
-     */
-    public ReferenceChangeTracker() {
-    }
-
-    /**
-        uuidMap.clear();
+        idMap.clear();
-     * Store the given uuid mapping for later lookup using
-     * <code>{@link #getMappedUUID(UUID)}</code>.
+     * Store the given id mapping for later lookup using
+     * <code>{@link #getMappedId(NodeId)}</code>.
-     * @param oldUUID old uuid
-     * @param newUUID new uuid
+     * @param oldId old node id
+     * @param newId new node id
-    public void mappedUUID(UUID oldUUID, UUID newUUID) {
-        uuidMap.put(oldUUID, newUUID);
+    public void mappedId(NodeId oldId, NodeId newId) {
+        idMap.put(oldId, newId);
-     * Returns the new UUID to which <code>oldUUID</code> has been mapped
+     * Returns the new node id to which <code>oldId</code> has been mapped
-     * @param oldUUID old uuid
-     * @return mapped new uuid or <code>null</code> if no such mapping exists
-     * @see #mappedUUID(UUID, UUID)
+     * @param oldId old node id
+     * @return mapped new id or <code>null</code> if no such mapping exists
+     * @see #mappedId(NodeId, NodeId)
-    public UUID getMappedUUID(UUID oldUUID) {
-        return uuidMap.get(oldUUID);
+    public NodeId getMappedId(NodeId oldId) {
+        return idMap.get(oldId);
