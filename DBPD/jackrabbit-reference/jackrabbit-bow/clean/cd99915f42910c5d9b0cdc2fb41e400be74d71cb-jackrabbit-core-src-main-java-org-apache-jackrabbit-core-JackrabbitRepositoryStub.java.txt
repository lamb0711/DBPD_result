JCR-2055: RepositoryStub implementation in jackrabbit-core

Create the "test" workspace automatically in JackrabbitRepositoryStub.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@762737 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Arrays;
+import java.util.HashSet;
+import java.util.Set;
+import org.apache.jackrabbit.api.JackrabbitWorkspace;
-        JackrabbitNodeTypeManager manager = (JackrabbitNodeTypeManager)
-            session.getWorkspace().getNodeTypeManager();
+        JackrabbitWorkspace workspace =
+            (JackrabbitWorkspace) session.getWorkspace();
+        Set workspaces = new HashSet(
+                Arrays.asList(workspace.getAccessibleWorkspaceNames()));
+        if (!workspaces.contains("test")) {
+            workspace.createWorkspace("test");
+        }
+
+        JackrabbitNodeTypeManager manager =
+            (JackrabbitNodeTypeManager) workspace.getNodeTypeManager();
