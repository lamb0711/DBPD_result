[JCR-000] Adjusting to spec 0.16.4 changes
[JCR-107] Typos in jcr-server io package javadocs
[JCR-104] Contrib/Jcr-Server: Improve package structure


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@161660 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.jackrabbit.webdav.spi;
+package org.apache.jackrabbit.webdav.jcr;
+import org.apache.jackrabbit.webdav.search.SearchResource;
+import org.apache.jackrabbit.webdav.search.QueryGrammerSet;
+import org.apache.jackrabbit.webdav.search.SearchInfo;
-import org.apache.jackrabbit.webdav.spi.transaction.TxLockManagerImpl;
+import org.apache.jackrabbit.webdav.jcr.transaction.TxLockManagerImpl;
+import org.apache.jackrabbit.webdav.jcr.search.SearchResourceImpl;
+import javax.jcr.RepositoryException;
-        TransactionResource, DeltaVResource {
+        TransactionResource, DeltaVResource, SearchResource {
-        DavResource res;
-        if (getRepositorySession().itemExists(loc.getResourcePath())) {
-            res = createResourceFromLocator(loc);
-        } else {
-            throw new DavException(DavServletResponse.SC_NOT_FOUND);
+        try {
+            DavResource res;
+            if (getRepositorySession().itemExists(loc.getResourcePath())) {
+                res = createResourceFromLocator(loc);
+            } else {
+                throw new DavException(DavServletResponse.SC_NOT_FOUND);
+            }
+            return res;
+        } catch (RepositoryException e) {
+            throw new JcrDavException(e);
-        return res;
+    //-------------------------------------------< SearchResource interface >---
+    /**
+     * @return
+     * @see org.apache.jackrabbit.webdav.search.SearchResource#getQueryGrammerSet()
+     */
+    public QueryGrammerSet getQueryGrammerSet() {
+        return new SearchResourceImpl(getLocator(), getSession()).getQueryGrammerSet();
+    }
+
+    /**
+     * @param sInfo
+     * @return
+     * @throws DavException
+     * @see SearchResource#search(org.apache.jackrabbit.webdav.search.SearchInfo)
+     */
+    public MultiStatus search(SearchInfo sInfo) throws DavException {
+        return new SearchResourceImpl(getLocator(), getSession()).search(sInfo);
+    }
