JCR-337 - Remove jcr dependency from dav-library
JCR-343 - Report#init limits the Report interface to DeltaV compliant resources
JCR-340 - ValuesProperty missing property type information
JCR-342 - DavResource#getDavSession() missing
JCR-344 - DeltaVResource lists MKWORKSPACE in the method constant.
JCR-345 - DavException does not allow to specify an exception cause

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@385540 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.webdav.DavSession;
+import org.apache.jackrabbit.webdav.jcr.JcrDavSession;
+import javax.jcr.Session;
-    private final DavSession session;
+    private final JcrDavSession session;
-    public SearchResourceImpl(DavResourceLocator locator, DavSession session) {
+    public SearchResourceImpl(DavResourceLocator locator, JcrDavSession session) {
-            QueryManager qMgr = session.getRepositorySession().getWorkspace().getQueryManager();
+            QueryManager qMgr = getRepositorySession().getWorkspace().getQueryManager();
-        Node rootNode = session.getRepositorySession().getRootNode();
-        QueryManager qMgr = session.getRepositorySession().getWorkspace().getQueryManager();
+        Node rootNode = getRepositorySession().getRootNode();
+        QueryManager qMgr = getRepositorySession().getWorkspace().getQueryManager();
-        String itemPath = locator.getJcrPath();
+        String itemPath = locator.getRepositoryPath();
-        if (!session.getRepositorySession().itemExists(itemPath)) {
+        if (!getRepositorySession().itemExists(itemPath)) {
+
+    /**
+     * @return
+     */
+    private Session getRepositorySession() {
+        return session.getRepositorySession();
+    }
