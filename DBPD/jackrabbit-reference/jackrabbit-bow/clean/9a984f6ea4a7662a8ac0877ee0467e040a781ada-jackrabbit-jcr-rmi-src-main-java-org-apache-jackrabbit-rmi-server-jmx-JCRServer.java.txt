JCR-1317: Add a MBean method to programatically create a new Workspace.

Applied a patch by Manual Duran.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@691319 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Credentials;
+import javax.jcr.LoginException;
+import javax.jcr.RepositoryException;
+import javax.jcr.Session;
+import javax.jcr.SimpleCredentials;
+import org.apache.jackrabbit.api.JackrabbitWorkspace;
+    /**
+     * Local repository instance
+     */
+    private Repository localRepository;
+
-        Repository localRepository = (Repository) localContext
-                .lookup(this.localAddress);
+        localRepository = (Repository) localContext.lookup(this.localAddress);
+    public void createWorkspace( String username, String password, String workspace ) {
+        try {
+            Credentials cred = new SimpleCredentials( username, password.toCharArray() );
+            Session sesion = this.localRepository.login( cred );
+            JackrabbitWorkspace ws = ( JackrabbitWorkspace ) sesion.getWorkspace();
+            ws.createWorkspace( workspace );
+        } catch ( LoginException ex ) {
+            ex.printStackTrace();
+        } catch ( RepositoryException ex ) {
+            ex.printStackTrace();
+        }
+    }
+
+    /**
+     * Returns the local repository instance.
+     */
+    Repository getLocalRepository() {
+        return localRepository;
+    }
+
+    /**
+     * Sets the local repository instance.
+     */
+    public void setLocalRepository( Repository localRepository ) {
+        this.localRepository = localRepository;
+    }
+
