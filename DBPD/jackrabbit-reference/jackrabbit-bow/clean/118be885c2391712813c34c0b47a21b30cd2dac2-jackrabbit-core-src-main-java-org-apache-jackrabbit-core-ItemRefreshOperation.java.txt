JCR-890: concurrent read-only access to a session

Turn more ItemImpl methods into SessionOperations

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@981833 13f79535-47bb-0310-9956-ffa450edef68

-    public ItemRefreshOperation(ItemState state) {
+    private final boolean keepChanges;
+
+    public ItemRefreshOperation(ItemState state, boolean keepChanges) {
+        this.keepChanges = keepChanges;
+        if (keepChanges) {
+            // FIXME When keepChanges is true, should reset Item#status field
+            // to STATUS_NORMAL of all descendant non-transient instances;
+            // maybe also have to reset stale ItemState instances
+            return this;
+        }
+
