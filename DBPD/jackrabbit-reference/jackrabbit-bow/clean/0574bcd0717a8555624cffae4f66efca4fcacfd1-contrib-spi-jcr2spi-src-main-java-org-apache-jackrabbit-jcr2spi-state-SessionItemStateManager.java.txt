work in progress

- remove DIFF comment
- SessionISM should not handle workspace operations.
- SessionISM.getReferingStates not correct. add TODO
- fix ChangeLog.isSelfContained: retrieve list of all affected states
  from the list of operations and compare to states collected before.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@452512 13f79535-47bb-0310-9956-ffa450edef68

-        // DIFF JR: validator added
-
+        // TODO: not correct. ItemManager later on expectes overlaying state
+        changeLog.collectOperations(transientStateMgr.getOperations());
-        changeLog.collectOperations(transientStateMgr.getOperations());
-    public void visit(Clone operation) throws NoSuchWorkspaceException, LockException, ConstraintViolationException, AccessDeniedException, ItemExistsException, UnsupportedRepositoryOperationException, VersionException, RepositoryException {
-        workspaceItemStateMgr.execute(operation);
-    }
-
-    /**
-     * @inheritDoc
-     */
-    public void visit(Copy operation) throws NoSuchWorkspaceException, LockException, ConstraintViolationException, AccessDeniedException, ItemExistsException, UnsupportedRepositoryOperationException, VersionException, RepositoryException {
-        workspaceItemStateMgr.execute(operation);
-    }
-
-    /**
-     * @inheritDoc
-     */
-    public void visit(Update operation) throws NoSuchWorkspaceException, AccessDeniedException, LockException, InvalidItemStateException, RepositoryException {
-        workspaceItemStateMgr.execute(operation);
-    }
-
+    public void visit(Clone operation) throws NoSuchWorkspaceException, LockException, ConstraintViolationException, AccessDeniedException, ItemExistsException, UnsupportedRepositoryOperationException, VersionException, RepositoryException {
+        throw new UnsupportedOperationException("Internal error: Clone cannot be handled by session ItemStateManager.");
+    }
+
+    public void visit(Copy operation) throws NoSuchWorkspaceException, LockException, ConstraintViolationException, AccessDeniedException, ItemExistsException, UnsupportedRepositoryOperationException, VersionException, RepositoryException {
+        throw new UnsupportedOperationException("Internal error: Copy cannot be handled by session ItemStateManager.");
+    }
+
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Checkout cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Checkin cannot be handled by session ItemStateManager.");
+    }
+
+    public void visit(Update operation) throws NoSuchWorkspaceException, AccessDeniedException, LockException, InvalidItemStateException, RepositoryException {
+        throw new UnsupportedOperationException("Internal error: Update cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Restore cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Merge cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Update cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: Lock cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: LockRefresh cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: LockRelease cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: AddLabel cannot be handled by session ItemStateManager.");
-        workspaceItemStateMgr.execute(operation);
+        throw new UnsupportedOperationException("Internal error: RemoveLabel cannot be handled by session ItemStateManager.");
