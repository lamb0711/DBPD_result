JCR-2762: Optimize bundle serialization

Add common names used by the access control features. Reorder names by popularity.

Rename read/writeInt() to read/writeVarInt() as suggested by Thomas. Remove recursion from writeVarInt().

Minor optimizations in read/writeName(), including a fix to the case where the local name is more than 15 characters long.

Extend the use of read/writeVarInt() and read/writeString() to more places in the code.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1022488 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.NameFactory;
-import org.apache.jackrabbit.spi.commons.name.NameFactoryImpl;
+import org.apache.jackrabbit.spi.commons.name.NameConstants;
-    NameFactory NF = NameFactoryImpl.getInstance();
-
-    Name N_POLICY = NF.create(Name.NS_REP_URI, "policy");
+    Name N_POLICY = NameConstants.REP_POLICY;
-    Name N_ACCESSCONTROL = NF.create(Name.NS_REP_URI, "accesscontrol");
+    Name N_ACCESSCONTROL = NameConstants.REP_ACCESSCONTROL;
-    Name P_PRIVILEGES = NF.create(Name.NS_REP_URI, "privileges");
+    Name P_PRIVILEGES =  NameConstants.REP_PRIVILEGES;
-    Name P_PRINCIPAL_NAME = NF.create(Name.NS_REP_URI, "principalName");
+    Name P_PRINCIPAL_NAME = NameConstants.REP_PRINCIPAL_NAME;
-    Name P_GLOB = NF.create(Name.NS_REP_URI, "glob");
+    Name P_GLOB = NameConstants.REP_GLOB;
-    Name NT_REP_ACCESS_CONTROLLABLE = NF.create(Name.NS_REP_URI, "AccessControllable");
+    Name NT_REP_ACCESS_CONTROLLABLE = NameConstants.REP_ACCESS_CONTROLLABLE;
-    Name NT_REP_ACL = NF.create(Name.NS_REP_URI, "ACL");
+    Name NT_REP_ACL = NameConstants.REP_ACL;
-    Name NT_REP_ACE = NF.create(Name.NS_REP_URI, "ACE");
+    Name NT_REP_ACE = NameConstants.REP_ACE;
-    Name NT_REP_GRANT_ACE = NF.create(Name.NS_REP_URI, "GrantACE");
+    Name NT_REP_GRANT_ACE = NameConstants.REP_GRANT_ACE;
-    Name NT_REP_DENY_ACE = NF.create(Name.NS_REP_URI, "DenyACE");
+    Name NT_REP_DENY_ACE = NameConstants.REP_DENY_ACE;
-    Name NT_REP_ACCESS_CONTROL = NF.create(Name.NS_REP_URI, "AccessControl");
+    Name NT_REP_ACCESS_CONTROL = NameConstants.REP_ACCESS_CONTROL;
-    Name NT_REP_PRINCIPAL_ACCESS_CONTROL = NF.create(Name.NS_REP_URI, "PrincipalAccessControl");
-    
+    Name NT_REP_PRINCIPAL_ACCESS_CONTROL = NameConstants.REP_PRINCIPAL_ACCESS_CONTROL;
+
