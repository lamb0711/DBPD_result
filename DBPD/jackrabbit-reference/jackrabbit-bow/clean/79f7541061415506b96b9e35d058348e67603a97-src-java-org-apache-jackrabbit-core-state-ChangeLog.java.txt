Added ItemStateManager#hasNodeReferences()
Added check for targets of modified node references in XAResource#prepare
Removed duplicated checkLock() in NodeImpl#addMixin


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@164071 13f79535-47bb-0310-9956-ffa450edef68

+     * Return a flag indicating whether a given item state exists.
+     * @return <code>true</code> if item state exists within this
+     *         log; <code>false</code> otherwise
+     */
+    public boolean has(ItemId id) {
+        if (addedStates.containsKey(id) || modifiedStates.containsKey(id)) {
+            return true;
+        }
+        return false;
+    }
+
+    /**
