JCR-2961: Improve logging of Session.save() to trace back root cause of externally modified nodes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1099822 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.ItemImpl;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+    private static final Logger LOG = LoggerFactory.getLogger(SessionSaveOperation.class);
+    private static final boolean LOG_WITH_STACKTRACE = Boolean.getBoolean("org.jackrabbit.logWithStackTrace");
+
+        if (LOG.isDebugEnabled()) {
+            NodeId transientRoot = context.getItemStateManager().getIdOfRootTransientNodeState();
+            ItemImpl item = context.getItemManager().getItem(transientRoot);
+            if (LOG_WITH_STACKTRACE) {
+                LOG.debug("Saving changes under " + item.getPath(), new Exception());
+            } else {
+                LOG.debug("Saving changes under " + item.getPath());
+            }
+        }
