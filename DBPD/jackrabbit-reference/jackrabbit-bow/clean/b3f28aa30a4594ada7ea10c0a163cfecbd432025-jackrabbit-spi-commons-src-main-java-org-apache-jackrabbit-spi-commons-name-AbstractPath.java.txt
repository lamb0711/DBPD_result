JCR-2744: Avoid element arrays in PathImpl

Get rid of separate Path.Element objects by making AbstractPath implement both Path and Path.Element

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997384 13f79535-47bb-0310-9956-ffa450edef68

-abstract class AbstractPath implements Path {
+abstract class AbstractPath implements Path, Path.Element {
+     * Returns <code>null</code>, except when overridden by the
+     * {@link IdentifierPath} subclass.
+     *
+     * @return <code>null</code>
+     */
+    public String getIdentifier() {
+        return null;
+    }
+
+    /**
+    public Element getNameElement() {
+        return getLastElement();
+    }
+
-    public Path getLastElement() {
+    public AbstractPath getLastElement() {
-            return new NamePath(this, element);
+            return new NamePath(this, element.getName(), element.getIndex());
-            return RootPath.INSTANCE;
+            return RootPath.ROOT_PATH;
-            return new IdentifierPath(element);
+            return new IdentifierPath(element.getIdentifier());
-            return new NamePath(this, relative.getNameElement());
+            return new NamePath(this, relative.getName(), relative.getIndex());
