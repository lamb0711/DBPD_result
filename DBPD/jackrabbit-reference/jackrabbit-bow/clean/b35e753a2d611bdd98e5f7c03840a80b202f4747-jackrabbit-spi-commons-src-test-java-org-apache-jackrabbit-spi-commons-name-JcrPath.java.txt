JCR-1526: Various improvements to Path and PathImpl

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@646802 13f79535-47bb-0310-9956-ffa450edef68

-        list.add(new JcrPath("a/b/c/", "a/b/c", NOR|VAL));
+        list.add(new JcrPath("a/b/c/", "a/b/c", NOR|VAL));
+        list.add(new JcrPath("//"));
+        list.add(new JcrPath("/a//b"));
+        list.add(new JcrPath("/..", "/..", 0));
+        list.add(new JcrPath("/a/b/../../..", "/a/b/../../..", 0));
+
+        // normalized, relative paths
+        list.add(new JcrPath(".", ".", NOR|VAL));
+        list.add(new JcrPath("..", "..", NOR|VAL));
+        list.add(new JcrPath("../..", "../..", NOR|VAL));
+        list.add(new JcrPath("../../a/b", "../../a/b", NOR|VAL));
+        list.add(new JcrPath("../a", "../a",NOR|VAL));        
+        list.add(new JcrPath("/a/../b/./c/d/..", "/b/c", VAL));
-        // invalid normalized paths
-        list.add(new JcrPath("/..", "/..", 0));
-        list.add(new JcrPath("/a/b/../../..", "/a/b/../../..", 0));
+        // other non-normalized, relative path
+        list.add(new JcrPath("./.", ".", VAL));
+        list.add(new JcrPath("./a", "a", VAL));
+        list.add(new JcrPath("a/..", ".", VAL));
+        list.add(new JcrPath("../a/..", "..", VAL));
+        list.add(new JcrPath("../a/.", "../a", VAL));
+        list.add(new JcrPath("a/./b", "a/b", VAL));
-        this.flags = flags | ((path.length()>0 && path.charAt(0)=='/') ? ABS : 0);
+        this.flags = flags | ((path.length() > 0 && path.charAt(0)=='/') ? ABS : 0);
-}
+}
