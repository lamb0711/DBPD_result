JCR-3469 Thread interrupt may result in closed index files

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1415093 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.lucene.store.SimpleFSDirectory;
+    private boolean useSimpleFSDirectory;
+
+        useSimpleFSDirectory = handler.isUseSimpleFSDirectory();
-        return new FSDir(dir);
+        return new FSDir(dir, useSimpleFSDirectory);
-        public FSDir(File dir) throws IOException {
+        public FSDir(File dir, boolean simpleFS) throws IOException {
-            directory = FSDirectory.open(dir,
-                    new NativeFSLockFactory(dir));
+            LockFactory lockFactory = new NativeFSLockFactory(dir);
+            if (simpleFS) {
+                directory = new SimpleFSDirectory(dir, lockFactory);
+            } else {
+                directory = FSDirectory.open(dir, lockFactory);
+            }
