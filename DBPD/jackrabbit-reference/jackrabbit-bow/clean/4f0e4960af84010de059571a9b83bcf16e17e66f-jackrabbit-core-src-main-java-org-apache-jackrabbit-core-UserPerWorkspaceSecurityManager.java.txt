JCR-3118 : Configurable actions upon authorizable creation and removal

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1187257 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.user.action.AuthorizableAction;
-        
+
+        UserManagerImpl umgr;
-            return (UserPerWorkspaceUserManager) umc.getUserManager(UserPerWorkspaceUserManager.class,
-                    paramTypes, (SessionImpl) session, adminId, params, getMembershipCache(session));
+            umgr = (UserPerWorkspaceUserManager) umc.getUserManager(UserPerWorkspaceUserManager.class,
+                    paramTypes, session, adminId, params, getMembershipCache(session));
-            return new UserPerWorkspaceUserManager(session, adminId, params, getMembershipCache(session));
+            umgr = new UserPerWorkspaceUserManager(session, adminId, params, getMembershipCache(session));
+
+        if (umc != null && !(session instanceof SystemSession)) {
+            AuthorizableAction[] actions = umc.getAuthorizableActions();
+            umgr.setAuthorizableActions(actions);
+        }
+        return umgr;
