JCR-3005: Make it possible to get multiple nodes in one call via davex

Allow exceptions to be thrown from getMultiple

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1179532 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.logging.Level;
-                }
-                else if ((pValues = data.getParameterValues(PARAM_GET)) != null) {
+                } else if ((pValues = data.getParameterValues(PARAM_GET)) != null) {
-                
+
-    protected void getMultiple(Session session, String[] getArgs, DavResourceLocator locator, WebdavResponse webdavResponse) {
-        try {
-            webdavResponse.setContentType("text/plain;charset=utf-8");
-            webdavResponse.setStatus(DavServletResponse.SC_OK);
-            PrintWriter webdavWriter = webdavResponse.getWriter();
-            Boolean isFirst = true;
-            webdavWriter.write("{\"nodes\": {");
-            String path = locator.getRepositoryPath();
-            if (getSingle(session, path, locator, webdavWriter, isFirst, true)) {
-                isFirst = false;
-            }
-           
-            for (String getArg : getArgs) {
-                try {
-                    if (!getArg.equals(path) && getSingle(session, getArg, locator, webdavWriter, isFirst, true)) {
-                        isFirst = false;
-                    }
-                } catch (RepositoryException ex) {
-
-                }
-            }
-            webdavWriter.write("}}");
-        } catch (IOException ex) {
-            java.util.logging.Logger.getLogger(JcrRemotingServlet.class.getName()).log(Level.SEVERE, null, ex);
-        } catch (RepositoryException ex) {
-            java.util.logging.Logger.getLogger(JcrRemotingServlet.class.getName()).log(Level.SEVERE, null, ex);
+    protected void getMultiple(
+            Session session, String[] getArgs, DavResourceLocator locator,
+            WebdavResponse webdavResponse)
+            throws IOException, RepositoryException {
+        webdavResponse.setContentType("text/plain;charset=utf-8");
+        webdavResponse.setStatus(DavServletResponse.SC_OK);
+        PrintWriter webdavWriter = webdavResponse.getWriter();
+        Boolean isFirst = true;
+        webdavWriter.write("{\"nodes\": {");
+        String path = locator.getRepositoryPath();
+        if (getSingle(session, path, locator, webdavWriter, isFirst, true)) {
+            isFirst = false;
+
+        for (String getArg : getArgs) {
+            try {
+                if (!getArg.equals(path) && getSingle(session, getArg, locator, webdavWriter, isFirst, true)) {
+                    isFirst = false;
+                }
+            } catch (RepositoryException ex) {
+
+            }
+        }
+        webdavWriter.write("}}");
