JCR-2087 Upgrade to Java 5 as the base platform

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@784011 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Iterator;
-    protected Map stateStore;
-    protected Map refsStore;
+    protected Map<ItemId, byte[]> stateStore;
+    protected Map<NodeReferencesId, byte[]> refsStore;
-        for (int i = 0; i < chars.length; i++) {
-            if (chars[i] == '-') {
+        for (char ch : chars) {
+            if (ch == '-') {
-            sb.append(chars[i]);
+            sb.append(ch);
-                NodeReferencesId id = (NodeReferencesId) NodeReferencesId.valueOf(s);
+                NodeReferencesId id = NodeReferencesId.valueOf(s);
-            Iterator iterKeys = stateStore.keySet().iterator();
-            while (iterKeys.hasNext()) {
-                ItemId id = (ItemId) iterKeys.next();
+            for (ItemId id : stateStore.keySet()) {
-                byte[] data = (byte[]) stateStore.get(id);
+                byte[] data = stateStore.get(id);
-            Iterator iterKeys = refsStore.keySet().iterator();
-            while (iterKeys.hasNext()) {
-                NodeReferencesId id = (NodeReferencesId) iterKeys.next();
+            for (NodeReferencesId id : refsStore.keySet()) {
-                byte[] data = (byte[]) refsStore.get(id);
+                byte[] data = refsStore.get(id);
-        stateStore = new HashMap(initialCapacity, loadFactor);
-        refsStore = new HashMap(initialCapacity, loadFactor);
+        stateStore = new HashMap<ItemId, byte[]>(initialCapacity, loadFactor);
+        refsStore = new HashMap<NodeReferencesId, byte[]>(initialCapacity, loadFactor);
-                    for (int i = 0; i < folders.length; i++) {
-                        blobFS.deleteFolder(folders[i]);
+                    for (String folder: folders) {
+                        blobFS.deleteFolder(folder);
-                    for (int i = 0; i < files.length; i++) {
-                        blobFS.deleteFile(files[i]);
+                    for (String file : files) {
+                        blobFS.deleteFile(file);
-        byte[] data = (byte[]) stateStore.get(id);
+        byte[] data = stateStore.get(id);
-        byte[] data = (byte[]) stateStore.get(id);
+        byte[] data = stateStore.get(id);
-            for (int i = 0; i < values.length; i++) {
-                InternalValue val = values[i];
+            for (InternalValue val : values) {
-        byte[] data = (byte[]) refsStore.get(id);
+        byte[] data = refsStore.get(id);
