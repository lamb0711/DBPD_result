[JCR-103] Add plugable mechanism for import/export of dav resources

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@160914 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.JCRConstants;
-        ActiveLock lock = getWriteLock();
-        if (lock != null && lockToken.equals(lock.getToken())) {
+        ActiveLock lock = getLock(reqLockInfo.getType(), reqLockInfo.getScope());
+        if (lock == null) {
+            throw new DavException(DavServletResponse.SC_PRECONDITION_FAILED, "No lock with the given scope/type present on this resource.");
+        }
+
+        if (Type.WRITE.equals(lock.getType())) {
-     * @see #MIX_LOCKABLE
+     * @see org.apache.jackrabbit.JCRConstants#MIX_LOCKABLE
-            if (exists() && ((Node)item).isNodeType(MIX_LOCKABLE)) {
+            if (exists() && ((Node)item).isNodeType(JCRConstants.MIX_LOCKABLE)) {
-		if (n.hasProperty(PROP_LASTMODIFIED)) {
-                    setModificationTime(n.getProperty(PROP_LASTMODIFIED).getLong());
+		if (n.hasProperty(JCRConstants.JCR_LASTMODIFIED)) {
+                    setModificationTime(n.getProperty(JCRConstants.JCR_LASTMODIFIED).getLong());
-                if (n.hasProperty(PROP_CREATED)) {
-                    long creationTime = n.getProperty(PROP_CREATED).getValue().getLong();
+                if (n.hasProperty(JCRConstants.JCR_CREATED)) {
+                    long creationTime = n.getProperty(JCRConstants.JCR_CREATED).getValue().getLong();
