JCR-2541: spi2dav : EventJournal not implemented

Add Atom Feed based Event Journal implementation.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1213890 13f79535-47bb-0310-9956-ffa450edef68

+import javax.xml.namespace.QName;
+
+    private final QName qName;
+        this.qName = null;
+        seek(parent);
+    }
+
+    /**
+     * Create a new instance of <code>ElementIterator</code> with the given
+     * parent element. Only child elements that match the given {@link QName}
+     * will be respected by {@link #hasNext()} and {@link #nextElement()}.
+     *
+     * @param parent
+     * @param qname name to match (exactly)
+     */
+    public ElementIterator(Element parent, QName qname) {
+        this.localName = null;
+        this.namespace = null;
+        this.qName = qname;
-            if (DomUtil.isElement(n) && DomUtil.matches(n, localName, namespace)) {
+            if (matchesName(n)) {
-            if (DomUtil.isElement(n) && DomUtil.matches(n, localName, namespace)) {
+            if (matchesName(n)) {
+
+    /**
+     * Matches the node name according to either {@link #qName} or the pair
+     * of {@link #localName) and {@link #namespace}.
+     */
+    private boolean matchesName(Node n) {
+        if (!DomUtil.isElement(n)) {
+            return false;
+        } else if (qName != null) {
+            return DomUtil.matches(n, qName);
+        } else {
+            return DomUtil.matches(n, localName, namespace);
+        }
+    }
