- add methods for observation to client
- minor improvements to observation impl in jcr-server
- fix client LockMethod and adjust LockDiscovery accordingly
- fix client MergeMethod adjust corresponding Info object accordingly
- improve UpdateInfo
- use CodedURLHeader instaed of building locktoken header manually

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@421206 13f79535-47bb-0310-9956-ffa450edef68

+
+    /**
+     * Factory method to create a minimal DAV:merge element to create a new
+     * <code>MergeInfo</code> object.
+     *
+     * @param mergeSource
+     * @param isNoAutoMerge
+     * @param isNoCheckout
+     * @param factory
+     * @return
+     */
+    public static Element createMergeElement(String[] mergeSource, boolean isNoAutoMerge, boolean isNoCheckout, Document factory) {
+        Element mergeElem = DomUtil.createElement(factory, XML_MERGE, NAMESPACE);
+        Element source = DomUtil.addChildElement(mergeElem, DavConstants.XML_SOURCE, DavConstants.NAMESPACE);
+        for (int i = 0; i < mergeSource.length; i++) {
+            DomUtil.addChildElement(source, DavConstants.XML_HREF, DavConstants.NAMESPACE, mergeSource[i]);
+        }
+        if (isNoAutoMerge) {
+            DomUtil.addChildElement(mergeElem, XML_N0_AUTO_MERGE, NAMESPACE);
+        }
+        if (isNoCheckout) {
+            DomUtil.addChildElement(mergeElem, XML_N0_CHECKOUT, NAMESPACE);
+        }
+        return mergeElem;
+    }
