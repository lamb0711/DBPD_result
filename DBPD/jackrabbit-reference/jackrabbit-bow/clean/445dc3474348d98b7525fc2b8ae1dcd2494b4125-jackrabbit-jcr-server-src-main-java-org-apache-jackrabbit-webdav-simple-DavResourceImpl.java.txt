JCR-1188 WebDAV: Allow for Extensions of MimeResolver in the Configuration.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@588236 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.server.io.PropertyManager;
-
-    private ItemFilter filter;
-    private IOManager ioManager;
-    private PropertyManager propManager;
-
+    private ResourceConfig config;
-        this.filter = config.getItemFilter();
-        this.ioManager = config.getIOManager();
-        this.propManager = config.getPropertyManager();
+        this.config = config;
-        this.filter = config.getItemFilter();
-        this.ioManager = config.getIOManager();
-        this.propManager = config.getPropertyManager();
+        this.config = config;
-            if (!ioManager.exportContent(exportCtx, this)) {
+            if (!config.getIOManager().exportContent(exportCtx, this)) {
-            propManager.exportProperties(getPropertyExportContext(), isCollection());
+            config.getPropertyManager().exportProperties(getPropertyExportContext(), isCollection());
-            Map failure = propManager.alterProperties(getPropertyImportContext(l), isCollection());
+            Map failure = config.getPropertyManager().alterProperties(getPropertyImportContext(l), isCollection());
-            Map failures = propManager.alterProperties(getPropertyImportContext(changeList), isCollection());
+            Map failures = config.getPropertyManager().alterProperties(getPropertyImportContext(changeList), isCollection());
-            if (!ioManager.importContent(ctx, member)) {
+            if (!config.getIOManager().importContent(ctx, member)) {
-        return new ImportContextImpl(node, systemId, inputCtx);
+        return new ImportContextImpl(node, systemId, inputCtx, config.getMimeResolver());
-        return new ExportContextImpl(node, outputCtx);
+        return new ExportContextImpl(node, outputCtx, config.getMimeResolver());
+        ItemFilter filter = config.getItemFilter();
+        ItemFilter filter = config.getItemFilter();
