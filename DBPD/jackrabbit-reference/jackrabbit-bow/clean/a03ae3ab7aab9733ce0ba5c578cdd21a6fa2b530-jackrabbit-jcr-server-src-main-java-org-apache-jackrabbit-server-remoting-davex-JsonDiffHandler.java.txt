JCR-2585:  spi2davex: unspecific BadRequest error instead of error code matching the RepositoryException


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@929516 13f79535-47bb-0310-9956-ffa450edef68

-            throw new DiffException(e.getMessage(), e);
+            if (e instanceof DiffException) {
+                throw (DiffException) e;
+            } else {
+                throw new DiffException(e.getMessage(), e);
+            }
-            throw new DiffException(e.getMessage());
+            if (e instanceof DiffException) {
+                throw (DiffException) e;
+            } else {
+                throw new DiffException(e.getMessage(), e);
+            }
-                    throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");
+                    throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format.");
+                throw new DiffException("Invalid DIFF format.");
-                    throw new IOException("Invalid DIFF format");
+                    throw new DiffException(e.getMessage(), e);
-                throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");
+                throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");                
+                throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format: NULL key.");
+                throw new DiffException("Invalid DIFF format: NULL key.");
