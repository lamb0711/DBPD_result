- moving convenience method to commons.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@372500 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.util.Text;
-        StringBuffer result = new StringBuffer();
-
-        // Value:
-        // +--+-+--------+-+-----------------+
-        // |  |p|-->     |q|-->              |
-        // +--+-+--------+-+-----------------+
-        int p = 0, q = value.indexOf("${");                // Find first ${
-        while (q != -1) {
-            result.append(value.substring(p, q));          // Text before ${
-            p = q;
-            q = value.indexOf("}", q + 2);                 // Find }
-            if (q != -1) {
-                String variable = value.substring(p + 2, q);
-                String replacement = variables.getProperty(variable);
-                if (replacement == null) {
-                    throw new ConfigurationException(
-                            "Replacement not found for ${" + variable + "}.");
-                }
-                result.append(replacement);
-                p = q + 1;
-                q = value.indexOf("${", p);                // Find next ${
-            }
+        try {
+            return Text.replaceVariables(variables, value, false);
+        } catch (IllegalArgumentException e) {
+            throw new ConfigurationException(e.getMessage());
-        result.append(value.substring(p, value.length())); // Trailing text
-
-        return result.toString();
