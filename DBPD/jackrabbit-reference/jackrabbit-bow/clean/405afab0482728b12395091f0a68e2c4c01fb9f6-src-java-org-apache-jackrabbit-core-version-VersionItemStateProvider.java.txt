- fixing deadlock in persistence version manager
- fixing issues with frozen version histories

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@122850 13f79535-47bb-0310-9956-ffa450edef68

-                            VersionManager.NODENAME_FROZEN,
+                            fn.getName(),
-                    mapFrozenNode(state, fn);
+                    state.setPropertyValue(VersionManager.PROPNAME_BASE_VERSION, InternalValue.create(UUID.fromString(fn.getBaseVersionId())));
+                    state.setPropertyValue(VersionManager.PROPNAME_VERSION_HISTORY, InternalValue.create(UUID.fromString(fn.getVersionHistoryId())));
-     * maps a frozen node
-     * @param state
-     * @param node
-     * @return
-     * @throws RepositoryException
-     */
-    private VirtualNodeState mapFrozenNode(VirtualNodeState state,
-                                           InternalFrozenVersionHistory node)
-            throws RepositoryException {
-
-        // map properties
-        state.setPropertyValue(VersionManager.PROPNAME_BASE_VERSION, InternalValue.create(node.getBaseVersionId()));
-        state.setPropertyValue(VersionManager.PROPNAME_VERSION_HISTORY, InternalValue.create(node.getVersionHistoryId()));
-        return state;
-    }
-
-    /**
