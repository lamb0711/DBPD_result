JCR-1363: Migrate to Lucene 2.3

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@696653 13f79535-47bb-0310-9956-ffa450edef68

-                    reader.close();
+                    Util.closeOrRelease(reader);
-        CachingMultiIndexReader reader = index.getIndexReader();
+        IndexReader reader;
-            CachingMultiIndexReader[] readers = {reader, parentReader};
-            return new CombinedIndexReader(readers);
+            CachingMultiIndexReader[] readers = {index.getIndexReader(), parentReader};
+            reader = new CombinedIndexReader(readers);
-            return reader;
+            reader = index.getIndexReader();
+        return new JackrabbitIndexReader(reader);
-                IndexReader reader = index.getIndexReader();
+                CachingMultiIndexReader reader = index.getIndexReader();
-                    reader.close();
+                    reader.release();
-        public CombinedIndexReader(CachingMultiIndexReader[] indexReaders) throws IOException {
+        public CombinedIndexReader(CachingMultiIndexReader[] indexReaders) {
+        /**
+         * {@inheritDoc}
+         */
+        public void release() throws IOException {
+            for (int i = 0; i < subReaders.length; i++) {
+                subReaders[i].release();
+            }
+        }
+
