JCR-1588: 283 Access Control

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@689499 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.principal.ItemBasedPrincipal;
-                principal = new AdminPrincipal(getPrincipalName());
+                principal = new NodeBasedAdminPrincipal(getPrincipalName());
+
+    //--------------------------------------------------------------------------
+    /**
+     *
+     */
+    private class NodeBasedAdminPrincipal extends AdminPrincipal implements ItemBasedPrincipal {
+
+        public NodeBasedAdminPrincipal(String adminId) {
+            super(adminId);
+        }
+
+        public String getPath() throws RepositoryException {
+            return getNode().getPath();
+        }
+    }
