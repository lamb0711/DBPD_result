work in progress

findings from meeting
1) remove methods related to nt registration from RepositoryService since that functionality is not defined by jsr170



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@497329 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.nodetype.NodeTypeStorage;
+import org.apache.jackrabbit.jcr2spi.nodetype.NodeTypeStorage;
-import org.apache.jackrabbit.spi.QNodeTypeDefinition;
+import org.apache.jackrabbit.spi.QNodeTypeDefinition;
-public class WorkspaceManager implements UpdatableItemStateManager, NamespaceStorage, NodeTypeStorage, AccessManager {
+public class WorkspaceManager implements UpdatableItemStateManager, NamespaceStorage, AccessManager {
-        return NodeTypeRegistryImpl.create(ntDefs, this, rootNodeDef, nsRegistry);
+        NodeTypeStorage ntst = new NodeTypeStorage() {
+            public void registerNodeTypes(QNodeTypeDefinition[] nodeTypeDefs) throws NoSuchNodeTypeException, RepositoryException {
+                throw new UnsupportedOperationException("NodeType registration not yet defined by the SPI");
+            }
+            public void reregisterNodeTypes(QNodeTypeDefinition[] nodeTypeDefs) throws NoSuchNodeTypeException, RepositoryException {
+                throw new UnsupportedOperationException("NodeType registration not yet defined by the SPI");
+            }
+            public void unregisterNodeTypes(QName[] nodeTypeNames) throws NoSuchNodeTypeException, RepositoryException {
+                throw new UnsupportedOperationException("NodeType registration not yet defined by the SPI");
+            }
+        };
+        return NodeTypeRegistryImpl.create(ntDefs, ntst, rootNodeDef, nsRegistry);
-    //----------------------------------------------------< NodetypeStorage >---
-    /**
-     * @inheritDoc
-     */
-    public void registerNodeTypes(QNodeTypeDefinition[] nodeTypeDefs) throws NoSuchNodeTypeException, UnsupportedRepositoryOperationException, RepositoryException {
-        service.registerNodeTypes(sessionInfo, nodeTypeDefs);
-    }
-
-    /**
-     * @inheritDoc
-     */
-    public void reregisterNodeTypes(QNodeTypeDefinition[] nodeTypeDefs) throws NoSuchNodeTypeException, UnsupportedRepositoryOperationException, RepositoryException {
-        service.reregisterNodeTypes(sessionInfo, nodeTypeDefs);
-    }
-
-    /**
-     * @inheritDoc
-     */
-    public void unregisterNodeTypes(QName[] nodeTypeNames) throws NoSuchNodeTypeException, UnsupportedRepositoryOperationException, RepositoryException {
-        service.unregisterNodeTypes(sessionInfo, nodeTypeNames);
-    }
-
