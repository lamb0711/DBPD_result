JCR-2415: Update Lucene to 3.0
- Merge all from JCR-2415-lucene-3.0 at 1064038 (reintegration)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1064058 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.File;
-import java.io.FileFilter;
-import java.io.IOException;
-
+import java.io.File;
+import java.io.FileFilter;
+import java.io.IOException;
+
-            directory = FSDirectory.getDirectory(dir,
+            if (!dir.mkdirs()) {
+                if (!dir.isDirectory()) {
+                    throw new IOException("Unable to create directory: '" + dir + "'");
+                }
+            }
+            directory = FSDirectory.open(dir,
-        public String[] list() throws IOException {
+        @Override
+        public String[] listAll() throws IOException {
+        @Override
+        @Override
+        @Override
+        @Override
-        public void renameFile(String from, String to) throws IOException {
-            directory.renameFile(from, to);
-        }
-
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
-            return this.getClass().getName() + "@" + directory;
+            return getClass().getName() + '@' + directory;
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
+        @Override
