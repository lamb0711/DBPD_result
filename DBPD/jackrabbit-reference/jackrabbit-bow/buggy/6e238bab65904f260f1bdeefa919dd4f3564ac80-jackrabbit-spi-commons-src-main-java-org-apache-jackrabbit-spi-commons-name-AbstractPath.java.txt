JCR-2744: Avoid element arrays in PathImpl

Avoid using Path.getNameElement() where possible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997303 13f79535-47bb-0310-9956-ffa450edef68

+        } else if (relative.getLength() > 1) {
+            Path first = relative.getFirstElements();
+            Path last = relative.getLastElement();
+            return resolve(first).resolve(last);
+        } else if (relative.denotesCurrent()) {
+            return new CurrentPath(this);
+        } else if (relative.denotesParent()) {
+            return new ParentPath(this);
+        } else if (relative.denotesName()) {
+            return new NamePath(this, relative.getNameElement());
-            Path path = this;
-            int n = relative.getLength();
-            if (n > 1) {
-                path = resolve(relative.subPath(0, n - 1));
-            }
-            return path.resolve(relative.getNameElement());
+            throw new IllegalArgumentException(
+                    "Unknown path type: " + relative);
