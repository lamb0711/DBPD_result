JCR-890: concurrent read-only access to a session

Leverage SessionContext in more places.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957141 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.RepositoryContext;
+import org.apache.jackrabbit.core.data.DataStore;
+import org.apache.jackrabbit.core.id.NodeId;
+    private final RepositoryContext repositoryContext;
+
-    public SessionContext(SessionImpl session) {
+    public SessionContext(
+            RepositoryContext repositoryContext, SessionImpl session) {
+        assert repositoryContext != null;
+        assert session != null;
+        this.repositoryContext = repositoryContext;
+    public RepositoryContext getRepositoryContext() {
+        return repositoryContext;
+    }
+
+    /**
+     * Returns the root node identifier of the repository.
+     *
+     * @return root node identifier
+     */
+    public NodeId getRootNodeId() {
+        return repositoryContext.getRootNodeId();
+    }
+
+    /**
+     * Returns the data store of this repository, or <code>null</code>
+     * if a data store is not configured.
+     *
+     * @return data store, or <code>null</code>
+     */
+    public DataStore getDataStore() {
+        return repositoryContext.getDataStore();
+    }
+
