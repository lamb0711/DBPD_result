consolidated Value de-/serialization code in static methods of ValueHelper class

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159686 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.util.Base64;
+import org.apache.jackrabbit.core.util.ValueHelper;
-import java.io.ByteArrayInputStream;
-import java.io.ByteArrayOutputStream;
-import java.io.IOException;
-                        if (currentPropType == PropertyType.BINARY) {
-                            // base64 encoded binary value
-                            ByteArrayOutputStream baos = new ByteArrayOutputStream();
-                            try {
-                                Base64.decode(value, baos);
-                                baos.close();
-                                vals[i] = InternalValue.create(new ByteArrayInputStream(baos.toByteArray()));
-                            } catch (IOException ioe) {
-                                throw new SAXException("failed to decode binary value", ioe);
-                            }
-                        } else {
-                            vals[i] = InternalValue.create(value,
-                                    currentPropType, nsContext);
-                        }
+                        vals[i] = InternalValue.create(
+                                ValueHelper.deserialize(value, currentPropType,
+                                        false), nsContext);
