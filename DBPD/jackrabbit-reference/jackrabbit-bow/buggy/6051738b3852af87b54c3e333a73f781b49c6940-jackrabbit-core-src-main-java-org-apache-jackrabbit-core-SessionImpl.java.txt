JCR-2740 On missing child node, automatically remove the entry

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1040601 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Name of the session attribute that controls whether repository
+     * inconsistencies should be automatically fixed when traversing over child
+     * nodes, when trying to add a child node, or removing a child node.
+     *
+     * @since Apache Jackrabbit 2.2
+     * @see <a href="https://issues.apache.org/jira/browse/JCR-2740">JCR-2740</a>
+     */
+    public static final String AUTO_FIX_CORRUPTIONS =
+        "org.apache.jackrabbit.autoFixCorruptions";
+
+     * Checks whether repository inconsistencies should be automatically fixed
+     * when traversing over child nodes, when trying to add a child node, or
+     * when removing a child node.
+     *
+     * @return <code>true</code> if the {@link #AUTO_FIX_CORRUPTIONS}
+     *         attribute is set, <code>false</code> otherwise
+     * @since Apache Jackrabbit 2.2
+     * @see <a href="https://issues.apache.org/jira/browse/JCR-2740">JCR-2740</a>
+     */
+    protected boolean autoFixCorruptions() {
+        return getAttribute(AUTO_FIX_CORRUPTIONS) != null;
+    }
+
+    /**
