- improved versioning / virtual node behaviour
  fixes jira issues: JCR-20, JCR-22 and JCR-23

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@111518 13f79535-47bb-0310-9956-ffa450edef68

-     * the internal frozen node that was versioned with this version
-     */
-    private InternalFrozenNode frozen;
-
-    /**
-     * @throws RepositoryException
-    InternalVersion(InternalVersionHistory vh, PersistentNode node) throws RepositoryException {
+    InternalVersion(InternalVersionHistory vh, PersistentNode node) {
-        // get frozen node
-        PersistentNode pNode = node.getNode(PersistentVersionManager.NODENAME_FROZEN, 1);
-        frozen = pNode == null ? null : new InternalFrozenNode(this, pNode);
-
-        return frozen;
+        // get frozen node
+        try {
+            PersistentNode pNode = node.getNode(PersistentVersionManager.NODENAME_FROZEN, 1);
+            return pNode == null ? null : new InternalFrozenNode(this, pNode);
+        } catch (RepositoryException e) {
+            // ignore
+        }
+        return null;
