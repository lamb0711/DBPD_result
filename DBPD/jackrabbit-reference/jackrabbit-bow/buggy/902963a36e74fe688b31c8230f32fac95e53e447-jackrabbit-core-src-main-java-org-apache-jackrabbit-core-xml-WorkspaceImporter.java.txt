JCR-1128: XML import always throws ItemExistsException when trying to overwrite existing nodes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@575325 13f79535-47bb-0310-9956-ffa450edef68

-                // parent node was skipped, skip this child node also
+                // parent node was skipped, skip this child node too
-                        throw new ItemExistsException(itemOps.safeGetJCRPath(existing.getNodeId()));
+                        // edge case: colliding node does have same uuid
+                        // (see http://issues.apache.org/jira/browse/JCR-1128)
+                        if (! (idExisting.equals(id)
+                                && (uuidBehavior == ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING
+                                || uuidBehavior == ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING))) {
+                            throw new ItemExistsException(itemOps.safeGetJCRPath(existing.getNodeId()));
+                        }
+                        // fall through
