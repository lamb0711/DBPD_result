Move preparation of events out of write lock to prevent possible deadlock situations.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@239609 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.ItemId;
+import org.apache.jackrabbit.core.PropertyId;
+import org.apache.jackrabbit.core.NodeId;
+     * Returns the id of the associated item of this <code>EventState</code>.
+     *
+     * @return the <code>ItemId</code>.
+     */
+    ItemId getId() {
+        if (childUUID == null) {
+            // property event
+            return new PropertyId(parentUUID, childRelPath.getName());
+        } else {
+            // node event
+            return new NodeId(childUUID);
+        }
+    }
+
+    /**
