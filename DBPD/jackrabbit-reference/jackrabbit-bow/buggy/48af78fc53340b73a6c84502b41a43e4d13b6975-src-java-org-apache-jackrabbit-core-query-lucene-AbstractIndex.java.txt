Improve performance for complex path queries involving descendant-or-self axis. e.g: //foo//bar//*[@prop='bla']

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@164208 13f79535-47bb-0310-9956-ffa450edef68

-            indexReader.close();
-            log.debug("closing IndexReader.");
-            indexReader = null;
+            if (indexReader instanceof CachingIndexReader) {
+                // only commit changes, do not close
+                log.debug("committing IndexReader.");
+                ((CachingIndexReader) indexReader).commitDeleted();
+            } else {
+                indexReader.close();
+                indexReader = null;
+            }
+            log.debug("committing IndexWriter.");
-            log.debug("closing IndexWriter.");
