JCR-1799 updating events swallowed (CacheBehavior.OBSERVATION)   	
JCR-1783 incomplete changelog when combining move with removal of new destination parent

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@704361 13f79535-47bb-0310-9956-ffa450edef68

-        // retrieve id of state that has been created during execution of AddNode
-        NodeEntry entry;
-        List cne = getNodeEntry().getNodeEntries(nodeName);
-        if (definition.allowsSameNameSiblings()) {
-            // TODO TOBEFIXED find proper solution. problem with SNSs
-            entry = ((NodeEntry)cne.get(cne.size()-1));
-        } else {
-            entry = ((NodeEntry)cne.get(0));
-        }
-        return (Node) itemMgr.getItem(entry);
+        List addedStates = ((AddNode) an).getAddedStates();
+        return (Node) itemMgr.getItem(((NodeState) addedStates.get(0)).getHierarchyEntry());
