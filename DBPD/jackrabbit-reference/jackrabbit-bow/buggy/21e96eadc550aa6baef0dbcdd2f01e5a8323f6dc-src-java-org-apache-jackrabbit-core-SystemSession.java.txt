migrating to v0.15 of the jsr 170 spec

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@55516 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.PathNotFoundException;
+import javax.jcr.AccessDeniedException;
+import javax.jcr.ItemNotFoundException;
-        accessMgr = new SystemAccessManqager();
+        accessMgr = new SystemAccessManqager(hierMgr);
-        SystemAccessManqager() {
-            super(null, getHierarchyManager(), getNamespaceResolver());
+        SystemAccessManqager(HierarchyManager hierMgr) {
+            super(null, hierMgr);
+        }
+
+        //----------------------------------------------------< AccessManager >
+        /**
+         * @see AccessManager#checkPermission(ItemId, int)
+         */
+        public void checkPermission(ItemId id, int permissions)
+                throws AccessDeniedException, ItemNotFoundException,
+                RepositoryException {
+            // allow everything
-         * @see AbstractAccessManager#getPermissions(String)
+         * @see AccessManager#isGranted(ItemId, int)
-        public long getPermissions(String absPath)
-                throws PathNotFoundException, RepositoryException {
-            return PermissionImpl.ALL_VALUES;
+        public boolean isGranted(ItemId id, int permissions)
+                throws ItemNotFoundException, RepositoryException {
+            // allow everything
+            return true;
