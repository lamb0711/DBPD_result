versioning implementation is now stores directly in persistence state.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@53784 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Returns the internal values of this property
+     *
+     * @return
+     * @throws RepositoryException
+     */
+    public InternalValue[] internalGetValues() throws RepositoryException {
+
+        // check state of this instance
+        checkItemState();
+
+        // check multi-value flag
+        if (!definition.isMultiple()) {
+            throw new ValueFormatException(safeGetJCRPath() + " is not multi-valued");
+        }
+
+        PropertyState state = (PropertyState) getItemState();
+        return state.getValues();
+    }
+
+    /**
+     * Returns the internal values of this property
+     *
+     * @return
+     * @throws RepositoryException
+     */
+    public InternalValue internalGetValue() throws RepositoryException {
+        // check state of this instance
+        checkItemState();
+
+        // check multi-value flag
+        if (definition.isMultiple()) {
+            throw new ValueFormatException(safeGetJCRPath() + " is multi-valued and can therefore only be retrieved as an array of values");
+        }
+
+        PropertyState state = (PropertyState) getItemState();
+        return state.getValues()[0];
+    }
+
