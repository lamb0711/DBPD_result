work in progress

JCR2SPI
--------------------------------------------------------------

- reorder ItemState/NodeState/PropertyState in order to group
  methods by state types (overlayed workspace state vs. session/transient states)
- add utility methods that allow to determine and validate the
  type of ItemState.
- move childitementry classes to separate package and force usage
  of interface methods
- add checks for state type to ItemManager implementation
- add checks for state type to LockManager
- fix Node.getMixinTypes()
- rename ItemState.pull to 'reset'. remove todo asking for a careful
  merging of wsp-State and introduce a new method 'merge'.

SPI
--------------------------------------------------------------------

- rename login as suggested by julian
- add method dispose(SessionInfo) 
- rename ItemId.getRelativePath to getPath

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@454423 13f79535-47bb-0310-9956-ffa450edef68

-            Path relativePath = itemId.getRelativePath();
+            Path path = itemId.getPath();
-                ItemId uuidId = (relativePath == null) ? itemId : service.getIdFactory().createNodeId(uuid);
-                if (relativePath != null & cache.containsItemId(uuidId)) {
+                ItemId uuidId = (path == null) ? itemId : service.getIdFactory().createNodeId(uuid);
+                if (path != null & cache.containsItemId(uuidId)) {
-            if (relativePath != null && !relativePath.denotesRoot()) {
+            if (path != null && !path.denotesRoot()) {
-                    String jcrPath = PathFormat.format(relativePath, nsResolver);
-                    // TODO: TOBEFIXED rootId is currently build from absolute path and not
-                    // from '.' as description in RS.getRootId defines. similarly
-                    // the PathResolver does not accept a non-normalized root-path.
-                    if (relativePath.isAbsolute()) {
+                    String jcrPath = PathFormat.format(path, nsResolver);
+                    if (path.isAbsolute()) {
