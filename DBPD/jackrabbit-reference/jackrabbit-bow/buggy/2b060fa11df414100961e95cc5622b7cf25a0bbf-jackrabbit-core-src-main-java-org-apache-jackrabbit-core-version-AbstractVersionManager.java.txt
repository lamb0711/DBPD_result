JCR-2209 Versioning operations should be done on the workspace


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@795866 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.value.InternalValue;
-                                      NodeImpl node, boolean simple)
+                                      NodeStateEx node, boolean simple)
-                NodeId actId = node.getProperty(NameConstants.JCR_ACTIVITY).internalGetValue().getNodeId();
+                NodeId actId = node.getPropertyValue(NameConstants.JCR_ACTIVITY).getNodeId();
-
-                                                 NodeImpl node, boolean simple)
+                                                 NodeStateEx node, boolean simple)
-            Value[] values = node.getProperty(NameConstants.JCR_PREDECESSORS).getValues();
-            for (Value value: values) {
-                InternalVersion pred = history.getVersion(NodeId.valueOf(value.getString()));
+            InternalValue[] values = node.getPropertyValues(NameConstants.JCR_PREDECESSORS);
+            for (InternalValue value: values) {
+                InternalVersion pred = history.getVersion(value.getNodeId());
