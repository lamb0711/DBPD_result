JCR-1073: Added getTotalSize() to LazyQueryResultImpl

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@572889 13f79535-47bb-0310-9956-ffa450edef68

-    private static final Logger log = LoggerFactory.getLogger(QueryResultImpl.class);
+    private static final Logger log = LoggerFactory.getLogger(LazyQueryResultImpl.class);
-            int start = resultNodes.size() + invalid;
+            int start = resultNodes.size() + invalid + (int)offset;
-                        if (i < offset) {
-                            invalid++;
-                        } else {
-                            resultNodes.add(new ScoreNode(id, result.score(i)));
-                        }
+                        resultNodes.add(new ScoreNode(id, result.score(i)));
+    
+    /**
+     * Returns the total number of hits. This is the number of results you
+     * will get get if you don't set any limit or offset. Keep in mind that this
+     * number may get smaller if nodes are found in the result set which the
+     * current session has no permission to access.
+     */
+    public int getTotalSize() {
+        return numResults - invalid;
+    }
-            int totalSize = numResults - invalid;
+            int totalSize = getTotalSize();
-                return totalSize;
+                return totalSize - offset;
