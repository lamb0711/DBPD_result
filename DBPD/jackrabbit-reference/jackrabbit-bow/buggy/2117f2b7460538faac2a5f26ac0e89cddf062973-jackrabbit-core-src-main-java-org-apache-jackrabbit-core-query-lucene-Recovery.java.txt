JCR-2216: Append-only index updates

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@801253 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Iterator;
-     * The ids of the uncommitted transactions. Set of Integer objects.
+     * The ids of the uncommitted transactions. Set of Long objects.
-    private final Set losers = new HashSet();
+    private final Set<Long> losers = new HashSet<Long>();
-        List actions = redoLog.getActions();
+        List<MultiIndex.Action> actions = redoLog.getActions();
-        for (Iterator it = actions.iterator(); it.hasNext();) {
-            MultiIndex.Action a = (MultiIndex.Action) it.next();
+        for (MultiIndex.Action a : actions) {
-                losers.add(new Long(a.getTransactionId()));
+                losers.add(a.getTransactionId());
-                losers.remove(new Long(a.getTransactionId()));
+                losers.remove(a.getTransactionId());
-        Set transactionIds = new HashSet();
+        Set<Long> transactionIds = new HashSet<Long>();
-            MultiIndex.Action a = (MultiIndex.Action) actions.get(i);
+            MultiIndex.Action a = actions.get(i);
-                transactionIds.add(new Long(a.getTransactionId()));
+                transactionIds.add(a.getTransactionId());
-            MultiIndex.Action a = (MultiIndex.Action) actions.get(i);
+            MultiIndex.Action a = actions.get(i);
-            MultiIndex.Action a = (MultiIndex.Action) actions.get(i);
+            MultiIndex.Action a = actions.get(i);
-            MultiIndex.Action a = (MultiIndex.Action) actions.get(i);
+            MultiIndex.Action a = actions.get(i);
