fixed incorrect test cases and fixed code that caused valid testcases to fail

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@160903 13f79535-47bb-0310-9956-ffa450edef68

-            // remove from tail to avoid problems with same-name siblings
-            for (int i = tmp.size() - 1; i >= 0; i--) {
+            for (int i = 0; i < tmp.size(); i++) {
-            // destroy target
+            // destroy target state (pass overlayed state since target state
+            // might have been modified during unlinking)
+            stateMgr.destroy(target.getOverlayedState());
