JCR-2640: Internal repository context

Use the RepositoryContext to track the ItemStateCacheFactory instance.
Remove the RepositoryImpl member variables from SessionImpl and WorkspaceImpl.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948874 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.state.ItemStateCacheFactory;
+     * Item state cache factory of this repository.
+     */
+    private ItemStateCacheFactory itemStateCacheFactory;
+
+    /**
+    /**
+     * Returns the item state cache factory of this repository.
+     *
+     * @return item state cache factory
+     */
+    public ItemStateCacheFactory getItemStateCacheFactory() {
+        assert itemStateCacheFactory != null;
+        return itemStateCacheFactory;
+    }
+
+    /**
+     * Sets the item state cache factory of this repository.
+     *
+     * @param itemStateCacheFactory item state cache factory
+     */
+    void setItemStateCacheFactory(ItemStateCacheFactory itemStateCacheFactory) {
+        assert itemStateCacheFactory != null;
+        this.itemStateCacheFactory = itemStateCacheFactory;
+    }
+
