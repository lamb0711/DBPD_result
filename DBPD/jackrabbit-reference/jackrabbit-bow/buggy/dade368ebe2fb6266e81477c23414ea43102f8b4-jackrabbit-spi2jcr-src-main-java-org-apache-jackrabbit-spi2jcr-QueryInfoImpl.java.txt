JCR-2076: JSR 283: QOM and SQL2
- change return type of QueryInfo.getColumnNames() from Name[] to String[]
- jcr2spi, spi2dav, spi2jcr implementation (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@789269 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.commons.name.NameConstants;
-import org.apache.jackrabbit.spi.commons.conversion.NameException;
-    private final Name[] columnNames;
+    private final String[] columnNames;
-     * The resolved name of the jcr:score column.
+     * The names of the selectors in the query result.
-    private final String scoreName;
-
-    /**
-     * The resolved name of the jcr:path column.
-     */
-    private final String pathName;
+    private final Name[] selectorNames;
-     * @param resolver
+     * @param resolver      the name path resolver.
-        String[] jcrNames = result.getColumnNames();
-        this.columnNames = new Name[jcrNames.length];
-        try {
-            for (int i = 0; i < jcrNames.length; i++) {
-                columnNames[i] = resolver.getQName(jcrNames[i]);
-            }
-            this.scoreName = resolver.getJCRName(NameConstants.JCR_SCORE);
-            this.pathName = resolver.getJCRName(NameConstants.JCR_PATH);
-        } catch (NameException e) {
-            throw new RepositoryException(e.getMessage(), e);
+        this.columnNames = result.getColumnNames();
+        // TODO
+        String[] sn = new String[0]; //result.getSelectorNames();
+        this.selectorNames = new Name[sn.length];
+        for (int i = 0; i < sn.length; i++) {
+            selectorNames[i] = resolver.getQName(sn[i]);
-            final String[] columnJcrNames = result.getColumnNames();
-                                (Row) super.next(), columnJcrNames, scoreName,
-                                pathName, idFactory, resolver, qValueFactory);
+                                (Row) super.next(), columnNames, selectorNames,
+                                idFactory, resolver, qValueFactory);
-    public Name[] getColumnNames() {
-        Name[] names = new Name[columnNames.length];
+    public String[] getColumnNames() {
+        String[] names = new String[columnNames.length];
