first implementation of jta support

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@55234 13f79535-47bb-0310-9956-ffa450edef68

-    protected final ItemId id;
+    protected ItemId id;
-    private transient ItemState overlayedState;
+    protected transient ItemState overlayedState;
+            case STATUS_EXISTING:
-        parentUUID = overlayedState.parentUUID;
-        baseVersionID = overlayedState.getBaseVersionID();
-        lastModified = overlayedState.getLastModified();
-        id = overlayedState.getId();
+     * Copy state from another state. Copies over all state variables from
+     * another state.
+     *
+     * @param state state to copy
+     */
+    protected void copy(ItemState state) {
+        parentUUID = state.parentUUID;
+        baseVersionID = state.getBaseVersionID();
+        lastModified = state.getLastModified();
+        id = state.getId();
+    }
+
+    /**
+        disconnect();
+        status = STATUS_UNDEFINED;
+    }
+
+    /**
+     * Disconnect this state from the underlying overlayed state.
+     */
+    protected void disconnect() {
-        status = STATUS_UNDEFINED;
-     * representing has been changed.
+     * representing has been updated.
-    protected void notifyStateModified() {
+    protected void notifyStateUpdated() {
