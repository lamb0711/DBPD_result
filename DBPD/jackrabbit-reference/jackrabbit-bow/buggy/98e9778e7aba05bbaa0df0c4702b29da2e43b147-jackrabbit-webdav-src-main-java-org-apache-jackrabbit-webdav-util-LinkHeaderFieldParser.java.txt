JCR-2542: spi2dav: EventFilters not respected

- spi.commons extension interface for Session extension
- noLocal flag support
- client sends session identifier (in Link header field) on write operations so that POLL can compute the flag
- SUBSCRIBE returns flags indicating extension features 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1203173 13f79535-47bb-0310-9956-ffa450edef68

-        List<LinkRelation> tmp = new ArrayList<LinkRelation>();
+        if (en.hasMoreElements()) {
+            List<LinkRelation> tmp = new ArrayList<LinkRelation>();
-        while (en.hasMoreElements()) {
-            addFields(tmp, en.nextElement().toString());
+            while (en.hasMoreElements()) {
+                addFields(tmp, en.nextElement().toString());
+            }
+
+            relations = Collections.unmodifiableList(tmp);
+        } else {
+            // optimize case of no Link headers
+            relations = Collections.emptyList();
-
-        relations = Collections.unmodifiableList(tmp);
