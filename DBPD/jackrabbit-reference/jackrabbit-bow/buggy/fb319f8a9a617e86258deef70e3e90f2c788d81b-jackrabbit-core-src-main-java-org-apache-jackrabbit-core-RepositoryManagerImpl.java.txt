JCR-2640: Internal repository context

Commit the first draft patch, more updates to come...

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948757 13f79535-47bb-0310-9956-ffa450edef68

-        InternalVersionManagerImpl vm = (InternalVersionManagerImpl) rep.getVersionManager();
+        InternalVersionManagerImpl vm = rep.context.getInternalVersionManager();
-            SessionImpl session = SystemSession.create(rep, wspInfo.getConfig());
+            SessionImpl session =
+                SystemSession.create(rep.context, wspInfo.getConfig());
