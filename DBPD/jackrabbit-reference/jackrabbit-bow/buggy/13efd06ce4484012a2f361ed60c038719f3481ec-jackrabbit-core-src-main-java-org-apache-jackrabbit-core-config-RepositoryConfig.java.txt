JCR-1605 RepositoryLock does not work on NFS sometimes (configurable repository lock)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@744956 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.util.RepositoryLockMechanism;
+import org.apache.jackrabbit.core.util.RepositoryLockMechanismFactory;
-     * The optional data store factory, returns <code>null</code> if
-     * the data store is not configured.
+     * The data store factory.
+    
+    /**
+     * The repository lock mechanism factory.
+     */
+    private final RepositoryLockMechanismFactory rlf;
+            RepositoryLockMechanismFactory rlf,
+        this.rlf = rlf;
-                if (configContent == null)
-                {
+                if (configContent == null) {
-                }
-                else
-                {
+                } else {
+    /**
+     * Creates and returns the configured repository lock mechanism. This method
+     * returns the default repository lock mechanism if no other mechanism is
+     * configured.
+     * 
+     * @return the repository lock mechanism (never <code>null</code>)
+     * @throws RepositoryException if the repository lock mechanism can not be created
+     */
+    public RepositoryLockMechanism getRepositoryLockMechanism() throws RepositoryException {
+        return rlf.getRepositoryLockMechanism();
+    }
+
