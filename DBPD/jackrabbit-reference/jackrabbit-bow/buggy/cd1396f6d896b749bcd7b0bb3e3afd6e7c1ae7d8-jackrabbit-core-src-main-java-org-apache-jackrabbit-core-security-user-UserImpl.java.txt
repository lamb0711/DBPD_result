JCR-2199 - Improvements to user management
- Allow subclasses of UserManagerImpl/UserImpl for custom implementations


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@792467 13f79535-47bb-0310-9956-ffa450edef68

-class UserImpl extends AuthorizableImpl implements User {
+public class UserImpl extends AuthorizableImpl implements User {
-    private UserImpl(NodeImpl node, UserManagerImpl userManager) throws RepositoryException {
+    protected UserImpl(NodeImpl node, UserManagerImpl userManager) throws RepositoryException {
-    /**
-     * @param node
-     * @param userManager
-     * @return
-     * @throws RepositoryException
-     */
-    static User create(NodeImpl node, UserManagerImpl userManager) throws RepositoryException {
-        if (node == null || !node.isNodeType(NT_REP_USER)) {
-            throw new IllegalArgumentException();
-        }
-        if (!Text.isDescendant(USERS_PATH, node.getPath())) {
-            throw new IllegalArgumentException("User has to be within the User Path");
-        }
-        return new UserImpl(node, userManager);
-    }
