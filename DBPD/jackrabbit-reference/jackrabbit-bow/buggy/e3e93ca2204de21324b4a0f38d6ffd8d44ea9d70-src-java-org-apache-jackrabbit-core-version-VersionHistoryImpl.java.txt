- adding indexing of nodetype 
- fixing indexing of versioning

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159669 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.PropertyImpl;
-import org.apache.jackrabbit.core.RepositoryImpl;
-    public void addVersionLabel(String version, String label, boolean move)
+    public void addVersionLabel(String versionName, String label, boolean move)
-            QName name = QName.fromJCRName(version, session.getNamespaceResolver());
-            QName qLabel = QName.fromJCRName(label, session.getNamespaceResolver());
-            history.addVersionLabel(name, qLabel, move);
+            session.getVersionManager().setVersionLabel(
+                    this,
+                    QName.fromJCRName(versionName, session.getNamespaceResolver()),
+                    QName.fromJCRName(label, session.getNamespaceResolver()),
+                    move
+            );
-            QName qLabel = QName.fromJCRName(label, session.getNamespaceResolver());
-            history.removeVersionLabel(qLabel);
+            session.getVersionManager().setVersionLabel(
+                    this,
+                    null,
+                    QName.fromJCRName(label, session.getNamespaceResolver()),
+                    true
+            );
-            QName name = QName.fromJCRName(versionName, session.getNamespaceResolver());
-            history.removeVersion(name);
+            session.getVersionManager().removeVersion(
+                    this,
+                    QName.fromJCRName(versionName, session.getNamespaceResolver())
+            );
+
+
+    /**
+     * Returns the internal version history
+     * @return
+     */
+    public InternalVersionHistory getInternalVersionHistory() {
+        return history;
+    }
