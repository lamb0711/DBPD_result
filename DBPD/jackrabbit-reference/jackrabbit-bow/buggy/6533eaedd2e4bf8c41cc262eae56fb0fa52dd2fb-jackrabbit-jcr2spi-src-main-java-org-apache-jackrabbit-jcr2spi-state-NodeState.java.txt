JCR-1547: JCR2SPI: remove dependency to state-package within entprovider interface

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@650417 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.QValue;
+     * TODO: clarify usage
+     * In case the status of the given node state is not {@link Status#EXISTING}
+     * the transiently added mixin types are taken into account as well.
+     * 
+     * @return
+     */
+    public synchronized Name[] getAllNodeTypeNames() {
+        Name[] allNtNames;
+        if (getStatus() == Status.EXISTING) {
+            allNtNames = getNodeTypeNames();
+        } else {
+            // TODO: check if correct (and only used for creating new)
+            Name primaryType = getNodeTypeName();
+            allNtNames = new Name[] { primaryType }; // default
+            try {
+                PropertyEntry pe = getNodeEntry().getPropertyEntry(NameConstants.JCR_MIXINTYPES, true);
+                if (pe != null) {
+                    PropertyState mixins = pe.getPropertyState();
+                    QValue[] values = mixins.getValues();
+                    allNtNames = new Name[values.length + 1];
+                    for (int i = 0; i < values.length; i++) {
+                        allNtNames[i] = values[i].getName();
+                    }
+                    allNtNames[values.length] = primaryType;
+                } // else: no jcr:mixinTypes property exists -> ignore
+            } catch (RepositoryException e) {
+                // unexpected error: ignore
+            }
+        }
+        return allNtNames;
+    }
+
+    /**
