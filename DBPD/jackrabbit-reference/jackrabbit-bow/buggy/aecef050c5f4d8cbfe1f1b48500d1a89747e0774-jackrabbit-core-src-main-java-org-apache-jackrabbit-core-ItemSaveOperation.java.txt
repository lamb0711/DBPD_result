JCR-2650: don't silently merge session-local transient changes with external changes before save().

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@966697 13f79535-47bb-0310-9956-ffa450edef68

-     * within the scope of <code>this.{@link #save()}</code>. The collection
+     * within the scope of <code>this.{@link #perform(SessionContext)}</code>. The collection
-                    case ItemState.STATUS_STALE_MODIFIED:
-                        throw new InvalidItemStateException(
-                                "Item cannot be saved because it has been "
-                                + "modified externally: " + this);
-
-                case ItemState.STATUS_STALE_MODIFIED:
-                    throw new InvalidItemStateException(
-                            "Item cannot be saved because it has been"
-                            + " modified externally: " + this);
-
-     * <code>this.{@link #save()}</code>.
+     * <code>this.{@link #perform(SessionContext)}</code>.
-                switch (transientState.getStatus()) {
-                case ItemState.STATUS_STALE_MODIFIED:
-                    throw new InvalidItemStateException(
-                            "Item can't be removed because it has been"
-                            + " modified externally: "
-                            + transientState.getId());
-                case ItemState.STATUS_STALE_DESTROYED:
+                if (transientState.getStatus() == ItemState.STATUS_STALE_DESTROYED) {
