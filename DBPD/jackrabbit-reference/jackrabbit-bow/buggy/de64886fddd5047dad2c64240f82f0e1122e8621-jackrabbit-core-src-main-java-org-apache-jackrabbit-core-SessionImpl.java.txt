JCR-890: concurrent read-only access to a session

Add ObservationManager to the SessionContext. This prevents warning logs during session logout.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@961326 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.observation.ObservationManagerImpl;
+        context.setObservationManager(
+                createObservationManager(wspConfig.getName()));
+
+    protected ObservationManagerImpl createObservationManager(String wspName)
+            throws RepositoryException {
+        try {
+            return new ObservationManagerImpl(
+                    repositoryContext.getRepository().getObservationDispatcher(wspName),
+                    this, context.getItemManager(),
+                    repositoryContext.getClusterNode());
+        } catch (NoSuchWorkspaceException e) {
+            // should never get here
+            throw new RepositoryException(
+                    "Internal error: failed to create observation manager", e);
+        }
+    }
