- ObservationManager failed to return correct paths for same name siblings (-> SelectClauseTest.testSameNameSibling() failed)

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@71503 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Creates a relative path based on a {@link QName} and an index.
+     * @param name single {@link QName} for this relative path.
+     * @param index index of the sinlge name element.
+     * @return the relative path created from <code>name</code>.
+     * @exception IllegalArgumentException if <code>index</code> is negative.
+     */
+    public static Path create(QName name, int index) {
+        if (index < 0) {
+            throw new IllegalArgumentException("index must not be negative: " + index);
+        }
+        PathElement elem;
+        if (index < 1) {
+            elem = new PathElement(name);
+        } else {
+            elem = new PathElement(name, index);
+        }
+        return new Path(new PathElement[]{elem});
+    }
+
