Make BindableRepository more extensible
- change constructor and init method to protected
- create factory methods to instantiate repository configuration and repository instance.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@478575 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.config.ConfigurationException;
-    private transient Repository delegatee;
+    protected transient Repository delegatee;
-    private BindableRepository(String configFilePath, String repHomeDir) {
+    protected BindableRepository(String configFilePath, String repHomeDir) {
-    private void init() throws RepositoryException {
-        RepositoryConfig config =
-                RepositoryConfig.create(configFilePath, repHomeDir);
-        delegatee = RepositoryImpl.create(config);
+    protected void init() throws RepositoryException {
+        RepositoryConfig config = createRepositoryConfig(configFilePath, repHomeDir);
+        delegatee = createRepository(config);
+    /**
+     * Creates a repository configuration from a path to the repository.xml file
+     * and the repository home directory.
+     *
+     * @param configFilePath path to the repository.xml file.
+     * @param repHomeDir     the repository home directory.
+     * @return the repository configuration.
+     * @throws ConfigurationException on configuration error.
+     */
+    protected RepositoryConfig createRepositoryConfig(String configFilePath,
+                                                      String repHomeDir)
+            throws ConfigurationException {
+        return RepositoryConfig.create(configFilePath, repHomeDir);
+    }
+
+    /**
+     * Creates a plain repository instance from a repository
+     * <code>config</code>.
+     *
+     * @param config the repository configuration.
+     * @return the repository instance.
+     * @throws RepositoryException if an error occurs while creating the
+     *                             repository instance.
+     */
+    protected Repository createRepository(RepositoryConfig config)
+            throws RepositoryException {
+        return RepositoryImpl.create(config);
+    }
+
