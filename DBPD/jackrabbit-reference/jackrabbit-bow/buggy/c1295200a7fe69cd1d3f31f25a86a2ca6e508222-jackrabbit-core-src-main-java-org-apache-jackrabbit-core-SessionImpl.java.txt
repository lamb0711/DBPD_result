JCR-1932: Session.getAttributes( ) call always returns an empty array

Added a protected SessionImpl.setAttribute() method to set the attributes of a session.

Use the method in RepositoryImpl.login() when a SimpleCredentials instance has been passed.

Added a test case for this.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@744954 13f79535-47bb-0310-9956-ffa450edef68

+     * Sets the named attribute. If the value is <code>null</code>, then
+     * the named attribute is removed.
+     *
+     * @see <a href="https://issues.apache.org/jira/browse/JCR-1932">JCR-1932</a>
+     * @param name attribute name
+     * @param value attribute value
+     * @since Apache Jackrabbit 1.6
+     */
+    protected void setAttribute(String name, Object value) {
+        if (value != null) {
+            attributes.put(name, value);
+        } else {
+            attributes.remove(name);
+        }
+    }
+
+    /**
