- use seperate persistence manager for versioning

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@125924 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.state.xml.XMLPersistenceManager;
+
-        // todo: as soon as dynamic workspaces are available, base on system ws
-        SessionImpl verSession = getSystemSession(repConfig.getDefaultWorkspaceName());
-        pvMgr = new NativePVM(verSession);
+        // todo: improve configurability
+        XMLPersistenceManager pm = new XMLPersistenceManager();
+        try {
+            pm.init(versionStore, repConfig.getHomeDir()+"/versions");
+        } catch (Exception e) {
+            throw new RepositoryException(e);
+        }
+        pvMgr = new NativePVM(pm, getNodeTypeRegistry());
