JCR-2781 FileDataStore performance improvements

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1022094 13f79535-47bb-0310-9956-ffa450edef68

-                DataIdentifier identifier = ((BLOBInDataStore) binary).getDataIdentifier();
-                InternalValue value = InternalValue.getInternalValue(identifier, store);
+                BLOBInDataStore blob = (BLOBInDataStore) binary;
+                DataIdentifier identifier = blob.getDataIdentifier();
+                InternalValue value;
+                if (blob.usesDataStore(store)) {
+                    value = InternalValue.getInternalValue(identifier, store, false);
+                } else {
+                    value = InternalValue.getInternalValue(identifier, store, true);
+                }
