JCR-69: removing source parent node after session move throws on save
- fixed bug in observation and added test case

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159487 13f79535-47bb-0310-9956-ffa450edef68

-                    NodeState oldParent = (NodeState) changes.get(new NodeId(oldParentUUID));
+                    NodeState oldParent;
+                    try {
+                        oldParent = (NodeState) changes.get(new NodeId(oldParentUUID));
+                    } catch (NoSuchItemStateException e) {
+                        // old parent has been deleted, retrieve from
+                        // shared item state manager
+                        oldParent = (NodeState) provider.getItemState(new NodeId(oldParentUUID));
+                    }
+
-                            Path oldPath = null;
+                            Path oldPath;
-                NodeState parent = null;
+                NodeState parent;
