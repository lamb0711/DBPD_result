JCR-249, JCR-253

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@331281 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.Node;
-import java.io.InputStream;
-import java.util.Properties;
+import javax.jcr.Item;
+import java.io.OutputStream;
- * This Class implements a export context which is passed to the respective
- * export commands.
- * </p>
- * Please note, that this export context lacks an explicit
- * {@link org.apache.jackrabbit.webdav.DavResource} member. Currently, this
- * information is not needed in any of the known export commands but leaves this
- * I/O framework more generic.
+ * <code>ExportContext</code>...
-public class ExportContext extends AbstractContext {
+public interface ExportContext extends IOContext {
-     * the node to be exported
-     */
-    private Node node;
-
-    /**
-     * the input stream that needs to be set by the export commands
-     */
-    private InputStream inputStream;
-
-    /**
-     * the content length of the data in the input stream
-     */
-    private long contentLength;
-
-    /**
-     * the last modifiaction time of the resource
-     */
-    private long modificationTime;
-
-    /**
-     * the creation time of the resource
-     */
-    private long creationTime;
-
-    /**
-     * the content type of the resource
-     */
-    private String contentType;
-
-    /**
-     * The content language of the resource
-     */
-    private String contentLanguage;
-
-    /**
-     * the ETag of the resource
-     */
-    private String etag;
-
-    /**
-     * Creates a new ExportContext for the given node
-     *
-     * @param exportRoot
-     */
-    public ExportContext(Node exportRoot) {
-        this(null, exportRoot);
-    }
-
-    /**
-     * Creats a new import context with the given root node and property defaults.
-     * @param props
-     * @param exportRoot
-     */
-    public ExportContext(Properties props, Node exportRoot) {
-        super(props);
-        if (exportRoot == null) {
-            throw new IllegalArgumentException("exportRoot can not be null.");
-        }
-        this.node = exportRoot;
-    }
-
-    /**
-     * Creates a new sub context which bases on this contexts properties
-     * @param node
-     * @return
-     */
-    public ExportContext createSubContext(Node node) {
-        return new ExportContext(this, node);
-    }
-
-
-    /**
-     * Returns the input stream
-     *
-     * @return the input stream
-     */
-    public InputStream getInputStream() {
-        return inputStream;
-    }
-
-    /**
-     * Sets a the inpurt stream to the data to be exported. A successfull
-     * export command must set this memeber.
-     *
-     * @param inputStream
-     */
-    public void setInputStream(InputStream inputStream) {
-        this.inputStream = inputStream;
-    }
-
-    /**
-     * Returns the node to be exported
+     * Returns the item to be exported
-    public Node getNode() {
-        return node;
-    }
+    public Item getExportRoot();
-     * Returns the length of the data to be exported
+     * Return the output stream to be used for the export or <code>null</code>
-     * @return the content length
+     * @return output stream or <code>null</code>
-    public long getContentLength() {
-        return contentLength;
-    }
+    public OutputStream getOutputStream();
-     * Sets the length of the data to be exported. A successfull export command
-     * must set this memeber.
+     * Set the content type for the resource content
-     * @param contentLength the content length
+     * @param mimeType
+     * @param encoding
-    public void setContentLength(long contentLength) {
-        this.contentLength = contentLength;
-    }
-
-    /**
-     * Returns the last modification time.
-     *
-     * @return the last modification time.
-     */
-    public long getModificationTime() {
-        return modificationTime;
-    }
-
-    /**
-     * Sets the last modification time. A successfull export command may set
-     * this member.
-     *
-     * @param modificationTime the last modification time
-     */
-    public void setModificationTime(long modificationTime) {
-        this.modificationTime = modificationTime;
-    }
-
-    /**
-     * Returns the creation time of the resource.
-     *
-     * @return the creation time
-     */
-    public long getCreationTime() {
-        return creationTime;
-    }
-
-    /**
-     * Sets the creation time of the resource. A successfull export command may
-     * set this member.
-     *
-     * @param creationTime the creation time
-     */
-    public void setCreationTime(long creationTime) {
-        this.creationTime = creationTime;
-    }
-
-    /**
-     * Returns the content type of the resource.
-     *
-     * @return the content type
-     */
-    public String getContentType() {
-        return contentType;
-    }
-
-    /**
-     * Sets the content type of the resource. A successfull export command
-     * may set this member.
-     * 
-     * @param contentType the content type
-     */
-    public void setContentType(String contentType) {
-        this.contentType = contentType;
-    }
-
-    /**
-     * Returns the content language or <code>null</code>
-     *
-     * @return contentLanguage
-     */
-    public String getContentLanguage() {
-        return contentLanguage;
-    }
+    public void setContentType(String mimeType, String encoding);
-    public void setContentLanguage(String contentLanguage) {
-        this.contentLanguage = contentLanguage;
-    }
+    public void setContentLanguage(String contentLanguage);
-     * Returns the ETag of the resource.
+     * Sets the length of the data.
-     * @return the ETag
+     * @param contentLength the content length
-    public String getETag() {
-        return etag;
-    }
+    public void setContentLength(long contentLength);
+
+    /**
+     * Sets the creation time of the resource. A successful properties export may
+     * set this member.
+     *
+     * @param creationTime the creation time
+     */
+    public void setCreationTime(long creationTime);
+
+    /**
+     * Sets the modification time of the resource
+     *
+     * @param modificationTime the modification time
+     */
+    public void setModificationTime(long modificationTime);
-     *
+     * 
-    public void setETag(String etag) {
-        this.etag = etag;
-    }
+    public void setETag(String etag);
+
+    /**
+     * Sets an arbitrary property to this export context.
+     *
+     * @param propertyName
+     * @param propertyValue
+     */
+    public void setProperty(Object propertyName, Object propertyValue);
