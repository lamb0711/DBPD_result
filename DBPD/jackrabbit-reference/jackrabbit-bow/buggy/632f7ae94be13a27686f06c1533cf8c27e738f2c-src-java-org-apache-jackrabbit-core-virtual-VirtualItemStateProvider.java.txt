- improved versioning

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@122838 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.state.ItemStateProvider;
+import org.apache.jackrabbit.core.nodetype.NodeTypeManagerImpl;
+import org.apache.jackrabbit.core.state.*;
+import org.apache.jackrabbit.core.PropertyId;
+
+import javax.jcr.RepositoryException;
-    /**
-     * Returns a predefined node definition id.
-     *
-     * @param nodename
-     * @return
-     */
-    public NodeDefId getNodeDefId(QName nodename);
-     * Returns a predefined property definition id
-     *
-     * @param propname
+     * Checks if the id referrs to the root of a virtual tree.
+     * @param id
-    public PropDefId getPropDefId(QName propname);
-
+    /**
+     * Returns the id of the root node of the virtual tree.
+     * @return
+     */
+
+    /**
+     * Checks if the node with the given id exists in this item state provider.
+     * @param id
+     * @return
+     */
+    public boolean hasNodeState(NodeId id);
+
+    /**
+     * Checks if the property with the given id exists in this item state provider.
+     * @param id
+     * @return
+     */
+    public boolean hasPropertyState(PropertyId id);
+
+    /**
+     * Returns the node state for the given node id
+     * @param id
+     * @return
+     * @throws ItemStateException
+     * @throws NoSuchItemStateException
+     */
+    public VirtualNodeState getNodeState(NodeId id)
+            throws ItemStateException, NoSuchItemStateException;
+
+    /**
+     * Returns the property state for the give property id
+     * @param id
+     * @return
+     * @throws ItemStateException
+     * @throws NoSuchItemStateException
+     */
+    public VirtualPropertyState getPropertyState(PropertyId id)
+            throws ItemStateException, NoSuchItemStateException;
+
+    /**
+     * Creats a new virtual property state
+     * @param parent
+     * @param name
+     * @param type
+     * @param multiValued
+     * @return
+     * @throws RepositoryException
+     */
+    public VirtualPropertyState createPropertyState(VirtualNodeState parent,
+                                                    QName name, int type,
+                                                    boolean multiValued)
+            throws RepositoryException;
+
+    /**
+     * Creates a new virtual node state
+     * @param parent
+     * @param name
+     * @param uuid
+     * @param nodeTypeName
+     * @return
+     * @throws RepositoryException
+     */
+    public VirtualNodeState createNodeState(VirtualNodeState parent, QName name,
+                                            String uuid, QName nodeTypeName)
+            throws RepositoryException;
+
