JCR-2116: JSR 283: Built-In Node Types (OPV changes)
JCR-2058: JSR 283: VersionManager and new versioning methods (slightly different checkin/restore behavior)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@797662 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Arrays;
+    /**
+     * Checks if this state has the inidcated ancestor
+     * @param nodeId the node id of the ancestor
+     * @return <code>true</code> if it has the inidicated ancestor
+     * @throws RepositoryException if an error occurs
+     */
+    public boolean hasAncestor(NodeId nodeId) throws RepositoryException {
+        if (nodeId.equals(nodeState.getParentId())) {
+            return true;
+        }
+        NodeStateEx parent = getParent();
+        return parent != null && parent.hasAncestor(nodeId);
+    }
