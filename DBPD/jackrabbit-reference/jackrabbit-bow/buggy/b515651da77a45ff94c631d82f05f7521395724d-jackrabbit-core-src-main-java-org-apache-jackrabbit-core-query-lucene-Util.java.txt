JCR-1363: Migrate to Lucene 2.3

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@696653 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.lucene.index.IndexReader;
+
+    /**
+     * Depending on the type of the <code>reader</code> this method either
+     * closes or releases the reader. The reader is released if it implements
+     * {@link ReleaseableIndexReader}.
+     *
+     * @param reader the index reader to close or release.
+     * @throws IOException if an error occurs while closing or releasing the
+     *                     index reader.
+     */
+    public static void closeOrRelease(IndexReader reader) throws IOException {
+        if (reader instanceof ReleaseableIndexReader) {
+            ((ReleaseableIndexReader) reader).release();
+        } else {
+            reader.close();
+        }
+    }
