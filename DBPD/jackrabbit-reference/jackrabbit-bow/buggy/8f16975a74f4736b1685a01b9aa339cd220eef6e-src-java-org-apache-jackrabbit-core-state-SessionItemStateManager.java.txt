- VersionItemStateProvider speedup

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@111706 13f79535-47bb-0310-9956-ffa450edef68

-        // check if there is a virtual state for the specified item
+        // check the virtual root ids (needed for overlay)
-            if (virtualProviders[i].hasItemState(id)) {
+            if (virtualProviders[i].isVirtualRoot(id)) {
+        // check if there is a virtual state for the specified item
+        for (int i = 0; i < virtualProviders.length; i++) {
+            if (virtualProviders[i].hasItemState(id)) {
+                return virtualProviders[i].getItemState(id);
+            }
+        }
+
-	// check if there is a virtual state for the specified item
-	for (int i = 0; i < virtualProviders.length; i++) {
-	    if (virtualProviders[i].hasItemState(id)) {
-		return true;
-	    }
-	}
-
+        // check the virtual root ids (needed for overlay)
+        for (int i = 0; i < virtualProviders.length; i++) {
+            if (virtualProviders[i].isVirtualRoot(id)) {
+                return true;
+            }
+        }
-	return false;
-    }
-
-    /**
-     * Checks if there is a virtual item state
-     *
-     * @param id
-     * @return
-     */
-    private boolean hasVirtualItemState(ItemId id) {
+        // check if there is a virtual state for the specified item
-        return false;
+
+	return false;
