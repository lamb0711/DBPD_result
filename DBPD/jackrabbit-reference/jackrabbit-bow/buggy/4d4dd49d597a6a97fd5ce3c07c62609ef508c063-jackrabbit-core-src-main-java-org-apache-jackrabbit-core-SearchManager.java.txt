JCR-669: Move NamespaceMappings/Index from lucene to namespace registry

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@486099 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.AbstractNamespaceResolver;
-import org.apache.jackrabbit.name.NamespaceResolver;
-import javax.jcr.NamespaceException;
-     * Namespace resolver that is based on the namespace registry itself.
+     * The namespace registry of the repository.
-    private final NamespaceResolver nsResolver;
+    private final NamespaceRegistryImpl nsReg;
+        this.nsReg = nsReg;
-        this.nsResolver = new AbstractNamespaceResolver() {
-            public String getURI(String prefix) throws NamespaceException {
-                try {
-                    return nsReg.getURI(prefix);
-                } catch (RepositoryException e) {
-                    throw new NamespaceException(e.getMessage());
-                }
-            }
-
-            public String getPrefix(String uri) throws NamespaceException {
-                try {
-                    return nsReg.getPrefix(uri);
-                } catch (RepositoryException e) {
-                    throw new NamespaceException(e.getMessage());
-                }
-            }
-        };
-            HierarchyManagerImpl hmgr = new HierarchyManagerImpl(rootNodeId, itemMgr, nsResolver);
+            HierarchyManagerImpl hmgr = new HierarchyManagerImpl(rootNodeId, itemMgr, nsReg);
-                exclude = PathFormat.format(excludePath, nsResolver);
+                exclude = PathFormat.format(excludePath, nsReg);
-                            ntReg, parentHandler, excludedNodeId);
+                            ntReg, nsReg, parentHandler, excludedNodeId);
