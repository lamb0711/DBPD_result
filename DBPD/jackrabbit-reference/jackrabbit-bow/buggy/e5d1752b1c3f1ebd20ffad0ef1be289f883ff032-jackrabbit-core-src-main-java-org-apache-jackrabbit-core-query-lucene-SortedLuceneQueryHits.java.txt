JCR-2415: Update Lucene to 3.0
- Merge all from JCR-2415-lucene-3.0 at 1064038 (reintegration)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1064058 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.IOException;
-import java.util.ArrayList;
-import java.util.List;
-
-import org.apache.lucene.search.TopFieldDocCollector;
+import org.apache.lucene.search.TopFieldCollector;
+import java.io.IOException;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.List;
+
-        TopFieldDocCollector collector = new TopFieldDocCollector(reader, sort, numHits);
+        TopFieldCollector collector = TopFieldCollector.create(sort, numHits, false, true, false, false);
-        this.size = collector.getTotalHits();
+        size = collector.getTotalHits();
-        for (int i = scoreDocs.size(); i < docs.length; i++) {
-            scoreDocs.add(docs[i]);
-        }
+        scoreDocs.addAll(Arrays.asList(docs).subList(scoreDocs.size(), docs.length));
+
