[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

-     * @param rootNodeUUID      the UUID of the root node
+     * @param rootNodeId        the id of the root node
-                          String rootNodeUUID) {
+                          NodeId rootNodeId) {
-        rootNodeId = new NodeId(rootNodeUUID);
+        this.rootNodeId = rootNodeId;
+
-            log.warn("node at " + safeGetJCRPath(state.getId())
+            log.warn("node at " + safeGetJCRPath(state.getNodeId())
-            NodeId parentId = new NodeId(state.getParentUUID());
-            NodeImpl parent = (NodeImpl) getItem(parentId);
+            NodeImpl parent = (NodeImpl) getItem(state.getParentId());
-            NodeState.ChildNodeEntry cne =
-                    (NodeState.ChildNodeEntry) parentState.getChildNodeEntry(state.getUUID());
+            NodeState.ChildNodeEntry cne = parentState.getChildNodeEntry(state.getNodeId());
-            log.warn("property at " + safeGetJCRPath(state.getId())
+            log.warn("property at " + safeGetJCRPath(state.getPropertyId())
-            NodeId parentId = new NodeId(state.getParentUUID());
-            NodeImpl parent = (NodeImpl) getItem(parentId);
+            NodeImpl parent = (NodeImpl) getItem(state.getParentId());
-            NodeId id = new NodeId(entry.getUUID());
-            if (session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (session.getAccessManager().isGranted(entry.getId(), AccessManager.READ)) {
-            NodeId id = new NodeId(entry.getUUID());
-            if (session.getAccessManager().isGranted(id, AccessManager.READ)) {
-                childIds.add(id);
+            if (session.getAccessManager().isGranted(entry.getId(), AccessManager.READ)) {
+                childIds.add(entry.getId());
-
-            PropertyId id = new PropertyId(parentId.getUUID(), propName);
-            if (session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (session.getAccessManager().isGranted(new PropertyId(parentId, propName), AccessManager.READ)) {
-            PropertyId id = new PropertyId(parentId.getUUID(), propName);
+            PropertyId id = new PropertyId(parentId, propName);
-        NodeId id = new NodeId(state.getUUID());
+        NodeId id = state.getNodeId();
-            InternalVersion version =
-                    session.getVersionManager().getVersion(state.getUUID());
-            InternalVersionHistory history =
-                    session.getVersionManager().getVersionHistory(state.getUUID());
-        PropertyId id = new PropertyId(state.getParentUUID(), state.getName());
-        PropertyImpl prop = new PropertyImpl(this, session, id, state, def, listeners);
-        return prop;
+        return new PropertyImpl(
+                this, session, state.getPropertyId(), state, def, listeners);
-        InternalVersion version =
-                session.getVersionManager().getVersion(id.getUUID());
+        InternalVersion version = session.getVersionManager().getVersion(id);
-                session.getVersionManager().getVersionHistory(id.getUUID());
+                session.getVersionManager().getVersionHistory(id);
