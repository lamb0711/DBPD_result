JCR-1926: Text.unescape("%") throws a StringIndexOutOfBoundsException 

Now throws IllegalArgumentException. Also added a relevant test case.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@732703 13f79535-47bb-0310-9956-ffa450edef68

-            if (c == escape) {
+            if (c != escape) {
+                out.write(c);
+            } else if (i + 2 < string.length()) {
-                    throw new IllegalArgumentException();
+                    throw new IllegalArgumentException(
+                            "Escape sequence is not hexadecimal: " + string);
-                out.write(c);
+                throw new IllegalArgumentException(
+                        "Escape sequence is too short: " + string);
