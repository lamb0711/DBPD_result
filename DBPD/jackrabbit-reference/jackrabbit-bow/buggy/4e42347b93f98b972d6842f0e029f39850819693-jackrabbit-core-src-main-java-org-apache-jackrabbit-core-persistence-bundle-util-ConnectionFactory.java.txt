JCR-1305 JNDI data sources with BundleDbPersistenceManager: UnsupportedOperationException

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@613799 13f79535-47bb-0310-9956-ffa450edef68

-                    return ds.getConnection(user, password);
+                    if (isNullOrEmpty(user) && isNullOrEmpty(password)) {
+                        return ds.getConnection();
+                    } else {
+                        return ds.getConnection(user, password);
+                    }
+    
+    /**
+     * Check if a String is null or empty (the length is null).
+     *
+     * @return true if it is null or empty
+     */
+    private static boolean isNullOrEmpty(String s) {
+        return s == null || s.length() == 0;
+    }
