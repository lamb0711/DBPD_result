JCR-257: Use separate index for jcr:system tree

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@388123 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.observation.EventStateCollection;
-        implements VirtualItemStateProvider, InternalXAResource {
+        implements EventStateCollectionFactory, VirtualItemStateProvider, InternalXAResource {
+     * The session that uses this version manager.
+     */
+    private SessionImpl session;
+
+    /**
-                            EventStateCollectionFactory factory)
+                            SessionImpl session)
+        this.session = session;
-                factory, CHANGE_LOG_ATTRIBUTE_NAME);
+                this, CHANGE_LOG_ATTRIBUTE_NAME);
+    //------------------------------------------< EventStateCollectionFactory >
+
+    /**
+     * @inheritDoc
+     */
+    public EventStateCollection createEventStateCollection()
+            throws RepositoryException {
+        return vMgr.createEventStateCollection(session);
+    }
+
