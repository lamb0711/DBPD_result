JCR-2105: JSR 283 NodeType Management (work in progress)
JCR-1483: Move common node type functionality to jackrabbit-spi-commons

NOTE: intermediate checkin to avoid additional conflicts with stefans work


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@774294 13f79535-47bb-0310-9956-ffa450edef68

-	super(definition);
+        super(definition);
-	requiredPrimaryTypes = definition.getRequiredPrimaryTypes();
-	defaultPrimaryType = definition.getDefaultPrimaryType();
-	allowsSameNameSiblings = definition.allowsSameNameSiblings();
+        requiredPrimaryTypes = definition.getRequiredPrimaryTypes();
+        defaultPrimaryType = definition.getDefaultPrimaryType();
+        allowsSameNameSiblings = definition.allowsSameNameSiblings();
-	if (definition instanceof NodeDefinitionImpl) {
-	    return (NodeDefinitionImpl) definition;
-	} else {
-	    return new NodeDefinitionImpl(definition);
-	}
+        if (definition instanceof NodeDefinitionImpl) {
+            return (NodeDefinitionImpl) definition;
+        } else {
+            return new NodeDefinitionImpl(definition);
+        }
-    //--------------------------------------------------< NodeDef interface >---
+    //-----------------------------------------------------< NodeDefinition >---
-	return requiredPrimaryTypes;
+        return requiredPrimaryTypes;
-	return defaultPrimaryType;
+        return defaultPrimaryType;
+    /**
+     * @see javax.jcr.nodetype.NodeDefinition#getDefaultPrimaryTypeName()
+     */
-        throw new UnsupportedOperationException("JCR-1591");
+        return defaultPrimaryType.getName();
+    /**
+     * @see javax.jcr.nodetype.NodeDefinition#getRequiredPrimaryTypeNames()
+     */
-        throw new UnsupportedOperationException("JCR-1591");
+        String[] names = new String[requiredPrimaryTypes.length];
+        for (int i = 0; i < requiredPrimaryTypes.length; i++) {
+            names[i] = requiredPrimaryTypes[i].getName();
+        }
+        return names;
-	for (int i = 0; i < nts.length; i++) {
+        for (int i = 0; i < nts.length; i++) {
-	    reqPrimaryTypes.appendChild(rptElem);
+            reqPrimaryTypes.appendChild(rptElem);
-	}
+        }
-	return CHILDNODEDEFINITION_ELEMENT;
+        return CHILDNODEDEFINITION_ELEMENT;
