JCR-1775: Transaction-safe versioning

Avoid instantiating full VersionHistoryImpl objects when all we need are the identifiers of the version history and root version nodes.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@702453 13f79535-47bb-0310-9956-ffa450edef68

-     * Returns the version history of the specified node. If the given node
-     * does not already have an associated version history, then an empty
-     * history is automatically created. This method should only be called
-     * by code that already knows that the specified node is versionable.
+     * Returns information about the version history of the specified node.
+     * If the given node does not already have an associated version history,
+     * then an empty history is automatically created. This method should
+     * only be called by code that already knows that the specified node
+     * is versionable.
-     * @return the version history of the specified node
+     * @return identifiers of the version history and root version nodes
-    VersionHistory getVersionHistory(Session session, NodeState node)
+    VersionHistoryInfo getVersionHistory(Session session, NodeState node)
