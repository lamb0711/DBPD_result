JCR-1438: Replace Config classes with factories

Replace JournalConfig with a JournalFactory.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816237 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
+
+import org.apache.jackrabbit.core.journal.Journal;
+import org.apache.jackrabbit.core.journal.JournalFactory;
+import org.apache.jackrabbit.spi.commons.namespace.NamespaceResolver;
+
- * Cluster configuration. This includes the journal configuration
- * {@link JournalConfig}.
+ * Cluster configuration.
-public class ClusterConfig {
+public class ClusterConfig implements JournalFactory {
-     * Journal configuration.
+     * Journal factory.
-    private final JournalConfig jc;
+    private final JournalFactory jf;
-    public ClusterConfig(String id, long syncDelay, JournalConfig jc) {
+    public ClusterConfig(String id, long syncDelay, JournalFactory jf) {
-        this.jc = jc;
+        this.jf = jf;
-     * Returns the journal configuration.
+     * Returns an initialized journal instance.
-     * @return journal configuration
+     * @param resolver namespace resolver
+     * @return initialized journal
+     * @throws RepositoryException 
+     * @throws RepositoryException if the journal can not be created
-    public JournalConfig getJournalConfig() {
-        return jc;
+    public Journal getJournal(NamespaceResolver resolver)
+            throws RepositoryException {
+        return jf.getJournal(resolver);
+
