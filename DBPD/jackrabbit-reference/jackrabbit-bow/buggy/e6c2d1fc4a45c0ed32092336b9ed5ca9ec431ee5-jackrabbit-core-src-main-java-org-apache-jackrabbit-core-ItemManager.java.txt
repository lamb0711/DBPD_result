JCR-890: concurrent read-only access to a session

Make NodeTypeManager a part of SessionContext.

Remove the session member variable from ItemImpl

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@985244 13f79535-47bb-0310-9956-ffa450edef68

-    protected ItemManager(
-            SessionContext sessionContext, NodeDefinitionImpl rootNodeDef) {
+    protected ItemManager(SessionContext sessionContext) {
-        this.rootNodeDef = rootNodeDef;
+        this.rootNodeDef = sessionContext.getNodeTypeManager().getRootNodeDefinition();
-        NodeTypeRegistry ntReg = session.getNodeTypeManager().getNodeTypeRegistry();
+        NodeTypeRegistry ntReg = sessionContext.getNodeTypeRegistry();
-            return session.getNodeTypeManager().getNodeDefinition(def);
+            return sessionContext.getNodeTypeManager().getNodeDefinition(def);
-            NodeTypeRegistry ntReg = session.getNodeTypeManager().getNodeTypeRegistry();
+            NodeTypeRegistry ntReg = sessionContext.getNodeTypeRegistry();
-            return session.getNodeTypeManager().getPropertyDefinition(def);
+            return sessionContext.getNodeTypeManager().getPropertyDefinition(def);
-            NodeTypeRegistry ntReg = session.getNodeTypeManager().getNodeTypeRegistry();
+            NodeTypeRegistry ntReg = sessionContext.getNodeTypeRegistry();
-            return session.getNodeTypeManager().getPropertyDefinition(def);
+            return sessionContext.getNodeTypeManager().getPropertyDefinition(def);
