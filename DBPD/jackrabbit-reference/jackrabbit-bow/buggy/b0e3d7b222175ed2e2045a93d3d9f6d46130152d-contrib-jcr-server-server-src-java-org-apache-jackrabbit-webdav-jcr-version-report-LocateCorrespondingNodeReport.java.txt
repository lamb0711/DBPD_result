JCR-193, JCR-216, JCR-203, JCR 184 + various minor fixes

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@293331 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Session;
-            Item item = resource.getSession().getRepositorySession().getItem(resource.getResourcePath());
+            DavResourceLocator rLoc = resource.getLocator();
+            String itemPath = rLoc.getJcrPath();
+            Session s = resource.getSession().getRepositorySession();
+            Item item = s.getItem(itemPath);
-                DavResourceLocator rLoc = resource.getLocator();
-
-                DavResourceLocator corrLoc = rLoc.getFactory().createResourceLocator(rLoc.getPrefix(), workspaceName + "/", corrPath);
+                DavResourceLocator corrLoc = rLoc.getFactory().createResourceLocator(rLoc.getPrefix(), "/" + workspaceName, corrPath, false);
