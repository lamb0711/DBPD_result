JCR-257: Use separate index for jcr:system tree
- shut down unused query handler when it had been idle for some configurable time

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@358016 13f79535-47bb-0310-9956-ffa450edef68

-    private final Timer flushTimer = new Timer(true);
+    private static final Timer FLUSH_TIMER = new Timer(true);
+
+    /**
+     * Task that is periodically called by {@link #FLUSH_TIMER} and checks
+     * if index should be flushed.
+     */
+    private final TimerTask flushTask;
-     * @param indexDir      the base file system
-     * @param handler       the search handler
-     * @param stateMgr      shared item state manager
-     * @param rootUUID      uuid of the root node
+     * @param indexDir the base file system
+     * @param handler the search handler
+     * @param stateMgr shared item state manager
+     * @param rootUUID uuid of the root node
-        this.redoLog = new RedoLog(new File(indexDir, REDO_LOG));
+        this.redoLog = new RedoLog(new File(indexDir, REDO_LOG)); 
-        startFlushTimer();
+        lastFlushTime = System.currentTimeMillis();
+        flushTask = new TimerTask() {
+            public void run() {
+                checkFlush();
+    }
+        };
+        FLUSH_TIMER.schedule(flushTask, 0, 1000);
-            flushTimer.cancel();
+            flushTask.cancel();
-            log.info("Committed in-memory index in " + time + "ms.");
+            log.debug("Committed in-memory index in " + time + "ms.");
-     * Starts the flush timer that periodically checks if the index
-     * should be flushed. The timer task will call {@link #checkFlush()}.
-     */
-    private void startFlushTimer() {
-        lastFlushTime = System.currentTimeMillis();
-        flushTimer.schedule(new TimerTask() {
-            public void run() {
-                checkFlush();
-            }
-        }, 0, 1000);
-    }
-
-    /**
-                    log.info("Flushing index after being idle for " +
+                    log.debug("Flushing index after being idle for " +
