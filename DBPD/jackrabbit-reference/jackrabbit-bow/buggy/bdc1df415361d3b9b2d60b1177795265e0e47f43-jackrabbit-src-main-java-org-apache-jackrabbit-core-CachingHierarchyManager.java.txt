JCR-552 Move listeners from item state to item state managers


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@438851 13f79535-47bb-0310-9956-ffa450edef68

-        stateModified((NodeState) modified);
+        if (modified.isNode()) {
+            stateModified((NodeState) modified);
+        }
-        destroyed.removeListener(this);
-        discarded.removeListener(this);
-     * Called when an <code>ItemState</code> has been overlaid by some
-     * other state that now takes its identity. This notification is sent
-     * on the state being overlaid.
-     *
-     * @param overlayer the <code>ItemState</code> that overlays this state
-     */
-    public void stateOverlaid(ItemState overlayer) {
-        if (overlayer.isNode()) {
-            overlayer.getOverlayedState().removeListener(this);
-            overlayer.addListener(this);
-        }
-    }
-
-    /**
-     * Called when an <code>ItemState</code> no longer overlayes some other
-     * item state. This notification is sent on the state overlaying another
-     * state.
-     *
-     * @param overlayer the <code>ItemState</code> that overlaid another
-     *                  item state. To get the overlaid state, invoke
-     *                  {@link ItemState#getOverlayedState()}
-     */
-    public void stateUncovered(ItemState overlayer) {
-        if (overlayer.isNode()) {
-            overlayer.removeListener(this);
-            overlayer.getOverlayedState().addListener(this);
-        }
-    }
-
-    /**
-
-            state.addListener(this);
