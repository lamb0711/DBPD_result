JCR-2028: JSR 283 JCR Path

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@772659 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.value.ValueFactoryImpl;
+import org.apache.jackrabbit.spi.commons.value.ValueFormat;
+import javax.jcr.ValueFactory;
+    private final ValueFactory valueFactory;
+     * @param nsContext
+     * @param valueFactory
-    protected StringValue(String value, NamePathResolver nsContext) {
+    protected StringValue(String value, NamePathResolver nsContext, ValueFactory valueFactory) {
+        this.valueFactory = valueFactory;
-                            value, type, ValueFactoryImpl.getInstance()), nsContext);
+                            value, type, valueFactory), nsContext);
-            return ival.toJCRValue(resolver);
+            return ValueFormat.getJCRValue(ival, resolver, valueFactory);
-            return ValueHelper.deserialize(value, type, false, ValueFactoryImpl.getInstance());
+            return ValueHelper.deserialize(value, type, false, valueFactory);
-                        value, targetType, ValueFactoryImpl.getInstance()), nsContext);
+                        value, targetType, valueFactory), nsContext);
