JCR-1609:  new Property Types (WIP...)




git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@779504 13f79535-47bb-0310-9956-ffa450edef68

+import java.math.BigDecimal;
-            // TODO support indexing of BigDecimal (JCR-1609: new Property Types)
+                if (isIndexed(name)) {
+                    addDecimalValue(doc, fieldName, value.getDecimal());
+                }
+                break;
+
+     * Adds the long value to the document as the named field. The long
+     * value is converted to an indexable string value using the {@link LongField}
+     * class.
+     *
+     * @param doc           The document to which to add the field
+     * @param fieldName     The name of the field to add
+     * @param internalValue The value for the field to add to the document.
+     */
+    protected void addDecimalValue(Document doc, String fieldName, Object internalValue) {
+        BigDecimal decVal = (BigDecimal) internalValue;
+        doc.add(createFieldWithoutNorms(fieldName, DecimalField.decimalToString(decVal),
+                PropertyType.DECIMAL));
+    }
+
+    /**
