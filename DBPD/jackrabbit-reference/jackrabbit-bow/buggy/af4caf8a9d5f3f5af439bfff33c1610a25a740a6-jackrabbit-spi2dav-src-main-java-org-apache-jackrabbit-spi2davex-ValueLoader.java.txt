JCR-2689: Improve equals for binary values

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@980437 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.commons.httpclient.methods.HeadMethod;
+
+import java.util.HashMap;
+import java.util.Map;
+    public Map<String, String> loadHeaders(String uri, String[] headerNames) throws IOException,
+            RepositoryException {
+        HeadMethod method = new HeadMethod(uri);
+        try {
+            int statusCode = client.executeMethod(method);
+            if (statusCode == DavServletResponse.SC_OK) {
+                Map<String, String> headers = new HashMap<String, String>();
+                for (String name : headerNames) {
+                    headers.put(name, method.getResponseHeader(name).getValue());
+                }
+                return headers;
+            } else {
+                throw ExceptionConverter.generate(new DavException(statusCode, ("Unable to load headers at " + uri + " - Status line = " + method.getStatusLine().toString())));
+            }
+        } finally {
+            method.releaseConnection();
+        }
+    }
+
+
