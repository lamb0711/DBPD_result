JCR-1990: Optimize queries with relative path in order by clause

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@746946 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.commons.conversion.IllegalNameException;
-import org.apache.jackrabbit.spi.commons.conversion.NameResolver;
-import org.apache.jackrabbit.spi.commons.namespace.NamespaceResolver;
-import org.apache.jackrabbit.spi.Name;
-public class NSRegistryBasedNamespaceMappings
-        implements NamespaceResolver, NamespaceMappings {
+public class NSRegistryBasedNamespaceMappings extends AbstractNamespaceMappings {
-        /**
-     * The name resolver used to translate the qualified name to JCR name
-     */
-    private final NameResolver nameResolver;
-
-        this.nameResolver = NamePathResolverImpl.create(this);
-
-    //-------------------------------< NamespaceMappings >----------------------
-
-    /**
-     * {@inheritDoc}
-     */
-    public String translatePropertyName(Name qName)
-            throws IllegalNameException {
-        try {
-            return nameResolver.getJCRName(qName);
-        } catch (NamespaceException e) {
-            // should never happen actually, there is always a stable index
-            // prefix for a known namespace uri
-            throw new IllegalNameException("Internal error.", e);
-        }
-    }
