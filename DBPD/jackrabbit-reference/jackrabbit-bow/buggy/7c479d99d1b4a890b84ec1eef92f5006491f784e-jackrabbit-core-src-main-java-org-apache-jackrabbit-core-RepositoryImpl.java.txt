JCR-2857 Support sequential (non-random) node ids

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1057220 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.id.NodeIdFactory;
+    protected NodeIdFactory nodeIdFactory;
+
+            nodeIdFactory = new NodeIdFactory(repConfig.getHomeDir());
+            nodeIdFactory.open();
+            context.setNodeIdFactory(nodeIdFactory);
+
-                    		"occurred while shutting down the repository again.", t);
+                            "occurred while shutting down the repository again.", t);
-                ismLocking);
+                ismLocking,
+                context.getNodeIdFactory());
+        try {
+            nodeIdFactory.close();
+        } catch (RepositoryException e) {
+            log.error("error while closing repository file system", e);
+        }
+
-                locking);
+                locking,
+                context.getNodeIdFactory());
