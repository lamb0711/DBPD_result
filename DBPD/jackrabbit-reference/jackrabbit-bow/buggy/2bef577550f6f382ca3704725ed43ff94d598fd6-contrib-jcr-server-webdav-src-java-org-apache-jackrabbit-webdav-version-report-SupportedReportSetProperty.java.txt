JCR-258 - remove JDOM dependency from jcr-server contribution
JCR-295 - usage of Cache-Control header 
JCR-297 - log output while parsing xml
minor consistency issues and improvements

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368683 13f79535-47bb-0310-9956-ffa450edef68

-import org.jdom.Element;
+import org.apache.jackrabbit.webdav.xml.DomUtil;
+import org.w3c.dom.Element;
+import org.w3c.dom.Document;
-     * Returns the Xml representation of this property.
-     *
-     * @return Xml representation listing all supported reports
-     * @see org.apache.jackrabbit.webdav.property.DavProperty#toXml()
-     */
-    public Element toXml() {
-        Element elem = getName().toXml();
-        Iterator it = reportTypes.iterator();
-        while (it.hasNext()) {
-	    Element sr = new Element(DeltaVConstants.XML_SUPPORTED_REPORT, DeltaVConstants.NAMESPACE);
-            Element r = new Element(DeltaVConstants.XML_REPORT, DeltaVConstants.NAMESPACE);
-	    elem.addContent(sr.addContent(r.addContent(((ReportType)it.next()).toXml())));
-        }
-        return elem;
-    }
-
-    /**
+
+    /**
+     * Returns the Xml representation of this property.
+     *
+     * @return Xml representation listing all supported reports
+     * @see org.apache.jackrabbit.webdav.xml.XmlSerializable#toXml(Document)
+     * @param document
+     */
+    public Element toXml(Document document) {
+        Element elem = getName().toXml(document);
+        Iterator it = reportTypes.iterator();
+        while (it.hasNext()) {
+	    Element sr = DomUtil.addChildElement(elem, DeltaVConstants.XML_SUPPORTED_REPORT, DeltaVConstants.NAMESPACE);
+            Element r = DomUtil.addChildElement(sr, DeltaVConstants.XML_REPORT, DeltaVConstants.NAMESPACE);
+	    r.appendChild(((ReportType)it.next()).toXml(document));
+        }
+        return elem;
+    }
+
