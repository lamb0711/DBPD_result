fixed: move, reorder (work in progress)
fixed: locktoken transfer
fixed: recursive transient removal of invalidated tree fails (restoreTests)
improve: simplify usage of workspace operations
fixed: store original itemId with transient operations in order to properly reflect the changelog upon batch creation
fixed: workspace import doesn't invalidate
fixed: session import uuid handling




git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@513279 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.NodeId;
-    private final NodeState versionState;
+    private final NodeId[] mergeFailedIds;
+    private final NodeId[] predecessorIds;
-    private ResolveMergeConflict(NodeState nodeState, NodeState versionState, boolean resolveDone) {
+    private ResolveMergeConflict(NodeState nodeState, NodeId[] mergeFailedIds, NodeId[] predecessorIds, boolean resolveDone) {
-        this.versionState = versionState;
+        this.mergeFailedIds = mergeFailedIds;
+        this.predecessorIds = predecessorIds;
+
-    public NodeState getNodeState() {
-        return nodeState;
+    public NodeId getNodeId() {
+        return nodeState.getNodeId();
-    public NodeState getVersionState() {
-        return versionState;
+    public NodeId[] getMergeFailedIds() {
+        return mergeFailedIds;
+    }
+
+    public NodeId[] getPredecessorIds() {
+        return predecessorIds;
-    public static Operation create(NodeState nodeState, NodeState versionState, boolean resolveDone) {
-        ResolveMergeConflict up = new ResolveMergeConflict(nodeState, versionState, resolveDone);
+    public static Operation create(NodeState nodeState, NodeId[] mergeFailedIds, NodeId[] predecessorIds, boolean resolveDone) {
+        ResolveMergeConflict up = new ResolveMergeConflict(nodeState, mergeFailedIds, predecessorIds, resolveDone);
