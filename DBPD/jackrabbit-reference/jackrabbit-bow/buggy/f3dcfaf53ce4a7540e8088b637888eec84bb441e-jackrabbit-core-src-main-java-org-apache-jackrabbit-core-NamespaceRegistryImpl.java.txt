JCR-1169 Distribution of commons classes (adjust jackrabbit-core)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@590014 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.AbstractNamespaceResolver;
-import org.apache.jackrabbit.name.CachingNameResolver;
-import org.apache.jackrabbit.name.CachingPathResolver;
-import org.apache.jackrabbit.name.NameCache;
-import org.apache.jackrabbit.name.NameException;
-import org.apache.jackrabbit.name.NameResolver;
-import org.apache.jackrabbit.name.ParsingNameResolver;
-import org.apache.jackrabbit.name.ParsingPathResolver;
-import org.apache.jackrabbit.name.PathResolver;
-import org.apache.jackrabbit.name.QName;
+import org.apache.jackrabbit.namespace.AbstractNamespaceResolver;
+import org.apache.jackrabbit.conversion.NameResolver;
+import org.apache.jackrabbit.conversion.PathResolver;
+import org.apache.jackrabbit.spi.Name;
-        implements NamespaceRegistry, NameCache, NamespaceEventListener {
+        implements NamespaceRegistry, NamespaceEventListener {
-        reservedPrefixes.add(QName.NS_XML_PREFIX);
-        reservedPrefixes.add(QName.NS_XMLNS_PREFIX);
+        reservedPrefixes.add(Name.NS_XML_PREFIX);
+        reservedPrefixes.add(Name.NS_XMLNS_PREFIX);
-        reservedPrefixes.add(QName.NS_REP_PREFIX);
-        reservedPrefixes.add(QName.NS_JCR_PREFIX);
-        reservedPrefixes.add(QName.NS_NT_PREFIX);
-        reservedPrefixes.add(QName.NS_MIX_PREFIX);
-        reservedPrefixes.add(QName.NS_SV_PREFIX);
+        reservedPrefixes.add(Name.NS_REP_PREFIX);
+        reservedPrefixes.add(Name.NS_JCR_PREFIX);
+        reservedPrefixes.add(Name.NS_NT_PREFIX);
+        reservedPrefixes.add(Name.NS_MIX_PREFIX);
+        reservedPrefixes.add(Name.NS_SV_PREFIX);
-        reservedURIs.add(QName.NS_XML_URI);
-        reservedURIs.add(QName.NS_XMLNS_URI);
+        reservedURIs.add(Name.NS_XML_URI);
+        reservedURIs.add(Name.NS_XMLNS_URI);
-        reservedURIs.add(QName.NS_REP_URI);
-        reservedURIs.add(QName.NS_JCR_URI);
-        reservedURIs.add(QName.NS_NT_URI);
-        reservedURIs.add(QName.NS_MIX_URI);
-        reservedURIs.add(QName.NS_SV_URI);
+        reservedURIs.add(Name.NS_REP_URI);
+        reservedURIs.add(Name.NS_JCR_URI);
+        reservedURIs.add(Name.NS_NT_URI);
+        reservedURIs.add(Name.NS_MIX_URI);
+        reservedURIs.add(Name.NS_SV_URI);
-        evictAllNames();
-                map(QName.NS_EMPTY_PREFIX, QName.NS_DEFAULT_URI);
+                map(Name.NS_EMPTY_PREFIX, Name.NS_DEFAULT_URI);
-                map(QName.NS_REP_PREFIX, QName.NS_REP_URI);
+                map(Name.NS_REP_PREFIX, Name.NS_REP_URI);
-                map(QName.NS_JCR_PREFIX, QName.NS_JCR_URI);
+                map(Name.NS_JCR_PREFIX, Name.NS_JCR_URI);
-                map(QName.NS_NT_PREFIX, QName.NS_NT_URI);
+                map(Name.NS_NT_PREFIX, Name.NS_NT_URI);
-                map(QName.NS_MIX_PREFIX, QName.NS_MIX_URI);
+                map(Name.NS_MIX_PREFIX, Name.NS_MIX_URI);
-                map(QName.NS_SV_PREFIX, QName.NS_SV_URI);
+                map(Name.NS_SV_PREFIX, Name.NS_SV_URI);
-                map(QName.NS_XML_PREFIX, QName.NS_XML_URI);
+                map(Name.NS_XML_PREFIX, Name.NS_XML_URI);
-            if (prefixHint.toLowerCase().startsWith(QName.NS_XML_PREFIX)
+            if (prefixHint.toLowerCase().startsWith(Name.NS_XML_PREFIX)
-        if (QName.NS_EMPTY_PREFIX.equals(prefix) || QName.NS_DEFAULT_URI.equals(uri)) {
+        if (Name.NS_EMPTY_PREFIX.equals(prefix) || Name.NS_DEFAULT_URI.equals(uri)) {
-        if (prefix.toLowerCase().startsWith(QName.NS_XML_PREFIX)) {
+        if (prefix.toLowerCase().startsWith(Name.NS_XML_PREFIX)) {
-        // Clear cache
-        evictAllNames();
-
-    //------------------------------------------------------------< NameCache >
-    /**
-     * {@inheritDoc}
-     */
-    public QName retrieveName(String jcrName) {
-        try {
-            return nameResolver.getQName(jcrName);
-        } catch (NameException e) {
-            return null;
-        } catch (NamespaceException e) {
-            return null;
-        }
-    }
-
-    public String retrieveName(QName name) {
-        try {
-            return nameResolver.getJCRName(name);
-        } catch (NamespaceException e) {
-            return null;
-        }
-    }
-
-    public void cacheName(String jcrName, QName name) {
-    }
-
-    public void evictAllNames() {
-        nameResolver = new CachingNameResolver(new ParsingNameResolver(this));
-        pathResolver =
-            new CachingPathResolver(new ParsingPathResolver(nameResolver));
-    }
-
-        // Clear cache
-        evictAllNames();
-
