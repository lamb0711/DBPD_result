JCR-1031: RowIteratorImpl should make use of QueryResultRow.getValues()

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555971 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.ValueFactory;
+     * The JCR value factory.
+     */
+    private final ValueFactory valueFactory;
+
+    /**
-     * @param itemMgr     the item manager of the session executing the query.
-     * @param hierarchyMgr the HierarchyManager of the session executing the query.
-     * @param queryInfo   the spi query result.
-     * @param nsResolver    the namespace nsResolver of the session executing the query.
+     * @param itemMgr      the item manager of the session executing the query.
+     * @param hierarchyMgr the HierarchyManager of the session executing the
+     *                     query.
+     * @param queryInfo    the spi query result.
+     * @param nsResolver   the namespace nsResolver of the session executing the
+     *                     query.
+     * @param valueFactory the JCR value factory.
-                    QueryInfo queryInfo, NamespaceResolver nsResolver) {
+                    QueryInfo queryInfo, NamespaceResolver nsResolver,
+                    ValueFactory valueFactory) {
+        this.valueFactory = valueFactory;
-        return new RowIteratorImpl(getNodeIterator(), queryInfo.getColumnNames(), nsResolver);
+        return new RowIteratorImpl(queryInfo, nsResolver, valueFactory);
