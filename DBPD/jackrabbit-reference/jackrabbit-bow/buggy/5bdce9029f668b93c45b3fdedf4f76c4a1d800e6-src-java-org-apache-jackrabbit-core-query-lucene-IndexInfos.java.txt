JCR-204: Improve recoverability


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@289211 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Set;
+import java.util.HashSet;
+     * Set of names for quick lookup.
+     */
+    private Set names = new HashSet();
+
+    /**
-                indexes.add(di.readUTF());
+                String indexName = di.readUTF();
+                indexes.add(indexName);
+                names.add(indexName);
+        if (names.contains(name)) {
+            throw new IllegalArgumentException("already contains: " + name);
+        }
+        names.add(name);
+        names.remove(name);
-        indexes.remove(i);
+        Object name = indexes.remove(i);
+        names.remove(name);
+     * Returns <code>true</code> if <code>name</code> exists in this
+     * <code>IndexInfos</code>; <code>false</code> otherwise.
+     *
+     * @param name the name to test existence.
+     * @return <code>true</code> it is exists in this <code>IndexInfos</code>.
+     */
+    boolean contains(String name) {
+        return names.contains(name);
+    }
+
+    /**
