JCR-2619 improved internal representation of DATE values

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@938969 13f79535-47bb-0310-9956-ffa450edef68

-        return (Calendar) val;
+        try {
+            return getCalendar();
+        } catch (RepositoryException ignore) {
+            assert false;
+            return null;
+        }
-    //-------------------------------------------< java.lang.Object overrides >
-    /**
-     * Returns the string representation of this internal value.
-     *
-     * @return string representation of this internal value
-     */
-    public String toString() {
-        if (type == PropertyType.DATE) {
-            return ISO8601.format((Calendar) val);
-        } else {
-            return val.toString();
-        }
-    }
-
-
-        super(value, PropertyType.DATE);
+        super(value);
-     * @see org.apache.jackrabbit.spi.QValue#getString()
-     */
-    public String getString() throws RepositoryException {
-        if (type == PropertyType.BINARY) {
-            InputStream stream = getStream();
-            try {
-                return IOUtils.toString(stream, "UTF-8");
-            } catch (IOException e) {
-                throw new RepositoryException("conversion from stream to string failed", e);
-            } finally {
-                IOUtils.closeQuietly(stream);
-            }
-        } else if (type == PropertyType.DATE) {
-            return ISO8601.format(((Calendar) val));
-        } else {
-            return toString();
-        }
-    }
-
-    /**
