JCR-1547: JCR2SPI: remove dependency to state-package within entprovider interface

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@650417 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.commons.nodetype.NodeTypeConflictException;
-                   EffectiveNodeType entExisting = provider.getEffectiveNodeType(existing);
+                   Name[] ntNames = existing.getAllNodeTypeNames();
+                   EffectiveNodeType entExisting = provider.getEffectiveNodeType(ntNames);
-        try {
-            EffectiveNodeType ent = session.getEffectiveNodeTypeProvider().getEffectiveNodeType(ntNames);
-            if (!ent.includesNodeType(NameConstants.MIX_REFERENCEABLE)) {
-                throw new ConstraintViolationException("XML defines jcr:uuid without defining import node to be referenceable.");
-            }
-        } catch (NodeTypeConflictException e) {
-            throw new RepositoryException("Internal error", e);
+        EffectiveNodeType ent = session.getEffectiveNodeTypeProvider().getEffectiveNodeType(ntNames);
+        if (!ent.includesNodeType(NameConstants.MIX_REFERENCEABLE)) {
+            throw new ConstraintViolationException("XML defines jcr:uuid without defining import node to be referenceable.");
