JCR-2056: Binary interfaces



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@779642 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Binary;
+
+    /**
+     * @see org.apache.jackrabbit.spi.QValue#getBinary()
+     */
+    public Binary getBinary() throws RepositoryException {
+        if (type == PropertyType.BINARY) {
+            return (BLOBFileValue) val;
+        } else {
+            try {
+                // convert via string
+                return new BLOBValue(getString().getBytes(InternalValueFactory.DEFAULT_ENCODING));
+            } catch (UnsupportedEncodingException e) {
+                throw new RepositoryException(InternalValueFactory.DEFAULT_ENCODING + " is not supported encoding on this platform", e);
+            }
+        }
+    }
