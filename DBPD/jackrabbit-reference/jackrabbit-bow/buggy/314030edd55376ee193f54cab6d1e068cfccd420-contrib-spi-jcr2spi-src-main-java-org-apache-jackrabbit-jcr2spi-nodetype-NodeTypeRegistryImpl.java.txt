improve memory consumption of the current hierarchy implementation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@542571 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.hierarchy.PropertyEntry;
+import org.apache.jackrabbit.jcr2spi.state.PropertyState;
-                PropertyEntry mixins = nodeState.getNodeEntry().getPropertyEntry(QName.JCR_MIXINTYPES);
-                if (mixins != null) {
-                    try {
-                        QValue[] values = mixins.getPropertyState().getValues();
-                        allNtNames = new QName[values.length + 1];
-                        for (int i = 0; i < values.length; i++) {
-                            allNtNames[i] = values[i].getQName();
-                        }
-                        allNtNames[values.length] = primaryType;
-                    } catch (RepositoryException e) {
-                        // ignore
+                try {
+                    PropertyState mixins = nodeState.getPropertyState(QName.JCR_MIXINTYPES);
+                    QValue[] values = mixins.getValues();
+                    allNtNames = new QName[values.length + 1];
+                    for (int i = 0; i < values.length; i++) {
+                        allNtNames[i] = values[i].getQName();
+                    allNtNames[values.length] = primaryType;
+                } catch (RepositoryException e) {
+                    // ignore: apparently no jcr:mixinTypes property exists.
-                String msg = "internal error: encountered invalid registered node type " + ntName;
+                String msg = "Internal error: encountered invalid registered node type " + ntName;
