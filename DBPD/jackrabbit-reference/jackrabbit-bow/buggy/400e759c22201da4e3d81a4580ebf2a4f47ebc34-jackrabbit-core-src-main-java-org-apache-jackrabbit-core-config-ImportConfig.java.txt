JCR-2710 Add support for large number of users in a group
UserImporter copes with node structure for group membership now

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@987181 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.xml.ProtectedItemImporter;
-import org.apache.jackrabbit.core.xml.ProtectedNodeImporter;
-import org.apache.jackrabbit.core.xml.ProtectedPropertyImporter;
-import java.util.List;
+import java.util.List;
-    private final List<BeanConfig> protectedNodeImporters;
-    private final List<BeanConfig> protectedPropertyImporters;
+    private final List<BeanConfig> protectedItemImporters;
-        protectedNodeImporters = Collections.emptyList();
-        protectedPropertyImporters = Collections.emptyList();
+        protectedItemImporters = Collections.emptyList();
-    public ImportConfig(List<BeanConfig> protectedNodeImporters, List<BeanConfig> protectedPropertyImporters) {
-        this.protectedNodeImporters = protectedNodeImporters;
-        this.protectedPropertyImporters = protectedPropertyImporters;
+    public ImportConfig(List<BeanConfig> protectedItemImporters) {
+        this.protectedItemImporters = protectedItemImporters;
-    public List<ProtectedNodeImporter> getProtectedNodeImporters() {
-        List<ProtectedNodeImporter> pnis =
-            new ArrayList<ProtectedNodeImporter>();
-        for (BeanConfig bc : protectedNodeImporters) {
+    public List<? extends ProtectedItemImporter> getProtectedItemImporters() {
+        List<ProtectedItemImporter> piis = new ArrayList();
+        for (BeanConfig bc : protectedItemImporters) {
-                pnis.add(bc.newInstance(ProtectedNodeImporter.class));
+                piis.add(bc.newInstance(ProtectedItemImporter.class));
-        return pnis;
+        return piis;
-    public List<ProtectedPropertyImporter> getProtectedPropertyImporters() {
-        List<ProtectedPropertyImporter> ppis =
-            new ArrayList<ProtectedPropertyImporter>();
-        for (BeanConfig bc : protectedPropertyImporters) {
-            try {
-                ppis.add(bc.newInstance(ProtectedPropertyImporter.class));
-            } catch (ConfigurationException e) {
-                log.warn(e.getMessage());
-            }
-        }
-        return ppis;
-    }
