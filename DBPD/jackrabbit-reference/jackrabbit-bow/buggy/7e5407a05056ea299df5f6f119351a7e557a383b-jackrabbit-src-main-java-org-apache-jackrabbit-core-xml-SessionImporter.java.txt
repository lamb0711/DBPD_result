[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.NodeId;
+import org.apache.jackrabbit.uuid.UUID;
-                                  String uuid)
+                                  NodeId id)
+        UUID uuid = id == null ? UUID.randomUUID() : id.getUUID();
-                refTracker.mappedUUID(nodeInfo.getUUID(), node.getUUID());
+                refTracker.mappedUUID(nodeInfo.getId().getUUID(), node.getNodeId().getUUID());
-            String msg = "a node with uuid " + nodeInfo.getUUID() + " already exists!";
+            String msg = "a node with uuid " + nodeInfo.getId() + " already exists!";
-                    nodeInfo.getUUID());
+                    nodeInfo.getId());
-                    nodeInfo.getUUID());
+                    nodeInfo.getId());
-        String uuid = nodeInfo.getUUID();
+        NodeId id = nodeInfo.getId();
-            if (uuid == null) {
+            if (id == null) {
-                    conflicting = (NodeImpl) session.getNodeByUUID(uuid);
+                    conflicting = session.getNodeById(id);
-                    node = createNode(parent, nodeName, ntName, mixins, uuid);
+                    node = createNode(parent, nodeName, ntName, mixins, id);
-                    String original = val.getString();
-                    String adjusted = refTracker.getMappedUUID(original);
+                    UUID original = UUID.fromString(val.getString());
+                    UUID adjusted = refTracker.getMappedUUID(original);
-                String original = val.getString();
-                String adjusted = refTracker.getMappedUUID(original);
+                UUID original = UUID.fromString(val.getString());
+                UUID adjusted = refTracker.getMappedUUID(original);
