JCR-1018: introduce QValue.getCalendar()

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@554984 13f79535-47bb-0310-9956-ffa450edef68

-        return new QValueImpl(value);
+        // Calendar is not constant, must create a clone
+        return new QValueImpl((Calendar) value.clone());
-            val = ISO8601.format(value);
+            val = value;
-            return val.toString();
+            if (type == PropertyType.DATE) {
+                return ISO8601.format((Calendar) val);
+            } else {
+                return val.toString();
+            }
-            throw new RuntimeException("implementation missing");
+            if (type == PropertyType.DATE) {
+                return (Calendar) ((Calendar) val).clone();
+            } else {
+                return ISO8601.parse(getString());
+            }
