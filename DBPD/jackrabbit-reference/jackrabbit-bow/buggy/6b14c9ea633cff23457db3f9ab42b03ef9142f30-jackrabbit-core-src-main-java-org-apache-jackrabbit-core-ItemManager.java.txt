JCR-1104 : JSR 283 support
JCR-1171 : Contribute Pluggable Permission and User Management to Jackrabbit

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@638834 13f79535-47bb-0310-9956-ffa450edef68

-        if (!session.getAccessManager().isGranted(id, AccessManager.READ)) {
+        if (!canRead(id)) {
+    private boolean canRead(ItemId id) throws RepositoryException {
+        return session.getAccessManager().isGranted(id, AccessManager.READ);
+    }
+
-            if (!session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (!canRead(id)) {
-            if (!session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (!canRead(id)) {
-            if (state.getStatus() != ItemState.STATUS_NEW
-                    && !session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (state.getStatus() != ItemState.STATUS_NEW && !canRead(id)) {
-            if (session.getAccessManager().isGranted(entry.getId(), AccessManager.READ)) {
+            if (canRead(entry.getId())) {
-            if (session.getAccessManager().isGranted(entry.getId(), AccessManager.READ)) {
+            if (canRead(entry.getId())) {
-            if (session.getAccessManager().isGranted(new PropertyId(parentId, propName), AccessManager.READ)) {
+            if (canRead(new PropertyId(parentId, propName))) {
-            if (session.getAccessManager().isGranted(id, AccessManager.READ)) {
+            if (canRead(id)) {
