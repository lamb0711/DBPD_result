Improve concurrent query performance

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@350028 13f79535-47bb-0310-9956-ffa450edef68

+         * The index reader that was used to calculate the document number.
+         * If <code>null</code> then the document number has not yet been
+         * calculated.
+         */
+        private IndexReader reader;
+
+        /**
+         * The previously calculated document number.
+         */
+        private int docNumber;
+
+        /**
+            synchronized (this) {
+                if (reader == this.reader) {
+                    return docNumber;
+                }
+            }
+            synchronized (this) {
+                docNumber = doc;
+                this.reader = reader;
+            }
