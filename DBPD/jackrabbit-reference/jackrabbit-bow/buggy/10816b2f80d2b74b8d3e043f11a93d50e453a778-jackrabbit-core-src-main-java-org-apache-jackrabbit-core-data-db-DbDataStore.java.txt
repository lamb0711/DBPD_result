JCR-1414 Data store garbage collection: inUse not correctly synchronized

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@631905 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
+import java.util.Map;
-    protected WeakHashMap inUse = new WeakHashMap();
+    protected Map inUse = Collections.synchronizedMap(new WeakHashMap());
-            Iterator it = inUse.keySet().iterator();
+            Iterator it = new ArrayList(inUse.keySet()).iterator();
-
-                in.close();
+            in.close();
-
