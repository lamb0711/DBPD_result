work in progress

- ChangeLog: add target (item to be saved)
- TransientItemStateManager: changing itemstate from new to existing => needs to connect to overlayed state
- TransientISFactory move out of TransientISM
- RepositoryServiceImpl: simplify execution of wsp-operations
- Initial draft for observation
- WorkspaceManager: seperate notification of events resulting from transient modifications.
- WorkspaceManager: don't report events from wsp-operations as external mods.
- IteratorHelper; add EMPTY constant
- Event: add constant for ALL events

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@451313 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.Credentials;
-import javax.jcr.SimpleCredentials;
+
-    private final Credentials credentials;
+    private final CredentialsWrapper credentials;
-    private String batchId;
+    private final SubscriptionManager subscrMgr;
-    SessionInfoImpl(Credentials creds, String workspaceName) {
+    SessionInfoImpl(CredentialsWrapper creds, String workspaceName, SubscriptionManager subscrMgr) {
+        this.subscrMgr = subscrMgr;
+        subscrMgr.setSessionInfo(this);
+    //--------------------------------------------------------< SessionInfo >---
+    /**
+     * @inheritDoc
+     */
-        if (credentials instanceof SimpleCredentials) {
-            return ((SimpleCredentials) credentials).getUserID();
-        } else {
-            return null;
-        }
+        return credentials.getUserId();
+    /**
+     * @inheritDoc
+     */
+    /**
+     * @inheritDoc
+     */
+    /**
+     * @inheritDoc
+     */
+    /**
+     * @inheritDoc
+     */
-    public String getBatchId() {
-        return batchId;
-    }
-
-    public void setBatchId(String id) {
-        batchId = id;
-    }
-
-    Credentials getCredentials() {
+    //--------------------------------------------------------------------------
+    CredentialsWrapper getCredentials() {
+
+    SubscriptionManager getSubscriptionManager() {
+        return subscrMgr;
+    }
