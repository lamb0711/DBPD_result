JCR-890: concurrent read-only access to a session

Use the SessionContext and SessionOperations in search

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@983708 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.ItemManager;
-import org.apache.jackrabbit.core.SessionImpl;
+import org.apache.jackrabbit.core.session.SessionContext;
- * Defines common initialization methods for all query implementations.
+ * Defines common initialisation methods for all query implementations.
-     * Initializes a query instance from a query string.
+     * Initialises a query instance from a query string.
-     * @param session   the session of the user executing this query.
-     * @param itemMgr   the item manager of the session executing this query.
+     * @param sessionContext component context of the current session
-    public abstract void init(SessionImpl session,
-                              ItemManager itemMgr,
-                              QueryHandler handler,
-                              String statement,
-                              String language,
-                              Node node) throws InvalidQueryException;
+    public abstract void init(
+            SessionContext sessionContext, QueryHandler handler,
+            String statement, String language, Node node)
+            throws InvalidQueryException;
