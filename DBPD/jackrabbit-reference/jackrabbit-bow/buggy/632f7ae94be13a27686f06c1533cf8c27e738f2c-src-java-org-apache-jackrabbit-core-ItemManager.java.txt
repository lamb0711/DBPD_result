- improved versioning

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@122838 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.version.InternalVersionHistory;
+import org.apache.jackrabbit.core.version.VersionHistoryImpl;
+import org.apache.jackrabbit.core.version.InternalVersion;
+import org.apache.jackrabbit.core.version.VersionImpl;
-            return session.versionMgr.createVersionInstance(session, state, def, this, listeners);
+            InternalVersion version = session.versionMgr.getVersion(state.getUUID());
+            return new VersionImpl(this, session, id, state, def, listeners, version);
+
-            return session.versionMgr.createVersionHistoryInstance(session, state, def, this, listeners);
+            InternalVersionHistory history = session.versionMgr.getVersionHistory(state.getUUID());
+            return new VersionHistoryImpl(this, session, id, state, def, listeners, history);
+
