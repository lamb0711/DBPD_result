JCR-1276: A Property and a Node Can Have the Same Name

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@605622 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.commons.conversion.MalformedPathException;
-import org.apache.jackrabbit.spi.Path;
-import org.apache.jackrabbit.uuid.UUID;
+import org.apache.jackrabbit.spi.Path;
+import org.apache.jackrabbit.spi.commons.conversion.MalformedPathException;
+import org.apache.jackrabbit.uuid.UUID;
-            if (parentState.hasPropertyName(nodeName)) {
-                // there's already a property with that name
-                throw new ItemExistsException("cannot add child node '"
-                        + nodeName.getLocalName() + "' to "
-                        + safeGetJCRPath(parentState.getNodeId())
-                        + ": colliding with same-named existing property");
-            }
-        // check for name collisions with existing properties
-        if (parent.hasPropertyName(nodeName)) {
-            String msg = "there's already a property with name " + nodeName;
-            log.debug(msg);
-            throw new RepositoryException(msg);
-        }
-        // check for name collisions with existing child nodes
-        if (parent.hasChildNodeEntry(propName)) {
-            String msg = "there's already a child node with name " + propName;
-            log.debug(msg);
-            throw new RepositoryException(msg);
-        }
-            ItemId id = srcHierMgr.resolvePath(nodePath);
-            if (id == null || !id.denotesNode()) {
+            NodeId id = srcHierMgr.resolveNodePath(nodePath);
+            if (id == null) {
