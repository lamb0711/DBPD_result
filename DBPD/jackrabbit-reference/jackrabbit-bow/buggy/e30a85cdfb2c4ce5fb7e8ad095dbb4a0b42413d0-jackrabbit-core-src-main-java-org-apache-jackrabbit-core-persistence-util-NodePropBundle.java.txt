JCR-2762: Optimize bundle serialization

Split HashMapIndex to an in-memory base class and a file-based subclass for easier testing.

Add basic test cases for HashMapIndex and BundleBinding. The goal is to ensure backwards compatibility of potential bundle serialization improvements.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1002775 13f79535-47bb-0310-9956-ffa450edef68

+    //--------------------------------------------------------------< Object >
+
+    public boolean equals(Object object) {
+        if (object instanceof NodePropBundle) {
+            NodePropBundle that = (NodePropBundle) object;
+            return id.equals(that.id)
+                && parentId.equals(that.parentId)
+                && nodeTypeName.equals(that.nodeTypeName)
+                && mixinTypeNames.equals(that.mixinTypeNames)
+                && isReferenceable == that.isReferenceable
+                && sharedSet.equals(that.sharedSet)
+                && properties.equals(that.properties)
+                && childNodeEntries.equals(that.childNodeEntries);
+        } else {
+            return false;
+        }
+    }
+
