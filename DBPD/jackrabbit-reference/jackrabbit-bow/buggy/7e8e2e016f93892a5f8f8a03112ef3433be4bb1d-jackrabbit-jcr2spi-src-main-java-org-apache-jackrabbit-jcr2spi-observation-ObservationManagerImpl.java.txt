JCR-1204: Redesign SPI observation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@592356 13f79535-47bb-0310-9956-ffa450edef68

-     * Indicates if this observation manager is registered as an internal event
-     * listener on the workspace manager.
-     */
-    private boolean isRegistered = false;
-
-    /**
-        if (!isRegistered) {
+        if (subscriptions.size() == 1) {
-            isRegistered = true;
+        } else {
+            wspManager.updateEventFilters();
+        if (subscriptions.size() == 0) {
+            wspManager.removeEventListener(this);
+        } else {
+            wspManager.updateEventFilters();
+        }
