Implemented proper support for IS [NOT] NULL queries.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@126276 13f79535-47bb-0310-9956-ffa450edef68

-                try {
-                    if (!node.getName().equals(NodeTypeRegistry.NT_BASE.toJCRName(resolver))) {
-                        // node is either primary or mixin node type
-                        NodeTypeQueryNode nodeType
-                                = new NodeTypeQueryNode(constraintNode, node.getName());
-                        constraintNode.addOperand(nodeType);
-                    }
-                } catch (NoPrefixDeclaredException e) {
-                    throw new IllegalArgumentException("No prefix declared for name: " + node.getName());
+                if (!node.getName().equals(NodeTypeRegistry.NT_BASE)) {
+                    // node is either primary or mixin node type
+                    NodeTypeQueryNode nodeType
+                            = new NodeTypeQueryNode(constraintNode, node.getName());
+                    constraintNode.addOperand(nodeType);
-        if (node.isNegate()) {
-            parent = new NotQueryNode(parent);
-        }
-
-            } else if (type == Constants.OPERATION_NULL) {
+            } else if (type == Constants.OPERATION_NULL
+                    || type == Constants.OPERATION_NOT_NULL) {
+                // create a dummy literal
-                        identifier, Constants.OPERATION_LIKE, star);
+                        identifier, type, star);
+            } else {
+                throw new IllegalArgumentException("Unknown operation type: " + type);
