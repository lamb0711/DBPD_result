JCR-3185: refactor consistency checks in BundleDBPersistenceManager into a standalone class that could be re-used for other PMs

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1221428 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import java.util.List;
-    public Iterable<NodeId> getAllNodeIds(NodeId after, int maxCount) throws ItemStateException, RepositoryException {
+    public List<NodeId> getAllNodeIds(NodeId after, int maxCount) throws ItemStateException, RepositoryException {
-        return bundleStore.keySet();
+        List<NodeId> result = new ArrayList<NodeId>();
+        result.addAll(bundleStore.keySet());
+        return result;
