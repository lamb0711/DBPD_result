JCR-2087: Upgrade to Java 5 as the base platform

Various cleanups here and there.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@793283 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.uuid.UUID;
-import java.util.Iterator;
-        Set set = nodeState.getPropertyNames();
+        Set<Name> set = nodeState.getPropertyNames();
-        for (Iterator iter = set.iterator(); iter.hasNext();) {
-            Name propName = (Name) iter.next();
+        for (Name propName : set) {
-        Iterator iter = state.getPropertyNames().iterator();
-        while (iter.hasNext()) {
-            Name name = (Name) iter.next();
+        for (Name name :  state.getPropertyNames()) {
-        iter = state.getChildNodeEntries().iterator();
-        while (iter.hasNext()) {
-            ChildNodeEntry entry = (ChildNodeEntry) iter.next();
+        for (ChildNodeEntry entry : state.getChildNodeEntries()) {
-        // add new child node entryn
+        // add new child node entry
-            List entries = nodeState.getChildNodeEntries();
+            List<ChildNodeEntry> entries = nodeState.getChildNodeEntries();
-            for (int i = 0; i < entries.size(); i++) {
-                ChildNodeEntry entry = (ChildNodeEntry) entries.get(i);
+            int i = 0;
+            for (ChildNodeEntry entry : entries) {
-                children[i] = new NodeStateEx(stateMgr, ntReg, state, entry.getName());
+                children[i++] = new NodeStateEx(stateMgr, ntReg, state, entry.getName());
-            Set props = state.getPropertyNames();
-            for (Iterator iter = props.iterator(); iter.hasNext();) {
-                Name propName = (Name) iter.next();
+            for (Name propName : state.getPropertyNames()) {
-            List nodes = state.getChildNodeEntries();
-            for (int i = 0; i < nodes.size(); i++) {
-                ChildNodeEntry entry = (ChildNodeEntry) nodes.get(i);
+            for (ChildNodeEntry entry : state.getChildNodeEntries()) {
-            Set props = state.getPropertyNames();
-            for (Iterator iter = props.iterator(); iter.hasNext();) {
-                Name propName = (Name) iter.next();
+            for (Name propName : state.getPropertyNames()) {
-            List nodes = state.getChildNodeEntries();
-            for (int i = 0; i < nodes.size(); i++) {
-                ChildNodeEntry entry = (ChildNodeEntry) nodes.get(i);
+            for (ChildNodeEntry entry : state.getChildNodeEntries()) {
