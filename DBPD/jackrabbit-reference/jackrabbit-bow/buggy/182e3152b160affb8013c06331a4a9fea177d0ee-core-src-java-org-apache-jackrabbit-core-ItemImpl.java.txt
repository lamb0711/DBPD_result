fixing another concurrency issue that could lead to inconsistent repository content

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@264785 13f79535-47bb-0310-9956-ffa450edef68

-    protected abstract void makePersistent();
+    protected abstract void makePersistent() throws InvalidItemStateException;
-        // check status of this item's state
+        // fail-fast test: check status of this item's state
+                // fail-fast test: check status of transient state
