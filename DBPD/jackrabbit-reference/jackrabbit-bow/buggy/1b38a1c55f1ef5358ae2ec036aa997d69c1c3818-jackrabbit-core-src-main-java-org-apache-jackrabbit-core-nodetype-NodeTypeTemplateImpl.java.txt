JCR-1104: JSR 283 support

work in (slow) progress...

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@597142 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.nodetype.jsr283.NodeTypeDefinition;
+import java.util.Arrays;
-
-     * Default constructor
+     * Package private constructor
-    public NodeTypeTemplateImpl() {
+    NodeTypeTemplateImpl() {
+    /**
+     * Package private constructor
+     *
+     * @param def
+     */
+    NodeTypeTemplateImpl(NodeTypeDefinition def) {
+        name = def.getName();
+        superTypeNames = def.getDeclaredSupertypeNames();
+        primaryItemName = def.getPrimaryItemName();
+        abstractStatus = def.isAbstract();
+        mixin = def.isMixin();
+        orderableChildNodes = def.hasOrderableChildNodes();
+        NodeDefinition[] nodeDefs = def.getDeclaredChildNodeDefinitions();
+        for (int i = 0; i < nodeDefs.length; i++) {
+            nodeDefinitionTemplates.add(new NodeDefinitionTemplateImpl(nodeDefs[i])) ;
+        }
+        PropertyDefinition[] propDefs = def.getDeclaredPropertyDefinitions();
+        for (int i = 0; i < propDefs.length; i++) {
+            propertyDefinitionTemplates.add(new PropertyDefinitionTemplateImpl(propDefs[i]));
+        }
+    }
+
