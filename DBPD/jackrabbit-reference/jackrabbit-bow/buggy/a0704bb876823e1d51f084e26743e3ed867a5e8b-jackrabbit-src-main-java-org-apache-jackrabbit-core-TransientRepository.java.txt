JCR-403: Added a shutdown() method to TransientRepository.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@395305 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Iterator;
+import org.apache.jackrabbit.api.JackrabbitRepository;
-public class TransientRepository implements Repository, SessionListener {
+public class TransientRepository
+        implements JackrabbitRepository, SessionListener {
+    //--------------------------------------------------<JackrabbitRepository>
+
+    /**
+     * Forces all active sessions to logout. Once the last session has logged
+     * out, the underlying repository instance will automatically be shut down.
+     *
+     * @see Session#logout()
+     */
+    public synchronized void shutdown() {
+        Iterator iterator = new HashSet(sessions).iterator();
+        while (iterator.hasNext()) {
+            Session session = (Session) iterator.next();
+            session.logout();
+        }
+    }
+
