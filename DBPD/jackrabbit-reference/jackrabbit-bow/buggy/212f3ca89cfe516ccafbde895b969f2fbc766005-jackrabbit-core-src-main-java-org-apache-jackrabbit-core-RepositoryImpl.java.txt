JCR-2860 Make version recovery extensible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1057181 13f79535-47bb-0310-9956-ffa450edef68

-            // JCR-2551: Recovery from a lost version history
-            if (Boolean.getBoolean("org.apache.jackrabbit.version.recovery")) {
-                RepositoryChecker checker = new RepositoryChecker(
-                        persistMgr, context.getInternalVersionManager());
-                checker.check(ROOT_NODE_ID, true);
-                checker.fix();
-            }
+            doVersionRecovery();
+         * If necessary, recover from a lost version history.
+         */
+        protected void doVersionRecovery() throws RepositoryException {
+            // JCR-2551: Recovery from a lost version history
+            if (Boolean.getBoolean("org.apache.jackrabbit.version.recovery")) {
+                RepositoryChecker checker = new RepositoryChecker(
+                        persistMgr, context.getInternalVersionManager());
+                checker.check(ROOT_NODE_ID, true);
+                checker.fix();
+            }
+        }
+
+        /**
