JCR-473: Some enhancements to jackrabbit commons

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@420449 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.PropertyType;
- * This class implements the  <code>ValueFactory</code> interface.
+ * This class implements the <code>ValueFactory</code> interface.
+    private static final ValueFactory valueFactory = new ValueFactoryImpl();
+
-    public ValueFactoryImpl() {
+    private ValueFactoryImpl() {
+    }
+
+    //--------------------------------------------------------------------------
+    /**
+     *
+     * @return
+     */
+    public static ValueFactory getInstance() {
+        return valueFactory;
-        return ValueHelper.convert(value, type);
+        Value val;
+        switch (type) {
+            case PropertyType.STRING:
+                val = new StringValue(value);
+                break;
+            case PropertyType.BOOLEAN:
+                val = BooleanValue.valueOf(value);
+                break;
+            case PropertyType.DOUBLE:
+                val = DoubleValue.valueOf(value);
+                break;
+            case PropertyType.LONG:
+                val = LongValue.valueOf(value);
+                break;
+            case PropertyType.DATE:
+                val = DateValue.valueOf(value);
+                break;
+            case PropertyType.NAME:
+                val = NameValue.valueOf(value);
+                break;
+            case PropertyType.PATH:
+                val = PathValue.valueOf(value);
+                break;
+            case PropertyType.REFERENCE:
+                val = ReferenceValue.valueOf(value);
+                break;
+            case PropertyType.BINARY:
+                val = new BinaryValue(value);
+                break;
+            default:
+                throw new IllegalArgumentException("Invalid type constant: " + type);
+        }
+        return val;
