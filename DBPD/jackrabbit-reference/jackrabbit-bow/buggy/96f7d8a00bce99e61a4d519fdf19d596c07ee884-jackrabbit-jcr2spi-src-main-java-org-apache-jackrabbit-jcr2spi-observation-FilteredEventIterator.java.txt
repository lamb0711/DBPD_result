JCR-2108: JSR 283 Observation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@790826 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.EventBundle;
-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
+ * Implements an event iterator that converts SPI events into JCR events and
+ * filters out the ones that are not accepted by an {@link EventFilter}.
-     * Logger instance for this class
-     */
-    private static final Logger log = LoggerFactory.getLogger(FilteredEventIterator.class);
-
-    /**
-    private final Iterator actualEvents;
+    protected final Iterator<org.apache.jackrabbit.spi.Event> actualEvents;
-     * @param events     the {@link org.apache.jackrabbit.spi.Event}s as a
-     *                   bundle.
-     * @param filter     only event that pass the filter will be dispatched to
- *                   the event listener.
-     * @param resolver
-     * @param idFactory
+     * @param events    the {@link org.apache.jackrabbit.spi.Event}s as an
+     *                  iterator.
+     * @param isLocal   whether the events were caused by the local session.
+     * @param filter    only event that pass the filter will be dispatched to
+     *                  the event listener.
+     * @param resolver  the name path resolver.
+     * @param idFactory the id factory.
-    public FilteredEventIterator(EventBundle events,
+    public FilteredEventIterator(Iterator<org.apache.jackrabbit.spi.Event> events,
+                                 boolean isLocal,
-        this.actualEvents = events.getEvents();
+        this.actualEvents = events;
-        this.isLocal = events.isLocal();
+        this.isLocal = isLocal;
-            event = (org.apache.jackrabbit.spi.Event) actualEvents.next();
+            event = actualEvents.next();
