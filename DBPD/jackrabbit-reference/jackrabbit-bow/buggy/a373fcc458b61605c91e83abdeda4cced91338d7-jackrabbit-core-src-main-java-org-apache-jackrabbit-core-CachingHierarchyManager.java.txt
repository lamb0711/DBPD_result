JCR-682 AccessManager + CachingHierarchyManager problem


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@488325 13f79535-47bb-0310-9956-ffa450edef68

-     * Generate subsequent add and remove notifications for every replacement.
+     * Generate subsequent add and remove notifications for every replacement. This method
+     * currently assumes that the reordering is detectable by comparing the state's child
+     * node entries to the overlayed state's child node entries. It is not able to handle
+     * a transient reordering and will therefore evict its cached entry if such a situation
+     * is detected.
+            synchronized (cacheMonitor) {
+                if (idCache.containsKey(state.getNodeId())) {
+                    evict(state.getNodeId());
+                }
+            }
-
+
+        /**
+         * {@inheritDoc}
+         */
+        public String toString() {
+            return id.toString();
+        }
