JCR-1232: Merge UUID to NodeId

Replace more uses of UUID with NodeId. Most notably:

  * Reference InternalValues now contain NodeIds instead of UUIDs
  * Item state serializers use NodeIds instead of UUIDs
  * Frozen ids in versioning are now NodeIds instead of UUIDs
  * Dropped Session.internalGetUUID() in favor of Session.getNodeId()
  * Dropped Session.getNodeByUUID(UUID) in favor of Session.getNodeById(NodeId)

None of these changes has functional effects, expect reducing the amount of extra NodeId objects that need to be instantiated when switching between representations.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@792485 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.uuid.UUID;
-     * Retrieves the referenceable node with the given <code>UUID</code>.
-     *
-     * @param uuid uuid of the node to be retrieved
-     * @return referenceable node with the given uuid
-     * @throws ItemNotFoundException if no node exists with the given uuid or
-     * if the existing node is not referenceable.
-     * @throws RepositoryException if another error occurs.
-     * @see #getNodeByUUID(String)
-     * @see #getNodeById(NodeId)
-     */
-    public Node getNodeByUUID(UUID uuid) throws ItemNotFoundException, RepositoryException {
-        NodeImpl node = getNodeById(new NodeId(uuid));
-        // since the uuid of a node is only exposed through jcr:uuid declared
-        // by mix:referenceable it's rather unlikely that a client can possibly
-        // know the internal uuid of a non-referenceable node; omitting the
-        // check for mix:referenceable seems therefore to be a reasonable
-        // compromise in order to improve performance.
-/*
-        if (node.isNodeType(Name.MIX_REFERENCEABLE)) {
-            return node;
-        } else {
-            // there is a node with that uuid but the node does not expose it
-            throw new ItemNotFoundException(uuid.toString());
-        }
-*/
-        return node;
-    }
-
-    /**
-            return getNodeByUUID(UUID.fromString(uuid));
+            NodeImpl node = getNodeById(new NodeId(uuid));
+            // since the uuid of a node is only exposed through jcr:uuid declared
+            // by mix:referenceable it's rather unlikely that a client can possibly
+            // know the internal uuid of a non-referenceable node; omitting the
+            // check for mix:referenceable seems therefore to be a reasonable
+            // compromise in order to improve performance.
+            /*
+            if (node.isNodeType(Name.MIX_REFERENCEABLE)) {
+                return node;
+            } else {
+                // there is a node with that uuid but the node does not expose it
+                throw new ItemNotFoundException(uuid.toString());
+            }
+             */
+            return node;
