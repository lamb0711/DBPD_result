JCR-4066: spi2dav: use HttpClient4 based WebDAV API in remoting code

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1774468 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.http.HttpResponse;
-import org.apache.jackrabbit.webdav.client.methods.DavMethodBase;
-import org.apache.jackrabbit.webdav.client.methods.PropFindMethod;
-import org.apache.jackrabbit.webdav.client.methods.ReportMethod;
+import org.apache.jackrabbit.webdav.client.methods.HttpPropfind;
+import org.apache.jackrabbit.webdav.client.methods.HttpReport;
-                    ReportMethod rm = null;
+                    HttpReport request = null;
-                        rm = new ReportMethod(wspUri, rInfo);
+                        request = new HttpReport(wspUri, rInfo);
-                        service.getClient(sessionInfo).executeMethod(rm);
+                        HttpResponse response = service.executeRequest(sessionInfo, request);
+                        request.checkSuccess(response);
-                        MultiStatus ms = rm.getResponseBodyAsMultiStatus();
+                        MultiStatus ms = request.getResponseBodyAsMultiStatus(response);
+
-                        if (rm != null) {
-                            rm.releaseConnection();
+                        if (request != null) {
+                            request.releaseConnection();
-        
+
-        DavMethodBase method = null;
+        HttpPropfind request = null;
-            method = new PropFindMethod(uri, nameSet, DavConstants.DEPTH_0);
+            request = new HttpPropfind(uri, nameSet, DavConstants.DEPTH_0);
-            service.getClient(sessionInfo).executeMethod(method);
-            MultiStatusResponse[] responses = method.getResponseBodyAsMultiStatus().getResponses();
+            HttpResponse response = service.executeRequest(sessionInfo, request);
+            MultiStatusResponse[] responses = request.getResponseBodyAsMultiStatus(response).getResponses();
-            if (method != null) {
-                method.releaseConnection();
+            if (request != null) {
+                request.releaseConnection();
-    
+
