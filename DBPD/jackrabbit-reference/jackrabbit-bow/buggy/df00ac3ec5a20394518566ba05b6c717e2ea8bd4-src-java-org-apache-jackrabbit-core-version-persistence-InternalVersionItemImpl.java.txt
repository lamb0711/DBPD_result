- fixing latest locking issues
- fixing version items refresh

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@157083 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.version.InternalVersionItemListener;
+
+import java.util.HashSet;
+import java.util.Set;
+import java.util.Iterator;
-abstract class InternalVersionItemImpl {
+abstract class InternalVersionItemImpl implements InternalVersionItem {
+     * the item listeners
+     */
+    private final Set listeners = new HashSet();
+
+    /**
+     * {@inheritDoc}
+     */
+    public void addListener(InternalVersionItemListener listener) {
+        listeners.add(listener);
+    }
+
+    /**
+     * notifys the listeners that this item was modified
+     */
+    protected void notifyModifed() {
+        Iterator iter = listeners.iterator();
+        while (iter.hasNext()) {
+            ((InternalVersionItemListener) iter.next()).itemModifed(this);
+        }
+    }
+
+    /**
