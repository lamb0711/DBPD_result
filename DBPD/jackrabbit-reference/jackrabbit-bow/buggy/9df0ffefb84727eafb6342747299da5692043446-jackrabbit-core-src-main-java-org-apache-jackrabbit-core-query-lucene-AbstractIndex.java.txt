JCR-863: Use FileLock for locking instead of empty file

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@587450 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Enumeration;
+import java.util.Iterator;
-            indexWriter = new IndexWriter(directory, analyzer, true);
+            indexWriter = new IndexWriter(directory, analyzer);
-            indexWriter = new IndexWriter(getDirectory(), analyzer, false);
+            indexWriter = new IndexWriter(getDirectory(), analyzer);
-            for (Enumeration fields = doc.fields(); fields.hasMoreElements(); ) {
-                Field f = (Field) fields.nextElement();
+            for (Iterator fields = doc.getFields().iterator(); fields.hasNext(); ) {
+                Field f = (Field) fields.next();
