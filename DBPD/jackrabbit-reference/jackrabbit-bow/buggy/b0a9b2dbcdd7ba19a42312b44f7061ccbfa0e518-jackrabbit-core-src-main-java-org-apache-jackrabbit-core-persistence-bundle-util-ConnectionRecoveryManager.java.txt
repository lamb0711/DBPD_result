JCR-948 Support for JNDI configuration of BundleDbPersistenceManager and DbDataStore

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@599370 13f79535-47bb-0310-9956-ffa450edef68

-import java.sql.DriverManager;
-            if (driver != null && driver.length() > 0) {
-                Class driverClass = Class.forName(driver);
-                // Workaround for Apache Derby:
-                // The JDBC specification recommends the Class.ForName method without the .newInstance() method call, 
-                // but adding the newInstance() guarantees that Derby will be booted on any Java Virtual Machine.
-                driverClass.newInstance();
-            }
-        } catch (Throwable e) {
-            throw new RepositoryException("Could not load or initialize the database driver class " + driver, e);
-        }
-        try {
-            connection = DriverManager.getConnection(url, user, password);
+            connection = ConnectionFactory.getConnection(driver, url, user, password);
