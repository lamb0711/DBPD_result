JCR-1440: NPE Thrown when two Cluster Nodes are hitting the same underlying database

Automatically update internal version history caches when receiving updates from other cluster nodes.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@919461 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+
+        Collection<InternalVersionItem> items =
+            new ArrayList<InternalVersionItem>();
+        for (Map.Entry<ItemId, InternalVersionItem> entry : versionItems.entrySet()) {
+            if (changes.has(entry.getKey())) {
+                items.add(entry.getValue());
+            }
+        }
+        itemsUpdated(items);
