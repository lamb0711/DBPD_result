JCR-742: Implemented AbstractProperty.remove(). Added a warning about the use of getParent().

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@515264 13f79535-47bb-0310-9956-ffa450edef68

- *   <li>{@link Item#remove()}</li>
+ * <p>
+ * <strong>NOTE:</strong> Many of the default method implementations in
+ * this base class rely on the parent node being accessible through the
+ * {@link Item#getParent()} call. It is possible (though unlikely) that
+ * access controls deny access to a containing node even though a property
+ * is accessible. In such cases the default method implementations in this
+ * class <em>will not work</em>.
-        implements Property {
+        implements Item, Property {
+    /**
+     * Removes this property.
+     * <p>
+     * The default implementation calls {@link Node#setProperty(String, Value)}
+     * with a <code>null</code> value on the parent node.
+     *
+     * @throws RepositoryException if an error occurs
+     */
+    public void remove() throws RepositoryException {
+        getParent().setProperty(getName(), (Value) null);
+    }
+
-        String uuid = getString();
-        if (getType() != PropertyType.REFERENCE) {
-            uuid = session.getValueFactory().createValue(
-                    uuid, PropertyType.REFERENCE).getString();
+        Value value = getValue();
+        if (value.getType() != PropertyType.REFERENCE) {
+            value = session.getValueFactory().createValue(
+                    value.getString(), PropertyType.REFERENCE);
-        return session.getNodeByUUID(uuid);
+        return session.getNodeByUUID(value.getString());
