JCR-1855: Update to Lucene 2.4.1

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@756444 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.IOException;
+
-     * The single token to return.
+     * The string value of the token.
-    private Token t;
+    private String value;
+
+    /**
+     * The payload of the token.
+     */
+    private final Payload payload;
-        super();
-        t = new Token(value, 0, value.length());
-        t.setPayload(new Payload(new PropertyMetaData(type).toByteArray()));
+        this.value = value;
+        this.payload = new Payload(new PropertyMetaData(type).toByteArray());
-        this.t = t;
+        this.value = t.term();
+        this.payload = t.getPayload();
-    public Token next() {
-        try {
-            return t;
-        } finally {
-            t = null;
+    public Token next(Token reusableToken) throws IOException {
+        if (value == null) {
+            return null;
+        reusableToken.clear();
+        reusableToken.setTermBuffer(value);
+        reusableToken.setPayload(payload);
+        reusableToken.setStartOffset(0);
+        reusableToken.setEndOffset(value.length());
+        value = null;
+        return reusableToken;
