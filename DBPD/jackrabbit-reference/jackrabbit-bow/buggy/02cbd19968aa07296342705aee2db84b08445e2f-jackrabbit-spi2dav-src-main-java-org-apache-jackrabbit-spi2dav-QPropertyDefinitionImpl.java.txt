JCR-2105: JSR 283 NodeType Management (work in progress)
JCR-1483: Move common node type functionality to jackrabbit-spi-commons

NOTE: intermediate checkin to avoid additional conflicts with stefans work


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@774294 13f79535-47bb-0310-9956-ffa450edef68

-    /**
-     * TODO
-     */
-    private final Name[] availableQueryOperators = new Name[0];
-
-    /**
-     * TODO
-     */
-    private final boolean fullTextSearcheable = false;
-    /**
-     * TODO
-     */
-    private final boolean queryOrderable = false;
+    private final Name[] availableQueryOperators;
+    private final boolean fullTextSearcheable;
+    private final boolean queryOrderable;
+        if (pdefElement.hasAttribute(FULL_TEXT_SEARCHABLE_ATTRIBUTE)) {
+            fullTextSearcheable = Boolean.valueOf(pdefElement.getAttribute(FULL_TEXT_SEARCHABLE_ATTRIBUTE)).booleanValue();
+        } else {
+            fullTextSearcheable = false;
+        }
+        if (pdefElement.hasAttribute(QUERY_ORDERABLE_ATTRIBUTE)) {
+            queryOrderable = Boolean.valueOf(pdefElement.getAttribute(QUERY_ORDERABLE_ATTRIBUTE)).booleanValue();
+        } else {
+            queryOrderable = false;
+        }
+
+
+        child = DomUtil.getChildElement(pdefElement, AVAILABLE_QUERY_OPERATORS_ELEMENT, null);
+        if (child == null) {
+            availableQueryOperators = new Name[0];
+        } else {
+            List names = new ArrayList();
+            ElementIterator it = DomUtil.getChildren(child, AVAILABLE_QUERY_OPERATOR_ELEMENT, null);
+            while (it.hasNext()) {
+                String str = DomUtil.getText(it.nextElement());
+                Name n = resolver.getQName(str);
+                names.add(n);
+            }
+            availableQueryOperators = (Name[]) names.toArray(new Name[names.size()]);
+        }
-        // TODO
-        throw new UnsupportedOperationException("JCR-2003 Add support for JCR 2.0. Implementation missing");
+        return availableQueryOperators;
-    public boolean isFullTextSearcheable() {
-        // TODO
-        throw new UnsupportedOperationException("JCR-2003 Add support for JCR 2.0. Implementation missing");
+    public boolean isFullTextSearchable() {
+        return fullTextSearcheable;
-        // TODO
-        throw new UnsupportedOperationException("JCR-2003 Add support for JCR 2.0. Implementation missing");
+        return queryOrderable;
-                    && fullTextSearcheable == other.isFullTextSearcheable()
+                    && fullTextSearcheable == other.isFullTextSearchable()
