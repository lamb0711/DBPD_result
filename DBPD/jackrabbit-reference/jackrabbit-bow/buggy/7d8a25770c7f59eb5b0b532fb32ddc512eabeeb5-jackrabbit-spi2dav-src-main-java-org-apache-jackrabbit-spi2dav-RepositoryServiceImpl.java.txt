JCR-2542: spi2dav: EventFilters not respected

Throw when unsupported EventFilters get used (this will make it easier to understand the test failures in the future).

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1200872 13f79535-47bb-0310-9956-ffa450edef68

+        checkEventFilterSupport(filters);
+        checkEventFilterSupport(filters);
+    }
+
+    private void checkEventFilterSupport(EventFilter[] filters) throws UnsupportedRepositoryOperationException {
+        for (EventFilter ef : filters) {
+            if (ef instanceof EventFilterImpl) {
+                EventFilterImpl efi = (EventFilterImpl)ef;
+                if (efi.getNodeTypeNames() != null && ! efi.getNodeTypeNames().isEmpty()) {
+                    throw new UnsupportedRepositoryOperationException("This SPI implementation does not support filtering by node types (see issue JCR-2542)");
+                }
+                if (efi.getNoLocal()) {
+                    throw new UnsupportedRepositoryOperationException("This SPI implementation does not support filtering using the 'noLocal' flag (see issue JCR-2542)");
+                }
+            }
+        }
