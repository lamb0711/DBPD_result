JCR-455: InternalXAResource.rollback() can be called twice and without prepare
JCR-414: jcr:successors property not persisted correctly within a transaction


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@412995 13f79535-47bb-0310-9956-ffa450edef68

-            InternalXAResource resource = resources[i];
-            if (txe != null) {
-                try {
-                    resource.rollback(this);
-                } catch (TransactionException e) {
-                    log.warn("Unable to rollback changes on " + resource, e);
-                }
-            } else {
-                try {
-                    resource.prepare(this);
-                } catch (TransactionException e) {
-                    txe = e;
-                }
+            try {
+                resources[i].prepare(this);
+            } catch (TransactionException e) {
+                txe = e;
+                break;
+
