JCR-2087: Upgrade to Java 5 as the base platform

Some more Java 5 cleanups.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@795046 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.Item;
+import javax.jcr.NodeIterator;
+import javax.jcr.PropertyIterator;
+
+import org.apache.jackrabbit.commons.iterator.NodeIteratorAdapter;
+import org.apache.jackrabbit.commons.iterator.PropertyIteratorAdapter;
+
+import java.util.ArrayList;
-    private final Collection children;
+    private final Collection<Item> children;
-            String namePattern, Collection children,
+            String namePattern, Collection<Item> children,
-            String[] nameGlobs, Collection children,
+            String[] nameGlobs, Collection<Item> children,
+    public static NodeIterator collectChildNodes(
+            Node node, String namePattern) throws RepositoryException {
+        Collection<Item> nodes = new ArrayList<Item>();
+        node.accept(new ChildrenCollectorFilter(
+                namePattern, nodes, true, false, 1));
+        return new NodeIteratorAdapter(nodes);
+    }
+
+    public static NodeIterator collectChildNodes(
+            Node node, String[] nameGlobs) throws RepositoryException {
+        Collection<Item> nodes = new ArrayList<Item>();
+        node.accept(new ChildrenCollectorFilter(
+                nameGlobs, nodes, true, false, 1));
+        return new NodeIteratorAdapter(nodes);
+    }
+
+    public static PropertyIterator collectProperties(
+            Node node, String namePattern) throws RepositoryException {
+        Collection<Item> properties = new ArrayList<Item>();
+        node.accept(new ChildrenCollectorFilter(
+                namePattern, properties, false, true, 1));
+        return new PropertyIteratorAdapter(properties);
+    }
+
+    public static PropertyIterator collectProperties(
+            Node node, String[] nameGlobs) throws RepositoryException {
+        Collection<Item> properties = new ArrayList<Item>();
+        node.accept(new ChildrenCollectorFilter(
+                nameGlobs, properties, false, true, 1));
+        return new PropertyIteratorAdapter(properties);
+    }
+
