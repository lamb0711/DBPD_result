JCR-351: Better handling of null Credentials when JAAS is not configured.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@386415 13f79535-47bb-0310-9956-ffa450edef68

-            // null credentials, obtain the identity of the already-authenticated
-            // subject from access control context
-            AccessControlContext acc = AccessController.getContext();
-            Subject subject;
-                subject = Subject.getSubject(acc);
+                // null credentials, obtain the identity of the already-authenticated
+                // subject from access control context
+                AccessControlContext acc = AccessController.getContext();
+                Subject subject = Subject.getSubject(acc);
+                if (subject != null) {
+                    return createSession(subject, workspaceName);
+                }
-            }
-            if (subject == null) {
-                throw new LoginException("No Subject associated with AccessControlContext");
-            }
-            // create session
-            try {
-                return createSession(subject, workspaceName);
-            throw new LoginException(le.getMessage());
+            throw new LoginException(le.getMessage(), le);
