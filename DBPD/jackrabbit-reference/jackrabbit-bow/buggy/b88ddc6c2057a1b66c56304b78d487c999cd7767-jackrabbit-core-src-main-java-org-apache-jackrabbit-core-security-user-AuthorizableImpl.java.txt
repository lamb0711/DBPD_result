JCR-1588: JSR 283 Access Control

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@713975 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.api.security.principal.NoSuchPrincipalException;
+            Principal princ = null;
-                coll.add(prMgr.getPrincipal(refName));
-            } else {
-                log.warn("Principal "+ refName +" unknown to PrincipalManager.");
-                coll.add(new PrincipalImpl(refName));
+                try {
+                    princ = prMgr.getPrincipal(refName);
+                } catch (NoSuchPrincipalException e) {
+                    // should not get here
+                }
+            if (princ == null) {
+                log.warn("Principal "+ refName +" unknown to PrincipalManager.");
+                princ = new PrincipalImpl(refName);
+            }
+            coll.add(princ);
