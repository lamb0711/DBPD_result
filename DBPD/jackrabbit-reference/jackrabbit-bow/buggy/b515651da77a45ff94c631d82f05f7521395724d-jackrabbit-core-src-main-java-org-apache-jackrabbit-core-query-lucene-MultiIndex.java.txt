JCR-1363: Migrate to Lucene 2.3

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@696653 13f79535-47bb-0310-9956-ffa450edef68

-        IndexReader reader = getIndexReader();
+        CachingMultiIndexReader reader = getIndexReader();
-            reader.close();
+            reader.release();
-            IndexReader reader = getIndexReader();
+            CachingMultiIndexReader reader = getIndexReader();
-                reader.close();
+                reader.release();
-                closeMultiReader();
+                releaseMultiReader();
-                closeMultiReader();
+                releaseMultiReader();
-            // close readers obtained so far
+            // release readers obtained so far
-                    reader.close();
+                    reader.release();
-                    log.warn("Exception closing index reader: " + ex);
+                    log.warn("Exception releasing index reader: " + ex);
-                    closeMultiReader();
+                    releaseMultiReader();
-                multiReader.incrementRefCount();
+                multiReader.acquire();
-            multiReader.incrementRefCount();
+            multiReader.acquire();
-                closeMultiReader();
+                releaseMultiReader();
-     * Closes the {@link #multiReader} and sets it <code>null</code>. If the
+     * Releases the {@link #multiReader} and sets it <code>null</code>. If the
-     * @throws IOException if an error occurs while closing the reader.
+     * @throws IOException if an error occurs while releasing the reader.
-    void closeMultiReader() throws IOException {
+    void releaseMultiReader() throws IOException {
-                multiReader.close();
+                multiReader.release();
-                            closeMultiReader();
+                            releaseMultiReader();
