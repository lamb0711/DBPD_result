JCR-1963: Determination of property state difference should skip binary values

Property states are now only diffed when necessary

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@747839 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.state.ItemState;
-import org.apache.jackrabbit.jcr2spi.state.Status;
-import org.apache.jackrabbit.jcr2spi.state.ItemStateFactory;
-import org.apache.jackrabbit.spi.Name;
-import org.apache.jackrabbit.spi.Path;
-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
+import java.lang.ref.Reference;
+import java.lang.ref.SoftReference;
-import java.lang.ref.SoftReference;
-import java.lang.ref.Reference;
+
+import org.apache.jackrabbit.jcr2spi.state.ItemState;
+import org.apache.jackrabbit.jcr2spi.state.ItemStateFactory;
+import org.apache.jackrabbit.jcr2spi.state.Status;
+import org.apache.jackrabbit.jcr2spi.state.ItemState.MergeResult;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.Path;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
-            boolean modified = currentState.merge(state, keepChanges);
+            MergeResult mergeResult = currentState.merge(state, keepChanges);
-            } else if (modified) {
+            } else if (mergeResult.modified()) {
