JCR-1898: Replace customized QueryParser.jjt

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@723728 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.query.lucene.fulltext.ParseException;
-import org.apache.jackrabbit.core.query.lucene.fulltext.QueryParser;
+import org.apache.lucene.queryParser.QueryParser;
+import org.apache.lucene.queryParser.ParseException;
-            QueryParser parser = new QueryParser(
+            QueryParser parser = new JackrabbitQueryParser(
-            parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
-            // replace escaped ' with just '
-            StringBuffer query = new StringBuffer();
-            String textsearch = node.getQuery();
-            // the default lucene query parser recognizes 'AND' and 'NOT' as
-            // keywords.
-            textsearch = textsearch.replaceAll("AND", "and");
-            textsearch = textsearch.replaceAll("NOT", "not");
-            boolean escaped = false;
-            for (int i = 0; i < textsearch.length(); i++) {
-                if (textsearch.charAt(i) == '\\') {
-                    if (escaped) {
-                        query.append("\\\\");
-                        escaped = false;
-                    } else {
-                        escaped = true;
-                    }
-                } else if (textsearch.charAt(i) == '\'') {
-                    if (escaped) {
-                        escaped = false;
-                    }
-                    query.append(textsearch.charAt(i));
-                } else {
-                    if (escaped) {
-                        query.append('\\');
-                        escaped = false;
-                    }
-                    query.append(textsearch.charAt(i));
-                }
-            }
-            Query context = parser.parse(query.toString());
+            Query context = parser.parse(node.getQuery());
