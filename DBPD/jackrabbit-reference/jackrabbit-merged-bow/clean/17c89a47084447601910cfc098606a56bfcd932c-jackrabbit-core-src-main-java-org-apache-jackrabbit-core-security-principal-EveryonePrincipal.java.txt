JCR-2840 -  Inconsistencies if "everyone" Group is created by User Management

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1044312 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.api.security.principal.JackrabbitPrincipal;
+
-public final class EveryonePrincipal implements java.security.acl.Group {
+public final class EveryonePrincipal implements java.security.acl.Group, JackrabbitPrincipal {
-    private static final String NAME = "everyone";
+    public static final String NAME = "everyone";
-        return obj == this || obj instanceof EveryonePrincipal;
+        if (obj == this || obj instanceof EveryonePrincipal) {
+            return true;
+        } else if (obj instanceof JackrabbitPrincipal) {
+            return NAME.equals(((JackrabbitPrincipal) obj).getName());
+        }
+        return false;

INS26 INS40 INS43 INS42 UPD83 INS8 INS25 INS41 MOV27 INS8 INS25 INS9 MOV41 INS62 INS8 INS9 INS42 INS43 INS41 INS42 INS32 INS42 INS42 INS32 INS36 INS42 INS11 INS43 INS42 INS42 DEL8