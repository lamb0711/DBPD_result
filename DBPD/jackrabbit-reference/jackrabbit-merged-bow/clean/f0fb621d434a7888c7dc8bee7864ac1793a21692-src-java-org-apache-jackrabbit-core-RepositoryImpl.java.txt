- jcr:versionStorage was not visible in all workspaces

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@126478 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.nodetype.NodeTypeImpl;
+    private static final String SYSTEM_ROOT_NODE_UUID = "deadbeef-cafe-babe-cafe-babecafebabe";
+    private static final String VERSION_STORAGE_NODE_UUID = "deadbeef-face-babe-cafe-babecafebabe";
+
-            rootNode.addNode(SYSTEM_ROOT_NAME, NodeTypeRegistry.REP_SYSTEM);
+            NodeTypeImpl nt = sysSession.getNodeTypeManager().getNodeType(NodeTypeRegistry.REP_SYSTEM);
+            NodeImpl sysRoot = rootNode.internalAddChildNode(SYSTEM_ROOT_NAME, nt, SYSTEM_ROOT_NODE_UUID);
+            // add version storage
+            nt = sysSession.getNodeTypeManager().getNodeType(NodeTypeRegistry.NT_UNSTRUCTURED);
+            sysRoot.internalAddChildNode(VersionManager.NODENAME_HISTORY_ROOT, nt, VERSION_STORAGE_NODE_UUID);

INS26 INS40 INS23 INS23 INS83 INS83 INS83 INS43 INS59 INS83 INS83 INS83 INS43 INS59 INS42 INS42 INS45 INS42 INS42 INS45 INS60 INS60 INS21 INS21 INS43 INS59 INS43 INS59 INS7 INS32 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS40 INS42 INS42 INS32 INS42 INS40 MOV42 UPD42 MOV42 MOV42 INS42 INS42 INS32 INS42 UPD40 MOV40 INS42 INS42 INS42 INS42 DEL32 DEL21