JCR-3172: implement PERSIST events for the EventJournal

Add PERSIST events to EventJournal, add a minimal test case

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1212472 13f79535-47bb-0310-9956-ffa450edef68

-            if (childId == null) {
+            if (childId == null && type != Event.PERSIST) {
+     * Creates a new {@link javax.jcr.observation.Event} of type
+     * {@link javax.jcr.observation.Event#PERSIST}.
+     *
+     * @param session    the session that changed the property.
+     * @param external   flag indicating whether this is an external event
+     * @return an <code>EventState</code> instance.
+     */
+    public static EventState persist(Session session, boolean external) {
+
+        return new EventState(Event.PERSIST, null, null, null, null,
+                null, null, session, external);
+    }
+
+    /**
-     * @return the <code>ItemId</code>.
+     * @return the <code>ItemId</code> or <code>null</code> for {@link Event#PERSIST} events 
-        if (childId == null) {
+        if (type == Event.PERSIST) {
+            return null;
+        } else if (childId == null) {
-            h = 37 * h + parentId.hashCode();
-            h = 37 * h + childRelPath.hashCode();
+            h = 37 * h + (parentId != null ? parentId.hashCode() : 0);
+            h = 37 * h + (childRelPath != null ? childRelPath.hashCode() : 0);
+        } else if (eventType == Event.PERSIST) {
+            return "Persist";

INS31 INS29 INS83 INS83 INS43 INS42 INS44 INS44 INS8 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS39 INS42 INS41 INS25 INS66 INS65 INS66 INS65 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS14 UPD66 INS65 INS66 INS27 INS8 MOV25 INS40 INS67 INS43 INS40 INS33 INS33 INS33 INS33 INS33 INS33 INS42 INS42 INS67 INS42 INS40 INS41 INS27 INS40 INS42 INS42 INS42 INS42 INS33 MOV27 INS27 INS42 INS40 INS36 INS36 INS16 INS16 INS25 INS27 MOV32 INS34 INS27 MOV32 INS34 INS27 INS8 MOV8 INS42 INS33 INS42 INS33 INS42 INS40 INS41 INS45