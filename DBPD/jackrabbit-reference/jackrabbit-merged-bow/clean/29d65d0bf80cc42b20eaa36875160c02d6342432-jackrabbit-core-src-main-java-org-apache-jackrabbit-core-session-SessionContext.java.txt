JCR-890: concurrent read-only access to a session

Make ItemValidator a more integral part of SessionContext.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@985249 13f79535-47bb-0310-9956-ffa450edef68

+     * The item validator of this session
+     */
+    private final ItemValidator itemValidator;
+
+    /**
-     * The item validator of this session
-     */
-    private volatile ItemValidator itemValidator;
-
-    /**
+        this.itemValidator = new ItemValidator(this);
+     * Returns the item validator of this session.
+     *
+     * @return item validator
+     */
+    public ItemValidator getItemValidator() {
+        return itemValidator;
+    }
+
+    /**
-    public ItemValidator getItemValidator() {
-        assert itemValidator != null;
-        return itemValidator;
-    }
-
-    public void setItemValidator(ItemValidator itemValidator) {
-        assert itemValidator != null;
-        this.itemValidator = itemValidator;
-    }
-

MOV23 MOV31 UPD83 INS29 INS21 INS65 INS65 INS7 INS66 INS66 MOV22 INS14 MOV43 INS52 DEL42 DEL33 DEL27 DEL6 DEL83 DEL39 DEL42 DEL42 DEL44 DEL42 DEL33 DEL27 DEL6 DEL42 DEL7 DEL21 DEL8 DEL31