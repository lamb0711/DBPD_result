JCR-1590: JSR 283: Locking

When readily available, add information about the locked node path to LockExceptions.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@803549 13f79535-47bb-0310-9956-ffa450edef68

-                    throw new LockException("Node already locked: " + node);
+                    throw new LockException(
+                            "Node already locked: " + node, null,
+                            node.getPath());
-                            "Parent node has a deep lock: " + node);
+                            "Parent node has a deep lock: " + node, null,
+                            session.getJCRPath(getPath(session, other.getId())));
-                throw new LockException("Some child node is locked.");
+                throw new LockException(
+                        "Some child node is locked.", null,
+                        session.getJCRPath(getPath(session, other.getId())));
-            PathMap.Element<LockInfo> element =
-                lockMap.map(node.getPrimaryPath(), true);
+            Path path = node.getPrimaryPath();
+            PathMap.Element<LockInfo> element = lockMap.map(path, true);
-                        throw new LockException(msg);
+                        throw new LockException(
+                                msg, null, session.getJCRPath(path));
-                        throw new LockException(msg);
+                        throw new LockException(
+                                msg, null, session.getJCRPath(getPath(session, id)));

INS60 INS43 INS59 INS42 INS42 INS32 INS42 INS42 UPD42 MOV42 INS33 INS32 INS42 INS42 INS32 INS33 INS32 INS42 INS42 INS32 INS42 INS42 INS33 INS32 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS32 INS33 INS32 INS33 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42 INS42 DEL42 DEL32