JCR-2582 spi2dav: temp files are not clean up after batch submit


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@927406 13f79535-47bb-0310-9956-ffa450edef68

+            } else if (buffer != null) {
+                // this instance is backed by an in-memory buffer
+                buffer = EMPTY_BYTE_ARRAY;
+            }
+        }
+
+        /**
+         * Resets the state of this value. a subsequent call to init() can be
+         * used to load the binary again.
+         *
+         * If this <code>BinaryQValue</code> is backed by a persistent resource
+         * calling this method will have no effect.
+         * @see QValue#discard()
+         */
+        public void reset() {
+            if (!temp) {
+                // do nothing if this instance is not backed by temporarily
+                // allocated resource/buffer
+                return;
+            }
+            if (file != null) {
+                // this instance is backed by a temp file
+                file.delete();
+            initialized = false;

INS31 MOV29 MOV78 INS83 INS39 INS42 INS8 INS29 UPD42 INS25 INS25 INS65 INS65 INS21 INS38 INS8 INS27 INS8 INS25 INS66 INS66 INS66 INS66 INS68 INS7 INS42 INS41 INS42 INS33 INS21 INS27 INS8 INS42 INS42 INS42 INS9 INS32 INS42 INS33 INS21 INS42 INS42 INS7 INS42 INS42