avoid to keep hard references to ItemImpl & ItemState instances

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@332056 13f79535-47bb-0310-9956-ffa450edef68

-     * Keep a hard reference to the root node state
+     * uuid of root node
-    private NodeState root;
+    private final String rootNodeUUID;
-
-        try {
-            root = (NodeState) getNonVirtualItemState(new NodeId(rootNodeUUID));
-        } catch (NoSuchItemStateException e) {
-            // create root node
-            root = createRootNodeState(rootNodeUUID, ntReg);
+        this.rootNodeUUID = rootNodeUUID;
+        // create root node state if it doesn't yet exist
+        if (!hasNonVirtualItemState(new NodeId(rootNodeUUID))) {
+            createRootNodeState(rootNodeUUID, ntReg);
-                    events.createEventStates(root.getUUID(), local, this);
+                    events.createEventStates(rootNodeUUID, local, this);

INS83 UPD43 UPD42 UPD42 MOV21 INS25 UPD66 INS38 MOV8 INS22 INS42 MOV32 INS52 INS42 UPD42 MOV32 UPD42 MOV42 DEL42 DEL42 DEL43 DEL11 DEL42 DEL7 DEL8 DEL42 DEL43 DEL42 DEL44 DEL12 DEL54 DEL42 DEL32