JCR-1481: VersionHistory.removeVersion() does not throw ReferentialIntegrityException

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@638430 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.state.NoSuchItemStateException;
-import java.util.Collections;
-    protected List getItemReferences(InternalVersionItem item) {
+    protected boolean hasItemReferences(InternalVersionItem item)
+            throws RepositoryException {
-            return refs.getReferences();
+            return refs.hasReferences();
+        } catch (NoSuchItemStateException e) {
+            return false;
-            return Collections.EMPTY_LIST;
+            throw new RepositoryException(e);

MOV26 UPD40 MOV43 INS39 INS42 UPD43 UPD42 INS12 INS44 INS8 INS43 INS42 INS41 INS53 UPD42 INS42 INS9 INS14 INS43 INS42 INS42 DEL42 DEL40 DEL41