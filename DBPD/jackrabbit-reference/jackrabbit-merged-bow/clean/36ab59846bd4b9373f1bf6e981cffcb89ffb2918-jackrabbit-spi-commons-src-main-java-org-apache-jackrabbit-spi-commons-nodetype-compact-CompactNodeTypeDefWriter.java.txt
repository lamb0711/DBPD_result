JCR-3033: Provide a method for writing name space declarations in CompactNodeTypeDefWriter

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1149178 13f79535-47bb-0310-9956-ffa450edef68

+     * Write a namespace declaration to this writer. This method has no effect if the
+     * writer does not include namespaces.
+     *
+     * @param prefix  namespace prefix
+     * @throws NamespaceException  if no namespace is registered for the given prefix
+     * @throws IOException  if an I/O error occurs
+     */
+    public void writeNamespaceDelclaration(String prefix) throws NamespaceException, IOException {
+        if (!usedNamespaces.contains(prefix)) {
+            usedNamespaces.add(prefix);
+            nsWriter.write("<'");
+            nsWriter.write(prefix);
+            nsWriter.write("'='");
+            nsWriter.write(escape(resolver.getURI(prefix)));
+            nsWriter.write("'>\n");
+        }
+    }
+
+    /**
-                    if (!usedNamespaces.contains(prefix)) {
-                        usedNamespaces.add(prefix);
-                        nsWriter.write("<'");
-                        nsWriter.write(prefix);
-                        nsWriter.write("'='");
-                        nsWriter.write(escape(name.getNamespaceURI()));
-                        nsWriter.write("'>\n");
-                    }
+                    writeNamespaceDelclaration(prefix);

INS31 INS29 INS83 INS39 INS42 INS44 INS43 INS43 MOV8 INS65 INS65 INS65 INS65 INS43 INS42 INS42 INS42 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS42 INS8 UPD42 UPD42 INS42 INS21 INS32 INS42 INS42