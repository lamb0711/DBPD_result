JCR-2003: JCR2SPI / SPI: Add support for JCR 2.0

- Node.getReferences(String)
- Node.getWeakReferences()
- Node.getWeakReferences(String)

JCR-1418: Redesign NodeInfo.getReferences()

- deprecated getReferences on NodeInfo
- added method to RepositoryService as suggested by marcel but including support for the variants in JCR 2.0
   > weakrefs vs refs
   > name-filter

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@779555 13f79535-47bb-0310-9956-ffa450edef68

+     * Returns the {@link PropertyId Id}s of the properties that are referencing
+     * the node identified by the given <code>nodeId</code>. If
+     * <code>weakReferences</code> is <code>true</code> the ids of
+     * {@link javax.jcr.PropertyType#WEAKREFERENCE WEAKREFERENCE} properties are
+     * returned, otherwise the property must be of type {@link javax.jcr.PropertyType#REFERENCE REFERENCE}.
+     *
+     * @param sessionInfo
+     * @param nodeId
+     * @param propertyName name filter of referring properties to be returned;
+     * if <code>null</code> then all references are returned.
+     * @param weakReferences If <code>true</code> the properties must be of type
+     * {@link javax.jcr.PropertyType#WEAKREFERENCE}, otherwise of type
+     * {@link javax.jcr.PropertyType#REFERENCE}.
+     * @return An Iterator of {@link PropertyId Id}s of the properties that are
+     * referencing the node identified by the given <code>nodeId</code> or an
+     * empty iterator if the node is not eferenceable or no references exist.
+     * @throws ItemNotFoundException
+     * @throws RepositoryException
+     * @see PropertyInfo#getId()
+     * @since JCR 2.0
+     */
+    public Iterator<PropertyId> getReferences(SessionInfo sessionInfo, NodeId nodeId, Name propertyName, boolean weakReferences) throws ItemNotFoundException, RepositoryException;
+
+    /**

INS31 INS29 INS83 INS74 INS42 INS44 INS44 INS44 INS44 INS43 INS43 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS43 INS43 INS43 INS42 INS43 INS42 INS43 INS42 INS39 INS42 INS42 INS42 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS66 INS65 INS66 INS42 INS42 INS42 INS66 INS66 INS42 INS66 INS65 INS66 INS65 INS66 INS66 INS65 INS66 INS66 INS66 INS42 INS42 INS68 INS66 INS42 INS42 INS42 INS42 INS42 INS42 INS66 INS67 INS66 INS67 INS66 INS67 INS67 INS42 INS66 INS42 INS42 INS40 INS42 INS40 INS42 INS40 INS42 INS40 INS42