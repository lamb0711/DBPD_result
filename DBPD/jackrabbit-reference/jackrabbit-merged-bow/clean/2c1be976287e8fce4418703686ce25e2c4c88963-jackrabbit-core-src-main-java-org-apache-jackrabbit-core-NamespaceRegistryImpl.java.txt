JCR-2640: Internal repository context

Streamline namespace and node type registry creation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948818 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.fs.BasedFileSystem;
-     * @param nsRegStore
+     * @param fs repository file system
-    protected NamespaceRegistryImpl(FileSystem nsRegStore)
-            throws RepositoryException {
-        this.nsRegStore = nsRegStore;
+    public NamespaceRegistryImpl(FileSystem fs) throws RepositoryException {
+        this.nsRegStore = new BasedFileSystem(fs, "/namespaces");

INS26 INS40 UPD83 UPD42 UPD42 INS66 INS14 INS43 INS42 INS45 INS42 DEL42