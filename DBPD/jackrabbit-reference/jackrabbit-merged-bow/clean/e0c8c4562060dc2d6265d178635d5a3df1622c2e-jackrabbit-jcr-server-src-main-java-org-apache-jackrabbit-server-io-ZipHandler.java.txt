JCR-2334: Tika-based type detection in jcr-server

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@830670 13f79535-47bb-0310-9956-ffa450edef68

-                    mimeType = context.getMimeResolver().getMimeType(context.getExportRoot().getName());
+                    mimeType = detect(context.getExportRoot().getName());
-            super(contentNode, Text.getName(makeValidJCRPath(entry.getName(), true)), bin, context.getIOListener(), context.getMimeResolver());
+            super(contentNode, Text.getName(makeValidJCRPath(entry.getName(), true)),
+                    null, bin, context.getIOListener(), getIOManager().getDetector());
-            super(exportRoot, out != null, context.getIOListener(), context.getMimeResolver());
+            super(exportRoot, out != null, context.getIOListener());

INS33 INS32 UPD42 UPD42 MOV42 UPD42 MOV42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32