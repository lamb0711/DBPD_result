JCR-1007: Move common implementations of SPI interfaces to spi-commons module

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@553507 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.jackrabbit.spi.rmi.common;
+package org.apache.jackrabbit.spi.commons;
+import org.apache.jackrabbit.spi.IdFactory;
-    public static PropertyInfo createSerializablePropertyInfo(PropertyInfo propertyInfo, SerializableIdFactory idFactory) {
+    public static PropertyInfo createSerializablePropertyInfo(
+            PropertyInfo propertyInfo, IdFactory idFactory) {
-            return new PropertyInfoImpl(idFactory.createSerializableNodeId(propertyInfo.getParentId()),
-                propertyInfo.getQName(), propertyInfo.getPath(),
-                idFactory.createSerializablePropertyId(propertyInfo.getId()),
-                propertyInfo.getType(), propertyInfo.isMultiValued(),
-                propertyInfo.getValues());
+            NodeId parentId = propertyInfo.getParentId();
+            parentId = idFactory.createNodeId(
+                    parentId.getUniqueID(), parentId.getPath());
+            PropertyId propId = idFactory.createPropertyId(
+                    parentId, propertyInfo.getId().getQName());
+            return new PropertyInfoImpl(parentId, propertyInfo.getQName(),
+                    propertyInfo.getPath(), propId, propertyInfo.getType(),
+                    propertyInfo.isMultiValued(), propertyInfo.getValues());
-    private PropertyInfoImpl(NodeId parentId, QName name, Path path,
+    public PropertyInfoImpl(NodeId parentId, QName name, Path path,

INS26 UPD40 INS40 UPD83 UPD43 UPD42 INS60 INS21 INS60 INS43 INS59 INS7 INS43 INS59 INS42 INS42 MOV32 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS42 MOV32 MOV42 INS42 INS42 INS42 INS42 UPD42 DEL42 DEL42 DEL42 DEL32