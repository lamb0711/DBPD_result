JCR-743 XA Transaction Recovery


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@510465 13f79535-47bb-0310-9956-ffa450edef68

+     * {@inheritDoc}
+     * <p/>
+     * <p/>
+     * WebSphere 5.1.1 will try to recover an XA resource on startup, regardless
+     * whether it was committed or rolled back. On this occasion, <code>cri</code>
+     * will be <code>null</code>. In order to be interoperable, we return an
+     * anonymous connection, whose XA resource is recoverable-only.
+
+        if (cri == null) {
+            return new AnonymousConnection();
+        }

INS25 INS65 INS66 INS66 INS66 INS66 INS66 INS66 INS27 INS8 INS42 INS33 INS41 INS14 INS43 INS42