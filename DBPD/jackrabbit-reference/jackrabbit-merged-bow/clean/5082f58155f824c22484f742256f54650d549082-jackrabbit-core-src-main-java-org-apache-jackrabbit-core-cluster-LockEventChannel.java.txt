JCR-929: Under Heavy load in a Cluster HTTP Threads Block and stall requests


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@546038 13f79535-47bb-0310-9956-ffa450edef68

-     * Called when a node has been locked.
+     * Create a new cluster operation that should be used to inform other
+     * instances in the cluster. Called when a node is about to be
+     * locked. 
+     * @return cluster operation or <code>null</code> if the cluster node
+     *         is not started or some error occurs
-    public void locked(NodeId nodeId, boolean deep, String owner);
+    public ClusterOperation create(NodeId nodeId, boolean deep, String owner);
-     * Called when a node has been unlocked.
+     * Create a new cluster operation  that should be used to inform other
+     * instances in the cluster. Called when a node has been unlocked.
+     * @return cluster operation or <code>null</code> if the cluster node
+     *         is not started or some error occurs
-    public void unlocked(NodeId nodeId);
+    public ClusterOperation create(NodeId nodeId);

INS43 INS42 INS43 INS42 INS65 INS42 INS65 INS42 INS66 UPD66 INS66 INS66 INS66 INS66 UPD66 INS66 INS66 DEL39 DEL42 DEL39 DEL42