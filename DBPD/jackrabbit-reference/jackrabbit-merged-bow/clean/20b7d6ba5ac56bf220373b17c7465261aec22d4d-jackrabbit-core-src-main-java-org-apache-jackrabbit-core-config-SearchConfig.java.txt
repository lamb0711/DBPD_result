JCR-1438: Replace Config classes with factories 

Replaced FileSystemConfig with FileSystemFactory.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@688207 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
+
+import org.apache.jackrabbit.core.fs.FileSystem;
+import org.apache.jackrabbit.core.fs.FileSystemFactory;
+
-public class SearchConfig extends BeanConfig {
+public class SearchConfig extends BeanConfig implements FileSystemFactory {
-     * The search index file system configuration, or <code>null</code> if
-     * none is provided.
+     * The (optional) factory for creating the configured search file system.
-    private final FileSystemConfig fsc;
+    private final FileSystemFactory fsf;
-     * @param fsc search index file system configuration, or <code>null</code>
-     *   if none is configured.
+     * @param fsf configured search index file system factory, or <code>null</code>
-            String className, Properties properties, FileSystemConfig fsc) {
+            String className, Properties properties, FileSystemFactory fsf) {
-        this.fsc = fsc;
+        this.fsf = fsf;
-     * Returns the configuration for the <code>FileSystem</code> or
-     * <code>null</code> if none is configured in this <code>SearchConfig</code>.
+     * Creates and returns the configured search file system, or returns
+     * <code>null</code> if a search file system has not been configured.
-     * @return the <code>FileSystemConfig</code> for this <code>SearchConfig</code>.
+     * @return the configured {@link FileSystem}, or <code>null</code>
+     * @throws RepositoryException if the file system can not be created
-    public FileSystemConfig getFileSystemConfig() {
-        return fsc;
+    public FileSystem getFileSystem() throws RepositoryException {
+        if (fsf != null) {
+            return fsf.getFileSystem();
+        } else {
+            return null;
+        }
+

INS26 INS26 INS26 INS40 INS40 INS40 INS43 INS42 UPD43 UPD43 UPD42 INS43 INS8 UPD42 UPD42 UPD43 UPD42 INS65 UPD42 INS42 INS25 UPD66 UPD42 UPD66 UPD42 UPD66 UPD66 INS66 INS65 UPD66 INS42 INS66 INS27 INS8 INS8 UPD42 INS42 INS42 INS33 MOV41 INS41 UPD42 INS32 INS33 INS42 INS42 DEL66 DEL66 DEL42 DEL8