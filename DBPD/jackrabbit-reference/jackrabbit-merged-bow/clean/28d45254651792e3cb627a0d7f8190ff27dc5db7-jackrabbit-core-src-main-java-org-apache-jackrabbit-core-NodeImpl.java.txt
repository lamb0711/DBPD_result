JCR-890: concurrent read-only access to a session

Handle Session.logout() in a way that prevents concurrent session access.

Also move the SessionContext argument from perform() to a member variable of SessionOperation.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@957626 13f79535-47bb-0310-9956-ffa450edef68

-            new SetPropertyOperation(name, value, false);
+            new SetPropertyOperation(sessionContext, name, value, false);
-        SetPropertyOperation operation =
-            new SetPropertyOperation(session.getQName(name), value, true);
+        SetPropertyOperation operation = new SetPropertyOperation(
+                sessionContext, session.getQName(name), value, true);
-        SetPropertyOperation operation =
-            new SetPropertyOperation(session.getQName(name), value, false);
+        SetPropertyOperation operation = new SetPropertyOperation(
+                sessionContext, session.getQName(name), value, false);
+                SessionContext sessionContext,
-            super("setProperty()");
+            super("setProperty()", sessionContext);
-        public void perform(SessionContext context) throws RepositoryException {
+        public void perform() throws RepositoryException {

INS44 MOV43 MOV43 INS42 INS42 INS42 INS42 MOV43 INS42 DEL42 DEL44