JCR-1020: Use repository service wide namespace cache

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555240 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.jcr2spi.name.NamespaceCache;
-        nsRegistry = createNamespaceRegistry(repositoryDescriptors);
+        nsRegistry = createNamespaceRegistry(NamespaceCache.getInstance(service));
-     * @param descriptors
+     * @param nsCache the namespace cache.
-    private NamespaceRegistryImpl createNamespaceRegistry(Map descriptors) {
-        boolean level2 = Boolean.valueOf((String) descriptors.get(Repository.LEVEL_2_SUPPORTED)).booleanValue();
-        return new NamespaceRegistryImpl(this, level2);
+    private NamespaceRegistryImpl createNamespaceRegistry(NamespaceCache nsCache) {
+        return new NamespaceRegistryImpl(this, nsCache);

INS26 INS40 UPD43 UPD42 UPD42 INS66 UPD42 UPD42 INS32 UPD42 MOV42 INS42 INS42 DEL39 DEL42 DEL42 DEL42 DEL42 DEL43 DEL42 DEL42 DEL40 DEL32 DEL11 DEL32 DEL42 DEL32 DEL59 DEL60