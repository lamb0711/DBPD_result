Extended XAException allowing a base exception to be passed. Removes
the ugly stack trace on the console when performing XATest.testAddReference()
which causes an intended RollbackException.


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159360 13f79535-47bb-0310-9956-ffa450edef68

-            log.error("Unable to commit transaction.", e);
-            throw new XAException(XAException.XA_RBOTHER);
+            throw new ExtendedXAException(XAException.XA_RBOTHER, e);
+
+    /**
+     * Internal XAException derived class that allows passing a base exception
+     * in its constructor.
+     */
+    static class ExtendedXAException extends XAException {
+
+        /**
+         * Create an XAException with a given error code and a root cause.
+         * @param errcode The error code identifying the exception.
+         * @param cause The cause (which is saved for later retrieval by the
+         *              {@link #getCause()} method).  (A <tt>null</tt> value is
+         *              permitted, and indicates that the cause is nonexistent
+         *              or unknown.)
+         */
+        public ExtendedXAException(int errcode, Throwable cause) {
+            super(errcode);
+
+            if (cause != null) {
+                initCause(cause);
+            }
+        }
+    }

INS55 INS29 INS83 INS42 MOV43 INS31 INS65 INS29 INS83 INS42 INS44 INS44 INS8 INS66 INS66 INS65 INS65 INS65 INS39 INS42 INS43 INS42 INS46 INS25 INS66 INS42 INS66 INS42 INS66 INS65 INS66 INS66 INS66 INS42 INS42 INS27 INS8 INS68 INS42 INS33 INS21 INS42 INS32 INS43 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL45 DEL42 DEL32 DEL21