JCR-1932: Session.getAttributes( ) call always returns an empty array

Added a protected SessionImpl.setAttribute() method to set the attributes of a session.

Use the method in RepositoryImpl.login() when a SimpleCredentials instance has been passed.

Added a test case for this.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@744954 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.SimpleCredentials;
-            // create session
-            return createSession(authCtx, workspaceName);
+            // create session, and add SimpleCredentials attributes (JCR-1932)
+            SessionImpl session = createSession(authCtx, workspaceName);
+            if (credentials instanceof SimpleCredentials) {
+                SimpleCredentials sc = (SimpleCredentials) credentials;
+                String[] names = sc.getAttributeNames();
+                for (int i = 0; i < names.length; i++) {
+                    session.setAttribute(names[i], sc.getAttribute(names[i]));
+                }
+            }
+            return session;

INS26 INS40 INS60 INS25 INS43 INS59 INS62 INS8 INS42 INS42 INS42 MOV32 INS42 INS43 INS60 INS60 INS24 INS42 INS43 INS59 INS5 INS59 INS58 INS27 INS37 INS8 INS42 INS42 INS11 INS43 INS85 INS42 INS32 INS39 INS59 INS42 INS40 INS42 INS21 INS43 INS42 INS42 INS42 INS42 INS42 INS34 INS32 INS42 INS42 INS42 INS2 INS32 INS42 INS42 INS42 INS42 INS2 INS42 INS42