JCR-2744: Avoid element arrays in PathImpl

Get rid of separate Path.Element objects by making AbstractPath implement both Path and Path.Element

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997384 13f79535-47bb-0310-9956-ffa450edef68

+    /** The current path "." */
+    public static final CurrentPath CURRENT_PATH = new CurrentPath(null);
+
+    /** Name of the current element */
+    public static final Name NAME =
+        NameFactoryImpl.getInstance().create(Name.NS_DEFAULT_URI, ".");
+
+    protected String getElementString() {
+        return NAME.getLocalName();
+    }
+
-        return CurrentElement.INSTANCE.getName();
+        return NAME;
-    public Element getNameElement() {
-        return CurrentElement.INSTANCE;
-    }
-
-    public Path getLastElement() {
-        return new CurrentPath(null);
-    }
-
-    public String getString() {
-        if (parent != null) {
-            return parent.getString() + Path.DELIMITER + ".";
-        } else {
-            return ".";
-        }
+    public AbstractPath getLastElement() {
+        return CURRENT_PATH;

MOV31 MOV31 INS23 INS23 INS29 INS83 INS83 INS83 INS43 INS59 INS29 INS83 INS83 INS83 INS43 INS59 UPD83 MOV43 UPD42 MOV43 UPD42 MOV29 MOV78 INS43 INS42 INS8 INS65 INS42 INS42 MOV14 INS65 INS42 INS42 INS32 INS42 MOV41 INS66 INS66 INS32 INS42 INS40 INS45 INS32 INS42 INS42 INS42 UPD42 MOV42 INS42 INS42 DEL42 DEL43 DEL40 DEL42 DEL43 DEL83 DEL42 DEL40 DEL32 DEL41 DEL8 DEL31 DEL42 DEL42 DEL32 DEL40 DEL45 DEL27 DEL42 DEL42 DEL33 DEL27 DEL8 DEL45 DEL41 DEL8 DEL25 DEL8