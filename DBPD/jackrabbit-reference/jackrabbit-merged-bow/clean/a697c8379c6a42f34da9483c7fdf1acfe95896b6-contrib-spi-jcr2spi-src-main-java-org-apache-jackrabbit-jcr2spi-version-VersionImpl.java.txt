work in progress

- version always protected
- versionHistory always protected
- fix Node.getReferences && reference properties
- mixinTypes are 'active' upon save only (and not before). therefore
  cleanup after removeMixin is done only after save.
  adding new states defined by a new mixin are only added after the
  node has been saved.
- nodestates identified by a uuid only were created a second time upon
  ChildNodeEntry.resolve => fix needs to be improved
- Events/ChangeLog are processed by the save-target state
- ChangeLog.persisted not used any more

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@467956 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.UnsupportedRepositoryOperationException;
+import javax.jcr.nodetype.ConstraintViolationException;
+
+    //-----------------------------------------------------------< ItemImpl >---
+    /**
+     *
+     * @throws UnsupportedRepositoryOperationException
+     * @throws ConstraintViolationException
+     * @throws RepositoryException
+     */
+    protected void checkIsWritable() throws UnsupportedRepositoryOperationException, ConstraintViolationException, RepositoryException {
+        super.checkIsWritable();
+        throw new ConstraintViolationException("Version is protected");
+    }
+

INS26 INS26 INS40 INS40 INS31 INS29 INS83 INS39 INS42 INS43 INS43 INS43 INS8 INS65 INS65 INS65 INS42 INS42 INS42 INS21 INS53 INS42 INS42 INS42 INS48 INS14 INS42 INS43 INS45 INS42