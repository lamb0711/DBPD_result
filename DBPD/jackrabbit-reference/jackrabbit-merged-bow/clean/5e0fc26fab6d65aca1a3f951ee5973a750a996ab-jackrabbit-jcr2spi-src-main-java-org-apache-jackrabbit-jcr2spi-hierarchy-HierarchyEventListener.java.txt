JCR-2108: JSR 283 Observation   (work in progress)

- add more TODOs


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@781298 13f79535-47bb-0310-9956-ffa450edef68

+
+        // TODO: handle new 283 event types and clean add/remove that is also present as move-event.
+
-            if (type == Event.NODE_REMOVED || type == Event.PROPERTY_REMOVED) {
-                // notify parent about removal if its child-entry.
-                // - if parent is 'null' (i.e. not yet loaded) the child-entry does
-                //   not exist either -> no need to inform child-entry
-                // - if parent got removed with the same event-bundle
-                //   only remove the parent an skip this event.
-                if (parent != null && !removedEvents.contains(parentId)) {
-                    parent.refresh(event);
-                }
-            } else if (type == Event.PROPERTY_CHANGED) {
-                // notify parent in case jcr:mixintypes or jcr:uuid was changed.
-                // if parent is 'null' (i.e. not yet loaded) the prop-entry does
-                // not exist either -> no need to inform propEntry
-                if (parent != null) {
-                    parent.refresh(event);
-                }
-            } else {
-                // should never occur
-                throw new IllegalArgumentException("Invalid event type: " + event.getType());
+            switch (type) {
+                case Event.NODE_REMOVED:
+                case Event.PROPERTY_REMOVED:
+                    // notify parent about removal if its child-entry.
+                    // - if parent is 'null' (i.e. not yet loaded) the child-entry does
+                    //   not exist either -> no need to inform child-entry
+                    // - if parent got removed with the same event-bundle
+                    //   only remove the parent an skip this event.
+                    if (parent != null && !removedEvents.contains(parentId)) {
+                        parent.refresh(event);
+                    }
+                    break;
+                case Event.PROPERTY_CHANGED:
+                    // notify parent in case jcr:mixintypes or jcr:uuid was changed.
+                    // if parent is 'null' (i.e. not yet loaded) the prop-entry does
+                    // not exist either -> no need to inform propEntry
+                    if (parent != null) {
+                        parent.refresh(event);
+                    }
+                    break;
+                case Event.NODE_MOVED:
+                    // TODO: implementation missing
+                    throw new UnsupportedOperationException("Implementation missing");
+                    //break;
+                case Event.PERSIST:
+                    // TODO: implementation missing
+                    throw new UnsupportedOperationException("Implementation missing");
+                    //break;
+                default:
+                    // should never occur
+                    throw new IllegalArgumentException("Invalid event type: " + event.getType());

INS50 INS42 INS49 INS49 MOV25 INS10 INS49 MOV25 INS10 INS49 INS53 INS49 INS53 INS49 MOV53 INS40 INS40 INS40 INS40 INS14 INS40 INS14 INS43 INS45 INS43 INS45 INS42 INS42 DEL42 DEL40 DEL27 DEL42 DEL40 DEL27 DEL27 DEL8 DEL42 DEL40 DEL27 DEL8 DEL8 DEL25 DEL25