JCR-3040: JMX Stats for the Session

Make repository statistics available to a webapp

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1181745 13f79535-47bb-0310-9956-ffa450edef68

+import java.io.File;
+import java.io.IOException;
+import javax.jcr.RepositoryException;
+
+import org.apache.jackrabbit.core.config.RepositoryConfig;
+     * Starts a repository with the given configuration and returns
+     * the internal component context of the started repository.
+     *
+     * @since Apache Jackrabbit 2.3.1
+     * @param config repository configuration
+     * @return component context of the repository
+     * @throws RepositoryException if the repository could not be started
+     */
+    public static RepositoryContext create(RepositoryConfig config)
+            throws RepositoryException {
+        RepositoryImpl repository = RepositoryImpl.create(config);
+        return repository.getRepositoryContext();
+    }
+
+    /**
+     * Starts a repository in the given directory and returns the
+     * internal component context of the started repository. If needed,
+     * the directory is created and a default repository configuration
+     * is installed inside it.
+     *
+     * @since Apache Jackrabbit 2.3.1
+     * @see RepositoryConfig#install(File)
+     * @param dir repository directory
+     * @return component context of the repository
+     * @throws RepositoryException if the repository could not be started
+     * @throws IOException if the directory could not be initialized
+     */
+    public static RepositoryContext install(File dir)
+            throws RepositoryException, IOException {
+        return create(RepositoryConfig.install(dir));
+    }
+
+    /**

INS26 INS26 INS26 INS26 INS40 INS40 INS40 INS40 INS31 INS31 INS29 INS83 INS83 INS43 INS42 INS44 INS43 INS8 INS29 INS83 INS83 INS43 INS42 INS44 INS43 INS43 INS8 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS42 INS60 INS41 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS42 INS42 INS41 INS66 INS66 INS66 INS42 INS66 INS66 INS42 INS66 INS42 INS43 INS59 INS32 INS66 INS66 INS66 INS66 INS66 INS68 INS42 INS66 INS66 INS42 INS66 INS42 INS66 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS69 INS42 INS32 INS42 INS42 INS42 INS43 INS42 INS42 INS42 INS42