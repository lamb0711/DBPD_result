JCR-258 - remove JDOM dependency from jcr-server contribution
JCR-295 - usage of Cache-Control header 
JCR-297 - log output while parsing xml
minor consistency issues and improvements

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@368683 13f79535-47bb-0310-9956-ffa450edef68

-import org.jdom.Element;
+import org.apache.jackrabbit.webdav.xml.DomUtil;
+import org.w3c.dom.Element;
+import org.w3c.dom.Document;
-    private final Element[] value;
+    private final long[] value;
-
-	Element[] elems = new Element[lengths.length];
-	for (int i = 0; i < lengths.length; i++) {
-	    elems[i] = new Element(XML_LENGTH, ItemResourceConstants.NAMESPACE);
-	    elems[i].addContent(String.valueOf(lengths[i]));
-	}
-	this.value = elems;
+	this.value = lengths;
-     * Returns an array of {@link Element}s representing the value of this
+     * Returns an array of {@link long}s representing the value of this
-     * @return an array of {@link Element}s
+     * @return an array of {@link long}s
+
+    /**
+     * @see org.apache.jackrabbit.webdav.xml.XmlSerializable#toXml(Document)
+     */
+    public Element toXml(Document document) {
+        Element elem = getName().toXml(document);
+        for (int i = 0; i < value.length; i++) {
+            String txtContent = String.valueOf(value[i]);
+	    DomUtil.addChildElement(elem, XML_LENGTH, ItemResourceConstants.NAMESPACE, txtContent);
+	}
+        return elem;
+    }
+

INS26 INS26 INS40 UPD40 INS40 INS31 INS31 INS31 UPD5 MOV29 MOV83 MOV42 MOV44 INS8 INS29 INS83 MOV43 INS42 MOV8 INS29 INS83 MOV43 INS42 INS44 INS8 INS39 MOV46 MOV21 INS65 INS65 INS65 INS43 INS42 INS60 INS24 INS41 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS68 INS42 MOV43 MOV59 MOV58 MOV27 MOV37 INS8 INS42 UPD42 INS66 INS66 INS40 INS42 INS69 UPD42 INS32 UPD40 INS60 INS21 INS43 INS32 INS42 INS42 INS43 INS59 INS32 UPD42 MOV42 INS42 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS40 INS42 MOV42 MOV42 MOV2 UPD42 DEL42 DEL43 DEL85 DEL5 DEL40 DEL3 DEL43 DEL85 DEL5 DEL60 DEL42 DEL42 DEL2 DEL42 DEL40 DEL14 DEL7 DEL21 DEL42 DEL42 DEL2 DEL42 DEL32 DEL32 DEL21 DEL8 DEL24 DEL8 DEL31 DEL66 DEL42 DEL65 DEL66 DEL66 DEL65 DEL66 DEL42 DEL65 DEL66 DEL65 DEL29 DEL83 DEL42 DEL31