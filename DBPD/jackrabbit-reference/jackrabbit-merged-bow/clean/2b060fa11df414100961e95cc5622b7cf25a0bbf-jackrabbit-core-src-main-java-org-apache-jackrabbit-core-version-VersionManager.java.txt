JCR-2209 Versioning operations should be done on the workspace


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@795866 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.NodeImpl;
+import javax.jcr.RepositoryException;
+import javax.jcr.Session;
+
-import javax.jcr.RepositoryException;
-import javax.jcr.Session;
-import javax.jcr.version.Version;
-import javax.jcr.version.VersionHistory;
-
+     * @param session session that invokes the checkin
-    Version checkin(NodeImpl node) throws RepositoryException;
+    InternalVersion checkin(Session session, NodeStateEx node) throws RepositoryException;
-     * @param node node to checkout
-     * @return the base version
+     * @param state node to checkout
+     * @param activityId node id if the current activity
+     * @return the base version id
-    Version checkout(NodeImpl node) throws RepositoryException;
+    NodeId canCheckout(NodeStateEx state, NodeId activityId) throws RepositoryException;
+     * @param session the session that performs the remove
-    void removeVersion(VersionHistory history, Name versionName)
+    void removeVersion(Session session, InternalVersionHistory history, Name versionName)
+     * @param session the session that performs the operation
-    Version setVersionLabel(VersionHistory history, Name version, Name label,
-                            boolean move)
+    InternalVersion setVersionLabel(Session session, 
+                                    InternalVersionHistory history,
+                                    Name version, Name label,
+                                    boolean move)

MOV26 MOV26 UPD43 INS44 UPD43 UPD42 INS44 INS44 UPD43 INS44 INS65 UPD42 INS43 INS42 UPD43 INS65 UPD42 INS43 INS42 UPD43 UPD42 INS65 INS43 INS42 UPD43 INS65 UPD42 INS43 INS42 UPD43 INS42 INS66 INS42 UPD42 UPD42 INS42 INS66 UPD66 INS42 UPD42 INS42 INS66 INS42 UPD42 INS42 INS66 INS42 UPD42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26