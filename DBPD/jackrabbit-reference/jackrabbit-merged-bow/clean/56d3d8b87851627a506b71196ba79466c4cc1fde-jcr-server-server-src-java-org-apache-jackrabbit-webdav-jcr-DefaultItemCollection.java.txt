- add distiction between session and open scoped locks
- existing lock must be listed as session-ref in order to avoid logout
- improve log output.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@468384 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.webdav.jcr.lock.SessionScopedLockEntry;
-                        // TODO: find out whether this lock is session-scoped or not!
+                // add reference to DAVSession for this lock
+                getSession().addReference(jcrLock.getLockToken());
-            throw new DavException(DavServletResponse.SC_UNPROCESSABLE_ENTITY,"Only DAV:custom ordering type supported.");
+            throw new DavException(DavServletResponse.SC_UNPROCESSABLE_ENTITY, "Only DAV:custom ordering type supported.");
-                // TODO: do session-scoped lock properly (including session caching and proper scope discovery)
-                //supportedLock.addEntry(new SessionScopedLockEntry());
+                supportedLock.addEntry(new SessionScopedLockEntry());
-                log.info("No primary item present on this node '" + getResourcePath() + "'");
+                log.debug("No primary item present on this node '" + getResourcePath() + "'");

INS26 INS40 INS21 INS21 INS32 INS32 INS32 INS42 INS32 INS42 INS42 INS14 INS42 INS42 INS42 INS43 UPD42 INS42