JCR-473 Some enhancements to jackrabbit commons (fixed some deprecated calls)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@421219 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.name.NameFormat;
+import org.apache.jackrabbit.name.PathFormat;
-            if (!node.isNodeType(QName.NT_QUERY.toJCRName(session.getNamespaceResolver()))) {
+            if (!node.isNodeType(NameFormat.format(QName.NT_QUERY, session.getNamespaceResolver()))) {
-            statement = node.getProperty(QName.JCR_STATEMENT.toJCRName(session.getNamespaceResolver())).getString();
-            language = node.getProperty(QName.JCR_LANGUAGE.toJCRName(session.getNamespaceResolver())).getString();
+            statement = node.getProperty(NameFormat.format(QName.JCR_STATEMENT, session.getNamespaceResolver())).getString();
+            language = node.getProperty(NameFormat.format(QName.JCR_LANGUAGE, session.getNamespaceResolver())).getString();
-            Path p = Path.create(absPath, resolver, true);
+            Path p = PathFormat.parse(absPath, resolver).getNormalizedPath();
-            String relPath = p.toJCRPath(resolver).substring(1);
+            String relPath = PathFormat.format(p, resolver).substring(1);
-                    QName.NT_QUERY.toJCRName(resolver));
+                    NameFormat.format(QName.NT_QUERY, resolver));
-            queryNode.setProperty(QName.JCR_LANGUAGE.toJCRName(resolver), language);
-            queryNode.setProperty(QName.JCR_STATEMENT.toJCRName(resolver), statement);
+            queryNode.setProperty(NameFormat.format(QName.JCR_LANGUAGE, resolver), language);
+            queryNode.setProperty(NameFormat.format(QName.JCR_STATEMENT, resolver), statement);

INS26 INS26 INS40 INS40 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 UPD42 MOV42 UPD42 MOV42 MOV42 MOV42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL42 DEL42 DEL42 DEL9 DEL32 DEL42 DEL42 DEL42 DEL42