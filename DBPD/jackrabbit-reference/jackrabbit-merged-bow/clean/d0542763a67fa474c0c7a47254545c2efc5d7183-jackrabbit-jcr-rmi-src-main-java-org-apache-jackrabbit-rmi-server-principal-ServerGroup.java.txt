JCR-4246 java.security.acl deprecated in Java 10, marked for removal in Java 11



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1827242 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Collections;
+import org.apache.jackrabbit.api.security.principal.GroupPrincipal;
+    public ServerGroup(final Principal principal, final RemoteAdapterFactory factory)
+            throws RemoteException {
+        super(principal, factory);
+    }
+
-        return isMember(member, (Group) getPrincipal());
+        return isMember(member, getPrincipal());
-            final Enumeration<? extends Principal> base = ((Group) getPrincipal()).members();
+            final Enumeration<? extends Principal> base =  members(getPrincipal());
-    private static boolean isMember(final String memberName, final Group group) {
-        Enumeration<? extends Principal> pe = group.members();
+    private static boolean isMember(final String memberName, final Principal group) {
+        Enumeration<? extends Principal> pe = members(group);
-            if ((p instanceof Group) && isMember(memberName, (Group) p)) {
+            if (isGroup(p) && isMember(memberName, p)) {
-
+
+    public static boolean isGroup(Principal principal) {
+        return principal instanceof Group || principal instanceof GroupPrincipal;
+    }
+
+    private static Enumeration<? extends Principal> members(Principal principal) {
+        if (principal instanceof Group) {
+            return ((Group) principal).members();
+        }
+        if (principal instanceof GroupPrincipal) {
+            return ((GroupPrincipal) principal).members();
+        }
+        return Collections.emptyEnumeration();
+    }

INS26 INS26 INS40 INS40 INS31 INS31 INS31 INS83 INS42 INS44 INS44 INS43 INS8 INS83 INS83 INS39 INS42 INS44 INS8 INS83 INS83 INS74 INS42 INS44 INS8 INS83 INS43 INS42 INS83 INS43 INS42 INS42 INS46 INS43 INS43 INS42 INS41 INS43 INS76 INS43 INS42 INS25 INS25 INS41 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS42 INS43 INS42 INS62 INS8 INS62 INS8 INS32 MOV32 MOV62 INS62 INS42 INS42 MOV43 INS41 INS42 INS43 INS41 INS42 INS42 INS42 UPD42 INS42 INS43 MOV32 INS42 INS32 INS32 INS32 INS42 INS36 UPD42 INS36 INS42 INS42 INS42 INS42 INS42 INS42 MOV11 INS11 UPD42 INS43 INS42 MOV32 INS42 DEL42 DEL43 DEL11 DEL42 DEL43 DEL11 DEL36 DEL42 DEL36 DEL42