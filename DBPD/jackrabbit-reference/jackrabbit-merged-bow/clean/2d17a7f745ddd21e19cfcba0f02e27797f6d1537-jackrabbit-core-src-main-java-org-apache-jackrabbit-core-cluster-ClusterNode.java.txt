JCR-1087 Maintain the cluster revision table

- Added the LOCAL_REVISIONS table to the create scripts (*.ddl)
- Added InstanceRevision interface
- The InstanceRevision is now retrieved through the Journal instance
- Added logic to the DatabaseJournal to (i) migrate to a db based InstanceRevision,
  and (ii) start a janitor thread for cleaning up old cluster revision entries


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@628697 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.journal.FileRevision;
+import org.apache.jackrabbit.core.journal.InstanceRevision;
-import java.io.File;
-     * Revision counter parameter name.
-     */
-    private static final String REVISION_NAME = "revision";
-
-    /**
-     * Instance revision file.
+     * Instance revision manager.
-    private FileRevision instanceRevision;
+    private InstanceRevision instanceRevision;
-        JournalConfig jc = cc.getJournalConfig();
-
-        String revisionName = jc.getParameters().getProperty(REVISION_NAME);
-        if (revisionName == null) {
-            String msg = "Revision not specified.";
-            throw new ClusterException(msg);
-        }
-            instanceRevision = new FileRevision(new File(revisionName));
-
+            JournalConfig jc = cc.getJournalConfig();
+            instanceRevision = journal.getInstanceRevision();

UPD40 UPD43 UPD42 UPD66 MOV21 MOV60 INS32 INS42 INS42 DEL40 DEL26 DEL66 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL33 DEL27 DEL42 DEL43 DEL42 DEL45 DEL59 DEL60 DEL42 DEL43 DEL42 DEL14 DEL53 DEL8 DEL25 DEL42 DEL43 DEL42 DEL43 DEL42 DEL14 DEL14