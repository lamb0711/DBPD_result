JCR-2901 the transaction handling in container managed environment is broken

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1074140 13f79535-47bb-0310-9956-ffa450edef68

-    private final XAResource xaResource;
+    private XAResource xaResource;
-        cleanup();
-        session.logout();
+        this.session.logout();
+        this.handles.clear();
+            if (this.mcf.getBindSessionToTransaction().booleanValue() && (this.xaResource instanceof TransactionBoundXAResource)) {
+            	((TransactionBoundXAResource) this.xaResource).rebind((XAResource) session);
+            } else {
+            	this.xaResource = (XAResource) session;
+            }

INS22 INS42 INS22 UPD42 INS25 INS52 INS42 INS52 INS42 INS27 INS8 INS8 INS32 INS36 INS21 INS21 INS32 INS42 INS62 INS32 INS7 INS22 INS42 INS22 INS43 INS36 INS42 INS11 INS22 INS11 INS52 INS42 INS52 INS42 INS42 INS11 INS43 INS42 INS52 INS42 INS43 INS42 INS43 INS22 INS42 INS42 INS42 INS52 INS42 DEL83 DEL42 DEL42