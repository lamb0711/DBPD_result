JCR-150: Node.getLock() on a lock non-lockable node throws javax.jcr.UnsupportedRepositoryOperationException

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@202514 13f79535-47bb-0310-9956-ffa450edef68

-        } catch  (NodeTypeConflictException ntce) {
+        } catch (NodeTypeConflictException ntce) {
-        public Lock lock(boolean isDeep, boolean isSessionScoped)
+    public Lock lock(boolean isDeep, boolean isSessionScoped)
-        checkLockable();
-
-     * @throws UnsupportedRepositoryOperationException
-     *                             if this node is not lockable
+     * @throws LockException       if this node is not lockable
-    private void checkLockable()
-            throws UnsupportedRepositoryOperationException, RepositoryException {
+    private void checkLockable() throws LockException, RepositoryException {
-            String msg = "Unable to perform locking operation on non-lockable node: " + safeGetJCRPath();
+            String msg = "Unable to perform locking operation on non-lockable node: "
+                    + safeGetJCRPath();
-            throw new UnsupportedRepositoryOperationException(msg);
+            throw new LockException(msg);

UPD43 UPD42 UPD42 UPD66 UPD43 UPD42 DEL42 DEL32 DEL21