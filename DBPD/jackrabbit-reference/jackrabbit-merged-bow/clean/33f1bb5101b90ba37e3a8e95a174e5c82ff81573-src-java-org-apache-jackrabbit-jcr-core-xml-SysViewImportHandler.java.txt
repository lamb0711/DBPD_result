differentiated handling of single vs. multi-valued properties:
multi-valued property can only be set with value array and vice versa


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@46941 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.nodetype.ConstraintViolationException;
-			if (!def.isProtected()) {
+			if (def.isProtected()) {
+			    // ignore protected property
+			    // reset temp fields and get outta here
+			    currentPropValues = null;
+			    return;
+			}
+		    }
+		    // multi- or single-valued property?
+		    if (vals.length == 1) {
+			// could be single- or multi-valued (n == 1)
+			try {
+			    // try setting single-value
+			    current.node.setProperty(currentPropName, vals[0]);
+			} catch (ConstraintViolationException cve) {
+			    // try setting value array
+			// can only be multi-valued (n == 0 || n > 1)

INS26 INS40 INS25 INS27 INS8 MOV8 INS40 INS34 INS54 MOV32 INS8 INS8 INS12 INS21 INS41 INS21 INS44 MOV8 INS7 INS32 INS43 INS42 INS42 INS33 INS40 INS42 INS42 INS2 INS42 INS42 INS34 DEL38