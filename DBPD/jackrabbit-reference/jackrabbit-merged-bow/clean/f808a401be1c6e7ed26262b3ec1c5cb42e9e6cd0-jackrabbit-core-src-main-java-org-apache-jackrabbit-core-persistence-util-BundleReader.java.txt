JCR-2762: Optimize bundle serialization

Since practically all of the names in the standard JCR namespaces are already included in BundleNames, we can use the namespace index field more efficiently to avoid duplicate serialization of most custom namespace URIs.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1022486 13f79535-47bb-0310-9956-ffa450edef68

+     * The default namespace and the first six other namespaces used in this
+     * bundle. Used by the {@link #readName()} method to keep track of
+     * already seen namespaces.
+     */
+    private final String[] namespaces =
+        // NOTE: The length of this array must be seven
+        { Name.NS_DEFAULT_URI, null, null, null, null, null, null };
+
+    /**
-            if (ns != 0x07) {
-                uri = BundleNames.indexToNamespace(ns);
+            if (ns < namespaces.length && namespaces[ns] != null) {
+                uri = namespaces[ns];
+                if (ns < namespaces.length) {
+                    namespaces[ns] = uri;
+                }

INS23 INS29 INS83 INS83 INS5 INS59 INS65 INS43 INS85 INS42 INS4 INS66 INS66 INS65 INS66 INS66 INS42 INS40 INS33 INS33 INS33 INS33 INS33 INS33 INS68 INS42 INS27 INS27 INS27 INS25 INS42 INS40 INS2 INS33 INS27 INS8 INS42 INS42 INS2 INS42 INS40 INS21 INS42 INS42 INS7 INS2 INS42 INS42 INS42 DEL42 DEL34 DEL27 DEL42 DEL42 DEL42 DEL32