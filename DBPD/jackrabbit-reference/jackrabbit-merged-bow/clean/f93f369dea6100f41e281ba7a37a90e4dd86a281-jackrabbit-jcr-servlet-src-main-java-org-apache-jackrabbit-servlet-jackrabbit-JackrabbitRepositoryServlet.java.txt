JCR-956: Use the existing RepositoryFactory interface instead of recreating it as an abstract factory method of AbstractRepositoryServlet. As a bonus this automatically makes all repository binding servlets use lazy loading for the repository.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@606928 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.Repository;
+import org.apache.jackrabbit.commons.repository.RepositoryFactory;
+import org.apache.jackrabbit.commons.repository.SingletonRepositoryFactory;
-     * Returns the repository instance.
+     * Returns a repository factory that always returns the configured
+     * repository instance.
-     * @return repository instance
+     * @return repository factory
-    protected Repository getRepository() {
-        return repository;
+    protected RepositoryFactory getRepositoryFactory() {
+        return new SingletonRepositoryFactory(repository);

MOV26 INS26 UPD40 INS40 UPD43 UPD42 UPD42 INS66 UPD66 UPD66 INS14 INS43 INS42 INS42 DEL42