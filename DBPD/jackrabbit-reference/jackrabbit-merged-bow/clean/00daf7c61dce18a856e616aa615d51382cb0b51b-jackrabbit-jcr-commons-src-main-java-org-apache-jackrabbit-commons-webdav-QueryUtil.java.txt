JCR-2715: Improved join query performance

It's possible for a query to return null columns.
Fix a related jcr2dav test failure by making the WebDAV result parser more resilient.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1039946 13f79535-47bb-0310-9956-ffa450edef68

-        Value jcrValue;
+        Value jcrValue = null;
-            String typeStr = XMLUtil.getAttribute(valueElement, ATTR_VALUE_TYPE, NS_URI);
-            jcrValue = ValueHelper.deserialize(XMLUtil.getText(valueElement),
-                    PropertyType.valueFromName(typeStr), true, valueFactory);
-        } else {
-            jcrValue = null;
+            String text = XMLUtil.getText(valueElement);
+            if (text != null) {
+                String typeStr = XMLUtil.getAttribute(valueElement, ATTR_VALUE_TYPE, NS_URI);
+                jcrValue = ValueHelper.deserialize(
+                        text, PropertyType.valueFromName(typeStr), true, valueFactory);
+            }

INS33 INS60 INS25 INS43 INS59 INS27 MOV8 INS42 INS42 MOV32 INS42 INS33 INS42 DEL42 DEL33 DEL7 DEL21