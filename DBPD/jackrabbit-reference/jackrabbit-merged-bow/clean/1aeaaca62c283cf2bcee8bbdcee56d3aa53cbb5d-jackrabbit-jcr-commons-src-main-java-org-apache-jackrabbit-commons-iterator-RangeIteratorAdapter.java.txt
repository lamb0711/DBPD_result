JCR-2722: Add a filtered RangeIterator

Revert revisions 988147 and 988172 to prevent binary backwards compatibilty issues reported by Carsten Ziegeler

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@988970 13f79535-47bb-0310-9956-ffa450edef68

-     * Adapts the given iterator into a range iterator. The given
-     * instance is returned as-is if it already implements the
-     * {@link RangeIterator} interface. Otherwise the iterator is
-     * wrapped into a {@link RangeIteratorAdapter} instance.
-     * 
-     * @param iterator iterator to adapt
-     * @return adapted iterator
-     */
-    public static RangeIterator adapt(Iterator<?> iterator) {
-        if (iterator instanceof RangeIterator) {
-            return (RangeIterator) iterator;
-        } else {
-            return new RangeIteratorAdapter(iterator, -1);
-        }
-    }
-
-    /**
-    private final Iterator<?> iterator;
+    private final Iterator iterator;
-    public RangeIteratorAdapter(Iterator<?> iterator, long size) {
+    public RangeIteratorAdapter(Iterator iterator, long size) {
-    public RangeIteratorAdapter(Iterator<?> iterator) {
+    public RangeIteratorAdapter(Iterator iterator) {
-    public RangeIteratorAdapter(Collection<?> collection) {
+    public RangeIteratorAdapter(Collection collection) {

MOV43 MOV44 MOV44 MOV43 MOV43 MOV43 DEL66 DEL66 DEL42 DEL65 DEL66 DEL66 DEL42 DEL65 DEL66 DEL65 DEL42 DEL66 DEL65 DEL66 DEL65 DEL29 DEL83 DEL83 DEL42 DEL43 DEL42 DEL42 DEL42 DEL43 DEL62 DEL42 DEL43 DEL42 DEL11 DEL41 DEL8 DEL42 DEL43 DEL42 DEL34 DEL38 DEL14 DEL41 DEL8 DEL25 DEL8 DEL31 DEL76 DEL74 DEL76 DEL74 DEL76 DEL74 DEL42 DEL43 DEL76 DEL74 DEL42 DEL44 DEL76 DEL74