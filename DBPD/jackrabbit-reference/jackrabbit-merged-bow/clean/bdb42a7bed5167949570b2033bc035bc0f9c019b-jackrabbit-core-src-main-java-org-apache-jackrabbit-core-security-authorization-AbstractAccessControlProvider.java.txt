JCR-2887 : Split PrivilegeRegistry in a per-session manager instance and a repository level registry [work in progress]

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1076600 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.api.JackrabbitWorkspace;
-import org.apache.jackrabbit.core.WorkspaceImpl;
-                return ((WorkspaceImpl) session.getWorkspace()).getPrivilegeManager().getBits(new String[] {Privilege.JCR_ALL});
+                return getPrivilegeManagerImpl().getBits(new String[] {Privilege.JCR_ALL});
-                    return ((WorkspaceImpl) session.getWorkspace()).getPrivilegeManager().getBits(new String[] {Privilege.JCR_READ});
+                    return getPrivilegeManagerImpl().getBits(new String[] {Privilege.JCR_READ});
+    private PrivilegeManagerImpl getPrivilegeManagerImpl() throws RepositoryException {
+        return (PrivilegeManagerImpl) ((JackrabbitWorkspace) session.getWorkspace()).getPrivilegeManager();
+    }

MOV26 UPD40 INS31 INS83 INS43 INS42 INS43 INS8 INS42 INS42 INS41 INS11 INS43 MOV32 INS42 UPD43 UPD42 UPD42 INS32 INS42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL36