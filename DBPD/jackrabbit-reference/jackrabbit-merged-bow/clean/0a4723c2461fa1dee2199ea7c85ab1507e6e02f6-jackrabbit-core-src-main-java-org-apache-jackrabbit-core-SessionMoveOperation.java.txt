JCR-3364: Moving of nodes requires read access to all parent nodes of the destination node

Use explicit cycle detection to detect the JCR-3291 case without the need for extra transient items

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1535539 13f79535-47bb-0310-9956-ffa450edef68

-            // Create the transient parent nodes of the target node to prevent 
-            // conflicting and/or cyclic moves. See JCR-3921
-            createTransientParentStates(destParentNode);
-            
-    private void createTransientParentStates(NodeImpl node) throws RepositoryException {
-        while (node.getParentId() != null) {
-            node.getOrCreateTransientItemState();
-            node = (NodeImpl) node.getParent();
-        }
-    }

DEL42 DEL42 DEL32 DEL21 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL32 DEL33 DEL27 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL43 DEL42 DEL42 DEL32 DEL11 DEL7 DEL21 DEL8 DEL61 DEL8 DEL31