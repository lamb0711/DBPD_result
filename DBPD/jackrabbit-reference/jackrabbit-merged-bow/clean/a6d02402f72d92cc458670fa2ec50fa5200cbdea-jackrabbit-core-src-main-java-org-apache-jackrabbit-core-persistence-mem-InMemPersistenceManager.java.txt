JCR-2320 Real In-memory Repository

* Applied proposed patch


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@882891 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.fs.mem.MemoryFileSystem;
-        /**
-         * store BLOB data in local file system in a sub directory
-         * of the workspace home directory
-         */
-        LocalFileSystem blobFS = new LocalFileSystem();
-        blobFS.setRoot(new File(context.getHomeDir(), "blobs"));
+        // Choose a FileSystem for the BlobStore based on whether data is persistent or not 
+        if (persistent) {
+            blobFS = new LocalFileSystem();
+            ((LocalFileSystem) blobFS).setRoot(new File(context.getHomeDir(), "blobs"));
+        } else {
+            blobFS = new MemoryFileSystem();
+        }
-        this.blobFS = blobFS;

INS26 INS40 INS25 INS42 INS8 INS8 INS21 MOV21 MOV21 INS7 INS42 MOV14 INS36 INS42 INS14 INS11 INS43 MOV43 INS42 INS42 DEL42 DEL52 DEL42 DEL22 DEL42 DEL42 DEL59 DEL60