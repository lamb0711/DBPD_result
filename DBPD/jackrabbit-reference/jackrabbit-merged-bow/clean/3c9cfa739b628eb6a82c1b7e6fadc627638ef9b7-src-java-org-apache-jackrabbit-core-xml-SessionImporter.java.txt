JCR-31 sysview import cannot handle auto-created nodes
(fixing bug in bug fix ;)

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@158441 13f79535-47bb-0310-9956-ffa450edef68

-        NodeImpl node;
+        NodeImpl node = null;
-            if (def.isProtected() && existing.isNodeType(ntName)) {
-                // skip protected node
-                parents.push(null); // push null onto stack for skipped node
-                log.debug("skipping protected node " + existing.safeGetJCRPath());
-                return;
+            if (!def.allowSameNameSibs()) {
+                // existing doesn't allow same-name siblings,
+                // check for potential conflicts
+                if (def.isProtected() && existing.isNodeType(ntName)) {
+                    // skip protected node
+                    parents.push(null); // push null onto stack for skipped node
+                    log.debug("skipping protected node " + existing.safeGetJCRPath());
+                    return;
+                }
+                if (def.isAutoCreate() && existing.isNodeType(ntName)) {
+                    // this node has already been auto-created, no need to create it
+                    node = existing;
+                } else {
+                    throw new ItemExistsException(existing.safeGetJCRPath());
+                }
-            if (def.isAutoCreate() && existing.isNodeType(ntName)) {
-                // this node has already been auto-created, no need to create it
-                node = existing;
-            } else {
-                throw new ItemExistsException(existing.safeGetJCRPath());
-            }
-        } else {
-            // there's no node with that name...
+        }
+
+        if (node == null) {
+            // create node

INS25 MOV32 MOV8 INS27 INS33 INS25 INS42 INS33 INS38 INS8 INS32 MOV25 MOV25 INS42 INS42