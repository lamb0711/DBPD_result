JCR-1612: Reintroduce NamespaceStorage and namespace-caching

Make NamespaceRegistryImpl implement StringIndex and simplify the downstream classes accordingly.

To make this happen I modified the StringIndex contract a bit, allowing (and, for indexToString, requiring) implementations to throw exceptions if an unknown index is requested. Modified implementing classes accordingly.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@681121 13f79535-47bb-0310-9956-ffa450edef68

-     * Returns the index for a given string. if the string does not exist in
-     * the underlying index map a new index needs to be created.
+     * Returns the index for a given string. If the given string is not
+     * already indexed, the implementation can either automatically index
+     * it or throw an exception.
+     * @throws IllegalArgumentException if the string is not
+     *                                  (and can not be) indexed
-    int stringToIndex(String string);
+    int stringToIndex(String string) throws IllegalArgumentException;
-     * Returns the string for a given index. If the index does not exist
-     * in the underlying index map, <code>null</code> is returned.
+     * Returns the string for a given index.
-     * @return the indexed string, or <code>null</code>
+     * @return the indexed string
+     * @throws IllegalArgumentException if the indexed string does not exist
-    String indexToString(int idx);
+    String indexToString(int idx) throws IllegalArgumentException;

INS43 INS43 INS65 INS42 INS65 INS42 UPD66 UPD66 INS66 INS42 INS66 INS66 UPD66 UPD66 INS42 INS66 DEL66