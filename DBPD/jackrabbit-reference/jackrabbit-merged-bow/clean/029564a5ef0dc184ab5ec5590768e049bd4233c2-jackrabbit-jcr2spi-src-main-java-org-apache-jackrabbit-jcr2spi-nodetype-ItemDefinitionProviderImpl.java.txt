JCR-2039: Add log information when node/property type determination fails


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@760479 13f79535-47bb-0310-9956-ffa450edef68

-            definition = service.getNodeDefinition(sessionInfo, nodeId);
+            log.debug("Cannot determine effective node type of {}: {}", nodeId, e);
+            definition = getNodeDefinition(service, sessionInfo, nodeId);
-   /**
+    /**
-            definition = service.getPropertyDefinition(sessionInfo, propertyId);
+            log.debug("Cannot determine property defintion of {}: {}", propertyId, e);
+            definition = getPropertyDefinition(service, sessionInfo, propertyId);
+    private static QNodeDefinition getNodeDefinition(RepositoryService service, SessionInfo sessionInfo,
+            NodeId nodeId) throws RepositoryException {
+
+        try {
+            return service.getNodeDefinition(sessionInfo, nodeId);
+        }
+        catch (RepositoryException e) {
+            log.error("Cannot determine node definition of {}: {}", nodeId, e);
+            throw e;
+        }
+    }
+
+    private static QPropertyDefinition getPropertyDefinition(RepositoryService service,
+            SessionInfo sessionInfo, PropertyId propertyId) throws RepositoryException {
+
+        try {
+            return service.getPropertyDefinition(sessionInfo, propertyId);
+        }
+        catch (RepositoryException e) {
+            log.error("Cannot determine property definition of {}: {}", propertyId, e);
+            throw e;
+        }
+    }
+

INS31 INS31 INS83 INS83 INS43 INS42 INS44 INS44 INS44 INS43 INS8 INS83 INS83 INS43 INS42 INS44 INS44 INS44 INS43 INS8 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS54 INS42 INS43 INS42 INS43 INS42 INS43 INS42 INS42 INS54 INS42 INS42 INS42 MOV8 INS12 INS42 INS42 INS42 MOV8 INS12 INS8 INS8 INS41 INS44 INS8 INS41 INS44 INS8 INS21 INS21 INS21 INS21 MOV32 INS43 INS42 INS21 INS53 MOV32 INS43 INS42 INS21 INS53 INS32 INS7 INS32 INS7 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS32 INS42 INS42 INS45 INS42 INS42 INS42 INS32 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 DEL42 DEL7 DEL21 DEL42 DEL7 DEL21