JSR-328: Removed the TransientRepository(RepositoryConfig) constructor to avoid problems with reusing the config instance.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@382213 13f79535-47bb-0310-9956-ffa450edef68

-     * configuration to initialize the underlying repository instances.
-     * 
-     * @param config repository configuration
-     * @throws IOException if the static repository descriptors cannot be loaded
-     */
-    public TransientRepository(final RepositoryConfig config)
-            throws IOException {
-        this(new RepositoryFactory() {
-            public RepositoryImpl getRepository() throws RepositoryException {
-                return RepositoryImpl.create(config);
-            }
-        });
-    }
-
-    /**
-     * Creates a transient repository proxy that will use the given repository
-     * repository instances.
+     * repository instances. The repository configuration file will be reloaded
+     * whenever 
-     * @throws ConfigurationException if the configuration file is invalid
-    public TransientRepository(String config, String home)
+    public TransientRepository(final String config, final String home)
-        this(RepositoryConfig.create(config, home));
+        this(new RepositoryFactory() {
+            public RepositoryImpl getRepository() throws RepositoryException {
+                try {
+                    RepositoryConfig rc = RepositoryConfig.create(config, home);
+                    return RepositoryImpl.create(rc);
+                } catch (ConfigurationException e) {
+                    throw new RepositoryException(
+                            "Invalid repository configuration: " + config, e);
+                }
+            }
+        });

MOV44 INS8 INS83 UPD42 INS83 UPD42 INS17 UPD66 INS66 INS14 MOV43 INS1 INS31 INS83 MOV43 INS42 MOV43 INS8 INS54 MOV8 INS12 INS60 INS41 INS44 INS8 MOV43 INS59 INS32 INS43 INS42 INS53 INS42 MOV32 INS42 INS42 INS42 INS42 INS14 INS43 INS27 INS42 INS42 INS45 INS42 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL83 DEL42 DEL83 DEL42 DEL44 DEL42 DEL43 DEL83 DEL42 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL1 DEL14 DEL17 DEL8 DEL31 DEL42 DEL66 DEL65 DEL17