JCR-2064 Add new JSR283 features to CND reader/writer
JCR-2153 Introduce QValueConstraint and change return type of QPropertyDefinition.getValueConstraints()
JCR-2158 Consolidate CND related classes from SPI and Core


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@785777 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.NamespaceException;
-import java.util.Properties;
-import java.util.Map;
-import java.util.Set;
-import java.util.Iterator;
+import java.util.Map;
+
+import javax.jcr.NamespaceException;
-    private final Properties prefixToURI = new Properties();
+    private final Map<String, String> prefixToURI = new HashMap<String, String>();
-    private final Properties URIToPrefix = new Properties();
+    private final Map<String, String> URIToPrefix = new HashMap<String, String>();
+     * @param base fallback resolver
-            return URIToPrefix.getProperty(uri);
+            return URIToPrefix.get(uri);
-            return prefixToURI.getProperty(prefix);
+            return prefixToURI.get(prefix);
+     * @param prefix prefix to check
+     * @return <code>true</code> if prefix is mapped
-     * @param prefix
-     * @param uri
-     * @throws NamespaceException
+     * @param prefix prefix to map
+     * @param uri uri to map
+     * @throws NamespaceException if an error occurs
-    public Map getPrefixToURIMapping() {
-        return new HashMap(prefixToURI);
+    public Map<String, String> getPrefixToURIMapping() {
+        return new HashMap<String, String>(prefixToURI);
-    public Map getURIToPrefixMapping() {
-        return new HashMap(URIToPrefix);
+    public Map<String, String> getURIToPrefixMapping() {
+        return new HashMap<String, String>(URIToPrefix);
-     /**
-     * Override equals()
-      *
-     * @param obj
-     * @return boolean
+    /**
+     * {@inheritDoc}
-        Set mapping = prefixToURI.entrySet();
-        for (Iterator i = mapping.iterator(); i.hasNext();) {
-            Map.Entry entry = (Map.Entry) i.next();
-            String prefix = (String) entry.getKey();
-            String uri = (String) entry.getValue();
+        for (Map.Entry<String, String> entry: prefixToURI.entrySet()) {
+            String prefix = entry.getKey();
+            String uri = entry.getValue();

MOV26 MOV26 INS74 INS74 INS74 INS74 INS43 INS43 INS43 INS43 INS43 INS43 INS65 INS65 INS65 MOV43 INS43 INS43 MOV43 INS43 INS43 INS65 INS70 UPD42 MOV42 INS42 INS42 INS74 UPD42 MOV42 INS42 INS42 INS74 INS42 INS66 INS42 INS66 INS66 INS66 INS66 INS66 INS42 INS42 INS42 INS42 INS65 INS44 MOV32 MOV8 INS43 INS43 INS43 INS43 INS43 INS43 INS74 INS74 INS74 INS42 UPD42 MOV42 INS42 INS42 UPD42 MOV42 INS42 INS42 MOV43 INS43 INS43 MOV43 MOV43 INS43 MOV43 MOV43 INS43 MOV43 MOV43 UPD42 UPD42 INS42 INS42 INS42 UPD42 MOV42 MOV32 MOV32 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL43 DEL43 DEL43 DEL43 DEL66 DEL65 DEL42 DEL65 DEL66 DEL65 DEL40 DEL43 DEL42 DEL42 DEL42 DEL32 DEL11 DEL59 DEL60 DEL11 DEL11 DEL43 DEL42 DEL59 DEL60 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL24