QueryHandler does not release read lock when exception is thrown while creating executable query.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@154824 13f79535-47bb-0310-9956-ffa450edef68

-        SortField[] sortFields = new SortField[orderProps.length];
-        for (int i = 0; i < orderProps.length; i++) {
-            String prop = null;
-            if (QueryConstants.JCR_SCORE.equals(orderProps[i])) {
-                // order on jcr:score does not use the natural order as
-                // implemented in lucene. score ascending in lucene means that
-                // higher scores are first. JCR specs that lower score values
-                // are first.
-                sortFields[i] = new SortField(null, SortField.SCORE, orderSpecs[i]);
-            } else {
-                try {
-                    prop = orderProps[i].toJCRName(nsMappings);
-                } catch (NoPrefixDeclaredException e) {
-                    // will never happen
-                }
-                sortFields[i] = new SortField(prop, SortField.STRING, !orderSpecs[i]);
-            }
-        }
-
+            SortField[] sortFields = new SortField[orderProps.length];
+            for (int i = 0; i < orderProps.length; i++) {
+                String prop = null;
+                if (QueryConstants.JCR_SCORE.equals(orderProps[i])) {
+                    // order on jcr:score does not use the natural order as
+                    // implemented in lucene. score ascending in lucene means that
+                    // higher scores are first. JCR specs that lower score values
+                    // are first.
+                    sortFields[i] = new SortField(null, SortField.SCORE, orderSpecs[i]);
+                } else {
+                    try {
+                        prop = orderProps[i].toJCRName(nsMappings);
+                    } catch (NoPrefixDeclaredException e) {
+                        // will never happen
+                    }
+                    sortFields[i] = new SortField(prop, SortField.STRING, !orderSpecs[i]);
+                }
+            }
+

MOV60 MOV24