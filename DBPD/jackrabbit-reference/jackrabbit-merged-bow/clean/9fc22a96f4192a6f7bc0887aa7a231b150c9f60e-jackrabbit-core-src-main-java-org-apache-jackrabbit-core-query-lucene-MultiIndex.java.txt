JCR-2219: Improved background text extraction
- reverting 801135 change

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@801226 13f79535-47bb-0310-9956-ffa450edef68

-                internalFlush();
+                flush();
-                internalFlush();
+                flush();
-     * resets the redo log. When this method returned the {@link #multiReader}
-     * is released and and set to <code>null</code>.
-     *
-     * @throws IOException if the flush fails.
-     */
-    void flush() throws IOException {
-        synchronized (updateMonitor) {
-            updateInProgress = true;
-        }
-        try {
-            internalFlush();
-        } finally {
-            synchronized (updateMonitor) {
-                updateInProgress = false;
-                updateMonitor.notifyAll();
-                releaseMultiReader();
-            }
-        }
-    }
-
-    /**
-     * Flushes this <code>MultiIndex</code>. Persists all pending changes and
-    private void internalFlush() throws IOException {
+    void flush() throws IOException {
-                    flush();
+                    synchronized (updateMonitor) {
+                        updateInProgress = true;
+                    }
+                    try {
+                        flush();
+                    } finally {
+                        synchronized (updateMonitor) {
+                            updateInProgress = false;
+                            updateMonitor.notifyAll();
+                            releaseMultiReader();
+                        }
+                    }

UPD42 MOV8 UPD42 UPD42 MOV21 MOV21 MOV32 MOV42 DEL66 DEL66 DEL42 DEL67 DEL65 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL39 DEL42 DEL42 DEL43 DEL31 DEL83 DEL8