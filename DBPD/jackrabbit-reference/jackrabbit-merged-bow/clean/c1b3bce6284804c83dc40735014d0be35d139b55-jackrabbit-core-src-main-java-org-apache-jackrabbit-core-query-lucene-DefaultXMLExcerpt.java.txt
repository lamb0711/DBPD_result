JCR-900: Lucene queries are not properly rewritten

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@536145 13f79535-47bb-0310-9956-ffa450edef68

+     * Indicates whether the query is already rewritten.
+     */
+    private boolean rewritten = false;
+
+    /**
+            if (!rewritten) {
+                query = query.rewrite(reader);
+                rewritten = true;
+            }

INS23 INS29 INS83 INS39 INS59 INS65 INS42 INS9 INS66 INS25 INS38 INS8 INS42 INS21 INS21 INS7 INS7 INS42 INS32 INS42 INS9 INS42 INS42 INS42