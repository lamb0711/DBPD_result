work in progress

- HierarchyManager: changes methods to take ItemState instead of ItemId
- HierarchyManager: remove log-utility methods (saveGetJCRPath)
- HierarchyManager: remove CachingHierachyManager. not used
- ItemManager: changes methods to take ItemState instead of ItemId
- ItemStateValidator: remove utility methods not related to validation
- new class LogUtil that provides static saveGetJCRPath methods previously
  present on HierarchyManager, ItemStateValidator
- NodeState: add method 'getPropertyEntries()'
- create interface ChildPropertyEntry
- let PropertyReference implement ChildPropertyEntry

TODO: query/NodeIteratorImpl needs to be fixed. 


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429652 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.NodeId;
+import org.apache.jackrabbit.jcr2spi.state.ItemState;
+import org.apache.jackrabbit.jcr2spi.state.NodeState;
-     * @param id id of the item to be checked
+     * @param itemState state of the item to be checked
-    public boolean itemExists(ItemId id);
+    public boolean itemExists(ItemState itemState);
+
-            throws PathNotFoundException, AccessDeniedException, RepositoryException;
+        throws PathNotFoundException, AccessDeniedException, RepositoryException;
-     * @param id
+     *
+     * @param itemState
-     * @throws javax.jcr.RepositoryException
+     * @throws ItemNotFoundException
+     * @throws AccessDeniedException
+     * @throws RepositoryException
-    public ItemImpl getItem(ItemId id)
+    public ItemImpl getItem(ItemState itemState)
+        throws ItemNotFoundException, AccessDeniedException, RepositoryException;
+
+    /**
+     *
+     * @param parentState
+     * @return
+     * @throws ItemNotFoundException
+     * @throws AccessDeniedException
+     * @throws RepositoryException
+     */
+    public boolean hasChildNodes(NodeState parentState)
+        throws ItemNotFoundException, AccessDeniedException, RepositoryException;
+
+    /**
+     *
+     * @param parentState
+     * @return
+     * @throws ItemNotFoundException
+     * @throws AccessDeniedException
+     * @throws RepositoryException
+     */
+    public NodeIterator getChildNodes(NodeState parentState)
+        throws ItemNotFoundException, AccessDeniedException, RepositoryException;
+
+    /**
+     *
+     * @param parentState
+     * @return
+     * @throws ItemNotFoundException
+     * @throws AccessDeniedException
+     * @throws RepositoryException
+     */
+    public boolean hasChildProperties(NodeState parentState)
-     * @param parentId
+     * @param parentState
-    public boolean hasChildNodes(NodeId parentId) throws ItemNotFoundException,
-        AccessDeniedException, RepositoryException;
-
-    /**
-     *
-     * @param parentId
-     * @return
-     * @throws ItemNotFoundException
-     * @throws AccessDeniedException
-     * @throws RepositoryException
-     */
-    public NodeIterator getChildNodes(NodeId parentId)
-            throws ItemNotFoundException, AccessDeniedException, RepositoryException;
-
-    /**
-     *
-     * @param parentId
-     * @return
-     * @throws ItemNotFoundException
-     * @throws AccessDeniedException
-     * @throws RepositoryException
-     */
-    public boolean hasChildProperties(NodeId parentId)
-            throws ItemNotFoundException, AccessDeniedException, RepositoryException;
-
-    /**
-     *
-     * @param parentId
-     * @return
-     * @throws ItemNotFoundException
-     * @throws AccessDeniedException
-     * @throws RepositoryException
-     */
-    public PropertyIterator getChildProperties(NodeId parentId)
+    public PropertyIterator getChildProperties(NodeState parentState)

INS26 INS40 UPD40 UPD43 UPD42 INS65 INS65 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD66 UPD42 UPD42 INS42 INS42 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 DEL40