 JCR-1588: JSR 283: Access Control

- align principalbased ac editing with latest changes made to JSR 283
   -> getApplicablePolicies(Principal) only returns policies that have not yet been set
   -> getPolicies(Principal) added -> used to modify policies that have been set before

- WorkspaceAccessManagerImpl.grants throws NoSuchWorkspaceException if an invalid
   wspName gets passed... TCK tests would fail if not executed with admin user that
   is covered by shortcut.

- Various improvements to AccessControlProvider handling
   > prevent closure of used provider
   > add AccessControlProvider#isLive that allows to rebuild the provider if it was closed before

- Simplify WriteTest and add test for changes made to principal-based ACLEditor

JCR-2087 Upgrade to Java 5 as the base platform
- use generics in security code (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@788450 13f79535-47bb-0310-9956-ffa450edef68

+     * Retrieves the policies that have been applied before for the given
+     * <code>principal</code>. In contrast to {@link #editAccessControlPolicies}
+     * this method returns an empty array if no policy has been applied before
+     * by calling {@link #setPolicy}). Still the returned policies are detached from
+     * the <code>AccessControlProvider</code> and are only an external representation.
+     * Modification will therefore not take effect, until they are written back to
+     * the editor and persisted.
+     *
+     * @param principal  Principal for which the editable policies should be
+     * returned.
+     * @return the policies applied so far or an empty array if no
+     * policy has been applied before.
+     * @throws AccessControlException if the specified principal does not exist,
+     * if this implementation cannot provide policies for individual principals or
+     * if same other access control related exception occurs.
+     * @throws RepositoryException if an error occurs
+     */
+    JackrabbitAccessControlPolicy[] getPolicies(Principal principal) throws AccessControlException, RepositoryException;
+
+    /**

INS31 INS29 INS5 INS42 INS44 INS43 INS43 INS65 INS65 INS65 INS65 INS65 INS43 INS85 INS43 INS42 INS42 INS42 INS66 INS66 INS65 INS66 INS66 INS65 INS66 INS66 INS66 INS66 INS42 INS66 INS66 INS66 INS66 INS42 INS66 INS66 INS66 INS42 INS66 INS42 INS42 INS67 INS67 INS42 INS42