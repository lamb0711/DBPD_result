fixed: move, reorder (work in progress)
fixed: locktoken transfer
fixed: recursive transient removal of invalidated tree fails (restoreTests)
improve: simplify usage of workspace operations
fixed: store original itemId with transient operations in order to properly reflect the changelog upon batch creation
fixed: workspace import doesn't invalidate
fixed: session import uuid handling




git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@513279 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.state.ItemState;
+import org.apache.jackrabbit.jcr2spi.hierarchy.NodeEntry;
-            // a session-state is moved, if its NodeEntry is not the same as
-            // the NodeEntry of its overlayed state. If no overlayedState
-            // exists the state not moved anyway.
-            ItemState overlayed = state.getWorkspaceState();
-            if (overlayed == null) {
-                return false;
-            } else {
-                return state.getHierarchyEntry() != overlayed.getHierarchyEntry();
-                //return modState.overlayedState.getParent() != modState.getParent().overlayedState;
-            }
+            NodeEntry ne = state.getNodeEntry();
+            return ne.isTransientlyMoved();

MOV26 UPD40 MOV41 UPD43 INS32 UPD42 UPD42 UPD42 MOV42 UPD42 MOV42 UPD42 DEL32 DEL42 DEL42 DEL32 DEL27 DEL42 DEL33 DEL27 DEL9 DEL41 DEL8 DEL8 DEL25