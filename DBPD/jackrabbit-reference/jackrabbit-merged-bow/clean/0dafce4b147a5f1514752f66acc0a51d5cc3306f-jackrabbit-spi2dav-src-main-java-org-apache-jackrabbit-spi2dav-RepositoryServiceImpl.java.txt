JCR-2532: spi2davex: session-scoped lock tokens not included in if-header
+ minor improvement


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@918560 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.commons.httpclient.HttpMethod;
-    private static final EventType[] ALL_EVENTS = new EventType[7];
-    static {
-        ALL_EVENTS[0] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.NODE_ADDED);
-        ALL_EVENTS[1] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.NODE_REMOVED);
-        ALL_EVENTS[2] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.PROPERTY_ADDED);
-        ALL_EVENTS[3] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.PROPERTY_CHANGED);
-        ALL_EVENTS[4] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.PROPERTY_REMOVED);
-        ALL_EVENTS[5] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.NODE_MOVED);
-        ALL_EVENTS[6] = SubscriptionImpl.getEventType(javax.jcr.observation.Event.PERSIST);
-    }
-    private static final SubscriptionInfo S_INFO = new SubscriptionInfo(ALL_EVENTS, true, INFINITE_TIMEOUT);
+    private static final SubscriptionInfo S_INFO = new SubscriptionInfo(SubscriptionImpl.getAllEventTypes(), true, INFINITE_TIMEOUT);
-    private static void initMethod(DavMethod method, SessionInfo sessionInfo, boolean addIfHeader) throws RepositoryException {
+    protected static void initMethod(HttpMethod method, SessionInfo sessionInfo, boolean addIfHeader) throws RepositoryException {

INS26 INS40 UPD83 UPD43 INS32 UPD42 INS42 INS42 DEL83 DEL83 DEL83 DEL42 DEL43 DEL85 DEL5 DEL42 DEL42 DEL43 DEL85 DEL5 DEL34 DEL3 DEL59 DEL23 DEL83 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL42 DEL34 DEL2 DEL42 DEL42 DEL40 DEL32 DEL7 DEL21 DEL8 DEL28 DEL42