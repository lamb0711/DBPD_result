JCR-2887 : Split PrivilegeRegistry in a per-session manager instance and a repository level registry [work in progress]

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1072154 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.authorization.PrivilegeManager;
-    private PrivilegeRegistry privilegeRegistry;
-
+     * The privilege manager
+     */
+    private PrivilegeManager privilegeManager;
+
+    /**
-        privilegeRegistry = new PrivilegeRegistry(resolver);
+        privilegeManager = amContext.getPrivilegeManager();
-            int privs = PrivilegeRegistry.getBits(privileges);
+            int privs = privilegeManager.getBits(privileges);
-                privilegeRegistry.getPrivileges(bits);
+                privilegeManager.getPrivileges(bits);
-            int privs = PrivilegeRegistry.getBits(privileges);
+            int privs = privilegeManager.getBits(privileges);
-                    privilegeRegistry.getPrivileges(bits);
+                    privilegeManager.getPrivileges(bits);
-     * @see AbstractAccessControlManager#getPrivilegeRegistry()
+     * @see AbstractAccessControlManager#getPrivilegeManager()
-    protected PrivilegeRegistry getPrivilegeRegistry() throws RepositoryException {
+    protected PrivilegeManager getPrivilegeManager() throws RepositoryException {
-        return privilegeRegistry;
+        return privilegeManager;

INS26 MOV23 INS40 INS29 UPD43 UPD43 UPD42 INS65 UPD42 UPD42 UPD42 INS66 UPD42 UPD42 INS32 UPD42 INS42 INS42 UPD42 UPD42 UPD42 UPD42 DEL42 DEL43 DEL42 DEL14