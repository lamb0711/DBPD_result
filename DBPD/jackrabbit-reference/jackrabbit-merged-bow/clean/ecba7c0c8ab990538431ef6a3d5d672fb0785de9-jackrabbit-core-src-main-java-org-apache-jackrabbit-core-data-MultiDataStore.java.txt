JCR-3512 DelayedDelete in MultiDatastore does not work correctly

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1461524 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * {@inheritDoc}
+     */
-                            new DeleteDelayedIdentifiersTask(),
+                            //Start immediately ...
+                            new DeleteDelayedIdentifiersTask(0L),
+    /**
+     * {@inheritDoc}
+     */
+    /**
+     * {@inheritDoc}
+     */
-                                    new DeleteDelayedIdentifiersTask(),
+                                    new DeleteDelayedIdentifiersTask(delayedDeleteSleep),
+        private long sleepTime = 0L;
+        
+        /**
+         * Constructor
+         * @param sleep how long this DeleteDelayedIdentifiersTask should sleep in seconds.
+         */
+        public DeleteDelayedIdentifiersTask(long sleep) {
+            this.sleepTime = (sleep * 1000L);
+        }
+                if (sleepTime > 0) {
+                    try {
+                        Thread.sleep(sleepTime);
+                    } catch (InterruptedException e) {
+                        Thread.currentThread().interrupt();
+                    }
+                }
+                log.info("Start to delete DataRecords from the primary data store.");

INS29 INS29 INS29 INS23 INS31 INS65 INS65 INS65 INS83 INS39 INS59 INS29 INS83 INS42 INS44 INS8 INS65 INS65 INS65 INS42 INS34 INS65 INS65 INS39 INS42 INS21 INS66 INS42 INS66 INS7 INS22 INS36 INS25 INS21 INS52 INS42 INS27 INS27 INS8 INS32 INS42 INS34 INS42 INS34 INS54 INS42 INS42 INS45 INS8 INS12 INS21 INS44 INS8 INS32 INS43 INS42 INS21 INS42 INS42 INS42 INS42 INS32 INS34 INS32 INS42 INS42 INS42 INS42