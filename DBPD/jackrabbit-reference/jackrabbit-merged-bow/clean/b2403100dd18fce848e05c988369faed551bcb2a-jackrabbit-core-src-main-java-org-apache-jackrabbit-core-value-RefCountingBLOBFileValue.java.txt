JCR-2238: Binary throws NullPointerException
- use synchronized instead of AtomicInteger

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@802690 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.concurrent.atomic.AtomicInteger;
-    private final AtomicInteger refCount = new AtomicInteger(1);
+    private int refCount = 1;
-    public void dispose() {
-        if (refCount.get() > 0) {
-            if (refCount.decrementAndGet() == 0) {
+    public synchronized void dispose() {
+        if (refCount > 0) {
+            if (--refCount == 0) {
-    BLOBFileValue copy() throws RepositoryException {
-        if (refCount.get() <= 0) {
+    synchronized BLOBFileValue copy() throws RepositoryException {
+        if (refCount <= 0) {
-        refCount.incrementAndGet();
+        refCount++;

INS39 INS83 INS83 INS34 INS37 INS42 INS42 INS42 INS38 INS42 DEL40 DEL26 DEL83 DEL42 DEL43 DEL42 DEL43 DEL34 DEL14 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32