- JCR-1958: Enhanced JCR remoting (work in progress)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@741206 13f79535-47bb-0310-9956-ffa450edef68

+    private static final String NAME_DEFAULT = "default";
-    private int defaultDepth = DEPTH_INFINITE;
+    private int defaultDepth = DEPTH_DEFAULT;
-    public BatchReadConfig() {
-
-    }
+    BatchReadConfig() {}
+    /**
+     * Add the configuration entries present in the given properties.
+     *
+     * @param props
+     */
-            String depth = props.getProperty(name);
+            String depthStr = props.getProperty(name);
-                Integer intg = new Integer(depth);
-                depthMap.put(name, intg);
+                int depth = Integer.parseInt(depthStr);
+                if (depth < DEPTH_INFINITE) {
+                    log.warn("invalid depth " + depthStr + " -> ignoring.");
+                    continue;
+                }
+                if (NAME_DEFAULT.equals(name)) {
+                    setDefaultDepth(depth);
+                } else {
+                    setDepth(name, depth);
+                }
-                log.warn("Invalid depth value for name " + name + ". " + depth + " cannot be parsed into an integer.");
+                log.warn("Invalid depth value for name " + name + ". " + depthStr + " cannot be parsed into an integer.");
-            return DEPTH_DEFAULT;
+            return defaultDepth;
-     * Return the depth for the given node or the
-     * {@link #DEPTH_DEFAULT default value} if the config does not provide
-     * an specific entry for the given node..
+     * Return the depth for the given node or the default depth if the config
+     * does not provide an specific entry for the given node.
-        int depth = DEPTH_DEFAULT;
+        int depth = defaultDepth;

INS23 INS83 INS83 INS83 INS43 INS59 INS29 INS42 INS42 INS45 UPD42 INS65 INS65 INS66 INS42 UPD66 UPD66 UPD42 UPD42 UPD42 INS25 INS25 INS39 INS27 INS8 INS32 INS8 INS8 UPD42 INS32 INS42 INS42 INS21 INS18 INS42 INS42 INS42 INS21 MOV21 INS42 INS42 INS42 INS32 INS32 INS42 INS42 INS27 INS42 INS42 UPD42 UPD42 UPD42 INS45 INS42 INS45 DEL83 DEL42 DEL43 DEL42 DEL43 DEL42 DEL14 DEL42 DEL42 DEL67 DEL66 DEL65 DEL66