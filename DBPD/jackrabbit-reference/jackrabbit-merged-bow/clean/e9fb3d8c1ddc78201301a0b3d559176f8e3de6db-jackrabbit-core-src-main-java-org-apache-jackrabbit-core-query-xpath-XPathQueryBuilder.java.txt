JCR-1184: Introduce spellchecker functionality based on content in the workspace

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@587866 13f79535-47bb-0310-9956-ffa450edef68

+     * QName for rep:spellcheck
+     */
+    static final QName REP_SPELLCHECK = new QName(QName.NS_REP_URI, "spellcheck");
+
+    /**
+            } else if (NameFormat.format(REP_SPELLCHECK, resolver).equals(fName)
+                    && queryNode.getType() != QueryNode.TYPE_PATH) {
+                if (node.jjtGetNumChildren() == 2) {
+                    if (queryNode instanceof NAryQueryNode) {
+                        NAryQueryNode parent = (NAryQueryNode) queryNode;
+                        RelationQueryNode rel = factory.createRelationQueryNode(
+                                parent, RelationQueryNode.OPERATION_SPELLCHECK);
+                        parent.addOperand(rel);
+
+                        // get string to check
+                        node.jjtGetChild(1).jjtAccept(this, rel);
+                        // check if string is set
+                        if (rel.getStringValue() == null) {
+                            exceptions.add(new InvalidQueryException(
+                                    "Argument for rep:spellcheck() must be of type string"));
+                        }
+
+                        // set a dummy property name
+                        rel.addPathElement(Path.PathElement.create(QName.JCR_PRIMARYTYPE));
+                    } else {
+                        exceptions.add(new InvalidQueryException(
+                                "Unsupported location for rep:spellcheck()"));
+                    }
+                } else {
+                    exceptions.add(new InvalidQueryException(
+                            "Wrong number of arguments for rep:spellcheck()"));
+                }

INS23 INS29 INS83 INS83 INS43 INS59 INS65 INS42 INS42 INS14 INS66 INS43 INS40 INS45 INS42 INS25 INS27 INS8 MOV25 INS32 INS27 INS25 INS32 INS42 INS42 INS32 INS40 INS27 INS8 INS8 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS34 INS25 INS21 INS42 INS42 INS62 INS8 INS8 INS32 INS42 INS43 INS60 INS60 INS21 INS21 INS25 INS21 INS21 INS42 INS42 INS14 INS42 INS43 INS59 INS43 INS59 INS32 INS32 INS27 INS8 INS32 INS32 INS43 INS45 INS42 INS42 INS11 INS42 INS42 INS32 INS42 INS42 INS42 INS32 INS42 INS52 INS42 INS32 INS33 INS21 INS42 INS42 INS32 INS42 INS42 INS14 INS42 INS43 INS42 INS42 INS42 INS42 INS40 INS42 INS42 INS34 INS42 INS42 INS32 INS40 INS42 INS40 INS43 INS45 INS42 INS42 INS42 INS14 INS42 INS43 INS45 INS42