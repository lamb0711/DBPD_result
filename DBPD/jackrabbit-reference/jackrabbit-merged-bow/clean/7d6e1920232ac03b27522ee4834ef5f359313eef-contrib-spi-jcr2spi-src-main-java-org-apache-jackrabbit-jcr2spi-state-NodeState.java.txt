work in progress

- add invalidate(), refresh() to NodeState (missing impl)
- rename ItemState.refresh(ChangeLog) to persisted(ChangeLog)
- Item.refresh(boolean) must not call checkStatus. a stale, invalidated
  item may be refreshed unless its state has a terminal status (removed, stale_destroyed). ItemState.refresh() is therefore called after reverting transient modifications only.
- javadoc and some comments

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@474319 13f79535-47bb-0310-9956-ffa450edef68

+    public void refresh() {
+        // TODO
+    }
+
+    public void invalidate() {
+        // TODO
+    }
+
-     * @see ItemState#refresh(ChangeLog)
+     * @see ItemState#persisted(ChangeLog)
-    void refresh(ChangeLog changeLog) throws IllegalStateException {
+    void persisted(ChangeLog changeLog) throws IllegalStateException {
-     * Reverts all property and child node states that belong to this
-     * <code>NodeState</code> and finally reverts this <code>NodeState</code>.
+     * Calls {@link #revert(Set) on all child states and add itself to the
+     * set of affected states, if the current status indicates, that this
+     * <code>NodeState</code> has been transiently modified.
-        // TODO: TOBEFIXED. revert must include an update with the latest state present on the server

INS31 INS31 INS83 INS39 INS42 INS8 INS83 INS39 INS42 INS8 UPD42 INS65 INS66 INS65 UPD42 INS68 UPD66 MOV66 INS66 UPD66 MOV66 INS42 INS69 INS43 INS42 DEL65