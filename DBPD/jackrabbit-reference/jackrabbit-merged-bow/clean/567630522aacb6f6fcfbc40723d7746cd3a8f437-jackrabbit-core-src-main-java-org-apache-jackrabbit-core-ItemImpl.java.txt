JCR-2170: Remove PropDefId and NodeDefId
- merged changes from sandbox branch

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816343 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.NodeDef;
-import org.apache.jackrabbit.core.nodetype.PropDef;
-import org.apache.jackrabbit.core.nodetype.PropertyDefinitionImpl;
+import org.apache.jackrabbit.spi.QPropertyDefinition;
+import org.apache.jackrabbit.spi.QItemDefinition;
-                def = ntMgr.getNodeDefinition(((NodeState) itemState).getDefinitionId());
+                def = itemMgr.getDefinition((NodeState) itemState);
-                def = ntMgr.getPropertyDefinition(((PropertyState) itemState).getDefinitionId());
+                def = itemMgr.getDefinition((PropertyState) itemState);
-                PropDef[] pda = ent.getMandatoryPropDefs();
+                QPropertyDefinition[] pda = ent.getMandatoryPropDefs();
-                    PropDef pd = pda[i];
+                    QPropertyDefinition pd = pda[i];
-                NodeDef[] cnda = ent.getMandatoryNodeDefs();
+                QItemDefinition[] cnda = ent.getMandatoryNodeDefs();
-                    NodeDef cnd = cnda[i];
+                    QItemDefinition cnd = cnda[i];
-                PropertyDefinitionImpl propDef = (PropertyDefinitionImpl) def;
+                org.apache.jackrabbit.spi.commons.nodetype.PropertyDefinitionImpl propDef = (org.apache.jackrabbit.spi.commons.nodetype.PropertyDefinitionImpl) def;
-            ItemDefinition def;
+            QItemDefinition def;
-                def = ntMgr.getNodeDefinition(((NodeState) itemState).getDefinitionId());
+                def = itemMgr.getDefinition((NodeState) itemState).unwrap();
-                def = ntMgr.getPropertyDefinition(((PropertyState) itemState).getDefinitionId());
+                def = itemMgr.getDefinition((PropertyState) itemState).unwrap();

MOV26 MOV26 UPD40 UPD40 UPD43 UPD42 UPD5 UPD5 UPD43 MOV32 MOV32 UPD43 UPD43 INS40 MOV42 MOV42 INS42 UPD42 MOV11 INS42 UPD42 MOV11 UPD42 UPD43 UPD42 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 INS40 INS42 UPD42 MOV11 INS42 UPD42 MOV11 DEL40 DEL26 DEL36 DEL42 DEL42 DEL32 DEL36 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL36 DEL42 DEL36