- optimize move operations

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@178171 13f79535-47bb-0310-9956-ffa450edef68

-
-        // do move operation
-
-        // add target to new parent
-        destParentNode.createChildNodeLink(destName.getName(), targetUUID);
-        // remove target from old parent
-        srcParentNode.removeChildNode(srcName.getName(), index);
+
+        if (srcParentNode.isSame(destParentNode)) {
+            // do rename
+            destParentNode.renameChildNodeLink(srcName.getName(), index, targetUUID, destName.getName());
+        } else {
+            // do move
+            destParentNode.createChildNodeLink(destName.getName(), targetUUID);
+            srcParentNode.removeChildNode(srcName.getName(), index);
+        }
+

INS25 INS32 INS8 INS8 INS42 INS42 INS42 INS21 MOV21 MOV21 INS32 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS42