JCR-1365: Query path constraints like foo//*/bar do not scale
- more performance improvements

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@629453 13f79535-47bb-0310-9956-ffa450edef68

-     * Calls {@link #doClose()} and disposes the {@link PerQueryCache}.
-     *
-     * @throws IOException if an error occurs while releasing resources.
+     * This default implemetation does nothing.
-    public final void close() throws IOException {
-        try {
-            doClose();
-        } finally {
-            PerQueryCache.getInstance().dispose();
-        }
+    public void close() throws IOException {
-     * Releases resources held by this hits instance.
+     * This default implementation returns <code>-1</code>.
-     * @throws IOException if an error occurs while releasing resources.
+     * @return <code>-1</code>.
-    protected abstract void doClose() throws IOException;
+    public int getSize() {
+        return -1;
+    }

INS8 UPD83 UPD39 UPD42 INS8 UPD65 INS41 UPD66 UPD66 UPD66 INS38 INS34 DEL66 DEL42 DEL68 DEL65 DEL66 DEL42 DEL65 DEL42 DEL66 DEL65 DEL83 DEL42 DEL32 DEL21 DEL8 DEL42 DEL42 DEL32 DEL42 DEL32 DEL21 DEL8 DEL54 DEL8 DEL42 DEL83 DEL42 DEL43