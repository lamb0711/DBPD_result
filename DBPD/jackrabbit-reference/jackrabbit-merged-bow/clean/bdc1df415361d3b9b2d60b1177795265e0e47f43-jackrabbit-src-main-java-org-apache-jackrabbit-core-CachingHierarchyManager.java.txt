JCR-552 Move listeners from item state to item state managers


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@438851 13f79535-47bb-0310-9956-ffa450edef68

-        stateModified((NodeState) modified);
+        if (modified.isNode()) {
+            stateModified((NodeState) modified);
+        }
-        destroyed.removeListener(this);
-        discarded.removeListener(this);
-     * Called when an <code>ItemState</code> has been overlaid by some
-     * other state that now takes its identity. This notification is sent
-     * on the state being overlaid.
-     *
-     * @param overlayer the <code>ItemState</code> that overlays this state
-     */
-    public void stateOverlaid(ItemState overlayer) {
-        if (overlayer.isNode()) {
-            overlayer.getOverlayedState().removeListener(this);
-            overlayer.addListener(this);
-        }
-    }
-
-    /**
-     * Called when an <code>ItemState</code> no longer overlayes some other
-     * item state. This notification is sent on the state overlaying another
-     * state.
-     *
-     * @param overlayer the <code>ItemState</code> that overlaid another
-     *                  item state. To get the overlaid state, invoke
-     *                  {@link ItemState#getOverlayedState()}
-     */
-    public void stateUncovered(ItemState overlayer) {
-        if (overlayer.isNode()) {
-            overlayer.removeListener(this);
-            overlayer.getOverlayedState().addListener(this);
-        }
-    }
-
-    /**
-
-            state.addListener(this);

INS8 INS25 INS32 MOV8 INS42 INS42 DEL42 DEL42 DEL52 DEL32 DEL21 DEL42 DEL42 DEL52 DEL32 DEL21 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL52 DEL32 DEL21 DEL42 DEL42 DEL52 DEL32 DEL21 DEL8 DEL25 DEL8 DEL31 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL66 DEL42 DEL42 DEL68 DEL65 DEL65 DEL29 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32 DEL42 DEL42 DEL52 DEL32 DEL21 DEL42 DEL42 DEL32 DEL42 DEL52 DEL32 DEL21 DEL8 DEL25 DEL8 DEL31 DEL42 DEL42 DEL52 DEL32 DEL21