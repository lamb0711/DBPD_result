JCR-890: concurrent read-only access to a session

Add SessionState.perform(SessionOperation) for centralizing the control of any kinds of session operations.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@956896 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
+
-     * Ignored; the session is alive.
+     * Performs the given operation within a synchronized block.
+     *
+     * @throws RepositoryException if the operation fails
-    public void checkAlive() {
+    public synchronized void perform(SessionOperation operation)
+            throws RepositoryException {
+        operation.perform();

INS26 INS40 INS83 UPD42 INS44 INS43 INS65 UPD65 INS43 INS42 INS42 INS21 INS66 INS42 UPD66 INS42 INS32 INS42 INS42