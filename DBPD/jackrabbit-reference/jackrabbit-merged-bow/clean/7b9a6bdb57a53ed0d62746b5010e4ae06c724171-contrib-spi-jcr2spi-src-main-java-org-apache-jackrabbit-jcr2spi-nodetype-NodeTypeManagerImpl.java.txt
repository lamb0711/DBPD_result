JCR-1024: Only load root node definition when required

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555290 13f79535-47bb-0310-9956-ffa450edef68

-     * @param ntReg      node type registry
-     * @param nsResolver namespace resolver
+     * @param ntReg        node type registry
+     * @param mgrProvider  the manager provider
+     * @param valueFactory the JCR value factory
-    public NodeTypeManagerImpl(NodeTypeRegistry ntReg, ManagerProvider mgrProvider,
+    public NodeTypeManagerImpl(NodeTypeRegistry ntReg,
+                               ManagerProvider mgrProvider,
-
-        // setup root definition and update cache
-        QNodeDefinition rootDef = defProvider().getRootNodeDefinition();
-        NodeDefinition rootNodeDefinition = new NodeDefinitionImpl(rootDef, this, nsResolver());
-        ndCache.put(rootDef, rootNodeDefinition);
-    private ItemDefinitionProvider defProvider() {
-        return mgrProvider.getItemDefinitionProvider();
-    }
-

INS65 UPD66 UPD42 UPD66 INS42 INS66 DEL42 DEL43 DEL42 DEL42 DEL32 DEL42 DEL32 DEL59 DEL60 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL52 DEL42 DEL32 DEL14 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL83 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31