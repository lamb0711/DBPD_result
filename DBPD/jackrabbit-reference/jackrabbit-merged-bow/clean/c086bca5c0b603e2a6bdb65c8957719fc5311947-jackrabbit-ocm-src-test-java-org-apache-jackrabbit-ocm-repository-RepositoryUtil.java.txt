the unit tests no longer work since a couple of weeks. Here is a quick fix to run the unit tests.
I will investigate where the problem comes from. It seems that the register/unregister repo process has not the same behavior (compare to a previous Jackrabbit snapshot). Now, we avoid this step per unit tests. This is the same repo instance that is used for all unit tests. Of course, the unit tests are running faster. 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@687137 13f79535-47bb-0310-9956-ffa450edef68

+    
+    public static Repository repository; 
-            Hashtable env = new Hashtable();
-            env.put(Context.INITIAL_CONTEXT_FACTORY, "org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory");
-            env.put(Context.PROVIDER_URL, "localhost");
-            InitialContext ctx = new InitialContext(env);
+        	
+        	if (repository != null)
+        	{
+        		return repository;
+        	}
+        	else 
+        	{
+        		registerRepository(repositoryName,
+                      "./src/test/test-config/repository.xml", "./target/repository");
+        		Hashtable env = new Hashtable();
+        		env.put(Context.INITIAL_CONTEXT_FACTORY, "org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory");
+        		env.put(Context.PROVIDER_URL, "localhost");
+        		InitialContext ctx = new InitialContext(env);
-            Repository repository = (Repository) ctx.lookup(repositoryName);
-            return repository;
+        		repository = (Repository) ctx.lookup(repositoryName);
+        		return repository;
+        	}

INS23 INS83 INS83 MOV43 INS59 INS42 INS8 INS25 INS27 INS8 MOV8 INS42 INS33 INS41 INS21 INS21 INS42 INS32 INS7 INS42 INS42 INS45 INS45 INS42 MOV11 DEL42 DEL59 DEL60