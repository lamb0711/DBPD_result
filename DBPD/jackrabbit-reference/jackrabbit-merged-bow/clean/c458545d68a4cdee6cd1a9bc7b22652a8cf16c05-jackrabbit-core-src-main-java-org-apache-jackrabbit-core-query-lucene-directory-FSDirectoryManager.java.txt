JCR-3469 Thread interrupt may result in closed index files

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1415093 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.lucene.store.SimpleFSDirectory;
+    private boolean useSimpleFSDirectory;
+
+        useSimpleFSDirectory = handler.isUseSimpleFSDirectory();
-        return new FSDir(dir);
+        return new FSDir(dir, useSimpleFSDirectory);
-        public FSDir(File dir) throws IOException {
+        public FSDir(File dir, boolean simpleFS) throws IOException {
-            directory = FSDirectory.open(dir,
-                    new NativeFSLockFactory(dir));
+            LockFactory lockFactory = new NativeFSLockFactory(dir);
+            if (simpleFS) {
+                directory = new SimpleFSDirectory(dir, lockFactory);
+            } else {
+                directory = FSDirectory.open(dir, lockFactory);
+            }

INS26 INS40 INS23 INS83 INS39 INS59 INS42 INS21 INS44 INS7 INS39 INS42 INS60 INS25 INS42 INS32 INS42 INS43 INS59 INS42 INS8 INS8 INS42 INS42 INS42 INS42 MOV14 INS21 MOV21 INS7 INS42 INS14 INS43 INS42 INS42 INS42 INS42