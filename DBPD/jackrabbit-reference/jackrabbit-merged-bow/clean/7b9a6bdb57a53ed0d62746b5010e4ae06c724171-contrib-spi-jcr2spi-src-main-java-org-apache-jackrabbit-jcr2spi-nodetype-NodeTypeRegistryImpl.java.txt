JCR-1024: Only load root node definition when required

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555290 13f79535-47bb-0310-9956-ffa450edef68

-     * @param nodeTypeDefs
+     * @param storage
-     * @throws RepositoryException
-    public static NodeTypeRegistryImpl create(NodeTypeStorage storage, QNodeDefinition rootNodeDef, NamespaceRegistry nsRegistry) {
-        NodeTypeRegistryImpl ntRegistry = new NodeTypeRegistryImpl(storage, rootNodeDef, nsRegistry);
+    public static NodeTypeRegistryImpl create(NodeTypeStorage storage, NamespaceRegistry nsRegistry) {
+        NodeTypeRegistryImpl ntRegistry = new NodeTypeRegistryImpl(storage, nsRegistry);
-     * @param nodeTypeDefs
+     * @param storage
-     * @throws RepositoryException
-    private NodeTypeRegistryImpl(NodeTypeStorage storage, QNodeDefinition rootNodeDef, NamespaceRegistry nsRegistry) {
+    private NodeTypeRegistryImpl(NodeTypeStorage storage, NamespaceRegistry nsRegistry) {
-
-        // setup definition of root node
-        synchronized (nodeDefs) {
-            nodeDefs.add(rootNodeDef);
-        }

UPD42 MOV43 UPD42 MOV43 DEL42 DEL65 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL65 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL51