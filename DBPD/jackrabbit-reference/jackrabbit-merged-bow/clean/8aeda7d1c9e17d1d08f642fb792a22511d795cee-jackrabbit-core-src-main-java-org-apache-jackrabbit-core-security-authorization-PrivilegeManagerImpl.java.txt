JCR-2887 : Split PrivilegeRegistry in a per-session manager instance and a repository level registry [work in progress]
JCR-2774 : Access control for repository level API operations


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1177668 13f79535-47bb-0310-9956-ffa450edef68

-        boolean allowed = false;
-            // TODO: FIXME should be 'null' path as privilegeManagement is a
-            // TODO: repo-level privilege such as namespace or node type mgt.
-            allowed = sImpl.getAccessManager().isGranted(sImpl.getQPath("/"), Permission.PRIVILEGE_MNGMT);
-        }
-        if (!allowed) {
+            sImpl.getAccessManager().checkRepositoryPermission(Permission.PRIVILEGE_MNGMT);
+        } else {
+            // cannot evaluate

MOV8 INS32 MOV32 UPD42 MOV42 MOV40 DEL39 DEL42 DEL9 DEL59 DEL60 DEL42 DEL42 DEL42 DEL45 DEL32 DEL32 DEL7 DEL42 DEL38 DEL25