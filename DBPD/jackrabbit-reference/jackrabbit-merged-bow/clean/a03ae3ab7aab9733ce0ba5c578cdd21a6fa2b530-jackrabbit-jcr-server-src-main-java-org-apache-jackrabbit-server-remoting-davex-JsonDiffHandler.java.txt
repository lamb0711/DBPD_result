JCR-2585:  spi2davex: unspecific BadRequest error instead of error code matching the RepositoryException


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@929516 13f79535-47bb-0310-9956-ffa450edef68

-            throw new DiffException(e.getMessage(), e);
+            if (e instanceof DiffException) {
+                throw (DiffException) e;
+            } else {
+                throw new DiffException(e.getMessage(), e);
+            }
-            throw new DiffException(e.getMessage());
+            if (e instanceof DiffException) {
+                throw (DiffException) e;
+            } else {
+                throw new DiffException(e.getMessage(), e);
+            }
-                    throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");
+                    throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format.");
+                throw new DiffException("Invalid DIFF format.");
-                    throw new IOException("Invalid DIFF format");
+                    throw new DiffException(e.getMessage(), e);
-                throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");
+                throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format: The JSONArray may only contain simple values.");                
+                throw new DiffException("Invalid DIFF format: The JSONArray may only contain simple values.");
-                throw new IOException("Invalid DIFF format: NULL key.");
+                throw new DiffException("Invalid DIFF format: NULL key.");

INS12 INS8 MOV44 INS8 INS25 INS25 INS62 INS8 MOV8 INS62 INS8 INS8 MOV12 INS42 INS43 INS53 INS42 INS43 INS53 INS53 UPD43 MOV44 UPD43 UPD43 UPD43 INS42 INS11 INS42 INS11 INS14 UPD42 MOV21 UPD42 UPD42 UPD42 INS43 INS42 INS43 INS42 INS43 INS32 INS42 UPD43 INS42 INS42 INS42 INS42 INS42 UPD42 INS42 DEL42 DEL43 DEL45 DEL14 DEL53 DEL8 DEL12