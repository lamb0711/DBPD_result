JCR-3162 Index update overhead on cluster slave due to JCR-905
 - and we are back!

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1214842 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.cluster.ClusterNode;
+     * The workspace
+     */
+    private final String workspace;
+
+    /**
-     * @param stateMgr         provides persistent item states.
-     * @param pm               the underlying persistence manager.
-     * @param rootId           the id of the root node.
-     * @param parentHandler    the parent query handler or <code>null</code> it
-     *                         there is no parent handler.
-     * @param excludedNodeId   id of the node that should be excluded from
-     *                         indexing. Any descendant of that node is also
-     *                         excluded from indexing.
+     * @param workspace          the workspace name.
+     * @param repositoryContext  the repository context.
+     * @param stateMgr           provides persistent item states.
+     * @param pm                 the underlying persistence manager.
+     * @param rootId             the id of the root node.
+     * @param parentHandler      the parent query handler or <code>null</code> it
+     *                           there is no parent handler.
+     * @param excludedNodeId     id of the node that should be excluded from
+     *                           indexing. Any descendant of that node is also
+     *                           excluded from indexing.
+            String workspace,
+        this.workspace = workspace;
+    /**
+     * Returns the cluster node instance of this repository, or
+     * <code>null</code> if clustering is not enabled.
+     * 
+     * @return cluster node
+     */
+    public ClusterNode getClusterNode() {
+        return repositoryContext.getClusterNode();
+    }
+
+    public String getWorkspace() {
+        return workspace;
+    }

INS26 INS40 INS23 INS31 INS31 INS29 INS83 INS83 INS43 INS59 INS44 INS29 INS83 INS43 INS42 INS8 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS65 INS65 INS43 INS42 INS21 INS65 INS65 INS42 INS41 INS42 INS41 INS66 INS42 INS66 INS42 INS66 UPD66 UPD66 UPD66 UPD66 UPD66 INS42 INS7 INS66 INS66 INS66 INS32 INS42 INS22 INS42 INS42 INS42 INS52 INS42