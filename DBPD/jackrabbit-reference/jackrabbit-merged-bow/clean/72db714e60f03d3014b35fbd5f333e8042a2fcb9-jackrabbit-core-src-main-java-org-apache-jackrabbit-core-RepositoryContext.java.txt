JCR-2640: Internal repository context

Use the RepositoryContext to track the JackrabbitSecurityManager instance.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948866 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.security.JackrabbitSecurityManager;
+     * Security manager of this repository;
+     */
+    private JackrabbitSecurityManager securityManager;
+
+    /**
-    public void setFileSystem(FileSystem fileSystem) {
+    void setFileSystem(FileSystem fileSystem) {
-    public void setDataStore(DataStore dataStore) {
+    void setDataStore(DataStore dataStore) {
-    public void setClusterNode(ClusterNode clusterNode) {
+    void setClusterNode(ClusterNode clusterNode) {
-    public void setWorkspaceManager(WorkspaceManager workspaceManager) {
+    void setWorkspaceManager(WorkspaceManager workspaceManager) {
+    /**
+     * Returns the security manager of this repository.
+     *
+     * @return security manager
+     */
+    public JackrabbitSecurityManager getSecurityManager() {
+        assert securityManager != null;
+        return securityManager;
+    }
+
+    /**
+     * Sets the security manager of this repository.
+     *
+     * @param securityManager security manager
+     */
+    void setSecurityManager(JackrabbitSecurityManager securityManager) {
+        assert securityManager != null;
+        this.securityManager = securityManager;
+    }
+

INS26 INS40 INS23 INS31 INS31 INS29 INS83 INS43 INS59 INS29 INS83 INS43 INS42 INS8 INS29 INS39 INS42 INS44 INS8 INS65 INS42 INS42 INS65 INS65 INS42 INS6 INS41 INS65 INS65 INS43 INS42 INS6 INS21 INS66 INS66 INS66 INS27 INS42 INS66 INS42 INS66 INS42 INS27 INS7 INS42 INS33 INS42 INS33 INS22 INS42 INS52 INS42 DEL83 DEL83 DEL83 DEL83