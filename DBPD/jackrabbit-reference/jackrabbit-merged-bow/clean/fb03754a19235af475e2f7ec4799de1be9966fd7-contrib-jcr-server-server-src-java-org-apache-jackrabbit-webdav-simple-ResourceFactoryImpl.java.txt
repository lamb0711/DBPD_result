[JCR-181] jcr-server should honor a webdav request's Content-Type and Content-Language headers
[JCR-200] move log4j initialization out of RepositoryStartupServlet

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@240176 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Create a new <code>ResourceFactory</code> that uses the given lock manager
+     * and the default {@link DefaultResourceFilter resource filter}.
+     *
+     * @param lockMgr
+     */
+    /**
+     * Create a new <code>ResourceFactory</code> that uses the given lock manager
+     * and resource filter.
+     *
+     * @param lockMgr
+     * @param resourceFilter
+     */
+    /**
+     * Create a new <code>DavResource</code> from the given locator and request.
+     *
+     * @param locator
+     * @param request
+     * @param response
+     * @return
+     * @throws DavException
+     * @see DavResourceFactory#createResource(DavResourceLocator, DavServletRequest, DavServletResponse)
+     */
-        return createResource(locator, request.getDavSession());
+        DavResourceImpl resource = (DavResourceImpl)createResource(locator, request.getDavSession());
+        int methodCode = DavMethods.getMethodCode(request.getMethod());
+        if (methodCode == DavMethods.DAV_MKCOL || methodCode == DavMethods.DAV_PUT || methodCode == DavMethods.DAV_POST) {
+            if (!resource.exists()) {
+                boolean isCollection = DavMethods.getMethodCode(request.getMethod()) == DavMethods.DAV_MKCOL;
+                resource.setIsCollection(isCollection);
+            }
+        }
+        return resource;
+    /**
+     * Create a new <code>DavResource</code> from the given locator and webdav
+     * session.
+     *
+     * @param locator
+     * @param session
+     * @return
+     * @throws DavException
+     * @see DavResourceFactory#createResource(DavResourceLocator, DavSession)
+     */

INS29 INS29 INS29 INS29 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS60 INS60 INS25 INS65 INS65 INS65 INS65 INS65 INS65 INS66 INS66 INS65 INS66 INS42 INS66 INS66 INS42 INS42 INS66 INS42 INS42 INS42 INS42 INS68 INS43 INS59 INS39 INS59 INS27 INS8 INS42 INS66 INS66 INS42 INS42 INS42 INS68 INS42 INS66 INS42 INS42 INS69 INS69 INS69 INS42 INS42 INS11 INS42 INS32 INS27 INS27 INS25 INS42 INS42 INS69 INS69 INS43 INS43 INS43 INS43 MOV32 INS42 INS42 INS32 INS27 INS27 INS42 INS40 INS38 INS8 INS43 INS43 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS40 INS42 INS40 INS32 INS60 INS21 INS42 INS42 INS42 INS42 INS39 INS59 INS32 INS42 INS27 INS42 INS42 INS42 INS32 INS40 INS42 INS42 INS32 INS42 INS42