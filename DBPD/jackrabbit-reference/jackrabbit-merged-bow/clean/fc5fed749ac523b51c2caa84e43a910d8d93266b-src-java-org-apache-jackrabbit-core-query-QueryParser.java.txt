JCR-229: Decouple packages in core.query
- TextPlainTextFilter moved to sub package o.a.j.c.query.lucene
- Introduced interface QueryTreeBuilder that allows to implement arbitrary syntax that can be represented with a QueryNode tree specified in package o.a.j.c.query. XPath and SQL syntax are now implemented via this interface.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@292675 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.query.sql.JCRSQLQueryBuilder;
-import org.apache.jackrabbit.core.query.xpath.XPathQueryBuilder;
-import javax.jcr.query.Query;
-        if (Query.XPATH.equals(language)) {
-            return XPathQueryBuilder.createQuery(statement, resolver);
-        } else if (Query.SQL.equals(language)) {
-            return JCRSQLQueryBuilder.createQuery(statement, resolver);
-        } else {
-            throw new InvalidQueryException("Unsupported language: " + language);
-        }
+        QueryTreeBuilder builder = QueryTreeBuilderRegistry.getQueryTreeBuilder(language);
+        return builder.createQueryTree(statement, resolver);
-        if (Query.XPATH.equals(language)) {
-            return XPathQueryBuilder.toString(root, resolver);
-        } else if (Query.SQL.equals(language)) {
-            return JCRSQLQueryBuilder.toString(root, resolver);
-        } else {
-            throw new InvalidQueryException("Unsupported language: " + language);
-        }
+        QueryTreeBuilder builder = QueryTreeBuilderRegistry.getQueryTreeBuilder(language);
+        return builder.toString(root, resolver);

INS60 MOV41 INS60 MOV41 INS43 INS59 INS43 INS59 INS42 INS42 INS32 UPD42 UPD42 INS42 INS42 INS32 UPD42 UPD42 MOV42 UPD42 MOV42 MOV42 UPD42 MOV42 INS42 MOV42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL41 DEL8 DEL40 DEL42 DEL32 DEL8 DEL42 DEL43 DEL45 DEL42 DEL27 DEL14 DEL53 DEL8 DEL25 DEL25 DEL40 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL40 DEL32 DEL8 DEL42 DEL43 DEL45 DEL42 DEL27 DEL14 DEL53 DEL8 DEL25 DEL25