JCR-442: Committed patch-060808-backup.txt from Nicolas.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@429606 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.zip.ZipException;
- * 
+ *
-     * @throws RepositoryException 
-     * @throws LoginException 
+     * @param login
+     * @param password
+     * @throws RepositoryException
+     * @throws LoginException
-    public BackupConfigurationBackup(RepositoryImpl repo, BackupConfig conf) throws LoginException, RepositoryException {
-        super(repo, conf);
-        
+    public BackupConfigurationBackup(RepositoryImpl repo, BackupConfig conf, String login, String password) 
+                                                                throws LoginException, RepositoryException {
+        super(repo, conf, login, password);
+
-    
-    public BackupConfigurationBackup() {
+
+    protected BackupConfigurationBackup() {
-    
-   
+
-        File file = conf.getFile();
+        File file = this.getConf().getFile();
+     * This method is quite special. It is used to restore content from scratch. To break cyclic reference, we restore the file
+     * in the current directory (we don't have yet the temporary one).
+     *
-    public void restore(BackupIOHandler h) {
-        // TODO Auto-generated method stub
-
+    public void restore(BackupIOHandler h) throws ZipException, IOException {
+        File conf = new File("backup.xml");
+        h.read("backup.xml", conf);
-

INS26 INS40 INS44 INS44 UPD83 INS43 INS43 INS65 INS65 INS43 INS42 INS43 INS42 INS42 INS42 INS60 INS21 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS59 INS32 INS42 INS42 INS14 INS42 INS42 INS45 INS42 INS32 INS43 INS45 INS52 UPD42 MOV42 INS42 DEL66 DEL66