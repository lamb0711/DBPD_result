minor improvement

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1096756 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.commons.conversion.NameResolver;
-
-                ACLEventSieve sieve = new ACLEventSieve(session);
+                ACLEventSieve sieve = new ACLEventSieve(session, (NameResolver) session);
-                AccessControlModifications<NodeId> mods =
-                    sieve.getModifications();
+                AccessControlModifications<NodeId> mods = sieve.getModifications();
+    //--------------------------------------------------------< inner class >---
-        private final Map<NodeId, Integer> modMap =
-            new HashMap<NodeId,Integer>();
+        private final Map<NodeId, Integer> modMap = new HashMap<NodeId,Integer>();
-        public ACLEventSieve(Session session) throws RepositoryException {
+        private ACLEventSieve(Session session, NameResolver resolver) throws RepositoryException {
-            Name repPolicy = AccessControlConstants.N_POLICY;
-            this.repPolicyName =
-                session.getNamespacePrefix(repPolicy.getNamespaceURI())
-                + ":" + repPolicy.getLocalName();
+            this.repPolicyName = resolver.getJCRName(AccessControlConstants.N_POLICY);
-        public void siftEvents(EventIterator events) {
+        private void siftEvents(EventIterator events) {
-        public AccessControlModifications<NodeId> getModifications() {
+        private AccessControlModifications<NodeId> getModifications() {
-        private void siftNodeAdded(String identifier)
-                throws RepositoryException {
+        private void siftNodeAdded(String identifier) throws RepositoryException {
-                log.debug("Cannot process NODE_REMOVED event."
-                        + " Parent {} doesn't exist (anymore).",
-                        parentPath);
+                log.debug("Cannot process NODE_REMOVED event. Parent {} doesn't exist (anymore).", parentPath);
-        private void siftPropertyChanged(String identifier)
-                throws RepositoryException {
+        private void siftPropertyChanged(String identifier) throws RepositoryException {
-        private NodeId accessControlledIdFromAclNode(Node aclNode)
-                throws RepositoryException {
+        private NodeId accessControlledIdFromAclNode(Node aclNode) throws RepositoryException {
-        private NodeId accessControlledIdFromAceNode(Node aceNode)
-                throws RepositoryException {
+        private NodeId accessControlledIdFromAceNode(Node aceNode) throws RepositoryException {
-
-

UPD40 UPD83 INS44 INS8 UPD83 UPD83 INS43 INS42 MOV21 MOV21 UPD42 MOV42 INS32 UPD42 MOV42 UPD42 MOV42 INS40 INS45 INS11 INS43 INS42 INS42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL45 DEL32 DEL27 DEL43 DEL42 DEL40 DEL59 DEL60 DEL8 DEL45 DEL45 DEL27