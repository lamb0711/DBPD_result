JCR-2722: Add a filtered RangeIterator

Add convenience constructors to allow the use of predicates with all the RangeIteratorAdapter subclasses.

Use generics in declarations.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@988147 13f79535-47bb-0310-9956-ffa450edef68

+     * Adapts the given iterator into a range iterator. The given
+     * instance is returned as-is if it already implements the
+     * {@link RangeIterator} interface. Otherwise the iterator is
+     * wrapped into a {@link RangeIteratorAdapter} instance.
+     * 
+     * @param iterator iterator to adapt
+     * @return adapted iterator
+     */
+    public static RangeIterator adapt(Iterator<?> iterator) {
+        if (iterator instanceof RangeIterator) {
+            return (RangeIterator) iterator;
+        } else {
+            return new RangeIteratorAdapter(iterator, -1);
+        }
+    }
+
+    /**
-    private final Iterator iterator;
+    private final Iterator<?> iterator;
-    public RangeIteratorAdapter(Iterator iterator, long size) {
+    public RangeIteratorAdapter(Iterator<?> iterator, long size) {
-    public RangeIteratorAdapter(Iterator iterator) {
+    public RangeIteratorAdapter(Iterator<?> iterator) {
-    public RangeIteratorAdapter(Collection collection) {
+    public RangeIteratorAdapter(Collection<?> collection) {

INS31 INS29 INS83 INS83 INS43 INS42 MOV44 INS8 INS74 INS44 INS65 INS65 INS65 INS42 INS74 INS25 MOV43 INS76 INS74 INS42 INS74 INS74 INS66 INS66 INS65 INS66 INS66 INS65 INS66 INS42 INS66 INS66 MOV43 INS76 INS62 INS8 INS8 MOV43 INS76 INS43 INS76 MOV43 INS76 INS42 INS42 INS42 INS43 INS41 INS41 INS42 MOV42 INS42 INS11 INS14 INS43 INS42 INS43 INS42 INS38 INS42 INS42 INS34