[JCR-127] Speedup Startup
          Removing one layer in versioning, thus mapping virtual items
          directly from the peristence layer.


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@191172 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.state.ItemStateManager;
-import java.util.Iterator;
-import java.util.List;
+
-     * @param base
-    VirtualItemStateProvider getVirtualItemStateProvider(ItemStateManager base);
+    VirtualItemStateProvider getVirtualItemStateProvider();
-    VersionHistory createVersionHistory(Session session, NodeState node) throws RepositoryException;
+    VersionHistory createVersionHistory(Session session, NodeState node)
+            throws RepositoryException;
-    Version setVersionLabel(VersionHistory history, QName version, QName label, boolean move)
+    Version setVersionLabel(VersionHistory history, QName version, QName label,
+                            boolean move)
-    //-----------------------------------------------------< internal stuff >---
-
-    InternalVersionHistory getVersionHistory(String id) throws RepositoryException;
-
-    /**
-     * Returns the number of version histories
-     *
-     * @return
-     * @throws RepositoryException
-     */
-    int getNumVersionHistories() throws RepositoryException;
-
-    /**
-     * Returns an iterator over all ids of {@link InternalVersionHistory}s.
-     *
-     * @return
-     * @throws RepositoryException
-     */
-    Iterator getVersionHistoryIds() throws RepositoryException;
+    InternalVersionHistory getVersionHistory(String id)
+            throws RepositoryException;
-     * checks, if the node with the given id exists
-     * todo: move probably to VersionManagerImpl
-     *
-     * @param id
-     * @return
-     */
-    boolean hasItem(String id);
-
-    /**
-     * Returns the version item with the given id
-     * todo: move probably to VersionManagerImpl
-     *
-     * @param id
-     * @return
-     * @throws RepositoryException
-     */
-    InternalVersionItem getItem(String id) throws RepositoryException;
-
-    /**
-     * Returns the references that exist to this version item
-     * todo: move probably to VersionManagerImpl
-     *
-     * @param item
-     * @return a collection of property ids
-     */
-    List getItemReferences(InternalVersionItem item);
-
-    /**
-     * Informs this version manager that the references to one of its
-     * items has changed.
-     * todo: move probably to VersionManagerImpl
-     *
-     * @param item the version item that is referenced
-     * @param references the collection of PropertyIds that references the item
-     */
-    void setItemReferences(InternalVersionItem item, List references);
-
-    /**

DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL42 DEL65 DEL42 DEL43 DEL42 DEL44 DEL66 DEL65 DEL65 DEL42 DEL65 DEL29 DEL39 DEL42 DEL42 DEL43 DEL31 DEL66 DEL42 DEL65 DEL66 DEL65 DEL65 DEL42 DEL65 DEL29 DEL42 DEL43 DEL42 DEL42 DEL43 DEL31 DEL66 DEL66 DEL65 DEL42 DEL65 DEL65 DEL29 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL31 DEL66 DEL66 DEL65 DEL42 DEL65 DEL65 DEL42 DEL65 DEL29 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL31 DEL66 DEL66 DEL65 DEL42 DEL65 DEL66 DEL65 DEL29 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL44 DEL31 DEL66 DEL66 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL29 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL31