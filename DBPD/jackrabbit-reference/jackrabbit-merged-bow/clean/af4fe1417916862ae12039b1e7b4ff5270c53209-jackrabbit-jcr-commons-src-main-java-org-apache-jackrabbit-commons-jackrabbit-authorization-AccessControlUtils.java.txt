OAK-51 : Implement JCR Access Control Management: Add more utility methods to AccessControlUtils

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1434806 13f79535-47bb-0310-9956-ffa450edef68

+        return getAccessControlList(acMgr, absPath);
+    }
+    /**
+     * Utility that combines {@link AccessControlManager#getApplicablePolicies(String)}
+     * and {@link AccessControlManager#getPolicies(String)} to retrieve
+     * a modifiable {@code JackrabbitAccessControlList} for the given path.<br>
+     *
+     * Note that the policy must be {@link AccessControlManager#setPolicy(String,
+     * javax.jcr.security.AccessControlPolicy) reapplied}
+     * and the changes must be saved in order to make the AC modifications take
+     * effect.
+     *
+     * @param accessControlManager The {@code AccessControlManager} .
+     * @param absPath The absolute path of the target node.
+     * @return A modifiable access control list or null if there is none.
+     * @throws RepositoryException If an error occurs.
+     */
+    public static JackrabbitAccessControlList getAccessControlList(AccessControlManager accessControlManager, String absPath) throws RepositoryException {
-        AccessControlPolicyIterator itr = acMgr.getApplicablePolicies(absPath);
+        AccessControlPolicyIterator itr = accessControlManager.getApplicablePolicies(absPath);
-        AccessControlPolicy[] pcls = acMgr.getPolicies(absPath);
+        AccessControlPolicy[] pcls = accessControlManager.getPolicies(absPath);

INS31 INS8 INS29 INS83 INS83 INS43 INS42 INS44 INS44 INS43 MOV8 MOV60 INS41 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS43 INS42 INS42 INS32 INS66 INS65 INS66 INS65 INS66 INS66 INS65 INS66 INS66 INS65 INS66 INS66 INS42 INS66 INS65 INS66 INS42 INS66 INS66 INS42 INS66 INS42 INS42 INS42 INS42 INS42 INS68 INS68 INS66 INS68 INS66 INS66 INS42 INS42 INS69 INS42 INS42 INS69 INS42 INS42 INS69 INS69 UPD42 UPD42 INS43 INS43 INS43 INS43 INS42 INS42 INS42 INS40