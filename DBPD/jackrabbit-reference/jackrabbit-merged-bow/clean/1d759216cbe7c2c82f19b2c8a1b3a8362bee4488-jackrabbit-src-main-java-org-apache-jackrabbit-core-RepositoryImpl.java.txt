JCR-351: Better handling of null Credentials when JAAS is not configured.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@386415 13f79535-47bb-0310-9956-ffa450edef68

-            // null credentials, obtain the identity of the already-authenticated
-            // subject from access control context
-            AccessControlContext acc = AccessController.getContext();
-            Subject subject;
-                subject = Subject.getSubject(acc);
+                // null credentials, obtain the identity of the already-authenticated
+                // subject from access control context
+                AccessControlContext acc = AccessController.getContext();
+                Subject subject = Subject.getSubject(acc);
+                if (subject != null) {
+                    return createSession(subject, workspaceName);
+                }
-            }
-            if (subject == null) {
-                throw new LoginException("No Subject associated with AccessControlContext");
-            }
-            // create session
-            try {
-                return createSession(subject, workspaceName);
-            throw new LoginException(le.getMessage());
+            throw new LoginException(le.getMessage(), le);

INS8 MOV12 MOV60 INS60 INS25 MOV43 INS59 INS27 MOV8 INS42 INS42 MOV32 INS42 INS33 DEL42 DEL59 DEL60 DEL42 DEL7 DEL21 DEL8 DEL54 DEL42 DEL33 DEL27 DEL42 DEL43 DEL45 DEL14 DEL53 DEL8 DEL25