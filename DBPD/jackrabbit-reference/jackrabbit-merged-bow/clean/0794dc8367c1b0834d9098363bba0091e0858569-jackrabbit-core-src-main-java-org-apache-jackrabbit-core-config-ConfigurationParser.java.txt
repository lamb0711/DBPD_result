JCR-1462 log a warning when repository.xml can not be validated (but not for workspace.xml)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@640884 13f79535-47bb-0310-9956-ffa450edef68

+     * This implementation does not validate the XML.
+        return parseXML(xml, false);
+    }
+
+    /**
+     * Parses the given XML document and returns the DOM root element.
+     * A custom entity resolver is used to make the included configuration
+     * file DTD available using the specified public identifiers.
+     *
+     * @see ConfigurationEntityResolver
+     * @param xml xml document
+     * @param validate wheter the XML should be validated
+     * @return root element
+     * @throws ConfigurationException if the configuration document could
+     *                                not be read or parsed
+     */
+    protected Element parseXML(InputSource xml, boolean validate) throws ConfigurationException {
-            factory.setValidating(true);
+            factory.setValidating(validate);
-            builder.setErrorHandler(new ConfigurationErrorHandler());
+            if (validate) {
+                builder.setErrorHandler(new ConfigurationErrorHandler());
+            }

INS31 INS29 INS83 INS43 INS42 INS44 INS43 INS8 INS44 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS42 INS41 INS65 INS39 INS42 INS66 INS66 INS66 INS66 INS42 INS42 INS66 INS66 INS42 INS66 INS66 INS42 INS32 INS42 INS66 INS42 INS42 INS9 INS25 INS42 INS8 INS42 MOV21 DEL9