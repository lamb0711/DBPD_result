JCR-1872: Improve performance of simple path queries

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@719592 13f79535-47bb-0310-9956-ffa450edef68

+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+     * The logger instance for this class.
+     */
+    private static final Logger log = LoggerFactory.getLogger(DescendantSelfAxisQuery.class);
+
+    /**
-     * Always returns 'DescendantSelfAxisQuery'.
-     *
-     * @param field the name of a field.
-     * @return 'DescendantSelfAxisQuery'.
+     * {@inheritDoc}
-        return "DescendantSelfAxisQuery";
+        StringBuffer sb = new StringBuffer();
+        sb.append("DescendantSelfAxisQuery(");
+        sb.append(contextQuery);
+        sb.append(", ");
+        sb.append(subQuery);
+        sb.append(", ");
+        sb.append(minLevels);
+        sb.append(")");
+        return sb.toString();
+                long time = System.currentTimeMillis();
+                time = System.currentTimeMillis() - time;
+                if (log.isDebugEnabled()) {
+                    log.debug("Collected {} context hits in {} ms for {}",
+                            new Object[]{
+                                    new Integer(contextHits.cardinality()),
+                                    new Long(time),
+                                    DescendantSelfAxisQuery.this
+                            });
+                }

INS26 INS26 INS40 INS40 INS23 INS31 INS29 INS83 INS83 INS83 INS43 INS59 INS29 MOV83 MOV43 MOV42 MOV44 MOV8 MOV65 INS42 INS42 INS32 INS65 INS60 INS21 INS21 INS21 INS21 INS21 INS21 INS21 INS41 UPD66 INS42 INS42 INS57 INS65 INS43 INS59 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS43 INS42 INS42 INS14 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS42 INS42 INS43 INS60 INS21 INS25 INS42 INS39 INS59 INS7 INS32 INS8 INS42 INS32 INS42 INS27 INS42 INS42 INS21 INS42 INS42 INS32 INS42 INS32 INS42 INS42 INS42 INS42 INS45 INS3 INS5 INS4 INS43 INS85 INS14 INS14 INS52 INS42 INS43 INS32 INS43 INS42 INS42 INS42 INS42 INS42 INS42 DEL45 DEL41 DEL42 DEL66 DEL65 DEL66 DEL65 DEL29 DEL31