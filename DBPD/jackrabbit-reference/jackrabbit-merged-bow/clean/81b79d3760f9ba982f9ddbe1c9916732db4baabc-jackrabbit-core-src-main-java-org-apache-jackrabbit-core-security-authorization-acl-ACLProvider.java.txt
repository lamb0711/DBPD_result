 JCR-1588: JSR 283: Access Control

- minor improvement, javadoc, java 5, tests


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@792160 13f79535-47bb-0310-9956-ffa450edef68

-    public CompiledPermissions compilePermissions(Set principals) throws RepositoryException {
+    public CompiledPermissions compilePermissions(Set<Principal> principals) throws RepositoryException {
-    public boolean canAccessRoot(Set principals) throws RepositoryException {
+    public boolean canAccessRoot(Set<Principal> principals) throws RepositoryException {
-        private AclPermissions(Set principals) throws RepositoryException {
+        private AclPermissions(Set<Principal> principals) throws RepositoryException {
-        private AclPermissions(Set principals, boolean listenToEvents) throws RepositoryException {
+        private AclPermissions(Set<Principal> principals, boolean listenToEvents) throws RepositoryException {
-            for (Iterator it = principals.iterator(); it.hasNext();) {
-                principalNames.add(((Principal) it.next()).getName());
+            for (Principal princ : principals) {
+                principalNames.add(princ.getName());
+         * @return true if read is allowed everywhere.
-        private boolean isReadAllowed(Collection principalnames) {
+        private boolean isReadAllowed(Collection<String> principalnames) {
-            while (entries.hasNext() && allows != privAll) {
+            while (entries.hasNext()) {
+    //--------------------------------------------------------------------------
+    /**
+     * Inner class used to collect ACEs for a given set of principals throughout
+     * the node hierarchy.
+     */

INS29 INS74 INS74 INS65 MOV43 INS43 MOV43 INS43 INS74 INS74 INS70 INS65 INS74 INS66 INS66 INS42 INS42 MOV43 INS43 MOV43 INS43 INS44 INS42 INS8 INS66 MOV43 INS43 MOV32 INS42 INS42 MOV43 INS42 MOV21 INS42 UPD42 MOV42 DEL42 DEL32 DEL11 DEL36 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL58 DEL42 DEL42 DEL32 DEL8 DEL24 DEL42 DEL42 DEL27 DEL27