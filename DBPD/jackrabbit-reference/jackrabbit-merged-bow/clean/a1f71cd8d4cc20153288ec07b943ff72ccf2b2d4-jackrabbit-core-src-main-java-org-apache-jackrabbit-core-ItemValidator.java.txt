JCR-2714: Selective disabling of checks in ItemValidator

Remove the public SessionImpl.getValidator() method to prevent client code from using the ItemValidator.performRelaxed() method.

Renamed s/sessionContext/context/ in a few cases where there's no ambiguity

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@985218 13f79535-47bb-0310-9956-ffa450edef68

-    protected final SessionContext sessionContext;
+    protected final SessionContext context;
-     * @param sessionContext component context of this session
+     * @param context component context of this session
-    public ItemValidator(SessionContext sessionContext) throws RepositoryException {
-        this.sessionContext = sessionContext;
-        this.ntReg = sessionContext.getRepositoryContext().getNodeTypeRegistry();
+    public ItemValidator(SessionContext context) throws RepositoryException {
+        this.context = context;
+        this.ntReg = context.getRepositoryContext().getNodeTypeRegistry();
-            return operation.perform(sessionContext);
+            return operation.perform(context);
-            sessionContext.getItemManager().getDefinition(nodeState).unwrap();
+            context.getItemManager().getDefinition(nodeState).unwrap();
-            sessionContext.getItemManager().getDefinition(propState).unwrap();
+            context.getItemManager().getDefinition(propState).unwrap();
-            sessionContext.getAccessManager().checkPermission(path, permissions);
+            context.getAccessManager().checkPermission(path, permissions);
-            if (!sessionContext.getAccessManager().isGranted(path, permissions)) {
+            if (!context.getAccessManager().isGranted(path, permissions)) {
-        sessionContext.getSessionImpl().getLockManager().checkLock(node);
+        context.getSessionImpl().getLockManager().checkLock(node);
-        return sessionContext.getSessionImpl().getRetentionRegistry().hasEffectiveHold(path, checkParent);
+        return context.getSessionImpl().getRetentionRegistry().hasEffectiveHold(path, checkParent);
-        return sessionContext.getSessionImpl().getRetentionRegistry().hasEffectiveRetention(path, checkParent);
+        return context.getSessionImpl().getRetentionRegistry().hasEffectiveRetention(path, checkParent);
-            return sessionContext.getJCRPath(path);
+            return context.getJCRPath(path);
-                    sessionContext.getHierarchyManager().getPath(id));
+                    context.getHierarchyManager().getPath(id));

UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42