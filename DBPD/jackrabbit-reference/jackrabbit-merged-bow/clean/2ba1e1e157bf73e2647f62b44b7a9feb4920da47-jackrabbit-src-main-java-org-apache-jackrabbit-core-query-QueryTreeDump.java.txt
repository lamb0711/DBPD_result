JCR-386: Query dump failed with deep query tree

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@391564 13f79535-47bb-0310-9956-ffa450edef68

-    /** Current indentation level */
+    /**
+     * Current indentation level
+     */
-    /** Padding array filled with spaces */
-    private static final char[] PADDING = new char[255];
+    /**
+     * Padding array filled with spaces
+     */
+    private static char[] PADDING = new char[255];
+
+    /**
+     * The padding character: whitespace.
+     */
+    private static final char PADDING_CHAR = ' ';
-        Arrays.fill(PADDING, ' ');
+        Arrays.fill(PADDING, PADDING_CHAR);
+        if (indent > PADDING.length) {
+            char[] tmp = new char[indent * 2];
+            Arrays.fill(tmp, PADDING_CHAR);
+            PADDING = tmp;
+        }

INS23 INS29 INS83 INS83 INS83 INS39 INS59 INS65 INS42 INS13 INS25 UPD66 UPD66 INS66 INS27 INS8 INS42 INS42 INS40 INS60 INS21 INS21 INS5 INS59 INS32 INS7 INS39 INS85 INS42 INS3 INS42 INS42 INS42 INS42 INS42 INS42 INS5 INS27 INS39 INS85 INS42 INS34 DEL83 DEL13