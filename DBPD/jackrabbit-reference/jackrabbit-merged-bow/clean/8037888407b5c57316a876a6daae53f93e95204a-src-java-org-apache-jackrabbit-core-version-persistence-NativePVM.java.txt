- fixing JCR-41 (warn messages during checkin/checkout)

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@153406 13f79535-47bb-0310-9956-ffa450edef68

-    private NativeItemStateManager stateMgr;
+    private LocalItemStateManager stateMgr;
+
+    /**
+     * the persistence manager
+     */
+    private PersistenceManager pMgr;
-            this.stateMgr = new NativeItemStateManager(pMgr, PERSISTENT_ROOT_ID.getUUID(), ntReg);
+            //this.stateMgr = new NativeItemStateManager(pMgr, PERSISTENT_ROOT_ID.getUUID(), ntReg);
+            this.pMgr = pMgr;
+            SharedItemStateManager sharedStateMgr = new SharedItemStateManager(pMgr, PERSISTENT_ROOT_ID.getUUID(), ntReg);
+            stateMgr = new LocalItemStateManager(sharedStateMgr);
-        this.stateMgr.persistMgr.close();
+        this.pMgr.close();
-                PropertyState ps = stateMgr.getPropertyState(new PropertyId(state.getUUID(), PROPNAME_VERSIONABLE_ID));
+                PropertyState ps = (PropertyState) stateMgr.getItemState(new PropertyId(state.getUUID(), PROPNAME_VERSIONABLE_ID));

INS23 UPD43 INS29 INS83 INS43 INS59 UPD42 INS65 INS42 INS42 INS66 INS21 INS60 INS21 INS7 INS43 INS59 INS7 MOV52 UPD42 MOV22 INS42 INS42 INS42 INS14 INS42 INS14 UPD42 UPD43 MOV43 MOV42 MOV32 MOV42 INS43 INS42 INS43 UPD42 INS42 INS42 INS11 MOV43 MOV32 UPD42 DEL14 DEL7 DEL21 DEL42 DEL22