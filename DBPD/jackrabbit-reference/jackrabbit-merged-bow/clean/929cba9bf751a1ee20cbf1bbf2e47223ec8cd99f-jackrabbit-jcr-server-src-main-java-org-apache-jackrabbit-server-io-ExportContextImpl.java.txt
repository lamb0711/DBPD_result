JCR-3942: Content-Length header field may be set twice

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1877355 13f79535-47bb-0310-9956-ffa450edef68

-                boolean hasContentLength = false;
-                for (String name : properties.keySet()) {
-                    String value = properties.get(name);
+                boolean seenContentLength = false;
+                for (Map.Entry<String, String> entry : properties.entrySet()) {
+                    String name = entry.getKey();
+                    String value = entry.getValue();
-                        // check for content-length
-                        hasContentLength = DavConstants.HEADER_CONTENT_LENGTH.equals(name);
+                        seenContentLength |= DavConstants.HEADER_CONTENT_LENGTH.equals(name);
-                        if (!hasContentLength) {
+                        if (!seenContentLength) {

UPD42 INS74 INS42 UPD42 INS60 INS43 INS43 INS43 MOV43 INS59 MOV43 INS40 INS42 INS42 INS42 INS32 INS42 INS42 UPD42 UPD42 UPD7 UPD42 UPD42 DEL42 DEL42