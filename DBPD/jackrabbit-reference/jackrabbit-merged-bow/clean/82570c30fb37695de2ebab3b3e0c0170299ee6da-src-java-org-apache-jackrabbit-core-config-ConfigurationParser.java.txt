Add LoginModule configuration in repository.xml. This allows the use of Jackrabbit in environments where JAAS is not set up.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@162072 13f79535-47bb-0310-9956-ffa450edef68

+    /** Name of the login module configuration element. */
+    private static final String LOGIN_MODULE_ELEMENT = "LoginModule";
+
+     *       &lt;LoginModule ... (optional)&gt;
+        // Optional login module
+        Element loginModule = getElement(security, LOGIN_MODULE_ELEMENT, false);
+        
+        LoginModuleConfig lmc = null;
+        if (loginModule != null) {
+            lmc = new LoginModuleConfig(parseBeanConfig(security, LOGIN_MODULE_ELEMENT));
+        }
+        
-        return new RepositoryConfig(home, appName, amc, fsc,
+        return new RepositoryConfig(home, appName, amc, lmc, fsc,
+     * @throws ConfigurationException 
-    private Element getElement(Element parent, String name)
+    private Element getElement(Element parent, String name) throws ConfigurationException {
+        return getElement(parent, name, true);
+    }
+
+    /**
+     * Returns the named child of the given parent element.
+     *
+     * @param parent parent element
+     * @param name name of the child element
+     * @param required indicates if the child element is required
+     * @return named child element, or <code>null</code> if not found and
+     *         <code>required</code> is <code>false</code>.
+     * @throws ConfigurationException if the child element is not found and
+     *         <code>required</code> is <code>true</code>.
+     */
+    private Element getElement(Element parent, String name, boolean required)
-        throw new ConfigurationException(
-                "Configuration element " + name + " not found in "
-                + parent.getNodeName() + ".");
+        if (required) {
+            throw new ConfigurationException(
+                    "Configuration element " + name + " not found in "
+                    + parent.getNodeName() + ".");
+        } else {
+            return null;
+        }

INS23 INS31 INS29 INS83 INS83 INS83 INS43 INS59 MOV29 INS83 INS43 INS42 INS44 INS44 INS43 INS8 INS29 INS44 INS65 INS42 INS42 INS45 INS60 INS60 INS25 INS65 INS42 INS43 INS42 INS43 INS42 INS42 INS41 INS65 INS65 INS65 INS65 INS65 INS65 INS39 INS42 INS25 INS66 INS66 INS43 INS59 INS43 INS59 INS27 INS8 INS42 INS66 INS42 INS42 INS32 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS66 INS66 INS42 INS66 INS66 INS42 INS8 INS8 INS42 INS42 INS32 INS42 INS42 INS33 INS42 INS33 INS21 INS42 INS42 INS42 INS42 INS9 MOV53 INS41 INS42 INS42 INS42 INS9 INS7 INS33 INS42 INS14 INS43 INS32 INS42 INS42 INS42 INS42