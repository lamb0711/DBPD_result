JCR-1609:  new Property Types (WIP...)




git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@779228 13f79535-47bb-0310-9956-ffa450edef68

-                // @todo check REFERENCE value constraint (requires a session)
+            case PropertyType.WEAKREFERENCE:
+                // @todo check [WEAK]REFERENCE value constraint (requires a session)
+                if (value.getType() == PropertyType.WEAKREFERENCE && !session.itemExists(new NodeId(targetUUID))) {
+                    return;
+                }
-                log.info("validation of REFERENCE constraint is not yet implemented");
+                log.info("validation of [WEAK]REFERENCE constraint is not yet implemented");
-                String msg = "REFERENCE constraint can not be applied to value of type: "
+                String msg = "[WEAK]REFERENCE constraint can not be applied to value of type: "

INS49 INS40 UPD45 UPD45