JCR-1423:  [PATCH] fix clone implementation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@631547 13f79535-47bb-0310-9956-ffa450edef68

-        EffectiveNodeType clone = new EffectiveNodeType();
+        try {
+            EffectiveNodeType clone = (EffectiveNodeType) super.clone();
-        clone.mergedNodeTypes.addAll(mergedNodeTypes);
-        clone.inheritedNodeTypes.addAll(inheritedNodeTypes);
-        clone.allNodeTypes.addAll(allNodeTypes);
-        Iterator iter = namedItemDefs.keySet().iterator();
-        while (iter.hasNext()) {
-            Object key = iter.next();
-            List list = (List) namedItemDefs.get(key);
-            clone.namedItemDefs.put(key, new ArrayList(list));
+            clone.mergedNodeTypes.addAll(mergedNodeTypes);
+            clone.inheritedNodeTypes.addAll(inheritedNodeTypes);
+            clone.allNodeTypes.addAll(allNodeTypes);
+            Iterator iter = namedItemDefs.keySet().iterator();
+            while (iter.hasNext()) {
+                Object key = iter.next();
+                List list = (List) namedItemDefs.get(key);
+                clone.namedItemDefs.put(key, new ArrayList(list));
+            }
+            clone.unnamedItemDefs.addAll(unnamedItemDefs);
+
+            return clone;
+        } catch (CloneNotSupportedException e) {
+            // won't happen
+            throw new InternalError("Failed to clone EffectiveNodeType object");
-        clone.unnamedItemDefs.addAll(unnamedItemDefs);
-
-        return clone;

INS8 INS54 MOV8 INS12 INS44 INS8 INS43 INS42 INS53 INS11 INS42 INS14 MOV43 INS48 INS43 INS45 INS42 INS42 DEL14