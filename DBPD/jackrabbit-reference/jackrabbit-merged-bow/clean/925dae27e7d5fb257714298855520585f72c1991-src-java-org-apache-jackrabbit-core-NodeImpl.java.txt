- fixed value constraint handling as spec'ed
- misc. minor fixes

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@109221 13f79535-47bb-0310-9956-ffa450edef68

-            if (p.getAncestorCount() > 0) {
+            // p must be a relative path of length==depth==1 (to eliminate e.g. "..")
+            if (p.isAbsolute() || p.getLength() != 1 || p.getDepth() != 1) {
-                if (p.getAncestorCount() > 0) {
+                // p must be a relative path of length==depth==1 (to eliminate e.g. "..")
+                if (p.isAbsolute() || p.getLength() != 1 || p.getDepth() != 1) {

INS27 INS27 INS27 INS32 INS27 MOV32 UPD34 MOV34 INS27 INS42 INS42 INS32 INS34 UPD42 INS27 INS27 INS42 INS42 INS32 INS27 MOV32 UPD34 MOV34 INS42 INS42 INS32 INS34 UPD42 INS42 INS42 DEL27 DEL27