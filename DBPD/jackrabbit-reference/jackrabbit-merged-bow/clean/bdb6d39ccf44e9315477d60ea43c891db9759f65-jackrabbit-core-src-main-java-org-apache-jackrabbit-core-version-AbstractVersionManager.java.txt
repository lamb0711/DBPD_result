JCR-1481: VersionHistory.removeVersion() does not throw ReferentialIntegrityException

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@638430 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.List;
-
-     * Returns the item references that reference the given version item.
-     * Subclass responsiblity.
+     * Checks if there are item references (from outside the version storage)
+     * that reference the given version item. Subclass responsiblity.
-     * @return list of item references, may be empty.
+     * @return <code>true</code> if there are item references from outside the
+     *         version storage; <code>false</code> otherwise.
+     * @throws RepositoryException if an error occurs while reading from the
+     *                             repository.
-    protected abstract List getItemReferences(InternalVersionItem item);
+    protected abstract boolean hasItemReferences(InternalVersionItem item)
+            throws RepositoryException;

MOV43 INS39 INS42 UPD43 INS65 UPD42 UPD66 UPD66 UPD66 INS66 INS42 INS66 INS66 DEL40 DEL26 DEL42