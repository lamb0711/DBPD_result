JCR-1159 SPI: improve description of locking methods on RepositoryService

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@582815 13f79535-47bb-0310-9956-ffa450edef68

-        LockInfo lockInfo;
-        try {
-            lockInfo = wspManager.getLockInfo(nId);
-        } catch (LockException e) {
+        LockInfo lockInfo = wspManager.getLockInfo(nId);
+        if (lockInfo == null) {
-     * @throws LockException
-    private void notifyTokenAdded(String lt) throws LockException, RepositoryException {
+    private void notifyTokenAdded(String lt) throws RepositoryException {
-     * @throws LockException
-    private void notifyTokenRemoved(String lt) throws LockException, RepositoryException {
+    private void notifyTokenRemoved(String lt) throws RepositoryException {
-         * @throws LockException
-        private void reloadLockInfo() throws LockException, RepositoryException {
+        private void reloadLockInfo() throws RepositoryException {
+            if (lockInfo == null) {
+                // lock has been released on the server
+                unlocked();
+            }
-         * @throws LockException
-        public void lockTokenAdded(String lockToken) throws LockException, RepositoryException {
+        public void lockTokenAdded(String lockToken) throws RepositoryException {
-         * @throws RepositoryException
-        public void lockTokenRemoved(String lockToken) throws LockException, RepositoryException {
+        public void lockTokenRemoved(String lockToken) throws RepositoryException {
-                } catch (LockException e) {
-                    lockState.unlocked();
-        void lockTokenAdded(String lockToken) throws LockException, RepositoryException;
+        void lockTokenAdded(String lockToken) throws RepositoryException;
-        void lockTokenRemoved(String lockToken) throws LockException, RepositoryException;
+        void lockTokenRemoved(String lockToken) throws RepositoryException;

MOV31 INS60 INS25 UPD42 UPD42 MOV43 INS59 INS27 MOV8 INS25 MOV42 INS32 INS42 INS33 INS27 INS8 MOV42 MOV42 MOV42 INS42 INS33 INS21 INS32 INS42 DEL59 DEL60 DEL42 DEL32 DEL7 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL12 DEL54 DEL42 DEL65 DEL42 DEL43 DEL42 DEL65 DEL42 DEL43 DEL42 DEL65 DEL42 DEL43 DEL42 DEL65 DEL42 DEL43 DEL42 DEL65 DEL42 DEL43 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL32 DEL21 DEL8 DEL12 DEL42 DEL43 DEL42 DEL43