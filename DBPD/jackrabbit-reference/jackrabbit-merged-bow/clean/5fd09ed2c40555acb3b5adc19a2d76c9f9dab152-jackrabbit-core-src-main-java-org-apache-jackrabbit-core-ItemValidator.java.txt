JCR-688: Use PathResolver instead of NamespaceResolver in ItemValidator.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@498015 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
+import org.apache.jackrabbit.name.PathResolver;
-import org.apache.jackrabbit.name.PathFormat;
+import javax.jcr.NamespaceException;
+
-     * namespace resolver used for generating error msg's
-     * that contain human readable paths
-     *
-     * @see #safeGetJCRPath(Path)
+     * Path resolver for outputting user-friendly error messages.
-    protected final NamespaceResolver nsResolver;
+    protected final PathResolver resolver;
-                         NamespaceResolver nsResolver) {
+                         PathResolver resolver) {
-        this.nsResolver = nsResolver;
+        this.resolver = resolver;
-            return PathFormat.format(path, nsResolver);
-        } catch (NoPrefixDeclaredException npde) {
-            log.error("failed to convert " + path.toString() + " to JCR path.");
+            return resolver.getJCRPath(path);
+        } catch (NamespaceException e) {
+            log.error("failed to convert {} to a JCR path", path);

MOV26 MOV26 UPD40 UPD40 UPD43 UPD42 UPD42 UPD43 UPD42 UPD66 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 INS45 MOV42 DEL40 DEL26 DEL66 DEL42 DEL42 DEL43 DEL69 DEL68 DEL65 DEL42 DEL45 DEL42 DEL32 DEL45 DEL27