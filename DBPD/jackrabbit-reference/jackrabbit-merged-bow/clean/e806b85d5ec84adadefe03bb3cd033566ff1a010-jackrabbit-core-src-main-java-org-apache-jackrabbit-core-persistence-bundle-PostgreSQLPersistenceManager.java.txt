JCR-940: BundleDbPersistenceManager auto re-connect

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@575734 13f79535-47bb-0310-9956-ffa450edef68

-import java.sql.PreparedStatement;
+import java.sql.Statement;
-    private static final Logger log =
+    private static Logger log =
-        return new PostgreSQLNameIndex(con, schemaObjectPrefix);
+        return new PostgreSQLNameIndex(connectionManager, schemaObjectPrefix);
-        PreparedStatement stmt = bundleSelect;
-            setKey(stmt, id.getUUID(), 1);
-            ResultSet rs = stmt.executeQuery();
+            Statement stmt = connectionManager.executeStmt(bundleSelectSQL, getKey(id.getUUID()));
+            ResultSet rs = stmt.getResultSet();
-        } finally {
-            resetStatement(stmt);

MOV26 UPD40 UPD42 INS60 INS43 INS59 INS42 INS42 INS32 INS42 INS42 INS42 MOV32 UPD42 UPD42 DEL83 DEL42 DEL43 DEL42 DEL42 DEL59 DEL60 DEL42 DEL34 DEL21 DEL42 DEL42 DEL32 DEL21 DEL8