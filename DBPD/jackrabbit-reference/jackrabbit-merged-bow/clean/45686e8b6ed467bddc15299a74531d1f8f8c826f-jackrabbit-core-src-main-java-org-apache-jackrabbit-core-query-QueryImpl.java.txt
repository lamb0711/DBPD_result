JCR-2715: Improved join query performance

Fix all remaining TCK test failures with the new QOM/SQL2 implementation
and enable it for all QOM/SQL2 queries

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1039888 13f79535-47bb-0310-9956-ffa450edef68

-import java.util.Set;
-    protected long offset;
+    protected long offset = 0;
-    public String[] getBindVariableNames() throws RepositoryException {
-        Set<String> names = query.getBindVariables().keySet();
-        return names.toArray(new String[names.size()]);
+    public String[] getBindVariableNames() {
+        return new String[0];
-     * Binds the given <code>value</code> to the variable named
-     * <code>varName</code>.
+     * Throws an {@link IllegalArgumentException} as XPath and SQL1 queries
+     * have no bind variables.
-     * @param varName name of variable in query
-     * @param value   value to bind
-     * @throws IllegalArgumentException      if <code>varName</code> is not a
-     *                                       valid variable in this query.
-     * @throws javax.jcr.RepositoryException if an error occurs.
+     * @throws IllegalArgumentException always thrown
-            throws IllegalArgumentException, RepositoryException {
-        checkInitialized();
-        try {
-            query.bindValue(varName, value);
-        } catch (NameException e) {
-            throw new RepositoryException(e.getMessage());
-        }
+            throws IllegalArgumentException {
+        throw new IllegalArgumentException("No such bind variable: " + varName);

INS8 INS34 INS65 MOV53 MOV3 UPD66 MOV66 INS65 UPD66 MOV66 UPD66 MOV66 UPD66 INS34 UPD42 MOV42 UPD43 INS27 UPD42 INS45 INS42 DEL40 DEL26 DEL42 DEL43 DEL42 DEL43 DEL42 DEL43 DEL74 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL66 DEL65 DEL65 DEL42 DEL65 DEL66 DEL40 DEL66 DEL65 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL32 DEL21 DEL42 DEL42 DEL42 DEL42 DEL32 DEL21 DEL8 DEL42 DEL43 DEL42 DEL44 DEL8 DEL12 DEL54 DEL8