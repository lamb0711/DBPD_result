JCR-1593 JSR 283: Simple versioning
JCR-2058 JSR 283: VersionManager and new versioning methods


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@765556 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.version.JcrVersionManagerImpl;
+     * The API Version manager for this workspace
+     */
+    protected JcrVersionManagerImpl versionMgr;
+
+    /**
-    public VersionManager getVersionManager() throws UnsupportedRepositoryOperationException, RepositoryException {
-        throw new UnsupportedRepositoryOperationException("not yet implemented");
+    public VersionManager getVersionManager()
+            throws UnsupportedRepositoryOperationException, RepositoryException {
+        if (versionMgr == null) {
+            versionMgr = new JcrVersionManagerImpl(session);
+        }
+        return versionMgr;
-                        NodeImpl node = (NodeImpl) session.getNodeByUUID(v.getFrozenNode().getFrozenUUID());
+                        NodeImpl node = (NodeImpl) session.getNodeByUUID(v.getInternalFrozenNode().getFrozenUUID());

INS26 INS40 INS23 INS29 INS83 INS43 INS59 INS8 INS65 INS42 INS42 INS25 INS41 INS66 INS27 INS8 INS42 INS42 INS33 INS21 INS7 INS42 INS14 UPD43 MOV43 INS42 UPD42 MOV43 MOV43 UPD42 DEL45 DEL14 DEL53 DEL8