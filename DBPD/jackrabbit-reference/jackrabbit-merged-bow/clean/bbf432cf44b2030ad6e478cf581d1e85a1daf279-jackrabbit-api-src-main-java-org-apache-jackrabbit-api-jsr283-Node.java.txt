JCR-1565: JSR 283 lifecycle management

Add lifecycle management methods defined in JSR 283 PFD.



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@761279 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.UnsupportedRepositoryOperationException;
+    /**
+     * Causes the lifecycle state of this node to undergo the specified
+     * <code>transition</code>.
+     * <p>
+     * This method may change the value of the <code>jcr:currentLifecycleState</code>
+     * property, in most cases it is expected that the implementation will change
+     * the value to that of the passed <code>transition</code> parameter, though
+     * this is an implementation-specific issue. If the <code>jcr:currentLifecycleState</code>
+     * property is changed the change is persisted immediately, there is no need
+     * to call <code>save</code>.
+     * <p>
+     * Throws an <code>UnsupportedRepositoryOperationException</code> if this
+     * implementation does not support lifecycle actions or if this node does
+     * not have the <code>mix:lifecycle</code> mixin.
+     * <p>
+     * Throws <code>InvalidLifecycleTransitionException</code> if the lifecycle
+     * transition is not successful.
+     *
+     * @param transition a state transition
+     * @throws UnsupportedRepositoryOperationException
+     *                             if this implementation does
+     *                             not support lifecycle actions or if this node does not have the
+     *                             <code>mix:lifecycle</code> mixin.
+     * @throws InvalidLifecycleTransitionException
+     *                             if the lifecycle transition is not successful.
+     * @throws RepositoryException if another error occurs.
+     * @since JCR 2.0
+     */
+    public void followLifecycleTransition(String transition)
+        throws UnsupportedRepositoryOperationException,
+        InvalidLifecycleTransitionException, RepositoryException;
+
+    /**
+     * Returns the list of valid state transitions for this node.
+     *
+     * @return a <code>String</code> array.
+     * @throws UnsupportedRepositoryOperationException
+     *                             if this implementation does
+     *                             not support lifecycle actions or if this node does not have the
+     *                             <code>mix:lifecycle</code> mixin.
+     * @throws RepositoryException if another error occurs.
+     * @since JCR 2.0
+     */
+    public String[] getAllowedLifecycleTransistions()
+        throws UnsupportedRepositoryOperationException, RepositoryException;
+

INS26 INS40 INS31 INS31 INS29 INS83 INS39 INS42 INS44 INS43 INS43 INS43 INS29 INS83 INS5 INS42 INS43 INS43 INS65 INS65 INS65 INS65 INS65 INS65 INS43 INS42 INS42 INS42 INS42 INS65 INS65 INS65 INS65 INS65 INS43 INS85 INS42 INS42 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS66 INS42 INS66 INS66 INS42