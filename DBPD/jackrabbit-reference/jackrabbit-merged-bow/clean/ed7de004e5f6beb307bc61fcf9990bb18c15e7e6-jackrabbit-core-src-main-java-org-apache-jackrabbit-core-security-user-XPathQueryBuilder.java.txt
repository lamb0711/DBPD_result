JCR-2800: Implement search facility for users and groups
improved conditions, added like condition
work in progress

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1033998 13f79535-47bb-0310-9956-ffa450edef68

+    /**
+     * Relational operators for comparing a property to a value. Correspond
+     * to the general comparison operators as define in JSR-170.
+     * The {@link #EX} tests for existence of a property.
+     */
+    enum RelationOp {
+        NE("!="),
+        EQ("="),
+        LT("<"),
+        LE("<="),
+        GT(">"),
+        GE("=>"),
+        EX(""),
+        LIKE("like");
+
+        private final String op;
+
+        RelationOp(String op) {
+            this.op = op;
+        }
+
+        public String getOp() {
+            return op;
+        }
+    }
+    
+    public Condition neq(String relPath, Value value) {
+        return new PropertyCondition(relPath, RelationOp.NE, value);
+    }
+
+    public Condition eq(String relPath, Value value) {
+        return new PropertyCondition(relPath, RelationOp.EQ, value);
+    }
+
+    public Condition lt(String relPath, Value value) {
+        return new PropertyCondition(relPath, RelationOp.LT, value);
+    }
+
+    public Condition le(String relPath, Value value){
+        return new PropertyCondition(relPath, RelationOp.LE, value);
+    }
+
+    public Condition gt(String relPath, Value value) {
+        return new PropertyCondition(relPath, RelationOp.GT, value);
+    }
+
+    public Condition ge(String relPath, Value value) {
+        return new PropertyCondition(relPath, RelationOp.GE, value);
+    }
+
+    public Condition exists(String relPath) {
+        return new PropertyCondition(relPath, RelationOp.EX);
+    }
+
+    public Condition like(String relPath, String pattern) {
+        return new PropertyCondition(relPath, RelationOp.LIKE, pattern);
+    }
+
+        private final String pattern;
+            pattern = null;
+        }
+
+        public PropertyCondition(String relPath, RelationOp op, String pattern) {
+            this.relPath = relPath;
+            this.op = op;
+            value = null;
+            this.pattern = pattern;
+        }
+
+        public PropertyCondition(String relPath, RelationOp op) {
+            this.relPath = relPath;
+            this.op = op;
+            value = null;
+            pattern = null;
+        public String getPattern() {
+            return pattern;
+        }
+

INS71 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS31 INS29 INS42 INS72 INS72 INS72 INS72 INS72 INS72 INS72 INS72 INS23 INS31 INS31 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS44 INS8 INS83 INS43 INS42 INS44 INS44 INS8 INS23 INS31 INS31 INS31 INS65 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS42 INS45 INS83 INS83 INS43 INS59 INS42 INS44 INS8 INS83 INS43 INS42 INS8 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS41 INS42 INS43 INS42 INS43 INS42 INS41 INS83 INS83 INS43 INS59 INS83 INS42 INS44 INS44 INS44 INS8 INS83 INS42 INS44 INS44 INS8 INS83 INS43 INS42 INS8 INS66 INS66 INS66 INS65 INS66 INS42 INS42 INS43 INS42 INS21 INS42 INS41 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS14 INS42 INS14 INS42 INS42 INS14 INS42 INS42 INS21 INS43 INS42 INS43 INS42 INS43 INS42 INS21 INS21 INS21 INS21 INS43 INS42 INS43 INS42 INS21 INS21 INS21 INS21 INS42 INS41 INS67 INS42 INS7 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS42 INS43 INS42 INS40 INS43 INS42 INS40 INS42 INS7 INS42 INS42 INS42 INS7 INS7 INS7 INS7 INS42 INS42 INS7 INS7 INS7 INS7 INS42 INS42 INS22 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS33 INS22 INS42 INS22 INS42 INS42 INS33 INS22 INS42 INS22 INS42 INS22 INS42 INS42 INS33 INS42 INS33 INS52 INS42 INS52 INS42 INS52 INS42 INS52 INS42 INS52 INS42 INS52 INS42