JCR-195: ArrayIndexOutOfBounds thrown on re-index of repository

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@239383 13f79535-47bb-0310-9956-ffa450edef68

-                if (content.length() > 0) {
+                if (PropertyType.STRING == type) {
+                    // STRING value can be empty; ignore length
+                    values.add(InternalValue.valueOf(content, type));
+                } else if (content.length() > 0) {
+                    // non-empty non-STRING value
-                        // the value stores the path to the actual binary file in the blob store
+                        // the value stores the path to the actual binary file
+                        // in the blob store
-                            values.add(InternalValue.create(new FileSystemResource(blobStore, content)));
+                            values.add(InternalValue.create(
+                                    new FileSystemResource(blobStore, content)));
+                } else {
+                    // empty non-STRING value
+                    log.warn(state.getId() + ": ignoring empty value of type "
+                            + PropertyType.nameFromValue(type));

INS25 INS27 INS8 MOV25 INS40 INS42 INS21 INS8 INS32 INS21 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS27 INS32 INS45 INS32 INS42 INS42 INS42 INS42 INS42