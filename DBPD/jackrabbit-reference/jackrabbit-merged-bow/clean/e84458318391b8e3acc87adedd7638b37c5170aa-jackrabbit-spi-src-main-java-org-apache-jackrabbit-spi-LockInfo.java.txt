JCR-1590 JSR 283: Locking

- getSecondsRemaining is negative if lock is expired or released
- getLockToken always returns null if lock is sessionscoped

JCR-2004 Update SPI locking to match JCR 2.0

- extend spi/LockInfo.java
- add JCR 2.0 variant of RepositoryService#lock that takes timeoutHint and ownerHint
- adjust jcr2spi
- adjust spi implementation(s)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@753244 13f79535-47bb-0310-9956-ffa450edef68

-     * Returns the lock token for this lock if it is hold by the requesting
-     * session or <code>null</code> otherwise.
+     * Returns the lock token for this lock or <code>null</code> if the token
+     * should not be exposed to the API user.
-     * Returns the user ID of the user who owns this lock.
+     * Returns the user ID of the user who owns this lock or some user defined
+     * information about the lock owner.
+ 
+    /**
+     * Returns the seconds remaining until the lock times out or
+     * ({@link Long#MAX_VALUE} if the timeout is unknown or infinite).
+     *
+     * @return number of seconds until the lock times out.
+     * @see javax.jcr.lock.Lock#getSecondsRemaining()
+     * @since JCR 2.0
+     */
+    public long getSecondsRemaining();
+
+    /**
+     * Returns <code>true</code> if the <code>SessionInfo</code> used to
+     * retrieve this <code>LockInfo</code> is the lock holder and thus enabled
+     * to refresh or release the lock.
+     *
+     * @return <code>true</code> if the <code>SessionInfo</code> used to
+     * retrieve this <code>LockInfo</code> is the lock holder.
+     * @see javax.jcr.lock.Lock#isLockOwningSession()
+     * @since JCR 2.0
+     */
+    public boolean isLockOwner();

INS31 INS31 INS29 INS83 INS39 INS42 INS29 INS83 INS39 INS42 INS65 INS65 INS65 INS65 INS65 INS65 INS65 INS65 UPD66 UPD66 UPD66 INS66 INS66 INS66 INS65 INS66 INS66 INS68 INS66 INS66 INS66 INS66 INS66 INS66 INS68 INS66 INS67 INS40 INS42 INS40 INS42 INS42 INS42