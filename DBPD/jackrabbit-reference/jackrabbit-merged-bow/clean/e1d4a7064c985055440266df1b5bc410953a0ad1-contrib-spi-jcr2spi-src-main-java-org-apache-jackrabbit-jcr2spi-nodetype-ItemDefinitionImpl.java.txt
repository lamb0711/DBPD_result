JCR-996 Name and Path interfaces in SPI
JCR-1169 Distribution of commons classes


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@586065 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
-import org.apache.jackrabbit.name.NameFormat;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import javax.jcr.NamespaceException;
- * performing the translation from <code>QName</code>s to JCR names
+ * performing the translation from <code>Name</code>s to JCR names
-    protected final NamespaceResolver nsResolver;
+    protected final NamePathResolver resolver;
-     * @param nsResolver namespace resolver
+     * @param resolver
-                       NamespaceResolver nsResolver) {
+                       NamePathResolver resolver) {
-        this.nsResolver = nsResolver;
+        this.resolver = resolver;
-                return NameFormat.format(itemDef.getQName(), nsResolver);
-            } catch (NoPrefixDeclaredException npde) {
+                return resolver.getJCRName(itemDef.getName());
+            } catch (NamespaceException e) {
-                log.error("encountered unregistered namespace in property name",
-                        npde);
+                log.error("encountered unregistered namespace in property name", e);
-                return itemDef.getQName().toString();
+                return itemDef.getName().toString();

MOV26 MOV26 UPD40 UPD40 UPD43 UPD66 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 DEL40 DEL26 DEL66 DEL42