JCR-1483: Move common node type functionality to jackrabbit-spi-commons
- replaced NodeTypeDef (jackrabbit-core) with QNodeTypeDefinition
- QNodeTypeDefinitionImpl is not immutable, hence no cloning needed anymore
- introduced QNodeTypeDefinitionBuilder
- moved constructors of Q*DefinitionImpl classes in spi2jcr to spi-commons
- fixed a bug in RepositoryServiceImpl in spi2jcr

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816551 13f79535-47bb-0310-9956-ffa450edef68

-    private final Map<Name, NodeTypeDef> ntDefs;
+    private final Map<Name, QNodeTypeDefinition> ntDefs;
-        ntDefs = new HashMap<Name, NodeTypeDef>();
+        ntDefs = new HashMap<Name, QNodeTypeDefinition>();
-        NodeTypeDef[] types = NodeTypeReader.read(in);
-        for (NodeTypeDef type : types) {
+        QNodeTypeDefinition[] types = NodeTypeReader.read(in);
+        for (QNodeTypeDefinition type : types) {
-                add(new NodeTypeDef(qdef));
+                add(qdef);
-        NodeTypeDef[] types = ntDefs.values().toArray(new NodeTypeDef[ntDefs.size()]);
+        QNodeTypeDefinition[] types = ntDefs.values().toArray(new QNodeTypeDefinition[ntDefs.size()]);
-    public void add(NodeTypeDef ntd) {
+    public void add(QNodeTypeDefinition ntd) {
-    public NodeTypeDef get(Name name) {
+    public QNodeTypeDefinition get(Name name) {
-    public Collection<NodeTypeDef> all() {
+    public Collection<QNodeTypeDefinition> all() {

UPD74 UPD43 UPD74 UPD43 UPD43 UPD42 UPD43 UPD42 UPD5 UPD5 UPD42 UPD42 UPD43 UPD43 UPD43 UPD74 UPD42 UPD42 UPD42 UPD43 UPD5 UPD42 UPD43 INS42 UPD42 DEL42 DEL43 DEL42 DEL14