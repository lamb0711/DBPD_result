JCR-1819 : Add specific deep loading of Nodes and Properties
JCR-1843 : wrong status change upon conflicting removal (CacheBehaviour.OBSERVATION)
JCR-1293 : ReorderReferenceableSNSTest failure
JCR-1811 : ExportSysViewTest#testExportSysView_handler_session_saveBinary_occasionally failing


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@709211 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.Path;
-import org.apache.jackrabbit.jcr2spi.state.ItemState;
+import org.apache.jackrabbit.jcr2spi.state.NodeState;
+import org.apache.jackrabbit.jcr2spi.state.PropertyState;
+import org.apache.jackrabbit.spi.NodeId;
+import org.apache.jackrabbit.spi.Path;
+import org.apache.jackrabbit.spi.PropertyId;
+import javax.jcr.ItemNotFoundException;
-import javax.jcr.ItemNotFoundException;
-     * returned otherwise <code>null</code>. See {@link #getHierarchyEntry(ItemId)}
-     * for a method that resolves the ItemId including lookup in the persistence
-     * layer if the entry has not been loaded yet.
+     * returned otherwise <code>null</code>. See {@link #getNodeEntry(NodeId)}
+     * or {@link #getPropertyEntry(PropertyId)} for methods that resolves the
+     * ItemId including lookup in the persistence layer if the entry has not been
+     * loaded yet.
-     * returned otherwise <code>null</code>. See {@link #getHierarchyEntry(Path)}
-     * for a method that resolves the ItemId including lookup in the persistence
-     * layer if the entry has not been loaded yet.
+     * returned otherwise <code>null</code>. See {@link #getNodeEntry(Path)}
+     * or {@link #getPropertyEntry(Path)} for methods that resolves the path
+     * including lookup in the persistence layer if the entry has not been loaded yet.
-     * @param itemId
+     * @param nodeId
-    public HierarchyEntry getHierarchyEntry(ItemId itemId) throws ItemNotFoundException, RepositoryException;
+    public NodeEntry getNodeEntry(NodeId nodeId) throws ItemNotFoundException, RepositoryException;
-     * Resolves a path into a <code>HierarchyEntry</code>.
+     * Resolves a path into a <code>NodeEntry</code>.
-    public HierarchyEntry getHierarchyEntry(Path qPath) throws PathNotFoundException, RepositoryException;
+    public NodeEntry getNodeEntry(Path qPath) throws PathNotFoundException, RepositoryException;
-     * Retrieves the <code>HierarchyEntry</code> corresponding to the given
-     * path and resolves it to the underlying <code>ItemState</code>.
+     * Resolves a propertyId into a <code>PropertyEntry</code>.
+     *
+     * @param propertyId
+     * @return
+     * @throws PathNotFoundException
+     * @throws RepositoryException
+     */
+    public PropertyEntry getPropertyEntry(PropertyId propertyId) throws ItemNotFoundException, RepositoryException;
+
+    /**
+     * Resolves a path into a <code>PropertyEntry</code>.
-    public ItemState getItemState(Path qPath) throws PathNotFoundException, RepositoryException;
+    public PropertyEntry getPropertyEntry(Path qPath) throws PathNotFoundException, RepositoryException;
+
+     /**
+     * Retrieves the <code>NodeEntry</code> corresponding to the given
+     * path and resolves it to the underlying <code>NodeState</code>.
+     *
+     * @param qPath
+     * @return
+     * @throws PathNotFoundException
+     * @throws RepositoryException
+     */
+    public NodeState getNodeState(Path qPath) throws PathNotFoundException, RepositoryException;
+
+     /**
+     * Retrieves the <code>PropertyEntry</code> corresponding to the given
+     * path and resolves it to the underlying <code>PropertyState</code>.
+     *
+     * @param qPath
+     * @return
+     * @throws PathNotFoundException
+     * @throws RepositoryException
+     */
+    public PropertyState getPropertyState(Path qPath) throws PathNotFoundException, RepositoryException;

MOV26 MOV26 INS26 INS26 INS26 MOV31 UPD40 INS40 INS40 INS40 INS31 INS31 INS31 UPD43 UPD42 UPD43 UPD42 INS29 INS83 INS43 INS42 INS44 INS43 MOV43 UPD43 UPD42 INS43 INS29 INS83 INS43 INS42 INS44 INS43 INS43 INS29 INS83 INS43 INS42 INS44 INS43 INS43 MOV65 MOV65 UPD42 UPD43 UPD42 UPD42 INS65 INS65 INS65 MOV65 MOV65 INS42 INS43 INS42 INS42 INS65 INS65 UPD42 INS42 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS42 INS42 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS42 INS42 INS66 INS65 INS66 UPD66 UPD66 INS66 INS65 UPD66 UPD66 UPD42 UPD42 UPD66 INS66 INS42 INS42 UPD66 INS42 INS42 INS66 INS66 INS42 INS42 INS42 INS42 INS66 INS66 INS42 INS42 INS42 INS42 INS68 INS68 UPD42 INS42 INS69 UPD42 INS42 INS69 UPD43 INS43 INS43 UPD42 INS42 INS42 DEL66