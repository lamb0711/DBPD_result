JCR-890: concurrent read-only access to a session

Use the SessionContext and SessionOperations in search

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@983708 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.ItemManager;
-import org.apache.jackrabbit.core.SessionImpl;
-import org.apache.jackrabbit.core.fs.FileSystem;
-import org.apache.jackrabbit.core.id.NodeId;
-import org.apache.jackrabbit.core.state.NodeState;
-import org.apache.jackrabbit.spi.commons.query.qom.QueryObjectModelTree;
+import java.io.IOException;
+import java.util.Iterator;
-import java.io.IOException;
-import java.util.Iterator;
+import org.apache.jackrabbit.core.fs.FileSystem;
+import org.apache.jackrabbit.core.id.NodeId;
+import org.apache.jackrabbit.core.session.SessionContext;
+import org.apache.jackrabbit.core.state.NodeState;
+import org.apache.jackrabbit.spi.commons.query.qom.QueryObjectModelTree;
-     * @param session the session of the current user creating the query object.
-     * @param itemMgr the item manager of the current user.
+     * @param sessionContext component context of the current session
-    ExecutableQuery createExecutableQuery(SessionImpl session,
-                                          ItemManager itemMgr,
-                                          String statement,
-                                          String language)
+    ExecutableQuery createExecutableQuery(
+            SessionContext sessionContext, String statement, String language)
-     * @param session the session of the current user creating the query
-     *                object.
-     * @param itemMgr the item manager of the current user.
+     * @param sessionContext component context of the current session
-    ExecutableQuery createExecutableQuery(SessionImpl session,
-                                          ItemManager itemMgr,
-                                          QueryObjectModelTree qomTree)
+    ExecutableQuery createExecutableQuery(
+            SessionContext sessionContext, QueryObjectModelTree qomTree)

MOV26 MOV26 MOV26 MOV26 MOV26 UPD40 UPD43 UPD42 UPD43 UPD42 UPD42 UPD66 UPD42 UPD42 UPD66 UPD42 DEL40 DEL26 DEL42 DEL66 DEL65 DEL42 DEL43 DEL42 DEL44 DEL66 DEL42 DEL66 DEL65 DEL42 DEL43 DEL42 DEL44