JCR-595 Refactoring of the Persistence Managers (fixing ddl loading)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@467945 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.persistence.AbstractPersistenceManager;
+import org.apache.jackrabbit.core.persistence.AbstractPersistenceManager;
+import org.apache.jackrabbit.core.persistence.PMContext;
+import org.apache.jackrabbit.core.persistence.util.BLOBStore;
+import org.apache.jackrabbit.core.persistence.util.FileSystemBLOBStore;
+import org.apache.jackrabbit.core.persistence.util.Serializer;
+import org.apache.jackrabbit.core.state.ItemState;
-import org.apache.jackrabbit.core.persistence.PMContext;
-import org.apache.jackrabbit.core.state.ItemState;
-import org.apache.jackrabbit.core.persistence.db.SimpleDbPersistenceManager;
-import org.apache.jackrabbit.core.persistence.util.BLOBStore;
-import org.apache.jackrabbit.core.persistence.util.FileSystemBLOBStore;
-import org.apache.jackrabbit.core.persistence.util.Serializer;
+import java.io.ByteArrayInputStream;
+import java.io.FilterInputStream;
-import java.io.FilterInputStream;
-import java.io.ByteArrayInputStream;
+import java.sql.DatabaseMetaData;
-import java.sql.DatabaseMetaData;
-            InputStream in = getClass().getResourceAsStream(schema + ".ddl");
+            InputStream in = getSchemaDDL();
+    /**
+     * Returns an input stream to the schema DDL resource.
+     * @return an input stream to the schema DDL resource.
+     */
+    protected InputStream getSchemaDDL() {
+        return getClass().getResourceAsStream(schema + ".ddl");
+    }
+

MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 INS31 INS29 INS83 MOV43 INS42 INS8 INS65 INS65 INS41 INS66 INS66 MOV32 INS43 INS42 INS32 INS42 DEL40 DEL26