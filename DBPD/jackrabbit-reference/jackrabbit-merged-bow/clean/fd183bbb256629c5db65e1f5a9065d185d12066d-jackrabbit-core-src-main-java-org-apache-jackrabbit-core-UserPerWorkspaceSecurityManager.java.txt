JCR-2313 - Improvements to user management (2) [work in progress] 

- remove 'administrators' group from set of pre-installed users as it has no special meaning
   neither within the user administration nor within the ac-evaluation code.

- remove SystemUserManager and move the special admin-handling to the UserManagerImpl
- add explicit check for uuid-conflict to UserManagerImpl#createAuthorizableNode
- make sure the admin-user is properly recreated upon reconfiguration of the usersPath (UserManager config) 
- make sure the admin-user is created in case of other uuid-conflict

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@881215 13f79535-47bb-0310-9956-ffa450edef68

- * users (admin, administrators group and anonymous) is present in each workspace
+ * users (admin and anonymous) is present in each workspace
-        // get a system user manager that asserts the existance of the admin user.
-        if (session instanceof SystemSession) {
-            return new SystemUserManager((SystemSession) session, params);
+        // get a system user manager that asserts the existence of the admin user.
+        if (umc != null) {
+            Class<?>[] paramTypes = new Class[] { SessionImpl.class, String.class, Properties.class };
+            return (UserPerWorkspaceUserManager) umc.getUserManager(UserPerWorkspaceUserManager.class, paramTypes, (SessionImpl) session, adminId, params);
-            if (umc != null) {
-                Class<?>[] paramTypes = new Class[] { SessionImpl.class, String.class, Properties.class };
-                return (UserPerWorkspaceUserManager) umc.getUserManager(UserPerWorkspaceUserManager.class, paramTypes, (SessionImpl) session, adminId, params);
-            } else {
-                return new UserPerWorkspaceUserManager(session, adminId, params);
-            }
+            return new UserPerWorkspaceUserManager(session, adminId, params);

MOV8 UPD66 MOV60 MOV60 DEL42 DEL42 DEL43 DEL62 DEL42 DEL43 DEL42 DEL43 DEL42 DEL11 DEL42 DEL14 DEL41 DEL8 DEL25 DEL8