[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.QName;
-    private static String buildNodeFolderPath(String uuid) {
+    private static String buildNodeFolderPath(NodeId id) {
-        char[] chars = uuid.toCharArray();
+        char[] chars = id.getUUID().toString().toCharArray();
-    private static String buildPropFilePath(String parentUUID, QName propName) {
+    private static String buildPropFilePath(PropertyId id) {
-            md5.update(propName.getNamespaceURI().getBytes());
-            md5.update(propName.getLocalName().getBytes());
+            md5.update(id.getName().getNamespaceURI().getBytes());
+            md5.update(id.getName().getLocalName().getBytes());
-        return buildNodeFolderPath(parentUUID) + FileSystem.SEPARATOR + fileName;
+        return buildNodeFolderPath(id.getParentId()) + FileSystem.SEPARATOR + fileName;
-    private static String buildNodeFilePath(String uuid) {
-        return buildNodeFolderPath(uuid) + FileSystem.SEPARATOR + NODEFILENAME;
+    private static String buildNodeFilePath(NodeId id) {
+        return buildNodeFolderPath(id) + FileSystem.SEPARATOR + NODEFILENAME;
-    private static String buildNodeReferencesFilePath(String uuid) {
-        return buildNodeFolderPath(uuid) + FileSystem.SEPARATOR + NODEREFSFILENAME;
+    private static String buildNodeReferencesFilePath(NodeReferencesId id) {
+        return buildNodeFolderPath(id) + FileSystem.SEPARATOR + NODEREFSFILENAME;
-        String nodeFilePath = buildNodeFilePath(id.getUUID());
+        String nodeFilePath = buildNodeFilePath(id);
-        String propFilePath = buildPropFilePath(id.getParentUUID(), id.getName());
+        String propFilePath = buildPropFilePath(id);
-        String refsFilePath = buildNodeReferencesFilePath(id.getUUID());
+        String refsFilePath = buildNodeReferencesFilePath(id);
-        String uuid = state.getUUID();
-        String nodeFilePath = buildNodeFilePath(uuid);
+        String nodeFilePath = buildNodeFilePath(state.getNodeId());
-                return;
-            String msg = "failed to write node state: " + uuid;
+            String msg = "failed to write node state: " + state.getNodeId();
-        String propFilePath = buildPropFilePath(state.getParentUUID(), state.getName());
+        String propFilePath = buildPropFilePath(state.getPropertyId());
-                return;
-            String msg = "failed to store property state: " + state.getParentUUID() + "/" + state.getName();
+            String msg = "failed to store property state: " + state.getParentId() + "/" + state.getName();
-        String uuid = refs.getTargetId().getUUID();
-        String refsFilePath = buildNodeReferencesFilePath(uuid);
+        String refsFilePath = buildNodeReferencesFilePath(refs.getTargetId());
-            String msg = "failed to store references: " + uuid;
+            String msg = "failed to store references: " + refs.getTargetId();
-        String uuid = state.getUUID();
-        String nodeFilePath = buildNodeFilePath(uuid);
+        String nodeFilePath = buildNodeFilePath(state.getNodeId());
-            String msg = "failed to delete node state: " + uuid;
+            String msg = "failed to delete node state: " + state.getNodeId();
-        String propFilePath = buildPropFilePath(state.getParentUUID(), state.getName());
+        String propFilePath = buildPropFilePath(state.getPropertyId());
-            String msg = "failed to delete property state: " + state.getParentUUID() + "/" + state.getName();
+            String msg = "failed to delete property state: " + state.getParentId() + "/" + state.getName();
-        String uuid = refs.getTargetId().getUUID();
-        String refsFilePath = buildNodeReferencesFilePath(uuid);
+        String refsFilePath = buildNodeReferencesFilePath(refs.getTargetId());
-            String msg = "failed to delete references: " + uuid;
+            String msg = "failed to delete references: " + refs.getTargetId();
-            String propFilePath = buildPropFilePath(id.getParentUUID(), id.getName());
+            String propFilePath = buildPropFilePath(id);
-            String nodeFilePath = buildNodeFilePath(id.getUUID());
+            String nodeFilePath = buildNodeFilePath(id);
-            String uuid = id.getUUID();
-            String refsFilePath = buildNodeReferencesFilePath(uuid);
+            String refsFilePath = buildNodeReferencesFilePath(id);

UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 MOV43 MOV43 MOV43 MOV43 UPD42 MOV32 INS32 INS32 UPD42 UPD42 MOV42 MOV42 MOV42 INS32 UPD42 INS32 INS32 MOV60 MOV43 MOV43 MOV43 MOV32 INS42 INS42 UPD42 MOV42 INS42 UPD42 MOV42 UPD42 INS42 UPD42 MOV42 MOV43 UPD42 MOV43 INS42 UPD42 MOV42 MOV43 UPD42 MOV42 MOV42 UPD42 INS27 MOV42 MOV42 UPD42 MOV32 MOV32 INS32 INS32 INS32 INS45 MOV32 UPD42 MOV42 INS42 INS42 UPD42 INS42 INS42 INS42 INS42 UPD42 DEL40 DEL26 DEL42 DEL43 DEL42 DEL44 DEL42 DEL32 DEL42 DEL32 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL43 DEL41 DEL42 DEL42 DEL42 DEL32 DEL41 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL42 DEL42 DEL32 DEL42 DEL32 DEL42 DEL45 DEL42 DEL27 DEL59 DEL60 DEL42 DEL32 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL42 DEL43