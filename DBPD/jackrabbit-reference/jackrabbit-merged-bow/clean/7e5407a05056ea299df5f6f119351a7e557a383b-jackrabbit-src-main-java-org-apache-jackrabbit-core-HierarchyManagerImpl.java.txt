[JCR-317] replace UUID strings by UUID classes in NodeId, etc..

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@378221 13f79535-47bb-0310-9956-ffa450edef68

-    public HierarchyManagerImpl(String rootNodeUUID,
+    public HierarchyManagerImpl(NodeId rootNodeId,
-        rootNodeId = new NodeId(rootNodeUUID);
+        this.rootNodeId = rootNodeId;
-     * @see ZombieHierarchyManager#getParentUUID(ItemState)
+     * @see ZombieHierarchyManager#getParentId(ItemState)
-    protected String getParentUUID(ItemState state) {
-        return state.getParentUUID();
+    protected NodeId getParentId(ItemState state) {
+        return state.getParentId();
-     * @param uuid   uuid of child node entry
+     * @param id   id of child node entry
-     * @see ZombieHierarchyManager#getChildNodeEntry(NodeState, String)
+     * @see ZombieHierarchyManager#getChildNodeEntry(NodeState, NodeId)
-                                                         String uuid) {
-        return parent.getChildNodeEntry(uuid);
+                                                         NodeId id) {
+        return parent.getChildNodeEntry(id);
-            childId = new NodeId(nodeEntry.getUUID());
+            childId = nodeEntry.getId();
-            childId = new PropertyId(parentState.getUUID(), name);
+            childId = new PropertyId(parentState.getNodeId(), name);
-        String parentUUID = getParentUUID(state);
-        if (parentUUID == null) {
+        NodeId parentId = getParentId(state);
+        if (parentId == null) {
-        NodeState parent = (NodeState) getItemState(new NodeId(parentUUID));
+        NodeState parent = (NodeState) getItemState(parentId);
-            String uuid = nodeState.getUUID();
-            NodeState.ChildNodeEntry entry = getChildNodeEntry(parent, uuid);
+            NodeId id = nodeState.getNodeId();
+            NodeState.ChildNodeEntry entry = getChildNodeEntry(parent, id);
-                        + parent.getUUID() + " has no child entry for "
-                        + uuid;
+                        + parent.getNodeId() + " has no child entry for "
+                        + id;
-                String parentUUID = getParentUUID(nodeState);
-                if (parentUUID == null) {
+                NodeId parentId= getParentId(nodeState);
+                if (parentId == null) {
-                parentState = (NodeState) getItemState(new NodeId(parentUUID));
+                parentState = (NodeState) getItemState(parentId);
-                    getChildNodeEntry(parentState, nodeId.getUUID());
+                    getChildNodeEntry(parentState, nodeId);
-            PropertyId propId = (PropertyId) itemId;
-            return propId.getName();
+            return ((PropertyId) itemId).getName();
-            String parentUUID = getParentUUID(state);
+            NodeId parentId = getParentId(state);
-            while (parentUUID != null) {
+            while (parentId != null) {
-                state = getItemState(new NodeId(parentUUID));
-                parentUUID = getParentUUID(state);
+                state = getItemState(parentId);
+                parentId = getParentId(state);
-            String parentUUID = getParentUUID(state);
-            while (parentUUID != null) {
-                if (parentUUID.equals(ancestorId.getUUID())) {
+            NodeId parentId = getParentId(state);
+            while (parentId != null) {
+                if (parentId.equals(ancestorId)) {
-                state = getItemState(new NodeId(parentUUID));
-                parentUUID = getParentUUID(state);
+                state = getItemState(parentId);
+                parentId = getParentId(state);
-            String parentUUID = getParentUUID(state);
-            while (parentUUID != null) {
-                if (parentUUID.equals(nodeId.getUUID())) {
+            NodeId parentId = getParentId(state);
+            while (parentId != null) {
+                if (parentId.equals(nodeId)) {
-                state = getItemState(new NodeId(parentUUID));
-                parentUUID = getParentUUID(state);
+                state = getItemState(parentId);
+                parentId = getParentId(state);

UPD43 UPD42 MOV43 UPD42 UPD42 UPD43 UPD42 UPD42 UPD66 UPD42 MOV43 MOV43 INS22 INS42 UPD42 UPD42 UPD42 UPD42 UPD42 INS52 INS42 UPD43 UPD42 MOV43 MOV43 MOV43 MOV43 MOV43 UPD42 INS32 INS42 UPD42 INS36 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 MOV42 UPD42 MOV42 UPD42 UPD42 MOV43 MOV42 MOV11 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 MOV42 UPD42 UPD42 MOV42 UPD42 UPD42 UPD42 UPD42 INS42 UPD42 INS42 UPD42 INS42 UPD42 UPD42 INS42 DEL42 DEL43 DEL42 DEL42 DEL14 DEL32 DEL14 DEL42 DEL43 DEL42 DEL14 DEL42 DEL43 DEL42 DEL43 DEL42 DEL14 DEL42 DEL32 DEL42 DEL43 DEL42 DEL59 DEL60 DEL42 DEL42 DEL43 DEL42 DEL14 DEL42 DEL43 DEL42 DEL32 DEL42 DEL14 DEL42 DEL43 DEL42 DEL32 DEL42 DEL14