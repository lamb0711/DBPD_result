JCR-3419: Overwriting Cache Entry Warnings

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1380499 13f79535-47bb-0310-9956-ffa450edef68

-                    state.setStatus(ItemState.STATUS_EXISTING);
-                    cache.cache(state);
+                    // there is one exception though. it is possible that the
+                    // shared ChangeLog contains the an item both as removed and
+                    // added. For those items we don't update the cache here,
+                    // because that would lead to WARN messages in the
+                    // ItemStateReferenceCache. See JCR-3419
+                    if (!shared.deleted(state.getId())) {
+                        state.setStatus(ItemState.STATUS_EXISTING);
+                        cache.cache(state);
+                    }

INS8 INS25 INS38 MOV8 INS32 INS42 INS42 INS32 INS42 INS42