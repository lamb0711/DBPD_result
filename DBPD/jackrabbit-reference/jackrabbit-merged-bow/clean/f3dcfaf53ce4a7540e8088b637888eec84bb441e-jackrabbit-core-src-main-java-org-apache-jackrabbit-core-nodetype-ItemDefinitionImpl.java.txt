JCR-1169 Distribution of commons classes (adjust jackrabbit-core)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@590014 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.NameFormat;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import org.apache.jackrabbit.spi.Name;
+import javax.jcr.NamespaceException;
- * performing the translation from <code>QName</code>s to JCR names
+ * performing the translation from <code>Name</code>s to JCR names
-     * The namespace resolver used to translate qualified names to JCR names.
+     * The name/path resolver used to translate qualified names to JCR names.
-    protected final NamespaceResolver nsResolver;
+    protected final NamePathResolver resolver;
-     * @param nsResolver namespace resolver
+     * @param resolver
-                       NamespaceResolver nsResolver) {
+                       NamePathResolver resolver) {
-        this.nsResolver = nsResolver;
+        this.resolver = resolver;
-     * Gets the <code>QName</code> of the child item. It is an error to
+     * Gets the <code>Name</code> of the child item. It is an error to
-     * @return the <code>QName</code> of the child item.
+     * @return the <code>Name</code> of the child item.
-    public QName getQName() {
+    public Name getQName() {
-                return NameFormat.format(itemDef.getName(), nsResolver);
-            } catch (NoPrefixDeclaredException npde) {
+                return resolver.getJCRName(itemDef.getName());
+            } catch (NamespaceException e) {
-                        npde);
+                        e);

MOV26 UPD40 UPD40 UPD40 UPD43 UPD43 UPD66 UPD42 UPD42 UPD43 UPD42 UPD42 UPD66 UPD42 UPD42 UPD66 UPD66 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 DEL40 DEL26 DEL66 DEL42