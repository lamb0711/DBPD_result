move validation-options from sessionitemstatemgr to the invidual transient operations

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1157177 13f79535-47bb-0310-9956-ffa450edef68

-        int options = ItemStateValidator.CHECK_LOCK | ItemStateValidator.CHECK_COLLISION
-            | ItemStateValidator.CHECK_VERSIONING | ItemStateValidator.CHECK_CONSTRAINTS;
-
-        List<ItemState> newStates = addNodeState(parent, operation.getNodeName(), operation.getNodeTypeName(), operation.getUuid(), def, options);
+        List<ItemState> newStates = addNodeState(parent, operation.getNodeName(), operation.getNodeTypeName(), operation.getUuid(), def, operation.getOptions());
-        int options = ItemStateValidator.CHECK_LOCK
-            | ItemStateValidator.CHECK_COLLISION
-            | ItemStateValidator.CHECK_VERSIONING
-            | ItemStateValidator.CHECK_CONSTRAINTS;
-        addPropertyState(parent, propertyName, targetType, operation.getValues(), pDef, options);
+
+        addPropertyState(parent, propertyName, targetType, operation.getValues(), pDef, operation.getOptions());
-        validator.checkRemoveItem(srcState,
-            ItemStateValidator.CHECK_ACCESS
-            | ItemStateValidator.CHECK_LOCK
-            | ItemStateValidator.CHECK_VERSIONING
-            | ItemStateValidator.CHECK_CONSTRAINTS);
+        validator.checkRemoveItem(srcState, operation.getOptions());
-            srcState.getNodeTypeName(),
-            ItemStateValidator.CHECK_ACCESS
-            | ItemStateValidator.CHECK_LOCK
-            | ItemStateValidator.CHECK_VERSIONING
-            | ItemStateValidator.CHECK_CONSTRAINTS);
+            srcState.getNodeTypeName(), operation.getOptions());
-        int options = ItemStateValidator.CHECK_LOCK
-            | ItemStateValidator.CHECK_VERSIONING
-            | ItemStateValidator.CHECK_CONSTRAINTS;
-        removeItemState(state, options);
+        removeItemState(state, operation.getOptions());
-                int options = ItemStateValidator.CHECK_LOCK | ItemStateValidator.CHECK_VERSIONING;
-                setPropertyStateValue(pState, getQValues(mixinNames, qValueFactory), PropertyType.NAME, options);
+                setPropertyStateValue(pState, getQValues(mixinNames, qValueFactory), PropertyType.NAME, operation.getOptions());
-                int options = ItemStateValidator.CHECK_LOCK | ItemStateValidator.CHECK_VERSIONING;
-                addPropertyState(nState, pd.getName(), pd.getRequiredType(), mixinValue, pd, options);
+                addPropertyState(nState, pd.getName(), pd.getRequiredType(), mixinValue, pd, operation.getOptions());
-            int options = ItemStateValidator.CHECK_LOCK | ItemStateValidator.CHECK_VERSIONING;
-            removeItemState(pState, options);
+            removeItemState(pState, operation.getOptions());
-        int options = ItemStateValidator.CHECK_VERSIONING | ItemStateValidator.CHECK_LOCK;
-        setPropertyStateValue(pState, getQValues(new Name[] {primaryName}, qValueFactory), PropertyType.NAME, options);
+        setPropertyStateValue(pState, getQValues(new Name[] {primaryName}, qValueFactory), PropertyType.NAME, operation.getOptions());
-        int options = ItemStateValidator.CHECK_LOCK
-            | ItemStateValidator.CHECK_VERSIONING
-            | ItemStateValidator.CHECK_CONSTRAINTS;
-        setPropertyStateValue(pState, operation.getValues(), operation.getValueType(), options);
+        setPropertyStateValue(pState, operation.getValues(), operation.getValueType(), operation.getOptions());

INS32 INS32 INS32 INS32 INS32 INS32 INS32 INS42 UPD42 MOV42 INS42 INS42 INS42 INS42 INS42 UPD42 MOV42 INS42 UPD42 MOV42 INS42 UPD42 MOV42 INS42 UPD42 MOV42 INS32 INS32 INS32 INS42 UPD42 MOV42 INS42 UPD42 MOV42 INS42 UPD42 MOV42 DEL39 DEL42 DEL40 DEL40 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL40 DEL40 DEL27 DEL59 DEL60 DEL40 DEL40 DEL40 DEL40 DEL27 DEL40 DEL40 DEL40 DEL40 DEL27 DEL39 DEL42 DEL40 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL27 DEL59 DEL60 DEL39 DEL42 DEL40 DEL40 DEL40 DEL27 DEL59 DEL60