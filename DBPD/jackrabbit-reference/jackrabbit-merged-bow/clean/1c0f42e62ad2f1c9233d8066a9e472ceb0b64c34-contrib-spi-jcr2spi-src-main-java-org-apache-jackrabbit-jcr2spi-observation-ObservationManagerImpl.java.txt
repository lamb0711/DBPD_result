- replace all EventIterator return values in RepositoryService with EventBundle[]
- remove RepositoryService.addEventListener()/removeEventListener() and introduce getEvents() instead
- added quick description of new design: see org/apache/jackrabbit/spi/package.html
- update spi/project.properties with correct links to external javadoc
- fix package in spi/project.xml


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@468388 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.spi.EventIterator;
+import org.apache.jackrabbit.spi.EventBundle;
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.List;
-    public void onEvent(EventIterator events, boolean isLocal) {
-        List eventList = new ArrayList();
-        while (events.hasNext()) {
-            eventList.add(events.nextEvent());
-        }
-        if (eventList.isEmpty()) {
-            return;
-        }
-        eventList = Collections.unmodifiableList(eventList);
-
+    public void onEvent(EventBundle events) {
-            FilteredEventIterator eventIter = new FilteredEventIterator(eventList, filter, isLocal);
+            FilteredEventIterator eventIter = new FilteredEventIterator(events, filter);
-     * Same as {@link #onEvent(EventIterator, boolean)} with the boolean flag
-     * set to <code>true</code>.
+     * Same as {@link #onEvent(EventBundle)} but only used for local changes
+     * with a <code>ChangeLog</code>.
-    public void onEvent(EventIterator events, ChangeLog changeLog) {
-        onEvent(events, true);
+    public void onEvent(EventBundle events, ChangeLog changeLog) {
+        onEvent(events);

UPD40 UPD43 UPD43 UPD42 UPD66 UPD66 UPD42 MOV43 UPD43 MOV43 UPD42 UPD42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL39 DEL42 DEL44 DEL42 DEL43 DEL42 DEL42 DEL43 DEL14 DEL59 DEL60 DEL42 DEL42 DEL32 DEL42 DEL42 DEL42 DEL42 DEL32 DEL32 DEL21 DEL8 DEL61 DEL42 DEL42 DEL32 DEL41 DEL8 DEL25 DEL42 DEL42 DEL42 DEL42 DEL32 DEL7 DEL21 DEL42 DEL39 DEL69 DEL9