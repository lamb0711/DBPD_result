JCR-2744: Avoid element arrays in PathImpl

Get rid of separate Path.Element objects by making AbstractPath implement both Path and Path.Element

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997384 13f79535-47bb-0310-9956-ffa450edef68

-    private final Element element;
+    private final String identifier;
-    public IdentifierPath(Element element) {
-        assert element != null;
-        assert element.denotesIdentifier();
-        this.element = element;
+    public IdentifierPath(String identifier) {
+        assert identifier != null;
+        this.identifier = identifier;
+    public String getIdentifier() {
+        return identifier;
+    }
+
-        return new Element[] { element };
-    }
-
-    public Element getNameElement() {
-        return element;
+        return new Element[] { getNameElement() };
-        return element.getString();
+        return "[" + identifier + "]";
-        } else if (that instanceof IdentifierPath) {
-            IdentifierPath path = (IdentifierPath) that;
-            return element.equals(path.element);
+        } else if (that instanceof Path) {
+            Path path = (Path) that;
+            return path.denotesIdentifier()
+                && identifier.equals(path.getIdentifier());
-        return element.hashCode();
+        return identifier.hashCode();

MOV31 UPD43 UPD43 UPD42 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 INS27 UPD42 UPD42 INS45 INS42 INS45 UPD42 UPD42 INS32 UPD43 INS42 UPD42 UPD43 INS27 UPD42 INS32 INS32 UPD43 INS42 INS42 UPD42 MOV42 MOV42 INS32 UPD42 INS42 INS42 DEL42 DEL42 DEL32 DEL6 DEL42 DEL42 DEL42 DEL32 DEL40 DEL32