work in progress

- add invalidate(), refresh() to NodeState (missing impl)
- rename ItemState.refresh(ChangeLog) to persisted(ChangeLog)
- Item.refresh(boolean) must not call checkStatus. a stale, invalidated
  item may be refreshed unless its state has a terminal status (removed, stale_destroyed). ItemState.refresh() is therefore called after reverting transient modifications only.
- javadoc and some comments

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@474319 13f79535-47bb-0310-9956-ffa450edef68

-            PropertyState propState = (PropertyState) state;
-            // add to path
+            // property-state: add to path
-     * 
+     *
+
+                        // temporarily set the state to MODIFIED in order to
+                        // inform listeners.
-     * @throws IllegalStateException if this state is a 'session' state.
+     * @throws IllegalStateException if this state is a 'workspace' state.
-    abstract void refresh(ChangeLog changeLog) throws IllegalStateException;
+    abstract void persisted(ChangeLog changeLog) throws IllegalStateException;
-     * Reverts this item state to its initial status and adds itself to the Set
-     * of <code>affectedItemStates</code> if it reverted itself.
+     * Reverts this item state to its initial status (i.e. removing any transient
+     * modifications and adds itself to the Set of <code>affectedItemStates</code>
+     * if it is reverted itself.
-     *                           themselfes.
+     * themselfes.

UPD42 UPD66 UPD66 UPD66 INS66 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL11 DEL59 DEL60