JCR-3282 Optimize usage of norms

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1325820 13f79535-47bb-0310-9956-ffa450edef68

-                doc.add(createFulltextField(internalValue, metadata));
+                doc.add(createFulltextField(internalValue, metadata, false));
+     * @deprecated use {@link #createFulltextField(InternalValue, Metadata, boolean)} instead.
-        return new LazyTextExtractorField(
-                parser, value, metadata, executor,
-                supportHighlighting, getMaxExtractLength());
+        return createFulltextField(value, metadata, true);
+    }
+
+    /**
+     * Creates a fulltext field for the reader <code>value</code>.
+     *
+     * @param value the binary value
+     * @param metadata document metatadata
+     * @param withNorms if norm information should be added for this value
+     * @return a lucene field.
+     */
+    protected Fieldable createFulltextField(
+            InternalValue value, Metadata metadata, boolean withNorms) {
+        return new LazyTextExtractorField(parser, value, metadata, executor,
+                supportHighlighting, getMaxExtractLength(), withNorms);

INS31 MOV29 INS83 INS43 INS42 INS44 INS44 INS8 INS29 INS44 INS65 INS42 INS43 INS42 INS43 INS42 INS41 INS65 INS65 INS65 INS65 INS65 INS39 INS42 INS66 INS65 INS66 INS42 INS42 INS32 INS66 INS42 INS66 INS42 INS66 INS42 INS66 INS66 INS68 INS42 INS42 INS42 INS9 INS42 INS42 INS69 INS69 INS69 INS43 INS43 INS39 INS42 INS42 INS9