JCR-2272: Errors during concurrent session import of nodes with same UUIDs

Merge changes back to trunk.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1176546 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.id.NodeIdFactory;
+import javax.jcr.RepositoryException;
-     * @param id           the id of the node
+     * @param id the id of the node, or <code>null</code> for a new node id
-     * @throws IllegalStateException if the manager is not in edit mode.
+     * @throws RepositoryException if the node state can not be created
-    NodeState createNew(NodeId id, Name nodeTypeName,
-                        NodeId parentId) throws IllegalStateException;
+    NodeState createNew(
+            NodeId id, Name nodeTypeName, NodeId parentId)
+            throws RepositoryException;
-    NodeIdFactory getNodeIdFactory();
-

MOV26 UPD40 UPD43 UPD42 UPD66 UPD42 UPD66 DEL42 DEL43 DEL42 DEL31