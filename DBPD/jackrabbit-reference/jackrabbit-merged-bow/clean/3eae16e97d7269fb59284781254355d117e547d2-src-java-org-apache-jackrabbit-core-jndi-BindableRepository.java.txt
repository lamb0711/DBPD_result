JCR-120: Moved the shutdown hook from RepositoryImpl to BindableRepository.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@307128 13f79535-47bb-0310-9956-ffa450edef68

+ * <p>
+ * A JVM shutdown hook is used to make sure that the initialized
+ * repository is properly closed when the JVM shuts down. The
+ * {@link RegistryHelper#unregisterRepository(Context, String)}
+ * method should be used to explicitly close the repository if
+ * needed. 
-     * Creates the underlying repository instance.
+     * Creates the underlying repository instance. A shutdown hook is
+     * registered to make sure that the initialized repository gets closed
+     * when the JVM shuts down. 
+        Runtime.getRuntime().addShutdownHook(new Thread() {
+            public void run() {
+                shutdown();
+            }
+        });

INS66 INS66 INS66 INS65 INS66 INS66 INS21 INS68 UPD66 INS66 INS66 INS32 INS42 INS42 INS69 INS69 INS32 INS42 INS14 INS43 INS43 INS42 INS42 INS43 INS1 INS42 INS42 INS42 INS31 INS83 INS39 INS42 INS8 INS21 INS32 INS42