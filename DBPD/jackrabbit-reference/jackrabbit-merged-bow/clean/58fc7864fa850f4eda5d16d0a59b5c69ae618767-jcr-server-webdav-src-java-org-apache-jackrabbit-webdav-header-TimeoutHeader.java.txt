- add methods for observation to client
- minor improvements to observation impl in jcr-server
- fix client LockMethod and adjust LockDiscovery accordingly
- fix client MergeMethod adjust corresponding Info object accordingly
- improve UpdateInfo
- use CodedURLHeader instaed of building locktoken header manually

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@421206 13f79535-47bb-0310-9956-ffa450edef68

-     * Parse the request timeout header and convert the timeout value
-     * into a long indicating the number of milliseconds until expiration time
-     * is reached.<br>
-     * NOTE: If the requested timeout is 'infinite' {@link Long.MAX_VALUE}
-     * is returned. If the header is missing or is in an invalid format that
-     * cannot be parsed, the default value is returned.
+     * Parses the request timeout header and converts it into a new
+     * <code>TimeoutHeader</code> object.<br>The default value is used as
+     * fallback if the String is not parseable.
+     * @return a new TimeoutHeader object.
+     */
+    public static TimeoutHeader parse(HttpServletRequest request, long defaultValue) {
+        String timeoutStr = request.getHeader(HEADER_TIMEOUT);
+        long timeout = parse(timeoutStr, defaultValue);
+        return new TimeoutHeader(timeout);
+    }
+
+    /**
+     * Parses the given timeout String and converts the timeout value
+     * into a long indicating the number of milliseconds until expiration time
+     * is reached.<br>
+     * NOTE: If the timeout String equals to {@link #TIMEOUT_INFINITE 'infinite'}
+     * {@link Long.MAX_VALUE} is returned. If the Sting is invalid or is in an
+     * invalid format that cannot be parsed, the default value is returned.
+     *
+     * @param timeoutStr
+     * @param defaultValue
-    public static TimeoutHeader parse(HttpServletRequest request, long defaultValue) {
-        String timeoutStr = request.getHeader(HEADER_TIMEOUT);
+    public static long parse(String timeoutStr, long defaultValue) {
-        return new TimeoutHeader(timeout);
+        return timeout;

INS31 INS29 INS83 INS83 MOV43 INS42 MOV44 INS44 INS8 INS39 INS44 INS65 MOV65 INS65 INS65 INS39 INS42 MOV60 INS60 MOV41 INS65 INS43 INS42 INS41 INS66 INS66 INS66 INS42 INS66 INS39 INS59 UPD66 UPD66 INS65 UPD66 UPD66 INS42 INS42 INS42 INS42 INS32 INS66 INS42 INS42 INS42