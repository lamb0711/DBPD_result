JCR-4246 java.security.acl deprecated in Java 10, marked for removal in Java 11



git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1827242 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.api.security.principal.GroupPrincipal;
-        if (!(principal instanceof Group) || principal instanceof EveryonePrincipal) {
+        if (!GroupPrincipals.isGroup(principal) || principal instanceof EveryonePrincipal) {
-        Group gr = (Group) principal;
-            return new ItemBasedCheckedGroup(gr, provider);
+            return new ItemBasedCheckedGroup(principal, provider);
-            return new CheckedGroup(gr, provider);
+            return new CheckedGroup(principal, provider);
-    private class CheckedGroup implements Group, JackrabbitPrincipal {
+    private class CheckedGroup implements Group, GroupPrincipal, JackrabbitPrincipal {
-        final Group delegatee;
+        final Principal delegatee;
-        private CheckedGroup(Group delegatee, PrincipalProvider provider) {
+        private CheckedGroup(Principal delegatee, PrincipalProvider provider) {
+        @Override
-            return delegatee.isMember(member);
+            return GroupPrincipals.isMember(delegatee, member);
-            Iterator<? extends Principal> it = Collections.list(delegatee.members()).iterator();
+            Iterator<? extends Principal> it = Collections.list(GroupPrincipals.members(delegatee)).iterator();
-        private ItemBasedCheckedGroup(Group delegatee, PrincipalProvider provider) {
+        private ItemBasedCheckedGroup(Principal delegatee, PrincipalProvider provider) {

INS26 INS40 INS43 INS42 UPD43 INS78 UPD42 UPD43 INS42 UPD43 UPD42 UPD42 INS32 UPD42 INS42 INS42 INS42 INS42 UPD42 UPD42 UPD42 INS42 DEL42 DEL42 DEL43 DEL62 DEL36 DEL42 DEL43 DEL42 DEL42 DEL43 DEL42 DEL11 DEL59 DEL60