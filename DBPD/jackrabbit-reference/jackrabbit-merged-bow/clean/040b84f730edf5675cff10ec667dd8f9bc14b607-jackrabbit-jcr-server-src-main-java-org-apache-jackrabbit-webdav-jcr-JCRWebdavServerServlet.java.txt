JCR-3027 - apply modified patch (original author: chad davis)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1151397 13f79535-47bb-0310-9956-ffa450edef68

+     * Optional 'concurrency-level' parameter defining the concurrency level
+     * within the jcr-server. If the parameter is omitted the internal default
+     * value (50) is used.
+     */
+    public final static String INIT_PARAM_CONCURRENCY_LEVEL = "concurrency-level";
+
+    /**
-            server = new JCRWebdavServer(repository, getSessionProvider());
+            String cl = getInitParameter(INIT_PARAM_CONCURRENCY_LEVEL);
+            if (cl != null) {
+                try {
+                    server = new JCRWebdavServer(repository, getSessionProvider(), Integer.parseInt(cl));
+                } catch (NumberFormatException e) {
+                    log.debug("Invalid value '" + cl+ "' for init-param 'concurrency-level'. Using default instead.");
+                    server = new JCRWebdavServer(repository, getSessionProvider());
+                }
+            } else {
+                server = new JCRWebdavServer(repository, getSessionProvider());
+            }
-     * @param request
+     * @param request The webdav request
+     * @param ctx The servlet context.
+     *
+     * @return the JCR repository to be used by this servlet

INS23 INS29 INS83 INS83 INS83 INS43 INS59 INS8 INS65 INS42 INS42 INS45 INS25 MOV41 INS65 INS65 INS66 INS66 INS66 MOV27 INS8 INS66 INS42 INS66 INS66 MOV60 INS60 MOV25 INS43 INS59 INS27 INS8 INS8 INS42 INS42 INS32 INS42 INS33 INS54 INS21 INS42 INS42 INS8 INS12 INS7 INS21 INS44 MOV8 INS42 INS14 INS7 INS43 INS42 INS21 INS43 INS42 INS32 INS42 INS14 INS42 INS32 INS42 INS42 INS43 INS42 INS32 INS32 INS42 INS42 INS27 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS45 DEL8