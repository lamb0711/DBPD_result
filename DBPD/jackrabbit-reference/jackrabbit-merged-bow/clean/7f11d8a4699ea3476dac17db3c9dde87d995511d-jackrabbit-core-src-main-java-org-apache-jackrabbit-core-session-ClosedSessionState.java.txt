JCR-890: concurrent read-only access to a session

Add SessionState.perform(SessionOperation) for centralizing the control of any kinds of session operations.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@956896 13f79535-47bb-0310-9956-ffa450edef68

-    public void checkAlive() throws RepositoryException {
+    public void perform(SessionOperation operation) throws RepositoryException {
-                "This session has been closed; see the chained exception"
-                + " for where the session was closed", exception);
+                "Unable to perform " + operation + " since this session"
+                + " has been closed. See the chained exception for a trace"
+                + " of where the session was closed", exception);

UPD42 INS44 INS43 INS42 INS42 INS45 INS42 INS45 UPD45 UPD45