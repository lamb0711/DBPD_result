JCR-1104: JSR 283 support
- JQOM work in progress

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@573622 13f79535-47bb-0310-9956-ffa450edef68

-    protected ExecutablePreparedQuery query;
+    protected ExecutablePreparedQuery prepQuery;
-        this.query = handler.createExecutablePreparedQuery(
-                session, itemMgr, createQOMTree(statement, language));
+        setExecutableQuery(handler.createExecutablePreparedQuery(
+                session, itemMgr, createQOMTree(statement, language)));
-        statement = node.getProperty(session.getJCRName(QName.JCR_STATEMENT)).getString();
-        language = node.getProperty(session.getJCRName(QName.JCR_LANGUAGE)).getString();
-        query = handler.createExecutablePreparedQuery(
-                session, itemMgr, createQOMTree(statement, language));
+        this.statement = node.getProperty(session.getJCRName(QName.JCR_STATEMENT)).getString();
+        this.language = node.getProperty(session.getJCRName(QName.JCR_LANGUAGE)).getString();
+        setExecutableQuery(handler.createExecutablePreparedQuery(
+                session, itemMgr, createQOMTree(statement, language)));
-        this.query = handler.createExecutablePreparedQuery(session, itemMgr, qomTree);
+        setExecutableQuery(handler.createExecutablePreparedQuery(
+                session, itemMgr, qomTree));
-            query.bindValue(session.getQName(varName), value);
+            prepQuery.bindValue(session.getQName(varName), value);
+     * Sets the executable query.
+     *
+     * @param query the executable query.
+     */
+    private void setExecutableQuery(ExecutablePreparedQuery query) {
+        super.query = query;
+        this.prepQuery = query;
+    }
+
+    /**

INS31 INS29 INS83 INS39 INS42 INS44 INS8 UPD42 INS65 INS65 INS43 INS42 INS21 INS21 INS32 INS32 INS32 INS66 INS42 INS66 INS42 INS7 INS7 INS42 MOV32 INS22 INS22 INS42 MOV32 INS42 MOV32 INS47 INS42 INS22 INS42 INS52 INS42 INS52 INS42 INS42 INS52 INS42 UPD42 DEL52 DEL42 DEL22 DEL7 DEL42 DEL42 DEL42 DEL7 DEL52 DEL42 DEL22 DEL7