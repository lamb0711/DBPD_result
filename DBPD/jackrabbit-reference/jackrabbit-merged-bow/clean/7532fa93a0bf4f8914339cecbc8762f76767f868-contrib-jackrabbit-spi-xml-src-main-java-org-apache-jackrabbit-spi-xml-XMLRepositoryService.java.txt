adjust to latest changes

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@555537 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+import java.util.ArrayList;
+import javax.jcr.nodetype.NoSuchNodeTypeException;
-    public Iterator getNodeTypeDefinitions(
-            SessionInfo session) {
-        return Arrays.asList(types).iterator();
-    }
-
-    public Batch createBatch(ItemId itemId, SessionInfo sessionInfo)
+    public Batch createBatch(SessionInfo sessionInfo, ItemId itemId)
+     * @see org.apache.jackrabbit.spi.RepositoryService#getQNodeTypeDefinitions(org.apache.jackrabbit.spi.SessionInfo)
+     */
+    public Iterator getQNodeTypeDefinitions(SessionInfo sessionInfo) throws RepositoryException {
+        return Arrays.asList(types).iterator();
+    }
+
+    /* (non-Javadoc)
+     * @see org.apache.jackrabbit.spi.RepositoryService#getQNodeTypeDefinitions(org.apache.jackrabbit.spi.SessionInfo, QName[])
+     */
+    public Iterator getQNodeTypeDefinitions(SessionInfo sessionInfo, QName[] qNames) throws RepositoryException {
+        List l = new ArrayList();
+        List qNameList = Arrays.asList(qNames);
+        for (int i = 0; i < types.length && !qNameList.isEmpty(); i++) {
+            if (qNameList.contains(types[i].getQName())) {
+                l.add(types[i]);
+                qNameList.remove(types[i].getQName());
+            }
+        }
+        if (!qNameList.isEmpty()) {
+            // not for all names nodetypes exist -> throw
+            StringBuffer message = new StringBuffer("No such nodetypes: ");
+            for (Iterator it = qNameList.iterator(); it.hasNext();) {
+                message.append(it.next().toString()).append(", ");
+            }
+            throw new NoSuchNodeTypeException(message.toString());
+        }
+        return l.iterator();
+    }
+
+    /* (non-Javadoc)
-            String srcWorkspaceName) throws NoSuchWorkspaceException,
+                       String srcWorkspaceName) throws NoSuchWorkspaceException,

INS26 INS26 INS26 MOV31 INS40 INS40 INS40 MOV44 INS31 UPD42 INS43 INS83 INS43 INS42 INS44 INS44 INS43 INS8 UPD42 INS42 INS42 INS43 INS42 INS5 INS42 INS42 INS60 INS60 INS24 INS25 INS41 INS42 INS43 INS85 INS43 INS59 INS43 INS59 INS58 INS27 INS37 INS8 INS38 INS8 INS32 INS42 INS42 INS42 INS14 INS42 INS42 INS32 INS39 INS59 INS27 INS38 INS42 INS25 INS32 INS60 INS24 INS53 INS42 INS42 INS43 INS42 INS42 INS42 INS42 INS34 INS42 INS40 INS32 INS32 INS8 INS42 INS42 INS43 INS59 INS58 INS32 INS8 INS14 INS42 INS42 INS42 INS42 INS42 INS32 INS21 INS21 INS42 INS42 INS14 INS43 INS59 INS42 INS42 INS21 INS43 INS32 INS2 INS42 INS32 INS32 INS43 INS45 INS42 INS42 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS2 INS42 INS42 INS32 INS42 INS42 INS42 INS32 INS42 INS45 INS42 INS42 INS2 INS42 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42