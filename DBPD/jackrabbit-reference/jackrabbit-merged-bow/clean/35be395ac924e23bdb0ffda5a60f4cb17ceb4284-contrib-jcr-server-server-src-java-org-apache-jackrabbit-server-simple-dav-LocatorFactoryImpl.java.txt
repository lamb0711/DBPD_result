- [JCR-84] WebDAV LocatorFactoryImpl$Locator.getHref() constructs root resource URLs incorrectly
- adapting for jcr-locking support
- adding nodetype reports

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@159607 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.log4j.Logger;
+ *
+ * @todo improve special handling of root item....
+    /** the default logger */
+    private static final Logger log = Logger.getLogger(LocatorFactoryImpl.class);
+
+	// remove the configured repository prefix from the path
+	// special treatment for root item, that has no name but '/' path.
+	    // remove trailing '/' that is not part of the itemPath except for the root item.
-            return prefix + itemPath + (isCollection ? "/" : "");
+	    // avoid doubled trainling '/' for the root item
+	    String suffix = (isCollection && !isRootLocation()) ? "/" : "";
+            return prefix + itemPath + suffix;

INS26 INS40 INS23 INS65 INS29 INS83 INS83 INS83 INS43 INS59 INS66 INS65 INS42 INS42 INS32 INS66 INS42 INS42 INS57 INS60 INS41 INS43 INS43 INS59 INS27 INS42 INS42 INS42 INS16 INS42 INS42 INS42 INS36 MOV45 MOV45 INS27 INS42 INS38 INS32 INS42 DEL42 DEL42 DEL42 DEL16 DEL36 DEL27 DEL41