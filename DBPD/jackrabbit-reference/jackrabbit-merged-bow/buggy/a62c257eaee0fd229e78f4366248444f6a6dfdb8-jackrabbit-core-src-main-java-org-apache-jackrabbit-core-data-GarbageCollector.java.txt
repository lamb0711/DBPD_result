JCR-926: global data store: add DataStore to constructors

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@570407 13f79535-47bb-0310-9956-ffa450edef68

-    private final int sleepBetweenEvents;
+    private int testDelay;
-    // TODO Observation: it is up to the implementation whether changes made to
-    // the subtree below jcr:system trigger events.
-     * @param sleepBetweenEvents the number of milliseconds to sleep while processing events (0 to avoid delays in the application)
-    public GarbageCollector(ScanEventListener callback, int sleepBetweenNodes, int sleepBetweenEvents) {
+    public GarbageCollector(ScanEventListener callback, int sleepBetweenNodes) {
-        this.sleepBetweenEvents = sleepBetweenEvents;
+    
+    /**
+     * When testing the garbage collection, a delay class is tested, 
+     * @param testDelay the delay in milliseconds
+     */
+    public void setTestDelay(int testDelay) {
+        this.testDelay = testDelay;
+    }
-            if(sleepBetweenEvents > 0) {
+            if(testDelay > 0) {
-                    Thread.sleep(sleepBetweenEvents);
+                    Thread.sleep(testDelay);
-                            recurse(n, sleepBetweenEvents);
+                            recurse(n, testDelay);

INS31 INS29 INS83 INS39 INS42 INS44 INS8 UPD42 INS65 INS65 INS39 INS42 INS21 INS66 INS42 INS66 INS7 INS22 INS42 INS52 INS42 UPD42 UPD42 UPD42 DEL83 DEL42 DEL66 DEL65 DEL39 DEL42 DEL44 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21