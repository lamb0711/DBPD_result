JCR-1154 A database data store implementation

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@597027 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
+
-     * From now on, update the modified date of an object even when reading from it.
+     * From now on, update the modified date of an object even when accessing it.
-     * or when a new link is added to an existing object.
+     * or when a new link is added to an existing object. When this setting is enabled,
+     * even getLength() will update the modified date.
-    void updateModifiedDateOnRead(long before);
+    void updateModifiedDateOnAccess(long before);
-     * @param min
+     * @param min the minimum time
+     * @throws DataStoreException 
-    int deleteAllOlderThan(long min);
+    int deleteAllOlderThan(long min) throws DataStoreException;
+     * 
+     * @return an iterator over all DataIdentifier objects
+     * @throws DataStoreException if the list could not be read
-    Iterator getAllIdentifiers();
+    Iterator getAllIdentifiers() throws DataStoreException;
+     * @throws RepositoryException 
-    void init(String homeDir);
+    void init(String homeDir) throws RepositoryException;
+    /**
+     * Close the data store
+     * 
+     * @throws DataStoreException if a problem occured
+     */
+    void close() throws DataStoreException;
+    
+    /**
+     * Clear the in-use list. This is only used for testing to make the the garbage collection
+     * think that objects are no longer in use.
+     */
+    void clearInUse();
+

INS26 INS40 INS31 INS31 UPD42 INS43 INS43 INS43 INS29 INS39 INS42 INS43 INS29 INS39 INS42 INS65 INS42 INS65 INS65 INS42 INS65 INS42 INS65 INS65 INS42 INS65 UPD66 UPD66 INS66 INS66 INS42 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS66