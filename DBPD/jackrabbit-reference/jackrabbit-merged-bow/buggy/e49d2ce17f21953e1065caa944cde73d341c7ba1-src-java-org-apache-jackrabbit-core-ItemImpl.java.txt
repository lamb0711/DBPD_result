porting to v0.16.4 of the jsr170 specification

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@161260 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.ChildNodeDef;
+import org.apache.jackrabbit.core.nodetype.NodeDef;
-import org.apache.jackrabbit.core.nodetype.PropertyDefImpl;
+import org.apache.jackrabbit.core.nodetype.PropertyDefinitionImpl;
+import javax.jcr.ItemExistsException;
-import javax.jcr.nodetype.NodeDef;
-import javax.jcr.nodetype.PropertyDef;
+import javax.jcr.nodetype.NodeDefinition;
+import javax.jcr.nodetype.PropertyDefinition;
+import javax.jcr.nodetype.NoSuchNodeTypeException;
-                NodeDef def = node.getDefinition();
+                NodeDefinition def = node.getDefinition();
-                ChildNodeDef[] cnda = ent.getMandatoryNodeDefs();
+                NodeDef[] cnda = ent.getMandatoryNodeDefs();
-                    ChildNodeDef cnd = cnda[i];
+                    NodeDef cnd = cnda[i];
-                PropertyDefImpl def = (PropertyDefImpl) prop.getDefinition();
+                PropertyDefinitionImpl def = (PropertyDefinitionImpl) prop.getDefinition();
-            throws VersionException, LockException, RepositoryException {
+            throws VersionException, LockException,
+            ConstraintViolationException, RepositoryException {
-            NodeDef def = node.getDefinition();
+            NodeDefinition def = node.getDefinition();
-            PropertyDef def = prop.getDefinition();
+            PropertyDefinition def = prop.getDefinition();
-    public void remove() throws VersionException, LockException, RepositoryException {
+    public void remove()
+            throws VersionException, LockException,
+            ConstraintViolationException, RepositoryException {
-            throws AccessDeniedException, ConstraintViolationException,
-            InvalidItemStateException, ReferentialIntegrityException,
-            VersionException, LockException, RepositoryException {
+            throws AccessDeniedException, ItemExistsException,
+            ConstraintViolationException, InvalidItemStateException,
+            ReferentialIntegrityException, VersionException, LockException,
+            NoSuchNodeTypeException, RepositoryException {
-    public boolean isSame(Item otherItem) {
+    public boolean isSame(Item otherItem) throws RepositoryException {
+        // check state of this instance
+        sanityCheck();
+

MOV26 INS26 INS26 UPD40 UPD40 INS40 UPD40 UPD40 INS40 INS43 INS43 INS43 INS43 INS43 INS42 INS42 INS42 INS42 INS42 INS21 INS32 INS42 UPD43 UPD43 UPD42 UPD42 INS43 UPD5 UPD43 INS42 MOV43 UPD42 UPD43 UPD43 UPD42 UPD42 DEL42 DEL43