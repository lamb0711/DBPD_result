JCR-2113 : WIP (Contribution by Alfusainey Jallow)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1640892 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.config.CacheBehaviour;
+import org.apache.jackrabbit.jcr2spi.security.authorization.AccessControlProvider;
-import org.apache.jackrabbit.spi.RepositoryService;
-        wspManager = createManager(
-                config.getRepositoryService(),
-                sessionInfo,
-                session.getCacheBehaviour(),
-                session.getPollTimeout());
+        wspManager = createManager(config, sessionInfo);
+    /**
+     * @see ManagerProvider#getAccessControlProvider() ()
+     */
+    public AccessControlProvider getAccessControlProvider() throws RepositoryException {
+        return wspManager.getAccessControlProvider();
+    }
+
-     * @param service the RepositoryService
+     * @param config the RepositoryConfiguration
-     * @param cacheBehaviour the desired cache behavior
-     * @param pollTimeout the desired pollTimeout.
-     * @return state manager
+     * @return workspace manager
-    protected WorkspaceManager createManager(RepositoryService service,
-                                             SessionInfo sessionInfo,
-                                             CacheBehaviour cacheBehaviour,
-                                             int pollTimeout) throws RepositoryException {
-        return new WorkspaceManager(service, sessionInfo, cacheBehaviour,
-                pollTimeout, session.isSupportedOption(Repository.OPTION_OBSERVATION_SUPPORTED));
+    protected WorkspaceManager createManager(RepositoryConfig config,
+                                             SessionInfo sessionInfo) throws RepositoryException {
+        return new WorkspaceManager(config, sessionInfo, session.isSupportedOption(Repository.OPTION_OBSERVATION_SUPPORTED));

MOV26 UPD40 INS31 INS29 INS83 INS43 INS42 INS43 INS8 INS65 INS42 INS42 INS41 UPD43 UPD42 INS68 INS66 INS32 UPD42 UPD66 UPD66 UPD42 INS42 INS42 INS42 INS42 UPD42 MOV42 DEL40 DEL26 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL42 DEL32 DEL42 DEL66 DEL65 DEL42 DEL66 DEL65 DEL42 DEL43 DEL42 DEL44 DEL39 DEL42 DEL44 DEL42 DEL42