Simplify QueryHandler. Added support for jcr:score and jcr:path.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@152654 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.search.QueryImpl;
-import javax.jcr.ItemNotFoundException;
+import javax.jcr.Node;
- * @todo The SearchManager currently uses the system session to obtain an
+ * todo The SearchManager currently uses the system session to obtain an
-        return handler.createQuery(session, itemMgr, statement, language);
+        return new QueryImpl(session, itemMgr, handler, statement, language);
-     * @param absPath absolute path to a node of type nt:query.
+     * @param node a node of type nt:query.
-     * @throws ItemNotFoundException if there is no node at <code>absPath</code>.
-                             String absPath)
-            throws InvalidQueryException, ItemNotFoundException, RepositoryException {
-        return handler.createQuery(session, itemMgr, absPath);
+                             Node node)
+            throws InvalidQueryException, RepositoryException {
+        return new QueryImpl(session, itemMgr, handler, node);

MOV26 INS26 INS40 UPD40 INS65 MOV66 UPD66 MOV66 MOV66 MOV66 MOV66 MOV66 MOV66 UPD43 UPD42 INS14 UPD42 UPD66 UPD42 INS14 INS43 INS42 INS42 INS42 INS42 INS42 INS43 INS42 INS42 INS42 INS42 INS42 INS42 DEL65 DEL65 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32 DEL42 DEL66 DEL65 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL42 DEL32