JCR-3395 : separate entries used for permission eval from ACEs exposed in JCR

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1370139 13f79535-47bb-0310-9956-ffa450edef68

-import javax.jcr.security.AccessControlEntry;
-import java.security.acl.Group;
-    public void filterEntries(List<AccessControlEntry> entries, List<AccessControlEntry>... resultLists) {
+    public void filterEntries(List<Entry> entries, List<Entry>... resultLists) {
-            List<AccessControlEntry> userAces = resultLists[0];
-            List<AccessControlEntry> groupAces = resultLists[1];
+            List<Entry> userAces = resultLists[0];
+            List<Entry> groupAces = resultLists[1];
-            for (AccessControlEntry ace : entries) {
+            for (Entry ace : entries) {
-                    if (ace.getPrincipal() instanceof Group) {
+                    if (ace.isGroupEntry()) {
-    private boolean matches(AccessControlEntry ace) {
-        if (principalNames == null || principalNames.contains(ace.getPrincipal().getName())) {
-            ACLTemplate.Entry entry = (ACLTemplate.Entry) ace;
+    private boolean matches(Entry entry) {
+        if (principalNames == null || principalNames.contains(entry.getPrincipalName())) {

MOV44 UPD74 UPD42 UPD74 UPD42 UPD43 UPD42 UPD43 UPD43 UPD42 UPD42 UPD42 UPD74 UPD74 MOV32 UPD43 UPD43 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 INS32 MOV42 UPD42 MOV42 DEL40 DEL26 DEL40 DEL26 DEL32 DEL42 DEL43 DEL62 DEL42 DEL32 DEL40 DEL43 DEL42 DEL40 DEL43 DEL42 DEL11 DEL59 DEL60