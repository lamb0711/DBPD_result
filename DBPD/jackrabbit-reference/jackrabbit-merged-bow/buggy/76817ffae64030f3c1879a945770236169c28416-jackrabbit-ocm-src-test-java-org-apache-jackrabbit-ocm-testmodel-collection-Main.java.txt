Fix for JCR-1325 and review support for Collection & Map. 
The mapping definition can be simplified with parameterized collections and maps. In this case the ElementClass setting is not necessary.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@650283 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.List;
+
-    @Collection (elementClassName=Element.class, collectionClassName=HashMapElement.class)
-    private HashMapElement hashMap;
+    @Collection (elementClassName=Element.class)
+    private HashMapElement hashMapElement;
-    @Collection (elementClassName=Element.class, collectionClassName=ArrayListElement.class)
-    private ArrayListElement list;
+
+    // 3 ways to implements a collection :
+
+    // inherit from ManageableCollection
+    @Collection (elementClassName=Element.class)
+    private ArrayListElement arrayListElement;
+
+    // standard collection with Type - no need to specify the elementClassName
+    @Collection private List<Element> list;
+
+    // Custom List
+    @Collection
+    private CustomList customList;
-    public HashMapElement getHashMap()
+    public HashMapElement getHashMapElement()
-        return hashMap;
+        return hashMapElement;
-    public void setHashMap(HashMapElement hashMap)
+    public void setHashMapElement(HashMapElement hashMap)
-        this.hashMap = hashMap;
+        this.hashMapElement = hashMap;
-    public ArrayListElement getList()
+    public ArrayListElement getArrayListElement()
-		return list;
+		return arrayListElement;
-    public void setList(ArrayListElement list)
+    public void setArrayListElement(ArrayListElement list)
-		this.list = list;
+		this.arrayListElement = list;
+	public List<Element> getList() {
+		return list;
+	}
+	public void setList(List<Element> list) {
+		this.list = list;
+	}
+	public CustomList getCustomList() {
+		return customList;
+	}
+	public void setCustomList(CustomList customList) {
+		this.customList = customList;
+	}
+

INS26 MOV31 MOV31 INS40 INS23 INS23 INS31 INS31 INS31 INS31 INS59 INS78 INS83 INS74 MOV59 INS78 INS83 INS43 INS59 UPD42 UPD42 INS83 MOV43 INS42 INS8 INS83 INS39 INS42 MOV44 INS8 INS74 INS44 INS83 INS43 INS42 INS8 INS83 INS39 INS42 INS44 INS8 UPD42 INS42 INS42 INS43 INS43 INS42 INS42 INS42 INS41 INS21 INS43 INS43 INS74 INS42 INS42 INS41 INS43 INS42 INS21 INS42 INS42 UPD42 INS42 INS7 INS42 INS42 INS43 INS43 INS42 INS42 INS7 INS22 INS42 INS42 INS42 INS22 INS42 UPD42 INS52 INS42 INS52 INS42 DEL42 DEL42 DEL43 DEL57 DEL80 DEL42 DEL42 DEL43 DEL57 DEL80