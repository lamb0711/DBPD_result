[JCR-127] Speedup Startup
          Removing one layer in versioning, thus mapping virtual items
          directly from the peristence layer.


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@191172 13f79535-47bb-0310-9956-ffa450edef68

-package org.apache.jackrabbit.core.version.persistence;
+package org.apache.jackrabbit.core.version;
-import org.apache.jackrabbit.core.version.InternalFrozenVersionHistory;
-import org.apache.jackrabbit.core.version.InternalVersion;
-import org.apache.jackrabbit.core.version.InternalVersionHistory;
-import org.apache.jackrabbit.core.version.InternalVersionItem;
-import org.apache.jackrabbit.core.version.PersistentVersionManager;
- *
+ * Implements a <code>InternalFrozenVersionHistory</code>
-class InternalFrozenVHImpl extends InternalFreezeImpl implements InternalFrozenVersionHistory {
+public class InternalFrozenVHImpl extends InternalFreezeImpl
+        implements InternalFrozenVersionHistory {
-    private PersistentNode node;
+    private NodeStateEx node;
-    protected InternalFrozenVHImpl(PersistentVersionManager vMgr, PersistentNode node,
-                                   InternalVersionItem parent) {
+    public InternalFrozenVHImpl(VersionManagerImpl vMgr, NodeStateEx node,
+                                InternalVersionItem parent) {
+
-     * Returns the name of this frozen version history
-     *
-     * @return
+     * {@inheritDoc}
+    /**
+     * {@inheritDoc}
+     */
-            return getVersionManager().getVersion(getVersionHistoryId(), getBaseVersionId());
+            InternalVersionHistory history = getVersionManager().getVersionHistory(getVersionHistoryId());
+            return history.getVersion(getBaseVersionId());

UPD40 INS83 INS65 UPD43 UPD83 INS29 INS66 UPD42 UPD43 UPD43 INS65 INS65 UPD42 UPD42 INS65 INS65 INS60 INS43 INS59 INS32 INS42 INS42 MOV32 INS42 INS42 MOV32 UPD42 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL40 DEL26 DEL66 DEL65 DEL65