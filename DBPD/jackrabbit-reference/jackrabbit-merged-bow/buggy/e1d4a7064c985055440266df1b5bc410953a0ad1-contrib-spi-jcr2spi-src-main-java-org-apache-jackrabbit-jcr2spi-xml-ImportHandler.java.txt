JCR-996 Name and Path interfaces in SPI
JCR-1169 Distribution of commons classes


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@586065 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.AbstractNamespaceResolver;
-import org.apache.jackrabbit.name.QName;
+import org.apache.jackrabbit.namespace.AbstractNamespaceResolver;
+import org.apache.jackrabbit.namespace.NamespaceResolver;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.NameFactory;
+import org.apache.jackrabbit.conversion.NameResolver;
+import org.apache.jackrabbit.conversion.ParsingNameResolver;
-import org.xml.sax.Locator;
+    private final NameFactory nameFactory;
-    private Locator locator;
+    private final NameResolver nameResolver;
-                         NamespaceRegistry nsReg) {
+                         NamespaceRegistry nsReg, NameFactory nameFactory) {
+        this.nameFactory = nameFactory;
+        nameResolver = new ParsingNameResolver(nameFactory, nsContext);
-            systemViewXML = QName.NS_SV_URI.equals(namespaceURI);
+            systemViewXML = Name.NS_SV_URI.equals(namespaceURI);
-                targetHandler = new SysViewImportHandler(importer, nsContext);
+                targetHandler = new SysViewImportHandler(importer, nsContext, nameResolver);
-                targetHandler = new DocViewImportHandler(importer, nsContext);
+                targetHandler = new DocViewImportHandler(importer, nsContext, nameResolver, nameFactory);
-    /**
-     * {@inheritDoc}
-     */
-    public void setDocumentLocator(Locator locator) {
-        this.locator = locator;
-    }
-
-            if (QName.NS_DEFAULT_URI.equals(uri)) {
+            if (Name.NS_DEFAULT_URI.equals(uri)) {
-                return QName.NS_DEFAULT_URI;
+                return Name.NS_DEFAULT_URI;
-            if (QName.NS_DEFAULT_URI.equals(uri)) {
+            if (Name.NS_DEFAULT_URI.equals(uri)) {
-                if (uri.equals(nsContext.getURI(QName.NS_EMPTY_PREFIX))) {
-                    return QName.NS_EMPTY_PREFIX;
+                if (uri.equals(nsContext.getURI(Name.NS_EMPTY_PREFIX))) {
+                    return Name.NS_EMPTY_PREFIX;

MOV26 INS26 INS26 UPD40 UPD40 UPD40 UPD40 INS40 INS40 INS23 INS83 UPD43 INS83 INS83 INS43 INS59 INS44 UPD42 UPD42 UPD42 MOV42 INS42 INS43 INS42 INS21 INS21 INS42 INS7 INS7 INS22 INS42 INS42 INS14 INS52 INS42 INS43 INS42 INS42 UPD40 UPD40 INS42 UPD40 UPD40 UPD40 UPD40 INS42 INS42 INS42 DEL65 DEL65 DEL29 DEL83 DEL39 DEL42 DEL43 DEL42 DEL44 DEL52 DEL42 DEL22 DEL42 DEL7 DEL21 DEL8 DEL31