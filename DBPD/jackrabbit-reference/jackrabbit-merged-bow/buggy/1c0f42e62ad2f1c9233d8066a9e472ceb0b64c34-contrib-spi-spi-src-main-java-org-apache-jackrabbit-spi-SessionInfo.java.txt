- replace all EventIterator return values in RepositoryService with EventBundle[]
- remove RepositoryService.addEventListener()/removeEventListener() and introduce getEvents() instead
- added quick description of new design: see org/apache/jackrabbit/spi/package.html
- update spi/project.properties with correct links to external javadoc
- fix package in spi/project.xml


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@468388 13f79535-47bb-0310-9956-ffa450edef68

+ * TODO: implement as bean and instanticate on client?
+ * TODO: use credentials instead of UserID?
+ * TODO: add name/value parameter facility
+ * TODO: server returns set of name/value pairs which should be set by the client?
+ *
+
+    /**
+     * Returns the identifier of the last {@link EventBundle} delivered using
+     * this <code>SessionInfo</code>. When a <code>SessionInfo</code> is
+     * initially aquired the returned event identifier is set to the last
+     * <code>EventBundle</code> created by the SPI implementation previously to
+     * the call to {@link RepositoryService#obtain(javax.jcr.Credentials, String)
+     * RepositoryService.obtain()}. If there was no previous event <code>null</code>
+     * is returned. Thus a <code>null</code> value will effectively return all
+     * events that occurred since the start of the SPI server.
+     * <p/>
+     * For implementations, that do not support observation this method will
+     * always return <code>null</code>.
+     *
+     * @return the identifier of the last {@link EventBundle} delivered using
+     * this <code>SessionInfo</code>.
+     */
+    public String getLastEventBundleId();
+
+    /**
+     * Sets the identifier of the last {@link EventBundle} delivered using this
+     * <code>SessionInfo</code>. This identifier will be used to retrieve the
+     * subsequent event bundles when calling {@link RepositoryService#getEvents(SessionInfo, long)}.
+     *
+     * @param eventBundleId the identifier of the last {@link EventBundle}
+     *                      delivered using this <code>SessionInfo</code>.
+     */
+    public void setLastEventBundleId(String eventBundleId);

INS31 INS31 INS29 INS83 INS43 INS42 INS29 INS83 INS39 INS42 INS44 INS66 INS66 INS66 INS66 INS65 INS65 INS42 INS65 INS65 INS43 INS42 INS66 INS65 INS66 INS66 INS66 INS66 INS66 INS65 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS66 INS66 INS65 INS66 INS42 INS66 INS65 INS66 INS42 INS42 INS68 INS66 INS42 INS42 INS68 INS42 INS42 INS42 INS69 INS69 INS42 INS42 INS69 INS69 INS43 INS43 INS43 INS39 INS40 INS42 INS42