Provide a second createWorkspace() method that allows to explicitly specify a workspace configuration template.

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@380142 13f79535-47bb-0310-9956-ffa450edef68

-     * Creates a new workspace configuration with the specified name.
+     * Creates a new workspace configuration with the specified name and the
+     * specified workspace <code>template</.
+     * <p/>
+     * @param template the workspace template
-    public synchronized WorkspaceConfig createWorkspaceConfig(String name)
+    private synchronized WorkspaceConfig internalCreateWorkspaceConfig(String name,
+                                                                       Element template)
+     * Creates a new workspace configuration with the specified name.
+     * This method creates a workspace configuration subdirectory,
+     * copies the workspace configuration template into it, and finally
+     * adds the created workspace configuration to the repository.
+     * The initialized workspace configuration object is returned to
+     * the caller.
+     *
+     * @param name workspace name
+     * @return created workspace configuration
+     * @throws ConfigurationException if creating the workspace configuration
+     *                                failed
+     */
+    public WorkspaceConfig createWorkspaceConfig(String name)
+            throws ConfigurationException {
+
+        // use workspace template from repository.xml
+        return internalCreateWorkspaceConfig(name, template);
+    }
+
+    /**
+     * Creates a new workspace configuration with the specified name. This
+     * method uses the provided workspace <code>template</code> to create the
+     * repository config instead of the template that is present in the
+     * repository configuration.
+     * <p/>
+     * This method creates a workspace configuration subdirectory,
+     * copies the workspace configuration template into it, and finally
+     * adds the created workspace configuration to the repository.
+     * The initialized workspace configuration object is returned to
+     * the caller.
+     *
+     * @param name workspace name
+     * @param template the workspace template
+     * @return created workspace configuration
+     * @throws ConfigurationException if creating the workspace configuration
+     *                                failed
+     */
+    public WorkspaceConfig createWorkspaceConfig(String name,
+                                                 InputSource template)
+            throws ConfigurationException {
+        ConfigurationParser parser = new ConfigurationParser(new Properties());
+        Element workspaceTemplate = parser.parseXML(template);
+        return internalCreateWorkspaceConfig(name, workspaceTemplate);
+    }
+
+    /**

INS31 INS31 INS29 UPD83 UPD42 INS44 MOV29 INS83 INS43 INS42 INS44 INS43 INS8 INS29 INS83 INS43 INS42 INS44 INS44 INS43 INS8 INS65 INS65 INS65 INS65 INS65 INS43 INS42 INS42 INS43 INS42 INS42 INS41 INS65 INS65 INS65 INS65 INS65 INS42 INS43 INS42 INS43 INS42 INS42 INS60 INS60 INS41 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS42 INS42 INS32 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS66 INS42 INS66 INS42 INS66 INS66 INS42 INS66 INS66 INS42 INS42 INS43 INS59 INS43 INS59 INS32 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS42 INS32 INS42 INS42 INS42 INS43 INS14 INS42 INS42 INS42 INS42 INS43 INS42