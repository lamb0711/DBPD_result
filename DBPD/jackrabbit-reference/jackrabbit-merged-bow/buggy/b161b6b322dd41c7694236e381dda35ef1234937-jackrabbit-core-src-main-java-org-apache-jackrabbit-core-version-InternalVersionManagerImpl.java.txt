JCR-1972: Preserving UUID and document version history on repository migration

Add the new NodeImpl.checkin(Calendar) and VersionManagerImpl.checkin(String, Calendar)signatures based on contribution by Paco Avila.


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@800483 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Calendar;
-    public InternalVersion checkin(final Session session, final NodeStateEx node)
+    public InternalVersion checkin(
+            final Session session,
+            final NodeStateEx node, final Calendar created)
-                InternalVersionHistory vh;
+                InternalVersionHistoryImpl vh;
-                    vh = getVersionHistory(histId);
-                    return internalCheckin((InternalVersionHistoryImpl) vh, node, false);
+                    vh = (InternalVersionHistoryImpl) getVersionHistory(histId);
+                    return internalCheckin(vh, node, false, created);
-                    vh = getVersionHistoryOfNode(node.getNodeId());
-                    return internalCheckin((InternalVersionHistoryImpl) vh, node, true);
+                    vh = (InternalVersionHistoryImpl) getVersionHistoryOfNode(node.getNodeId());
+                    return internalCheckin(vh, node, true, created);

INS26 INS40 INS44 INS83 INS43 INS42 INS42 UPD43 UPD42 INS11 INS42 INS42 INS11 INS42 INS42 MOV43 MOV32 MOV43 MOV32 DEL42 DEL11 DEL42 DEL11