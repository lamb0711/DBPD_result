JCR-2010: Retrieve row path via hierarchy manager instead of node

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@758193 13f79535-47bb-0310-9956-ffa450edef68

- * Implements a NodeIterator that returns the nodes in document order.
+ * Implements a ScoreNodeIterator that returns the score nodes in document order.
-class DocOrderNodeIteratorImpl implements ScoreNodeIterator {
+class DocOrderScoreNodeIterator implements ScoreNodeIterator {
-    private static final Logger log = LoggerFactory.getLogger(DocOrderNodeIteratorImpl.class);
+    private static final Logger log = LoggerFactory.getLogger(DocOrderScoreNodeIterator.class);
-    private NodeIteratorImpl orderedNodes;
+    private ScoreNodeIterator orderedNodes;
-     * Creates a <code>DocOrderNodeIteratorImpl</code> that orders the nodes in
+     * Creates a <code>DocOrderScoreNodeIterator</code> that orders the nodes in
-    DocOrderNodeIteratorImpl(ItemManager itemMgr,
+    DocOrderScoreNodeIterator(ItemManager itemMgr,
-        return nextNodeImpl();
+        return nextScoreNodes();
-    public Node nextNode() {
-        return nextNodeImpl();
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public NodeImpl nextNodeImpl() {
+    public ScoreNode[] nextScoreNodes() {
-        return orderedNodes.nextNodeImpl();
+        return orderedNodes.nextScoreNodes();
-    /**
-     * {@inheritDoc}
-     */
-    public float getScore() {
-        initOrderedIterator();
-        return orderedNodes.getScore();
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public ScoreNode[] getScoreNodes() {
-        initOrderedIterator();
-        return orderedNodes.getScoreNodes();
-    }
-
-        orderedNodes = new NodeIteratorImpl(itemMgr, nodes, selectorIndex);
+        orderedNodes = new ScoreNodeIteratorImpl(nodes);

MOV31 UPD42 UPD43 UPD42 UPD42 UPD66 UPD42 MOV21 UPD66 UPD43 UPD42 UPD42 UPD42 UPD43 UPD42 DEL42 DEL32 DEL21 DEL65 DEL65 DEL29 DEL83 DEL42 DEL43 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL65 DEL65 DEL29 DEL83 DEL42 DEL43 DEL42 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL65 DEL65 DEL29 DEL83 DEL39 DEL42 DEL42 DEL32 DEL21 DEL42 DEL42 DEL32 DEL41 DEL8 DEL31 DEL42 DEL42