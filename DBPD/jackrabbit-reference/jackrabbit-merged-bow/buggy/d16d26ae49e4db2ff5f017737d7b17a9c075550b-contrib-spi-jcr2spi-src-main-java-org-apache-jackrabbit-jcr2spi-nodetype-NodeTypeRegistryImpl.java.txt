JCR-1040: JCR2SPI remove node operation missing in submitted SPI batch

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@563794 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.jcr2spi.hierarchy.PropertyEntry;
-                    PropertyState mixins = nodeState.getPropertyState(QName.JCR_MIXINTYPES);
-                    QValue[] values = mixins.getValues();
-                    allNtNames = new QName[values.length + 1];
-                    for (int i = 0; i < values.length; i++) {
-                        allNtNames[i] = values[i].getQName();
-                    }
-                    allNtNames[values.length] = primaryType;
+                    PropertyEntry pe = nodeState.getNodeEntry().getPropertyEntry(QName.JCR_MIXINTYPES, true);
+                    if (pe != null) {
+                        PropertyState mixins = pe.getPropertyState();
+                        QValue[] values = mixins.getValues();
+                        allNtNames = new QName[values.length + 1];
+                        for (int i = 0; i < values.length; i++) {
+                            allNtNames[i] = values[i].getQName();
+                        }
+                        allNtNames[values.length] = primaryType;
+                    } // else: no jcr:mixinTypes property exists -> ignore
-                    // ignore: apparently no jcr:mixinTypes property exists.
+                    // unexpected error: ignore

INS26 INS40 INS8 INS60 INS25 INS43 INS59 INS27 MOV8 INS42 INS42 INS32 INS42 INS33 INS32 INS42 INS40 INS9 INS42 INS42 UPD42 DEL40