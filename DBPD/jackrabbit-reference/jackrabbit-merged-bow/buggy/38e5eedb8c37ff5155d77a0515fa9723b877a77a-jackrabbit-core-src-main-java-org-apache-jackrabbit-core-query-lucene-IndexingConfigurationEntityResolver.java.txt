JCR-1369: indexing-rules should allow wildcards for (global) property names

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@677952 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.Map;
+import java.util.HashMap;
+import java.util.Collections;
-     * The system id of the indexing configuration DTD.
+     * Maps system ids to DTD resource names.
-    private static final String SYSTEM_ID =
-            "http://jackrabbit.apache.org/dtd/indexing-configuration-1.0.dtd";
+    private static final Map SYSTEM_IDS;
-    /**
-     * The name of the DTD resource.
-     */
-    private static final String RESOURCE_NAME = "indexing-configuration-1.0.dtd";
+    static {
+        Map systemIds = new HashMap();
+        systemIds.put(
+                "http://jackrabbit.apache.org/dtd/indexing-configuration-1.0.dtd",
+                "indexing-configuration-1.0.dtd");
+        systemIds.put(
+                "http://jackrabbit.apache.org/dtd/indexing-configuration-1.1.dtd",
+                "indexing-configuration-1.1.dtd");
+        SYSTEM_IDS = Collections.unmodifiableMap(systemIds);
+    }
-        if (SYSTEM_ID.equals(systemId)) {
-            InputStream in = getClass().getResourceAsStream(RESOURCE_NAME);
+        String resourceName = (String) SYSTEM_IDS.get(systemId);
+        if (resourceName != null) {
+            InputStream in = getClass().getResourceAsStream(resourceName);

INS26 INS26 INS26 INS40 INS40 INS40 INS28 INS43 INS83 INS8 INS42 UPD42 INS60 INS21 INS21 INS21 INS60 UPD66 INS43 INS59 INS32 INS32 INS7 MOV43 INS59 INS27 INS42 INS42 INS14 INS42 INS42 INS45 INS45 INS42 INS42 INS45 INS45 INS42 INS32 INS42 INS11 INS42 INS33 INS43 INS42 INS42 INS42 MOV43 INS32 INS42 INS42 INS42 INS42 UPD42 DEL45 DEL66 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL45 DEL59 DEL23 DEL42 DEL42 DEL42 DEL32