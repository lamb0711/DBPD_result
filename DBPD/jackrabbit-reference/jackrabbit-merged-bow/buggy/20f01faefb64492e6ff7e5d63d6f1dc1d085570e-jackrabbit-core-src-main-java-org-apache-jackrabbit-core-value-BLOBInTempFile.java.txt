JCR-1154: Throw DataStoreException instead of IOException

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@591286 13f79535-47bb-0310-9956-ffa450edef68

+     * The input stream is always closed by this method.
-    private BLOBInTempFile(InputStream in, boolean temp) throws IOException {
+    private BLOBInTempFile(InputStream in, boolean temp) throws RepositoryException {
+        } catch (IOException e) {
+            throw new RepositoryException("Error creating temporary file", e); 
-            if (out != null) {
-                out.close();
+            try {
+                in.close();
+            } catch (IOException e) {
+                // ignore
-            in.close();
+            if (out != null) {
+                try {
+                    out.close();
+                } catch (IOException e) {
+                    throw new RepositoryException("Error creating temporary file", e); 
+                }
+            }
-    static BLOBInTempFile getInstance(InputStream in, boolean temp) throws IOException {
+    static BLOBInTempFile getInstance(InputStream in, boolean temp) throws RepositoryException {

INS43 UPD43 INS42 UPD42 INS66 INS12 INS44 INS8 INS54 MOV43 INS42 INS53 INS8 INS12 INS8 INS14 MOV21 INS44 INS8 INS54 INS43 INS45 INS42 INS43 INS42 MOV8 INS12 INS42 INS42 INS44 INS8 INS43 INS42 INS53 INS42 INS14 INS43 INS45 INS42 INS42