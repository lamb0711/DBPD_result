porting to v0.16.4 of the jsr170 specification

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@161260 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.nodetype.NodeDefImpl;
+import org.apache.jackrabbit.core.nodetype.NodeDefinitionImpl;
-import org.apache.jackrabbit.core.nodetype.PropertyDefImpl;
+import org.apache.jackrabbit.core.nodetype.PropertyDefinitionImpl;
-import javax.jcr.nodetype.NodeDef;
-import javax.jcr.nodetype.PropertyDef;
+import javax.jcr.nodetype.NodeDefinition;
+import javax.jcr.nodetype.PropertyDefinition;
-    private final NodeDef rootNodeDef;
+    private final NodeDefinition rootNodeDef;
-                SessionImpl session, NodeDef rootNodeDef, String rootNodeUUID) {
+                SessionImpl session, NodeDefinition rootNodeDef,
+                String rootNodeUUID) {
-    private NodeDef getDefinition(NodeState state)
+    private NodeDefinition getDefinition(NodeState state)
-        NodeDefImpl def = session.getNodeTypeManager().getNodeDef(defId);
+        NodeDefinitionImpl def = session.getNodeTypeManager().getNodeDefinition(defId);
-            def = parent.getApplicableChildNodeDef(cne.getName(), state.getNodeTypeName());
+            def = parent.getApplicableChildNodeDefinition(cne.getName(), state.getNodeTypeName());
-    private PropertyDef getDefinition(PropertyState state)
+    private PropertyDefinition getDefinition(PropertyState state)
-        PropertyDefImpl def = session.getNodeTypeManager().getPropDef(defId);
+        PropertyDefinitionImpl def = session.getNodeTypeManager().getPropertyDefinition(defId);
-            def = parent.getApplicablePropertyDef(state.getName(), state.getType(), state.isMultiValued());
+            def = parent.getApplicablePropertyDefinition(state.getName(), state.getType(), state.isMultiValued());
-/*
-        try {
-            getItem(path);
-            return true;
-        } catch (PathNotFoundException pnfe) {
-            return false;
-        } catch (AccessDeniedException ade) {
-            // item exists but the session has not been granted read access
-            return false;
-        } catch (RepositoryException re) {
-            return false;
-        }
-*/
-/*
-        try {
-            getItem(id);
-            return true;
-        } catch (ItemNotFoundException infe) {
-            return false;
-        } catch (AccessDeniedException ade) {
-            // item exists but the session has not been granted read access
-            return false;
-        } catch (RepositoryException re) {
-            return false;
-        }
-*/
-    NodeImpl createNodeInstance(NodeState state, NodeDef def)
+    NodeImpl createNodeInstance(NodeState state, NodeDefinition def)
-            InternalVersion version = session.getVersionManager().getVersion(state.getUUID());
+            InternalVersion version =
+                    session.getVersionManager().getVersion(state.getUUID());
-            InternalVersionHistory history = session.getVersionManager().getVersionHistory(state.getUUID());
+            InternalVersionHistory history =
+                    session.getVersionManager().getVersionHistory(state.getUUID());
-        NodeDef def = getDefinition(state);
+        NodeDefinition def = getDefinition(state);
-    PropertyImpl createPropertyInstance(PropertyState state, PropertyDef def) {
+    PropertyImpl createPropertyInstance(PropertyState state,
+                                        PropertyDefinition def) {
-    PropertyImpl createPropertyInstance(PropertyState state) throws RepositoryException {
+    PropertyImpl createPropertyInstance(PropertyState state)
+            throws RepositoryException {
-        PropertyDef def = getDefinition(state);
+        PropertyDefinition def = getDefinition(state);

UPD40 UPD40 UPD40 UPD40 UPD43 UPD43 UPD43 UPD42 UPD43 UPD42 UPD42 UPD43 UPD43 UPD42 UPD43 UPD43 UPD42 UPD43 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42