re-implementing Workspace methods clone, copy, importXML [work in progress...]
plus various minor fixes and cosmetical changes



git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@158927 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.core.InternalValue;
-import org.apache.jackrabbit.core.util.ValueHelper;
-import javax.jcr.BinaryValue;
-import javax.jcr.Value;
+import java.io.ByteArrayInputStream;
-                    // convert values to native type and set property
-                    Value[] vals = new Value[currentPropValues.size()];
+                    // convert values to native type
+                    InternalValue[] vals = new InternalValue[currentPropValues.size()];
+                                vals[i] = InternalValue.create(new ByteArrayInputStream(baos.toByteArray()));
-                            vals[i] = new BinaryValue(baos.toByteArray());
-                            vals[i] = ValueHelper.convert(value, currentPropType);
+                            vals[i] = InternalValue.create(value,
+                                    currentPropType, nsContext);

MOV26 UPD40 UPD40 UPD5 UPD43 UPD42 UPD5 UPD43 UPD42 INS21 INS7 UPD42 UPD42 INS42 MOV2 INS32 INS42 INS42 INS14 INS43 MOV32 INS42 DEL40 DEL26 DEL42 DEL43 DEL14 DEL7 DEL21