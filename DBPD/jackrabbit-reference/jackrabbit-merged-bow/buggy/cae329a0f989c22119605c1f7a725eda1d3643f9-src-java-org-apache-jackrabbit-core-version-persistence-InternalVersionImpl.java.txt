reworked transaction support, contributed by dominique

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@151380 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.state.UpdateOperation;
-    private void storePredecessors(UpdateOperation upd) throws RepositoryException {
+    private void storePredecessors() throws RepositoryException {
-        node.setPropertyValues(upd, VersionManager.PROPNAME_PREDECESSORS, PropertyType.STRING, values);
+        node.setPropertyValues(VersionManager.PROPNAME_PREDECESSORS, PropertyType.STRING, values);
-    void internalDetach(UpdateOperation upd) throws RepositoryException {
+    void internalDetach() throws RepositoryException {
-            succ[i].internalDetachPredecessor(upd, this);
+            succ[i].internalDetachPredecessor(this);
-        storePredecessors(upd);
+        storePredecessors();
-    private void internalDetachPredecessor(UpdateOperation upd, InternalVersion v) throws RepositoryException {
+    private void internalDetachPredecessor(InternalVersion v) throws RepositoryException {
-        storePredecessors(upd);
+        storePredecessors();

DEL40 DEL26 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42 DEL42 DEL42 DEL43 DEL42 DEL44 DEL42