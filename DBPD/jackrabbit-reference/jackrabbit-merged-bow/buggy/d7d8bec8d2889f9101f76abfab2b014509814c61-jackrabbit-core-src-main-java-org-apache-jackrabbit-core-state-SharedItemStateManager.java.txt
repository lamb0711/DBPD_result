JCR-2699: Improve read/write concurrency

Move the persistence manager access outside of the synchronized block in SISM to allow improvements to PM concurrency to take effect.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1002065 13f79535-47bb-0310-9956-ffa450edef68

+            // not found in cache, load from persistent storage
+            state = loadItemState(id);
+            state.setStatus(ItemState.STATUS_EXISTING);
-                state = cache.retrieve(id);
-                if (state == null) {
-                    // not found in cache, load from persistent storage
-                    state = loadItemState(id);
-                    state.setStatus(ItemState.STATUS_EXISTING);
+                ItemState cachedState = cache.retrieve(id);
+                if (cachedState == null) {
+                } else {
+                    state = cachedState;

MOV8 MOV60 MOV41 INS51 INS52 INS8 INS60 INS25 INS43 INS59 INS27 INS8 INS8 INS42 INS42 MOV32 INS42 INS33 MOV21 MOV21 INS21 INS7 INS42 INS42 DEL42 DEL7 DEL21 DEL42 DEL33 DEL27 DEL52 DEL51 DEL8 DEL25 DEL8