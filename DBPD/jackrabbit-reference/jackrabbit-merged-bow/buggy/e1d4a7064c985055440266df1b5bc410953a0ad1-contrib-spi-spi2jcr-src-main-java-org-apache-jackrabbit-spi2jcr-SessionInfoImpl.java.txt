JCR-996 Name and Path interfaces in SPI
JCR-1169 Distribution of commons classes


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@586065 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.AbstractNamespaceResolver;
-import org.apache.jackrabbit.name.NamespaceResolver;
+import org.apache.jackrabbit.spi.NameFactory;
+import org.apache.jackrabbit.spi.PathFactory;
+import org.apache.jackrabbit.namespace.NamespaceResolver;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import org.apache.jackrabbit.conversion.ParsingNameResolver;
+import org.apache.jackrabbit.conversion.NameResolver;
+import org.apache.jackrabbit.conversion.PathResolver;
+import org.apache.jackrabbit.conversion.ParsingPathResolver;
+import org.apache.jackrabbit.conversion.DefaultNamePathResolver;
+import org.apache.jackrabbit.namespace.AbstractNamespaceResolver;
-    private final NamespaceResolver resolver;
+    private final NamePathResolver resolver;
-     *                    JCR session.
+     * @param nameFactory
+     * @param pathFactory
-    SessionInfoImpl(Session session, Credentials credentials) throws RepositoryException {
+    SessionInfoImpl(Session session, Credentials credentials,
+                    NameFactory nameFactory, PathFactory pathFactory) throws RepositoryException {
-       
-        this.resolver = new AbstractNamespaceResolver() {
+        final NamespaceResolver nsResolver = new AbstractNamespaceResolver() {
-        
+
+        final NameResolver nResolver = new ParsingNameResolver(nameFactory, nsResolver);
+        final PathResolver pResolver = new ParsingPathResolver(pathFactory, nResolver);
+
+        this.resolver = new DefaultNamePathResolver(nResolver, pResolver);
-    NamespaceResolver getNamespaceResolver() {
+    NamePathResolver getNamePathResolver() {

INS26 INS26 INS26 INS26 INS26 INS26 INS26 INS26 INS40 INS40 UPD40 INS40 INS40 INS40 INS40 INS40 INS40 UPD40 UPD43 INS44 INS44 UPD43 UPD42 UPD42 INS65 INS65 INS43 INS42 INS43 INS42 INS60 INS60 INS60 UPD42 INS42 INS42 INS42 INS42 INS83 INS43 INS59 INS83 INS43 INS59 INS83 INS43 INS59 INS42 INS42 MOV14 INS42 INS42 INS14 INS42 INS42 INS14 INS14 INS43 INS42 INS42 INS43 INS42 INS42 INS43 INS42 INS42 INS42 INS42 INS42 DEL66