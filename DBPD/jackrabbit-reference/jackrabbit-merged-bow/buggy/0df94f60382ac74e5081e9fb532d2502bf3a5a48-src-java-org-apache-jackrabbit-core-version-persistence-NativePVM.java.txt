- fixing verisoning issues (version labels still missing)

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@151144 13f79535-47bb-0310-9956-ffa450edef68

-
+     * name of the 'jcr:versionableId' property
+     */
+    public static final QName PROPNAME_VERSIONABLE_ID = new QName(NamespaceRegistryImpl.NS_JCR_URI, "versionableId");
+    /**
+            long t1 = System.currentTimeMillis();
-            log.info("loaded " + idsByExternal.size() + " virtual ids.");
+            long t2 = System.currentTimeMillis();
+            log.info("loaded " + idsByExternal.size() + " virtual ids in " + (t2-t1) + "ms.");
+     * Retrusn the version history that corresponds to the versionable node of
+     * the given uuid.
+     * @param uuid
+     * @return
+     */
+    private InternalVersionHistoryImpl getHistoryByVersionableUUID(String uuid) {
+        // @TODO: implement
+        return null;
+    }
+
+    /**
-        InternalVersionHistoryImpl hist = (InternalVersionHistoryImpl) getVersionHistory(node.internalGetUUID());
+        InternalVersionHistoryImpl hist = getHistoryByVersionableUUID(node.internalGetUUID());
-
-    private class Update implements UpdateOperation {
-
-        public NodeState createNew(String uuid, QName nodeTypeName, String parentUUID) {
-            return null;  //To change body of implemented methods use File | Settings | File Templates.
-        }
-
-        public PropertyState createNew(QName propName, String parentUUID) {
-            return null;  //To change body of implemented methods use File | Settings | File Templates.
-        }
-
-        public void store(ItemState state) {
-            //To change body of implemented methods use File | Settings | File Templates.
-        }
-
-        public void store(NodeReferences refs) {
-            //To change body of implemented methods use File | Settings | File Templates.
-        }
-
-        public void destroy(ItemState state) {
-            //To change body of implemented methods use File | Settings | File Templates.
-        }
-
-        public void end() throws ItemStateException {
-            //To change body of implemented methods use File | Settings | File Templates.
-        }
-    }
-

INS23 INS31 INS29 INS83 INS83 INS83 MOV43 INS59 INS29 UPD83 MOV83 MOV43 UPD42 MOV42 MOV44 MOV8 INS65 INS42 INS14 INS65 INS65 INS65 INS66 MOV43 INS40 INS45 INS66 INS66 INS42 MOV43 INS60 INS60 MOV32 INS39 INS59 INS39 INS59 UPD42 INS42 INS32 INS42 INS32 INS42 INS42 INS42 INS42 UPD45 INS36 INS45 INS27 INS42 INS42 DEL11 DEL83 DEL42 DEL42 DEL43 DEL83 DEL42 DEL43 DEL42 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL31 DEL83 DEL42 DEL43 DEL42 DEL42 DEL44 DEL42 DEL43 DEL42 DEL44 DEL33 DEL41 DEL8 DEL31 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL8 DEL31 DEL39 DEL42 DEL43 DEL42 DEL44 DEL8 DEL31 DEL83 DEL39 DEL42 DEL42 DEL43 DEL42 DEL44 DEL8 DEL31 DEL83 DEL39 DEL42 DEL42 DEL43 DEL8 DEL31 DEL55