- adjusting proper startup order for VersionManager
- adding shutdown to persistence manager of versions

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@153192 13f79535-47bb-0310-9956-ffa450edef68

-     * node def id for a unstructured node state
-     */
-    private NodeDefId NDEF_UNSTRUCTURED;
-    /**
+    /**
+     * node def id for a version history root node state
+     */
+    private NodeDefId NDEF_VERSION_HISTORY_ROOT;
-        NDEF_UNSTRUCTURED = new NodeDefId(getNodeTypeManager().getNodeType(NodeTypeRegistry.NT_UNSTRUCTURED).getApplicableChildNodeDef(VersionManager.NODENAME_ROOTVERSION, NodeTypeRegistry.NT_UNSTRUCTURED).unwrap());
+        NDEF_VERSION_HISTORY_ROOT = new NodeDefId(getNodeTypeManager().getNodeType(NodeTypeRegistry.REP_SYSTEM).getApplicableChildNodeDef(VersionManager.NODENAME_HISTORY_ROOT, NodeTypeRegistry.REP_VERSION_STORAGE).unwrap());
-        this.root.setDefinitionId(NDEF_UNSTRUCTURED);
+        this.root.setDefinitionId(NDEF_VERSION_HISTORY_ROOT);

MOV23 MOV21 UPD42 UPD66 UPD42 UPD42 UPD40 UPD40 UPD40