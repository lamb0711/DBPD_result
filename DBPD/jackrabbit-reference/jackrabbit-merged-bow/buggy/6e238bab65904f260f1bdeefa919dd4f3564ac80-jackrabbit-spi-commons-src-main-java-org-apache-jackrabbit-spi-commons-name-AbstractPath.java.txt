JCR-2744: Avoid element arrays in PathImpl

Avoid using Path.getNameElement() where possible

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@997303 13f79535-47bb-0310-9956-ffa450edef68

+        } else if (relative.getLength() > 1) {
+            Path first = relative.getFirstElements();
+            Path last = relative.getLastElement();
+            return resolve(first).resolve(last);
+        } else if (relative.denotesCurrent()) {
+            return new CurrentPath(this);
+        } else if (relative.denotesParent()) {
+            return new ParentPath(this);
+        } else if (relative.denotesName()) {
+            return new NamePath(this, relative.getNameElement());
-            Path path = this;
-            int n = relative.getLength();
-            if (n > 1) {
-                path = resolve(relative.subPath(0, n - 1));
-            }
-            return path.resolve(relative.getNameElement());
+            throw new IllegalArgumentException(
+                    "Unknown path type: " + relative);

INS25 MOV32 MOV8 INS25 INS27 INS8 INS25 MOV32 INS34 MOV60 MOV60 INS41 INS32 INS8 INS25 INS43 INS32 INS42 INS42 INS41 INS32 INS8 INS25 UPD42 INS32 INS42 UPD42 INS32 INS32 INS42 INS42 INS14 UPD42 MOV42 INS42 INS41 INS32 INS8 INS8 INS42 INS42 INS42 INS42 INS42 INS42 INS43 INS52 INS14 MOV42 UPD42 MOV42 MOV41 INS53 INS42 INS43 INS52 INS14 INS14 INS42 INS43 INS52 MOV32 INS43 INS27 INS42 INS42 INS45 UPD42 MOV42 DEL52 DEL39 DEL42 DEL42 DEL32 DEL42 DEL34 DEL27 DEL42 DEL34 DEL34 DEL27 DEL32 DEL32 DEL7 DEL21 DEL8 DEL25 DEL8 DEL25