#0000 - JCR-1232: Merge UUID to NodeId

Replace UUID references with NodeId alternatives from o.a.j.core.query.lucene.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@793015 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.uuid.UUID;
+import org.apache.jackrabbit.core.id.NodeId;
-     * Creates a <code>DocId</code> based on a node UUID.
+     * Creates a <code>DocId</code> based on a UUID.
-     * @param uuid the node uuid.
-     * @return a <code>DocId</code> based on a node UUID.
+     * @param uuid the UUID
+     * @return a <code>DocId</code> based on the UUID.
-        return create(UUID.fromString(uuid));
+        return create(new NodeId(uuid));
-     * Creates a <code>DocId</code> based on a node UUID.
+     * Creates a <code>DocId</code> based on a node id.
-     * @param uuid the node uuid.
-     * @return a <code>DocId</code> based on a node UUID.
+     * @param id the node id
+     * @return a <code>DocId</code> based on the node id
-    static DocId create(UUID uuid) {
-        return new UUIDDocId(uuid);
+    static DocId create(NodeId id) {
+        return new UUIDDocId(id);
-     * <code>DocId</code> based on a UUID.
+     * <code>DocId</code> based on a node id.
-         * The least significant 64 bits of the uuid (bytes 8-15)
+         * The node identifier.
-        private final long lsb;
-
-        /**
-         * The most significant 64 bits of the uuid (bytes 0-7)
-         */
-        private final long msb;
+        private final NodeId id;
-         * Creates a <code>DocId</code> based on a Node uuid.
+         * Creates a <code>DocId</code> based on a node id.
-         * @param uuid the Node uuid.
+         * @param id the node id.
-        UUIDDocId(UUID uuid) {
-            this.lsb = uuid.getLeastSignificantBits();
-            this.msb = uuid.getMostSignificantBits();
+        UUIDDocId(NodeId id) {
+            this.id = id;
-                segDocId = reader.createDocId(new UUID(msb, lsb));
+                segDocId = reader.createDocId(id);
-            return "UUIDDocId(" + new UUID(msb, lsb) + ")";
+            return "UUIDDocId(" + id + ")";
-                docIds[i] = new UUIDDocId(UUID.fromString(uuids[i]));
+                docIds[i] = new UUIDDocId(new NodeId(uuids[i]));
-                sb.append(new UUID(docIds[i].msb, docIds[i].lsb));
+                sb.append(docIds[i].id);

UPD40 UPD43 UPD42 INS43 UPD66 UPD66 UPD66 UPD66 UPD42 UPD66 UPD66 UPD42 UPD66 INS42 UPD42 UPD43 UPD42 INS14 UPD42 UPD66 UPD66 UPD42 UPD66 UPD42 INS43 INS42 INS42 INS42 INS42 UPD42 MOV22 INS42 INS14 UPD42 INS43 MOV2 INS42 DEL42 DEL42 DEL42 DEL32 DEL66 DEL65 DEL29 DEL83 DEL83 DEL39 DEL42 DEL59 DEL23 DEL39 DEL42 DEL42 DEL32 DEL52 DEL42 DEL22 DEL42 DEL42 DEL32 DEL7 DEL21 DEL42 DEL43 DEL42 DEL42 DEL14 DEL42 DEL43 DEL42 DEL42 DEL14 DEL42 DEL42 DEL32 DEL42 DEL43 DEL42 DEL42 DEL2 DEL42 DEL22 DEL14