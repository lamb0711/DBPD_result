JCR-473 Some enhancements to jackrabbit commons (fixed some deprecated calls)


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@421198 13f79535-47bb-0310-9956-ffa450edef68

-import java.io.ByteArrayOutputStream;
-import java.io.IOException;
+import org.apache.jackrabbit.core.value.InternalValue;
+import org.apache.jackrabbit.name.NamespaceResolver;
+import org.apache.jackrabbit.util.Base64;
+import org.apache.jackrabbit.value.ValueHelper;
+import org.apache.jackrabbit.value.ValueFactoryImpl;
-
-import org.apache.jackrabbit.core.value.InternalValue;
-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.util.Base64;
-import org.apache.jackrabbit.value.ValueHelper;
+import java.io.ByteArrayOutputStream;
+import java.io.IOException;
-                    InternalValue.create(ValueHelper.convert(value, type), nsContext);
+                    InternalValue.create(ValueHelper.convert(
+                            value, type, ValueFactoryImpl.getInstance()), nsContext);
-            return ValueHelper.deserialize(value, type, false);
+            return ValueHelper.deserialize(value, type, false, ValueFactoryImpl.getInstance());
-            return ValueHelper.deserialize(value, type, true);
+            return ValueHelper.deserialize(value, type, true, ValueFactoryImpl.getInstance());
-                return InternalValue.create(ValueHelper.convert(value, targetType), nsContext);
+                return InternalValue.create(ValueHelper.convert(
+                        value, targetType, ValueFactoryImpl.getInstance()), nsContext);

MOV26 MOV26 MOV26 MOV26 MOV26 MOV26 INS26 INS40 INS32 INS32 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS32 INS42 INS42