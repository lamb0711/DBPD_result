- adjusting proper startup order for VersionManager


git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@153225 13f79535-47bb-0310-9956-ffa450edef68

-        // add virtual item managers
-        try {
-            itemStateMgr.addVirtualItemStateProvider(versionMgr.getVirtualItemStateProvider(this, itemStateMgr));
-        } catch (Exception e) {
-            throw new RepositoryException("Uanbel to add virtual item state manager.", e);
+        // add virtual item managers only for normal sessions
+        if (!(this instanceof SystemSession)) {
+            try {
+                itemStateMgr.addVirtualItemStateProvider(versionMgr.getVirtualItemStateProvider(this, itemStateMgr));
+            } catch (Exception e) {
+                log.error("Unable to add vmgr: " + e.toString(), e);
+            }
-        // add virtual item managers
-        try {
-            itemStateMgr.addVirtualItemStateProvider(versionMgr.getVirtualItemStateProvider(this, itemStateMgr));
-        } catch (Exception e) {
-            throw new RepositoryException("Uanbel to add virtual item state manager.", e);
+        // add virtual item managers only for normal sessions
+        if (!(this instanceof SystemSession)) {
+            try {
+                itemStateMgr.addVirtualItemStateProvider(versionMgr.getVirtualItemStateProvider(this, itemStateMgr));
+            } catch (Exception e) {
+                log.error("Unable to add vmgr: " + e.toString(), e);
+            }

INS25 INS25 INS38 INS8 INS38 INS8 INS36 MOV54 INS36 MOV54 INS62 INS62 INS52 INS43 INS52 INS43 INS42 INS21 INS42 INS21 INS32 INS32 INS42 INS42 INS27 INS42 INS42 INS42 INS27 INS42 INS45 INS32 INS45 INS32 INS42 INS42 INS42 INS42 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53 DEL42 DEL43 DEL45 DEL42 DEL14 DEL53