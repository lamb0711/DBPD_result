JCR-2715: Improved join query performance

Fix all remaining TCK test failures with the new QOM/SQL2 implementation
and enable it for all QOM/SQL2 queries

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1039888 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.spi.commons.conversion.PathResolver;
+
-                    if (path != null) {
-                        node = node.getNode(path);
+                    String p = node.getPath();
+                    if (path != null && !".".equals(path)) {
+                        if (!"/".equals(p)) {
+                            p += "/";
+                        }
+                        p += path;
-                    return Collections.singleton(node.getPath());
+                    return Collections.singleton(p);

INS26 INS40 INS60 INS43 INS59 INS27 INS42 INS42 MOV32 MOV27 INS38 INS25 INS42 INS32 INS38 INS8 UPD7 INS45 INS42 INS42 INS32 INS21 UPD42 INS42 INS45 INS42 INS42 INS7 INS42 INS45 DEL42 DEL42 DEL42 DEL32