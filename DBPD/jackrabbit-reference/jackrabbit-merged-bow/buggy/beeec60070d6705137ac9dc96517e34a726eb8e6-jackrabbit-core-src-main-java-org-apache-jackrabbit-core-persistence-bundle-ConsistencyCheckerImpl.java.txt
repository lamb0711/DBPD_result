JCR-3665 when the last node of the last batch does not exist anymore it means we most probably did not read until the end of the table and need to start over

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1521013 13f79535-47bb-0310-9956-ffa450edef68

+                NodeId lastId = null;
-                    NodeId lastId = null;
-                for (Map.Entry<NodeId, NodeInfo> entry : allInfos.entrySet()) {
-                    checkBundleConsistency(entry.getKey(), entry.getValue(), allInfos);
+                if (pm.exists(lastId)) {
+                    for (Map.Entry<NodeId, NodeInfo> entry : allInfos.entrySet()) {
+                        checkBundleConsistency(entry.getKey(), entry.getValue(), allInfos);
+                    }
+                } else {
+                    log.info("Failed to read all nodes, starting over");
+                    internalCheckConsistency(uuids, recursive);

MOV60 INS25 INS32 INS8 INS8 INS42 INS42 INS42 MOV70 INS21 INS21 INS32 INS32 INS42 INS42 INS45 INS42 INS42 INS42