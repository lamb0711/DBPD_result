JCR-3185: refactor consistency checks in BundleDBPersistenceManager into a standalone class that could be re-used for other PMs

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1221428 13f79535-47bb-0310-9956-ffa450edef68

+import java.util.ArrayList;
+import java.util.List;
-    public Iterable<NodeId> getAllNodeIds(NodeId after, int maxCount) throws ItemStateException, RepositoryException {
+    public List<NodeId> getAllNodeIds(NodeId after, int maxCount) throws ItemStateException, RepositoryException {
-        return bundleStore.keySet();
+        List<NodeId> result = new ArrayList<NodeId>();
+        result.addAll(bundleStore.keySet());
+        return result;

INS26 INS26 INS40 INS40 UPD74 UPD43 INS60 INS21 UPD42 INS74 INS59 INS32 INS42 INS43 INS43 INS42 INS14 INS42 INS42 MOV32 INS42 INS42 INS74 INS43 INS43 INS42 INS42