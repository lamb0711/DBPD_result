JCR-352: Applied the Lucene 2.0 upgrade patch contributed by Przemo Pakulski.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@486281 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.lucene.search.BooleanClause.Occur;
-            orQuery.add(operand, false, false);
+            orQuery.add(operand, Occur.SHOULD);
-            andQuery.add(operand, true, false);
+            andQuery.add(operand, Occur.MUST);
-            b.add((Query) result[i], false, false);
+            b.add((Query) result[i], Occur.SHOULD);
-                b.add(new TermQuery((Term) it.next()), false, false);
+                b.add(new TermQuery((Term) it.next()), Occur.SHOULD);
-                        and.add(q, true, false);
-                        and.add(context, true, false);
+                        and.add(q, Occur.MUST);
+                        and.add(context, Occur.MUST);
-                    and.add(new TermQuery(new Term(FieldNames.PARENT, "")), true, false);
-                    and.add(new TermQuery(new Term(FieldNames.LABEL, name)), true, false);
+                    and.add(new TermQuery(new Term(FieldNames.PARENT, "")), Occur.MUST);
+                    and.add(new TermQuery(new Term(FieldNames.LABEL, name)), Occur.MUST);
-                constraint.add(context, true, false);
+                constraint.add(context, Occur.MUST);
-            andQuery.add((Query) predicates[i], true, false);
+            andQuery.add((Query) predicates[i], Occur.MUST);
-                andQuery.add(new DescendantSelfAxisQuery(context, nameTest), true, false);
+                andQuery.add(new DescendantSelfAxisQuery(context, nameTest), Occur.MUST);
-                        andQuery.add(subQuery, true, false);
+                        andQuery.add(subQuery, Occur.MUST);
-                        andQuery.add(new ChildAxisQuery(sharedItemMgr, context, null, node.getIndex()), true, false);
+                        andQuery.add(new ChildAxisQuery(sharedItemMgr, context, null, node.getIndex()), Occur.MUST);
-                        andQuery.add(subQuery, true, false);
+                        andQuery.add(subQuery, Occur.MUST);
-                andQuery.add(new ChildAxisQuery(sharedItemMgr, context, nameTest.getTerm().text(), node.getIndex()), true, false);
+                andQuery.add(new ChildAxisQuery(sharedItemMgr, context, nameTest.getTerm().text(), node.getIndex()), Occur.MUST);
-                andQuery.add(new ChildAxisQuery(sharedItemMgr, context, null, node.getIndex()), true, false);
+                andQuery.add(new ChildAxisQuery(sharedItemMgr, context, null, node.getIndex()), Occur.MUST);
-                    andQuery.add((Query) predicates[i], true, false);
+                    andQuery.add((Query) predicates[i], Occur.MUST);
-                andQuery.add(context, true, false);
+                andQuery.add(context, Occur.MUST);
-                    or.add(q, false, false);
+                    or.add(q, Occur.SHOULD);
-                    or.add(new RangeQuery(lower, upper, true, transform[0]), false, false);
+                    or.add(new RangeQuery(lower, upper, true, transform[0]), Occur.SHOULD);
-                    or.add(new RangeQuery(lower, upper, false, transform[0]), false, false);
+                    or.add(new RangeQuery(lower, upper, false, transform[0]), Occur.SHOULD);
-                    or.add(new RangeQuery(lower, upper, true, transform[0]), false, false);
+                    or.add(new RangeQuery(lower, upper, true, transform[0]), Occur.SHOULD);
-                    or.add(new RangeQuery(lower, upper, false, transform[0]), false, false);
+                    or.add(new RangeQuery(lower, upper, false, transform[0]), Occur.SHOULD);
-                notQuery.add(new MatchAllQuery(field), false, false);
+                notQuery.add(new MatchAllQuery(field), Occur.SHOULD);
-                    notQuery.add(q, false, true);
+                    notQuery.add(q, Occur.MUST_NOT);
-                notQuery.add(new TermQuery(new Term(FieldNames.MVP, field)), false, true);
+                notQuery.add(new TermQuery(new Term(FieldNames.MVP, field)), Occur.MUST_NOT);
-                notQuery.add(new MatchAllQuery(field), false, false);
+                notQuery.add(new MatchAllQuery(field), Occur.SHOULD);
-                    and.add(q, true, false);
-                    and.add(svp, true, false);
-                    notQuery.add(and, false, true);
+                    and.add(q, Occur.MUST);
+                    and.add(svp, Occur.MUST);
+                    notQuery.add(and, Occur.MUST_NOT);
-                            and.add(query, true, false);
-                            and.add(nameTest, true, false);
+                            and.add(query, Occur.MUST);
+                            and.add(nameTest, Occur.MUST);
-        and.add(q, true, false);
-        and.add(svp, true, false);
+        and.add(q, Occur.MUST);
+        and.add(svp, Occur.MUST);

INS26 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 INS40 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9 DEL9