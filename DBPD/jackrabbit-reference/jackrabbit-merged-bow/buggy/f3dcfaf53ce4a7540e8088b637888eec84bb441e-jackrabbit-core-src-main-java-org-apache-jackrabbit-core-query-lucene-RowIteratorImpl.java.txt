JCR-1169 Distribution of commons classes (adjust jackrabbit-core)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@590014 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NameException;
-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.NameFormat;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
+import org.apache.jackrabbit.conversion.NameException;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.name.NameConstants;
+import org.apache.jackrabbit.name.NameFactoryImpl;
+import org.apache.jackrabbit.conversion.NamePathResolver;
+import javax.jcr.NamespaceException;
-     * The start QName for the rep:excerpt function: rep:excerpt(
+     * The start Name for the rep:excerpt function: rep:excerpt(
-    private static final QName REP_EXCERPT_LPAR = new QName(
-            QName.NS_REP_URI, EXCERPT_FUNC_LPAR);
+    private static final Name REP_EXCERPT_LPAR = NameFactoryImpl.getInstance().create(
+            Name.NS_REP_URI, EXCERPT_FUNC_LPAR);
-    private final QName[] properties;
+    private final Name[] properties;
-     * The <code>NamespaceResolver</code> of the user <code>Session</code>.
+     * The <code>NamePathResolver</code> of the user <code>Session</code>.
-    private final NamespaceResolver resolver;
+    private final NamePathResolver resolver;
-     * @param properties <code>QName</code> of the select properties.
+     * @param properties <code>Name</code> of the select properties.
-     *                   <code>Session</code>.
-    RowIteratorImpl(ScoreNodeIterator nodes, QName[] properties, NamespaceResolver resolver) {
+    RowIteratorImpl(ScoreNodeIterator nodes, Name[] properties, NamePathResolver resolver) {
-     * @param properties      <code>QName</code> of the select properties.
+     * @param properties      <code>Name</code> of the select properties.
-                    QName[] properties,
-                    NamespaceResolver resolver,
+                    Name[] properties,
+                    NamePathResolver resolver,
-         * Set of select property <code>QName</code>s.
+         * Set of select property <code>Name</code>s.
-                        if (QName.JCR_PATH.equals(properties[i])) {
+                        if (NameConstants.JCR_PATH.equals(properties[i])) {
-                        } else if (QName.JCR_SCORE.equals(properties[i])) {
+                        } else if (NameConstants.JCR_SCORE.equals(properties[i])) {
-                QName prop = NameFormat.parse(propertyName, resolver);
+                Name prop = resolver.getQName(propertyName);
-                    if (QName.JCR_PATH.equals(prop)) {
+                    if (NameConstants.JCR_PATH.equals(prop)) {
-                    } else if (QName.JCR_SCORE.equals(prop)) {
+                    } else if (NameConstants.JCR_SCORE.equals(prop)) {
-         * @param name a QName.
+         * @param name a Name.
-        private boolean isExcerptFunction(QName name) {
-            return name.getNamespaceURI().equals(QName.NS_REP_URI) &&
+        private boolean isExcerptFunction(Name name) {
+            return name.getNamespaceURI().equals(Name.NS_REP_URI) &&
-                        NameFormat.format(REP_EXCERPT_LPAR, resolver));
-            } catch (NoPrefixDeclaredException e) {
+                        resolver.getJCRName(REP_EXCERPT_LPAR));
+            } catch (NamespaceException e) {
-         * @param name a QName.
+         * @param name a Name.
-        private boolean isSpellCheckFunction(QName name) {
-            return name.getNamespaceURI().equals(QName.NS_REP_URI) &&
+        private boolean isSpellCheckFunction(Name name) {
+            return name.getNamespaceURI().equals(Name.NS_REP_URI) &&

INS26 UPD40 UPD40 UPD40 UPD40 UPD40 INS40 UPD43 UPD5 UPD43 UPD42 INS32 UPD43 UPD42 UPD5 UPD43 UPD5 UPD43 UPD66 INS32 INS42 INS40 INS42 UPD42 UPD66 UPD66 UPD43 UPD42 UPD66 UPD43 UPD42 UPD43 UPD43 INS42 INS42 UPD42 UPD42 UPD66 UPD66 UPD42 UPD66 UPD42 UPD43 UPD40 UPD43 UPD40 UPD42 UPD42 UPD42 UPD42 UPD42 UPD42 UPD40 UPD40 UPD40 UPD40 DEL42 DEL43 DEL40 DEL42 DEL14 DEL66 DEL42 DEL42