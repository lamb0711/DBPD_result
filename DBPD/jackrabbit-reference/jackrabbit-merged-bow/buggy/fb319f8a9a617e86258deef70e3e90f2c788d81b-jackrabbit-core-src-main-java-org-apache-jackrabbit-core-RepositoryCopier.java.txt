JCR-2640: Internal repository context

Commit the first draft patch, more updates to come...

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@948757 13f79535-47bb-0310-9956-ffa450edef68

-        NamespaceRegistry sourceRegistry = source.getNamespaceRegistry();
-        NamespaceRegistry targetRegistry = target.getNamespaceRegistry();
+        NamespaceRegistry sourceRegistry = source.context.getNamespaceRegistry();
+        NamespaceRegistry targetRegistry = target.context.getNamespaceRegistry();
-        NodeTypeRegistry sourceRegistry = source.getNodeTypeRegistry();
-        NodeTypeRegistry targetRegistry = target.getNodeTypeRegistry();
+        NodeTypeRegistry sourceRegistry = source.context.getNodeTypeRegistry();
+        NodeTypeRegistry targetRegistry = target.context.getNodeTypeRegistry();
-                source.getVersionManagerImpl().getPersistenceManager(),
-                target.getVersionManagerImpl().getPersistenceManager(),
+                source.context.getInternalVersionManager().getPersistenceManager(),
+                target.context.getInternalVersionManager().getPersistenceManager(),

INS40 INS40 INS40 INS40 INS40 UPD42 INS40 UPD42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42