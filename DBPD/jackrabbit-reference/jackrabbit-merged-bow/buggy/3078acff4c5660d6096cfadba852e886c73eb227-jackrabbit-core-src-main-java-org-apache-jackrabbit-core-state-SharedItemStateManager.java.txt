JCR-2699: Improve read/write concurrency

It's better to allow the occasional cache overwrite than to block concurrent threads. The locking in SessionState and SISM already prevent concurrent read/write operations that could possibly lead to inconsistencies.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1004223 13f79535-47bb-0310-9956-ffa450edef68

-            synchronized (this) {
-                // Use a double check to ensure that the cache entry is
-                // not created twice. We don't synchronize the entire
-                // method to allow the first cache retrieval to proceed
-                // even when another thread is loading a new item state.
-                ItemState cachedState = cache.retrieve(id);
-                if (cachedState == null) {
-                    // put it in cache
-                    cache.cache(state);
-                    // set parent container
-                    state.setContainer(this);
-                } else {
-                    state = cachedState;
-                }
-            }
+            state.setContainer(this);
+            cache.cache(state);

MOV8 MOV60 MOV25 MOV41 MOV27 MOV21 MOV21 MOV21 DEL42 DEL33 DEL27 DEL42 DEL42 DEL7 DEL21 DEL8 DEL52 DEL42 DEL43 DEL42 DEL42 DEL42 DEL42 DEL32 DEL59 DEL60 DEL8 DEL51 DEL25 DEL8