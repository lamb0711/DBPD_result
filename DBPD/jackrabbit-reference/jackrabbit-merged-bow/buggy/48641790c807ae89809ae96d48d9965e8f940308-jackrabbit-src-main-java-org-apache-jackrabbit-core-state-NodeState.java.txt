JCR-471: Create resource sensitive cache for item states


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@418263 13f79535-47bb-0310-9956-ffa450edef68

+
+    /**
+     * {@inheritDoc}
+     */
+    public long getMemoryConsumption() {
+        /*
+        private QName nodeTypeName;
+        private Set mixinTypeNames = Collections.EMPTY_SET;
+        private NodeId id;
+        private NodeId parentId;
+        private NodeDefId defId;
+        private ChildNodeEntries childNodeEntries = new ChildNodeEntries();
+        private boolean sharedChildNodeEntries = false;
+        private HashSet propertyNames = new HashSet();
+        private boolean sharedPropertyNames = false;
+
+        we assume an average QName localname of 30 chars.
+        NodeId = 8 + UUID(24) + hashcode(4) = 36
+        QName = 8 + hash(4) + string(38+2*len) + namespace(4) + localName(38+2*len) ~ 250
+        NodeDefId = 8 + id(4) = 12
+        ChildNodeEntries = 8 + n * (name(256) + index(4) + id(36) + hashentry(16)) ~ n*300
+        PropNames = 8 + n * ( name(250))
+        */
+        return 350 + mixinTypeNames.size() * 250 + childNodeEntries.size() * 300
+                + propertyNames.size() * 250;
+    }
+

INS31 INS29 INS83 INS39 INS42 INS8 INS65 INS41 INS65 INS27 INS27 INS27 INS27 INS27 INS32 INS34 INS34 INS27 INS32 INS34 INS42 INS42 INS32 INS34 INS42 INS42 INS42 INS42