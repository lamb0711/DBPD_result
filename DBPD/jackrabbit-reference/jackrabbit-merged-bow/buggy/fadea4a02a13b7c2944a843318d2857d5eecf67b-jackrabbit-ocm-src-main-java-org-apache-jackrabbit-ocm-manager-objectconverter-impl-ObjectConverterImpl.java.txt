Patch provided by Boni Gopalan for issue JCR-1784 (The UUID of the collection elements changes on update). I didn't modify the class AbstractMapperImpl. This modification is not necessary.
I also added unit tests for the annotation support. 

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@702237 13f79535-47bb-0310-9956-ffa450edef68

+	public void update(Session session, String uuId, Object object) {
+		try {
+			ClassDescriptor classDescriptor = mapper.getClassDescriptorByClass(ReflectionUtils.getBeanClass(object));
+			Node objectNode = session.getNodeByUUID(uuId);
+
+			checkNodeType(session, classDescriptor);
+
+			checkCompatiblePrimaryNodeTypes(session, objectNode, classDescriptor, false);
+
+			simpleFieldsHelp.storeSimpleFields(session, object, classDescriptor, objectNode);
+			updateBeanFields(session, object, classDescriptor, objectNode);
+			updateCollectionFields(session, object, classDescriptor, objectNode);
+			simpleFieldsHelp.refreshUuidPath(session, classDescriptor, objectNode, object);
+		} catch (PathNotFoundException pnfe) {
+			throw new ObjectContentManagerException("Impossible to update the object with UUID: " + uuId , pnfe);
+		} catch (RepositoryException re) {
+			throw new org.apache.jackrabbit.ocm.exception.RepositoryException("Impossible to update the object with UUID: " + uuId, re);
+		}
+	}
+	
+	
+	/**
+	 *
+	 * @see org.apache.jackrabbit.ocm.manager.objectconverter.ObjectConverter#update(javax.jcr.Session,
+	 *      javax.jcr.Node, java.lang.String, java.lang.Object)
+	 */

INS31 INS29 INS83 INS39 INS42 INS44 INS44 INS44 INS8 INS65 INS43 INS42 INS43 INS42 INS43 INS42 INS54 INS68 INS42 INS42 INS42 INS8 INS12 INS12 INS40 INS42 INS69 INS69 INS69 INS69 INS60 INS60 INS21 INS21 INS21 INS21 INS21 INS21 INS44 INS8 INS44 INS8 INS43 INS43 INS43 INS43 INS43 INS59 INS43 INS59 INS32 INS32 INS32 INS32 INS32 INS32 INS43 INS42 INS53 INS43 INS42 INS53 INS40 INS40 INS40 INS40 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS9 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS42 INS14 INS42 INS14 INS42 INS42 INS32 INS42 INS42 INS42 INS43 INS27 INS42 INS43 INS27 INS42 INS42 INS42 INS42 INS42 INS45 INS42 INS40 INS45 INS42