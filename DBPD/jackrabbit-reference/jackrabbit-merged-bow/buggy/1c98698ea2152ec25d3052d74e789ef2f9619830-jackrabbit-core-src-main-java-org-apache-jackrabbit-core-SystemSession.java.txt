JCR-2887 : Split PrivilegeRegistry in a per-session manager instance and a repository level registry [work in progress]

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1072154 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.core.security.authorization.PrivilegeRegistry;
+import org.apache.jackrabbit.core.security.authorization.PrivilegeManager;
-        private final PrivilegeRegistry privilegeRegistry;
-
-            privilegeRegistry = new PrivilegeRegistry(SystemSession.this);
-         * @see AbstractAccessControlManager#getPrivilegeRegistry()
+         * @see AbstractAccessControlManager#getPrivilegeManager()
-        protected PrivilegeRegistry getPrivilegeRegistry()
-                throws RepositoryException {
-            return privilegeRegistry;
+        @Override
+        protected PrivilegeManager getPrivilegeManager() throws RepositoryException {
+            return context.getPrivilegeManager();
-            return new Privilege[] {getPrivilegeRegistry().getPrivilege(Privilege.JCR_ALL)};
+            return new Privilege[] {getPrivilegeManager().getPrivilege(Privilege.JCR_ALL)};

UPD40 INS78 UPD43 UPD42 INS42 UPD42 INS32 UPD42 INS42 INS42 UPD42 DEL83 DEL83 DEL42 DEL43 DEL42 DEL59 DEL23 DEL42 DEL42 DEL43 DEL42 DEL52 DEL14 DEL7 DEL21 DEL42