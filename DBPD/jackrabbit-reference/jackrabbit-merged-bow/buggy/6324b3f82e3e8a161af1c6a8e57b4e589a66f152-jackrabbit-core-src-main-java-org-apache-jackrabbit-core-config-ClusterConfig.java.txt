JCR-1438: Replace Config classes with factories

Replace JournalConfig with a JournalFactory.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@816237 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.RepositoryException;
+
+import org.apache.jackrabbit.core.journal.Journal;
+import org.apache.jackrabbit.core.journal.JournalFactory;
+import org.apache.jackrabbit.spi.commons.namespace.NamespaceResolver;
+
- * Cluster configuration. This includes the journal configuration
- * {@link JournalConfig}.
+ * Cluster configuration.
-public class ClusterConfig {
+public class ClusterConfig implements JournalFactory {
-     * Journal configuration.
+     * Journal factory.
-    private final JournalConfig jc;
+    private final JournalFactory jf;
-    public ClusterConfig(String id, long syncDelay, JournalConfig jc) {
+    public ClusterConfig(String id, long syncDelay, JournalFactory jf) {
-        this.jc = jc;
+        this.jf = jf;
-     * Returns the journal configuration.
+     * Returns an initialized journal instance.
-     * @return journal configuration
+     * @param resolver namespace resolver
+     * @return initialized journal
+     * @throws RepositoryException 
+     * @throws RepositoryException if the journal can not be created
-    public JournalConfig getJournalConfig() {
-        return jc;
+    public Journal getJournal(NamespaceResolver resolver)
+            throws RepositoryException {
+        return jf.getJournal(resolver);
+

INS26 INS26 INS26 INS26 INS40 INS40 INS40 INS40 INS43 INS42 UPD43 UPD43 UPD42 INS44 INS43 UPD66 UPD42 UPD42 UPD43 UPD42 INS65 INS65 INS65 UPD42 INS43 INS42 INS42 UPD66 UPD42 UPD66 INS42 INS66 UPD66 INS42 INS66 INS42 INS66 INS42 INS32 UPD42 INS42 INS42 INS42 UPD42 DEL42 DEL65 DEL66 DEL42