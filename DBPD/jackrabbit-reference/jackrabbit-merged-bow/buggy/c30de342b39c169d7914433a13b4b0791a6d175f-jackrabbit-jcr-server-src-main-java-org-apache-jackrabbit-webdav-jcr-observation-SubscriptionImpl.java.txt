JCR-2453 - Break the spi2dav dependency to jcr-server

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1002639 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.commons.webdav.EventUtil;
-    /**
-     * Element representing the 'nodeadded' event type.
-     * @see javax.jcr.observation.Event#NODE_ADDED
-     */
-    private static final String EVENT_NODEADDED = "nodeadded";
-
-    /**
-     * Element representing the 'noderemoved' event type.
-     * @see javax.jcr.observation.Event#NODE_REMOVED
-     */
-    private static final String EVENT_NODEREMOVED = "noderemoved";
-
-    /**
-     * Element representing the 'propertyadded' event type.
-     * @see javax.jcr.observation.Event#PROPERTY_ADDED
-     */
-    private static final String EVENT_PROPERTYADDED = "propertyadded";
-
-    /**
-     * Element representing the 'propertyremoved' event type.
-     * @see javax.jcr.observation.Event#PROPERTY_REMOVED
-     */
-    private static final String EVENT_PROPERTYREMOVED = "propertyremoved";
-
-    /**
-     * Element representing the 'propertychanged' event type.
-     * @see javax.jcr.observation.Event#PROPERTY_CHANGED
-     */
-    private static final String EVENT_PROPERTYCHANGED = "propertychanged";
-
-    /**
-     * Element representing the 'nodemoved' event type.
-     * @see javax.jcr.observation.Event#NODE_MOVED
-     */
-    private static final String EVENT_NODEMOVED = "nodemoved";
-
-    /**
-     * Element representing the 'persist' event type.
-     * @see javax.jcr.observation.Event#PERSIST
-     */
-    private static final String EVENT_PERSIST = "persist";
-
-        String localName;
-        switch (jcrEventType) {
-            case Event.NODE_ADDED:
-                localName = EVENT_NODEADDED;
-                break;
-            case Event.NODE_REMOVED:
-                localName = EVENT_NODEREMOVED;
-                break;
-            case Event.PROPERTY_ADDED:
-                localName = EVENT_PROPERTYADDED;
-                break;
-            case Event.PROPERTY_CHANGED:
-                localName = EVENT_PROPERTYCHANGED;
-                break;
-            case Event.PROPERTY_REMOVED:
-                localName = EVENT_PROPERTYREMOVED;
-                break;
-            case Event.NODE_MOVED:
-                localName = EVENT_NODEMOVED;
-                break;
-            case Event.PERSIST:
-                localName = EVENT_PERSIST;
-                break;
-            default: // no default
-                throw new IllegalArgumentException("Invalid JCR event type: " + jcrEventType);
-        }
+        String localName = EventUtil.getEventName(jcrEventType);
-        EventType[] types = new EventType[] {
-                getEventType(javax.jcr.observation.Event.NODE_ADDED),
-                getEventType(javax.jcr.observation.Event.NODE_REMOVED),
-                getEventType(javax.jcr.observation.Event.PROPERTY_ADDED),
-                getEventType(javax.jcr.observation.Event.PROPERTY_CHANGED),
-                getEventType(javax.jcr.observation.Event.PROPERTY_REMOVED),
-                getEventType(javax.jcr.observation.Event.NODE_MOVED),
-                getEventType(javax.jcr.observation.Event.PERSIST)
-        };
+        EventType[] types = DefaultEventType.create(EventUtil.EVENT_ALL, NAMESPACE);
-        int eType;
-        if (EVENT_NODEADDED.equals(eventName)) {
-            eType = Event.NODE_ADDED;
-        } else if (EVENT_NODEREMOVED.equals(eventName)) {
-            eType = Event.NODE_REMOVED;
-        } else if (EVENT_PROPERTYADDED.equals(eventName)) {
-            eType = Event.PROPERTY_ADDED;
-        } else if (EVENT_PROPERTYCHANGED.equals(eventName)) {
-            eType = Event.PROPERTY_CHANGED;
-        } else if (EVENT_PROPERTYREMOVED.equals(eventName)) {
-            eType = Event.PROPERTY_REMOVED;
-        } else if (EVENT_NODEMOVED.equals(eventName)) {
-            eType = Event.NODE_MOVED;
-        } else if (EVENT_PERSIST.equals(eventName)) {
-            eType = Event.PERSIST;
-        } else {
+        if (!EventUtil.isValidEventName(eventName)) {
-        return eType;
+        return EventUtil.getJcrEventType(eventName);

INS26 INS40 INS60 MOV25 INS41 MOV43 INS59 INS38 INS32 MOV42 INS32 INS32 INS32 UPD42 MOV42 UPD42 MOV42 MOV42 INS42 INS42 INS42 UPD42 MOV42 UPD42 MOV42 UPD40 MOV40 UPD42 MOV42 UPD42 MOV42 UPD42 MOV42 MOV42 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL66 DEL65 DEL40 DEL42 DEL67 DEL65 DEL29 DEL83 DEL83 DEL83 DEL42 DEL43 DEL42 DEL45 DEL59 DEL23 DEL59 DEL60 DEL42 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL40 DEL49 DEL42 DEL42 DEL7 DEL21 DEL10 DEL49 DEL42 DEL43 DEL45 DEL42 DEL27 DEL14 DEL53 DEL50 DEL42 DEL43 DEL85 DEL5 DEL40 DEL32 DEL40 DEL32 DEL42 DEL40 DEL32 DEL42 DEL40 DEL32 DEL42 DEL40 DEL32 DEL42 DEL32 DEL40 DEL32 DEL4 DEL3 DEL39 DEL42 DEL59 DEL60 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL42 DEL42 DEL42 DEL32 DEL42 DEL40 DEL7 DEL21 DEL8 DEL25 DEL25 DEL25 DEL25 DEL25 DEL25 DEL42 DEL41