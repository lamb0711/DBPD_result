JCR-1799 updating events swallowed (CacheBehavior.OBSERVATION)   	
JCR-1783 incomplete changelog when combining move with removal of new destination parent

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@704361 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.jcr2spi.state.PropertyState;
+import org.apache.jackrabbit.spi.QValue;
+import javax.jcr.InvalidItemStateException;
-    public NodeId getId();
+    public NodeId getId() throws InvalidItemStateException, RepositoryException;
-    public NodeId getWorkspaceId();
+    public NodeId getWorkspaceId() throws InvalidItemStateException, RepositoryException;
+     * @throws InvalidItemStateException
+     * @throws RepositoryException
-    public int getIndex();
+    public int getIndex() throws InvalidItemStateException, RepositoryException;
-    public NodeState addNewNodeEntry(Name nodeName, String uniqueID, Name primaryNodeType, QNodeDefinition definition) throws RepositoryException;
+    public NodeEntry addNewNodeEntry(Name nodeName, String uniqueID, Name primaryNodeType, QNodeDefinition definition) throws RepositoryException;
-    public void addPropertyEntries(Collection propNames) throws ItemExistsException, RepositoryException;
+    public void setPropertyEntries(Collection propNames) throws ItemExistsException, RepositoryException;
-     * @return The PropertyState associated with the new property entry.
+     * @param definition
+     * @param values
+     * @param propertyType
+     * @return the new entry.
-     * @throws RepositoryException if an unexpected error occurs.
+     * @throws RepositoryException
-    public PropertyState addNewPropertyEntry(Name propName, QPropertyDefinition definition) throws ItemExistsException, RepositoryException;
+    public PropertyEntry addNewPropertyEntry(Name propName, QPropertyDefinition definition, QValue[] values, int propertyType) throws ItemExistsException, RepositoryException;

MOV26 INS26 UPD40 INS40 INS43 INS43 INS43 INS43 INS43 INS43 UPD43 UPD42 UPD43 INS44 INS44 INS42 INS42 INS42 INS42 INS65 INS65 INS42 INS42 UPD42 INS65 INS65 INS65 UPD42 INS5 INS42 INS39 INS42 INS42 INS42 INS42 INS42 INS42 UPD66 INS43 INS85 INS42 DEL66