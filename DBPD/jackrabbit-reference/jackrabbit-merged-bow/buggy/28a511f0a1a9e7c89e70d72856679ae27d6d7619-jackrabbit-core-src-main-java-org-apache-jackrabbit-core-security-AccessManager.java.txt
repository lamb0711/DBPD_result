JCR-2573 - Performance of AC Evaluation [work in progress]

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@950440 13f79535-47bb-0310-9956-ffa450edef68

-     * Determines whether the item at the specified absolute path can be read.
+     * Determines whether the item with the specified <code>itemPath</code>
+     * or <code>itemId</code> can be read. Either of the two parameters
+     * may be <code>null</code>.<br>
+     * Note, that this method should only be called for persisted items as NEW
+     * items may not be visible to the permission evaluation.
+     * For new items {@link #isGranted(Path, int)} should be used instead.<p/>
+     * If this method is called with both Path and ItemId it is left to the
+     * evaluation, which parameter is used.
-     * @param itemPath Path to the item to be tested.s
+     * @param itemPath The path to the item or <code>null</code> if itemId
+     * should be used to determine the READ permission.
+     * @param itemId Id of the item to be tested or <code>null</code> if the
+     * itemPath should be used to determine the permission.
-     * @throws RepositoryException if an error occurs.
+     * @throws RepositoryException if the item is NEW and only an itemId is
+     * specified or if another error occurs.
-    boolean canRead(Path itemPath) throws RepositoryException;
+    boolean canRead(Path itemPath, ItemId itemId) throws RepositoryException;

INS44 INS65 INS43 INS42 UPD66 INS66 INS66 INS66 INS66 INS66 INS65 INS66 INS66 INS66 UPD66 INS66 INS42 INS66 INS66 INS66 UPD66 INS42 INS68 INS42 INS69 INS69 INS43 INS39 INS42