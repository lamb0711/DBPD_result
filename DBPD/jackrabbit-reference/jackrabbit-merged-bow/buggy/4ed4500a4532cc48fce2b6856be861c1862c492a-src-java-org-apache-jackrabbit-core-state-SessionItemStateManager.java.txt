fixed incorrect test cases and fixed code that caused valid testcases to fail

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@160315 13f79535-47bb-0310-9956-ffa450edef68

+                } catch (RepositoryException re) {
+                    // unable to build path, assume that it (or any of
+                    // its ancestors) has been removed externally
+                    String msg = id
+                            + ": the item seems to have been removed externally.";
+                    log.debug(msg);
+                    throw new InvalidItemStateException(msg);
-                     * ItemNotFoundException should only be thrown if
+                     * InvalidItemStateException should only be thrown if
-                     * => log warning and ignore for now
+                     * => throw InvalidItemStateException for now
-                    log.warn(id + ": inconsistent hierarchy state", infe);
-                    continue;
+                    // unable to build path, assume that it (or any of
+                    // its ancestors) has been removed externally
+                    String msg = id
+                            + ": the item seems to have been removed externally.";
+                    log.debug(msg);
+                    throw new InvalidItemStateException(msg);

INS12 INS44 INS8 INS43 INS42 INS60 INS21 INS53 INS60 INS21 INS53 INS42 INS43 INS59 INS32 INS14 INS43 INS59 INS32 INS14 INS42 INS42 INS27 INS42 INS42 INS42 INS43 INS42 INS42 INS42 INS27 UPD42 MOV42 INS42 INS42 INS43 INS42 INS42 INS45 INS42 MOV42 UPD45 MOV45 INS42 DEL42 DEL42 DEL27 DEL32 DEL21 DEL18