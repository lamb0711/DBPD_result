JCR-785 - Updates to multiple workspaces (e.g. in a transaction) locked in cluster journal


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@517141 13f79535-47bb-0310-9956-ffa450edef68

-import EDU.oswego.cs.dl.util.concurrent.WriterPreferenceReadWriteLock;
+import EDU.oswego.cs.dl.util.concurrent.ReentrantWriterPreferenceReadWriteLock;
- * Base implementation for a journal.
+ * Base journal implementation.
-     * Read
+     * Journal lock, allowing multiple readers (synchronizing their contents)
+     * but only one writer (appending a new entry).
-    private final ReadWriteLock rwLock = new WriterPreferenceReadWriteLock();
+    private final ReadWriteLock rwLock = new ReentrantWriterPreferenceReadWriteLock();
+     * Subclass responsibility.

UPD40 UPD66 UPD66 INS66 UPD43 INS66 UPD42