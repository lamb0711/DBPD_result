JCR-953: Added XASession support to JCR-RMI based on a patch by Berry van Halderen.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@573739 13f79535-47bb-0310-9956-ffa450edef68

+import javax.transaction.xa.XAResource;
+import org.apache.jackrabbit.api.XASession;
+import org.apache.jackrabbit.rmi.remote.RemoteXAResource;
+     * In case the underlying session is transaction enabled, the
+     * remote interface is will be transaction enabled too through
+     * the {@link ServerXASession}.
+     *
-        return new ServerSession(session, this);
+        if (session instanceof XASession) {
+            return new ServerXASession((XASession) session, this);
+        } else {
+            return new ServerSession(session, this);
+        }
+    /**
+     * Creates a {@link ServerXAResource} instance.
+     */
+    public RemoteXAResource getRemoteXAResource(XAResource resource)
+            throws RemoteException {
+        return new ServerXAResource(resource);
+    }
+

INS26 INS26 INS26 INS40 INS40 INS40 INS31 INS8 INS29 INS83 INS43 INS42 INS44 INS43 INS8 INS25 INS65 INS42 INS43 INS42 INS42 INS41 INS66 INS66 INS66 INS65 INS66 INS62 INS8 MOV8 INS66 INS65 INS66 INS42 INS14 INS42 INS42 INS43 INS41 INS42 INS43 INS42 INS42 INS14 INS42 INS43 INS11 INS52 INS42 INS43 INS42 INS42