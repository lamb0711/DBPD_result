JCR-2104: JSR 283 Versioning
   - VersionHistory.getAllFrozenNodes()  (move iteratoradaptor from core to jcr-commons), VersionHistory.getVersionableIdentifier()
   - Version.getFrozenNode, Version.getLinearPredecessor()
   - VersionManager (work in progress): 170-methods, shallow merge, checkpoint
      -> extend SPI interfaces accordingly

JCR-2003: JCR2SPI / SPI: Add support for JCR 2.0
   - Session.hasPermission()
   - Node.getProperties/getNodes with glob
   - Node.getIdentifier()

JCR-2004: Update SPI locking to match JCR 2.0
   - separate JCR LockManager from the internal lock manager

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@773828 13f79535-47bb-0310-9956-ffa450edef68

+import org.apache.jackrabbit.commons.iterator.FrozenNodeIteratorAdapter;
-        checkStatus();
-        return getProperty(NameConstants.JCR_VERSIONABLEUUID).getString();
+        return getVersionableIdentifier();
-        // TODO
-        throw new UnsupportedRepositoryOperationException("JCR-1104");
+        return new FrozenNodeIteratorAdapter(getAllVersions());
-    public NodeIterator getAllLinearFrozenNodes() throws RepositoryException {
+    public NodeIterator getAllLinearFrozenNodes() throws RepositoryException {        
-        // TODO
-        throw new UnsupportedRepositoryOperationException("JCR-1104");
+        checkStatus();
+        return getProperty(NameConstants.JCR_VERSIONABLEUUID).getString();

INS26 MOV31 MOV31 INS40 MOV29 UPD42 MOV29 UPD42 INS41 INS41 INS32 INS14 INS42 UPD43 MOV43 INS32 UPD42 INS42 DEL42 DEL43 DEL45 DEL14 DEL53 DEL45 DEL14 DEL53