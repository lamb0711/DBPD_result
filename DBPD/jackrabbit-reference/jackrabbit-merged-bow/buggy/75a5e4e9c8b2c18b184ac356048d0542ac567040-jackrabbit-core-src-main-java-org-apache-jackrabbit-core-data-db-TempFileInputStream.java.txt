JCR-3377 DataStore Temp-Files will not be deleted as side effect of JCR-3318

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1358543 13f79535-47bb-0310-9956-ffa450edef68

+    private boolean delayedResourceCleanup = true;
-     * The file is deleted if the input stream is closed or fully read.
+     * The file is deleted if the input stream is closed or fully read and 
+     * delayedResourceCleanup was set to true. Otherwise you must call {@link #deleteFile()}.
+     * @param delayedResourceCleanup
-    public TempFileInputStream(File file) throws FileNotFoundException {
+    public TempFileInputStream(File file, boolean delayedResourceCleanup) throws FileNotFoundException {
+        this.delayedResourceCleanup = delayedResourceCleanup;
+            if (!delayedResourceCleanup) {
+            	deleteFile();
+            }

INS23 INS83 INS39 INS59 INS44 INS42 INS9 INS65 INS39 INS42 INS21 UPD66 INS66 INS65 INS66 INS42 INS7 INS68 INS22 INS42 INS25 INS42 INS52 INS42 INS38 INS8 INS42 INS21 INS32 INS42