JCR-97: Improve Checkstyle conformance

Fix various issues like empty if statements, missing braces, dead code, etc.

Avoid a ClassCastException from ConcurrentCache.values()

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@1196770 13f79535-47bb-0310-9956-ffa450edef68

-                    // Check the old parent
+                    // Check the old parent; it should be either also deleted
+                    // or at least modified to reflect the removal of a child
-                    if (changeLog.deleted(oldParentId)) {
-                        // parent has been deleted as well
-                    } else if (changeLog.isModified(oldParentId)) {
-                        // the modified state will be check later on
-                    } else {
+                    if (!changeLog.deleted(oldParentId)
+                            && !changeLog.isModified(oldParentId)) {
-                        // Check the next child
+                        // Check the next child; it should be either also deleted
+                        // or at least modified to reflect being moved elsewhere
-
-                        if (changeLog.deleted(childId)) {
-                            // child has been deleted as well
-                        } else if (changeLog.isModified(childId)) {
-
-                            // the modified state will be check later on
-                        } else {
+                        if (!changeLog.deleted(childId)
+                                && !changeLog.isModified(childId)) {
-                // Check whether this node is the root node
-                if (parentId == null && oldParentId == null) {
-                    // The root node can be ignored
-
-                } else if (!parentId.equals(oldParentId)) {
-
-                    // This node has been moved, check whether the parent has been modified as well
+                if (!(parentId == null && oldParentId == null)
+                        && !parentId.equals(oldParentId)) {
+                    // This node (not the root) has been moved; check
+                    // whether the parent has been modified as well

MOV8 INS70 MOV44 MOV32 MOV8 MOV62 MOV60 MOV60 MOV60 MOV25 MOV60 MOV25 MOV38 INS8 INS27 MOV60 MOV25 INS70 INS38 MOV38 INS27 MOV44 MOV32 INS8 INS36 INS38 INS38 MOV60 INS25 MOV27 MOV32 MOV32 INS27 MOV8 INS38 INS38 MOV60 MOV21 MOV53 MOV32 MOV32 DEL8 DEL8 DEL8 DEL25 DEL25 DEL8 DEL70 DEL25 DEL70 DEL8 DEL8 DEL25