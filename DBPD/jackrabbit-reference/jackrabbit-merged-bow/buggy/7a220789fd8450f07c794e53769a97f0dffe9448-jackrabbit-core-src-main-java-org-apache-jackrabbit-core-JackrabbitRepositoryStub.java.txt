JCR-1565: JSR 283 lifecycle management

Added a simple NodeImpl.assignLifecyclePolicy method for assigning a lifecycle policy and an initial lifecycle state to a node.

Added simple TCK tests for lifecycle management.

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@795136 13f79535-47bb-0310-9956-ffa450edef68

+import javax.jcr.nodetype.NodeType;
+        addLifecycleTestData(getOrAddNode(data, "lifecycle"));
+    /**
+     * Creates a lifecycle policy node and another node with a lifecycle
+     * referencing that policy.
+     */
+    private void addLifecycleTestData(Node node) throws RepositoryException {
+        Node policy = getOrAddNode(node, "policy");
+        policy.addMixin(NodeType.MIX_REFERENCEABLE);
+        Node transitions = getOrAddNode(policy, "transitions");
+        Node transition = getOrAddNode(transitions, "identity");
+        transition.setProperty("from", "identity");
+        transition.setProperty("to", "identity");
+
+        Node lifecycle = getOrAddNode(node, "node");
+        ((NodeImpl) lifecycle).assignLifecyclePolicy(policy, "identity");
+    }
+

INS26 INS40 INS31 INS29 INS83 INS39 INS42 INS44 INS43 INS8 INS21 INS65 INS43 INS42 INS42 INS60 INS21 INS60 INS60 INS21 INS21 INS60 INS21 INS32 INS66 INS66 INS42 INS43 INS59 INS32 INS43 INS59 INS43 INS59 INS32 INS32 INS43 INS59 INS32 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS40 INS42 INS42 INS32 INS42 INS42 INS32 INS42 INS42 INS45 INS45 INS42 INS42 INS45 INS45 INS42 INS42 INS32 INS36 INS42 INS42 INS45 INS42 INS42 INS45 INS42 INS42 INS45 INS42 INS42 INS45 INS42 INS42 INS45 INS42 INS42 INS45 INS11 INS43 INS42 INS42