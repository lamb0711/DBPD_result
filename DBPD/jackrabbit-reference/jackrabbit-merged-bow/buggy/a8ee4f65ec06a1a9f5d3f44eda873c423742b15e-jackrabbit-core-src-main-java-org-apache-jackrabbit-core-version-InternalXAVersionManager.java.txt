JCR-2255  activity storage path


git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@803470 13f79535-47bb-0310-9956-ffa450edef68

+     * Persistent root node of the version histories.
+     */
+    private final NodeStateEx historyRoot;
+
+    /**
+     * Persistent root node of the activities.
+     */
+    private final NodeStateEx activitiesRoot;
+
+    /**
-        super(ntReg);
+        super(ntReg, vMgr.historiesId, vMgr.activitiesId);
-            state = (NodeState) stateMgr.getItemState(vMgr.getHistoryRootId());
+            state = (NodeState) stateMgr.getItemState(historiesId);
+        try {
+            state = (NodeState) stateMgr.getItemState(activitiesId);
+        } catch (ItemStateException e) {
+            throw new RepositoryException("Unable to retrieve activities root", e);
+        }
+        this.activitiesRoot = new NodeStateEx(stateMgr, ntReg, state, NameConstants.JCR_ACTIVITIES);
+        // never used
+        return null;
+    }
+
+    public NodeId[] getVirtualRootIds() {
+        // never used
+    protected NodeStateEx getHistoryRoot() {
+        return historyRoot;
+    }
+
+    /**
+     * {@inheritDoc}
+     */
+    protected NodeStateEx getActivitiesRoot() {
+        return activitiesRoot;
+    }
+
+    /**
+     * {@inheritDoc}
+     */

INS23 INS23 INS31 INS31 INS31 INS29 INS83 INS83 INS43 INS59 INS29 INS83 INS83 INS43 INS59 INS83 INS5 INS42 INS8 INS29 INS83 INS43 INS42 INS8 INS29 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS65 INS42 INS42 INS54 INS21 INS43 INS85 INS41 INS65 INS42 INS41 INS65 INS42 INS41 INS66 INS66 INS40 INS40 INS8 INS12 INS7 INS42 INS33 INS65 INS42 INS65 INS42 INS21 INS44 INS8 INS22 INS14 INS7 INS43 INS42 INS53 INS52 INS42 INS43 INS42 INS42 INS42 INS40 INS42 INS11 INS42 INS14 INS42 INS43 INS32 INS43 INS45 INS42 UPD42 MOV42 INS42 INS42 INS42 INS42 INS42 DEL42 DEL32