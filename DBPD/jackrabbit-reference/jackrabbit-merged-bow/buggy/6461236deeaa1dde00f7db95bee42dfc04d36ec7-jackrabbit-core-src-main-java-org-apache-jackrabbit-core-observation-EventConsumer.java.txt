JCR-2087 Upgrade to Java 5 as the base platform

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@785540 13f79535-47bb-0310-9956-ffa450edef68

-    private final Map accessDenied = Collections.synchronizedMap(new WeakHashMap());
+    private final Map<EventStateCollection, Set<ItemId>> accessDenied = Collections.synchronizedMap(new WeakHashMap<EventStateCollection, Set<ItemId>>());
-        Iterator it = events.iterator();
-        Set denied = null;
+        Iterator<EventState> it = events.iterator();
+        Set<ItemId> denied = null;
-            EventState state = (EventState) it.next();
+            EventState state = it.next();
-                        denied = new HashSet();
+                        denied = new HashSet<ItemId>();
-    void prepareDeleted(EventStateCollection events, Iterator deletedItems) {
-        Set denied = null;
-        Set deletedIds = new HashSet();
+    void prepareDeleted(EventStateCollection events, Iterator<ItemState> deletedItems) {
+        Set<ItemId> denied = null;
+        Set<ItemId> deletedIds = new HashSet<ItemId>();
-            deletedIds.add(((ItemState) deletedItems.next()).getId());
+            deletedIds.add((deletedItems.next()).getId());
-        for (Iterator it = events.iterator(); it.hasNext();) {
-            EventState evState = (EventState) it.next();
+        for (Iterator<EventState> it = events.iterator(); it.hasNext();) {
+            EventState evState = it.next();
-                        denied = new HashSet();
+                        denied = new HashSet<ItemId>();
-        Set denied = (Set) accessDenied.remove(events);
+        Set<ItemId> denied = accessDenied.remove(events);
-        for (Iterator it = events.iterator(); it.hasNext() && session.isLive();) {
-            EventState state = (EventState) it.next();
+        for (Iterator<EventState> it = events.iterator(); it.hasNext() && session.isLive();) {
+            EventState state = it.next();
-                        denied = new HashSet();
+                        denied = new HashSet<ItemId>();

INS74 MOV43 INS43 INS74 INS74 INS42 INS43 INS43 INS74 INS74 MOV43 MOV43 INS74 INS74 INS74 INS42 INS42 INS74 MOV43 MOV43 MOV43 INS43 MOV43 INS43 MOV43 INS43 INS74 MOV43 INS43 MOV32 INS74 MOV43 INS43 INS74 INS42 MOV43 INS42 INS42 UPD42 MOV42 INS74 MOV43 MOV43 MOV43 INS42 MOV43 MOV43 MOV43 INS42 MOV43 INS43 MOV32 MOV43 INS43 MOV32 MOV32 INS42 INS42 MOV32 INS74 INS74 INS74 MOV43 INS43 MOV43 INS43 MOV43 INS43 INS42 INS42 INS42 DEL11 DEL11 DEL11 DEL11 DEL11