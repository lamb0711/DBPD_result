JCR-257: Use separate index for jcr:system tree

git-svn-id: https://svn.apache.org/repos/asf/incubator/jackrabbit/trunk@357961 13f79535-47bb-0310-9956-ffa450edef68

+     * The query handler for the jcr:system tree
+     */
+    private final QueryHandler parentHandler;
+
+    /**
+     * UUID of the node that should be excluded from indexing.
+     */
+    private final String excludedNodeUUID;
+
+    /**
-     * @param fs         a {@link FileSystem} this <code>QueryHandler</code> may
-     *                   use to store its index. If no <code>FileSystem</code>
-     *                   has been configured <code>fs</code> is
-     *                   <code>null</code>.
-     * @param stateMgr   provides persistent item states.
-     * @param rootUUID   the uuid of the root node.
-     * @param ntRegistry the node type registry.
+     * @param fs               a {@link FileSystem} this <code>QueryHandler</code>
+     *                         may use to store its index. If no
+     *                         <code>FileSystem</code> has been configured
+     *                         <code>fs</code> is <code>null</code>.
+     * @param stateMgr         provides persistent item states.
+     * @param rootUUID         the uuid of the root node.
+     * @param ntRegistry       the node type registry.
+     * @param parentHandler    the parent query handler or <code>null</code> it
+     *                         there is no parent handler.
+     * @param excludedNodeUUID uuid of the node that should be excluded from
+     *                         indexing. Any descendant of that node is also
+     *                         excluded from indexing.
-                               NodeTypeRegistry ntRegistry) {
+                               NodeTypeRegistry ntRegistry,
+                               QueryHandler parentHandler,
+                               String excludedNodeUUID) {
+        this.parentHandler = parentHandler;
+        this.excludedNodeUUID = excludedNodeUUID;
+     * Returns the parent query handler.
+     * @return the parent query handler.
+     */
+    public QueryHandler getParentHandler() {
+        return parentHandler;
+    }
+
+    /**
+     * Returns the uuid of the node that should be excluded from indexing. Any
+     * descendant of this node is also excluded from indexing.
+     *
+     * @return the uuid of the exluded node.
+     */
+    public String getExcludedNodeUUID() {
+        return excludedNodeUUID;
+    }
+
+    /**

INS23 INS23 INS31 INS31 INS29 INS83 INS83 INS43 INS59 INS29 INS83 INS83 INS43 INS59 INS44 INS44 INS29 INS83 INS43 INS42 INS8 INS29 INS83 INS43 INS42 INS8 INS65 INS42 INS42 INS65 INS42 INS42 INS65 INS65 INS43 INS42 INS43 INS42 INS21 INS21 INS65 INS65 INS42 INS41 INS65 INS65 INS42 INS41 INS66 INS66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 UPD66 INS42 INS66 INS66 INS42 INS66 INS66 INS66 INS42 INS42 INS7 INS7 INS66 INS66 INS42 INS66 INS66 INS66 INS42 INS22 INS42 INS22 INS42 INS52 INS42 INS52 INS42