JCR-1169 Distribution of commons classes (adjust jackrabbit-core)

git-svn-id: https://svn.apache.org/repos/asf/jackrabbit/trunk@590014 13f79535-47bb-0310-9956-ffa450edef68

-import org.apache.jackrabbit.name.NamespaceResolver;
-import org.apache.jackrabbit.name.NoPrefixDeclaredException;
-import org.apache.jackrabbit.name.QName;
-import org.apache.jackrabbit.name.NameFormat;
-import org.apache.jackrabbit.name.Path;
+import org.apache.jackrabbit.name.NameConstants;
+import org.apache.jackrabbit.spi.Name;
+import org.apache.jackrabbit.spi.Path;
+import org.apache.jackrabbit.conversion.NameResolver;
+import javax.jcr.NamespaceException;
-    private final NamespaceResolver resolver;
+    private final NameResolver resolver;
-    private QueryFormat(QueryRootNode root, NamespaceResolver resolver)
+    private QueryFormat(QueryRootNode root, NameResolver resolver)
-    public static String toString(QueryRootNode root, NamespaceResolver resolver)
+    public static String toString(QueryRootNode root, NameResolver resolver)
-            QName[] selectProps = node.getSelectProperties();
+            Name[] selectProps = node.getSelectProperties();
-                QName nt = (QName) it.next();
+                Name nt = (Name) it.next();
-                sb.append(NameFormat.format(QName.NT_BASE, resolver));
+                sb.append(resolver.getJCRName(NameConstants.NT_BASE));
-        } catch (NoPrefixDeclaredException e) {
+        } catch (NamespaceException e) {
-        } catch (NoPrefixDeclaredException e) {
+        } catch (NamespaceException e) {
-                } catch (NoPrefixDeclaredException e) {
+                } catch (NamespaceException e) {
-                sb.append(NameFormat.format(QName.JCR_PATH, resolver));
+                sb.append(resolver.getJCRName(NameConstants.JCR_PATH));
-                sb.append(NameFormat.format(QName.JCR_PATH, resolver));
+                sb.append(resolver.getJCRName(NameConstants.JCR_PATH));
-                sb.append(NameFormat.format(QName.JCR_PATH, resolver));
+                sb.append(resolver.getJCRName(NameConstants.JCR_PATH));
-                sb.append(NameFormat.format(QName.JCR_PATH, resolver));
+                sb.append(resolver.getJCRName(NameConstants.JCR_PATH));
-                sb.append(NameFormat.format(QName.JCR_PATH, resolver));
+                sb.append(resolver.getJCRName(NameConstants.JCR_PATH));
-        } catch (NoPrefixDeclaredException e) {
+        } catch (NamespaceException e) {
-                    sb.append(NameFormat.format(node.getNameTest(), resolver));
-                } catch (NoPrefixDeclaredException e) {
+                    sb.append(resolver.getJCRName(node.getNameTest()));
+                } catch (NamespaceException e) {
-        } catch (NoPrefixDeclaredException e) {
+        } catch (NamespaceException e) {
-            } catch (NoPrefixDeclaredException e) {
+            } catch (NamespaceException e) {
-     * @param name     the <code>QName</code> to print.
+     * @param name     the <code>Name</code> to print.
-     * @throws NoPrefixDeclaredException if <code>name</code> contains a uri
+     * @throws NamespaceException if <code>name</code> contains a uri
-    private static void appendName(QName name,
-                                   NamespaceResolver resolver,
+    private static void appendName(Name name,
+                                   NameResolver resolver,
-            throws NoPrefixDeclaredException {
+            throws NamespaceException {
-        b.append(NameFormat.format(name, resolver));
+        b.append(resolver.getJCRName(name));

MOV26 MOV26 UPD40 UPD40 UPD40 UPD40 UPD40 UPD43 UPD43 UPD42 UPD43 UPD43 UPD43 UPD43 UPD42 UPD42 UPD42 UPD66 UPD42 UPD42 UPD42 UPD5 UPD43 UPD43 UPD43 UPD43 UPD42 UPD42 UPD43 UPD42 UPD42 UPD42 UPD42 UPD42 UPD43 UPD43 UPD42 UPD42 UPD43 UPD42 UPD42 UPD40 UPD43 UPD42 UPD42 UPD40 UPD42 UPD42 UPD40 UPD43 UPD42 UPD42 UPD42 UPD42 UPD40 UPD42 UPD42 UPD40 UPD42 UPD42 UPD40 UPD42 UPD42 UPD42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42 DEL42